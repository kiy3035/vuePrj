(self["webpackChunkvueprj"]=self["webpackChunkvueprj"]||[]).push([[998],{7749:function(t,e,i){"use strict";i.d(e,{GN:function(){return D}});i(560);var o=i(3494),n=i(3396);function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e,i){return e=m(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function u(t,e){if(null==t)return{};var i,o,n={},r=Object.keys(t);for(o=0;o<r.length;o++)i=r[o],e.indexOf(i)>=0||(n[i]=t[i]);return n}function c(t,e){if(null==t)return{};var i,o,n=u(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)i=r[o],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function h(t){return p(t)||d(t)||f(t)||y()}function p(t){if(Array.isArray(t))return g(t)}function d(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function f(t,e){if(t){if("string"===typeof t)return g(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function y(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(t,e){if("object"!==typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function m(t){var e=_(t,"string");return"symbol"===typeof e?e:String(e)}var v="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof i.g?i.g:"undefined"!==typeof self?self:{},b={exports:{}};(function(t){(function(e){var i=function(t,e,o){if(!u(e)||h(e)||p(e)||d(e)||l(e))return e;var n,r=0,s=0;if(c(e))for(n=[],s=e.length;r<s;r++)n.push(i(t,e[r],o));else for(var a in n={},e)Object.prototype.hasOwnProperty.call(e,a)&&(n[t(a,o)]=i(t,e[a],o));return n},o=function(t,e){e=e||{};var i=e.separator||"_",o=e.split||/(?=[A-Z])/;return t.split(o).join(i)},n=function(t){return f(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,(function(t,e){return e?e.toUpperCase():""})),t.substr(0,1).toLowerCase()+t.substr(1))},r=function(t){var e=n(t);return e.substr(0,1).toUpperCase()+e.substr(1)},s=function(t,e){return o(t,e).toLowerCase()},a=Object.prototype.toString,l=function(t){return"function"===typeof t},u=function(t){return t===Object(t)},c=function(t){return"[object Array]"==a.call(t)},h=function(t){return"[object Date]"==a.call(t)},p=function(t){return"[object RegExp]"==a.call(t)},d=function(t){return"[object Boolean]"==a.call(t)},f=function(t){return t-=0,t===t},g=function(t,e){var i=e&&"process"in e?e.process:e;return"function"!==typeof i?t:function(e,o){return i(e,t,o)}},y={camelize:n,decamelize:s,pascalize:r,depascalize:s,camelizeKeys:function(t,e){return i(g(n,e),t)},decamelizeKeys:function(t,e){return i(g(s,e),t,e)},pascalizeKeys:function(t,e){return i(g(r,e),t)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=y:e.humps=y})(v)})(b);var C=b.exports,w=["class","style"];function S(t){return t.split(";").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var i=e.indexOf(":"),o=C.camelize(e.slice(0,i)),n=e.slice(i+1).trim();return t[o]=n,t}),{})}function E(t){return t.split(/\s+/).reduce((function(t,e){return t[e]=!0,t}),{})}function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof t)return t;var o=(t.children||[]).map((function(t){return x(t)})),r=Object.keys(t.attributes||{}).reduce((function(e,i){var o=t.attributes[i];switch(i){case"class":e.class=E(o);break;case"style":e.style=S(o);break;default:e.attrs[i]=o}return e}),{attrs:{},class:{},style:{}});i.class;var a=i.style,l=void 0===a?{}:a,u=c(i,w);return(0,n.h)(t.tag,s(s(s({},e),{},{class:r.class,style:s(s({},r.style),l)},r.attrs),u),o)}var O=!1;try{O=!0}catch(k){}function R(){var t;!O&&console&&"function"===typeof console.error&&(t=console).error.apply(t,arguments)}function I(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?l({},t,e):{}}function T(t){var e,i=(e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip":!0===t.flip,"fa-flip-horizontal":"horizontal"===t.flip||"both"===t.flip,"fa-flip-vertical":"vertical"===t.flip||"both"===t.flip},l(e,"fa-".concat(t.size),null!==t.size),l(e,"fa-rotate-".concat(t.rotation),null!==t.rotation),l(e,"fa-pull-".concat(t.pull),null!==t.pull),l(e,"fa-swap-opacity",t.swapOpacity),l(e,"fa-bounce",t.bounce),l(e,"fa-shake",t.shake),l(e,"fa-beat",t.beat),l(e,"fa-fade",t.fade),l(e,"fa-beat-fade",t.beatFade),l(e,"fa-flash",t.flash),l(e,"fa-spin-pulse",t.spinPulse),l(e,"fa-spin-reverse",t.spinReverse),e);return Object.keys(i).map((function(t){return i[t]?t:null})).filter((function(t){return t}))}function P(t){return t&&"object"===a(t)&&t.prefix&&t.iconName&&t.icon?t:o.Qc.icon?o.Qc.icon(t):null===t?null:"object"===a(t)&&t.prefix&&t.iconName?t:Array.isArray(t)&&2===t.length?{prefix:t[0],iconName:t[1]}:"string"===typeof t?{prefix:"fas",iconName:t}:void 0}var D=(0,n.aZ)({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(t){return[!0,!1,"horizontal","vertical","both"].indexOf(t)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(t){return["right","left"].indexOf(t)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(t){return[90,180,270].indexOf(Number.parseInt(t,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(t){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(t)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(t,e){var i=e.attrs,r=(0,n.Fl)((function(){return P(t.icon)})),a=(0,n.Fl)((function(){return I("classes",T(t))})),l=(0,n.Fl)((function(){return I("transform","string"===typeof t.transform?o.Qc.transform(t.transform):t.transform)})),u=(0,n.Fl)((function(){return I("mask",P(t.mask))})),c=(0,n.Fl)((function(){return(0,o.qv)(r.value,s(s(s(s({},a.value),l.value),u.value),{},{symbol:t.symbol,title:t.title,titleId:t.titleId,maskId:t.maskId}))}));(0,n.YP)(c,(function(t){if(!t)return R("Could not find one or more icon(s)",r.value,u.value)}),{immediate:!0});var h=(0,n.Fl)((function(){return c.value?x(c.value.abstract[0],{},i):null}));return function(){return h.value}}});(0,n.aZ)({name:"FontAwesomeLayers",props:{fixedWidth:{type:Boolean,default:!1}},setup:function(t,e){var i=e.slots,r=o.vc.familyPrefix,s=(0,n.Fl)((function(){return["".concat(r,"-layers")].concat(h(t.fixedWidth?["".concat(r,"-fw")]:[]))}));return function(){return(0,n.h)("div",{class:s.value},i.default?i.default():[])}}}),(0,n.aZ)({name:"FontAwesomeLayersText",props:{value:{type:[String,Number],default:""},transform:{type:[String,Object],default:null},counter:{type:Boolean,default:!1},position:{type:String,default:null,validator:function(t){return["bottom-left","bottom-right","top-left","top-right"].indexOf(t)>-1}}},setup:function(t,e){var i=e.attrs,r=o.vc.familyPrefix,a=(0,n.Fl)((function(){return I("classes",[].concat(h(t.counter?["".concat(r,"-layers-counter")]:[]),h(t.position?["".concat(r,"-layers-").concat(t.position)]:[])))})),l=(0,n.Fl)((function(){return I("transform","string"===typeof t.transform?o.Qc.transform(t.transform):t.transform)})),u=(0,n.Fl)((function(){var e=(0,o.fL)(t.value.toString(),s(s({},l.value),a.value)),i=e.abstract;return t.counter&&(i[0].attributes.class=i[0].attributes.class.replace("fa-layers-text","")),i[0]})),c=(0,n.Fl)((function(){return x(u.value,{},i)}));return function(){return c.value}}})},4870:function(t,e,i){"use strict";i.d(e,{Bj:function(){return r},Fl:function(){return Vt},IU:function(){return St},Jd:function(){return E},PG:function(){return vt},SU:function(){return Lt},Um:function(){return yt},WL:function(){return Ft},X$:function(){return I},X3:function(){return wt},XI:function(){return Dt},Xl:function(){return Et},dq:function(){return Tt},iH:function(){return Pt},j:function(){return O},lk:function(){return x},nZ:function(){return a},qj:function(){return gt},qq:function(){return b},yT:function(){return Ct}});i(560);var o=i(7139);let n;class r{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=n,!t&&n&&(this.index=(n.scopes||(n.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=n;try{return n=this,t()}finally{n=e}}else 0}on(){n=this}off(){n=this.parent}stop(t){if(this._active){let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function s(t,e=n){e&&e.active&&e.effects.push(t)}function a(){return n}const l=t=>{const e=new Set(t);return e.w=0,e.n=0,e},u=t=>(t.w&g)>0,c=t=>(t.n&g)>0,h=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=g},p=t=>{const{deps:e}=t;if(e.length){let i=0;for(let o=0;o<e.length;o++){const n=e[o];u(n)&&!c(n)?n.delete(t):e[i++]=n,n.w&=~g,n.n&=~g}e.length=i}},d=new WeakMap;let f=0,g=1;const y=30;let _;const m=Symbol(""),v=Symbol("");class b{constructor(t,e=null,i){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,s(this,i)}run(){if(!this.active)return this.fn();let t=_,e=w;while(t){if(t===this)return;t=t.parent}try{return this.parent=_,_=this,w=!0,g=1<<++f,f<=y?h(this):C(this),this.fn()}finally{f<=y&&p(this),g=1<<--f,_=this.parent,w=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){_===this?this.deferStop=!0:this.active&&(C(this),this.onStop&&this.onStop(),this.active=!1)}}function C(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let w=!0;const S=[];function E(){S.push(w),w=!1}function x(){const t=S.pop();w=void 0===t||t}function O(t,e,i){if(w&&_){let e=d.get(t);e||d.set(t,e=new Map);let o=e.get(i);o||e.set(i,o=l());const n=void 0;R(o,n)}}function R(t,e){let i=!1;f<=y?c(t)||(t.n|=g,i=!u(t)):i=!t.has(_),i&&(t.add(_),_.deps.push(t))}function I(t,e,i,n,r,s){const a=d.get(t);if(!a)return;let u=[];if("clear"===e)u=[...a.values()];else if("length"===i&&(0,o.kJ)(t)){const t=Number(n);a.forEach(((e,i)=>{("length"===i||!(0,o.yk)(i)&&i>=t)&&u.push(e)}))}else switch(void 0!==i&&u.push(a.get(i)),e){case"add":(0,o.kJ)(t)?(0,o.S0)(i)&&u.push(a.get("length")):(u.push(a.get(m)),(0,o._N)(t)&&u.push(a.get(v)));break;case"delete":(0,o.kJ)(t)||(u.push(a.get(m)),(0,o._N)(t)&&u.push(a.get(v)));break;case"set":(0,o._N)(t)&&u.push(a.get(m));break}if(1===u.length)u[0]&&T(u[0]);else{const t=[];for(const e of u)e&&t.push(...e);T(l(t))}}function T(t,e){const i=(0,o.kJ)(t)?t:[...t];for(const o of i)o.computed&&P(o,e);for(const o of i)o.computed||P(o,e)}function P(t,e){(t!==_||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const D=(0,o.fY)("__proto__,__v_isRef,__isVue"),k=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(o.yk)),A=L();function L(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const i=St(this);for(let e=0,n=this.length;e<n;e++)O(i,"get",e+"");const o=i[e](...t);return-1===o||!1===o?i[e](...t.map(St)):o}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){E();const i=St(this)[e].apply(this,t);return x(),i}})),t}function M(t){const e=St(this);return O(e,"has",t),e.hasOwnProperty(t)}class F{constructor(t=!1,e=!1){this._isReadonly=t,this._shallow=e}get(t,e,i){const n=this._isReadonly,r=this._shallow;if("__v_isReactive"===e)return!n;if("__v_isReadonly"===e)return n;if("__v_isShallow"===e)return r;if("__v_raw"===e&&i===(n?r?pt:ht:r?ct:ut).get(t))return t;const s=(0,o.kJ)(t);if(!n){if(s&&(0,o.RI)(A,e))return Reflect.get(A,e,i);if("hasOwnProperty"===e)return M}const a=Reflect.get(t,e,i);return((0,o.yk)(e)?k.has(e):D(e))?a:(n||O(t,"get",e),r?a:Tt(a)?s&&(0,o.S0)(e)?a:a.value:(0,o.Kn)(a)?n?_t(a):gt(a):a)}}class N extends F{constructor(t=!1){super(!1,t)}set(t,e,i,n){let r=t[e];if(bt(r)&&Tt(r)&&!Tt(i))return!1;if(!this._shallow&&(Ct(i)||bt(i)||(r=St(r),i=St(i)),!(0,o.kJ)(t)&&Tt(r)&&!Tt(i)))return r.value=i,!0;const s=(0,o.kJ)(t)&&(0,o.S0)(e)?Number(e)<t.length:(0,o.RI)(t,e),a=Reflect.set(t,e,i,n);return t===St(n)&&(s?(0,o.aU)(i,r)&&I(t,"set",e,i,r):I(t,"add",e,i)),a}deleteProperty(t,e){const i=(0,o.RI)(t,e),n=t[e],r=Reflect.deleteProperty(t,e);return r&&i&&I(t,"delete",e,void 0,n),r}has(t,e){const i=Reflect.has(t,e);return(0,o.yk)(e)&&k.has(e)||O(t,"has",e),i}ownKeys(t){return O(t,"iterate",(0,o.kJ)(t)?"length":m),Reflect.ownKeys(t)}}class V extends F{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const B=new N,G=new V,j=new N(!0),H=t=>t,$=t=>Reflect.getPrototypeOf(t);function W(t,e,i=!1,n=!1){t=t["__v_raw"];const r=St(t),s=St(e);i||((0,o.aU)(e,s)&&O(r,"get",e),O(r,"get",s));const{has:a}=$(r),l=n?H:i?Ot:xt;return a.call(r,e)?l(t.get(e)):a.call(r,s)?l(t.get(s)):void(t!==r&&t.get(e))}function U(t,e=!1){const i=this["__v_raw"],n=St(i),r=St(t);return e||((0,o.aU)(t,r)&&O(n,"has",t),O(n,"has",r)),t===r?i.has(t):i.has(t)||i.has(r)}function z(t,e=!1){return t=t["__v_raw"],!e&&O(St(t),"iterate",m),Reflect.get(t,"size",t)}function K(t){t=St(t);const e=St(this),i=$(e),o=i.has.call(e,t);return o||(e.add(t),I(e,"add",t,t)),this}function Y(t,e){e=St(e);const i=St(this),{has:n,get:r}=$(i);let s=n.call(i,t);s||(t=St(t),s=n.call(i,t));const a=r.call(i,t);return i.set(t,e),s?(0,o.aU)(e,a)&&I(i,"set",t,e,a):I(i,"add",t,e),this}function q(t){const e=St(this),{has:i,get:o}=$(e);let n=i.call(e,t);n||(t=St(t),n=i.call(e,t));const r=o?o.call(e,t):void 0,s=e.delete(t);return n&&I(e,"delete",t,void 0,r),s}function X(){const t=St(this),e=0!==t.size,i=void 0,o=t.clear();return e&&I(t,"clear",void 0,void 0,i),o}function Q(t,e){return function(i,o){const n=this,r=n["__v_raw"],s=St(r),a=e?H:t?Ot:xt;return!t&&O(s,"iterate",m),r.forEach(((t,e)=>i.call(o,a(t),a(e),n)))}}function J(t,e,i){return function(...n){const r=this["__v_raw"],s=St(r),a=(0,o._N)(s),l="entries"===t||t===Symbol.iterator&&a,u="keys"===t&&a,c=r[t](...n),h=i?H:e?Ot:xt;return!e&&O(s,"iterate",u?v:m),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:l?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function Z(t){return function(...e){return"delete"!==t&&this}}function tt(){const t={get(t){return W(this,t)},get size(){return z(this)},has:U,add:K,set:Y,delete:q,clear:X,forEach:Q(!1,!1)},e={get(t){return W(this,t,!1,!0)},get size(){return z(this)},has:U,add:K,set:Y,delete:q,clear:X,forEach:Q(!1,!0)},i={get(t){return W(this,t,!0)},get size(){return z(this,!0)},has(t){return U.call(this,t,!0)},add:Z("add"),set:Z("set"),delete:Z("delete"),clear:Z("clear"),forEach:Q(!0,!1)},o={get(t){return W(this,t,!0,!0)},get size(){return z(this,!0)},has(t){return U.call(this,t,!0)},add:Z("add"),set:Z("set"),delete:Z("delete"),clear:Z("clear"),forEach:Q(!0,!0)},n=["keys","values","entries",Symbol.iterator];return n.forEach((n=>{t[n]=J(n,!1,!1),i[n]=J(n,!0,!1),e[n]=J(n,!1,!0),o[n]=J(n,!0,!0)})),[t,i,e,o]}const[et,it,ot,nt]=tt();function rt(t,e){const i=e?t?nt:ot:t?it:et;return(e,n,r)=>"__v_isReactive"===n?!t:"__v_isReadonly"===n?t:"__v_raw"===n?e:Reflect.get((0,o.RI)(i,n)&&n in e?i:e,n,r)}const st={get:rt(!1,!1)},at={get:rt(!1,!0)},lt={get:rt(!0,!1)};const ut=new WeakMap,ct=new WeakMap,ht=new WeakMap,pt=new WeakMap;function dt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ft(t){return t["__v_skip"]||!Object.isExtensible(t)?0:dt((0,o.W7)(t))}function gt(t){return bt(t)?t:mt(t,!1,B,st,ut)}function yt(t){return mt(t,!1,j,at,ct)}function _t(t){return mt(t,!0,G,lt,ht)}function mt(t,e,i,n,r){if(!(0,o.Kn)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const s=r.get(t);if(s)return s;const a=ft(t);if(0===a)return t;const l=new Proxy(t,2===a?n:i);return r.set(t,l),l}function vt(t){return bt(t)?vt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function bt(t){return!(!t||!t["__v_isReadonly"])}function Ct(t){return!(!t||!t["__v_isShallow"])}function wt(t){return vt(t)||bt(t)}function St(t){const e=t&&t["__v_raw"];return e?St(e):t}function Et(t){return(0,o.Nj)(t,"__v_skip",!0),t}const xt=t=>(0,o.Kn)(t)?gt(t):t,Ot=t=>(0,o.Kn)(t)?_t(t):t;function Rt(t){w&&_&&(t=St(t),R(t.dep||(t.dep=l())))}function It(t,e){t=St(t);const i=t.dep;i&&T(i)}function Tt(t){return!(!t||!0!==t.__v_isRef)}function Pt(t){return kt(t,!1)}function Dt(t){return kt(t,!0)}function kt(t,e){return Tt(t)?t:new At(t,e)}class At{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:St(t),this._value=e?t:xt(t)}get value(){return Rt(this),this._value}set value(t){const e=this.__v_isShallow||Ct(t)||bt(t);t=e?t:St(t),(0,o.aU)(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:xt(t),It(this,t))}}function Lt(t){return Tt(t)?t.value:t}const Mt={get:(t,e,i)=>Lt(Reflect.get(t,e,i)),set:(t,e,i,o)=>{const n=t[e];return Tt(n)&&!Tt(i)?(n.value=i,!0):Reflect.set(t,e,i,o)}};function Ft(t){return vt(t)?t:new Proxy(t,Mt)}class Nt{constructor(t,e,i,o){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this["__v_isReadonly"]=!1,this._dirty=!0,this.effect=new b(t,(()=>{this._dirty||(this._dirty=!0,It(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!o,this["__v_isReadonly"]=i}get value(){const t=St(this);return Rt(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Vt(t,e,i=!1){let n,r;const s=(0,o.mf)(t);s?(n=t,r=o.dG):(n=t.get,r=t.set);const a=new Nt(n,r,s||!r,i);return a}},3396:function(t,e,i){"use strict";i.d(e,{$d:function(){return s},Cn:function(){return F},FN:function(){return Ci},Fl:function(){return Gi},HY:function(){return Ge},JJ:function(){return pe},Ko:function(){return jt},P$:function(){return pt},Q6:function(){return mt},U2:function(){return ft},Uk:function(){return ui},Us:function(){return Ae},Wm:function(){return ri},Y3:function(){return m},Y8:function(){return lt},YP:function(){return Z},_:function(){return ni},aZ:function(){return vt},dD:function(){return M},f3:function(){return de},h:function(){return ji},iD:function(){return Qe},ic:function(){return Lt},j4:function(){return Je},kq:function(){return hi},m0:function(){return Q},nJ:function(){return ct},nK:function(){return _t},uE:function(){return ci},up:function(){return U},w5:function(){return N},wg:function(){return ze},wy:function(){return nt}});i(560);var o=i(4870),n=i(7139);function r(t,e,i,o){let n;try{n=o?t(...o):t()}catch(r){a(r,e,i)}return n}function s(t,e,i,o){if((0,n.mf)(t)){const s=r(t,e,i,o);return s&&(0,n.tI)(s)&&s.catch((t=>{a(t,e,i)})),s}const l=[];for(let n=0;n<t.length;n++)l.push(s(t[n],e,i,o));return l}function a(t,e,i,o=!0){const n=e?e.vnode:null;if(e){let o=e.parent;const n=e.proxy,s=i;while(o){const e=o.ec;if(e)for(let i=0;i<e.length;i++)if(!1===e[i](t,n,s))return;o=o.parent}const a=e.appContext.config.errorHandler;if(a)return void r(a,null,10,[t,n,s])}l(t,i,n,o)}function l(t,e,i,o=!0){console.error(t)}let u=!1,c=!1;const h=[];let p=0;const d=[];let f=null,g=0;const y=Promise.resolve();let _=null;function m(t){const e=_||y;return t?e.then(this?t.bind(this):t):e}function v(t){let e=p+1,i=h.length;while(e<i){const o=e+i>>>1,n=h[o],r=O(n);r<t||r===t&&n.pre?e=o+1:i=o}return e}function b(t){h.length&&h.includes(t,u&&t.allowRecurse?p+1:p)||(null==t.id?h.push(t):h.splice(v(t.id),0,t),C())}function C(){u||c||(c=!0,_=y.then(I))}function w(t){const e=h.indexOf(t);e>p&&h.splice(e,1)}function S(t){(0,n.kJ)(t)?d.push(...t):f&&f.includes(t,t.allowRecurse?g+1:g)||d.push(t),C()}function E(t,e=(u?p+1:0)){for(0;e<h.length;e++){const t=h[e];t&&t.pre&&(h.splice(e,1),e--,t())}}function x(t){if(d.length){const t=[...new Set(d)];if(d.length=0,f)return void f.push(...t);for(f=t,f.sort(((t,e)=>O(t)-O(e))),g=0;g<f.length;g++)f[g]();f=null,g=0}}const O=t=>null==t.id?1/0:t.id,R=(t,e)=>{const i=O(t)-O(e);if(0===i){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function I(t){c=!1,u=!0,h.sort(R);n.dG;try{for(p=0;p<h.length;p++){const t=h[p];t&&!1!==t.active&&r(t,null,14)}}finally{p=0,h.length=0,x(t),u=!1,_=null,(h.length||d.length)&&I(t)}}function T(t,e,...i){if(t.isUnmounted)return;const o=t.vnode.props||n.kT;let r=i;const a=e.startsWith("update:"),l=a&&e.slice(7);if(l&&l in o){const t=`${"modelValue"===l?"model":l}Modifiers`,{number:e,trim:s}=o[t]||n.kT;s&&(r=i.map((t=>(0,n.HD)(t)?t.trim():t))),e&&(r=i.map(n.h5))}let u;let c=o[u=(0,n.hR)(e)]||o[u=(0,n.hR)((0,n._A)(e))];!c&&a&&(c=o[u=(0,n.hR)((0,n.rs)(e))]),c&&s(c,t,6,r);const h=o[u+"Once"];if(h){if(t.emitted){if(t.emitted[u])return}else t.emitted={};t.emitted[u]=!0,s(h,t,6,r)}}function P(t,e,i=!1){const o=e.emitsCache,r=o.get(t);if(void 0!==r)return r;const s=t.emits;let a={},l=!1;if(!(0,n.mf)(t)){const o=t=>{const i=P(t,e,!0);i&&(l=!0,(0,n.l7)(a,i))};!i&&e.mixins.length&&e.mixins.forEach(o),t.extends&&o(t.extends),t.mixins&&t.mixins.forEach(o)}return s||l?((0,n.kJ)(s)?s.forEach((t=>a[t]=null)):(0,n.l7)(a,s),(0,n.Kn)(t)&&o.set(t,a),a):((0,n.Kn)(t)&&o.set(t,null),null)}function D(t,e){return!(!t||!(0,n.F7)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,n.RI)(t,e[0].toLowerCase()+e.slice(1))||(0,n.RI)(t,(0,n.rs)(e))||(0,n.RI)(t,e))}let k=null,A=null;function L(t){const e=k;return k=t,A=t&&t.type.__scopeId||null,e}function M(t){A=t}function F(){A=null}function N(t,e=k,i){if(!e)return t;if(t._n)return t;const o=(...i)=>{o._d&&qe(-1);const n=L(e);let r;try{r=t(...i)}finally{L(n),o._d&&qe(1)}return r};return o._n=!0,o._c=!0,o._d=!0,o}function V(t){const{type:e,vnode:i,proxy:o,withProxy:r,props:s,propsOptions:[l],slots:u,attrs:c,emit:h,render:p,renderCache:d,data:f,setupState:g,ctx:y,inheritAttrs:_}=t;let m,v;const b=L(t);try{if(4&i.shapeFlag){const t=r||o;m=pi(p.call(t,t,d,s,g,f,y)),v=c}else{const t=e;0,m=pi(t.length>1?t(s,{attrs:c,slots:u,emit:h}):t(s,null)),v=e.props?c:B(c)}}catch(w){We.length=0,a(w,t,1),m=ri(He)}let C=m;if(v&&!1!==_){const t=Object.keys(v),{shapeFlag:e}=C;t.length&&7&e&&(l&&t.some(n.tR)&&(v=G(v,l)),C=li(C,v))}return i.dirs&&(C=li(C),C.dirs=C.dirs?C.dirs.concat(i.dirs):i.dirs),i.transition&&(C.transition=i.transition),m=C,L(b),m}const B=t=>{let e;for(const i in t)("class"===i||"style"===i||(0,n.F7)(i))&&((e||(e={}))[i]=t[i]);return e},G=(t,e)=>{const i={};for(const o in t)(0,n.tR)(o)&&o.slice(9)in e||(i[o]=t[o]);return i};function j(t,e,i){const{props:o,children:n,component:r}=t,{props:s,children:a,patchFlag:l}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(!(i&&l>=0))return!(!n&&!a||a&&a.$stable)||o!==s&&(o?!s||H(o,s,u):!!s);if(1024&l)return!0;if(16&l)return o?H(o,s,u):!!s;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const i=t[e];if(s[i]!==o[i]&&!D(u,i))return!0}}return!1}function H(t,e,i){const o=Object.keys(e);if(o.length!==Object.keys(t).length)return!0;for(let n=0;n<o.length;n++){const r=o[n];if(e[r]!==t[r]&&!D(i,r))return!0}return!1}function $({vnode:t,parent:e},i){while(e&&e.subTree===t)(t=e.vnode).el=i,e=e.parent}const W="components";function U(t,e){return K(W,t,!0,e)||t}const z=Symbol.for("v-ndc");function K(t,e,i=!0,o=!1){const r=k||bi;if(r){const i=r.type;if(t===W){const t=Vi(i,!1);if(t&&(t===e||t===(0,n._A)(e)||t===(0,n.kC)((0,n._A)(e))))return i}const s=Y(r[t]||i[t],e)||Y(r.appContext[t],e);return!s&&o?i:s}}function Y(t,e){return t&&(t[e]||t[(0,n._A)(e)]||t[(0,n.kC)((0,n._A)(e))])}const q=t=>t.__isSuspense;function X(t,e){e&&e.pendingBranch?(0,n.kJ)(t)?e.effects.push(...t):e.effects.push(t):S(t)}function Q(t,e){return tt(t,null,e)}const J={};function Z(t,e,i){return tt(t,e,i)}function tt(t,e,{immediate:i,deep:a,flush:l,onTrack:u,onTrigger:c}=n.kT){var h;const p=(0,o.nZ)()===(null==(h=bi)?void 0:h.scope)?bi:null;let d,f,g=!1,y=!1;if((0,o.dq)(t)?(d=()=>t.value,g=(0,o.yT)(t)):(0,o.PG)(t)?(d=()=>t,a=!0):(0,n.kJ)(t)?(y=!0,g=t.some((t=>(0,o.PG)(t)||(0,o.yT)(t))),d=()=>t.map((t=>(0,o.dq)(t)?t.value:(0,o.PG)(t)?ot(t):(0,n.mf)(t)?r(t,p,2):void 0))):d=(0,n.mf)(t)?e?()=>r(t,p,2):()=>{if(!p||!p.isUnmounted)return f&&f(),s(t,p,3,[m])}:n.dG,e&&a){const t=d;d=()=>ot(t())}let _,m=t=>{f=S.onStop=()=>{r(t,p,4)}};if(Pi){if(m=n.dG,e?i&&s(e,p,3,[d(),y?[]:void 0,m]):d(),"sync"!==l)return n.dG;{const t=$i();_=t.__watcherHandles||(t.__watcherHandles=[])}}let v=y?new Array(t.length).fill(J):J;const C=()=>{if(S.active)if(e){const t=S.run();(a||g||(y?t.some(((t,e)=>(0,n.aU)(t,v[e]))):(0,n.aU)(t,v)))&&(f&&f(),s(e,p,3,[t,v===J?void 0:y&&v[0]===J?[]:v,m]),v=t)}else S.run()};let w;C.allowRecurse=!!e,"sync"===l?w=C:"post"===l?w=()=>ke(C,p&&p.suspense):(C.pre=!0,p&&(C.id=p.uid),w=()=>b(C));const S=new o.qq(d,w);e?i?C():v=S.run():"post"===l?ke(S.run.bind(S),p&&p.suspense):S.run();const E=()=>{S.stop(),p&&p.scope&&(0,n.Od)(p.scope.effects,S)};return _&&_.push(E),E}function et(t,e,i){const o=this.proxy,r=(0,n.HD)(t)?t.includes(".")?it(o,t):()=>o[t]:t.bind(o,o);let s;(0,n.mf)(e)?s=e:(s=e.handler,i=e);const a=bi;xi(this);const l=tt(r,s.bind(o),i);return a?xi(a):Oi(),l}function it(t,e){const i=e.split(".");return()=>{let e=t;for(let t=0;t<i.length&&e;t++)e=e[i[t]];return e}}function ot(t,e){if(!(0,n.Kn)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,o.dq)(t))ot(t.value,e);else if((0,n.kJ)(t))for(let i=0;i<t.length;i++)ot(t[i],e);else if((0,n.DM)(t)||(0,n._N)(t))t.forEach((t=>{ot(t,e)}));else if((0,n.PO)(t))for(const i in t)ot(t[i],e);return t}function nt(t,e){const i=k;if(null===i)return t;const o=Ni(i)||i.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[t,i,a,l=n.kT]=e[s];t&&((0,n.mf)(t)&&(t={mounted:t,updated:t}),t.deep&&ot(i),r.push({dir:t,instance:o,value:i,oldValue:void 0,arg:a,modifiers:l}))}return t}function rt(t,e,i,n){const r=t.dirs,a=e&&e.dirs;for(let l=0;l<r.length;l++){const u=r[l];a&&(u.oldValue=a[l].value);let c=u.dir[n];c&&((0,o.Jd)(),s(c,i,8,[t.el,u,t,e]),(0,o.lk)())}}const st=Symbol("_leaveCb"),at=Symbol("_enterCb");function lt(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return kt((()=>{t.isMounted=!0})),Mt((()=>{t.isUnmounting=!0})),t}const ut=[Function,Array],ct={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ut,onEnter:ut,onAfterEnter:ut,onEnterCancelled:ut,onBeforeLeave:ut,onLeave:ut,onAfterLeave:ut,onLeaveCancelled:ut,onBeforeAppear:ut,onAppear:ut,onAfterAppear:ut,onAppearCancelled:ut},ht={name:"BaseTransition",props:ct,setup(t,{slots:e}){const i=Ci(),n=lt();let r;return()=>{const s=e.default&&mt(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){let t=!1;for(const e of s)if(e.type!==He){0,a=e,t=!0;break}}const l=(0,o.IU)(t),{mode:u}=l;if(n.isLeaving)return gt(a);const c=yt(a);if(!c)return gt(a);const h=ft(c,l,n,i);_t(c,h);const p=i.subTree,d=p&&yt(p);let f=!1;const{getTransitionKey:g}=c.type;if(g){const t=g();void 0===r?r=t:t!==r&&(r=t,f=!0)}if(d&&d.type!==He&&(!ti(c,d)||f)){const t=ft(d,l,n,i);if(_t(d,t),"out-in"===u)return n.isLeaving=!0,t.afterLeave=()=>{n.isLeaving=!1,!1!==i.update.active&&i.update()},gt(a);"in-out"===u&&c.type!==He&&(t.delayLeave=(t,e,i)=>{const o=dt(n,d);o[String(d.key)]=d,t[st]=()=>{e(),t[st]=void 0,delete h.delayedLeave},h.delayedLeave=i})}return a}}},pt=ht;function dt(t,e){const{leavingVNodes:i}=t;let o=i.get(e.type);return o||(o=Object.create(null),i.set(e.type,o)),o}function ft(t,e,i,o){const{appear:r,mode:a,persisted:l=!1,onBeforeEnter:u,onEnter:c,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:d,onLeave:f,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:_,onAppear:m,onAfterAppear:v,onAppearCancelled:b}=e,C=String(t.key),w=dt(i,t),S=(t,e)=>{t&&s(t,o,9,e)},E=(t,e)=>{const i=e[1];S(t,e),(0,n.kJ)(t)?t.every((t=>t.length<=1))&&i():t.length<=1&&i()},x={mode:a,persisted:l,beforeEnter(e){let o=u;if(!i.isMounted){if(!r)return;o=_||u}e[st]&&e[st](!0);const n=w[C];n&&ti(t,n)&&n.el[st]&&n.el[st](),S(o,[e])},enter(t){let e=c,o=h,n=p;if(!i.isMounted){if(!r)return;e=m||c,o=v||h,n=b||p}let s=!1;const a=t[at]=e=>{s||(s=!0,S(e?n:o,[t]),x.delayedLeave&&x.delayedLeave(),t[at]=void 0)};e?E(e,[t,a]):a()},leave(e,o){const n=String(t.key);if(e[at]&&e[at](!0),i.isUnmounting)return o();S(d,[e]);let r=!1;const s=e[st]=i=>{r||(r=!0,o(),S(i?y:g,[e]),e[st]=void 0,w[n]===t&&delete w[n])};w[n]=t,f?E(f,[e,s]):s()},clone(t){return ft(t,e,i,o)}};return x}function gt(t){if(Ct(t))return t=li(t),t.children=null,t}function yt(t){return Ct(t)?t.children?t.children[0]:void 0:t}function _t(t,e){6&t.shapeFlag&&t.component?_t(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function mt(t,e=!1,i){let o=[],n=0;for(let r=0;r<t.length;r++){let s=t[r];const a=null==i?s.key:String(i)+String(null!=s.key?s.key:r);s.type===Ge?(128&s.patchFlag&&n++,o=o.concat(mt(s.children,e,a))):(e||s.type!==He)&&o.push(null!=a?li(s,{key:a}):s)}if(n>1)for(let r=0;r<o.length;r++)o[r].patchFlag=-2;return o}
/*! #__NO_SIDE_EFFECTS__ */function vt(t,e){return(0,n.mf)(t)?(()=>(0,n.l7)({name:t.name},e,{setup:t}))():t}const bt=t=>!!t.type.__asyncLoader
/*! #__NO_SIDE_EFFECTS__ */;const Ct=t=>t.type.__isKeepAlive;RegExp,RegExp;function wt(t,e){return(0,n.kJ)(t)?t.some((t=>wt(t,e))):(0,n.HD)(t)?t.split(",").includes(e):!!(0,n.Kj)(t)&&t.test(e)}function St(t,e){xt(t,"a",e)}function Et(t,e){xt(t,"da",e)}function xt(t,e,i=bi){const o=t.__wdc||(t.__wdc=()=>{let e=i;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(Tt(e,o,i),i){let t=i.parent;while(t&&t.parent)Ct(t.parent.vnode)&&Ot(o,e,i,t),t=t.parent}}function Ot(t,e,i,o){const r=Tt(e,t,o,!0);Ft((()=>{(0,n.Od)(o[e],r)}),i)}function Rt(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function It(t){return 128&t.shapeFlag?t.ssContent:t}function Tt(t,e,i=bi,n=!1){if(i){const r=i[t]||(i[t]=[]),a=e.__weh||(e.__weh=(...n)=>{if(i.isUnmounted)return;(0,o.Jd)(),xi(i);const r=s(e,i,t,n);return Oi(),(0,o.lk)(),r});return n?r.unshift(a):r.push(a),a}}const Pt=t=>(e,i=bi)=>(!Pi||"sp"===t)&&Tt(t,((...t)=>e(...t)),i),Dt=Pt("bm"),kt=Pt("m"),At=Pt("bu"),Lt=Pt("u"),Mt=Pt("bum"),Ft=Pt("um"),Nt=Pt("sp"),Vt=Pt("rtg"),Bt=Pt("rtc");function Gt(t,e=bi){Tt("ec",t,e)}function jt(t,e,i,o){let r;const s=i&&i[o];if((0,n.kJ)(t)||(0,n.HD)(t)){r=new Array(t.length);for(let i=0,o=t.length;i<o;i++)r[i]=e(t[i],i,void 0,s&&s[i])}else if("number"===typeof t){0,r=new Array(t);for(let i=0;i<t;i++)r[i]=e(i+1,i,void 0,s&&s[i])}else if((0,n.Kn)(t))if(t[Symbol.iterator])r=Array.from(t,((t,i)=>e(t,i,void 0,s&&s[i])));else{const i=Object.keys(t);r=new Array(i.length);for(let o=0,n=i.length;o<n;o++){const n=i[o];r[o]=e(t[n],n,o,s&&s[o])}}else r=[];return i&&(i[o]=r),r}const Ht=t=>t?Ri(t)?Ni(t)||t.proxy:Ht(t.parent):null,$t=(0,n.l7)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ht(t.parent),$root:t=>Ht(t.root),$emit:t=>t.emit,$options:t=>Jt(t),$forceUpdate:t=>t.f||(t.f=()=>b(t.update)),$nextTick:t=>t.n||(t.n=m.bind(t.proxy)),$watch:t=>et.bind(t)}),Wt=(t,e)=>t!==n.kT&&!t.__isScriptSetup&&(0,n.RI)(t,e),Ut={get({_:t},e){const{ctx:i,setupState:r,data:s,props:a,accessCache:l,type:u,appContext:c}=t;let h;if("$"!==e[0]){const o=l[e];if(void 0!==o)switch(o){case 1:return r[e];case 2:return s[e];case 4:return i[e];case 3:return a[e]}else{if(Wt(r,e))return l[e]=1,r[e];if(s!==n.kT&&(0,n.RI)(s,e))return l[e]=2,s[e];if((h=t.propsOptions[0])&&(0,n.RI)(h,e))return l[e]=3,a[e];if(i!==n.kT&&(0,n.RI)(i,e))return l[e]=4,i[e];Kt&&(l[e]=0)}}const p=$t[e];let d,f;return p?("$attrs"===e&&(0,o.j)(t,"get",e),p(t)):(d=u.__cssModules)&&(d=d[e])?d:i!==n.kT&&(0,n.RI)(i,e)?(l[e]=4,i[e]):(f=c.config.globalProperties,(0,n.RI)(f,e)?f[e]:void 0)},set({_:t},e,i){const{data:o,setupState:r,ctx:s}=t;return Wt(r,e)?(r[e]=i,!0):o!==n.kT&&(0,n.RI)(o,e)?(o[e]=i,!0):!(0,n.RI)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(s[e]=i,!0))},has({_:{data:t,setupState:e,accessCache:i,ctx:o,appContext:r,propsOptions:s}},a){let l;return!!i[a]||t!==n.kT&&(0,n.RI)(t,a)||Wt(e,a)||(l=s[0])&&(0,n.RI)(l,a)||(0,n.RI)(o,a)||(0,n.RI)($t,a)||(0,n.RI)(r.config.globalProperties,a)},defineProperty(t,e,i){return null!=i.get?t._.accessCache[e]=0:(0,n.RI)(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function zt(t){return(0,n.kJ)(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}let Kt=!0;function Yt(t){const e=Jt(t),i=t.proxy,r=t.ctx;Kt=!1,e.beforeCreate&&Xt(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:l,watch:u,provide:c,inject:h,created:p,beforeMount:d,mounted:f,beforeUpdate:g,updated:y,activated:_,deactivated:m,beforeDestroy:v,beforeUnmount:b,destroyed:C,unmounted:w,render:S,renderTracked:E,renderTriggered:x,errorCaptured:O,serverPrefetch:R,expose:I,inheritAttrs:T,components:P,directives:D,filters:k}=e,A=null;if(h&&qt(h,r,A),l)for(const o in l){const t=l[o];(0,n.mf)(t)&&(r[o]=t.bind(i))}if(s){0;const e=s.call(i,i);0,(0,n.Kn)(e)&&(t.data=(0,o.qj)(e))}if(Kt=!0,a)for(const o in a){const t=a[o],e=(0,n.mf)(t)?t.bind(i,i):(0,n.mf)(t.get)?t.get.bind(i,i):n.dG;0;const s=!(0,n.mf)(t)&&(0,n.mf)(t.set)?t.set.bind(i):n.dG,l=Gi({get:e,set:s});Object.defineProperty(r,o,{enumerable:!0,configurable:!0,get:()=>l.value,set:t=>l.value=t})}if(u)for(const o in u)Qt(u[o],r,i,o);if(c){const t=(0,n.mf)(c)?c.call(i):c;Reflect.ownKeys(t).forEach((e=>{pe(e,t[e])}))}function L(t,e){(0,n.kJ)(e)?e.forEach((e=>t(e.bind(i)))):e&&t(e.bind(i))}if(p&&Xt(p,t,"c"),L(Dt,d),L(kt,f),L(At,g),L(Lt,y),L(St,_),L(Et,m),L(Gt,O),L(Bt,E),L(Vt,x),L(Mt,b),L(Ft,w),L(Nt,R),(0,n.kJ)(I))if(I.length){const e=t.exposed||(t.exposed={});I.forEach((t=>{Object.defineProperty(e,t,{get:()=>i[t],set:e=>i[t]=e})}))}else t.exposed||(t.exposed={});S&&t.render===n.dG&&(t.render=S),null!=T&&(t.inheritAttrs=T),P&&(t.components=P),D&&(t.directives=D)}function qt(t,e,i=n.dG){(0,n.kJ)(t)&&(t=oe(t));for(const r in t){const i=t[r];let s;s=(0,n.Kn)(i)?"default"in i?de(i.from||r,i.default,!0):de(i.from||r):de(i),(0,o.dq)(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:t=>s.value=t}):e[r]=s}}function Xt(t,e,i){s((0,n.kJ)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,i)}function Qt(t,e,i,o){const r=o.includes(".")?it(i,o):()=>i[o];if((0,n.HD)(t)){const i=e[t];(0,n.mf)(i)&&Z(r,i)}else if((0,n.mf)(t))Z(r,t.bind(i));else if((0,n.Kn)(t))if((0,n.kJ)(t))t.forEach((t=>Qt(t,e,i,o)));else{const o=(0,n.mf)(t.handler)?t.handler.bind(i):e[t.handler];(0,n.mf)(o)&&Z(r,o,t)}else 0}function Jt(t){const e=t.type,{mixins:i,extends:o}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,l=s.get(e);let u;return l?u=l:r.length||i||o?(u={},r.length&&r.forEach((t=>Zt(u,t,a,!0))),Zt(u,e,a)):u=e,(0,n.Kn)(e)&&s.set(e,u),u}function Zt(t,e,i,o=!1){const{mixins:n,extends:r}=e;r&&Zt(t,r,i,!0),n&&n.forEach((e=>Zt(t,e,i,!0)));for(const s in e)if(o&&"expose"===s);else{const o=te[s]||i&&i[s];t[s]=o?o(t[s],e[s]):e[s]}return t}const te={data:ee,props:se,emits:se,methods:re,computed:re,beforeCreate:ne,created:ne,beforeMount:ne,mounted:ne,beforeUpdate:ne,updated:ne,beforeDestroy:ne,beforeUnmount:ne,destroyed:ne,unmounted:ne,activated:ne,deactivated:ne,errorCaptured:ne,serverPrefetch:ne,components:re,directives:re,watch:ae,provide:ee,inject:ie};function ee(t,e){return e?t?function(){return(0,n.l7)((0,n.mf)(t)?t.call(this,this):t,(0,n.mf)(e)?e.call(this,this):e)}:e:t}function ie(t,e){return re(oe(t),oe(e))}function oe(t){if((0,n.kJ)(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function ne(t,e){return t?[...new Set([].concat(t,e))]:e}function re(t,e){return t?(0,n.l7)(Object.create(null),t,e):e}function se(t,e){return t?(0,n.kJ)(t)&&(0,n.kJ)(e)?[...new Set([...t,...e])]:(0,n.l7)(Object.create(null),zt(t),zt(null!=e?e:{})):e}function ae(t,e){if(!t)return e;if(!e)return t;const i=(0,n.l7)(Object.create(null),t);for(const o in e)i[o]=ne(t[o],e[o]);return i}function le(){return{app:null,config:{isNativeTag:n.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ue=0;function ce(t,e){return function(i,o=null){(0,n.mf)(i)||(i=(0,n.l7)({},i)),null==o||(0,n.Kn)(o)||(o=null);const r=le();const s=new WeakSet;let a=!1;const l=r.app={_uid:ue++,_component:i,_props:o,_container:null,_context:r,_instance:null,version:Wi,get config(){return r.config},set config(t){0},use(t,...e){return s.has(t)||(t&&(0,n.mf)(t.install)?(s.add(t),t.install(l,...e)):(0,n.mf)(t)&&(s.add(t),t(l,...e))),l},mixin(t){return r.mixins.includes(t)||r.mixins.push(t),l},component(t,e){return e?(r.components[t]=e,l):r.components[t]},directive(t,e){return e?(r.directives[t]=e,l):r.directives[t]},mount(n,s,u){if(!a){0;const c=ri(i,o);return c.appContext=r,s&&e?e(c,n):t(c,n,u),a=!0,l._container=n,n.__vue_app__=l,Ni(c.component)||c.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(t,e){return r.provides[t]=e,l},runWithContext(t){he=l;try{return t()}finally{he=null}}};return l}}let he=null;function pe(t,e){if(bi){let i=bi.provides;const o=bi.parent&&bi.parent.provides;o===i&&(i=bi.provides=Object.create(o)),i[t]=e}else 0}function de(t,e,i=!1){const o=bi||k;if(o||he){const r=o?null==o.parent?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:he._context.provides;if(r&&t in r)return r[t];if(arguments.length>1)return i&&(0,n.mf)(e)?e.call(o&&o.proxy):e}else 0}function fe(t,e,i,r=!1){const s={},a={};(0,n.Nj)(a,ei,1),t.propsDefaults=Object.create(null),ye(t,e,s,a);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);i?t.props=r?s:(0,o.Um)(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function ge(t,e,i,r){const{props:s,attrs:a,vnode:{patchFlag:l}}=t,u=(0,o.IU)(s),[c]=t.propsOptions;let h=!1;if(!(r||l>0)||16&l){let o;ye(t,e,s,a)&&(h=!0);for(const r in u)e&&((0,n.RI)(e,r)||(o=(0,n.rs)(r))!==r&&(0,n.RI)(e,o))||(c?!i||void 0===i[r]&&void 0===i[o]||(s[r]=_e(c,u,r,void 0,t,!0)):delete s[r]);if(a!==u)for(const t in a)e&&(0,n.RI)(e,t)||(delete a[t],h=!0)}else if(8&l){const i=t.vnode.dynamicProps;for(let o=0;o<i.length;o++){let r=i[o];if(D(t.emitsOptions,r))continue;const l=e[r];if(c)if((0,n.RI)(a,r))l!==a[r]&&(a[r]=l,h=!0);else{const e=(0,n._A)(r);s[e]=_e(c,u,e,l,t,!1)}else l!==a[r]&&(a[r]=l,h=!0)}}h&&(0,o.X$)(t,"set","$attrs")}function ye(t,e,i,r){const[s,a]=t.propsOptions;let l,u=!1;if(e)for(let o in e){if((0,n.Gg)(o))continue;const c=e[o];let h;s&&(0,n.RI)(s,h=(0,n._A)(o))?a&&a.includes(h)?(l||(l={}))[h]=c:i[h]=c:D(t.emitsOptions,o)||o in r&&c===r[o]||(r[o]=c,u=!0)}if(a){const e=(0,o.IU)(i),r=l||n.kT;for(let o=0;o<a.length;o++){const l=a[o];i[l]=_e(s,e,l,r[l],t,!(0,n.RI)(r,l))}}return u}function _e(t,e,i,o,r,s){const a=t[i];if(null!=a){const t=(0,n.RI)(a,"default");if(t&&void 0===o){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,n.mf)(t)){const{propsDefaults:n}=r;i in n?o=n[i]:(xi(r),o=n[i]=t.call(null,e),Oi())}else o=t}a[0]&&(s&&!t?o=!1:!a[1]||""!==o&&o!==(0,n.rs)(i)||(o=!0))}return o}function me(t,e,i=!1){const o=e.propsCache,r=o.get(t);if(r)return r;const s=t.props,a={},l=[];let u=!1;if(!(0,n.mf)(t)){const o=t=>{u=!0;const[i,o]=me(t,e,!0);(0,n.l7)(a,i),o&&l.push(...o)};!i&&e.mixins.length&&e.mixins.forEach(o),t.extends&&o(t.extends),t.mixins&&t.mixins.forEach(o)}if(!s&&!u)return(0,n.Kn)(t)&&o.set(t,n.Z6),n.Z6;if((0,n.kJ)(s))for(let h=0;h<s.length;h++){0;const t=(0,n._A)(s[h]);ve(t)&&(a[t]=n.kT)}else if(s){0;for(const t in s){const e=(0,n._A)(t);if(ve(e)){const i=s[t],o=a[e]=(0,n.kJ)(i)||(0,n.mf)(i)?{type:i}:(0,n.l7)({},i);if(o){const t=we(Boolean,o.type),i=we(String,o.type);o[0]=t>-1,o[1]=i<0||t<i,(t>-1||(0,n.RI)(o,"default"))&&l.push(e)}}}}const c=[a,l];return(0,n.Kn)(t)&&o.set(t,c),c}function ve(t){return"$"!==t[0]}function be(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:null===t?"null":""}function Ce(t,e){return be(t)===be(e)}function we(t,e){return(0,n.kJ)(e)?e.findIndex((e=>Ce(e,t))):(0,n.mf)(e)&&Ce(e,t)?0:-1}const Se=t=>"_"===t[0]||"$stable"===t,Ee=t=>(0,n.kJ)(t)?t.map(pi):[pi(t)],xe=(t,e,i)=>{if(e._n)return e;const o=N(((...t)=>Ee(e(...t))),i);return o._c=!1,o},Oe=(t,e,i)=>{const o=t._ctx;for(const r in t){if(Se(r))continue;const i=t[r];if((0,n.mf)(i))e[r]=xe(r,i,o);else if(null!=i){0;const t=Ee(i);e[r]=()=>t}}},Re=(t,e)=>{const i=Ee(e);t.slots.default=()=>i},Ie=(t,e)=>{if(32&t.vnode.shapeFlag){const i=e._;i?(t.slots=(0,o.IU)(e),(0,n.Nj)(e,"_",i)):Oe(e,t.slots={})}else t.slots={},e&&Re(t,e);(0,n.Nj)(t.slots,ei,1)},Te=(t,e,i)=>{const{vnode:o,slots:r}=t;let s=!0,a=n.kT;if(32&o.shapeFlag){const t=e._;t?i&&1===t?s=!1:((0,n.l7)(r,e),i||1!==t||delete r._):(s=!e.$stable,Oe(e,r)),a=e}else e&&(Re(t,e),a={default:1});if(s)for(const n in r)Se(n)||null!=a[n]||delete r[n]};function Pe(t,e,i,s,a=!1){if((0,n.kJ)(t))return void t.forEach(((t,o)=>Pe(t,e&&((0,n.kJ)(e)?e[o]:e),i,s,a)));if(bt(s)&&!a)return;const l=4&s.shapeFlag?Ni(s.component)||s.component.proxy:s.el,u=a?null:l,{i:c,r:h}=t;const p=e&&e.r,d=c.refs===n.kT?c.refs={}:c.refs,f=c.setupState;if(null!=p&&p!==h&&((0,n.HD)(p)?(d[p]=null,(0,n.RI)(f,p)&&(f[p]=null)):(0,o.dq)(p)&&(p.value=null)),(0,n.mf)(h))r(h,c,12,[u,d]);else{const e=(0,n.HD)(h),r=(0,o.dq)(h);if(e||r){const o=()=>{if(t.f){const i=e?(0,n.RI)(f,h)?f[h]:d[h]:h.value;a?(0,n.kJ)(i)&&(0,n.Od)(i,l):(0,n.kJ)(i)?i.includes(l)||i.push(l):e?(d[h]=[l],(0,n.RI)(f,h)&&(f[h]=d[h])):(h.value=[l],t.k&&(d[t.k]=h.value))}else e?(d[h]=u,(0,n.RI)(f,h)&&(f[h]=u)):r&&(h.value=u,t.k&&(d[t.k]=u))};u?(o.id=-1,ke(o,i)):o()}else 0}}function De(){}const ke=X;function Ae(t){return Le(t)}function Le(t,e){De();const i=(0,n.E9)();i.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:l,createText:u,createComment:c,setText:h,setElementText:p,parentNode:d,nextSibling:f,setScopeId:g=n.dG,insertStaticContent:y}=t,_=(t,e,i,o=null,n=null,r=null,s=!1,a=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!ti(t,e)&&(o=J(t),K(t,n,r,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:u,ref:c,shapeFlag:h}=e;switch(u){case je:m(t,e,i,o);break;case He:v(t,e,i,o);break;case $e:null==t&&C(e,i,o,s);break;case Ge:L(t,e,i,o,n,r,s,a,l);break;default:1&h?R(t,e,i,o,n,r,s,a,l):6&h?M(t,e,i,o,n,r,s,a,l):(64&h||128&h)&&u.process(t,e,i,o,n,r,s,a,l,tt)}null!=c&&n&&Pe(c,t&&t.ref,r,e||t,!e)},m=(t,e,i,o)=>{if(null==t)r(e.el=u(e.children),i,o);else{const i=e.el=t.el;e.children!==t.children&&h(i,e.children)}},v=(t,e,i,o)=>{null==t?r(e.el=c(e.children||""),i,o):e.el=t.el},C=(t,e,i,o)=>{[t.el,t.anchor]=y(t.children,e,i,o,t.el,t.anchor)},S=({el:t,anchor:e},i,o)=>{let n;while(t&&t!==e)n=f(t),r(t,i,o),t=n;r(e,i,o)},O=({el:t,anchor:e})=>{let i;while(t&&t!==e)i=f(t),s(t),t=i;s(e)},R=(t,e,i,o,n,r,s,a,l)=>{s=s||"svg"===e.type,null==t?I(e,i,o,n,r,s,a,l):D(t,e,n,r,s,a,l)},I=(t,e,i,o,s,u,c,h)=>{let d,f;const{type:g,props:y,shapeFlag:_,transition:m,dirs:v}=t;if(d=t.el=l(t.type,u,y&&y.is,y),8&_?p(d,t.children):16&_&&P(t.children,d,null,o,s,u&&"foreignObject"!==g,c,h),v&&rt(t,null,o,"created"),T(d,t,t.scopeId,c,o),y){for(const e in y)"value"===e||(0,n.Gg)(e)||a(d,e,null,y[e],u,t.children,o,s,Q);"value"in y&&a(d,"value",null,y.value),(f=y.onVnodeBeforeMount)&&yi(f,o,t)}v&&rt(t,null,o,"beforeMount");const b=Fe(s,m);b&&m.beforeEnter(d),r(d,e,i),((f=y&&y.onVnodeMounted)||b||v)&&ke((()=>{f&&yi(f,o,t),b&&m.enter(d),v&&rt(t,null,o,"mounted")}),s)},T=(t,e,i,o,n)=>{if(i&&g(t,i),o)for(let r=0;r<o.length;r++)g(t,o[r]);if(n){let i=n.subTree;if(e===i){const e=n.vnode;T(t,e,e.scopeId,e.slotScopeIds,n.parent)}}},P=(t,e,i,o,n,r,s,a,l=0)=>{for(let u=l;u<t.length;u++){const l=t[u]=a?di(t[u]):pi(t[u]);_(null,l,e,i,o,n,r,s,a)}},D=(t,e,i,o,r,s,l)=>{const u=e.el=t.el;let{patchFlag:c,dynamicChildren:h,dirs:d}=e;c|=16&t.patchFlag;const f=t.props||n.kT,g=e.props||n.kT;let y;i&&Me(i,!1),(y=g.onVnodeBeforeUpdate)&&yi(y,i,e,t),d&&rt(e,t,i,"beforeUpdate"),i&&Me(i,!0);const _=r&&"foreignObject"!==e.type;if(h?k(t.dynamicChildren,h,u,i,o,_,s):l||H(t,e,u,null,i,o,_,s,!1),c>0){if(16&c)A(u,e,f,g,i,o,r);else if(2&c&&f.class!==g.class&&a(u,"class",null,g.class,r),4&c&&a(u,"style",f.style,g.style,r),8&c){const n=e.dynamicProps;for(let e=0;e<n.length;e++){const s=n[e],l=f[s],c=g[s];c===l&&"value"!==s||a(u,s,l,c,r,t.children,i,o,Q)}}1&c&&t.children!==e.children&&p(u,e.children)}else l||null!=h||A(u,e,f,g,i,o,r);((y=g.onVnodeUpdated)||d)&&ke((()=>{y&&yi(y,i,e,t),d&&rt(e,t,i,"updated")}),o)},k=(t,e,i,o,n,r,s)=>{for(let a=0;a<e.length;a++){const l=t[a],u=e[a],c=l.el&&(l.type===Ge||!ti(l,u)||70&l.shapeFlag)?d(l.el):i;_(l,u,c,null,o,n,r,s,!0)}},A=(t,e,i,o,r,s,l)=>{if(i!==o){if(i!==n.kT)for(const u in i)(0,n.Gg)(u)||u in o||a(t,u,i[u],null,l,e.children,r,s,Q);for(const u in o){if((0,n.Gg)(u))continue;const c=o[u],h=i[u];c!==h&&"value"!==u&&a(t,u,h,c,l,e.children,r,s,Q)}"value"in o&&a(t,"value",i.value,o.value)}},L=(t,e,i,o,n,s,a,l,c)=>{const h=e.el=t?t.el:u(""),p=e.anchor=t?t.anchor:u("");let{patchFlag:d,dynamicChildren:f,slotScopeIds:g}=e;g&&(l=l?l.concat(g):g),null==t?(r(h,i,o),r(p,i,o),P(e.children,i,p,n,s,a,l,c)):d>0&&64&d&&f&&t.dynamicChildren?(k(t.dynamicChildren,f,i,n,s,a,l),(null!=e.key||n&&e===n.subTree)&&Ne(t,e,!0)):H(t,e,i,p,n,s,a,l,c)},M=(t,e,i,o,n,r,s,a,l)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?n.ctx.activate(e,i,o,s,l):F(e,i,o,n,r,s,l):N(t,e,l)},F=(t,e,i,o,n,r,s)=>{const a=t.component=vi(t,o,n);if(Ct(t)&&(a.ctx.renderer=tt),Di(a),a.asyncDep){if(n&&n.registerDep(a,B),!t.el){const t=a.subTree=ri(He);v(null,t,e,i)}}else B(a,t,e,i,n,r,s)},N=(t,e,i)=>{const o=e.component=t.component;if(j(t,e,i)){if(o.asyncDep&&!o.asyncResolved)return void G(o,e,i);o.next=e,w(o.update),o.update()}else e.el=t.el,o.vnode=e},B=(t,e,i,r,s,a,l)=>{const u=()=>{if(t.isMounted){let e,{next:i,bu:o,u:r,parent:u,vnode:c}=t,h=i;0,Me(t,!1),i?(i.el=c.el,G(t,i,l)):i=c,o&&(0,n.ir)(o),(e=i.props&&i.props.onVnodeBeforeUpdate)&&yi(e,u,i,c),Me(t,!0);const p=V(t);0;const f=t.subTree;t.subTree=p,_(f,p,d(f.el),J(f),t,s,a),i.el=p.el,null===h&&$(t,p.el),r&&ke(r,s),(e=i.props&&i.props.onVnodeUpdated)&&ke((()=>yi(e,u,i,c)),s)}else{let o;const{el:l,props:u}=e,{bm:c,m:h,parent:p}=t,d=bt(e);if(Me(t,!1),c&&(0,n.ir)(c),!d&&(o=u&&u.onVnodeBeforeMount)&&yi(o,p,e),Me(t,!0),l&&it){const i=()=>{t.subTree=V(t),it(l,t.subTree,t,s,null)};d?e.type.__asyncLoader().then((()=>!t.isUnmounted&&i())):i()}else{0;const o=t.subTree=V(t);0,_(null,o,i,r,t,s,a),e.el=o.el}if(h&&ke(h,s),!d&&(o=u&&u.onVnodeMounted)){const t=e;ke((()=>yi(o,p,t)),s)}(256&e.shapeFlag||p&&bt(p.vnode)&&256&p.vnode.shapeFlag)&&t.a&&ke(t.a,s),t.isMounted=!0,e=i=r=null}},c=t.effect=new o.qq(u,(()=>b(h)),t.scope),h=t.update=()=>c.run();h.id=t.uid,Me(t,!0),h()},G=(t,e,i)=>{e.component=t;const n=t.vnode.props;t.vnode=e,t.next=null,ge(t,e.props,n,i),Te(t,e.children,i),(0,o.Jd)(),E(),(0,o.lk)()},H=(t,e,i,o,n,r,s,a,l=!1)=>{const u=t&&t.children,c=t?t.shapeFlag:0,h=e.children,{patchFlag:d,shapeFlag:f}=e;if(d>0){if(128&d)return void U(u,h,i,o,n,r,s,a,l);if(256&d)return void W(u,h,i,o,n,r,s,a,l)}8&f?(16&c&&Q(u,n,r),h!==u&&p(i,h)):16&c?16&f?U(u,h,i,o,n,r,s,a,l):Q(u,n,r,!0):(8&c&&p(i,""),16&f&&P(h,i,o,n,r,s,a,l))},W=(t,e,i,o,r,s,a,l,u)=>{t=t||n.Z6,e=e||n.Z6;const c=t.length,h=e.length,p=Math.min(c,h);let d;for(d=0;d<p;d++){const o=e[d]=u?di(e[d]):pi(e[d]);_(t[d],o,i,null,r,s,a,l,u)}c>h?Q(t,r,s,!0,!1,p):P(e,i,o,r,s,a,l,u,p)},U=(t,e,i,o,r,s,a,l,u)=>{let c=0;const h=e.length;let p=t.length-1,d=h-1;while(c<=p&&c<=d){const o=t[c],n=e[c]=u?di(e[c]):pi(e[c]);if(!ti(o,n))break;_(o,n,i,null,r,s,a,l,u),c++}while(c<=p&&c<=d){const o=t[p],n=e[d]=u?di(e[d]):pi(e[d]);if(!ti(o,n))break;_(o,n,i,null,r,s,a,l,u),p--,d--}if(c>p){if(c<=d){const t=d+1,n=t<h?e[t].el:o;while(c<=d)_(null,e[c]=u?di(e[c]):pi(e[c]),i,n,r,s,a,l,u),c++}}else if(c>d)while(c<=p)K(t[c],r,s,!0),c++;else{const f=c,g=c,y=new Map;for(c=g;c<=d;c++){const t=e[c]=u?di(e[c]):pi(e[c]);null!=t.key&&y.set(t.key,c)}let m,v=0;const b=d-g+1;let C=!1,w=0;const S=new Array(b);for(c=0;c<b;c++)S[c]=0;for(c=f;c<=p;c++){const o=t[c];if(v>=b){K(o,r,s,!0);continue}let n;if(null!=o.key)n=y.get(o.key);else for(m=g;m<=d;m++)if(0===S[m-g]&&ti(o,e[m])){n=m;break}void 0===n?K(o,r,s,!0):(S[n-g]=c+1,n>=w?w=n:C=!0,_(o,e[n],i,null,r,s,a,l,u),v++)}const E=C?Ve(S):n.Z6;for(m=E.length-1,c=b-1;c>=0;c--){const t=g+c,n=e[t],p=t+1<h?e[t+1].el:o;0===S[c]?_(null,n,i,p,r,s,a,l,u):C&&(m<0||c!==E[m]?z(n,i,p,2):m--)}}},z=(t,e,i,o,n=null)=>{const{el:s,type:a,transition:l,children:u,shapeFlag:c}=t;if(6&c)return void z(t.component.subTree,e,i,o);if(128&c)return void t.suspense.move(e,i,o);if(64&c)return void a.move(t,e,i,tt);if(a===Ge){r(s,e,i);for(let t=0;t<u.length;t++)z(u[t],e,i,o);return void r(t.anchor,e,i)}if(a===$e)return void S(t,e,i);const h=2!==o&&1&c&&l;if(h)if(0===o)l.beforeEnter(s),r(s,e,i),ke((()=>l.enter(s)),n);else{const{leave:t,delayLeave:o,afterLeave:n}=l,a=()=>r(s,e,i),u=()=>{t(s,(()=>{a(),n&&n()}))};o?o(s,a,u):u()}else r(s,e,i)},K=(t,e,i,o=!1,n=!1)=>{const{type:r,props:s,ref:a,children:l,dynamicChildren:u,shapeFlag:c,patchFlag:h,dirs:p}=t;if(null!=a&&Pe(a,null,i,t,!0),256&c)return void e.ctx.deactivate(t);const d=1&c&&p,f=!bt(t);let g;if(f&&(g=s&&s.onVnodeBeforeUnmount)&&yi(g,e,t),6&c)X(t.component,i,o);else{if(128&c)return void t.suspense.unmount(i,o);d&&rt(t,null,e,"beforeUnmount"),64&c?t.type.remove(t,e,i,n,tt,o):u&&(r!==Ge||h>0&&64&h)?Q(u,e,i,!1,!0):(r===Ge&&384&h||!n&&16&c)&&Q(l,e,i),o&&Y(t)}(f&&(g=s&&s.onVnodeUnmounted)||d)&&ke((()=>{g&&yi(g,e,t),d&&rt(t,null,e,"unmounted")}),i)},Y=t=>{const{type:e,el:i,anchor:o,transition:n}=t;if(e===Ge)return void q(i,o);if(e===$e)return void O(t);const r=()=>{s(i),n&&!n.persisted&&n.afterLeave&&n.afterLeave()};if(1&t.shapeFlag&&n&&!n.persisted){const{leave:e,delayLeave:o}=n,s=()=>e(i,r);o?o(t.el,r,s):s()}else r()},q=(t,e)=>{let i;while(t!==e)i=f(t),s(t),t=i;s(e)},X=(t,e,i)=>{const{bum:o,scope:r,update:s,subTree:a,um:l}=t;o&&(0,n.ir)(o),r.stop(),s&&(s.active=!1,K(a,t,e,i)),l&&ke(l,e),ke((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},Q=(t,e,i,o=!1,n=!1,r=0)=>{for(let s=r;s<t.length;s++)K(t[s],e,i,o,n)},J=t=>6&t.shapeFlag?J(t.component.subTree):128&t.shapeFlag?t.suspense.next():f(t.anchor||t.el),Z=(t,e,i)=>{null==t?e._vnode&&K(e._vnode,null,null,!0):_(e._vnode||null,t,e,null,null,null,i),E(),x(),e._vnode=t},tt={p:_,um:K,m:z,r:Y,mt:F,mc:P,pc:H,pbc:k,n:J,o:t};let et,it;return e&&([et,it]=e(tt)),{render:Z,hydrate:et,createApp:ce(Z,et)}}function Me({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function Fe(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ne(t,e,i=!1){const o=t.children,r=e.children;if((0,n.kJ)(o)&&(0,n.kJ)(r))for(let n=0;n<o.length;n++){const t=o[n];let e=r[n];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=r[n]=di(r[n]),e.el=t.el),i||Ne(t,e)),e.type===je&&(e.el=t.el)}}function Ve(t){const e=t.slice(),i=[0];let o,n,r,s,a;const l=t.length;for(o=0;o<l;o++){const l=t[o];if(0!==l){if(n=i[i.length-1],t[n]<l){e[o]=n,i.push(o);continue}r=0,s=i.length-1;while(r<s)a=r+s>>1,t[i[a]]<l?r=a+1:s=a;l<t[i[r]]&&(r>0&&(e[o]=i[r-1]),i[r]=o)}}r=i.length,s=i[r-1];while(r-- >0)i[r]=s,s=e[s];return i}const Be=t=>t.__isTeleport;const Ge=Symbol.for("v-fgt"),je=Symbol.for("v-txt"),He=Symbol.for("v-cmt"),$e=Symbol.for("v-stc"),We=[];let Ue=null;function ze(t=!1){We.push(Ue=t?null:[])}function Ke(){We.pop(),Ue=We[We.length-1]||null}let Ye=1;function qe(t){Ye+=t}function Xe(t){return t.dynamicChildren=Ye>0?Ue||n.Z6:null,Ke(),Ye>0&&Ue&&Ue.push(t),t}function Qe(t,e,i,o,n,r){return Xe(ni(t,e,i,o,n,r,!0))}function Je(t,e,i,o,n){return Xe(ri(t,e,i,o,n,!0))}function Ze(t){return!!t&&!0===t.__v_isVNode}function ti(t,e){return t.type===e.type&&t.key===e.key}const ei="__vInternal",ii=({key:t})=>null!=t?t:null,oi=({ref:t,ref_key:e,ref_for:i})=>("number"===typeof t&&(t=""+t),null!=t?(0,n.HD)(t)||(0,o.dq)(t)||(0,n.mf)(t)?{i:k,r:t,k:e,f:!!i}:t:null);function ni(t,e=null,i=null,o=0,r=null,s=(t===Ge?0:1),a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ii(e),ref:e&&oi(e),scopeId:A,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:k};return l?(fi(u,i),128&s&&t.normalize(u)):i&&(u.shapeFlag|=(0,n.HD)(i)?8:16),Ye>0&&!a&&Ue&&(u.patchFlag>0||6&s)&&32!==u.patchFlag&&Ue.push(u),u}const ri=si;function si(t,e=null,i=null,r=0,s=null,a=!1){if(t&&t!==z||(t=He),Ze(t)){const o=li(t,e,!0);return i&&fi(o,i),Ye>0&&!a&&Ue&&(6&o.shapeFlag?Ue[Ue.indexOf(t)]=o:Ue.push(o)),o.patchFlag|=-2,o}if(Bi(t)&&(t=t.__vccOpts),e){e=ai(e);let{class:t,style:i}=e;t&&!(0,n.HD)(t)&&(e.class=(0,n.C_)(t)),(0,n.Kn)(i)&&((0,o.X3)(i)&&!(0,n.kJ)(i)&&(i=(0,n.l7)({},i)),e.style=(0,n.j5)(i))}const l=(0,n.HD)(t)?1:q(t)?128:Be(t)?64:(0,n.Kn)(t)?4:(0,n.mf)(t)?2:0;return ni(t,e,i,r,s,l,a,!0)}function ai(t){return t?(0,o.X3)(t)||ei in t?(0,n.l7)({},t):t:null}function li(t,e,i=!1){const{props:o,ref:r,patchFlag:s,children:a}=t,l=e?gi(o||{},e):o,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&ii(l),ref:e&&e.ref?i&&r?(0,n.kJ)(r)?r.concat(oi(e)):[r,oi(e)]:oi(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ge?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&li(t.ssContent),ssFallback:t.ssFallback&&li(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u}function ui(t=" ",e=0){return ri(je,null,t,e)}function ci(t,e){const i=ri($e,null,t);return i.staticCount=e,i}function hi(t="",e=!1){return e?(ze(),Je(He,null,t)):ri(He,null,t)}function pi(t){return null==t||"boolean"===typeof t?ri(He):(0,n.kJ)(t)?ri(Ge,null,t.slice()):"object"===typeof t?di(t):ri(je,null,String(t))}function di(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:li(t)}function fi(t,e){let i=0;const{shapeFlag:o}=t;if(null==e)e=null;else if((0,n.kJ)(e))i=16;else if("object"===typeof e){if(65&o){const i=e.default;return void(i&&(i._c&&(i._d=!1),fi(t,i()),i._c&&(i._d=!0)))}{i=32;const o=e._;o||ei in e?3===o&&k&&(1===k.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=k}}else(0,n.mf)(e)?(e={default:e,_ctx:k},i=32):(e=String(e),64&o?(i=16,e=[ui(e)]):i=8);t.children=e,t.shapeFlag|=i}function gi(...t){const e={};for(let i=0;i<t.length;i++){const o=t[i];for(const t in o)if("class"===t)e.class!==o.class&&(e.class=(0,n.C_)([e.class,o.class]));else if("style"===t)e.style=(0,n.j5)([e.style,o.style]);else if((0,n.F7)(t)){const i=e[t],r=o[t];!r||i===r||(0,n.kJ)(i)&&i.includes(r)||(e[t]=i?[].concat(i,r):r)}else""!==t&&(e[t]=o[t])}return e}function yi(t,e,i,o=null){s(t,e,7,[i,o])}const _i=le();let mi=0;function vi(t,e,i){const r=t.type,s=(e?e.appContext:t.appContext)||_i,a={uid:mi++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new o.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:me(r,s),emitsOptions:P(r,s),emit:null,emitted:null,propsDefaults:n.kT,inheritAttrs:r.inheritAttrs,ctx:n.kT,data:n.kT,props:n.kT,attrs:n.kT,slots:n.kT,refs:n.kT,setupState:n.kT,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=T.bind(null,a),t.ce&&t.ce(a),a}let bi=null;const Ci=()=>bi||k;let wi,Si,Ei="__VUE_INSTANCE_SETTERS__";(Si=(0,n.E9)()[Ei])||(Si=(0,n.E9)()[Ei]=[]),Si.push((t=>bi=t)),wi=t=>{Si.length>1?Si.forEach((e=>e(t))):Si[0](t)};const xi=t=>{wi(t),t.scope.on()},Oi=()=>{bi&&bi.scope.off(),wi(null)};function Ri(t){return 4&t.vnode.shapeFlag}let Ii,Ti,Pi=!1;function Di(t,e=!1){Pi=e;const{props:i,children:o}=t.vnode,n=Ri(t);fe(t,i,n,e),Ie(t,o);const r=n?ki(t,e):void 0;return Pi=!1,r}function ki(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=(0,o.Xl)(new Proxy(t.ctx,Ut));const{setup:s}=i;if(s){const i=t.setupContext=s.length>1?Fi(t):null;xi(t),(0,o.Jd)();const l=r(s,t,0,[t.props,i]);if((0,o.lk)(),Oi(),(0,n.tI)(l)){if(l.then(Oi,Oi),e)return l.then((i=>{Ai(t,i,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=l}else Ai(t,l,e)}else Li(t,e)}function Ai(t,e,i){(0,n.mf)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,n.Kn)(e)&&(t.setupState=(0,o.WL)(e)),Li(t,i)}function Li(t,e,i){const r=t.type;if(!t.render){if(!e&&Ii&&!r.render){const e=r.template||Jt(t).template;if(e){0;const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:s,compilerOptions:a}=r,l=(0,n.l7)((0,n.l7)({isCustomElement:i,delimiters:s},o),a);r.render=Ii(e,l)}}t.render=r.render||n.dG,Ti&&Ti(t)}xi(t),(0,o.Jd)();try{Yt(t)}finally{(0,o.lk)(),Oi()}}function Mi(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,i){return(0,o.j)(t,"get","$attrs"),e[i]}}))}function Fi(t){const e=e=>{t.exposed=e||{}};return{get attrs(){return Mi(t)},slots:t.slots,emit:t.emit,expose:e}}function Ni(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,o.WL)((0,o.Xl)(t.exposed)),{get(e,i){return i in e?e[i]:i in $t?$t[i](t):void 0},has(t,e){return e in t||e in $t}}))}function Vi(t,e=!0){return(0,n.mf)(t)?t.displayName||t.name:t.name||e&&t.__name}function Bi(t){return(0,n.mf)(t)&&"__vccOpts"in t}const Gi=(t,e)=>(0,o.Fl)(t,e,Pi);function ji(t,e,i){const o=arguments.length;return 2===o?(0,n.Kn)(e)&&!(0,n.kJ)(e)?Ze(e)?ri(t,null,[e]):ri(t,e):ri(t,null,e):(o>3?i=Array.prototype.slice.call(arguments,2):3===o&&Ze(i)&&(i=[i]),ri(t,e,i))}const Hi=Symbol.for("v-scx"),$i=()=>{{const t=de(Hi);return t}};const Wi="3.3.8"},9242:function(t,e,i){"use strict";i.d(e,{D2:function(){return xt},F8:function(){return k},G2:function(){return _t},bM:function(){return mt},iM:function(){return St},nr:function(){return yt},ri:function(){return Pt},sY:function(){return Tt}});i(560);var o=i(3396),n=i(7139),r=i(4870);const s="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,l=a&&a.createElement("template"),u={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,o)=>{const n=e?a.createElementNS(s,t):a.createElement(t,i?{is:i}:void 0);return"select"===t&&o&&null!=o.multiple&&n.setAttribute("multiple",o.multiple),n},createText:t=>a.createTextNode(t),createComment:t=>a.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>a.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,o,n,r){const s=i?i.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling)){while(1)if(e.insertBefore(n.cloneNode(!0),i),n===r||!(n=n.nextSibling))break}else{l.innerHTML=o?`<svg>${t}</svg>`:t;const n=l.content;if(o){const t=n.firstChild;while(t.firstChild)n.appendChild(t.firstChild);n.removeChild(t)}e.insertBefore(n,i)}return[s?s.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},c="transition",h="animation",p=Symbol("_vtc"),d=(t,{slots:e})=>(0,o.h)(o.P$,m(t),e);d.displayName="Transition";const f={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},g=d.props=(0,n.l7)({},o.nJ,f),y=(t,e=[])=>{(0,n.kJ)(t)?t.forEach((t=>t(...e))):t&&t(...e)},_=t=>!!t&&((0,n.kJ)(t)?t.some((t=>t.length>1)):t.length>1);function m(t){const e={};for(const n in t)n in f||(e[n]=t[n]);if(!1===t.css)return e;const{name:i="v",type:o,duration:r,enterFromClass:s=`${i}-enter-from`,enterActiveClass:a=`${i}-enter-active`,enterToClass:l=`${i}-enter-to`,appearFromClass:u=s,appearActiveClass:c=a,appearToClass:h=l,leaveFromClass:p=`${i}-leave-from`,leaveActiveClass:d=`${i}-leave-active`,leaveToClass:g=`${i}-leave-to`}=t,m=v(r),b=m&&m[0],E=m&&m[1],{onBeforeEnter:O,onEnter:R,onEnterCancelled:I,onLeave:P,onLeaveCancelled:D,onBeforeAppear:k=O,onAppear:A=R,onAppearCancelled:L=I}=e,M=(t,e,i)=>{w(t,e?h:l),w(t,e?c:a),i&&i()},F=(t,e)=>{t._isLeaving=!1,w(t,p),w(t,g),w(t,d),e&&e()},N=t=>(e,i)=>{const n=t?A:R,r=()=>M(e,t,i);y(n,[e,r]),S((()=>{w(e,t?u:s),C(e,t?h:l),_(n)||x(e,o,b,r)}))};return(0,n.l7)(e,{onBeforeEnter(t){y(O,[t]),C(t,s),C(t,a)},onBeforeAppear(t){y(k,[t]),C(t,u),C(t,c)},onEnter:N(!1),onAppear:N(!0),onLeave(t,e){t._isLeaving=!0;const i=()=>F(t,e);C(t,p),T(),C(t,d),S((()=>{t._isLeaving&&(w(t,p),C(t,g),_(P)||x(t,o,E,i))})),y(P,[t,i])},onEnterCancelled(t){M(t,!1),y(I,[t])},onAppearCancelled(t){M(t,!0),y(L,[t])},onLeaveCancelled(t){F(t),y(D,[t])}})}function v(t){if(null==t)return null;if((0,n.Kn)(t))return[b(t.enter),b(t.leave)];{const e=b(t);return[e,e]}}function b(t){const e=(0,n.He)(t);return e}function C(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t[p]||(t[p]=new Set)).add(e)}function w(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const i=t[p];i&&(i.delete(e),i.size||(t[p]=void 0))}function S(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let E=0;function x(t,e,i,o){const n=t._endId=++E,r=()=>{n===t._endId&&o()};if(i)return setTimeout(r,i);const{type:s,timeout:a,propCount:l}=O(t,e);if(!s)return o();const u=s+"end";let c=0;const h=()=>{t.removeEventListener(u,p),r()},p=e=>{e.target===t&&++c>=l&&h()};setTimeout((()=>{c<l&&h()}),a+1),t.addEventListener(u,p)}function O(t,e){const i=window.getComputedStyle(t),o=t=>(i[t]||"").split(", "),n=o(`${c}Delay`),r=o(`${c}Duration`),s=R(n,r),a=o(`${h}Delay`),l=o(`${h}Duration`),u=R(a,l);let p=null,d=0,f=0;e===c?s>0&&(p=c,d=s,f=r.length):e===h?u>0&&(p=h,d=u,f=l.length):(d=Math.max(s,u),p=d>0?s>u?c:h:null,f=p?p===c?r.length:l.length:0);const g=p===c&&/\b(transform|all)(,|$)/.test(o(`${c}Property`).toString());return{type:p,timeout:d,propCount:f,hasTransform:g}}function R(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,i)=>I(e)+I(t[i]))))}function I(t){return"auto"===t?0:1e3*Number(t.slice(0,-1).replace(",","."))}function T(){return document.body.offsetHeight}function P(t,e,i){const o=t[p];o&&(e=(e?[e,...o]:[...o]).join(" ")),null==e?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const D=Symbol("_vod"),k={beforeMount(t,{value:e},{transition:i}){t[D]="none"===t.style.display?"":t.style.display,i&&e?i.beforeEnter(t):A(t,e)},mounted(t,{value:e},{transition:i}){i&&e&&i.enter(t)},updated(t,{value:e,oldValue:i},{transition:o}){!e!==!i&&(o?e?(o.beforeEnter(t),A(t,!0),o.enter(t)):o.leave(t,(()=>{A(t,!1)})):A(t,e))},beforeUnmount(t,{value:e}){A(t,e)}};function A(t,e){t.style.display=e?t[D]:"none"}function L(t,e,i){const o=t.style,r=(0,n.HD)(i);if(i&&!r){if(e&&!(0,n.HD)(e))for(const t in e)null==i[t]&&F(o,t,"");for(const t in i)F(o,t,i[t])}else{const n=o.display;r?e!==i&&(o.cssText=i):e&&t.removeAttribute("style"),D in t&&(o.display=n)}}const M=/\s*!important$/;function F(t,e,i){if((0,n.kJ)(i))i.forEach((i=>F(t,e,i)));else if(null==i&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const o=B(t,e);M.test(i)?t.setProperty((0,n.rs)(o),i.replace(M,""),"important"):t[o]=i}}const N=["Webkit","Moz","ms"],V={};function B(t,e){const i=V[e];if(i)return i;let o=(0,n._A)(e);if("filter"!==o&&o in t)return V[e]=o;o=(0,n.kC)(o);for(let n=0;n<N.length;n++){const i=N[n]+o;if(i in t)return V[e]=i}return e}const G="http://www.w3.org/1999/xlink";function j(t,e,i,o,r){if(o&&e.startsWith("xlink:"))null==i?t.removeAttributeNS(G,e.slice(6,e.length)):t.setAttributeNS(G,e,i);else{const o=(0,n.Pq)(e);null==i||o&&!(0,n.yA)(i)?t.removeAttribute(e):t.setAttribute(e,o?"":i)}}function H(t,e,i,o,r,s,a){if("innerHTML"===e||"textContent"===e)return o&&a(o,r,s),void(t[e]=null==i?"":i);const l=t.tagName;if("value"===e&&"PROGRESS"!==l&&!l.includes("-")){t._value=i;const o="OPTION"===l?t.getAttribute("value"):t.value,n=null==i?"":i;return o!==n&&(t.value=n),void(null==i&&t.removeAttribute(e))}let u=!1;if(""===i||null==i){const o=typeof t[e];"boolean"===o?i=(0,n.yA)(i):null==i&&"string"===o?(i="",u=!0):"number"===o&&(i=0,u=!0)}try{t[e]=i}catch(c){0}u&&t.removeAttribute(e)}function $(t,e,i,o){t.addEventListener(e,i,o)}function W(t,e,i,o){t.removeEventListener(e,i,o)}const U=Symbol("_vei");function z(t,e,i,o,n=null){const r=t[U]||(t[U]={}),s=r[e];if(o&&s)s.value=o;else{const[i,a]=Y(e);if(o){const s=r[e]=J(o,n);$(t,i,s,a)}else s&&(W(t,i,s,a),r[e]=void 0)}}const K=/(?:Once|Passive|Capture)$/;function Y(t){let e;if(K.test(t)){let i;e={};while(i=t.match(K))t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}const i=":"===t[2]?t.slice(3):(0,n.rs)(t.slice(2));return[i,e]}let q=0;const X=Promise.resolve(),Q=()=>q||(X.then((()=>q=0)),q=Date.now());function J(t,e){const i=t=>{if(t._vts){if(t._vts<=i.attached)return}else t._vts=Date.now();(0,o.$d)(Z(t,i.value),e,5,[t])};return i.value=t,i.attached=Q(),i}function Z(t,e){if((0,n.kJ)(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const tt=/^on[a-z]/,et=(t,e,i,o,r=!1,s,a,l,u)=>{"class"===e?P(t,o,r):"style"===e?L(t,i,o):(0,n.F7)(e)?(0,n.tR)(e)||z(t,e,i,o,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):it(t,e,o,r))?H(t,e,o,s,a,l,u):("true-value"===e?t._trueValue=o:"false-value"===e&&(t._falseValue=o),j(t,e,o,r))};function it(t,e,i,o){return o?"innerHTML"===e||"textContent"===e||!!(e in t&&tt.test(e)&&(0,n.mf)(i)):"spellcheck"!==e&&"draggable"!==e&&"translate"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!tt.test(e)||!(0,n.HD)(i))&&e in t))))}
/*! #__NO_SIDE_EFFECTS__ */
/*! #__NO_SIDE_EFFECTS__ */
"undefined"!==typeof HTMLElement&&HTMLElement;const ot=new WeakMap,nt=new WeakMap,rt=Symbol("_moveCb"),st=Symbol("_enterCb"),at={name:"TransitionGroup",props:(0,n.l7)({},g,{tag:String,moveClass:String}),setup(t,{slots:e}){const i=(0,o.FN)(),n=(0,o.Y8)();let s,a;return(0,o.ic)((()=>{if(!s.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!ht(s[0].el,i.vnode.el,e))return;s.forEach(lt),s.forEach(ut);const o=s.filter(ct);T(),o.forEach((t=>{const i=t.el,o=i.style;C(i,e),o.transform=o.webkitTransform=o.transitionDuration="";const n=i[rt]=t=>{t&&t.target!==i||t&&!/transform$/.test(t.propertyName)||(i.removeEventListener("transitionend",n),i[rt]=null,w(i,e))};i.addEventListener("transitionend",n)}))})),()=>{const l=(0,r.IU)(t),u=m(l);let c=l.tag||o.HY;s=a,a=e.default?(0,o.Q6)(e.default()):[];for(let t=0;t<a.length;t++){const e=a[t];null!=e.key&&(0,o.nK)(e,(0,o.U2)(e,u,n,i))}if(s)for(let t=0;t<s.length;t++){const e=s[t];(0,o.nK)(e,(0,o.U2)(e,u,n,i)),ot.set(e,e.el.getBoundingClientRect())}return(0,o.Wm)(c,null,a)}}};at.props;function lt(t){const e=t.el;e[rt]&&e[rt](),e[st]&&e[st]()}function ut(t){nt.set(t,t.el.getBoundingClientRect())}function ct(t){const e=ot.get(t),i=nt.get(t),o=e.left-i.left,n=e.top-i.top;if(o||n){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${o}px,${n}px)`,e.transitionDuration="0s",t}}function ht(t,e,i){const o=t.cloneNode(),n=t[p];n&&n.forEach((t=>{t.split(/\s+/).forEach((t=>t&&o.classList.remove(t)))})),i.split(/\s+/).forEach((t=>t&&o.classList.add(t))),o.style.display="none";const r=1===e.nodeType?e:e.parentNode;r.appendChild(o);const{hasTransform:s}=O(o);return r.removeChild(o),s}const pt=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,n.kJ)(e)?t=>(0,n.ir)(e,t):e};function dt(t){t.target.composing=!0}function ft(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const gt=Symbol("_assign"),yt={created(t,{modifiers:{lazy:e,trim:i,number:o}},r){t[gt]=pt(r);const s=o||r.props&&"number"===r.props.type;$(t,e?"change":"input",(e=>{if(e.target.composing)return;let o=t.value;i&&(o=o.trim()),s&&(o=(0,n.h5)(o)),t[gt](o)})),i&&$(t,"change",(()=>{t.value=t.value.trim()})),e||($(t,"compositionstart",dt),$(t,"compositionend",ft),$(t,"change",ft))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:i,trim:o,number:r}},s){if(t[gt]=pt(s),t.composing)return;if(document.activeElement===t&&"range"!==t.type){if(i)return;if(o&&t.value.trim()===e)return;if((r||"number"===t.type)&&(0,n.h5)(t.value)===e)return}const a=null==e?"":e;t.value!==a&&(t.value=a)}};const _t={created(t,{value:e},i){t.checked=(0,n.WV)(e,i.props.value),t[gt]=pt(i),$(t,"change",(()=>{t[gt](bt(t))}))},beforeUpdate(t,{value:e,oldValue:i},o){t[gt]=pt(o),e!==i&&(t.checked=(0,n.WV)(e,o.props.value))}},mt={deep:!0,created(t,{value:e,modifiers:{number:i}},o){const r=(0,n.DM)(e);$(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>i?(0,n.h5)(bt(t)):bt(t)));t[gt](t.multiple?r?new Set(e):e:e[0])})),t[gt]=pt(o)},mounted(t,{value:e}){vt(t,e)},beforeUpdate(t,e,i){t[gt]=pt(i)},updated(t,{value:e}){vt(t,e)}};function vt(t,e){const i=t.multiple;if(!i||(0,n.kJ)(e)||(0,n.DM)(e)){for(let o=0,r=t.options.length;o<r;o++){const r=t.options[o],s=bt(r);if(i)(0,n.kJ)(e)?r.selected=(0,n.hq)(e,s)>-1:r.selected=e.has(s);else if((0,n.WV)(bt(r),e))return void(t.selectedIndex!==o&&(t.selectedIndex=o))}i||-1===t.selectedIndex||(t.selectedIndex=-1)}}function bt(t){return"_value"in t?t._value:t.value}const Ct=["ctrl","shift","alt","meta"],wt={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>Ct.some((i=>t[`${i}Key`]&&!e.includes(i)))},St=(t,e)=>(i,...o)=>{for(let t=0;t<e.length;t++){const o=wt[e[t]];if(o&&o(i,e))return}return t(i,...o)},Et={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},xt=(t,e)=>i=>{if(!("key"in i))return;const o=(0,n.rs)(i.key);return e.some((t=>t===o||Et[t]===o))?t(i):void 0},Ot=(0,n.l7)({patchProp:et},u);let Rt;function It(){return Rt||(Rt=(0,o.Us)(Ot))}const Tt=(...t)=>{It().render(...t)},Pt=(...t)=>{const e=It().createApp(...t);const{mount:i}=e;return e.mount=t=>{const o=Dt(t);if(!o)return;const r=e._component;(0,n.mf)(r)||r.render||r.template||(r.template=o.innerHTML),o.innerHTML="";const s=i(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),s},e};function Dt(t){if((0,n.HD)(t)){const e=document.querySelector(t);return e}return t}},7139:function(t,e,i){"use strict";i.d(e,{C_:function(){return J},DM:function(){return _},E9:function(){return W},F7:function(){return u},Gg:function(){return P},HD:function(){return C},He:function(){return H},Kj:function(){return v},Kn:function(){return S},NO:function(){return a},Nj:function(){return G},Od:function(){return p},PO:function(){return I},Pq:function(){return tt},RI:function(){return f},S0:function(){return T},W7:function(){return R},WV:function(){return ot},Z6:function(){return r},_A:function(){return A},_N:function(){return y},aU:function(){return V},dG:function(){return s},fY:function(){return o},h5:function(){return j},hR:function(){return N},hq:function(){return nt},ir:function(){return B},j5:function(){return K},kC:function(){return F},kJ:function(){return g},kT:function(){return n},l7:function(){return h},mf:function(){return b},rs:function(){return M},tI:function(){return E},tR:function(){return c},yA:function(){return et},yk:function(){return w},yl:function(){return z},zw:function(){return rt}});i(560);function o(t,e){const i=Object.create(null),o=t.split(",");for(let n=0;n<o.length;n++)i[o[n]]=!0;return e?t=>!!i[t.toLowerCase()]:t=>!!i[t]}const n={},r=[],s=()=>{},a=()=>!1,l=/^on[^a-z]/,u=t=>l.test(t),c=t=>t.startsWith("onUpdate:"),h=Object.assign,p=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},d=Object.prototype.hasOwnProperty,f=(t,e)=>d.call(t,e),g=Array.isArray,y=t=>"[object Map]"===O(t),_=t=>"[object Set]"===O(t),m=t=>"[object Date]"===O(t),v=t=>"[object RegExp]"===O(t),b=t=>"function"===typeof t,C=t=>"string"===typeof t,w=t=>"symbol"===typeof t,S=t=>null!==t&&"object"===typeof t,E=t=>(S(t)||b(t))&&b(t.then)&&b(t.catch),x=Object.prototype.toString,O=t=>x.call(t),R=t=>O(t).slice(8,-1),I=t=>"[object Object]"===O(t),T=t=>C(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,P=o(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),D=t=>{const e=Object.create(null);return i=>{const o=e[i];return o||(e[i]=t(i))}},k=/-(\w)/g,A=D((t=>t.replace(k,((t,e)=>e?e.toUpperCase():"")))),L=/\B([A-Z])/g,M=D((t=>t.replace(L,"-$1").toLowerCase())),F=D((t=>t.charAt(0).toUpperCase()+t.slice(1))),N=D((t=>{const e=t?`on${F(t)}`:"";return e})),V=(t,e)=>!Object.is(t,e),B=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},G=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},j=t=>{const e=parseFloat(t);return isNaN(e)?t:e},H=t=>{const e=C(t)?Number(t):NaN;return isNaN(e)?t:e};let $;const W=()=>$||($="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof i.g?i.g:{});const U="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",z=o(U);function K(t){if(g(t)){const e={};for(let i=0;i<t.length;i++){const o=t[i],n=C(o)?Q(o):K(o);if(n)for(const t in n)e[t]=n[t]}return e}if(C(t)||S(t))return t}const Y=/;(?![^(]*\))/g,q=/:([^]+)/,X=/\/\*[^]*?\*\//g;function Q(t){const e={};return t.replace(X,"").split(Y).forEach((t=>{if(t){const i=t.split(q);i.length>1&&(e[i[0].trim()]=i[1].trim())}})),e}function J(t){let e="";if(C(t))e=t;else if(g(t))for(let i=0;i<t.length;i++){const o=J(t[i]);o&&(e+=o+" ")}else if(S(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const Z="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tt=o(Z);function et(t){return!!t||""===t}function it(t,e){if(t.length!==e.length)return!1;let i=!0;for(let o=0;i&&o<t.length;o++)i=ot(t[o],e[o]);return i}function ot(t,e){if(t===e)return!0;let i=m(t),o=m(e);if(i||o)return!(!i||!o)&&t.getTime()===e.getTime();if(i=w(t),o=w(e),i||o)return t===e;if(i=g(t),o=g(e),i||o)return!(!i||!o)&&it(t,e);if(i=S(t),o=S(e),i||o){if(!i||!o)return!1;const n=Object.keys(t).length,r=Object.keys(e).length;if(n!==r)return!1;for(const i in t){const o=t.hasOwnProperty(i),n=e.hasOwnProperty(i);if(o&&!n||!o&&n||!ot(t[i],e[i]))return!1}}return String(t)===String(e)}function nt(t,e){return t.findIndex((t=>ot(t,e)))}const rt=t=>C(t)?t:null==t?"":g(t)||S(t)&&(t.toString===x||!b(t.toString))?JSON.stringify(t,st,2):String(t),st=(t,e)=>e&&e.__v_isRef?st(t,e.value):y(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,i])=>(t[`${e} =>`]=i,t)),{})}:_(e)?{[`Set(${e.size})`]:[...e.values()]}:!S(e)||g(e)||I(e)?e:String(e)},6732:function(t,e,i){"use strict";i.d(e,{n:function(){return rb}});i(560);var o=i(3396),n=i(4870);i(8858),i(1318),i(3228),i(4224),i(1121),i(7133),i(3429);
/**
          * @ag-grid-community/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.2.1
          * @link https://www.ag-grid.com/
          * @license MIT
          */
function r(t){return null==t||""===t?null:t}function s(t,e){return void 0===e&&(e=!1),null!=t&&(""!==t||e)}function a(t){return!s(t)}function l(t){return null==t||0===t.length}function u(t){return null!=t&&"function"===typeof t.toString?t.toString():null}function c(t){if(void 0!==t){if(null===t||""===t)return null;if("number"===typeof t)return isNaN(t)?void 0:t;var e=parseInt(t,10);return isNaN(e)?void 0:e}}function h(t){if(void 0!==t)return null!==t&&""!==t&&("boolean"===typeof t?t:/true/i.test(t))}function p(t){if(null!=t&&""!==t)return t}function d(t,e){return null==t&&null==e||(null!=t||null==e)&&((null==t||null!=e)&&t===e)}function f(t,e){var i=t?JSON.stringify(t):null,o=e?JSON.stringify(e):null;return i===o}function g(t,e,i){void 0===i&&(i=!1);var o=null==t,n=null==e;if(t&&t.toNumber&&(t=t.toNumber()),e&&e.toNumber&&(e=e.toNumber()),o&&n)return 0;if(o)return-1;if(n)return 1;function r(t,e){return t>e?1:t<e?-1:0}if("string"!==typeof t)return r(t,e);if(!i)return r(t,e);try{return t.localeCompare(e)}catch(s){return r(t,e)}}function y(t){if(t instanceof Set||t instanceof Map){var e=[];return t.forEach((function(t){return e.push(t)})),e}return Object.values(t)}var _=Object.freeze({__proto__:null,makeNull:r,exists:s,missing:a,missingOrEmpty:l,toStringOrNull:u,attrToNumber:c,attrToBoolean:h,attrToString:p,referenceCompare:d,jsonEquals:f,defaultComparator:g,values:y}),m=function(){function t(){this.existingKeys={}}return t.prototype.addExistingKeys=function(t){for(var e=0;e<t.length;e++)this.existingKeys[t[e]]=!0},t.prototype.getUniqueKey=function(t,e){t=u(t);var i=0;while(1){var o=void 0;if(t?(o=t,0!==i&&(o+="_"+i)):e?(o=e,0!==i&&(o+="_"+i)):o=i,!this.existingKeys[o])return this.existingKeys[o]=!0,String(o);i++}},t}(),v=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s};function C(t,e){var i,o;if(null!=t)if(Array.isArray(t))for(var n=0;n<t.length;n++)e(n.toString(),t[n]);else try{for(var r=v(Object.entries(t)),s=r.next();!s.done;s=r.next()){var a=b(s.value,2),l=a[0],u=a[1];e(l,u)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}}function w(t){for(var e={},i=Object.keys(t),o=0;o<i.length;o++){var n=i[o],r=t[n];e[n]=r}return e}function S(t){return JSON.parse(JSON.stringify(t))}function E(t,e){if(t){var i=t,o={};return Object.keys(i).forEach((function(t){if(!(e&&e.indexOf(t)>=0)){var n=i[t],r=N(n)&&n.constructor===Object;o[t]=r?E(n):n}})),o}}function x(t,e){return t[e]}function O(t,e,i){t[e]=i}function R(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];i.forEach((function(i){return I(t,e,i)}))}function I(t,e,i,o){var n=x(t,i);void 0!==n&&O(e,i,o?o(n):n)}function T(t){var e={};return t.filter((function(t){return null!=t})).forEach((function(t){Object.keys(t).forEach((function(t){return e[t]=null}))})),Object.keys(e)}function P(t){if(!t)return[];var e=Object;if("function"===typeof e.values)return e.values(t);var i=[];for(var o in t)t.hasOwnProperty(o)&&t.propertyIsEnumerable(o)&&i.push(t[o]);return i}function D(t,e,i,o){void 0===i&&(i=!0),void 0===o&&(o=!1),s(e)&&C(e,(function(e,n){var r=t[e];if(r!==n){if(o){var s=null==r&&null!=n;if(s){var a="object"===typeof n&&n.constructor===Object,l=a;l&&(r={},t[e]=r)}}N(n)&&N(r)&&!Array.isArray(r)?D(r,n,i,o):(i||void 0!==n)&&(t[e]=n)}}))}function k(t){return a(t)||0===Object.keys(t).length}function A(t,e,i){if(null==t)return i;var o=e.split("."),n=t;while(o.length>1)if(n=n[o.shift()],null==n)return i;var r=n[o[0]];return null!=r?r:i}function L(t,e,i){if(null!=t){var o=e.split("."),n=t;o.forEach((function(t,e){n[t]||(n[t]={}),e<o.length-1&&(n=n[t])})),n[o[o.length-1]]=i}}function M(t,e,i){if(e&&t){if(!i)return t[e];for(var o=e.split("."),n=t,r=0;r<o.length;r++){if(null==n)return;n=n[o[r]]}return n}}function F(t,e){Object.keys(t).forEach((function(e){var i=t[e];"object"===typeof i&&(t[e]=void 0)}));var i=Object.getPrototypeOf(t),o={};Object.keys(i).forEach((function(t){var n=i[t];if("function"===typeof n){var r=function(){console.warn("AG Grid: "+e+" function "+t+"() cannot be called as the grid has been destroyed.\n                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't\n                     be keeping the API reference, your application has a memory leak! Remove the API reference\n                     when the grid is destroyed.")};o[t]={value:r,writable:!0}}})),Object.defineProperties(t,o)}function N(t){return"object"===typeof t&&null!==t}var V=Object.freeze({__proto__:null,iterateObject:C,cloneObject:w,deepCloneObject:S,deepCloneDefinition:E,getProperty:x,setProperty:O,copyPropertiesIfPresent:R,copyPropertyIfPresent:I,getAllKeysInObjects:T,getAllValuesInObject:P,mergeDeep:D,missingOrEmptyObject:k,get:A,set:L,getValueUsingField:M,removeAllReferences:F,isNonNullObject:N}),B={};function G(t,e){B[e]||(t(),B[e]=!0)}function j(t){if(t.name)return t.name;var e=/function\s+([^\(]+)/.exec(t.toString());return e&&2===e.length?e[1].trim():null}function H(t){return!!(t&&t.constructor&&t.call&&t.apply)}function $(t){K(t,400)}var W=[],U=!1;function z(t){W.push(t),U||(U=!0,window.setTimeout((function(){var t=W.slice();W.length=0,U=!1,t.forEach((function(t){return t()}))}),0))}function K(t,e){void 0===e&&(e=0),t.length>0&&window.setTimeout((function(){return t.forEach((function(t){return t()}))}),e)}function Y(t,e){var i;return function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];var r=this;window.clearTimeout(i),i=window.setTimeout((function(){t.apply(r,o)}),e)}}function q(t,e){var i=0;return function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];var r=this,s=(new Date).getTime();s-i<e||(i=s,t.apply(r,o))}}function X(t,e,i,o){void 0===i&&(i=100);var n=(new Date).getTime(),r=null,s=!1,a=function(){var a=(new Date).getTime()-n>i;(t()||a)&&(e(),s=!0,null!=r&&(window.clearInterval(r),r=null),a&&o&&console.warn(o))};a(),s||(r=window.setInterval(a,10))}function Q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduce((function(t,e){return e(t)}),e)}}function J(t){t&&t()}var Z,tt=function(){},et=Object.freeze({__proto__:null,doOnce:G,getFunctionName:j,isFunction:H,executeInAWhile:$,executeNextVMTurn:z,executeAfter:K,debounce:Y,throttle:q,waitUntil:X,compose:Q,callIfPresent:J,noop:tt});(function(t){t["CommunityCoreModule"]="@ag-grid-community/core",t["InfiniteRowModelModule"]="@ag-grid-community/infinite-row-model",t["ClientSideRowModelModule"]="@ag-grid-community/client-side-row-model",t["CsvExportModule"]="@ag-grid-community/csv-export",t["EnterpriseCoreModule"]="@ag-grid-enterprise/core",t["RowGroupingModule"]="@ag-grid-enterprise/row-grouping",t["ColumnsToolPanelModule"]="@ag-grid-enterprise/column-tool-panel",t["FiltersToolPanelModule"]="@ag-grid-enterprise/filter-tool-panel",t["MenuModule"]="@ag-grid-enterprise/menu",t["SetFilterModule"]="@ag-grid-enterprise/set-filter",t["MultiFilterModule"]="@ag-grid-enterprise/multi-filter",t["StatusBarModule"]="@ag-grid-enterprise/status-bar",t["SideBarModule"]="@ag-grid-enterprise/side-bar",t["RangeSelectionModule"]="@ag-grid-enterprise/range-selection",t["MasterDetailModule"]="@ag-grid-enterprise/master-detail",t["RichSelectModule"]="@ag-grid-enterprise/rich-select",t["GridChartsModule"]="@ag-grid-enterprise/charts",t["ViewportRowModelModule"]="@ag-grid-enterprise/viewport-row-model",t["ServerSideRowModelModule"]="@ag-grid-enterprise/server-side-row-model",t["ExcelExportModule"]="@ag-grid-enterprise/excel-export",t["ClipboardModule"]="@ag-grid-enterprise/clipboard",t["SparklinesModule"]="@ag-grid-enterprise/sparklines",t["AdvancedFilterModule"]="@ag-grid-enterprise/advanced-filter",t["AngularModule"]="@ag-grid-community/angular",t["ReactModule"]="@ag-grid-community/react",t["VueModule"]="@ag-grid-community/vue"})(Z||(Z={}));var it=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},ot=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},nt=function(){function t(){}return t.register=function(e){t.__register(e,!0,void 0)},t.registerModules=function(e){t.__registerModules(e,!0,void 0)},t.__register=function(e,i,o){t.runVersionChecks(e),void 0!==o?(t.areGridScopedModules=!0,void 0===t.gridModulesMap[o]&&(t.gridModulesMap[o]={}),t.gridModulesMap[o][e.moduleName]=e):t.globalModulesMap[e.moduleName]=e,t.setModuleBased(i)},t.__unRegisterGridModules=function(e){delete t.gridModulesMap[e]},t.__registerModules=function(e,i,o){t.setModuleBased(i),e&&e.forEach((function(e){return t.__register(e,i,o)}))},t.isValidModuleVersion=function(e){var i=it(e.version.split(".")||[],2),o=i[0],n=i[1],r=it(t.currentModuleVersion.split(".")||[],2),s=r[0],a=r[1];return o===s&&n===a},t.runVersionChecks=function(e){if(t.currentModuleVersion||(t.currentModuleVersion=e.version),e.version?t.isValidModuleVersion(e)||console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '"+e.moduleName+"' is version "+e.version+" but the other modules are version "+this.currentModuleVersion+". Please update all modules to the same version."):console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '"+e.moduleName+"' is incompatible. Please update all modules to the same version."),e.validate){var i=e.validate();if(!i.isValid){var o=i;console.error("AG Grid: "+o.message)}}},t.setModuleBased=function(e){void 0===t.moduleBased?t.moduleBased=e:t.moduleBased!==e&&G((function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")}),"ModulePackageCheck")},t.__setIsBundled=function(){t.isBundled=!0},t.__assertRegistered=function(e,i,o){var n;if(this.__isRegistered(e,o))return!0;var r,s=i+e;if(t.isBundled)r="AG Grid: unable to use "+i+" as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src=\"https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js\"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise";else if(t.moduleBased||void 0===t.moduleBased){var a=null===(n=Object.entries(Z).find((function(t){var i=it(t,2);i[0];var o=i[1];return o===e})))||void 0===n?void 0:n[0];r="AG Grid: unable to use "+i+" as the "+a+" is not registered"+(t.areGridScopedModules?" for gridId: "+o:"")+". Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { "+a+" } from '"+e+"';\n    \n    ModuleRegistry.registerModules([ "+a+" ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/"}else r="AG Grid: unable to use "+i+" as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';\n            \nFor more info see: https://www.ag-grid.com/javascript-grid/packages/";return G((function(){console.warn(r)}),s),!1},t.__isRegistered=function(e,i){var o;return!!t.globalModulesMap[e]||!!(null===(o=t.gridModulesMap[i])||void 0===o?void 0:o[e])},t.__getRegisteredModules=function(e){return ot(ot([],it(y(t.globalModulesMap))),it(y(t.gridModulesMap[e]||{})))},t.__getGridRegisteredModules=function(e){var i;return y(null!==(i=t.gridModulesMap[e])&&void 0!==i?i:{})||[]},t.__isPackageBased=function(){return!t.moduleBased},t.globalModulesMap={},t.gridModulesMap={},t.areGridScopedModules=!1,t}(),rt=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},st=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},at=function(){function t(t,e){if(this.beanWrappers={},this.destroyed=!1,t&&t.beanClasses){this.contextParams=t,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();var i=this.getBeanInstances();this.wireBeans(i),this.logger.log(">> ag-Application Context ready - component is alive")}}return t.prototype.getBeanInstances=function(){return y(this.beanWrappers).map((function(t){return t.beanInstance}))},t.prototype.createBean=function(t,e){if(!t)throw Error("Can't wire to bean since it is null");return this.wireBeans([t],e),t},t.prototype.wireBeans=function(t,e){this.autoWireBeans(t),this.methodWireBeans(t),this.callLifeCycleMethods(t,"preConstructMethods"),s(e)&&t.forEach(e),this.callLifeCycleMethods(t,"postConstructMethods")},t.prototype.createBeans=function(){var t=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),C(this.beanWrappers,(function(e,i){var o;i.bean.__agBeanMetaData&&i.bean.__agBeanMetaData.autowireMethods&&i.bean.__agBeanMetaData.autowireMethods.agConstructor&&(o=i.bean.__agBeanMetaData.autowireMethods.agConstructor);var n=t.getBeansForParameters(o,i.bean.name),r=new(i.bean.bind.apply(i.bean,st([null],rt(n))));i.beanInstance=r}));var e=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: "+e)},t.prototype.createBeanWrapper=function(t){var e=t.__agBeanMetaData;if(!e){var i=void 0;return i=t.prototype.constructor?j(t.prototype.constructor):""+t,void console.error("Context item "+i+" is not a bean")}var o={bean:t,beanInstance:null,beanName:e.beanName};this.beanWrappers[e.beanName]=o},t.prototype.autoWireBeans=function(t){var e=this;t.forEach((function(t){e.forEachMetaDataInHierarchy(t,(function(i,o){var n=i.agClassAttributes;n&&n.forEach((function(i){var n=e.lookupBeanInstance(o,i.beanName,i.optional);t[i.attributeName]=n}))}))}))},t.prototype.methodWireBeans=function(t){var e=this;t.forEach((function(t){e.forEachMetaDataInHierarchy(t,(function(i,o){C(i.autowireMethods,(function(i,n){if("agConstructor"!==i){var r=e.getBeansForParameters(n,o);t[i].apply(t,r)}}))}))}))},t.prototype.forEachMetaDataInHierarchy=function(t,e){var i=Object.getPrototypeOf(t);while(null!=i){var o=i.constructor;if(o.hasOwnProperty("__agBeanMetaData")){var n=o.__agBeanMetaData,r=this.getBeanName(o);e(n,r)}i=Object.getPrototypeOf(i)}},t.prototype.getBeanName=function(t){if(t.__agBeanMetaData&&t.__agBeanMetaData.beanName)return t.__agBeanMetaData.beanName;var e=t.toString(),i=e.substring(9,e.indexOf("("));return i},t.prototype.getBeansForParameters=function(t,e){var i=this,o=[];return t&&C(t,(function(t,n){var r=i.lookupBeanInstance(e,n);o[Number(t)]=r})),o},t.prototype.lookupBeanInstance=function(t,e,i){if(void 0===i&&(i=!1),this.destroyed)return this.logger.log("AG Grid: bean reference "+e+" is used after the grid is destroyed!"),null;if("context"===e)return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];var o=this.beanWrappers[e];return o?o.beanInstance:(i||console.error("AG Grid: unable to find bean reference "+e+" while initialising "+t),null)},t.prototype.callLifeCycleMethods=function(t,e){var i=this;t.forEach((function(t){return i.callLifeCycleMethodsOnBean(t,e)}))},t.prototype.callLifeCycleMethodsOnBean=function(t,e,i){var o={};this.forEachMetaDataInHierarchy(t,(function(t){var n=t[e];n&&n.forEach((function(t){t!=i&&(o[t]=!0)}))}));var n=Object.keys(o);n.forEach((function(e){return t[e]()}))},t.prototype.getBean=function(t){return this.lookupBeanInstance("getBean",t,!0)},t.prototype.destroy=function(){if(!this.destroyed){this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");var t=this.getBeanInstances();this.destroyBeans(t),this.contextParams.providedBeanInstances=null,nt.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}},t.prototype.destroyBean=function(t){t&&this.destroyBeans([t])},t.prototype.destroyBeans=function(t){var e=this;return t?(t.forEach((function(t){e.callLifeCycleMethodsOnBean(t,"preDestroyMethods","destroy");var i=t;"function"===typeof i.destroy&&i.destroy()})),[]):[]},t.prototype.isDestroyed=function(){return this.destroyed},t.prototype.getGridId=function(){return this.contextParams.gridId},t}();function lt(t,e,i){var o=yt(t.constructor);o.preConstructMethods||(o.preConstructMethods=[]),o.preConstructMethods.push(e)}function ut(t,e,i){var o=yt(t.constructor);o.postConstructMethods||(o.postConstructMethods=[]),o.postConstructMethods.push(e)}function ct(t,e,i){var o=yt(t.constructor);o.preDestroyMethods||(o.preDestroyMethods=[]),o.preDestroyMethods.push(e)}function ht(t){return function(e){var i=yt(e);i.beanName=t}}function pt(t){return function(e,i,o){ft(e,t,!1,e,i,null)}}function dt(t){return function(e,i,o){ft(e,t,!0,e,i,null)}}function ft(t,e,i,o,n,r){if(null!==e)if("number"!==typeof r){var s=yt(t.constructor);s.agClassAttributes||(s.agClassAttributes=[]),s.agClassAttributes.push({attributeName:n,beanName:e,optional:i})}else console.error("AG Grid: Autowired should be on an attribute");else console.error("AG Grid: Autowired name should not be null")}function gt(t){return function(e,i,o){var n,r="function"==typeof e?e:e.constructor;if("number"===typeof o){var s=void 0;i?(n=yt(r),s=i):(n=yt(r),s="agConstructor"),n.autowireMethods||(n.autowireMethods={}),n.autowireMethods[s]||(n.autowireMethods[s]={}),n.autowireMethods[s][o]=t}}}function yt(t){return t.hasOwnProperty("__agBeanMetaData")||(t.__agBeanMetaData={}),t.__agBeanMetaData}var _t=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},mt=function(t,e){return function(i,o){e(i,o,t)}},vt=function(){function t(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return t.prototype.setBeans=function(t,e,i,o,n){if(void 0===o&&(o=null),void 0===n&&(n=null),this.frameworkOverrides=i,this.gridOptionsService=e,o){var r=e.useAsyncEvents();this.addGlobalListener(o,r)}n&&this.addGlobalListener(n,!1)},t.prototype.getListeners=function(t,e,i){var o=e?this.allAsyncListeners:this.allSyncListeners,n=o.get(t);return!n&&i&&(n=new Set,o.set(t,n)),n},t.prototype.noRegisteredListenersExist=function(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size},t.prototype.addEventListener=function(t,e,i){void 0===i&&(i=!1),this.getListeners(t,i,!0).add(e)},t.prototype.removeEventListener=function(t,e,i){void 0===i&&(i=!1);var o=this.getListeners(t,i,!1);if(o&&(o.delete(e),0===o.size)){var n=i?this.allAsyncListeners:this.allSyncListeners;n.delete(t)}},t.prototype.addGlobalListener=function(t,e){void 0===e&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).add(t)},t.prototype.removeGlobalListener=function(t,e){void 0===e&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).delete(t)},t.prototype.dispatchEvent=function(t){var e=t;if(this.gridOptionsService){var i=this.gridOptionsService,o=i.api,n=i.columnApi,r=i.context;e.api=o,e.columnApi=n,e.context=r}this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0},t.prototype.dispatchEventOnce=function(t){this.firedEvents[t.type]||this.dispatchEvent(t)},t.prototype.dispatchToListeners=function(t,e){var i=this,o=t.type;if(e&&"event"in t){var n=t.event;n instanceof Event&&(t.eventPath=n.composedPath())}var r=function(o){return o.forEach((function(o){e?i.dispatchAsync((function(){return o(t)})):o(t)}))},s=new Set(this.getListeners(o,e,!1));s.size>0&&r(s);var a=new Set(e?this.globalAsyncListeners:this.globalSyncListeners);a.forEach((function(n){e?i.dispatchAsync((function(){return i.frameworkOverrides.dispatchEvent(o,(function(){return n(o,t)}),!0)})):i.frameworkOverrides.dispatchEvent(o,(function(){return n(o,t)}),!0)}))},t.prototype.dispatchAsync=function(t){this.asyncFunctionsQueue.push(t),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},t.prototype.flushAsyncQueue=function(){this.scheduled=!1;var t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],t.forEach((function(t){return t()}))},_t([mt(0,gt("loggerFactory")),mt(1,gt("gridOptionsService")),mt(2,gt("frameworkOverrides")),mt(3,gt("globalEventListener")),mt(4,gt("globalSyncEventListener"))],t.prototype,"setBeans",null),t=_t([ht("eventService")],t),t}(),bt=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ct=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},wt=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},St=0;function Et(){return St++}var xt=function(){function t(t,e,i,o){this.instanceId=Et(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new vt,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=t,this.userProvidedColDef=e,this.colId=i,this.primary=o,this.setState(t)}return t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.setState=function(t){void 0!==t.sort?"asc"!==t.sort&&"desc"!==t.sort||(this.sort=t.sort):"asc"!==t.initialSort&&"desc"!==t.initialSort||(this.sort=t.initialSort);var e=c(t.sortIndex),i=c(t.initialSortIndex);void 0!==e?null!==e&&(this.sortIndex=e):null!==i&&(this.sortIndex=i);var o=h(t.hide),n=h(t.initialHide);this.visible=void 0!==o?!o:!n,void 0!==t.pinned?this.setPinned(t.pinned):this.setPinned(t.initialPinned);var r=c(t.flex),s=c(t.initialFlex);void 0!==r?this.flex=r:void 0!==s&&(this.flex=s)},t.prototype.setColDef=function(t,e){this.colDef=t,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged","api"))},t.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},t.prototype.setParent=function(t){this.parent=t},t.prototype.getParent=function(){return this.parent},t.prototype.setOriginalParent=function(t){this.originalParent=t},t.prototype.getOriginalParent=function(){return this.originalParent},t.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.validate()},t.prototype.initDotNotation=function(){var t=this.gridOptionsService.is("suppressFieldDotNotation");this.fieldContainsDots=s(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!t,this.tooltipFieldContainsDots=s(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!t},t.prototype.initMinAndMaxWidths=function(){var t=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(t),this.maxWidth=this.columnUtils.calculateColMaxWidth(t)},t.prototype.initTooltip=function(){this.tooltipEnabled=s(this.colDef.tooltipField)||s(this.colDef.tooltipValueGetter)||s(this.colDef.tooltipComponent)},t.prototype.resetActualWidth=function(t){void 0===t&&(t="api");var e=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(e,t,!0)},t.prototype.isEmptyGroup=function(){return!1},t.prototype.isRowGroupDisplayed=function(t){if(a(this.colDef)||a(this.colDef.showRowGroup))return!1;var e=!0===this.colDef.showRowGroup,i=this.colDef.showRowGroup===t;return e||i},t.prototype.isPrimary=function(){return this.primary},t.prototype.isFilterAllowed=function(){var t=!!this.colDef.filter;return t},t.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},t.prototype.isTooltipEnabled=function(){return this.tooltipEnabled},t.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},t.prototype.validate=function(){var t=this.colDef;function e(t,e,i){G((function(){i?console.warn(t,i):G((function(){return console.warn(t)}),e)}),e)}var i=this.gridOptionsService.isRowModelType("clientSide");if(i&&!nt.__isRegistered(Z.RowGroupingModule,this.gridOptionsService.getGridId())){var o=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"],n=o.filter((function(e){return s(t[e])}));n.length>0&&nt.__assertRegistered(Z.RowGroupingModule,n.map((function(t){return"colDef."+t})).join(", "),this.gridOptionsService.getGridId())}if("agRichSelect"!==this.colDef.cellEditor&&"agRichSelectCellEditor"!==this.colDef.cellEditor||nt.__assertRegistered(Z.RichSelectModule,this.colDef.cellEditor,this.gridOptionsService.getGridId()),this.gridOptionsService.is("treeData")){var r=["rowGroup","rowGroupIndex","pivot","pivotIndex"];n=r.filter((function(e){return s(t[e])}));n.length>0&&e("AG Grid: "+n.join()+" is not possible when doing tree data, your column definition should not have "+n.join(),"TreeDataCannotRowGroup")}if(s(t.menuTabs))if(Array.isArray(t.menuTabs)){var a=["filterMenuTab"],l=["columnsMenuTab","generalMenuTab"];n=l.filter((function(e){return t.menuTabs.includes(e)}));n.length>0&&nt.__assertRegistered(Z.MenuModule,"menuTab(s): "+n.map((function(t){return"'"+t+"'"})).join(),this.gridOptionsService.getGridId()),t.menuTabs.forEach((function(t){l.includes(t)||a.includes(t)||e("AG Grid: '"+t+"' is not valid for 'colDef.menuTabs'. Valid values are: "+wt(wt([],Ct(a)),Ct(l)).map((function(t){return"'"+t+"'"})).join()+".","wrongValue_menuTabs_"+t)}))}else e("AG Grid: The typeof 'colDef.menuTabs' should be an array not:"+typeof t.menuTabs,"wrongType_menuTabs");s(t.columnsMenuParams)&&nt.__assertRegistered(Z.MenuModule,"columnsMenuParams",this.gridOptionsService.getGridId()),s(t.columnsMenuParams)&&nt.__assertRegistered(Z.ColumnsToolPanelModule,"columnsMenuParams",this.gridOptionsService.getGridId()),s(this.colDef.width)&&"number"!==typeof this.colDef.width&&e("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck"),s(t.columnGroupShow)&&"closed"!==t.columnGroupShow&&"open"!==t.columnGroupShow&&e("AG Grid: '"+t.columnGroupShow+"' is not valid for columnGroupShow. Valid values are 'open', 'closed', undefined, null","columnGroupShow_invalid")},t.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},t.prototype.createColumnFunctionCallbackParams=function(t){return{node:t,data:t.data,column:this,colDef:this.colDef,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi}},t.prototype.isSuppressNavigable=function(t){if("boolean"===typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"===typeof this.colDef.suppressNavigable){var e=this.createColumnFunctionCallbackParams(t),i=this.colDef.suppressNavigable;return i(e)}return!1},t.prototype.isCellEditable=function(t){return!(t.group&&!this.gridOptionsService.is("enableGroupEdit"))&&this.isColumnFunc(t,this.colDef.editable)},t.prototype.isSuppressFillHandle=function(){return!!h(this.colDef.suppressFillHandle)},t.prototype.isAutoHeight=function(){return!!h(this.colDef.autoHeight)},t.prototype.isAutoHeaderHeight=function(){return!!h(this.colDef.autoHeaderHeight)},t.prototype.isRowDrag=function(t){return this.isColumnFunc(t,this.colDef.rowDrag)},t.prototype.isDndSource=function(t){return this.isColumnFunc(t,this.colDef.dndSource)},t.prototype.isCellCheckboxSelection=function(t){return this.isColumnFunc(t,this.colDef.checkboxSelection)},t.prototype.isSuppressPaste=function(t){return this.isColumnFunc(t,this.colDef?this.colDef.suppressPaste:null)},t.prototype.isResizable=function(){return!!h(this.colDef.resizable)},t.prototype.isColumnFunc=function(t,e){if("boolean"===typeof e)return e;if("function"===typeof e){var i=this.createColumnFunctionCallbackParams(t),o=e;return o(i)}return!1},t.prototype.setMoving=function(t,e){void 0===e&&(e="api"),this.moving=t,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",e))},t.prototype.createColumnEvent=function(t,e){return{type:t,column:this,columns:[this],source:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},t.prototype.isMoving=function(){return this.moving},t.prototype.getSort=function(){return this.sort},t.prototype.setSort=function(t,e){void 0===e&&(e="api"),this.sort!==t&&(this.sort=t,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",e))),this.dispatchStateUpdatedEvent("sort")},t.prototype.setMenuVisible=function(t,e){void 0===e&&(e="api"),this.menuVisible!==t&&(this.menuVisible=t,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",e)))},t.prototype.isMenuVisible=function(){return this.menuVisible},t.prototype.isSortAscending=function(){return"asc"===this.sort},t.prototype.isSortDescending=function(){return"desc"===this.sort},t.prototype.isSortNone=function(){return a(this.sort)},t.prototype.isSorting=function(){return s(this.sort)},t.prototype.getSortIndex=function(){return this.sortIndex},t.prototype.setSortIndex=function(t){this.sortIndex=t,this.dispatchStateUpdatedEvent("sortIndex")},t.prototype.setAggFunc=function(t){this.aggFunc=t,this.dispatchStateUpdatedEvent("aggFunc")},t.prototype.getAggFunc=function(){return this.aggFunc},t.prototype.getLeft=function(){return this.left},t.prototype.getOldLeft=function(){return this.oldLeft},t.prototype.getRight=function(){return this.left+this.actualWidth},t.prototype.setLeft=function(t,e){void 0===e&&(e="api"),this.oldLeft=this.left,this.left!==t&&(this.left=t,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",e)))},t.prototype.isFilterActive=function(){return this.filterActive},t.prototype.setFilterActive=function(t,e,i){void 0===e&&(e="api"),this.filterActive!==t&&(this.filterActive=t,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",e)));var o=this.createColumnEvent("filterChanged",e);i&&D(o,i),this.eventService.dispatchEvent(o)},t.prototype.isHovered=function(){return this.columnHoverService.isHovered(this)},t.prototype.setPinned=function(t){this.pinned=!0===t||"left"===t?"left":"right"===t?"right":null,this.dispatchStateUpdatedEvent("pinned")},t.prototype.setFirstRightPinned=function(t,e){void 0===e&&(e="api"),this.firstRightPinned!==t&&(this.firstRightPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",e)))},t.prototype.setLastLeftPinned=function(t,e){void 0===e&&(e="api"),this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",e)))},t.prototype.isFirstRightPinned=function(){return this.firstRightPinned},t.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},t.prototype.isPinned=function(){return"left"===this.pinned||"right"===this.pinned},t.prototype.isPinnedLeft=function(){return"left"===this.pinned},t.prototype.isPinnedRight=function(){return"right"===this.pinned},t.prototype.getPinned=function(){return this.pinned},t.prototype.setVisible=function(t,e){void 0===e&&(e="api");var i=!0===t;this.visible!==i&&(this.visible=i,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",e))),this.dispatchStateUpdatedEvent("hide")},t.prototype.isVisible=function(){return this.visible},t.prototype.isSpanHeaderHeight=function(){var t=this.getColDef();return!t.suppressSpanHeaderHeight&&!t.autoHeaderHeight},t.prototype.getColDef=function(){return this.colDef},t.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},t.prototype.getColId=function(){return this.colId},t.prototype.getId=function(){return this.colId},t.prototype.getUniqueId=function(){return this.colId},t.prototype.getDefinition=function(){return this.colDef},t.prototype.getActualWidth=function(){return this.actualWidth},t.prototype.getAutoHeaderHeight=function(){return this.autoHeaderHeight},t.prototype.setAutoHeaderHeight=function(t){var e=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,e},t.prototype.createBaseColDefParams=function(t){var e={node:t,data:t.data,colDef:this.colDef,column:this,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return e},t.prototype.getColSpan=function(t){if(a(this.colDef.colSpan))return 1;var e=this.createBaseColDefParams(t),i=this.colDef.colSpan(e);return Math.max(i,1)},t.prototype.getRowSpan=function(t){if(a(this.colDef.rowSpan))return 1;var e=this.createBaseColDefParams(t),i=this.colDef.rowSpan(e);return Math.max(i,1)},t.prototype.setActualWidth=function(t,e,i){void 0===e&&(e="api"),void 0===i&&(i=!1),null!=this.minWidth&&(t=Math.max(t,this.minWidth)),null!=this.maxWidth&&(t=Math.min(t,this.maxWidth)),this.actualWidth!==t&&(this.actualWidth=t,this.flex&&"flex"!==e&&"gridInitializing"!==e&&(this.flex=null),i||this.fireColumnWidthChangedEvent(e)),this.dispatchStateUpdatedEvent("width")},t.prototype.fireColumnWidthChangedEvent=function(t){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",t))},t.prototype.isGreaterThanMax=function(t){return null!=this.maxWidth&&t>this.maxWidth},t.prototype.getMinWidth=function(){return this.minWidth},t.prototype.getMaxWidth=function(){return this.maxWidth},t.prototype.getFlex=function(){return this.flex||0},t.prototype.setFlex=function(t){this.flex!==t&&(this.flex=t),this.dispatchStateUpdatedEvent("flex")},t.prototype.setMinimum=function(t){void 0===t&&(t="api"),s(this.minWidth)&&this.setActualWidth(this.minWidth,t)},t.prototype.setRowGroupActive=function(t,e){void 0===e&&(e="api"),this.rowGroupActive!==t&&(this.rowGroupActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",e))),this.dispatchStateUpdatedEvent("rowGroup")},t.prototype.isRowGroupActive=function(){return this.rowGroupActive},t.prototype.setPivotActive=function(t,e){void 0===e&&(e="api"),this.pivotActive!==t&&(this.pivotActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",e))),this.dispatchStateUpdatedEvent("pivot")},t.prototype.isPivotActive=function(){return this.pivotActive},t.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},t.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},t.prototype.setValueActive=function(t,e){void 0===e&&(e="api"),this.aggregationActive!==t&&(this.aggregationActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",e)))},t.prototype.isValueActive=function(){return this.aggregationActive},t.prototype.isAllowPivot=function(){return!0===this.colDef.enablePivot},t.prototype.isAllowValue=function(){return!0===this.colDef.enableValue},t.prototype.isAllowRowGroup=function(){return!0===this.colDef.enableRowGroup},t.prototype.getMenuTabs=function(t){var e=this.getColDef().menuTabs;return null==e&&(e=t),e},t.prototype.dispatchStateUpdatedEvent=function(e){this.eventService.dispatchEvent({type:t.EVENT_STATE_UPDATED,key:e})},t.EVENT_MOVING_CHANGED="movingChanged",t.EVENT_LEFT_CHANGED="leftChanged",t.EVENT_WIDTH_CHANGED="widthChanged",t.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",t.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",t.EVENT_VISIBLE_CHANGED="visibleChanged",t.EVENT_FILTER_CHANGED="filterChanged",t.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",t.EVENT_SORT_CHANGED="sortChanged",t.EVENT_COL_DEF_CHANGED="colDefChanged",t.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",t.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",t.EVENT_PIVOT_CHANGED="columnPivotChanged",t.EVENT_VALUE_CHANGED="columnValueChanged",t.EVENT_STATE_UPDATED="columnStateUpdated",bt([pt("gridOptionsService")],t.prototype,"gridOptionsService",void 0),bt([pt("columnUtils")],t.prototype,"columnUtils",void 0),bt([pt("columnHoverService")],t.prototype,"columnHoverService",void 0),bt([ut],t.prototype,"initialise",null),t}(),Ot=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Rt=function(){function t(t,e,i,o){this.localEventService=new vt,this.expandable=!1,this.instanceId=Et(),this.expandableListenerRemoveCallback=null,this.colGroupDef=t,this.groupId=e,this.expanded=!!t&&!!t.openByDefault,this.padding=i,this.level=o}return t.prototype.destroy=function(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)},t.prototype.reset=function(t,e){this.colGroupDef=t,this.level=e,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.setOriginalParent=function(t){this.originalParent=t},t.prototype.getOriginalParent=function(){return this.originalParent},t.prototype.getLevel=function(){return this.level},t.prototype.isVisible=function(){return!!this.children&&this.children.some((function(t){return t.isVisible()}))},t.prototype.isPadding=function(){return this.padding},t.prototype.setExpanded=function(e){this.expanded=void 0!==e&&e;var i={type:t.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(i)},t.prototype.isExpandable=function(){return this.expandable},t.prototype.isExpanded=function(){return this.expanded},t.prototype.getGroupId=function(){return this.groupId},t.prototype.getId=function(){return this.getGroupId()},t.prototype.setChildren=function(t){this.children=t},t.prototype.getChildren=function(){return this.children},t.prototype.getColGroupDef=function(){return this.colGroupDef},t.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},t.prototype.addLeafColumns=function(e){this.children&&this.children.forEach((function(i){i instanceof xt?e.push(i):i instanceof t&&i.addLeafColumns(e)}))},t.prototype.getColumnGroupShow=function(){var t=this.colGroupDef;if(t)return t.columnGroupShow},t.prototype.setupExpandable=function(){var t=this;this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();var e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach((function(t){return t.addEventListener("visibleChanged",e)})),this.expandableListenerRemoveCallback=function(){t.getLeafColumns().forEach((function(t){return t.removeEventListener("visibleChanged",e)})),t.expandableListenerRemoveCallback=null}},t.prototype.setExpandable=function(){if(!this.isPadding()){for(var e=!1,i=!1,o=!1,n=this.findChildrenRemovingPadding(),r=0,s=n.length;r<s;r++){var a=n[r];if(a.isVisible()){var l=a.getColumnGroupShow();"open"===l?(e=!0,o=!0):"closed"===l?(i=!0,o=!0):(e=!0,i=!0)}}var u=e&&i&&o;if(this.expandable!==u){this.expandable=u;var c={type:t.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(c)}}},t.prototype.findChildrenRemovingPadding=function(){var e=[],i=function(o){o.forEach((function(o){var n=o instanceof t&&o.isPadding();n?i(o.children):e.push(o)}))};return i(this.children),e},t.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},t.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},t.EVENT_EXPANDED_CHANGED="expandedChanged",t.EVENT_EXPANDABLE_CHANGED="expandableChanged",Ot([ct],t.prototype,"destroy",null),t}(),It={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function Tt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0;i<t.length;i++){var o=t[i];if(s(o))return o}return null}function Pt(t){return null!=t&&t.length>0}function Dt(t){if(t&&t.length)return t[t.length-1]}function kt(t,e,i){return null==t&&null==e||null!=t&&null!=e&&t.length===e.length&&t.every((function(t,o){return i?i(t,e[o]):e[o]===t}))}function At(t,e){return kt(t,e)}function Lt(t){return t.sort((function(t,e){return t-e}))}function Mt(t,e){if(t)for(var i=t.length-2;i>=0;i--){var o=t[i]===e,n=t[i+1]===e;o&&n&&t.splice(i+1,1)}}function Ft(t,e){var i=t.indexOf(e);i>=0&&(t[i]=t[t.length-1],t.pop())}function Nt(t,e){var i=t.indexOf(e);i>=0&&t.splice(i,1)}function Vt(t,e){for(var i=0;i<e.length;i++)Ft(t,e[i])}function Bt(t,e){for(var i=0;i<e.length;i++)Nt(t,e[i])}function Gt(t,e,i){t.splice(i,0,e)}function jt(t,e,i){if(null!=t&&null!=e)for(var o=e.length-1;o>=0;o--){var n=e[o];Gt(t,n,i)}}function Ht(t,e,i){Bt(t,e),e.slice().reverse().forEach((function(e){return Gt(t,e,i)}))}function $t(t,e){return t.indexOf(e)>-1}function Wt(t){return[].concat.apply([],t)}function Ut(t,e){null!=e&&null!=t&&e.forEach((function(e){return t.push(e)}))}function zt(t){return t.map(u)}function Kt(t,e){if(null!=t)for(var i=t.length-1;i>=0;i--)e(t[i],i)}var Yt=Object.freeze({__proto__:null,firstExistingValue:Tt,existsAndNotEmpty:Pt,last:Dt,areEqual:kt,shallowCompare:At,sortNumerically:Lt,removeRepeatsFromArray:Mt,removeFromUnorderedArray:Ft,removeFromArray:Nt,removeAllFromUnorderedArray:Vt,removeAllFromArray:Bt,insertIntoArray:Gt,insertArrayIntoArray:jt,moveInArray:Ht,includes:$t,flatten:Wt,pushAll:Ut,toStrings:zt,forEachReverse:Kt}),qt="__ag_Grid_Stop_Propagation",Xt=["touchstart","touchend","touchmove","touchcancel","scroll"],Qt={};function Jt(t){t[qt]=!0}function Zt(t){return!0===t[qt]}var te=function(){var t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},e=function(e){if("boolean"===typeof Qt[e])return Qt[e];var i=document.createElement(t[e]||"div");return e="on"+e,Qt[e]=e in i};return e}();function ee(t,e,i){var o=e;while(o){var n=t.getDomData(o,i);if(n)return n;o=o.parentElement}return null}function ie(t,e){return!(!e||!t)&&ne(e).indexOf(t)>=0}function oe(t){var e=[],i=t.target;while(i)e.push(i),i=i.parentElement;return e}function ne(t){var e=t;return e.path?e.path:e.composedPath?e.composedPath():oe(e)}function re(t,e,i,o){var n=$t(Xt,i),r=n?{passive:!0}:void 0;t&&t.addEventListener&&t.addEventListener(e,i,o,r)}var se=Object.freeze({__proto__:null,stopPropagationForAgGrid:Jt,isStopPropagationForAgGrid:Zt,isEventSupported:te,getCtrlForEventTarget:ee,isElementInEventPath:ie,createEventPath:oe,getEventPath:ne,addSafePassiveEventListener:re}),ae=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},le=function(){function t(){var t=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=function(){return!t.destroyed}}return t.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},t.prototype.getContext=function(){return this.context},t.prototype.destroy=function(){this.destroyFunctions.forEach((function(t){return t()})),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:t.EVENT_DESTROYED})},t.prototype.addEventListener=function(t,e){this.localEventService||(this.localEventService=new vt),this.localEventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.localEventService&&this.localEventService.removeEventListener(t,e)},t.prototype.dispatchEventAsync=function(t){var e=this;window.setTimeout((function(){return e.dispatchEvent(t)}),0)},t.prototype.dispatchEvent=function(t){this.localEventService&&this.localEventService.dispatchEvent(t)},t.prototype.addManagedListener=function(t,e,i){var o=this;if(!this.destroyed){t instanceof HTMLElement?re(this.getFrameworkOverrides(),t,e,i):t.addEventListener(e,i);var n=function(){return t.removeEventListener(e,i),o.destroyFunctions=o.destroyFunctions.filter((function(t){return t!==n})),null};return this.destroyFunctions.push(n),n}},t.prototype.setupGridOptionListener=function(t,e){var i=this;this.gridOptionsService.addEventListener(t,e);var o=function(){return i.gridOptionsService.removeEventListener(t,e),i.destroyFunctions=i.destroyFunctions.filter((function(t){return t!==o})),null};this.destroyFunctions.push(o)},t.prototype.addManagedPropertyListener=function(t,e){this.destroyed||this.setupGridOptionListener(t,e)},t.prototype.addManagedPropertyListeners=function(t,e){var i=this;if(!this.destroyed){var o=t.join("-")+this.propertyListenerId++,n=function(t){if(t.changeSet){if(t.changeSet&&t.changeSet.id===i.lastChangeSetIdLookup[o])return;i.lastChangeSetIdLookup[o]=t.changeSet.id}var n={type:"gridPropertyChanged",changeSet:t.changeSet};e(n)};t.forEach((function(t){return i.setupGridOptionListener(t,n)}))}},t.prototype.addDestroyFunc=function(t){this.isAlive()?this.destroyFunctions.push(t):t()},t.prototype.createManagedBean=function(t,e){var i=this.createBean(t,e);return this.addDestroyFunc(this.destroyBean.bind(this,t,e)),i},t.prototype.createBean=function(t,e,i){return(e||this.getContext()).createBean(t,i)},t.prototype.destroyBean=function(t,e){return(e||this.getContext()).destroyBean(t)},t.prototype.destroyBeans=function(t,e){var i=this;return t&&t.forEach((function(t){return i.destroyBean(t,e)})),[]},t.EVENT_DESTROYED="destroyed",ae([pt("frameworkOverrides")],t.prototype,"frameworkOverrides",void 0),ae([pt("context")],t.prototype,"context",void 0),ae([pt("eventService")],t.prototype,"eventService",void 0),ae([pt("gridOptionsService")],t.prototype,"gridOptionsService",void 0),ae([pt("localeService")],t.prototype,"localeService",void 0),ae([pt("environment")],t.prototype,"environment",void 0),ae([ct],t.prototype,"destroy",null),t}(),ue=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ce=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},he=function(t,e){return function(i,o){e(i,o,t)}},pe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ue(e,t),e.prototype.setBeans=function(t){this.logger=t.create("ColumnFactory")},e.prototype.createColumnTree=function(t,e,i){var o=new m,n=this.extractExistingTreeData(i),r=n.existingCols,s=n.existingGroups,a=n.existingColKeys;o.addExistingKeys(a);var l=this.recursivelyCreateColumns(t,0,e,r,o,s),u=this.findMaxDept(l,0);this.logger.log("Number of levels for grouped columns is "+u);var c=this.balanceColumnTree(l,0,u,o),h=function(t,e){t instanceof Rt&&t.setupExpandable(),t.setOriginalParent(e)};return this.columnUtils.depthFirstOriginalTreeSearch(null,c,h),{columnTree:c,treeDept:u}},e.prototype.extractExistingTreeData=function(t){var e=[],i=[],o=[];return t&&this.columnUtils.depthFirstOriginalTreeSearch(null,t,(function(t){if(t instanceof Rt){var n=t;i.push(n)}else{var r=t;o.push(r.getId()),e.push(r)}})),{existingCols:e,existingGroups:i,existingColKeys:o}},e.prototype.createForAutoGroups=function(t,e){var i=this;return t.map((function(t){return i.createAutoGroupTreeItem(e,t)}))},e.prototype.createAutoGroupTreeItem=function(t,e){for(var i=this.findDepth(t),o=e,n=i-1;n>=0;n--){var r=new Rt(null,"FAKE_PATH_"+e.getId()+"}_"+n,!0,n);this.createBean(r),r.setChildren([o]),o.setOriginalParent(r),o=r}return 0===i&&e.setOriginalParent(null),o},e.prototype.findDepth=function(t){var e=0,i=t;while(i&&i[0]&&i[0]instanceof Rt)e++,i=i[0].getChildren();return e},e.prototype.balanceColumnTree=function(t,e,i,o){for(var n=[],r=0;r<t.length;r++){var s=t[r];if(s instanceof Rt){var a=s,l=this.balanceColumnTree(a.getChildren(),e+1,i,o);a.setChildren(l),n.push(a)}else{for(var u=void 0,c=void 0,h=i-1;h>=e;h--){var p=o.getUniqueKey(null,null),d=this.createMergedColGroupDef(null),f=new Rt(d,p,!0,e);this.createBean(f),c&&c.setChildren([f]),c=f,u||(u=c)}if(u&&c){n.push(u);var g=t.some((function(t){return t instanceof Rt}));if(g){c.setChildren([s]);continue}c.setChildren(t);break}n.push(s)}}return n},e.prototype.findMaxDept=function(t,e){for(var i=e,o=0;o<t.length;o++){var n=t[o];if(n instanceof Rt){var r=n,s=this.findMaxDept(r.getChildren(),e+1);i<s&&(i=s)}}return i},e.prototype.recursivelyCreateColumns=function(t,e,i,o,n,r){if(!t)return[];for(var s=new Array(t.length),a=0;a<s.length;a++){var l=t[a];this.isColumnGroup(l)?s[a]=this.createColumnGroup(i,l,e,o,n,r):s[a]=this.createColumn(i,l,o,n)}return s},e.prototype.createColumnGroup=function(t,e,i,o,n,r){var s=this.createMergedColGroupDef(e),a=n.getUniqueKey(s.groupId||null,null),l=new Rt(s,a,!1,i);this.createBean(l);var u=this.findExistingGroup(e,r);u&&r.splice(u.idx,1);var c=null===u||void 0===u?void 0:u.group;c&&l.setExpanded(c.isExpanded());var h=this.recursivelyCreateColumns(s.children,i+1,t,o,n,r);return l.setChildren(h),l},e.prototype.createMergedColGroupDef=function(t){var e={};return Object.assign(e,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(e,t),e},e.prototype.createColumn=function(t,e,i,o){var n=this.findExistingColumn(e,i);n&&(null===i||void 0===i||i.splice(n.idx,1));var r=null===n||void 0===n?void 0:n.column;if(r){a=this.addColumnDefaultAndTypes(e,r.getColId());r.setColDef(a,e),this.applyColumnState(r,a)}else{var s=o.getUniqueKey(e.colId,e.field),a=this.addColumnDefaultAndTypes(e,s);r=new xt(a,e,s,t),this.context.createBean(r)}return this.dataTypeService.addColumnListeners(r),r},e.prototype.applyColumnState=function(t,e){var i=c(e.flex);void 0!==i&&t.setFlex(i);var o=t.getFlex()<=0;if(o){var n=c(e.width);if(null!=n)t.setActualWidth(n);else{var r=t.getActualWidth();t.setActualWidth(r)}}void 0!==e.sort&&("asc"==e.sort||"desc"==e.sort?t.setSort(e.sort):t.setSort(void 0));var s=c(e.sortIndex);void 0!==s&&t.setSortIndex(s);var a=h(e.hide);void 0!==a&&t.setVisible(!a),void 0!==e.pinned&&t.setPinned(e.pinned)},e.prototype.findExistingColumn=function(t,e){if(e)for(var i=0;i<e.length;i++){var o=e[i].getUserProvidedColDef();if(o){var n=null!=t.colId;if(n){if(e[i].getId()===t.colId)return{idx:i,column:e[i]}}else{var r=null!=t.field;if(r){if(o.field===t.field)return{idx:i,column:e[i]}}else if(o===t)return{idx:i,column:e[i]}}}}},e.prototype.findExistingGroup=function(t,e){var i=null!=t.groupId;if(i)for(var o=0;o<e.length;o++){var n=e[o],r=n.getColGroupDef();if(r&&n.getId()===t.groupId)return{idx:o,group:n}}},e.prototype.addColumnDefaultAndTypes=function(t,e){var i={},o=this.gridOptionsService.get("defaultColDef");D(i,o,!1,!0);var n=this.dataTypeService.updateColDefAndGetColumnType(i,t,e);n&&this.assignColumnTypes(n,i),D(i,t,!1,!0);var r=this.gridOptionsService.get("autoGroupColumnDef"),s=this.gridOptionsService.isColumnsSortingCoupledToGroup();return t.rowGroup&&r&&s&&D(i,{sort:r.sort,initialSort:r.initialSort},!1,!0),this.dataTypeService.validateColDef(i),i},e.prototype.assignColumnTypes=function(t,e){if(t.length){var i=Object.assign({},It),o=this.gridOptionsService.get("columnTypes")||{};C(o,(function(t,e){t in i?console.warn("AG Grid: the column type '"+t+"' is a default column type and cannot be overridden."):i[t]=e})),t.forEach((function(t){var o=i[t.trim()];o?D(e,o,!1,!0):console.warn("AG Grid: colDef.type '"+t+"' does not correspond to defined gridOptions.columnTypes")}))}},e.prototype.isColumnGroup=function(t){return void 0!==t.children},ce([pt("columnUtils")],e.prototype,"columnUtils",void 0),ce([pt("dataTypeService")],e.prototype,"dataTypeService",void 0),ce([he(0,gt("loggerFactory"))],e.prototype,"setBeans",null),e=ce([ht("columnFactory")],e),e}(le),de=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},fe=function(){function t(t,e,i,o){this.displayedChildren=[],this.localEventService=new vt,this.groupId=e,this.partId=i,this.providedColumnGroup=t,this.pinned=o}return t.createUniqueId=function(t,e){return t+"_"+e},t.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},t.prototype.getParent=function(){return this.parent},t.prototype.setParent=function(t){this.parent=t},t.prototype.getUniqueId=function(){return t.createUniqueId(this.groupId,this.partId)},t.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},t.prototype.isMoving=function(){var t=this.getProvidedColumnGroup().getLeafColumns();return!(!t||0===t.length)&&t.every((function(t){return t.isMoving()}))},t.prototype.checkLeft=function(){if(this.displayedChildren.forEach((function(e){e instanceof t&&e.checkLeft()})),this.displayedChildren.length>0)if(this.gridOptionsService.is("enableRtl")){var e=Dt(this.displayedChildren),i=e.getLeft();this.setLeft(i)}else{var o=this.displayedChildren[0].getLeft();this.setLeft(o)}else this.setLeft(null)},t.prototype.getLeft=function(){return this.left},t.prototype.getOldLeft=function(){return this.oldLeft},t.prototype.setLeft=function(e){this.oldLeft=e,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(t.EVENT_LEFT_CHANGED)))},t.prototype.getPinned=function(){return this.pinned},t.prototype.createAgEvent=function(t){return{type:t}},t.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},t.prototype.getGroupId=function(){return this.groupId},t.prototype.getPartId=function(){return this.partId},t.prototype.isChildInThisGroupDeepSearch=function(e){var i=!1;return this.children.forEach((function(o){e===o&&(i=!0),o instanceof t&&o.isChildInThisGroupDeepSearch(e)&&(i=!0)})),i},t.prototype.getActualWidth=function(){var t=0;return this.displayedChildren&&this.displayedChildren.forEach((function(e){t+=e.getActualWidth()})),t},t.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var t=!1;return this.displayedChildren.forEach((function(e){e.isResizable()&&(t=!0)})),t},t.prototype.getMinWidth=function(){var t=0;return this.displayedChildren.forEach((function(e){t+=e.getMinWidth()||0})),t},t.prototype.addChild=function(t){this.children||(this.children=[]),this.children.push(t)},t.prototype.getDisplayedChildren=function(){return this.displayedChildren},t.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},t.prototype.getDisplayedLeafColumns=function(){var t=[];return this.addDisplayedLeafColumns(t),t},t.prototype.getDefinition=function(){return this.providedColumnGroup.getColGroupDef()},t.prototype.getColGroupDef=function(){return this.providedColumnGroup.getColGroupDef()},t.prototype.isPadding=function(){return this.providedColumnGroup.isPadding()},t.prototype.isExpandable=function(){return this.providedColumnGroup.isExpandable()},t.prototype.isExpanded=function(){return this.providedColumnGroup.isExpanded()},t.prototype.setExpanded=function(t){this.providedColumnGroup.setExpanded(t)},t.prototype.addDisplayedLeafColumns=function(e){this.displayedChildren.forEach((function(i){i instanceof xt?e.push(i):i instanceof t&&i.addDisplayedLeafColumns(e)}))},t.prototype.addLeafColumns=function(e){this.children.forEach((function(i){i instanceof xt?e.push(i):i instanceof t&&i.addLeafColumns(e)}))},t.prototype.getChildren=function(){return this.children},t.prototype.getColumnGroupShow=function(){return this.providedColumnGroup.getColumnGroupShow()},t.prototype.getProvidedColumnGroup=function(){return this.providedColumnGroup},t.prototype.getPaddingLevel=function(){var t=this.getParent();return this.isPadding()&&t&&t.isPadding()?1+t.getPaddingLevel():0},t.prototype.calculateDisplayedColumns=function(){var e=this;this.displayedChildren=[];var i=this;while(null!=i&&i.isPadding())i=i.getParent();var o=!!i&&i.providedColumnGroup.isExpandable();if(!o)return this.displayedChildren=this.children,void this.localEventService.dispatchEvent(this.createAgEvent(t.EVENT_DISPLAYED_CHILDREN_CHANGED));this.children.forEach((function(o){var n=o instanceof t&&(!o.displayedChildren||!o.displayedChildren.length);if(!n){var r=o.getColumnGroupShow();switch(r){case"open":i.providedColumnGroup.isExpanded()&&e.displayedChildren.push(o);break;case"closed":i.providedColumnGroup.isExpanded()||e.displayedChildren.push(o);break;default:e.displayedChildren.push(o);break}}})),this.localEventService.dispatchEvent(this.createAgEvent(t.EVENT_DISPLAYED_CHILDREN_CHANGED))},t.EVENT_LEFT_CHANGED="leftChanged",t.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",de([pt("gridOptionsService")],t.prototype,"gridOptionsService",void 0),t}(),ge=function(){function t(){}return t.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",t.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",t.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",t.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",t.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",t.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",t.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",t.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",t.EVENT_COLUMN_MOVED="columnMoved",t.EVENT_COLUMN_VISIBLE="columnVisible",t.EVENT_COLUMN_PINNED="columnPinned",t.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",t.EVENT_COLUMN_RESIZED="columnResized",t.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",t.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",t.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",t.EVENT_ROW_GROUP_OPENED="rowGroupOpened",t.EVENT_ROW_DATA_CHANGED="rowDataChanged",t.EVENT_ROW_DATA_UPDATED="rowDataUpdated",t.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",t.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",t.EVENT_CHART_CREATED="chartCreated",t.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",t.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",t.EVENT_CHART_DESTROYED="chartDestroyed",t.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",t.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",t.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",t.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",t.EVENT_MODEL_UPDATED="modelUpdated",t.EVENT_CUT_START="cutStart",t.EVENT_CUT_END="cutEnd",t.EVENT_PASTE_START="pasteStart",t.EVENT_PASTE_END="pasteEnd",t.EVENT_FILL_START="fillStart",t.EVENT_FILL_END="fillEnd",t.EVENT_RANGE_DELETE_START="rangeDeleteStart",t.EVENT_RANGE_DELETE_END="rangeDeleteEnd",t.EVENT_UNDO_STARTED="undoStarted",t.EVENT_UNDO_ENDED="undoEnded",t.EVENT_REDO_STARTED="redoStarted",t.EVENT_REDO_ENDED="redoEnded",t.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",t.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",t.EVENT_CELL_CLICKED="cellClicked",t.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",t.EVENT_CELL_MOUSE_DOWN="cellMouseDown",t.EVENT_CELL_CONTEXT_MENU="cellContextMenu",t.EVENT_CELL_VALUE_CHANGED="cellValueChanged",t.EVENT_CELL_EDIT_REQUEST="cellEditRequest",t.EVENT_ROW_VALUE_CHANGED="rowValueChanged",t.EVENT_CELL_FOCUSED="cellFocused",t.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",t.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",t.EVENT_ROW_SELECTED="rowSelected",t.EVENT_SELECTION_CHANGED="selectionChanged",t.EVENT_TOOLTIP_SHOW="tooltipShow",t.EVENT_TOOLTIP_HIDE="tooltipHide",t.EVENT_CELL_KEY_DOWN="cellKeyDown",t.EVENT_CELL_MOUSE_OVER="cellMouseOver",t.EVENT_CELL_MOUSE_OUT="cellMouseOut",t.EVENT_FILTER_CHANGED="filterChanged",t.EVENT_FILTER_MODIFIED="filterModified",t.EVENT_FILTER_OPENED="filterOpened",t.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged",t.EVENT_SORT_CHANGED="sortChanged",t.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",t.EVENT_ROW_CLICKED="rowClicked",t.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",t.EVENT_GRID_READY="gridReady",t.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed",t.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",t.EVENT_VIEWPORT_CHANGED="viewportChanged",t.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",t.EVENT_FIRST_DATA_RENDERED="firstDataRendered",t.EVENT_DRAG_STARTED="dragStarted",t.EVENT_DRAG_STOPPED="dragStopped",t.EVENT_CHECKBOX_CHANGED="checkboxChanged",t.EVENT_ROW_EDITING_STARTED="rowEditingStarted",t.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",t.EVENT_CELL_EDITING_STARTED="cellEditingStarted",t.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",t.EVENT_BODY_SCROLL="bodyScroll",t.EVENT_BODY_SCROLL_END="bodyScrollEnd",t.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",t.EVENT_PAGINATION_CHANGED="paginationChanged",t.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",t.EVENT_STORE_REFRESHED="storeRefreshed",t.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",t.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",t.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",t.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",t.EVENT_FLASH_CELLS="flashCells",t.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",t.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",t.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",t.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",t.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",t.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",t.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",t.EVENT_ROW_DRAG_ENTER="rowDragEnter",t.EVENT_ROW_DRAG_MOVE="rowDragMove",t.EVENT_ROW_DRAG_LEAVE="rowDragLeave",t.EVENT_ROW_DRAG_END="rowDragEnd",t.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",t.EVENT_POPUP_TO_FRONT="popupToFront",t.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",t.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",t.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",t.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",t.EVENT_KEYBOARD_FOCUS="keyboardFocus",t.EVENT_MOUSE_FOCUS="mouseFocus",t.EVENT_STORE_UPDATED="storeUpdated",t.EVENT_FILTER_DESTROYED="filterDestroyed",t.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted",t.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged",t.EVENT_DATA_TYPES_INFERRED="dataTypesInferred",t.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged",t.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected",t}(),ye=function(){function t(){this.existingIds={}}return t.prototype.getInstanceIdForKey=function(t){var e,i=this.existingIds[t];return e="number"!==typeof i?0:i+1,this.existingIds[t]=e,e},t}(),_e=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),me=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ve="ag-Grid-AutoColumn",be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.createAutoGroupColumns=function(t){var e=this,i=[],o=this.gridOptionsService.is("treeData"),n=this.gridOptionsService.isGroupMultiAutoColumn();return o&&n&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),n=!1),n?t.forEach((function(t,o){i.push(e.createOneAutoGroupColumn(t,o))})):i.push(this.createOneAutoGroupColumn()),i},e.prototype.updateAutoGroupColumns=function(t){var e=this;t.forEach((function(t,i){return e.updateOneAutoGroupColumn(t,i)}))},e.prototype.createOneAutoGroupColumn=function(t,e){var i;i=t?ve+"-"+t.getId():ve;var o=this.createAutoGroupColDef(i,t,e);o.colId=i;var n=new xt(o,null,i,!0);return this.context.createBean(n),n},e.prototype.updateOneAutoGroupColumn=function(t,e){var i=t.getColDef(),o="string"==typeof i.showRowGroup?i.showRowGroup:void 0,n=null!=o?this.columnModel.getPrimaryColumn(o):void 0,r=this.createAutoGroupColDef(t.getId(),null!==n&&void 0!==n?n:void 0,e);t.setColDef(r,null),this.columnFactory.applyColumnState(t,r)},e.prototype.createAutoGroupColDef=function(t,e,i){var o=this.createBaseColDef(e),n=this.gridOptionsService.get("autoGroupColumnDef");if(D(o,n),o=this.columnFactory.addColumnDefaultAndTypes(o,t),!this.gridOptionsService.is("treeData")){var r=a(o.field)&&a(o.valueGetter)&&a(o.filterValueGetter)&&"agGroupColumnFilter"!==o.filter;r&&(o.filter=!1)}i&&i>0&&(o.headerCheckboxSelection=!1);var s=this.gridOptionsService.isColumnsSortingCoupledToGroup(),l=o.valueGetter||null!=o.field;return s&&!l&&(o.sortIndex=void 0,o.initialSort=void 0),o},e.prototype.createBaseColDef=function(t){var e=this.gridOptionsService.get("autoGroupColumnDef"),i=this.localeService.getLocaleTextFunc(),o={headerName:i("group","Group")},n=e&&(e.cellRenderer||e.cellRendererSelector);if(n||(o.cellRenderer="agGroupCellRenderer"),t){var r=t.getColDef();Object.assign(o,{headerName:this.columnModel.getDisplayNameForColumn(t,"header"),headerValueGetter:r.headerValueGetter}),r.cellRenderer&&Object.assign(o,{cellRendererParams:{innerRenderer:r.cellRenderer,innerRendererParams:r.cellRendererParams}}),o.showRowGroup=t.getColId()}else o.showRowGroup=!0;return o},me([pt("columnModel")],e.prototype,"columnModel",void 0),me([pt("columnFactory")],e.prototype,"columnFactory",void 0),e=me([ht("autoGroupColService")],e),e}(le),Ce=/[&<>"']/g,we={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Se(t){var e=String.fromCharCode;function i(t){var e=[];if(!t)return[];var i,o,n=t.length,r=0;while(r<n)i=t.charCodeAt(r++),i>=55296&&i<=56319&&r<n?(o=t.charCodeAt(r++),56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),r--)):e.push(i);return e}function o(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function n(t,i){return e(t>>i&63|128)}function r(t){if(t>=0&&t<=31&&10!==t){var i=t.toString(16).toUpperCase(),r=i.padStart(4,"0");return"_x"+r+"_"}if(0==(4294967168&t))return e(t);var s="";return 0==(4294965248&t)?s=e(t>>6&31|192):0==(4294901760&t)?(o(t),s=e(t>>12&15|224),s+=n(t,6)):0==(4292870144&t)&&(s=e(t>>18&7|240),s+=n(t,12),s+=n(t,6)),s+=e(63&t|128),s}var s,a=i(t),l=a.length,u=-1,c="";while(++u<l)s=a[u],c+=r(s);return c}function Ee(t){return t[0].toUpperCase()+t.substr(1).toLowerCase()}function xe(t,e){if(null==t)return null;var i=t.toString().toString();return e?i:i.replace(Ce,(function(t){return we[t]}))}function Oe(t){if(!t||null==t)return null;var e=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g,o=t.replace(e,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ");return o.map((function(t){return t.substring(0,1).toUpperCase()+(t.length>1?t.substring(1,t.length):"")})).join(" ")}function Re(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLocaleLowerCase()}))}var Ie=Object.freeze({__proto__:null,utf8_encode:Se,capitalise:Ee,escapeString:xe,camelCaseToHumanText:Oe,camelCaseToHyphenated:Re});function Te(t){var e=new Map;return t.forEach((function(t){return e.set(t[0],t[1])})),e}function Pe(t,e){var i=new Map;return t.forEach((function(t){return i.set(e(t),t)})),i}function De(t){var e=[];return t.forEach((function(t,i){return e.push(i)})),e}var ke=Object.freeze({__proto__:null,convertToMap:Te,mapById:Pe,keys:De}),Ae=function(){function t(){}return t.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0},t.ALL_PROPERTIES=Object.keys(t.ColDefPropertyMap),t}(),Le=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Me=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},Fe=function(){function t(){}return t.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator"],t.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams"],t.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass"],t.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"],t.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSelectsChildren","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","serverSideFilterAllLevels","serverSideSortingAlwaysResets","serverSideSortAllLevels","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","suppressReactUi","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","suppressCutToClipboard","enableAdvancedFilter","includeHiddenColumnsInAdvancedFilter"],t.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processSecondaryColDef","processSecondaryColGroupDef","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"],t.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering"],t.FUNCTION_PROPERTIES=Me(Me([],Le(t.FUNCTIONAL_PROPERTIES)),Le(t.CALLBACK_PROPERTIES)),t.ALL_PROPERTIES=Me(Me(Me(Me(Me(Me([],Le(t.ARRAY_PROPERTIES)),Le(t.OBJECT_PROPERTIES)),Le(t.STRING_PROPERTIES)),Le(t.NUMBER_PROPERTIES)),Le(t.FUNCTION_PROPERTIES)),Le(t.BOOLEAN_PROPERTIES)),t}(),Ne=function(){return Ne=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Ne.apply(this,arguments)},Ve=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Be=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},Ge=function(){function t(){}return t.getCallbackForEvent=function(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substr(1)},t.getCoercionLookup=function(){var e={};return Be(Be(Be(Be(Be([],Ve(t.ARRAY_PROPERTIES)),Ve(t.OBJECT_PROPERTIES)),Ve(t.STRING_PROPERTIES)),Ve(t.FUNCTION_PROPERTIES)),Ve(t.EVENT_CALLBACKS)).forEach((function(t){return e[t]="none"})),t.BOOLEAN_PROPERTIES.forEach((function(t){return e[t]="boolean"})),t.NUMBER_PROPERTIES.forEach((function(t){return e[t]="number"})),e},t.getValue=function(e,i){var o=t.coercionLookup[e];if(o){var n=i;switch(o){case"number":n=t.toNumber(i);break;case"boolean":n=t.toBoolean(i);break;case"none":"groupAggFiltering"===e&&"function"!==typeof i&&(n=t.toBoolean(i));break}return n}},t.getGridOptionKeys=function(e,i){return i?Object.keys(t.coercionLookup):Object.keys(e)},t.copyAttributesToGridOptions=function(e,i,o){void 0===o&&(o=!1),"object"!==typeof e&&(e={});var n=e,r=t.getGridOptionKeys(i,o);return r.forEach((function(e){var o=i[e];if("undefined"!==typeof o){var r=t.getValue(e,o);void 0!==r&&(n[e]=r)}})),e},t.processOnChange=function(e,i){var o=this;if(e&&0!==Object.keys(e).length){this.changeSetId++;var n=Ne({},e);n.columnTypes&&(i.setColumnTypes(n.columnTypes.currentValue,"gridOptionsChanged"),delete n.columnTypes),n.autoGroupColumnDef&&(i.setAutoGroupColumnDef(n.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete n.autoGroupColumnDef),n.defaultColDef&&(i.setDefaultColDef(n.defaultColDef.currentValue,"gridOptionsChanged"),delete n.defaultColDef),n.columnDefs&&(i.setColumnDefs(n.columnDefs.currentValue,"gridOptionsChanged"),delete n.columnDefs);var r=Object.keys(n).map((function(e){var o=e,r=t.getValue(o,n[o].currentValue),s=i.__setPropertyOnly(o,r);return{gridKey:o,coercedValue:r,isChanged:s}})).filter((function(t){return t.isChanged})),s=r.map((function(t){return t.gridKey}));r.forEach((function(t){return i.__updateProperty(t.gridKey,t.coercedValue,t.isChanged,{id:o.changeSetId,properties:s})}));var a={type:ge.EVENT_COMPONENT_STATE_CHANGED};C(e,(function(t,e){a[t]=e})),i.dispatchEvent(a)}},t.toBoolean=function(t){return"boolean"===typeof t?t:"string"===typeof t&&("TRUE"===t.toUpperCase()||""==t)},t.toNumber=function(t){return"number"===typeof t?t:"string"===typeof t?Number(t):void 0},t.EVENTS=y(ge),t.EXCLUDED_INTERNAL_EVENTS=[ge.EVENT_SCROLLBAR_WIDTH_CHANGED,ge.EVENT_CHECKBOX_CHANGED,ge.EVENT_HEIGHT_SCALE_CHANGED,ge.EVENT_BODY_HEIGHT_CHANGED,ge.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,ge.EVENT_SCROLL_VISIBILITY_CHANGED,ge.EVENT_COLUMN_HOVER_CHANGED,ge.EVENT_FLASH_CELLS,ge.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,ge.EVENT_DISPLAYED_ROWS_CHANGED,ge.EVENT_LEFT_PINNED_WIDTH_CHANGED,ge.EVENT_RIGHT_PINNED_WIDTH_CHANGED,ge.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,ge.EVENT_POPUP_TO_FRONT,ge.EVENT_KEYBOARD_FOCUS,ge.EVENT_MOUSE_FOCUS,ge.EVENT_STORE_UPDATED,ge.EVENT_COLUMN_PANEL_ITEM_DRAG_START,ge.EVENT_COLUMN_PANEL_ITEM_DRAG_END,ge.EVENT_FILL_START,ge.EVENT_FILL_END,ge.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,ge.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,ge.EVENT_FULL_WIDTH_ROW_FOCUSED,ge.EVENT_HEADER_HEIGHT_CHANGED,ge.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,ge.EVENT_CELL_FOCUS_CLEARED,ge.EVENT_GRID_STYLES_CHANGED,ge.EVENT_FILTER_DESTROYED,ge.EVENT_ROW_DATA_UPDATE_STARTED,ge.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,ge.EVENT_DATA_TYPES_INFERRED,ge.EVENT_FIELD_VALUE_CHANGED,ge.EVENT_FIELD_PICKER_VALUE_SELECTED],t.PUBLIC_EVENTS=t.EVENTS.filter((function(e){return!$t(t.EXCLUDED_INTERNAL_EVENTS,e)})),t.EVENT_CALLBACKS=t.EVENTS.map((function(e){return t.getCallbackForEvent(e)})),t.STRING_PROPERTIES=Fe.STRING_PROPERTIES,t.OBJECT_PROPERTIES=Fe.OBJECT_PROPERTIES,t.ARRAY_PROPERTIES=Fe.ARRAY_PROPERTIES,t.NUMBER_PROPERTIES=Fe.NUMBER_PROPERTIES,t.BOOLEAN_PROPERTIES=Fe.BOOLEAN_PROPERTIES,t.FUNCTION_PROPERTIES=Fe.FUNCTION_PROPERTIES,t.ALL_PROPERTIES=Fe.ALL_PROPERTIES,t.ALL_PROPERTIES_SET=new Set(Fe.ALL_PROPERTIES),t.changeSetId=0,t.coercionLookup=t.getCoercionLookup(),t}(),je=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function He(t,e,i){var o={},n=t.filter((function(t){return!e.some((function(e){return e===t}))}));return n.length>0&&n.forEach((function(t){return o[t]=$e(t,i).values})),o}function $e(t,e,i,o){var n,r,s=e.map((function(e,i){return{value:e,relevance:We(t.toLowerCase(),e.toLocaleLowerCase()),idx:i}}));if(s.sort((function(t,e){return e.relevance-t.relevance})),i&&(s=s.filter((function(t){return 0!==t.relevance}))),s.length>0&&o&&o>0){var a=s[0].relevance,l=a*o;s=s.filter((function(t){return l-t.relevance<0}))}var u=[],c=[];try{for(var h=je(s),p=h.next();!p.done;p=h.next()){var d=p.value;u.push(d.value),c.push(d.idx)}}catch(f){n={error:f}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}return{values:u,indices:c}}function We(t,e){for(var i=t.replace(/\s/g,""),o=e.replace(/\s/g,""),n=0,r=-1,s=0;s<i.length;s++){var a=o.indexOf(i[s],r+1);-1!==a&&(r=a,n+=100-100*r/1e4*100)}return n}var Ue=Object.freeze({__proto__:null,fuzzyCheckStrings:He,fuzzySuggestions:$e}),ze=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ke=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Ye=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t};function qe(t,e,i,o){var n=i?"Please use '"+i+"' instead. ":"";G((function(){return console.warn("AG Grid: since v"+t+", '"+e+"' is deprecated. "+n+(null!==o&&void 0!==o?o:""))}),"Deprecated_"+e)}var Xe=["__ob__","__v_skip","__metadata__"],Qe=function(){function t(){this.deprecatedProperties={rememberGroupStateWhenNewData:{version:"24",message:"Now that transaction updates are possible and they keep group state, this feature is no longer needed."},serverSideFilteringAlwaysResets:{version:"28.0",newProp:"serverSideOnlyRefreshFilteredGroups",copyToNewProp:!0},serverSideSortingAlwaysResets:{version:"28.0",newProp:"serverSideSortAllLevels",copyToNewProp:!0},suppressReactUi:{version:"28",message:"The legacy React rendering engine is deprecated and will be removed in the next major version of the grid."},processSecondaryColDef:{version:"28",newProp:"processPivotResultColDef",copyToNewProp:!0},processSecondaryColGroupDef:{version:"28",newProp:"processPivotResultColGroupDef",copyToNewProp:!0},getServerSideStoreParams:{version:"28",newProp:"getServerSideGroupLevelParams",copyToNewProp:!0},serverSideInfiniteScroll:{version:"29",message:"Infinite Scrolling is now the default behaviour. This can be suppressed with `suppressServerSideInfiniteScroll`."},enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",newProp:"enterNavigatesVertically",copyToNewProp:!0},enterMovesDownAfterEdit:{version:"30",newProp:"enterNavigatesVerticallyAfterEdit",copyToNewProp:!0},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."}}}return t.prototype.pickOneWarning=function(t,e){console.warn("AG Grid: "+t+" and "+e+" do not work with each other, you need to pick one.")},t.prototype.init=function(){var t=this;if(this.checkForDeprecated(),this.checkForViolations(),!0!==this.gridOptions.suppressPropertyNamesCheck&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),this.checkColumnDefViolations(),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.is("suppressParentsInRowNodes")&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.gridOptionsService.is("groupSelectsChildren")&&"multiple"!==this.gridOptionsService.get("rowSelection")&&console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.gridOptionsService.is("groupRemoveSingleChildren")&&this.gridOptionsService.is("groupHideOpenParents")&&this.pickOneWarning("groupRemoveSingleChildren","groupHideOpenParents"),this.gridOptionsService.isRowModelType("serverSide")){var e=function(t,e){return"AG Grid: '"+t+"' is not supported on the Server-Side Row Model."+(e?" Please use "+e+" instead.":"")};this.gridOptionsService.exists("groupDefaultExpanded")&&console.warn(e("groupDefaultExpanded","isServerSideGroupOpenByDefault callback")),this.gridOptionsService.exists("groupIncludeFooter")&&this.gridOptionsService.is("suppressServerSideInfiniteScroll")&&console.warn(e("groupIncludeFooter")),this.gridOptionsService.exists("groupIncludeTotalFooter")&&console.warn(e("groupIncludeTotalFooter"))}this.gridOptionsService.is("enableRangeSelection")?nt.__assertRegistered(Z.RangeSelectionModule,"enableRangeSelection",this.gridOptionsService.getGridId()):(this.gridOptionsService.is("enableRangeHandle")||this.gridOptionsService.is("enableFillHandle"))&&console.warn("AG Grid: 'enableRangeHandle' or 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");var i=function(e,i){return t.gridOptionsService.exists(e)&&nt.__assertRegistered(i,e,t.gridOptionsService.getGridId())};i("sideBar",Z.SideBarModule),i("statusBar",Z.StatusBarModule),i("enableCharts",Z.GridChartsModule),i("getMainMenuItems",Z.MenuModule),i("getContextMenuItems",Z.MenuModule),i("allowContextMenuWithControlKey",Z.MenuModule),i("enableAdvancedFilter",Z.AdvancedFilterModule),i("treeData",Z.RowGroupingModule),i("enableRangeSelection",Z.RangeSelectionModule),i("masterDetail",Z.MasterDetailModule)},t.prototype.checkColumnDefProperties=function(){var t=this;if(null!=this.gridOptions.columnDefs){var e=Ae.ALL_PROPERTIES,i=function(o,n){var r=Object.getOwnPropertyNames(o);t.checkProperties(r,Ye(Ye([],Ke(e)),Ke(Xe)),e,n,"https://www.ag-grid.com/javascript-data-grid/column-properties/"),o.children&&o.children.forEach((function(t){return i(t,"columnDefs.children")}))};this.gridOptions.columnDefs.forEach((function(t){return i(t,"columnDefs")})),this.gridOptions.defaultColDef&&i(this.gridOptions.defaultColDef,"defaultColDef")}},t.prototype.checkColumnDefViolations=function(){var t,e=null!==(t=this.gridOptionsService.get("rowModelType"))&&void 0!==t?t:"clientSide",i={infinite:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],viewport:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],serverSide:["headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],clientSide:[]},o=i[e];if(o){var n="multiple"===this.gridOptionsService.get("rowSelection"),r=["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],s=function(t){n||r.forEach((function(e){e in t&&t[e]&&console.warn("AG Grid: Column property "+e+" is not supported unless rowSelection='multiple'.")})),o.forEach((function(i){i in t&&t[i]&&console.warn("AG Grid: Column property "+i+" is not supported with the row model type "+e+".")}))};null!=this.gridOptions.columnDefs&&this.gridOptions.columnDefs.forEach((function(t){return s(t)})),null!=this.gridOptions.autoGroupColumnDef&&s(this.gridOptions.autoGroupColumnDef),null!=this.gridOptions.defaultColDef&&s(this.gridOptions.defaultColDef)}},t.prototype.checkGridOptionsProperties=function(){var t=Object.getOwnPropertyNames(this.gridOptions),e=Ye(Ye([],Ke(Fe.ALL_PROPERTIES)),Ke(Ge.EVENT_CALLBACKS)),i=Ye(Ye(Ye(Ye([],Ke(e)),["api","columnApi"]),Ke(Xe)),Ke(Object.keys(this.deprecatedProperties)));this.checkProperties(t,i,e,"gridOptions","https://www.ag-grid.com/javascript-data-grid/grid-options/")},t.prototype.checkProperties=function(t,e,i,o,n){var r=He(t,e,i);C(r,(function(t,e){G((function(){return console.warn("AG Grid: invalid "+o+" property '"+t+"' did you mean any of these: "+e.slice(0,8).join(", "))}),"invalidProperty"+o+t)})),Object.keys(r).length>0&&G((function(){return console.warn("AG Grid: to see all the valid "+o+" properties please check: "+n)}),"invalidProperties"+o+n)},t.prototype.checkForDeprecated=function(){var t=this.gridOptions;Object.entries(this.deprecatedProperties).forEach((function(e){var i,o=Ke(e,2),n=o[0],r=o[1],s=t[n];s&&(qe(r.version,n,r.newProp,r.message),r.copyToNewProp&&r.newProp&&null==t[r.newProp]&&(t[r.newProp]=null!==(i=r.newPropValue)&&void 0!==i?i:s))})),t.serverSideStoreType&&(console.warn("AG Grid: since v29.0, `serverSideStoreType` has been replaced by `suppressServerSideInfiniteScroll`. Set to false to use Partial Store, and true to use Full Store."),t.suppressServerSideInfiniteScroll="partial"!==t.serverSideStoreType)},t.prototype.checkForViolations=function(){this.gridOptionsService.is("treeData")&&this.treeDataViolations()},t.prototype.treeDataViolations=function(){this.gridOptionsService.isRowModelType("clientSide")&&(this.gridOptionsService.exists("getDataPath")||console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data.")),this.gridOptionsService.isRowModelType("serverSide")&&(this.gridOptionsService.exists("isServerSideGroup")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),this.gridOptionsService.exists("getServerSideGroupKey")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))},ze([pt("gridOptions")],t.prototype,"gridOptions",void 0),ze([pt("gridOptionsService")],t.prototype,"gridOptionsService",void 0),ze([ut],t.prototype,"init",null),t=ze([ht("gridOptionsValidator")],t),t}();function Je(t,e){var i=["groupRows","multipleColumns","custom","singleColumn"];return i.indexOf(e)<0?(console.warn("AG Grid: '"+e+"' is not a valid groupDisplayType value - possible values are: '"+i.join("', '")+"'"),!1):e===t}function Ze(t,e){var i=["auto","custom"];return i.indexOf(e)<0?(console.warn("AG Grid: '"+e+"' is not a valid treeDataDisplayType value - possible values are: '"+i.join("', '")+"'"),!1):e===t}var ti=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ei=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ii=function(t,e){return function(i,o){e(i,o,t)}},oi=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(i[o[n]]=t[o[n]])}return i},ni=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},ri=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},si=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ai=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.primaryHeaderRowCount=0,e.secondaryHeaderRowCount=0,e.gridHeaderRowCount=0,e.displayedColumnsLeft=[],e.displayedColumnsRight=[],e.displayedColumnsCenter=[],e.displayedColumns=[],e.displayedColumnsAndGroupsMap={},e.viewportColumns=[],e.viewportColumnsHash="",e.headerViewportColumns=[],e.viewportColumnsCenter=[],e.headerViewportColumnsCenter=[],e.autoHeightActiveAtLeastOnce=!1,e.rowGroupColumns=[],e.valueColumns=[],e.pivotColumns=[],e.ready=!1,e.autoGroupsNeedBuilding=!1,e.forceRecreateAutoGroups=!1,e.pivotMode=!1,e.bodyWidth=0,e.leftWidth=0,e.rightWidth=0,e.bodyWidthDirty=!0,e.shouldQueueResizeOperations=!1,e.resizeOperationQueue=[],e}return ti(e,t),e.prototype.init=function(){var t=this;this.suppressColumnVirtualisation=this.gridOptionsService.is("suppressColumnVirtualisation");var e=this.gridOptionsService.is("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData"],(function(){return t.buildAutoGroupColumns()})),this.addManagedPropertyListener("autoGroupColumnDef",(function(){return t.onAutoGroupColumnDefChanged()})),this.addManagedPropertyListener("defaultColDef",(function(e){return t.onSharedColDefChanged(e.source)})),this.addManagedPropertyListener("columnTypes",(function(e){return t.onSharedColDefChanged(e.source)}))},e.prototype.buildAutoGroupColumns=function(){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged"))},e.prototype.onAutoGroupColumnDefChanged=function(){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns)},e.prototype.onSharedColDefChanged=function(t){void 0===t&&(t="api"),this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns),this.createColumnsFromColumnDefs(!0,t)},e.prototype.setColumnDefs=function(t,e){void 0===e&&(e="api");var i=!!this.columnDefs;this.columnDefs=t,this.createColumnsFromColumnDefs(i,e)},e.prototype.recreateColumnDefs=function(t){void 0===t&&(t="api"),this.onSharedColDefChanged(t)},e.prototype.destroyOldColumns=function(t,e){var i={};if(t){this.columnUtils.depthFirstOriginalTreeSearch(null,t,(function(t){i[t.getInstanceId()]=t})),e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,(function(t){i[t.getInstanceId()]=null}));var o=Object.values(i).filter((function(t){return null!=t}));this.destroyBeans(o)}},e.prototype.destroyColumns=function(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)},e.prototype.createColumnsFromColumnDefs=function(t,e){var i=this;void 0===e&&(e="api");var o=t?this.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var n=this.primaryColumns,r=this.primaryColumnTree,s=this.columnFactory.createColumnTree(this.columnDefs,!0,r);this.destroyOldColumns(this.primaryColumnTree,s.columnTree),this.primaryColumnTree=s.columnTree,this.primaryHeaderRowCount=s.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach((function(t){return i.primaryColumnsMap[t.getId()]=t})),this.extractRowGroupColumns(e,n),this.extractPivotColumns(e,n),this.extractValueColumns(e,n),this.ready=!0;var a=void 0===this.gridColsArePrimary,l=this.gridColsArePrimary||a||this.autoGroupsNeedBuilding;l&&(this.updateGridColumns(),t&&this.gridColsArePrimary&&!this.gridOptionsService.is("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(e),this.checkViewportColumns()),this.dispatchEverythingChanged(e),o&&o(),this.dispatchNewColumnsLoaded(e)},e.prototype.dispatchNewColumnsLoaded=function(t){var e={type:ge.EVENT_NEW_COLUMNS_LOADED,source:t};this.eventService.dispatchEvent(e)},e.prototype.dispatchEverythingChanged=function(t){void 0===t&&(t="api");var e={type:ge.EVENT_COLUMN_EVERYTHING_CHANGED,source:t};this.eventService.dispatchEvent(e)},e.prototype.orderGridColumnsLikePrimary=function(){var t=this,e=this.primaryColumns;if(e){var i=e.filter((function(e){return t.gridColumns.indexOf(e)>=0})),o=this.gridColumns.filter((function(t){return i.indexOf(t)<0}));this.gridColumns=ri(ri([],ni(o)),ni(i)),this.gridColumns=this.placeLockedColumns(this.gridColumns)}},e.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},e.prototype.setViewport=function(){this.gridOptionsService.is("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},e.prototype.getDisplayedColumnsStartingAt=function(t){var e=t,i=[];while(null!=e)i.push(e),e=this.getDisplayedColAfter(e);return i},e.prototype.checkViewportColumns=function(t){if(void 0===t&&(t=!1),null!=this.displayedColumnsCenter){var e=this.extractViewport();if(e){var i={type:ge.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:t};this.eventService.dispatchEvent(i)}}},e.prototype.setViewportPosition=function(t,e,i){void 0===i&&(i=!1),(t!==this.scrollWidth||e!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=t,this.scrollPosition=e,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(i))},e.prototype.isPivotMode=function(){return this.pivotMode},e.prototype.isPivotSettingAllowed=function(t){return!t||!this.gridOptionsService.is("treeData")||(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1)},e.prototype.setPivotMode=function(t,e){if(void 0===e&&(e="api"),t!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)){this.pivotMode=t,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(e);var i={type:ge.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(i)}},e.prototype.getSecondaryPivotColumn=function(t,e){if(a(this.secondaryColumns))return null;var i=this.getPrimaryColumn(e),o=null;return this.secondaryColumns.forEach((function(e){var n=e.getColDef().pivotKeys,r=e.getColDef().pivotValueColumn,s=kt(n,t),a=r===i;s&&a&&(o=e)})),o},e.prototype.setBeans=function(t){this.logger=t.create("columnModel")},e.prototype.setFirstRightAndLastLeftPinned=function(t){var e,i;this.gridOptionsService.is("enableRtl")?(e=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,i=this.displayedColumnsRight?Dt(this.displayedColumnsRight):null):(e=this.displayedColumnsLeft?Dt(this.displayedColumnsLeft):null,i=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach((function(o){o.setLastLeftPinned(o===e,t),o.setFirstRightPinned(o===i,t)}))},e.prototype.autoSizeColumns=function(t){var e=this;if(this.shouldQueueResizeOperations)this.resizeOperationQueue.push((function(){return e.autoSizeColumns(t)}));else{var i=t.columns,o=t.skipHeader,n=t.skipHeaderGroups,r=t.stopAtGroup,s=t.source,a=void 0===s?"api":s;this.animationFrameService.flushAllFrames();var l=[],u=-1,c=null!=o?o:this.gridOptionsService.is("skipHeaderOnAutoSize"),h=null!=n?n:c;while(0!==u)u=0,this.actionOnGridColumns(i,(function(t){if(l.indexOf(t)>=0)return!1;var i=e.autoWidthCalculator.getPreferredWidthForColumn(t,c);if(i>0){var o=e.normaliseColumnWidth(t,i);t.setActualWidth(o,a),l.push(t),u++}return!0}),a);h||this.autoSizeColumnGroupsByColumns(i,a,r),this.dispatchColumnResizedEvent(l,!0,"autosizeColumns")}},e.prototype.dispatchColumnResizedEvent=function(t,e,i,o){if(void 0===o&&(o=null),t&&t.length){var n={type:ge.EVENT_COLUMN_RESIZED,columns:t,column:1===t.length?t[0]:null,flexColumns:o,finished:e,source:i};this.eventService.dispatchEvent(n)}},e.prototype.dispatchColumnChangedEvent=function(t,e,i){var o={type:t,columns:e,column:e&&1==e.length?e[0]:null,source:i};this.eventService.dispatchEvent(o)},e.prototype.dispatchColumnMovedEvent=function(t){var e=t.movedColumns,i=t.source,o=t.toIndex,n=t.finished,r={type:ge.EVENT_COLUMN_MOVED,columns:e,column:e&&1===e.length?e[0]:null,toIndex:o,finished:n,source:i};this.eventService.dispatchEvent(r)},e.prototype.dispatchColumnPinnedEvent=function(t,e){if(t.length){var i=1===t.length?t[0]:null,o=this.getCommonValue(t,(function(t){return t.getPinned()})),n={type:ge.EVENT_COLUMN_PINNED,pinned:null!=o?o:null,columns:t,column:i,source:e};this.eventService.dispatchEvent(n)}},e.prototype.dispatchColumnVisibleEvent=function(t,e){if(t.length){var i=1===t.length?t[0]:null,o=this.getCommonValue(t,(function(t){return t.isVisible()})),n={type:ge.EVENT_COLUMN_VISIBLE,visible:o,columns:t,column:i,source:e};this.eventService.dispatchEvent(n)}},e.prototype.autoSizeColumn=function(t,e,i){void 0===i&&(i="api"),t&&this.autoSizeColumns({columns:[t],skipHeader:e,skipHeaderGroups:!0,source:i})},e.prototype.autoSizeColumnGroupsByColumns=function(t,e,i){var o,n,r,s,a,l=new Set,u=this.getGridColumns(t);u.forEach((function(t){var e=t.getParent();while(e&&e!=i)e.isPadding()||l.add(e),e=e.getParent()}));var c=[];try{for(var h=si(l),p=h.next();!p.done;p=h.next()){var d=p.value;try{for(var f=(r=void 0,si(this.ctrlsService.getHeaderRowContainerCtrls())),g=f.next();!g.done;g=f.next()){var y=g.value;if(a=y.getHeaderCtrlForColumn(d),a)break}}catch(_){r={error:_}}finally{try{g&&!g.done&&(s=f.return)&&s.call(f)}finally{if(r)throw r.error}}a&&a.resizeLeafColumnsToFit(e)}}catch(m){o={error:m}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(o)throw o.error}}return c},e.prototype.autoSizeAllColumns=function(t,e){var i=this;if(void 0===e&&(e="api"),this.shouldQueueResizeOperations)this.resizeOperationQueue.push((function(){return i.autoSizeAllColumns(t,e)}));else{var o=this.getAllDisplayedColumns();this.autoSizeColumns({columns:o,skipHeader:t,source:e})}},e.prototype.getColumnsFromTree=function(t){var e=[],i=function(t){for(var o=0;o<t.length;o++){var n=t[o];n instanceof xt?e.push(n):n instanceof Rt&&i(n.getChildren())}};return i(t),e},e.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},e.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},e.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},e.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},e.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},e.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},e.prototype.isColumnDisplayed=function(t){return this.getAllDisplayedColumns().indexOf(t)>=0},e.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},e.prototype.getViewportColumns=function(){return this.viewportColumns},e.prototype.getDisplayedLeftColumnsForRow=function(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsLeft):this.displayedColumnsLeft},e.prototype.getDisplayedRightColumnsForRow=function(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsRight):this.displayedColumnsRight},e.prototype.isColSpanActive=function(){return this.colSpanActive},e.prototype.getDisplayedColumnsForRow=function(t,e,i,o){for(var n,r=[],s=null,a=function(a){var l,u=e[a],c=e.length-a,h=Math.min(u.getColSpan(t),c),p=[u];if(h>1){for(var d=h-1,f=1;f<=d;f++)p.push(e[a+f]);a+=d}if(i?(l=!1,p.forEach((function(t){i(t)&&(l=!0)}))):l=!0,l){if(0===r.length&&s){var g=!!o&&o(u);g&&r.push(s)}r.push(u)}s=u,n=a},l=0;l<e.length;l++)a(l),l=n;return r},e.prototype.getViewportCenterColumnsForRow=function(t){var e=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var i=function(t){var i=t.getLeft();return s(i)&&i>e.viewportLeft},o=this.suppressColumnVirtualisation?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(t,this.displayedColumnsCenter,o,i)},e.prototype.getAriaColumnIndex=function(t){return this.getAllGridColumns().indexOf(t)+1},e.prototype.isColumnInHeaderViewport=function(t){return!!t.isAutoHeaderHeight()||this.isColumnInRowViewport(t)},e.prototype.isColumnInRowViewport=function(t){if(t.isAutoHeight())return!0;var e=t.getLeft()||0,i=e+t.getActualWidth(),o=this.viewportLeft-200,n=this.viewportRight+200,r=e<o&&i<o,s=e>n&&i>n;return!r&&!s},e.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},e.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},e.prototype.updatePrimaryColumnList=function(t,e,i,o,n,r){var s=this;if(void 0===r&&(r="api"),t&&!l(t)){var a=!1;if(t.forEach((function(t){var n=s.getPrimaryColumn(t);if(n){if(i){if(e.indexOf(n)>=0)return;e.push(n)}else{if(e.indexOf(n)<0)return;Nt(e,n)}o(n),a=!0}})),a){this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(r);var u={type:n,columns:e,column:1===e.length?e[0]:null,source:r};this.eventService.dispatchEvent(u)}}},e.prototype.setRowGroupColumns=function(t,e){void 0===e&&(e="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(t,this.rowGroupColumns,ge.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),e)},e.prototype.setRowGroupActive=function(t,e,i){t!==e.isRowGroupActive()&&(e.setRowGroupActive(t,i),t&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&this.setColumnVisible(e,!1,i),t||this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")||this.setColumnVisible(e,!0,i))},e.prototype.addRowGroupColumn=function(t,e){void 0===e&&(e="api"),t&&this.addRowGroupColumns([t],e)},e.prototype.addRowGroupColumns=function(t,e){void 0===e&&(e="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),ge.EVENT_COLUMN_ROW_GROUP_CHANGED,e)},e.prototype.removeRowGroupColumns=function(t,e){void 0===e&&(e="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),ge.EVENT_COLUMN_ROW_GROUP_CHANGED,e)},e.prototype.removeRowGroupColumn=function(t,e){void 0===e&&(e="api"),t&&this.removeRowGroupColumns([t],e)},e.prototype.addPivotColumns=function(t,e){void 0===e&&(e="api"),this.updatePrimaryColumnList(t,this.pivotColumns,!0,(function(t){return t.setPivotActive(!0,e)}),ge.EVENT_COLUMN_PIVOT_CHANGED,e)},e.prototype.setPivotColumns=function(t,e){void 0===e&&(e="api"),this.setPrimaryColumnList(t,this.pivotColumns,ge.EVENT_COLUMN_PIVOT_CHANGED,!0,(function(t,i){i.setPivotActive(t,e)}),e)},e.prototype.addPivotColumn=function(t,e){void 0===e&&(e="api"),this.addPivotColumns([t],e)},e.prototype.removePivotColumns=function(t,e){void 0===e&&(e="api"),this.updatePrimaryColumnList(t,this.pivotColumns,!1,(function(t){return t.setPivotActive(!1,e)}),ge.EVENT_COLUMN_PIVOT_CHANGED,e)},e.prototype.removePivotColumn=function(t,e){void 0===e&&(e="api"),this.removePivotColumns([t],e)},e.prototype.setPrimaryColumnList=function(t,e,i,o,n,r){var a=this,l=new Map;e.forEach((function(t,e){return l.set(t,e)})),e.length=0,s(t)&&t.forEach((function(t){var i=a.getPrimaryColumn(t);i&&e.push(i)})),e.forEach((function(t,e){var i=l.get(t);void 0!==i?o&&i!==e||l.delete(t):l.set(t,0)})),(this.primaryColumns||[]).forEach((function(t){var i=e.indexOf(t)>=0;n(i,t)})),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(r),this.dispatchColumnChangedEvent(i,ri([],ni(l.keys())),r)},e.prototype.setValueColumns=function(t,e){void 0===e&&(e="api"),this.setPrimaryColumnList(t,this.valueColumns,ge.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),e)},e.prototype.setValueActive=function(t,e,i){if(t!==e.isValueActive()&&(e.setValueActive(t,i),t&&!e.getAggFunc())){var o=this.aggFuncService.getDefaultAggFunc(e);e.setAggFunc(o)}},e.prototype.addValueColumns=function(t,e){void 0===e&&(e="api"),this.updatePrimaryColumnList(t,this.valueColumns,!0,this.setValueActive.bind(this,!0),ge.EVENT_COLUMN_VALUE_CHANGED,e)},e.prototype.addValueColumn=function(t,e){void 0===e&&(e="api"),t&&this.addValueColumns([t],e)},e.prototype.removeValueColumn=function(t,e){void 0===e&&(e="api"),this.removeValueColumns([t],e)},e.prototype.removeValueColumns=function(t,e){void 0===e&&(e="api"),this.updatePrimaryColumnList(t,this.valueColumns,!1,this.setValueActive.bind(this,!1),ge.EVENT_COLUMN_VALUE_CHANGED,e)},e.prototype.normaliseColumnWidth=function(t,e){var i=t.getMinWidth();s(i)&&e<i&&(e=i);var o=t.getMaxWidth();return s(o)&&t.isGreaterThanMax(e)&&(e=o),e},e.prototype.getPrimaryOrGridColumn=function(t){var e=this.getPrimaryColumn(t);return e||this.getGridColumn(t)},e.prototype.setColumnWidths=function(t,e,i,o){var n=this;void 0===o&&(o="api");var r=[];t.forEach((function(t){var i=n.getPrimaryOrGridColumn(t.key);if(i){r.push({width:t.newWidth,ratios:[1],columns:[i]});var o="shift"===n.gridOptionsService.get("colResizeDefault");if(o&&(e=!e),e){var s=n.getDisplayedColAfter(i);if(!s)return;var a=i.getActualWidth()-t.newWidth,l=s.getActualWidth()+a;r.push({width:l,ratios:[1],columns:[s]})}}})),0!==r.length&&this.resizeColumnSets({resizeSets:r,finished:i,source:o})},e.prototype.checkMinAndMaxWidthsForSet=function(t){var e=t.columns,i=t.width,o=0,n=0,r=!0;e.forEach((function(t){var e=t.getMinWidth();o+=e||0;var i=t.getMaxWidth();s(i)&&i>0?n+=i:r=!1}));var a=i>=o,l=!r||i<=n;return a&&l},e.prototype.resizeColumnSets=function(t){var e=this,i=t.resizeSets,o=t.finished,n=t.source,r=!i||i.every((function(t){return e.checkMinAndMaxWidthsForSet(t)}));if(r){var a=[],l=[];i.forEach((function(t){var e=t.width,i=t.columns,o=t.ratios,r={},u={};i.forEach((function(t){return l.push(t)}));var c=!0,h=0,p=function(){if(h++,h>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";c=!1;var t=[],n=0,a=e;i.forEach((function(e,i){var s=u[e.getId()];if(s)a-=r[e.getId()];else{t.push(e);var l=o[i];n+=l}}));var l=1/n;t.forEach((function(i,n){var h,p=n===t.length-1;p?h=a:(h=Math.round(o[n]*e*l),a-=h);var d=i.getMinWidth(),f=i.getMaxWidth();s(d)&&h<d?(h=d,u[i.getId()]=!0,c=!0):s(f)&&f>0&&h>f&&(h=f,u[i.getId()]=!0,c=!0),r[i.getId()]=h}))};while(c){var d=p();if("break"===d)break}i.forEach((function(t){var e=r[t.getId()],i=t.getActualWidth();i!==e&&(t.setActualWidth(e,n),a.push(t))}))}));var u=a.length>0,c=[];u&&(c=this.refreshFlexedColumns({resizingCols:l,skipSetLeft:!0}),this.setLeftValues(n),this.updateBodyWidths(),this.checkViewportColumns());var h=l.concat(c);(u||o)&&this.dispatchColumnResizedEvent(h,o,n,c)}else if(o){var p=i&&i.length>0?i[0].columns:null;this.dispatchColumnResizedEvent(p,o,n)}},e.prototype.setColumnAggFunc=function(t,e,i){if(void 0===i&&(i="api"),t){var o=this.getPrimaryColumn(t);o&&(o.setAggFunc(e),this.dispatchColumnChangedEvent(ge.EVENT_COLUMN_VALUE_CHANGED,[o],i))}},e.prototype.moveRowGroupColumn=function(t,e,i){void 0===i&&(i="api");var o=this.rowGroupColumns[t],n=this.rowGroupColumns.slice(t,e);this.rowGroupColumns.splice(t,1),this.rowGroupColumns.splice(e,0,o);var r={type:ge.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:n,column:1===n.length?n[0]:null,source:i};this.eventService.dispatchEvent(r)},e.prototype.moveColumns=function(t,e,i,o){if(void 0===i&&(i="api"),void 0===o&&(o=!0),this.columnAnimationService.start(),e>this.gridColumns.length-t.length)return console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+e),void console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");var n=this.getGridColumns(t),r=!this.doesMovePassRules(n,e);r||(Ht(this.gridColumns,n,e),this.updateDisplayedColumns(i),this.dispatchColumnMovedEvent({movedColumns:n,source:i,toIndex:e,finished:o}),this.columnAnimationService.finish())},e.prototype.doesMovePassRules=function(t,e){var i=this.getProposedColumnOrder(t,e);return this.doesOrderPassRules(i)},e.prototype.doesOrderPassRules=function(t){return!!this.doesMovePassMarryChildren(t)&&!!this.doesMovePassLockedPositions(t)},e.prototype.getProposedColumnOrder=function(t,e){var i=this.gridColumns.slice();return Ht(i,t,e),i},e.prototype.sortColumnsLikeGridColumns=function(t){var e=this;if(t&&!(t.length<=1)){var i=t.filter((function(t){return e.gridColumns.indexOf(t)<0})).length>0;i||t.sort((function(t,i){var o=e.gridColumns.indexOf(t),n=e.gridColumns.indexOf(i);return o-n}))}},e.prototype.doesMovePassLockedPositions=function(t){var e=0,i=!0,o=function(t){return t?!0===t||"left"===t?0:2:1};return t.forEach((function(t){var n=o(t.getColDef().lockPosition);n<e&&(i=!1),e=n})),i},e.prototype.doesMovePassMarryChildren=function(t){var e=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,(function(i){if(i instanceof Rt){var o=i,n=o.getColGroupDef(),r=n&&n.marryChildren;if(r){var s=[];o.getLeafColumns().forEach((function(e){var i=t.indexOf(e);s.push(i)}));var a=Math.max.apply(Math,s),l=Math.min.apply(Math,s),u=a-l,c=o.getLeafColumns().length-1;u>c&&(e=!1)}}})),e},e.prototype.moveColumn=function(t,e,i){void 0===i&&(i="api"),this.moveColumns([t],e,i)},e.prototype.moveColumnByIndex=function(t,e,i){void 0===i&&(i="api");var o=this.gridColumns[t];this.moveColumn(o,e,i)},e.prototype.getColumnDefs=function(){var t=this;if(this.primaryColumns){var e=this.primaryColumns.slice();return this.gridColsArePrimary?e.sort((function(e,i){return t.gridColumns.indexOf(e)-t.gridColumns.indexOf(i)})):this.lastPrimaryOrder&&e.sort((function(e,i){return t.lastPrimaryOrder.indexOf(e)-t.lastPrimaryOrder.indexOf(i)})),this.columnDefFactory.buildColumnDefs(e,this.rowGroupColumns,this.pivotColumns)}},e.prototype.getBodyContainerWidth=function(){return this.bodyWidth},e.prototype.getContainerWidth=function(t){switch(t){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}},e.prototype.updateBodyWidths=function(){var t=this.getWidthOfColsInList(this.displayedColumnsCenter),e=this.getWidthOfColsInList(this.displayedColumnsLeft),i=this.getWidthOfColsInList(this.displayedColumnsRight);this.bodyWidthDirty=this.bodyWidth!==t;var o=this.bodyWidth!==t||this.leftWidth!==e||this.rightWidth!==i;if(o){this.bodyWidth=t,this.leftWidth=e,this.rightWidth=i;var n={type:ge.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(n)}},e.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},e.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},e.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},e.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},e.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},e.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},e.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},e.prototype.getDisplayedColumns=function(t){switch(t){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},e.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns.slice():null},e.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns.slice():null},e.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},e.prototype.getAllGridColumns=function(){return this.gridColumns},e.prototype.isEmpty=function(){return l(this.gridColumns)},e.prototype.isRowGroupEmpty=function(){return l(this.rowGroupColumns)},e.prototype.setColumnVisible=function(t,e,i){void 0===i&&(i="api"),this.setColumnsVisible([t],e,i)},e.prototype.setColumnsVisible=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i="api"),this.applyColumnState({state:t.map((function(t){return{colId:"string"===typeof t?t:t.getColId(),hide:!e}}))},i)},e.prototype.setColumnPinned=function(t,e,i){void 0===i&&(i="api"),t&&this.setColumnsPinned([t],e,i)},e.prototype.setColumnsPinned=function(t,e,i){var o;(void 0===i&&(i="api"),this.gridOptionsService.isDomLayout("print"))?console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'"):(this.columnAnimationService.start(),o=!0===e||"left"===e?"left":"right"===e?"right":null,this.actionOnGridColumns(t,(function(t){return t.getPinned()!==o&&(t.setPinned(o),!0)}),i,(function(){var t={type:ge.EVENT_COLUMN_PINNED,pinned:o,column:null,columns:null,source:i};return t})),this.columnAnimationService.finish())},e.prototype.actionOnGridColumns=function(t,e,i,o){var n=this;if(!l(t)){var r=[];if(t.forEach((function(t){var i=n.getGridColumn(t);if(i){var o=e(i);!1!==o&&r.push(i)}})),r.length&&(this.updateDisplayedColumns(i),s(o)&&o)){var a=o();a.columns=r,a.column=1===r.length?r[0]:null,this.eventService.dispatchEvent(a)}}},e.prototype.getDisplayedColBefore=function(t){var e=this.getAllDisplayedColumns(),i=e.indexOf(t);return i>0?e[i-1]:null},e.prototype.getDisplayedColAfter=function(t){var e=this.getAllDisplayedColumns(),i=e.indexOf(t);return i<e.length-1?e[i+1]:null},e.prototype.getDisplayedGroupAfter=function(t){return this.getDisplayedGroupAtDirection(t,"After")},e.prototype.getDisplayedGroupBefore=function(t){return this.getDisplayedGroupAtDirection(t,"Before")},e.prototype.getDisplayedGroupAtDirection=function(t,e){var i=t.getProvidedColumnGroup().getLevel()+t.getPaddingLevel(),o=t.getDisplayedLeafColumns(),n="After"===e?Dt(o):o[0],r="getDisplayedCol"+e;while(1){var s=this[r](n);if(!s)return null;var a=this.getColumnGroupAtLevel(s,i);if(a!==t)return a}},e.prototype.getColumnGroupAtLevel=function(t,e){var i,o,n=t.getParent();while(1){var r=n.getProvidedColumnGroup();if(i=r.getLevel(),o=n.getPaddingLevel(),i+o<=e)break;n=n.getParent()}return n},e.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},e.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},e.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var t;return(t=[]).concat.apply(t,[this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[]])},e.prototype.createStateItemFromColumn=function(t){var e=t.isRowGroupActive()?this.rowGroupColumns.indexOf(t):null,i=t.isPivotActive()?this.pivotColumns.indexOf(t):null,o=t.isValueActive()?t.getAggFunc():null,n=null!=t.getSort()?t.getSort():null,r=null!=t.getSortIndex()?t.getSortIndex():null,s=null!=t.getFlex()&&t.getFlex()>0?t.getFlex():null,a={colId:t.getColId(),width:t.getActualWidth(),hide:!t.isVisible(),pinned:t.getPinned(),sort:n,sortIndex:r,aggFunc:o,rowGroup:t.isRowGroupActive(),rowGroupIndex:e,pivot:t.isPivotActive(),pivotIndex:i,flex:s};return a},e.prototype.getColumnState=function(){if(a(this.primaryColumns)||!this.isAlive())return[];var t=this.getPrimaryAndSecondaryAndAutoColumns(),e=t.map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(e),e},e.prototype.orderColumnStateList=function(t){var e=Te(this.gridColumns.map((function(t,e){return[t.getColId(),e]})));t.sort((function(t,i){var o=e.has(t.colId)?e.get(t.colId):-1,n=e.has(i.colId)?e.get(i.colId):-1;return o-n}))},e.prototype.resetColumnState=function(t){var e=this;void 0===t&&(t="api");var i=this.getColumnsFromTree(this.primaryColumnTree),o=[],n=1e3,r=1e3,s=[];this.groupAutoColumns&&(s=s.concat(this.groupAutoColumns)),i&&(s=s.concat(i)),s.forEach((function(t){var i=e.getColumnStateFromColDef(t);a(i.rowGroupIndex)&&i.rowGroup&&(i.rowGroupIndex=n++),a(i.pivotIndex)&&i.pivot&&(i.pivotIndex=r++),o.push(i)})),this.applyColumnState({state:o,applyOrder:!0},t)},e.prototype.getColumnStateFromColDef=function(t){var e=function(t,e){return null!=t?t:null!=e?e:null},i=t.getColDef(),o=e(i.sort,i.initialSort),n=e(i.sortIndex,i.initialSortIndex),r=e(i.hide,i.initialHide),s=e(i.pinned,i.initialPinned),a=e(i.width,i.initialWidth),l=e(i.flex,i.initialFlex),u=e(i.rowGroupIndex,i.initialRowGroupIndex),c=e(i.rowGroup,i.initialRowGroup);null!=u||null!=c&&0!=c||(u=null,c=null);var h=e(i.pivotIndex,i.initialPivotIndex),p=e(i.pivot,i.initialPivot);null!=h||null!=p&&0!=p||(h=null,p=null);var d=e(i.aggFunc,i.initialAggFunc);return{colId:t.getColId(),sort:o,sortIndex:n,hide:r,pinned:s,width:a,flex:l,rowGroup:c,rowGroupIndex:u,pivot:p,pivotIndex:h,aggFunc:d}},e.prototype.applyColumnState=function(t,e){var i=this;if(l(this.primaryColumns))return!1;if(t&&t.state&&!t.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;var o=function(o,n,r){var s=i.compareColumnStatesAndDispatchEvents(e);i.autoGroupsNeedBuilding=!0;var a=n.slice(),l={},u={},c=[],h=[],p=0,d=i.rowGroupColumns.slice(),f=i.pivotColumns.slice();o.forEach((function(o){var n=o.colId||"",s=n.startsWith(ve);if(s)return c.push(o),void h.push(o);var d=r(n);d?(i.syncColumnWithStateItem(d,o,t.defaultState,l,u,!1,e),Nt(a,d)):(h.push(o),p+=1)}));var g=function(o){return i.syncColumnWithStateItem(o,null,t.defaultState,l,u,!1,e)};a.forEach(g);var y=function(t,e,i,o){var n=t[i.getId()],r=t[o.getId()],s=null!=n,a=null!=r;if(s&&a)return n-r;if(s)return-1;if(a)return 1;var l=e.indexOf(i),u=e.indexOf(o),c=l>=0,h=u>=0;return c&&h?l-u:c?-1:1};i.rowGroupColumns.sort(y.bind(i,l,d)),i.pivotColumns.sort(y.bind(i,u,f)),i.updateGridColumns();var _=i.groupAutoColumns?i.groupAutoColumns.slice():[];return c.forEach((function(o){var n=i.getAutoColumn(o.colId);Nt(_,n),i.syncColumnWithStateItem(n,o,t.defaultState,null,null,!0,e)})),_.forEach(g),i.applyOrderAfterApplyState(t),i.updateDisplayedColumns(e),i.dispatchEverythingChanged(e),s(),{unmatchedAndAutoStates:h,unmatchedCount:p}};this.columnAnimationService.start();var n=o(t.state||[],this.primaryColumns||[],(function(t){return i.getPrimaryColumn(t)})),r=n.unmatchedAndAutoStates,a=n.unmatchedCount;return(r.length>0||s(t.defaultState))&&(a=o(r,this.secondaryColumns||[],(function(t){return i.getSecondaryColumn(t)})).unmatchedCount),this.columnAnimationService.finish(),0===a},e.prototype.applyOrderAfterApplyState=function(t){var e=this;if(t.applyOrder&&t.state){var i=[],o={};t.state.forEach((function(t){if(t.colId&&!o[t.colId]){var n=e.gridColumnsMap[t.colId];n&&(i.push(n),o[t.colId]=!0)}}));var n=0;this.gridColumns.forEach((function(t){var e=t.getColId(),r=null!=o[e];if(!r){var s=e.startsWith(ve);s?Gt(i,t,n++):i.push(t)}})),i=this.placeLockedColumns(i),this.doesMovePassMarryChildren(i)?this.gridColumns=i:console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.")}},e.prototype.compareColumnStatesAndDispatchEvents=function(t){var e=this,i={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},o=this.getColumnState(),n={};return o.forEach((function(t){n[t.colId]=t})),function(){var r=e.getPrimaryAndSecondaryAndAutoColumns(),s=function(i,o,n,r){var s=o.map(r),a=n.map(r),l=kt(s,a);if(!l){var u=new Set(o);n.forEach((function(t){u.delete(t)||u.add(t)}));var c=ri([],ni(u)),h={type:i,columns:c,column:1===c.length?c[0]:null,source:t};e.eventService.dispatchEvent(h)}},a=function(t){var e=[];return r.forEach((function(i){var o=n[i.getColId()];o&&t(o,i)&&e.push(i)})),e},l=function(t){return t.getColId()};s(ge.EVENT_COLUMN_ROW_GROUP_CHANGED,i.rowGroupColumns,e.rowGroupColumns,l),s(ge.EVENT_COLUMN_PIVOT_CHANGED,i.pivotColumns,e.pivotColumns,l);var u=function(t,e){var i=null!=t.aggFunc,o=i!=e.isValueActive(),n=i&&t.aggFunc!=e.getAggFunc();return o||n},c=a(u);c.length>0&&e.dispatchColumnChangedEvent(ge.EVENT_COLUMN_VALUE_CHANGED,c,t);var h=function(t,e){return t.width!=e.getActualWidth()};e.dispatchColumnResizedEvent(a(h),!0,t);var p=function(t,e){return t.pinned!=e.getPinned()};e.dispatchColumnPinnedEvent(a(p),t);var d=function(t,e){return t.hide==e.isVisible()};e.dispatchColumnVisibleEvent(a(d),t);var f=function(t,e){return t.sort!=e.getSort()||t.sortIndex!=e.getSortIndex()};a(f).length>0&&e.sortController.dispatchSortChangedEvents(t),e.normaliseColumnMovedEventForColumnState(o,t)}},e.prototype.getCommonValue=function(t,e){if(t&&0!=t.length){for(var i=e(t[0]),o=1;o<t.length;o++)if(i!==e(t[o]))return;return i}},e.prototype.normaliseColumnMovedEventForColumnState=function(t,e){var i=this,o=this.getColumnState(),n={};o.forEach((function(t){return n[t.colId]=t}));var r={};t.forEach((function(t){n[t.colId]&&(r[t.colId]=!0)}));var s=t.filter((function(t){return r[t.colId]})),a=o.filter((function(t){return r[t.colId]})),l=[];a.forEach((function(t,e){var o=s&&s[e];if(o&&o.colId!==t.colId){var n=i.getGridColumn(o.colId);n&&l.push(n)}})),l.length&&this.dispatchColumnMovedEvent({movedColumns:l,source:e,finished:!0})},e.prototype.syncColumnWithStateItem=function(t,e,i,o,n,r,a){if(t){var l=function(t,o){var n={value1:void 0,value2:void 0},r=!1;return e&&(void 0!==e[t]&&(n.value1=e[t],r=!0),s(o)&&void 0!==e[o]&&(n.value2=e[o],r=!0)),!r&&i&&(void 0!==i[t]&&(n.value1=i[t]),s(o)&&void 0!==i[o]&&(n.value2=i[o])),n},u=l("hide").value1;void 0!==u&&t.setVisible(!u,a);var c=l("pinned").value1;void 0!==c&&t.setPinned(c);var h=this.columnUtils.calculateColMinWidth(t.getColDef()),p=l("flex").value1;void 0!==p&&t.setFlex(p);var d=t.getFlex()<=0;if(d){var f=l("width").value1;null!=f&&null!=h&&f>=h&&t.setActualWidth(f,a)}var g=l("sort").value1;void 0!==g&&("desc"===g||"asc"===g?t.setSort(g,a):t.setSort(void 0,a));var y=l("sortIndex").value1;if(void 0!==y&&t.setSortIndex(y),!r&&t.isPrimary()){var _=l("aggFunc").value1;void 0!==_&&("string"===typeof _?(t.setAggFunc(_),t.isValueActive()||(t.setValueActive(!0,a),this.valueColumns.push(t))):(s(_)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),t.isValueActive()&&(t.setValueActive(!1,a),Nt(this.valueColumns,t))));var m=l("rowGroup","rowGroupIndex"),v=m.value1,b=m.value2;void 0===v&&void 0===b||("number"===typeof b||v?(t.isRowGroupActive()||(t.setRowGroupActive(!0,a),this.rowGroupColumns.push(t)),o&&"number"===typeof b&&(o[t.getId()]=b)):t.isRowGroupActive()&&(t.setRowGroupActive(!1,a),Nt(this.rowGroupColumns,t)));var C=l("pivot","pivotIndex"),w=C.value1,S=C.value2;void 0===w&&void 0===S||("number"===typeof S||w?(t.isPivotActive()||(t.setPivotActive(!0,a),this.pivotColumns.push(t)),n&&"number"===typeof S&&(n[t.getId()]=S)):t.isPivotActive()&&(t.setPivotActive(!1,a),Nt(this.pivotColumns,t)))}}},e.prototype.getGridColumns=function(t){return this.getColumns(t,this.getGridColumn.bind(this))},e.prototype.getColumns=function(t,e){var i=[];return t&&t.forEach((function(t){var o=e(t);o&&i.push(o)})),i},e.prototype.getColumnWithValidation=function(t){if(null==t)return null;var e=this.getGridColumn(t);return e||console.warn("AG Grid: could not find column "+t),e},e.prototype.getPrimaryColumn=function(t){return this.primaryColumns?this.getColumn(t,this.primaryColumns,this.primaryColumnsMap):null},e.prototype.getGridColumn=function(t){return this.getColumn(t,this.gridColumns,this.gridColumnsMap)},e.prototype.lookupGridColumn=function(t){return this.gridColumnsMap[t]},e.prototype.getSecondaryColumn=function(t){return this.secondaryColumns?this.getColumn(t,this.secondaryColumns,this.secondaryColumnsMap):null},e.prototype.getColumn=function(t,e,i){if(!t)return null;if("string"==typeof t&&i[t])return i[t];for(var o=0;o<e.length;o++)if(this.columnsMatch(e[o],t))return e[o];return this.getAutoColumn(t)},e.prototype.getSourceColumnsForGroupColumn=function(t){var e=t.getColDef().showRowGroup;if(!e)return null;if(!0===e)return this.rowGroupColumns.slice(0);var i=this.getPrimaryColumn(e);return i?[i]:null},e.prototype.getAutoColumn=function(t){var e=this;return this.groupAutoColumns&&s(this.groupAutoColumns)&&!a(this.groupAutoColumns)&&this.groupAutoColumns.find((function(i){return e.columnsMatch(i,t)}))||null},e.prototype.columnsMatch=function(t,e){var i=t===e,o=t.getColDef()===e,n=t.getColId()==e;return i||o||n},e.prototype.getDisplayNameForColumn=function(t,e,i){if(void 0===i&&(i=!1),!t)return null;var o=this.getHeaderName(t.getColDef(),t,null,null,e);return i?this.wrapHeaderNameWithAggFunc(t,o):o},e.prototype.getDisplayNameForProvidedColumnGroup=function(t,e,i){var o=e?e.getColGroupDef():null;return o?this.getHeaderName(o,null,t,e,i):null},e.prototype.getDisplayNameForColumnGroup=function(t,e){return this.getDisplayNameForProvidedColumnGroup(t,t.getProvidedColumnGroup(),e)},e.prototype.getHeaderName=function(t,e,i,o,n){var r=t.headerValueGetter;if(r){var s={colDef:t,column:e,columnGroup:i,providedColumnGroup:o,location:n,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return"function"===typeof r?r(s):"string"===typeof r?this.expressionService.evaluate(r,s):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}return null!=t.headerName?t.headerName:t.field?Oe(t.field):""},e.prototype.wrapHeaderNameWithAggFunc=function(t,e){if(this.gridOptionsService.is("suppressAggFuncInHeader"))return e;var i,o=t.getColDef().pivotValueColumn,n=s(o),r=null;if(n){var a=this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&1===this.valueColumns.length,l=void 0!==t.getColDef().pivotTotalColumnIds;if(a&&!l)return e;r=o?o.getAggFunc():null,i=!0}else{var u=t.isValueActive(),c=this.pivotMode||!this.isRowGroupEmpty();u&&c?(r=t.getAggFunc(),i=!0):i=!1}if(i){var h="string"===typeof r?r:"func",p=this.localeService.getLocaleTextFunc(),d=p(h,h);return d+"("+e+")"}return e},e.prototype.getColumnGroup=function(t,e){if(!t)return null;if(t instanceof fe)return t;var i=this.getAllDisplayedTrees(),o="number"===typeof e,n=null;return this.columnUtils.depthFirstAllColumnTreeSearch(i,(function(i){if(i instanceof fe){var r=i,s=void 0;s=o?t===r.getGroupId()&&e===r.getPartId():t===r.getGroupId(),s&&(n=r)}})),n},e.prototype.isReady=function(){return this.ready},e.prototype.extractValueColumns=function(t,e){this.valueColumns=this.extractColumns(e,this.valueColumns,(function(e,i){return e.setValueActive(i,t)}),(function(){}),(function(){}),(function(t){var e=t.aggFunc;return null===e||""===e?null:void 0!==e?!!e:void 0}),(function(t){return null!=t.initialAggFunc&&""!=t.initialAggFunc})),this.valueColumns.forEach((function(t){var e=t.getColDef();null!=e.aggFunc&&""!=e.aggFunc?t.setAggFunc(e.aggFunc):t.getAggFunc()||t.setAggFunc(e.initialAggFunc)}))},e.prototype.extractRowGroupColumns=function(t,e){this.rowGroupColumns=this.extractColumns(e,this.rowGroupColumns,(function(e,i){return e.setRowGroupActive(i,t)}),(function(t){return t.rowGroupIndex}),(function(t){return t.initialRowGroupIndex}),(function(t){return t.rowGroup}),(function(t){return t.initialRowGroup}))},e.prototype.extractColumns=function(t,e,i,o,n,r,s){void 0===t&&(t=[]),void 0===e&&(e=[]);var a=[],l=[];(this.primaryColumns||[]).forEach((function(i){var u,p=t.indexOf(i)<0,d=i.getColDef(),f=h(r(d)),g=h(s(d)),y=c(o(d)),_=c(n(d)),m=void 0!==f,v=void 0!==y,b=void 0!==g,C=void 0!==_;if(u=m?f:v?null!==y&&y>=0:p?b?g:!!C&&(null!=_&&_>=0):e.indexOf(i)>=0,u){var w=p?null!=y||null!=_:null!=y;w?a.push(i):l.push(i)}}));var u=function(t){var e=o(t.getColDef()),i=n(t.getColDef());return null!=e?e:i};a.sort((function(t,e){var i=u(t),o=u(e);return i===o?0:i<o?-1:1}));var p=[].concat(a);return e.forEach((function(t){l.indexOf(t)>=0&&p.push(t)})),l.forEach((function(t){p.indexOf(t)<0&&p.push(t)})),e.forEach((function(t){p.indexOf(t)<0&&i(t,!1)})),p.forEach((function(t){e.indexOf(t)<0&&i(t,!0)})),p},e.prototype.extractPivotColumns=function(t,e){this.pivotColumns=this.extractColumns(e,this.pivotColumns,(function(e,i){return e.setPivotActive(i,t)}),(function(t){return t.pivotIndex}),(function(t){return t.initialPivotIndex}),(function(t){return t.pivot}),(function(t){return t.initialPivot}))},e.prototype.resetColumnGroupState=function(t){void 0===t&&(t="api");var e=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,(function(t){if(t instanceof Rt){var i=t.getColGroupDef(),o={groupId:t.getGroupId(),open:i?i.openByDefault:void 0};e.push(o)}})),this.setColumnGroupState(e,t)},e.prototype.getColumnGroupState=function(){var t=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,(function(e){e instanceof Rt&&t.push({groupId:e.getGroupId(),open:e.isExpanded()})})),t},e.prototype.setColumnGroupState=function(t,e){var i=this;void 0===e&&(e="api"),this.columnAnimationService.start();var o=[];t.forEach((function(t){var e=t.groupId,n=t.open,r=i.getProvidedColumnGroup(e);r&&r.isExpanded()!==n&&(i.logger.log("columnGroupOpened("+r.getGroupId()+","+n+")"),r.setExpanded(n),o.push(r))})),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e),o.forEach((function(t){var e={type:ge.EVENT_COLUMN_GROUP_OPENED,columnGroup:t};i.eventService.dispatchEvent(e)})),this.columnAnimationService.finish()},e.prototype.setColumnGroupOpened=function(t,e,i){var o;void 0===i&&(i="api"),o=t instanceof Rt?t.getId():t||"",this.setColumnGroupState([{groupId:o,open:e}],i)},e.prototype.getProvidedColumnGroup=function(t){"string"!==typeof t&&console.error("AG Grid: group key must be a string");var e=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,(function(i){i instanceof Rt&&i.getId()===t&&(e=i)})),e},e.prototype.calculateColumnsForDisplay=function(){var t,e=this;return t=this.pivotMode&&a(this.secondaryColumns)?this.gridColumns.filter((function(t){var i=e.groupAutoColumns&&$t(e.groupAutoColumns,t),o=e.valueColumns&&$t(e.valueColumns,t);return i||o})):this.gridColumns.filter((function(t){var i=e.groupAutoColumns&&$t(e.groupAutoColumns,t);return i||t.isVisible()})),t},e.prototype.checkColSpanActiveInCols=function(t){var e=!1;return t.forEach((function(t){s(t.getColDef().colSpan)&&(e=!0)})),e},e.prototype.calculateColumnsForGroupDisplay=function(){var t=this;this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};var e=function(e){var i=e.getColDef(),o=i.showRowGroup;i&&s(o)&&(t.groupDisplayColumns.push(e),"string"===typeof o?t.groupDisplayColumnsMap[o]=e:!0===o&&t.getRowGroupColumns().forEach((function(i){t.groupDisplayColumnsMap[i.getId()]=e})))};this.gridColumns.forEach(e)},e.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},e.prototype.getGroupDisplayColumnForGroup=function(t){return this.groupDisplayColumnsMap[t]},e.prototype.updateDisplayedColumns=function(t){var e=this.calculateColumnsForDisplay();this.buildDisplayedTrees(e),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t)},e.prototype.isSecondaryColumnsPresent=function(){return s(this.secondaryColumns)},e.prototype.setSecondaryColumns=function(t,e){var i=this;void 0===e&&(e="api");var o=t&&t.length>0;if(o||!a(this.secondaryColumns)){if(o){this.processSecondaryColumnDefinitions(t);var n=this.columnFactory.createColumnTree(t,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0);this.destroyOldColumns(this.secondaryBalancedTree,n.columnTree),this.secondaryBalancedTree=n.columnTree,this.secondaryHeaderRowCount=n.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach((function(t){return i.secondaryColumnsMap[t.getId()]=t})),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(e)}},e.prototype.processSecondaryColumnDefinitions=function(t){var e=this.gridOptionsService.get("processPivotResultColDef")||this.gridOptionsService.get("processSecondaryColDef"),i=this.gridOptionsService.get("processPivotResultColGroupDef")||this.gridOptionsService.get("processSecondaryColGroupDef");if(e||i){var o=function(t){t.forEach((function(t){var n=s(t.children);if(n){var r=t;i&&i(r),o(r.children)}else{var a=t;e&&e(a)}}))};t&&o(t)}},e.prototype.updateGridColumns=function(){var t,e=this,i=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.secondaryColumns&&this.secondaryBalancedTree){var o=this.secondaryColumns.every((function(t){return void 0!==e.gridColumnsMap[t.getColId()]}));this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,o&&(t=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,t=this.lastPrimaryOrder);var n=this.createGroupAutoColumnsIfNeeded();if(n&&t){var r=Te(this.groupAutoColumns.map((function(t){return[t,!0]})));t=t.filter((function(t){return!r.has(t)})),t=ri(ri([],ni(this.groupAutoColumns)),ni(t))}if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(t),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach((function(t){return e.gridColumnsMap[t.getId()]=t})),this.setAutoHeightActive(),!kt(i,this.gridBalancedTree)){var s={type:ge.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(s)}},e.prototype.setAutoHeightActive=function(){if(this.autoHeightActive=this.gridColumns.filter((function(t){return t.isAutoHeight()})).length>0,this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;var t=this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide");if(!t){var e="AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.";G((function(){return console.warn(e)}),"autoHeightActive.wrongRowModel")}}},e.prototype.orderGridColsLike=function(t){if(!a(t)){var e=Te(t.map((function(t,e){return[t,e]}))),i=!0;if(this.gridColumns.forEach((function(t){e.has(t)&&(i=!1)})),!i){var o=Te(this.gridColumns.map((function(t){return[t,!0]}))),n=t.filter((function(t){return o.has(t)})),r=Te(n.map((function(t){return[t,!0]}))),s=this.gridColumns.filter((function(t){return!r.has(t)})),l=n.slice();s.forEach((function(t){var e=t.getOriginalParent();if(e){var i=[];while(!i.length&&e){var o=e.getLeafColumns();o.forEach((function(t){var e=l.indexOf(t)>=0,o=i.indexOf(t)<0;e&&o&&i.push(t)})),e=e.getOriginalParent()}if(i.length){var n=i.map((function(t){return l.indexOf(t)})),r=Math.max.apply(Math,ri([],ni(n)));Gt(l,t,r+1)}else l.push(t)}else l.push(t)})),this.gridColumns=l}}},e.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},e.prototype.refreshQuickFilterColumns=function(){var t,e=null!==(t=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)&&void 0!==t?t:[];this.groupAutoColumns&&(e=e.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.is("includeHiddenColumnsInQuickFilter")?e:e.filter((function(t){return t.isVisible()||t.isRowGroupActive()}))},e.prototype.placeLockedColumns=function(t){var e=[],i=[],o=[];return t.forEach((function(t){var n=t.getColDef().lockPosition;"right"===n?o.push(t):"left"===n||!0===n?e.push(t):i.push(t)})),ri(ri(ri([],ni(e)),ni(i)),ni(o))},e.prototype.addAutoGroupToGridColumns=function(){if(a(this.groupAutoColumns))return this.destroyOldColumns(this.groupAutoColsBalancedTree),void(this.groupAutoColsBalancedTree=null);this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var t=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,t),this.groupAutoColsBalancedTree=t,this.gridBalancedTree=t.concat(this.gridBalancedTree)},e.prototype.clearDisplayedAndViewportColumns=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""},e.prototype.updateGroupsAndDisplayedColumns=function(t){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(t),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();var e={type:ge.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(e)},e.prototype.deriveDisplayedColumns=function(t){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(t),this.displayedAutoHeightCols=this.displayedColumns.filter((function(t){return t.isAutoHeight()}))},e.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},e.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},e.prototype.joinDisplayedColumns=function(){this.gridOptionsService.is("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},e.prototype.setLeftValues=function(t){this.setLeftValuesOfColumns(t),this.setLeftValuesOfGroups()},e.prototype.setLeftValuesOfColumns=function(t){var e=this;if(this.primaryColumns){var i=this.primaryColumns.slice(0),o=this.gridOptionsService.is("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach((function(n){if(o){var r=e.getWidthOfColsInList(n);n.forEach((function(e){r-=e.getActualWidth(),e.setLeft(r,t)}))}else{var s=0;n.forEach((function(e){e.setLeft(s,t),s+=e.getActualWidth()}))}Vt(i,n)})),i.forEach((function(e){e.setLeft(null,t)}))}},e.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach((function(t){t.forEach((function(t){if(t instanceof fe){var e=t;e.checkLeft()}}))}))},e.prototype.derivedDisplayedColumnsFromDisplayedTree=function(t,e){e.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(t,(function(t){t instanceof xt&&e.push(t)}))},e.prototype.extractViewportColumns=function(){this.suppressColumnVirtualisation?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},e.prototype.getVirtualHeaderGroupRow=function(t,e){var i;switch(t){case"left":i=this.viewportRowLeft[e];break;case"right":i=this.viewportRowRight[e];break;default:i=this.viewportRowCenter[e];break}return a(i)&&(i=[]),i},e.prototype.calculateHeaderRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var t={};this.headerViewportColumns.forEach((function(e){return t[e.getId()]=!0}));var e=function(i,o,n){for(var r=!1,s=0;s<i.length;s++){var a=i[s],l=!1;if(a instanceof xt)l=!0===t[a.getId()];else{var u=a,c=u.getDisplayedChildren();c&&(l=e(c,o,n+1))}l&&(r=!0,o[n]||(o[n]=[]),o[n].push(a))}return r};e(this.displayedTreeLeft,this.viewportRowLeft,0),e(this.displayedTreeRight,this.viewportRowRight,0),e(this.displayedTreeCentre,this.viewportRowCenter,0)},e.prototype.extractViewport=function(){var t=function(t){return t.getId()+"-"+(t.getPinned()||"normal")};this.extractViewportColumns();var e=this.viewportColumns.map(t).join("#"),i=this.viewportColumnsHash!==e;return i&&(this.viewportColumnsHash=e,this.calculateHeaderRows()),i},e.prototype.refreshFlexedColumns=function(t){var e;void 0===t&&(t={});var i=t.source?t.source:"flex";if(null!=t.viewportWidth&&(this.flexViewportWidth=t.viewportWidth),!this.flexViewportWidth)return[];var o=-1;if(t.resizingCols)for(var n=new Set(t.resizingCols),r=this.displayedColumnsCenter,a=r.length-1;a>=0;a--)if(n.has(r[a])){o=a;break}var l=0,u=[],c=0,h=0;for(a=0;a<this.displayedColumnsCenter.length;a++){var p=this.displayedColumnsCenter[a].getFlex()&&a>o;p?(u.push(this.displayedColumnsCenter[a]),h+=this.displayedColumnsCenter[a].getFlex(),c+=null!==(e=this.displayedColumnsCenter[a].getMinWidth())&&void 0!==e?e:0):l+=this.displayedColumnsCenter[a].getActualWidth()}if(!u.length)return[];var d=[];l+c>this.flexViewportWidth&&(u.forEach((function(t){var e;return t.setActualWidth(null!==(e=t.getMinWidth())&&void 0!==e?e:0,i)})),d=u,u=[]);var f,g=[];t:while(1){f=this.flexViewportWidth-l;var y=f/h;for(a=0;a<u.length;a++){var _=u[a],m=y*_.getFlex(),v=0,b=_.getMinWidth(),C=_.getMaxWidth();if(s(b)&&m<b?v=b:s(C)&&m>C&&(v=C),v){_.setActualWidth(v,i),Ft(u,_),h-=_.getFlex(),d.push(_),l+=_.getActualWidth();continue t}g[a]=Math.round(m)}break}var w=f;return u.forEach((function(t,e){t.setActualWidth(Math.min(g[e],w),i),d.push(t),w-=g[e]})),t.skipSetLeft||this.setLeftValues(i),t.updateBodyWidths&&this.updateBodyWidths(),t.fireResizedEvent&&this.dispatchColumnResizedEvent(d,!0,i,u),u},e.prototype.sizeColumnsToFit=function(t,e,i,o){var n,r,a,l,u,c=this;if(void 0===e&&(e="sizeColumnsToFit"),this.shouldQueueResizeOperations)this.resizeOperationQueue.push((function(){return c.sizeColumnsToFit(t,e,i,o)}));else{var h={};o&&(null===(n=null===o||void 0===o?void 0:o.columnLimits)||void 0===n||n.forEach((function(t){var e=t.key,i=oi(t,["key"]);h["string"===typeof e?e:e.getColId()]=i})));var p=this.getAllDisplayedColumns(),d=t===this.getWidthOfColsInList(p);if(!(t<=0||!p.length||d)){var f=[],g=[];p.forEach((function(t){!0===t.getColDef().suppressSizeToFit?g.push(t):f.push(t)}));var y=f.slice(0),_=!1,m=function(t){Nt(f,t),g.push(t)};f.forEach((function(t){var i,n;t.resetActualWidth(e);var r=null===h||void 0===h?void 0:h[t.getId()],s=null!==(i=null===r||void 0===r?void 0:r.minWidth)&&void 0!==i?i:null===o||void 0===o?void 0:o.defaultMinWidth,a=null!==(n=null===r||void 0===r?void 0:r.maxWidth)&&void 0!==n?n:null===o||void 0===o?void 0:o.defaultMaxWidth,l=t.getActualWidth();"number"===typeof s&&l<s?t.setActualWidth(s,e,!0):"number"===typeof a&&l>a&&t.setActualWidth(a,e,!0)}));while(!_){_=!0;var v=t-this.getWidthOfColsInList(g);if(v<=0)f.forEach((function(t){var i,n,r=null!==(n=null===(i=null===h||void 0===h?void 0:h[t.getId()])||void 0===i?void 0:i.minWidth)&&void 0!==n?n:null===o||void 0===o?void 0:o.defaultMinWidth;"number"!==typeof r?t.setMinimum(e):t.setActualWidth(r,e,!0)}));else for(var b=v/this.getWidthOfColsInList(f),C=v,w=f.length-1;w>=0;w--){var S=f[w],E=null===h||void 0===h?void 0:h[S.getId()],x=null!==(r=null===E||void 0===E?void 0:E.minWidth)&&void 0!==r?r:null===o||void 0===o?void 0:o.defaultMinWidth,O=null!==(a=null===E||void 0===E?void 0:E.maxWidth)&&void 0!==a?a:null===o||void 0===o?void 0:o.defaultMaxWidth,R=null!==(l=S.getMinWidth())&&void 0!==l?l:0,I=null!==(u=S.getMaxWidth())&&void 0!==u?u:Number.MAX_VALUE,T="number"===typeof x&&x>R?x:S.getMinWidth(),P="number"===typeof O&&O<I?O:S.getMaxWidth(),D=Math.round(S.getActualWidth()*b);s(T)&&D<T?(D=T,m(S),_=!1):s(P)&&D>P?(D=P,m(S),_=!1):0===w&&(D=C),S.setActualWidth(D,e,!0),C-=D}}y.forEach((function(t){t.fireColumnWidthChangedEvent(e)})),this.setLeftValues(e),this.updateBodyWidths(),i||this.dispatchColumnResizedEvent(y,!0,e)}}},e.prototype.buildDisplayedTrees=function(t){var e=[],i=[],o=[];t.forEach((function(t){switch(t.getPinned()){case"left":e.push(t);break;case"right":i.push(t);break;default:o.push(t);break}}));var n=new ye;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(e,n,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(i,n,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(o,n,null,this.displayedTreeCentre),this.updateDisplayedMap()},e.prototype.updateDisplayedMap=function(){var t=this;this.displayedColumnsAndGroupsMap={};var e=function(e){t.displayedColumnsAndGroupsMap[e.getUniqueId()]=e};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,e)},e.prototype.isDisplayed=function(t){var e=this.displayedColumnsAndGroupsMap[t.getUniqueId()];return e===t},e.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var t=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(t,(function(t){t instanceof fe&&t.calculateDisplayedColumns()}))},e.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},e.prototype.createGroupAutoColumnsIfNeeded=function(){var t=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;var e=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),i=this.pivotMode?this.gridOptionsService.is("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn(),o=this.rowGroupColumns.length>0||this.gridOptionsService.is("treeData"),n=o&&!i&&!e;if(n){var r=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns),s=!this.autoColsEqual(r,this.groupAutoColumns);if(s||t)return this.groupAutoColumns=r,!0}else this.groupAutoColumns=null;return!1},e.prototype.isGroupSuppressAutoColumn=function(){var t=this.gridOptionsService.get("groupDisplayType"),e=!!t&&Je("custom",t);if(e)return!0;var i=this.gridOptionsService.get("treeDataDisplayType");return!!i&&Ze("custom",i)},e.prototype.autoColsEqual=function(t,e){return kt(t,e,(function(t,e){return t.getColId()===e.getColId()}))},e.prototype.getWidthOfColsInList=function(t){return t.reduce((function(t,e){return t+e.getActualWidth()}),0)},e.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},e.prototype.getFirstDisplayedColumn=function(){var t=this.gridOptionsService.is("enableRtl"),e=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];t&&e.reverse();for(var i=0;i<e.length;i++){var o=this[e[i]]();if(o.length)return t?Dt(o):o[0]}return null},e.prototype.setColumnHeaderHeight=function(t,e){var i=t.setAutoHeaderHeight(e);if(i){var o={type:ge.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:t,columns:[t],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(o)}},e.prototype.getColumnGroupHeaderRowHeight=function(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()},e.prototype.getColumnHeaderRowHeight=function(){var t=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),e=this.getAllDisplayedColumns().filter((function(t){return t.isAutoHeaderHeight()})).map((function(t){return t.getAutoHeaderHeight()||0}));return Math.max.apply(Math,ri([t],ni(e)))},e.prototype.getHeaderHeight=function(){var t;return null!==(t=this.gridOptionsService.getNum("headerHeight"))&&void 0!==t?t:this.environment.getFromTheme(25,"headerHeight")},e.prototype.getFloatingFiltersHeight=function(){var t;return null!==(t=this.gridOptionsService.getNum("floatingFiltersHeight"))&&void 0!==t?t:this.getHeaderHeight()},e.prototype.getGroupHeaderHeight=function(){var t;return null!==(t=this.gridOptionsService.getNum("groupHeaderHeight"))&&void 0!==t?t:this.getHeaderHeight()},e.prototype.getPivotHeaderHeight=function(){var t;return null!==(t=this.gridOptionsService.getNum("pivotHeaderHeight"))&&void 0!==t?t:this.getHeaderHeight()},e.prototype.getPivotGroupHeaderHeight=function(){var t;return null!==(t=this.gridOptionsService.getNum("pivotGroupHeaderHeight"))&&void 0!==t?t:this.getGroupHeaderHeight()},e.prototype.queueResizeOperations=function(){this.shouldQueueResizeOperations=!0},e.prototype.processResizeOperations=function(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach((function(t){return t()})),this.resizeOperationQueue=[]},e.prototype.resetColumnDefIntoColumn=function(t){var e=t.getUserProvidedColDef();if(!e)return!1;var i=this.columnFactory.addColumnDefaultAndTypes(e,t.getColId());return t.setColDef(i,e),!0},e.prototype.generateColumnStateForRowGroupAndPivotIndexes=function(t,e){var i=this,o={},n=function(t,e,n,r,s,a){if(!e.length||!i.primaryColumns)return[];for(var l=Object.keys(t),u=new Set(l),c=new Set(l),h=new Set(e.map((function(t){var e=t.getColId();return c.delete(e),e})).concat(l)),p=[],d={},f=0,g=0;g<i.primaryColumns.length;g++){var y=i.primaryColumns[g].getColId();h.has(y)&&(p.push(y),d[y]=f++)}var _=1e3,m=!1,v=0,b=function(e){for(var i=d[e],o=v;o<i;o++){var n=p[o];c.has(n)&&(t[n][s]=_++,c.delete(n))}v=i};e.forEach((function(e){var i=e.getColId();if(u.has(i))b(i),t[i][s]=_++;else{var l=e.getColDef(),h=null===l[s]||void 0===l[s]&&null==l[a];if(h){if(!m){var f=l[n]||void 0===l[n]&&l[r];f?b(i):(c.forEach((function(e){t[e][s]=_+d[e]})),_+=p.length,m=!0)}o[i]||(o[i]={colId:i}),o[i][s]=_++}}}))};return n(t,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),n(e,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(o)},ei([pt("expressionService")],e.prototype,"expressionService",void 0),ei([pt("columnFactory")],e.prototype,"columnFactory",void 0),ei([pt("displayedGroupCreator")],e.prototype,"displayedGroupCreator",void 0),ei([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),ei([pt("autoWidthCalculator")],e.prototype,"autoWidthCalculator",void 0),ei([pt("columnUtils")],e.prototype,"columnUtils",void 0),ei([pt("columnAnimationService")],e.prototype,"columnAnimationService",void 0),ei([pt("autoGroupColService")],e.prototype,"autoGroupColService",void 0),ei([dt("aggFuncService")],e.prototype,"aggFuncService",void 0),ei([dt("valueCache")],e.prototype,"valueCache",void 0),ei([dt("animationFrameService")],e.prototype,"animationFrameService",void 0),ei([pt("sortController")],e.prototype,"sortController",void 0),ei([pt("columnDefFactory")],e.prototype,"columnDefFactory",void 0),ei([ut],e.prototype,"init",null),ei([ct],e.prototype,"destroyColumns",null),ei([ii(0,gt("loggerFactory"))],e.prototype,"setBeans",null),e=ei([ht("columnModel")],e),e}(le),li=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ui=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ci=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return li(e,t),e.prototype.calculateColMinWidth=function(t){return null!=t.minWidth?t.minWidth:this.environment.getMinColWidth()},e.prototype.calculateColMaxWidth=function(t){return null!=t.maxWidth?t.maxWidth:Number.MAX_SAFE_INTEGER},e.prototype.calculateColInitialWidth=function(t){var e,i=this.calculateColMinWidth(t),o=this.calculateColMaxWidth(t),n=c(t.width),r=c(t.initialWidth);return e=null!=n?n:null!=r?r:200,Math.max(Math.min(e,o),i)},e.prototype.getOriginalPathForColumn=function(t,e){var i=[],o=!1,n=function(e,r){for(var s=0;s<e.length;s++){if(o)return;var a=e[s];if(a instanceof Rt){var l=a;n(l.getChildren(),r+1),i[r]=a}else a===t&&(o=!0)}};return n(e,0),o?i:null},e.prototype.depthFirstOriginalTreeSearch=function(t,e,i){var o=this;e&&e.forEach((function(e){e instanceof Rt&&o.depthFirstOriginalTreeSearch(e,e.getChildren(),i),i(e,t)}))},e.prototype.depthFirstAllColumnTreeSearch=function(t,e){var i=this;t&&t.forEach((function(t){t instanceof fe&&i.depthFirstAllColumnTreeSearch(t.getChildren(),e),e(t)}))},e.prototype.depthFirstDisplayedColumnTreeSearch=function(t,e){var i=this;t&&t.forEach((function(t){t instanceof fe&&i.depthFirstDisplayedColumnTreeSearch(t.getDisplayedChildren(),e),e(t)}))},e=ui([ht("columnUtils")],e),e}(le),hi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),pi=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},di=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return hi(e,t),e.prototype.createDisplayedGroups=function(t,e,i,o){var n=this,r=this.mapOldGroupsById(o),s=[],a=t,l=function(){var t=a;a=[];for(var o=0,l=function(l){var u=o;o=l;var c=t[u],h=c instanceof fe?c.getProvidedColumnGroup():c,p=h.getOriginalParent();if(null!=p){var d=n.createColumnGroup(p,e,r,i);for(f=u;f<l;f++)d.addChild(t[f]);a.push(d)}else for(var f=u;f<l;f++)s.push(t[f])},u=1;u<t.length;u++){var c=t[u],h=c instanceof fe?c.getProvidedColumnGroup():c,p=h.getOriginalParent(),d=t[o],f=d instanceof fe?d.getProvidedColumnGroup():d,g=f.getOriginalParent();p!==g&&l(u)}o<t.length&&l(t.length)};while(a.length)l();return this.setupParentsIntoColumns(s,null),s},e.prototype.createColumnGroup=function(t,e,i,o){var n=t.getGroupId(),r=e.getInstanceIdForKey(n),a=fe.createUniqueId(n,r),l=i[a];return l&&l.getProvidedColumnGroup()!==t&&(l=null),s(l)?l.reset():(l=new fe(t,n,r,o),this.context.createBean(l)),l},e.prototype.mapOldGroupsById=function(t){var e={},i=function(t){t.forEach((function(t){if(t instanceof fe){var o=t;e[t.getUniqueId()]=o,i(o.getChildren())}}))};return t&&i(t),e},e.prototype.setupParentsIntoColumns=function(t,e){var i=this;t.forEach((function(t){if(t.setParent(e),t instanceof fe){var o=t;i.setupParentsIntoColumns(o.getChildren(),o)}}))},e=pi([ht("displayedGroupCreator")],e),e}(le),fi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),gi=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},yi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.componentsMappedByName={},e}return fi(e,t),e.prototype.setupComponents=function(t){var e=this;t&&t.forEach((function(t){return e.addComponent(t)}))},e.prototype.addComponent=function(t){var e=t.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.toUpperCase();this.componentsMappedByName[i]=t.componentClass},e.prototype.getComponentClass=function(t){return this.componentsMappedByName[t]},e=gi([ht("agStackComponentsRegistry")],e),e}(le);function _i(t,e,i){null==i||""==i?vi(t,e):mi(t,e,i)}function mi(t,e,i){t.setAttribute(bi(e),i.toString())}function vi(t,e){t.removeAttribute(bi(e))}function bi(t){return"aria-"+t}function Ci(t,e){e?t.setAttribute("role",e):t.removeAttribute("role")}function wi(t){var e;return e="asc"===t?"ascending":"desc"===t?"descending":"mixed"===t?"other":"none",e}function Si(t){return parseInt(t.getAttribute("aria-level"),10)}function Ei(t){return parseInt(t.getAttribute("aria-posinset"),10)}function xi(t){return t.getAttribute("aria-describedby")||""}function Oi(t,e){_i(t,"label",e)}function Ri(t,e){_i(t,"labelledby",e)}function Ii(t,e){_i(t,"description",e)}function Ti(t,e){_i(t,"describedby",e)}function Pi(t,e){_i(t,"live",e)}function Di(t,e){_i(t,"level",e)}function ki(t,e){_i(t,"disabled",e)}function Ai(t,e){_i(t,"hidden",e)}function Li(t,e){_i(t,"activedescendant",e)}function Mi(t,e){mi(t,"expanded",e)}function Fi(t){vi(t,"expanded")}function Ni(t,e){mi(t,"setsize",e)}function Vi(t,e){mi(t,"posinset",e)}function Bi(t,e){mi(t,"multiselectable",e)}function Gi(t,e){mi(t,"rowcount",e)}function ji(t,e){mi(t,"rowindex",e)}function Hi(t,e){mi(t,"colcount",e)}function $i(t,e){mi(t,"colindex",e)}function Wi(t,e){mi(t,"colspan",e)}function Ui(t,e){mi(t,"sort",e)}function zi(t){vi(t,"sort")}function Ki(t,e){_i(t,"selected",e)}function Yi(t,e){mi(t,"checked",void 0===e?"mixed":e)}function qi(t,e){_i(t,"controls",e.id),Ri(e,t.id)}function Xi(t,e){return void 0===e?t("ariaIndeterminate","indeterminate"):!0===e?t("ariaChecked","checked"):t("ariaUnchecked","unchecked")}var Qi,Ji,Zi,to,eo,io,oo,no,ro=Object.freeze({__proto__:null,setAriaRole:Ci,getAriaSortState:wi,getAriaLevel:Si,getAriaPosInSet:Ei,getAriaDescribedBy:xi,setAriaLabel:Oi,setAriaLabelledBy:Ri,setAriaDescription:Ii,setAriaDescribedBy:Ti,setAriaLive:Pi,setAriaLevel:Di,setAriaDisabled:ki,setAriaHidden:Ai,setAriaActiveDescendant:Li,setAriaExpanded:Mi,removeAriaExpanded:Fi,setAriaSetSize:Ni,setAriaPosInSet:Vi,setAriaMultiSelectable:Bi,setAriaRowCount:Gi,setAriaRowIndex:ji,setAriaColCount:Hi,setAriaColIndex:$i,setAriaColSpan:Wi,setAriaSort:Ui,removeAriaSort:zi,setAriaSelected:Ki,setAriaChecked:Yi,setAriaControls:qi,getAriaCheckboxStateName:Xi});function so(){return void 0===Qi&&(Qi=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Qi}function ao(){if(void 0===Ji)if(so()){var t=navigator.userAgent.match(/version\/(\d+)/i);t&&(Ji=null!=t[1]?parseFloat(t[1]):0)}else Ji=0;return Ji}function lo(){if(void 0===Zi){var t=window;Zi=!!t.chrome&&(!!t.chrome.webstore||!!t.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Zi}function uo(){return void 0===to&&(to=/(firefox)/i.test(navigator.userAgent)),to}function co(){return void 0===eo&&(eo=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),eo}function ho(){return void 0===io&&(io=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),io}function po(){return!so()||ao()>=15}function fo(t){if(!t)return null;var e=t.tabIndex,i=t.getAttribute("tabIndex");return-1!==e||null!==i&&(""!==i||uo())?e.toString():null}function go(){if(!document.body)return-1;var t=1e6,e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,i=document.createElement("div");document.body.appendChild(i);while(1){var o=2*t;if(i.style.height=o+"px",o>e||i.clientHeight!==o)break;t=o}return document.body.removeChild(i),t}function yo(){var t,e,i;return null!==(e=null===(t=document.body)||void 0===t?void 0:t.clientWidth)&&void 0!==e?e:window.innerHeight||(null===(i=document.documentElement)||void 0===i?void 0:i.clientWidth)||-1}function _o(){var t,e,i;return null!==(e=null===(t=document.body)||void 0===t?void 0:t.clientHeight)&&void 0!==e?e:window.innerHeight||(null===(i=document.documentElement)||void 0===i?void 0:i.clientHeight)||-1}function mo(){return null==no&&vo(),no}function vo(){var t=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",t.appendChild(e);var i=e.offsetWidth-e.clientWidth;0===i&&0===e.clientWidth&&(i=null),e.parentNode&&e.parentNode.removeChild(e),null!=i&&(no=i,oo=0===i)}function bo(){return null==oo&&vo(),oo}var Co=Object.freeze({__proto__:null,isBrowserSafari:so,getSafariVersion:ao,isBrowserChrome:lo,isBrowserFirefox:uo,isMacOsUserAgent:co,isIOSUserAgent:ho,browserSupportsPreventScroll:po,getTabIndex:fo,getMaxDivHeight:go,getBodyWidth:yo,getBodyHeight:_o,getScrollbarWidth:mo,isInvisibleScrollbar:bo});function wo(t,e){return t.toString().padStart(e,"0")}function So(t,e){for(var i=[],o=t;o<=e;o++)i.push(o);return i}function Eo(t){return"string"===typeof t&&(t=parseInt(t,10)),"number"===typeof t?Math.floor(t):null}function xo(t,e){for(var i="",o=0;o<e;o++)i+=String.fromCharCode(255&t),t>>>=8;return i}function Oo(t,e,i){return"number"!==typeof t?"":Ro(Math.round(100*t)/100,e,i)}function Ro(t,e,i){return"number"!==typeof t?"":t.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+e)}function Io(t){return null==t?null:t.reduce((function(t,e){return t+e}),0)}function To(t,e){return t>=0?t:e}function Po(t,e){var i=parseInt(t,10);return!isNaN(i)&&isFinite(i)&&i>0?i:e}var Do=Object.freeze({__proto__:null,padStartWidthZeros:wo,createArrayOfNumbers:So,cleanNumber:Eo,decToHex:xo,formatNumberTwoDecimalPlacesAndCommas:Oo,formatNumberCommas:Ro,sum:Io,zeroOrGreater:To,oneOrGreater:Po}),ko=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s};function Ao(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i="-"),!t)return null;var o=[t.getFullYear(),t.getMonth()+1,t.getDate()].map((function(t){return wo(t,2)})).join(i);return e&&(o+=" "+[t.getHours(),t.getMinutes(),t.getSeconds()].map((function(t){return wo(t,2)})).join(":")),o}var Lo=function(t){if(t>3&&t<21)return"th";var e=t%10;switch(e){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function Mo(t,e){void 0===e&&(e="YYYY-MM-DD");var i=wo(t.getFullYear(),4),o=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={YYYY:function(){return i.slice(i.length-4,i.length)},YY:function(){return i.slice(i.length-2,i.length)},Y:function(){return""+t.getFullYear()},MMMM:function(){return o[t.getMonth()]},MMM:function(){return o[t.getMonth()].slice(0,3)},MM:function(){return wo(t.getMonth()+1,2)},Mo:function(){return""+(t.getMonth()+1)+Lo(t.getMonth()+1)},M:function(){return""+(t.getMonth()+1)},Do:function(){return""+t.getDate()+Lo(t.getDate())},DD:function(){return wo(t.getDate(),2)},D:function(){return""+t.getDate()},dddd:function(){return n[t.getDay()]},ddd:function(){return n[t.getDay()].slice(0,3)},dd:function(){return n[t.getDay()].slice(0,2)},do:function(){return""+t.getDay()+Lo(t.getDay())},d:function(){return""+t.getDay()}},s=new RegExp(Object.keys(r).join("|"),"g");return e.replace(s,(function(t){return t in r?r[t]():t}))}function Fo(t){if(!t)return null;var e=ko(t.split(" "),2),i=e[0],o=e[1];if(!i)return null;var n=i.split("-").map((function(t){return parseInt(t,10)}));if(3!==n.filter((function(t){return!isNaN(t)})).length)return null;var r=ko(n,3),s=r[0],a=r[1],l=r[2],u=new Date(s,a-1,l);if(u.getFullYear()!==s||u.getMonth()!==a-1||u.getDate()!==l)return null;if(!o||"00:00:00"===o)return u;var c=ko(o.split(":").map((function(t){return parseInt(t,10)})),3),h=c[0],p=c[1],d=c[2];return h>=0&&h<24&&u.setHours(h),p>=0&&p<60&&u.setMinutes(p),d>=0&&d<60&&u.setSeconds(d),u}var No,Vo=Object.freeze({__proto__:null,serialiseDate:Ao,dateToFormattedString:Mo,parseDateTimeFromString:Fo}),Bo=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Go=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s};function jo(t,e,i){var o=t.parentElement,n=o&&o.firstChild;while(n)e&&n.classList.toggle(e,n===t),i&&n.classList.toggle(i,n!==t),n=n.nextSibling}var Ho="[tabindex], input, select, button, textarea, [href]",$o=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Wo(t){var e=Element.prototype.matches||Element.prototype.msMatchesSelector,i="input, select, button, textarea",o=e.call(t,i),n=e.call(t,$o),r=ln(t),s=o&&!n&&r;return s}function Uo(t,e,i){void 0===i&&(i={});var o=i.skipAriaHidden;t.classList.toggle("ag-hidden",!e),o||Ai(t,!e)}function zo(t,e,i){void 0===i&&(i={});var o=i.skipAriaHidden;t.classList.toggle("ag-invisible",!e),o||Ai(t,!e)}function Ko(t,e){var i="disabled",o=e?function(t){return t.setAttribute(i,"")}:function(t){return t.removeAttribute(i)};o(t),Pn(t.querySelectorAll("input"),(function(t){return o(t)}))}function Yo(t,e,i){var o=0;while(t){if(t.classList.contains(e))return!0;if(t=t.parentElement,"number"==typeof i){if(++o>i)break}else if(t===i)break}return!1}function qo(t){var e=window.getComputedStyle(t),i=e.height,o=e.width,n=e.borderTopWidth,r=e.borderRightWidth,s=e.borderBottomWidth,a=e.borderLeftWidth,l=e.paddingTop,u=e.paddingRight,c=e.paddingBottom,h=e.paddingLeft,p=e.marginTop,d=e.marginRight,f=e.marginBottom,g=e.marginLeft,y=e.boxSizing;return{height:parseFloat(i),width:parseFloat(o),borderTopWidth:parseFloat(n),borderRightWidth:parseFloat(r),borderBottomWidth:parseFloat(s),borderLeftWidth:parseFloat(a),paddingTop:parseFloat(l),paddingRight:parseFloat(u),paddingBottom:parseFloat(c),paddingLeft:parseFloat(h),marginTop:parseFloat(p),marginRight:parseFloat(d),marginBottom:parseFloat(f),marginLeft:parseFloat(g),boxSizing:y}}function Xo(t){var e=qo(t);return"border-box"===e.boxSizing?e.height-e.paddingTop-e.paddingBottom:e.height}function Qo(t){var e=qo(t);return"border-box"===e.boxSizing?e.width-e.paddingLeft-e.paddingRight:e.width}function Jo(t){var e=qo(t),i=e.marginBottom+e.marginTop;return Math.ceil(t.offsetHeight+i)}function Zo(t){var e=qo(t),i=e.marginLeft+e.marginRight;return Math.ceil(t.offsetWidth+i)}function tn(t){var e=t.getBoundingClientRect(),i=qo(t),o=i.borderTopWidth,n=i.borderLeftWidth,r=i.borderRightWidth,s=i.borderBottomWidth;return{top:e.top+(o||0),left:e.left+(n||0),right:e.right+(r||0),bottom:e.bottom+(s||0)}}function en(){if("boolean"===typeof No)return No;var t=document.createElement("div");return t.style.direction="rtl",t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="0px",t.style.overflow="hidden",t.dir="rtl",t.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(t),t.scrollLeft=1,No=0===Math.floor(t.scrollLeft),document.body.removeChild(t),No}function on(t,e){var i=t.scrollLeft;return e&&(i=Math.abs(i),lo()&&!en()&&(i=t.scrollWidth-t.clientWidth-i)),i}function nn(t,e,i){i&&(en()?e*=-1:(so()||lo())&&(e=t.scrollWidth-t.clientWidth-e)),t.scrollLeft=e}function rn(t){while(t&&t.firstChild)t.removeChild(t.firstChild)}function sn(t,e){an(t.querySelector(e))}function an(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function ln(t){return null!==t.offsetParent}function un(t){var e=document.createElement("div");return e.innerHTML=(t||"").trim(),e.firstChild}function cn(t,e){t.lastChild?t.insertAdjacentHTML("afterbegin",e):t.innerHTML=e}function hn(t,e){if(t.attributes&&t.attributes[e]){var i=t.attributes[e];return i.value}return null}function pn(t){return t&&t.clientHeight?t.clientHeight:0}function dn(t){return t&&t.clientWidth?t.clientWidth:0}function fn(t,e,i){if(!i||i.nextSibling!==e){var o=document.activeElement,n=e.contains(o);i?i.nextSibling?t.insertBefore(e,i.nextSibling):t.appendChild(e):t.firstChild&&t.firstChild!==e&&t.insertAdjacentElement("afterbegin",e),n&&o&&po()&&o.focus({preventScroll:!0})}}function gn(t,e){for(var i=0;i<e.length;i++){var o=e[i],n=t.children[i];n!==o&&t.insertBefore(o,n)}}function yn(t,e,i){i?i.insertAdjacentElement("afterend",e):t.firstChild?t.insertAdjacentElement("afterbegin",e):t.appendChild(e)}function _n(t,e){s(t.firstChild)?t.insertBefore(e,t.firstChild):t.appendChild(e)}function mn(t,e){var i,o;if(e)try{for(var n=Bo(Object.entries(e)),r=n.next();!r.done;r=n.next()){var s=Go(r.value,2),a=s[0],l=s[1];if(a&&a.length&&null!=l){var u=Re(a),c=l.toString(),h=c.replace(/\s*!important/g,""),p=h.length!=c.length?"important":void 0;t.style.setProperty(u,h,p)}}}catch(d){i={error:d}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(i)throw i.error}}}function vn(t){return t.clientWidth<t.scrollWidth}function bn(t){return t.clientHeight<t.scrollHeight}function Cn(t,e){"flex"===e?(t.style.removeProperty("width"),t.style.removeProperty("minWidth"),t.style.removeProperty("maxWidth"),t.style.flex="1 1 auto"):wn(t,e)}function wn(t,e){e=xn(e),t.style.width=e.toString(),t.style.maxWidth=e.toString(),t.style.minWidth=e.toString()}function Sn(t,e){"flex"===e?(t.style.removeProperty("height"),t.style.removeProperty("minHeight"),t.style.removeProperty("maxHeight"),t.style.flex="1 1 auto"):En(t,e)}function En(t,e){e=xn(e),t.style.height=e.toString(),t.style.maxHeight=e.toString(),t.style.minHeight=e.toString()}function xn(t){return"number"===typeof t?t+"px":t}function On(t){return t instanceof Node||t instanceof HTMLElement}function Rn(t){if(null==t)return[];var e=[];return Pn(t,(function(t){return e.push(t)})),e}function In(t,e){if(t)for(var i=0;i<t.length;i++){var o=t[i];e(o.name,o.value)}}function Tn(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i.toString())}function Pn(t,e){if(null!=t)for(var i=0;i<t.length;i++)e(t[i])}function Dn(t,e){t.then((function(t){var i=t.getGui();null!=i&&("object"===typeof i?e.appendChild(i):e.innerHTML=i)}))}var kn=Object.freeze({__proto__:null,radioCssClass:jo,FOCUSABLE_SELECTOR:Ho,FOCUSABLE_EXCLUDE:$o,isFocusableFormField:Wo,setDisplayed:Uo,setVisible:zo,setDisabled:Ko,isElementChildOfClass:Yo,getElementSize:qo,getInnerHeight:Xo,getInnerWidth:Qo,getAbsoluteHeight:Jo,getAbsoluteWidth:Zo,getElementRectWithOffset:tn,isRtlNegativeScroll:en,getScrollLeft:on,setScrollLeft:nn,clearElement:rn,removeElement:sn,removeFromParent:an,isVisible:ln,loadTemplate:un,appendHtml:cn,getElementAttribute:hn,offsetHeight:pn,offsetWidth:dn,ensureDomOrder:fn,setDomChildOrder:gn,insertWithDomOrder:yn,prependDC:_n,addStylesToElement:mn,isHorizontalScrollShowing:vn,isVerticalScrollShowing:bn,setElementWidth:Cn,setFixedWidth:wn,setElementHeight:Sn,setFixedHeight:En,formatSize:xn,isNodeOrElement:On,copyNodeList:Rn,iterateNamedNodeMap:In,addOrRemoveAttribute:Tn,nodeListForEach:Pn,bindCellRendererToHtmlElement:Dn}),An={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus"};function Ln(t,e,i){var o=Mn(t,e,i);if(o){var n=o.className;if("string"===typeof n&&n.indexOf("ag-icon")>-1||"object"===typeof n&&n["ag-icon"])return o}var r=document.createElement("span");return r.appendChild(o),r}function Mn(t,e,i,o){var n=null,r=i&&i.getColDef().icons;if(r&&(n=r[t]),e&&!n){var s=e.get("icons");s&&(n=s[t])}if(!n){var a=document.createElement("span"),l=An[t];return l||(o?l=t:(console.warn("AG Grid: Did not find icon "+t),l="")),a.setAttribute("class","ag-icon ag-icon-"+l),a.setAttribute("unselectable","on"),Ci(a,"presentation"),a}var u=void 0;if("function"===typeof n)u=n();else{if("string"!==typeof n)throw new Error("icon from grid options needs to be a string or a function");u=n}return"string"===typeof u?un(u):On(u)?u:void console.warn("AG Grid: iconRenderer should return back a string or a dom object")}var Fn=Object.freeze({__proto__:null,iconNameClassMap:An,createIcon:Ln,createIconNoSpan:Mn}),Nn=function(){function t(){}return t.BACKSPACE="Backspace",t.TAB="Tab",t.ENTER="Enter",t.ESCAPE="Escape",t.SPACE=" ",t.LEFT="ArrowLeft",t.UP="ArrowUp",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.DELETE="Delete",t.F2="F2",t.PAGE_UP="PageUp",t.PAGE_DOWN="PageDown",t.PAGE_HOME="Home",t.PAGE_END="End",t.A="KeyA",t.C="KeyC",t.D="KeyD",t.V="KeyV",t.X="KeyX",t.Y="KeyY",t.Z="KeyZ",t}(),Vn=65,Bn=67,Gn=86,jn=68,Hn=90,$n=89;function Wn(t){if(t.altKey||t.ctrlKey||t.metaKey)return!1;var e=1===t.key.length;return e}function Un(t,e,i,o,n){var r=o?o.getColDef().suppressKeyboardEvent:void 0;if(!r)return!1;var s={event:e,editing:n,column:o,api:t.api,node:i,data:i.data,colDef:o.getColDef(),context:t.context,columnApi:t.columnApi};if(r){var a=r(s);if(a)return!0}return!1}function zn(t,e,i,o){var n=o.getDefinition(),r=n&&n.suppressHeaderKeyboardEvent;if(!s(r))return!1;var a={api:t.api,columnApi:t.columnApi,context:t.context,colDef:n,column:o,headerRowIndex:i,event:e};return!!r(a)}function Kn(t){var e,i=t.keyCode;switch(i){case Vn:e=Nn.A;break;case Bn:e=Nn.C;break;case Gn:e=Nn.V;break;case jn:e=Nn.D;break;case Hn:e=Nn.Z;break;case $n:e=Nn.Y;break;default:e=t.code}return e}function Yn(t,e){return void 0===e&&(e=!1),t===Nn.DELETE||!e&&t===Nn.BACKSPACE&&co()}var qn=Object.freeze({__proto__:null,isEventFromPrintableCharacter:Wn,isUserSuppressingKeyboardEvent:Un,isUserSuppressingHeaderKeyboardEvent:zn,normaliseQwertyAzerty:Kn,isDeleteKey:Yn});function Xn(t,e,i){if(0===i)return!1;var o=Math.abs(t.clientX-e.clientX),n=Math.abs(t.clientY-e.clientY);return Math.max(o,n)<=i}var Qn=Object.freeze({__proto__:null,areEventsNear:Xn});function Jn(t,e){if(!t)return!1;for(var i,o,n=function(t,i){var o=e[t.id],n=e[i.id],r=void 0!==o,s=void 0!==n,a=r&&s,l=!r&&!s;return a?o-n:l?t.__objectId-i.__objectId:r?1:-1},r=!1,s=0;s<t.length-1;s++)if(i=t[s],o=t[s+1],n(i,o)>0){r=!0;break}return!!r&&(t.sort(n),!0)}function Zn(t,e){var i=[];function o(t){t&&t.forEach((function(t){if(t.group||t.hasChildren()){i.push(t.key);var n=i.join("|");e(t,n),o(t.childrenAfterGroup),i.pop()}}))}o(t)}var tr=Object.freeze({__proto__:null,sortRowNodesByOrder:Jn,traverseNodesWithKey:Zn});function er(t){var e=new Set;return t.forEach((function(t){return e.add(t)})),e}var ir,or=Object.freeze({__proto__:null,convertToSet:er}),nr=function(){return nr=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},nr.apply(this,arguments)},rr=nr(nr(nr(nr(nr(nr(nr(nr(nr(nr(nr(nr(nr(nr(nr(nr(nr(nr({},ro),Yt),Co),Vo),kn),se),et),Ue),_),Fn),qn),ke),Qn),Do),V),tr),or),Ie),sr=rr,ar=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=1),this.nextValue=t,this.step=e}return t.prototype.next=function(){var t=this.nextValue;return this.nextValue+=this.step,t},t.prototype.peek=function(){return this.nextValue},t.prototype.skip=function(t){this.nextValue+=t},t}();(function(t){t[t["IN_PROGRESS"]=0]="IN_PROGRESS",t[t["RESOLVED"]=1]="RESOLVED"})(ir||(ir={}));var lr,ur,cr=function(){function t(t){var e=this;this.status=ir.IN_PROGRESS,this.resolution=null,this.waiters=[],t((function(t){return e.onDone(t)}),(function(t){return e.onReject(t)}))}return t.all=function(e){return new t((function(t){var i=e.length,o=new Array(i);e.forEach((function(e,n){e.then((function(e){o[n]=e,i--,0===i&&t(o)}))}))}))},t.resolve=function(e){return void 0===e&&(e=null),new t((function(t){return t(e)}))},t.prototype.then=function(e){var i=this;return new t((function(t){i.status===ir.RESOLVED?t(e(i.resolution)):i.waiters.push((function(i){return t(e(i))}))}))},t.prototype.resolveNow=function(t,e){return this.status===ir.RESOLVED?e(this.resolution):t},t.prototype.onDone=function(t){this.status=ir.RESOLVED,this.resolution=t,this.waiters.forEach((function(e){return e(t)}))},t.prototype.onReject=function(t){console.warn("TBI")},t}(),hr=(function(){function t(){this.timestamp=(new Date).getTime()}t.prototype.print=function(t){var e=(new Date).getTime()-this.timestamp;console.info(t+" = "+e),this.timestamp=(new Date).getTime()}}(),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}()),pr=function(){return pr=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},pr.apply(this,arguments)},dr=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};(function(t){t[t["NOTHING"]=0]="NOTHING",t[t["WAITING_TO_SHOW"]=1]="WAITING_TO_SHOW",t[t["SHOWING"]=2]="SHOWING"})(lr||(lr={})),function(t){t[t["HOVER"]=0]="HOVER",t[t["FOCUS"]=1]="FOCUS"}(ur||(ur={}));var fr=function(t){function e(e,i,o){var n=t.call(this)||this;return n.parentComp=e,n.tooltipShowDelayOverride=i,n.tooltipHideDelayOverride=o,n.DEFAULT_SHOW_TOOLTIP_DELAY=2e3,n.DEFAULT_HIDE_TOOLTIP_DELAY=1e4,n.SHOW_QUICK_TOOLTIP_DIFF=1e3,n.FADE_OUT_TOOLTIP_TIMEOUT=1e3,n.INTERACTIVE_HIDE_DELAY=100,n.interactionEnabled=!1,n.isInteractingWithTooltip=!1,n.state=lr.NOTHING,n.tooltipInstanceCount=0,n.tooltipMouseTrack=!1,n}return hr(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.is("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipShowDelay=this.getTooltipDelay("show"),this.tooltipHideDelay=this.getTooltipDelay("hide"),this.tooltipMouseTrack=this.gridOptionsService.is("tooltipMouseTrack");var t=this.parentComp.getGui();this.tooltipTrigger===ur.HOVER&&(this.addManagedListener(t,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(t,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===ur.FOCUS&&(this.addManagedListener(t,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(t,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(t,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(t,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)))},e.prototype.getGridOptionsTooltipDelay=function(t){var e=this.gridOptionsService.getNum(t);if(s(e))return e<0&&G((function(){return console.warn("AG Grid: "+t+" should not be lower than 0")}),t+"Warn"),Math.max(200,e)},e.prototype.getTooltipDelay=function(t){var e,i,o,n;return"show"===t?null!==(i=null!==(e=this.getGridOptionsTooltipDelay("tooltipShowDelay"))&&void 0!==e?e:this.tooltipShowDelayOverride)&&void 0!==i?i:this.DEFAULT_SHOW_TOOLTIP_DELAY:null!==(n=null!==(o=this.getGridOptionsTooltipDelay("tooltipHideDelay"))&&void 0!==o?o:this.tooltipHideDelayOverride)&&void 0!==n?n:this.DEFAULT_HIDE_TOOLTIP_DELAY},e.prototype.destroy=function(){this.setToDoNothing(),t.prototype.destroy.call(this)},e.prototype.getTooltipTrigger=function(){var t=this.gridOptionsService.get("tooltipTrigger");return t&&"hover"!==t?ur.FOCUS:ur.HOVER},e.prototype.onMouseEnter=function(t){var i=this;this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),ho()||(e.isLocked?this.showTooltipTimeoutId=window.setTimeout((function(){i.prepareToShowTooltip(t)}),this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(t))},e.prototype.onMouseMove=function(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===lr.SHOWING&&this.tooltipComp&&this.positionTooltip()},e.prototype.onMouseDown=function(){this.setToDoNothing()},e.prototype.onMouseLeave=function(){this.interactionEnabled?this.lockService():this.setToDoNothing()},e.prototype.onFocusIn=function(){this.prepareToShowTooltip()},e.prototype.onFocusOut=function(t){var e,i=t.relatedTarget,o=this.parentComp.getGui(),n=null===(e=this.tooltipComp)||void 0===e?void 0:e.getGui();this.isInteractingWithTooltip||o.contains(i)||this.interactionEnabled&&(null===n||void 0===n?void 0:n.contains(i))||this.setToDoNothing()},e.prototype.onKeyDown=function(){this.setToDoNothing()},e.prototype.prepareToShowTooltip=function(t){if(this.state!=lr.NOTHING||e.isLocked)return!1;var i=0;return t&&(i=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=lr.WAITING_TO_SHOW,!0},e.prototype.isLastTooltipHiddenRecently=function(){var t=(new Date).getTime(),i=e.lastTooltipHideTime;return t-i<this.SHOW_QUICK_TOOLTIP_DIFF},e.prototype.setToDoNothing=function(){this.state===lr.SHOWING&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=lr.NOTHING,this.lastMouseEvent=null},e.prototype.showTooltip=function(){var t=pr({},this.parentComp.getTooltipParams());if(s(t.value)){this.state=lr.SHOWING,this.tooltipInstanceCount++;var e=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount),i=this.userComponentFactory.getTooltipCompDetails(t);i.newAgStackInstance().then(e)}else this.setToDoNothing()},e.prototype.hideTooltip=function(t){if(t||!this.isInteractingWithTooltip){this.tooltipComp&&(this.destroyTooltipComp(),e.lastTooltipHideTime=(new Date).getTime());var i={type:ge.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(i),this.state=lr.NOTHING}},e.prototype.newTooltipComponentCallback=function(t,e){var i=this.state!==lr.SHOWING||this.tooltipInstanceCount!==t;if(i)this.getContext().destroyBean(e);else{var o=e.getGui();this.tooltipComp=e,o.classList.contains("ag-tooltip")||o.classList.add("ag-tooltip-custom"),this.tooltipTrigger===ur.HOVER&&o.classList.add("ag-tooltip-animate"),this.interactionEnabled&&o.classList.add("ag-tooltip-interactive");var n=this.localeService.getLocaleTextFunc(),r=this.popupService.addPopup({eChild:o,ariaLabel:n("ariaLabelTooltip","Tooltip")});r&&(this.tooltipPopupDestroyFunc=r.hideFunc),this.positionTooltip(),this.tooltipTrigger===ur.FOCUS&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,ge.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,ge.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===ur.HOVER?(this.tooltipMouseEnterListener=this.addManagedListener(o,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(o,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(o,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(o,"focusout",this.onTooltipFocusOut.bind(this))||null));var s={type:ge.EVENT_TOOLTIP_SHOW,tooltipGui:o,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(s),this.startHideTimeout()}},e.prototype.onTooltipMouseEnter=function(){this.isInteractingWithTooltip=!0,this.unlockService()},e.prototype.onTooltipMouseLeave=function(){this.isInteractingWithTooltip=!1,this.lockService()},e.prototype.onTooltipFocusIn=function(){this.isInteractingWithTooltip=!0},e.prototype.onTooltipFocusOut=function(t){var e,i=this.parentComp.getGui(),o=null===(e=this.tooltipComp)||void 0===e?void 0:e.getGui(),n=t.relatedTarget;(null===o||void 0===o?void 0:o.contains(n))||(this.isInteractingWithTooltip=!1,i.contains(n)?this.startHideTimeout():this.hideTooltip())},e.prototype.positionTooltip=function(){var t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(pr(pr({},t),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(pr(pr({},t),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))},e.prototype.destroyTooltipComp=function(){var t=this;this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");var e=this.tooltipPopupDestroyFunc,i=this.tooltipComp,o=this.tooltipTrigger===ur.HOVER?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout((function(){e(),t.getContext().destroyBean(i)}),o),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},e.prototype.clearTooltipListeners=function(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach((function(t){t&&t()})),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null},e.prototype.lockService=function(){var t=this;e.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout((function(){t.unlockService(),t.setToDoNothing()}),this.INTERACTIVE_HIDE_DELAY)},e.prototype.unlockService=function(){e.isLocked=!1,this.clearInteractiveTimeout()},e.prototype.startHideTimeout=function(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.tooltipHideDelay)},e.prototype.clearShowTimeout=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)},e.prototype.clearHideTimeout=function(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},e.prototype.clearInteractiveTimeout=function(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)},e.prototype.clearTimeouts=function(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()},e.isLocked=!1,dr([pt("popupService")],e.prototype,"popupService",void 0),dr([pt("userComponentFactory")],e.prototype,"userComponentFactory",void 0),dr([ut],e.prototype,"postConstruct",null),e}(le),gr=function(){function t(t){this.cssClassStates={},this.getGui=t}return t.prototype.addCssClass=function(t){var e=this,i=(t||"").split(" ");if(i.length>1)i.forEach((function(t){return e.addCssClass(t)}));else{var o=!0!==this.cssClassStates[t];if(o&&t.length){var n=this.getGui();n&&n.classList.add(t),this.cssClassStates[t]=!0}}},t.prototype.removeCssClass=function(t){var e=this,i=(t||"").split(" ");if(i.length>1)i.forEach((function(t){return e.removeCssClass(t)}));else{var o=!1!==this.cssClassStates[t];if(o&&t.length){var n=this.getGui();n&&n.classList.remove(t),this.cssClassStates[t]=!1}}},t.prototype.containsCssClass=function(t){var e=this.getGui();return!!e&&e.classList.contains(t)},t.prototype.addOrRemoveCssClass=function(t,e){var i=this;if(t){if(t.indexOf(" ")>=0){var o=(t||"").split(" ");if(o.length>1)return void o.forEach((function(t){return i.addOrRemoveCssClass(t,e)}))}var n=this.cssClassStates[t]!==e;if(n&&t.length){var r=this.getGui();r&&r.classList.toggle(t,e),this.cssClassStates[t]=e}}},t}(),yr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),_r=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},mr=new ar,vr=function(t){function e(e){var i=t.call(this)||this;return i.displayed=!0,i.visible=!0,i.compId=mr.next(),i.cssClassManager=new gr((function(){return i.eGui})),e&&i.setTemplate(e),i}return yr(e,t),e.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsService.is("enableBrowserTooltips")},e.prototype.getCompId=function(){return this.compId},e.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},e.prototype.setTooltip=function(t,e,i){var o=this,n=function(){o.usingBrowserTooltips?o.getGui().removeAttribute("title"):o.tooltipFeature=o.destroyBean(o.tooltipFeature)},r=function(){o.usingBrowserTooltips?o.getGui().setAttribute("title",o.tooltipText):o.tooltipFeature=o.createBean(new fr(o,e,i))};this.tooltipText!=t&&(this.tooltipText&&n(),null!=t&&(this.tooltipText=t,this.tooltipText&&r()))},e.prototype.createChildComponentsFromTags=function(t,e){var i=this,o=Rn(t.childNodes);o.forEach((function(o){if(o instanceof HTMLElement){var n=i.createComponentFromElement(o,(function(t){var e=t.getGui();e&&i.copyAttributesFromNode(o,t.getGui())}),e);if(n){if(n.addItems&&o.children.length){i.createChildComponentsFromTags(o,e);var r=Array.prototype.slice.call(o.children);n.addItems(r)}i.swapComponentForNode(n,t,o)}else o.childNodes&&i.createChildComponentsFromTags(o,e)}}))},e.prototype.createComponentFromElement=function(t,i,o){var n=t.nodeName,r=o?o[t.getAttribute("ref")]:void 0,s=this.agStackComponentsRegistry.getComponentClass(n);if(s){e.elementGettingCreated=t;var a=new s(r);return a.setParentComponent(this),this.createBean(a,null,i),a}return null},e.prototype.copyAttributesFromNode=function(t,e){In(t.attributes,(function(t,i){return e.setAttribute(t,i)}))},e.prototype.swapComponentForNode=function(t,e,i){var o=t.getGui();e.replaceChild(o,i),e.insertBefore(document.createComment(i.nodeName),o),this.addDestroyFunc(this.destroyBean.bind(this,t)),this.swapInComponentForQuerySelectors(t,i)},e.prototype.swapInComponentForQuerySelectors=function(t,e){var i=this;this.iterateOverQuerySelectors((function(o){i[o.attributeName]===e&&(i[o.attributeName]=t)}))},e.prototype.iterateOverQuerySelectors=function(t){var e=Object.getPrototypeOf(this);while(null!=e){var i=e.__agComponentMetaData,o=j(e.constructor);i&&i[o]&&i[o].querySelectors&&i[o].querySelectors.forEach((function(e){return t(e)})),e=Object.getPrototypeOf(e)}},e.prototype.activateTabIndex=function(t){var e=this.gridOptionsService.getNum("tabIndex")||0;t||(t=[]),t.length||t.push(this.getGui()),t.forEach((function(t){return t.setAttribute("tabindex",e.toString())}))},e.prototype.setTemplate=function(t,e){var i=un(t);this.setTemplateFromElement(i,e)},e.prototype.setTemplateFromElement=function(t,e){this.eGui=t,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),e)},e.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},e.prototype.wireQuerySelectors=function(){var t=this;if(this.eGui){var e=this;this.iterateOverQuerySelectors((function(i){var o=function(t){return e[i.attributeName]=t},n=i.refSelector&&t.getAttribute("ref")===i.refSelector;if(n)o(t.eGui);else{var r=t.eGui.querySelector(i.querySelector);r&&o(r.__agComponent||r)}}))}},e.prototype.getGui=function(){return this.eGui},e.prototype.getFocusableElement=function(){return this.eGui},e.prototype.getAriaElement=function(){return this.getFocusableElement()},e.prototype.setParentComponent=function(t){this.parentComponent=t},e.prototype.getParentComponent=function(){return this.parentComponent},e.prototype.setGui=function(t){this.eGui=t},e.prototype.queryForHtmlElement=function(t){return this.eGui.querySelector(t)},e.prototype.queryForHtmlInputElement=function(t){return this.eGui.querySelector(t)},e.prototype.appendChild=function(t,e){if(null!=t)if(e||(e=this.eGui),On(t))e.appendChild(t);else{var i=t;e.appendChild(i.getGui())}},e.prototype.isDisplayed=function(){return this.displayed},e.prototype.setVisible=function(t,e){if(void 0===e&&(e={}),t!==this.visible){this.visible=t;var i=e.skipAriaHidden;zo(this.eGui,t,{skipAriaHidden:i})}},e.prototype.setDisplayed=function(t,i){if(void 0===i&&(i={}),t!==this.displayed){this.displayed=t;var o=i.skipAriaHidden;Uo(this.eGui,t,{skipAriaHidden:o});var n={type:e.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(n)}},e.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);var e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),t.prototype.destroy.call(this)},e.prototype.addGuiEventListener=function(t,e,i){var o=this;this.eGui.addEventListener(t,e,i),this.addDestroyFunc((function(){return o.eGui.removeEventListener(t,e)}))},e.prototype.addCssClass=function(t){this.cssClassManager.addCssClass(t)},e.prototype.removeCssClass=function(t){this.cssClassManager.removeCssClass(t)},e.prototype.containsCssClass=function(t){return this.cssClassManager.containsCssClass(t)},e.prototype.addOrRemoveCssClass=function(t,e){this.cssClassManager.addOrRemoveCssClass(t,e)},e.prototype.getAttribute=function(t){var e=this.eGui;return e?e.getAttribute(t):null},e.prototype.getRefElement=function(t){return this.queryForHtmlElement('[ref="'+t+'"]')},e.EVENT_DISPLAYED_CHANGED="displayedChanged",_r([pt("agStackComponentsRegistry")],e.prototype,"agStackComponentsRegistry",void 0),_r([lt],e.prototype,"preConstructOnComponent",null),_r([lt],e.prototype,"createChildComponentsPreConstruct",null),e}(le);function br(t){return Cr.bind(this,"[ref="+t+"]",t)}function Cr(t,e,i,o,n){null!==t?"number"!==typeof n?wr(i,"querySelectors",{attributeName:o,querySelector:t,refSelector:e}):console.error("AG Grid: QuerySelector should be on an attribute"):console.error("AG Grid: QuerySelector selector should not be null")}function wr(t,e,i){var o=Sr(t,j(t.constructor));o[e]||(o[e]=[]),o[e].push(i)}function Sr(t,e){return t.__agComponentMetaData||(t.__agComponentMetaData={}),t.__agComponentMetaData[e]||(t.__agComponentMetaData[e]={}),t.__agComponentMetaData[e]}var Er=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),xr=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Or=function(t){function e(){return t.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this}return Er(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){this.params=t;var e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(e+" "+i("ariaFilterInput","Filter Input"))},e.prototype.onParentModelChanged=function(t){var e=this;t?this.params.parentFilterInstance((function(i){if(i.getModelAsString){var o=i.getModelAsString(t);e.eFloatingFilterText.setValue(o)}})):this.eFloatingFilterText.setValue("")},e.prototype.onParamsUpdated=function(t){this.init(t)},xr([br("eFloatingFilterText")],e.prototype,"eFloatingFilterText",void 0),xr([pt("columnModel")],e.prototype,"columnModel",void 0),e}(vr),Rr=function(){function t(t,e,i,o){var n=this;this.alive=!0,this.context=t,this.eParent=o;var r=e.getDateCompDetails(i),s=r.newAgStackInstance();s.then((function(e){n.alive?(n.dateComp=e,e&&(o.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached(),n.tempValue&&e.setDate(n.tempValue),null!=n.disabled&&n.setDateCompDisabled(n.disabled))):t.destroyBean(e)}))}return t.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},t.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},t.prototype.setDate=function(t){this.dateComp?this.dateComp.setDate(t):this.tempValue=t},t.prototype.setDisabled=function(t){this.dateComp?this.setDateCompDisabled(t):this.disabled=t},t.prototype.setDisplayed=function(t){Uo(this.eParent,t)},t.prototype.setInputPlaceholder=function(t){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(t)},t.prototype.setInputAriaLabel=function(t){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(t)},t.prototype.afterGuiAttached=function(t){this.dateComp&&"function"===typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(t)},t.prototype.updateParams=function(t){var e;(null===(e=this.dateComp)||void 0===e?void 0:e.onParamsUpdated)&&"function"===typeof this.dateComp.onParamsUpdated&&this.dateComp.onParamsUpdated(t)},t.prototype.setDateCompDisabled=function(t){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(t)},t}(),Ir=function(){function t(){this.customFilterOptions={}}return t.prototype.init=function(t,e){this.filterOptions=t.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(t)},t.prototype.getFilterOptions=function(){return this.filterOptions},t.prototype.mapCustomOptions=function(){var t=this;this.filterOptions&&this.filterOptions.forEach((function(e){if("string"!==typeof e){var i=[["displayKey"],["displayName"],["predicate","test"]],o=function(t){return!!t.some((function(t){return null!=e[t]}))||(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '"+t+"'"),!1)};i.every(o)?t.customFilterOptions[e.displayKey]=e:t.filterOptions=t.filterOptions.filter((function(t){return t===e}))||[]}}))},t.prototype.selectDefaultItem=function(t){if(t.defaultOption)this.defaultOption=t.defaultOption;else if(this.filterOptions.length>=1){var e=this.filterOptions[0];"string"===typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},t.prototype.getDefaultOption=function(){return this.defaultOption},t.prototype.getCustomOption=function(t){return this.customFilterOptions[t]},t}(),Tr={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},Pr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Dr=function(){return Dr=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Dr.apply(this,arguments)},kr=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ar=function(t){function e(e,i){void 0===i&&(i={});var o=t.call(this)||this;return o.eFocusableElement=e,o.callbacks=i,o.callbacks=Dr({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(t){if(!t.defaultPrevented){var e=o.focusService.findNextFocusableElement(o.eFocusableElement,!1,t.shiftKey);e&&(e.focus(),t.preventDefault())}}},i),o}return Pr(e,t),e.prototype.postConstruct=function(){this.eFocusableElement.classList.add(e.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},e.prototype.addKeyDownListeners=function(t){var e=this;this.addManagedListener(t,"keydown",(function(t){t.defaultPrevented||Zt(t)||(e.callbacks.shouldStopEventPropagation(t)?Jt(t):t.key===Nn.TAB?e.callbacks.onTabKeyDown(t):e.callbacks.handleKeyDown&&e.callbacks.handleKeyDown(t))}))},e.FOCUS_MANAGED_CLASS="ag-focus-managed",kr([pt("focusService")],e.prototype,"focusService",void 0),kr([ut],e.prototype,"postConstruct",null),e}(le),Lr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Mr=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Fr="ag-resizer-wrapper",Nr='<div class="'+Fr+'">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>',Vr=function(t){function e(e,i){var o=t.call(this)||this;return o.element=e,o.dragStartPosition={x:0,y:0},o.position={x:0,y:0},o.lastSize={width:-1,height:-1},o.positioned=!1,o.resizersAdded=!1,o.resizeListeners=[],o.boundaryEl=null,o.isResizing=!1,o.isMoving=!1,o.resizable={},o.movable=!1,o.currentResizer=null,o.config=Object.assign({},{popup:!1},i),o}return Lr(e,t),e.prototype.center=function(){var t=this.offsetParent,e=t.clientHeight,i=t.clientWidth,o=i/2-this.getWidth()/2,n=e/2-this.getHeight()/2;this.offsetElement(o,n)},e.prototype.initialisePosition=function(){if(!this.positioned){var t=this.config,e=t.centered,i=t.forcePopupParentAsOffsetParent,o=t.minWidth,n=t.width,r=t.minHeight,s=t.height,a=t.x,l=t.y;this.offsetParent||this.setOffsetParent();var u=0,c=0,h=!!this.element.offsetParent;if(h){var p=this.findBoundaryElement(),d=window.getComputedStyle(p);if(null!=d.minWidth){var f=p.offsetWidth-this.element.offsetWidth;c=parseInt(d.minWidth,10)-f}if(null!=d.minHeight){var g=p.offsetHeight-this.element.offsetHeight;u=parseInt(d.minHeight,10)-g}}if(this.minHeight=r||u,this.minWidth=o||c,n&&this.setWidth(n),s&&this.setHeight(s),n&&s||this.refreshSize(),e)this.center();else if(a||l)this.offsetElement(a,l);else if(h&&i){p=this.boundaryEl;var y=!0;if(p||(p=this.findBoundaryElement(),y=!1),p){var _=parseFloat(p.style.top),m=parseFloat(p.style.left);y?this.offsetElement(isNaN(m)?0:m,isNaN(_)?0:_):this.setPosition(m,_)}}this.positioned=!!this.offsetParent}},e.prototype.isPositioned=function(){return this.positioned},e.prototype.getPosition=function(){return this.position},e.prototype.setMovable=function(t,e){if(this.config.popup&&t!==this.movable){this.movable=t;var i=this.moveElementDragListener||{eElement:e,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};t?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}},e.prototype.setResizable=function(t){var e=this;if(this.clearResizeListeners(),t?this.addResizers():this.removeResizers(),"boolean"===typeof t){if(!1===t)return;t={topLeft:t,top:t,topRight:t,right:t,bottomRight:t,bottom:t,bottomLeft:t,left:t}}Object.keys(t).forEach((function(i){var o=t,n=!!o[i],r=e.getResizerElement(i),s={dragStartPixels:0,eElement:r,onDragStart:function(t){return e.onResizeStart(t,i)},onDragging:e.onResize.bind(e),onDragStop:function(t){return e.onResizeEnd(t,i)}};(n||!e.isAlive()&&!n)&&(n?(e.dragService.addDragSource(s),e.resizeListeners.push(s),r.style.pointerEvents="all"):r.style.pointerEvents="none",e.resizable[i]=n)}))},e.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},e.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var t=this.lastSize,e=t.height,i=t.width;-1!==i&&(this.element.style.width=i+"px"),-1!==e&&(this.element.style.height=e+"px")},e.prototype.getHeight=function(){return this.element.offsetHeight},e.prototype.setHeight=function(t){var e=this.config.popup,i=this.element,o=!1;if("string"===typeof t&&-1!==t.indexOf("%"))En(i,t),t=Jo(i),o=!0;else if(t=Math.max(this.minHeight,t),this.positioned){var n=this.getAvailableHeight();n&&t>n&&(t=n)}this.getHeight()!==t&&(o?(i.style.maxHeight="unset",i.style.minHeight="unset"):e?En(i,t):(i.style.height=t+"px",i.style.flex="0 0 auto",this.lastSize.height="number"===typeof t?t:parseFloat(t)))},e.prototype.getAvailableHeight=function(){var t=this.config,e=t.popup,i=t.forcePopupParentAsOffsetParent;this.positioned||this.initialisePosition();var o=this.offsetParent.clientHeight;if(!o)return null;var n=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),s=e?this.position.y:n.top,a=e?0:r.top,l=0;if(i){var u=this.element.parentElement;if(u){var c=u.getBoundingClientRect().bottom;l=c-n.bottom}}var h=o+a-s-l;return h},e.prototype.getWidth=function(){return this.element.offsetWidth},e.prototype.setWidth=function(t){var e=this.element,i=this.config.popup,o=!1;if("string"===typeof t&&-1!==t.indexOf("%"))wn(e,t),t=Zo(e),o=!0;else if(this.positioned){t=Math.max(this.minWidth,t);var n=this.offsetParent.clientWidth,r=i?this.position.x:this.element.getBoundingClientRect().left;n&&t+r>n&&(t=n-r)}this.getWidth()!==t&&(o?(e.style.maxWidth="unset",e.style.minWidth="unset"):this.config.popup?wn(e,t):(e.style.width=t+"px",e.style.flex=" unset",this.lastSize.width="number"===typeof t?t:parseFloat(t)))},e.prototype.offsetElement=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=this.config.forcePopupParentAsOffsetParent,o=i?this.boundaryEl:this.element;o&&(this.popupService.positionPopup({ePopup:o,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:function(){return{x:t,y:e}}}),this.setPosition(parseFloat(o.style.left),parseFloat(o.style.top)))},e.prototype.constrainSizeToAvailableHeight=function(t){var e=this;if(this.config.forcePopupParentAsOffsetParent){var i=function(){var t=e.getAvailableHeight();e.element.style.setProperty("max-height",t+"px")};t?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),i):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}},e.prototype.setPosition=function(t,e){this.position.x=t,this.position.y=e},e.prototype.updateDragStartPosition=function(t,e){this.dragStartPosition={x:t,y:e}},e.prototype.calculateMouseMovement=function(t){var e=t.e,i=t.isLeft,o=t.isTop,n=t.anywhereWithin,r=t.topBuffer,s=e.clientX-this.dragStartPosition.x,a=e.clientY-this.dragStartPosition.y,l=this.shouldSkipX(e,!!i,!!n,s)?0:s,u=this.shouldSkipY(e,!!o,r,a)?0:a;return{movementX:l,movementY:u}},e.prototype.shouldSkipX=function(t,e,i,o){var n=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:n.left,l=a<=0&&r.left>=t.clientX||r.right<=t.clientX&&r.right<=s.right;return!!l||(l=e?o<0&&t.clientX>a+r.left||o>0&&t.clientX<a+r.left:i?o<0&&t.clientX>s.right||o>0&&t.clientX<a+r.left:o<0&&t.clientX>s.right||o>0&&t.clientX<s.right,l)},e.prototype.shouldSkipY=function(t,e,i,o){void 0===i&&(i=0);var n=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:n.top,l=a<=0&&r.top>=t.clientY||r.bottom<=t.clientY&&r.bottom<=s.bottom;return!!l||(l=e?o<0&&t.clientY>a+r.top+i||o>0&&t.clientY<a+r.top:o<0&&t.clientY>s.bottom||o>0&&t.clientY<s.bottom,l)},e.prototype.createResizeMap=function(){var t=this.element;this.resizerMap={topLeft:{element:t.querySelector("[ref=eTopLeftResizer]")},top:{element:t.querySelector("[ref=eTopResizer]")},topRight:{element:t.querySelector("[ref=eTopRightResizer]")},right:{element:t.querySelector("[ref=eRightResizer]")},bottomRight:{element:t.querySelector("[ref=eBottomRightResizer]")},bottom:{element:t.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:t.querySelector("[ref=eBottomLeftResizer]")},left:{element:t.querySelector("[ref=eLeftResizer]")}}},e.prototype.addResizers=function(){if(!this.resizersAdded){var t=this.element;if(t){var e=new DOMParser,i=e.parseFromString(Nr,"text/html").body;t.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},e.prototype.removeResizers=function(){this.resizerMap=void 0;var t=this.element.querySelector("."+Fr);t&&this.element.removeChild(t),this.resizersAdded=!1},e.prototype.getResizerElement=function(t){return this.resizerMap[t].element},e.prototype.onResizeStart=function(t,e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!e.match(/top/i),isRight:!!e.match(/right/i),isBottom:!!e.match(/bottom/i),isLeft:!!e.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[e].element.classList.add("ag-active");var i=this.config,o=i.popup,n=i.forcePopupParentAsOffsetParent;o||n||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(t.clientX,t.clientY)},e.prototype.getSiblings=function(){var t=this.element,e=t.parentElement;return e?Array.prototype.slice.call(e.children).filter((function(t){return!t.classList.contains("ag-hidden")})):null},e.prototype.getMinSizeOfSiblings=function(){for(var t=this.getSiblings()||[],e=0,i=0,o=0;o<t.length;o++){var n=t[o],r=!!n.style.flex&&"0 0 auto"!==n.style.flex;if(n!==this.element){var s=this.minHeight||0,a=this.minWidth||0;if(r){var l=window.getComputedStyle(n);l.minHeight&&(s=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else s=n.offsetHeight,a=n.offsetWidth;e+=s,i+=a}}return{height:e,width:i}},e.prototype.applySizeToSiblings=function(t){var e=null,i=this.getSiblings();if(i){for(var o=0;o<i.length;o++){var n=i[o];n!==e&&(t?n.style.height=n.offsetHeight+"px":n.style.width=n.offsetWidth+"px",n.style.flex="0 0 auto",n===this.element&&(e=i[o+1]))}e&&(e.style.removeProperty("height"),e.style.removeProperty("min-height"),e.style.removeProperty("max-height"),e.style.flex="1 1 auto")}},e.prototype.isResizable=function(){return Object.values(this.resizable).some((function(t){return t}))},e.prototype.onResize=function(t){if(this.isResizing&&this.currentResizer){var e=this.config,i=e.popup,o=e.forcePopupParentAsOffsetParent,n=this.currentResizer,r=n.isTop,s=n.isRight,a=n.isBottom,l=n.isLeft,u=s||l,c=a||r,h=this.calculateMouseMovement({e:t,isLeft:l,isTop:r}),p=h.movementX,d=h.movementY,f=this.position.x,g=this.position.y,y=0,_=0;if(u&&p){var m=l?-1:1,v=this.getWidth(),b=v+p*m,C=!1;l&&(y=v-b,(f+y<=0||b<=this.minWidth)&&(C=!0,y=0)),C||this.setWidth(b)}if(c&&d){m=r?-1:1;var w=this.getHeight(),S=w+d*m,E=!1;r?(_=w-S,(g+_<=0||S<=this.minHeight)&&(E=!0,_=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&w<S&&this.getMinSizeOfSiblings().height+S>this.element.parentElement.offsetHeight&&(E=!0),E||this.setHeight(S)}this.updateDragStartPosition(t.clientX,t.clientY),((i||o)&&y||_)&&this.offsetElement(f+y,g+_)}},e.prototype.onResizeEnd=function(t,e){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var i={type:"resize",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi};this.element.classList.remove("ag-resizing"),this.resizerMap[e].element.classList.remove("ag-active"),this.dispatchEvent(i)},e.prototype.refreshSize=function(){var t=this.element;this.config.popup&&(this.config.width||this.setWidth(t.offsetWidth),this.config.height||this.setHeight(t.offsetHeight))},e.prototype.onMoveStart=function(t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(t.clientX,t.clientY)},e.prototype.onMove=function(t){if(this.isMoving){var e,i=this.position,o=i.x,n=i.y;this.config.calculateTopBuffer&&(e=this.config.calculateTopBuffer());var r=this.calculateMouseMovement({e:t,isTop:!0,anywhereWithin:!0,topBuffer:e}),s=r.movementX,a=r.movementY;this.offsetElement(o+s,n+a),this.updateDragStartPosition(t.clientX,t.clientY)}},e.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")},e.prototype.setOffsetParent=function(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent},e.prototype.findBoundaryElement=function(){var t=this.element;while(t){if("static"!==window.getComputedStyle(t).position)return t;t=t.parentElement}return this.element},e.prototype.clearResizeListeners=function(){while(this.resizeListeners.length){var t=this.resizeListeners.pop();this.dragService.removeDragSource(t)}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()},Mr([pt("popupService")],e.prototype,"popupService",void 0),Mr([pt("resizeObserverService")],e.prototype,"resizeObserverService",void 0),Mr([pt("dragService")],e.prototype,"dragService",void 0),e}(le),Br=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Gr=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},jr=function(t){function e(e){var i=t.call(this)||this;return i.filterNameKey=e,i.applyActive=!1,i.hidePopup=null,i.debouncePending=!1,i.appliedModel=null,i}return Br(e,t),e.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new Ar(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Vr(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},e.prototype.handleKeyDown=function(t){},e.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},e.prototype.isFilterActive=function(){return!!this.appliedModel},e.prototype.resetTemplate=function(t){var e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit);var i='\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'+this.getCssIdentifier()+'-body-wrapper" ref="eFilterBody">\n                    '+this.createBodyTemplate()+"\n                </div>\n            </form>";this.setTemplate(i,t),e=this.getGui(),e&&e.addEventListener("submit",this.onFormSubmit)},e.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},e.prototype.init=function(t){var e=this;this.setParams(t),this.resetUiToDefaults(!0).then((function(){e.updateUiVisibility(),e.setupOnBtApplyDebounce()}))},e.prototype.setParams=function(t){this.providedFilterParams=t,this.applyActive=e.isUseApplyButton(t),this.createButtonPanel()},e.prototype.createButtonPanel=function(){var t=this,e=this.providedFilterParams.buttons;if(!(!e||e.length<1||this.isReadOnly())){var i=document.createElement("div");i.classList.add("ag-filter-apply-panel");var o=function(e){var o,n;switch(e){case"apply":o=t.translate("applyFilter"),n=function(e){return t.onBtApply(!1,!1,e)};break;case"clear":o=t.translate("clearFilter"),n=function(){return t.onBtClear()};break;case"reset":o=t.translate("resetFilter"),n=function(){return t.onBtReset()};break;case"cancel":o=t.translate("cancelFilter"),n=function(e){t.onBtCancel(e)};break;default:return void console.warn("AG Grid: Unknown button type specified")}var r="apply"===e?"submit":"button",s=un('<button\n                    type="'+r+'"\n                    ref="'+e+'FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >'+o+"\n                </button>");i.appendChild(s),t.addManagedListener(s,"click",n)};er(e).forEach((function(t){return o(t)})),this.getGui().appendChild(i)}},e.prototype.getDefaultDebounceMs=function(){return 0},e.prototype.setupOnBtApplyDebounce=function(){var t=this,i=e.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),o=Y(this.checkApplyDebounce.bind(this),i);this.onBtApplyDebounce=function(){t.debouncePending=!0,o()}},e.prototype.checkApplyDebounce=function(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())},e.prototype.getModel=function(){return this.appliedModel?this.appliedModel:null},e.prototype.setModel=function(t){var e=this,i=null!=t?this.setModelIntoUi(t):this.resetUiToDefaults();return i.then((function(){e.updateUiVisibility(),e.applyModel("api")}))},e.prototype.onBtCancel=function(t){var e=this;this.resetUiToActiveModel(this.getModel(),(function(){e.handleCancelEnd(t)}))},e.prototype.handleCancelEnd=function(t){this.providedFilterParams.closeOnApply&&this.close(t)},e.prototype.resetUiToActiveModel=function(t,e){var i=this,o=function(){i.onUiChanged(!1,"prevent"),null===e||void 0===e||e()};null!=t?this.setModelIntoUi(t).then(o):this.resetUiToDefaults().then(o)},e.prototype.onBtClear=function(){var t=this;this.resetUiToDefaults().then((function(){return t.onUiChanged()}))},e.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},e.prototype.applyModel=function(t){var e=this.getModelFromUi();if(!this.isModelValid(e))return!1;var i=this.appliedModel;return this.appliedModel=e,!this.areModelsEqual(i,e)},e.prototype.isModelValid=function(t){return!0},e.prototype.onFormSubmit=function(t){t.preventDefault()},e.prototype.onBtApply=function(t,e,i){if(void 0===t&&(t=!1),void 0===e&&(e=!1),i&&i.preventDefault(),this.applyModel(e?"rowDataUpdated":"ui")){var o="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter:t,afterDataChange:e,source:o})}var n=this.providedFilterParams.closeOnApply;n&&this.applyActive&&!t&&!e&&this.close(i)},e.prototype.onNewRowsLoaded=function(){},e.prototype.close=function(t){if(this.hidePopup){var e,i=t,o=i&&i.key;"Enter"!==o&&"Space"!==o||(e={keyboardEvent:i}),this.hidePopup(e),this.hidePopup=null}},e.prototype.onUiChanged=function(t,e){if(void 0===t&&(t=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){var i=this.isModelValid(this.getModelFromUi());Ko(this.getRefElement("applyFilterButton"),!i)}t&&!e||"immediately"===e?this.onBtApply(t):(this.applyActive||e)&&"debounce"!==e||this.onBtApplyDebounce()},e.prototype.afterGuiAttached=function(t){t&&(this.hidePopup=t.hidePopup),this.refreshFilterResizer(null===t||void 0===t?void 0:t.container)},e.prototype.refreshFilterResizer=function(t){if(this.positionableFeature&&"toolPanel"!==t){var e="floatingFilter"===t,i=this,o=i.positionableFeature,n=i.gridOptionsService;e?(o.restoreLastSize(),o.setResizable(n.is("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}},e.prototype.afterGuiDetached=function(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)},e.getDebounceMs=function(t,i){return e.isUseApplyButton(t)?(null!=t.debounceMs&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):null!=t.debounceMs?t.debounceMs:i},e.isUseApplyButton=function(t){return!!t.buttons&&t.buttons.indexOf("apply")>=0},e.prototype.destroy=function(){var e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),t.prototype.destroy.call(this)},e.prototype.translate=function(t){var e=this.localeService.getLocaleTextFunc();return e(t,Tr[t])},e.prototype.getCellValue=function(t){var e=this.providedFilterParams,i=e.api,o=e.colDef,n=e.column,r=e.columnApi,s=e.context;return this.providedFilterParams.valueGetter({api:i,colDef:o,column:n,columnApi:r,context:s,data:t.data,getValue:function(e){return t.data[e]},node:t})},e.prototype.getPositionableElement=function(){return this.eFilterBody},Gr([pt("rowModel")],e.prototype,"rowModel",void 0),Gr([br("eFilterBody")],e.prototype,"eFilterBody",void 0),Gr([ut],e.prototype,"postConstruct",null),e}(vr),Hr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),$r=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Wr=function(t){function e(e,i){var o=t.call(this,i)||this;return o.labelSeparator="",o.labelAlignment="left",o.disabled=!1,o.label="",o.config=e||{},o}return Hr(e,t),e.prototype.postConstruct=function(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");var t=this.config,e=t.labelSeparator,i=t.label,o=t.labelWidth,n=t.labelAlignment;null!=e&&this.setLabelSeparator(e),null!=i&&this.setLabel(i),null!=o&&this.setLabelWidth(o),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()},e.prototype.refreshLabel=function(){rn(this.eLabel),"string"===typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(Uo(this.eLabel,!1),Ci(this.eLabel,"presentation")):(Uo(this.eLabel,!0),Ci(this.eLabel,null))},e.prototype.setLabelSeparator=function(t){return this.labelSeparator===t||(this.labelSeparator=t,null!=this.label&&this.refreshLabel()),this},e.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-"+this.getCompId()+"-label",this.eLabel.id},e.prototype.getLabel=function(){return this.label},e.prototype.setLabel=function(t){return this.label===t||(this.label=t,this.refreshLabel()),this},e.prototype.setLabelAlignment=function(t){var e=this.getGui(),i=e.classList;return i.toggle("ag-label-align-left","left"===t),i.toggle("ag-label-align-right","right"===t),i.toggle("ag-label-align-top","top"===t),this},e.prototype.setLabelEllipsis=function(t){return this.eLabel.classList.toggle("ag-label-ellipsis",t),this},e.prototype.setLabelWidth=function(t){return null==this.label||Cn(this.eLabel,t),this},e.prototype.setDisabled=function(t){t=!!t;var e=this.getGui();return Ko(e,t),e.classList.toggle("ag-disabled",t),this.disabled=t,this},e.prototype.isDisabled=function(){return!!this.disabled},$r([ut],e.prototype,"postConstruct",null),e}(vr),Ur=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),zr=function(t){function e(e,i,o){var n=t.call(this,e,i)||this;return n.className=o,n}return Ur(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.className&&this.addCssClass(this.className)},e.prototype.onValueChange=function(t){var e=this;return this.addManagedListener(this,ge.EVENT_FIELD_VALUE_CHANGED,(function(){return t(e.getValue())})),this},e.prototype.getWidth=function(){return this.getGui().clientWidth},e.prototype.setWidth=function(t){return wn(this.getGui(),t),this},e.prototype.getPreviousValue=function(){return this.previousValue},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t,e){return this.value===t||(this.previousValue=this.value,this.value=t,e||this.dispatchEvent({type:ge.EVENT_FIELD_VALUE_CHANGED})),this},e}(Wr),Kr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Yr=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},qr='\n    <div class="ag-picker-field" role="presentation">\n        <div ref="eLabel"></div>\n            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n            <div ref="eDisplayField" class="ag-picker-field-display"></div>\n            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n        </div>\n    </div>',Xr=function(t){function e(e){var i=t.call(this,e,(null===e||void 0===e?void 0:e.template)||qr,null===e||void 0===e?void 0:e.className)||this;if(i.isPickerDisplayed=!1,i.skipClick=!1,i.pickerGap=4,i.hideCurrentPicker=null,i.ariaRole=null===e||void 0===e?void 0:e.ariaRole,i.onPickerFocusIn=i.onPickerFocusIn.bind(i),i.onPickerFocusOut=i.onPickerFocusOut.bind(i),!e)return i;var o=e.pickerGap,n=e.maxPickerHeight,r=e.variableWidth,s=e.minPickerWidth,a=e.maxPickerWidth;return null!=o&&(i.pickerGap=o),i.variableWidth=!!r,null!=n&&i.setPickerMaxHeight(n),null!=s&&i.setPickerMinWidth(s),null!=a&&i.setPickerMaxWidth(a),i}return Kr(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.setupAria();var e="ag-"+this.getCompId()+"-display";this.eDisplayField.setAttribute("id",e);var i=this.getAriaElement();Ti(i,e),this.addManagedListener(i,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));var o=this.config.pickerIcon;if(o){var n=Mn(o,this.gridOptionsService);n&&this.eIcon.appendChild(n)}},e.prototype.setupAria=function(){var t=this.getAriaElement();t.setAttribute("tabindex",(this.gridOptionsService.getNum("tabIndex")||0).toString()),Mi(t,!1),this.ariaRole&&Ci(t,this.ariaRole)},e.prototype.refreshLabel=function(){var e,i=this.getAriaElement();Ri(i,null!==(e=this.getLabelId())&&void 0!==e?e:""),t.prototype.refreshLabel.call(this)},e.prototype.onLabelOrWrapperMouseDown=function(t){t&&(t.preventDefault(),this.getFocusableElement().focus()),this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())},e.prototype.onKeyDown=function(t){switch(t.key){case Nn.UP:case Nn.DOWN:case Nn.ENTER:case Nn.SPACE:t.preventDefault(),this.onLabelOrWrapperMouseDown();break;case Nn.ESCAPE:this.isPickerDisplayed&&(t.preventDefault(),t.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}},e.prototype.showPicker=function(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());var t=this.pickerComponent.getGui();t.addEventListener("focusin",this.onPickerFocusIn),t.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)},e.prototype.renderAndPositionPicker=function(){var t=this,e=this.gridOptionsService.getDocument(),i=this.pickerComponent.getGui();this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(e.body,"wheel",(function(e){i.contains(e.target)||t.hidePicker()})));var o=this.localeService.getLocaleTextFunc(),n=this.config,r=n.pickerType,s=n.pickerAriaLabelKey,a=n.pickerAriaLabelValue,l=n.modalPicker,u=void 0===l||l,c={modal:u,eChild:i,closeOnEsc:!0,closedCallback:function(){var i=e.activeElement===e.body;t.beforeHidePicker(),i&&t.isAlive()&&t.getFocusableElement().focus()},ariaLabel:o(s,a)},h=this.popupService.addPopup(c),p=this,d=p.maxPickerHeight,f=p.minPickerWidth,g=p.maxPickerWidth,y=p.pickerGap,_=p.variableWidth;_?(f&&(i.style.minWidth=f),i.style.width=xn(Zo(this.eWrapper)),g&&(i.style.maxWidth=g)):Cn(i,null!==g&&void 0!==g?g:Zo(this.eWrapper));var m=null!==d&&void 0!==d?d:Xo(this.popupService.getPopupParent())+"px";i.style.setProperty("max-height",m),i.style.position="absolute";var v=this.gridOptionsService.is("enableRtl")?"right":"left";return this.popupService.positionPopupByComponent({type:r,eventSource:this.eWrapper,ePopup:i,position:"under",alignSide:v,keepWithinBounds:!0,nudgeY:y}),h.hideFunc},e.prototype.beforeHidePicker=function(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);var t=this.pickerComponent.getGui();t.removeEventListener("focusin",this.onPickerFocusIn),t.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null},e.prototype.toggleExpandedStyles=function(t){if(this.isAlive()){var e=this.getAriaElement();Mi(e,t),this.eWrapper.classList.toggle("ag-picker-expanded",t),this.eWrapper.classList.toggle("ag-picker-collapsed",!t)}},e.prototype.onPickerFocusIn=function(){this.togglePickerHasFocus(!0)},e.prototype.onPickerFocusOut=function(t){var e;(null===(e=this.pickerComponent)||void 0===e?void 0:e.getGui().contains(t.relatedTarget))||this.togglePickerHasFocus(!1)},e.prototype.togglePickerHasFocus=function(t){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",t)},e.prototype.hidePicker=function(){this.hideCurrentPicker&&this.hideCurrentPicker()},e.prototype.setAriaLabel=function(t){return Oi(this.getAriaElement(),t),this},e.prototype.setInputWidth=function(t){return Cn(this.eWrapper,t),this},e.prototype.getFocusableElement=function(){return this.eWrapper},e.prototype.setPickerGap=function(t){return this.pickerGap=t,this},e.prototype.setPickerMinWidth=function(t){return"number"===typeof t&&(t+="px"),this.minPickerWidth=null==t?void 0:t,this},e.prototype.setPickerMaxWidth=function(t){return"number"===typeof t&&(t+="px"),this.maxPickerWidth=null==t?void 0:t,this},e.prototype.setPickerMaxHeight=function(t){return"number"===typeof t&&(t+="px"),this.maxPickerHeight=null==t?void 0:t,this},e.prototype.destroy=function(){this.hidePicker(),t.prototype.destroy.call(this)},Yr([pt("popupService")],e.prototype,"popupService",void 0),Yr([br("eLabel")],e.prototype,"eLabel",void 0),Yr([br("eWrapper")],e.prototype,"eWrapper",void 0),Yr([br("eDisplayField")],e.prototype,"eDisplayField",void 0),Yr([br("eIcon")],e.prototype,"eIcon",void 0),e}(zr),Qr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Jr=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Zr=function(t){function e(e){void 0===e&&(e="default");var i=t.call(this,'<div class="ag-list ag-'+e+'-list" role="listbox"></div>')||this;return i.cssIdentifier=e,i.options=[],i.itemEls=[],i}return Qr(e,t),e.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},e.prototype.handleKeyDown=function(t){var e=t.key;switch(e){case Nn.ENTER:if(this.highlightedEl){var i=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(i)}else this.setValue(this.getValue());break;case Nn.DOWN:case Nn.UP:var o=e===Nn.DOWN,n=void 0;if(t.preventDefault(),this.highlightedEl){var r=this.itemEls.indexOf(this.highlightedEl),s=r+(o?1:-1);s=Math.min(Math.max(s,0),this.itemEls.length-1),n=this.itemEls[s]}else n=this.itemEls[o?0:this.itemEls.length-1];this.highlightItem(n);break}},e.prototype.addOptions=function(t){var e=this;return t.forEach((function(t){return e.addOption(t)})),this},e.prototype.addOption=function(t){var e=t.value,i=t.text,o=xe(i||e);return this.options.push({value:e,text:o}),this.renderOption(e,o),this.updateIndices(),this},e.prototype.updateIndices=function(){var t=this.getGui().querySelectorAll(".ag-list-item");t.forEach((function(e,i){Vi(e,i+1),Ni(e,t.length)}))},e.prototype.renderOption=function(t,e){var i=this,o=document.createElement("div");Ci(o,"option"),o.classList.add("ag-list-item","ag-"+this.cssIdentifier+"-list-item"),o.innerHTML="<span>"+e+"</span>",o.tabIndex=-1,this.itemEls.push(o),this.addManagedListener(o,"mouseover",(function(){return i.highlightItem(o)})),this.addManagedListener(o,"mouseleave",(function(){return i.clearHighlighted()})),this.addManagedListener(o,"click",(function(){return i.setValue(t)})),this.getGui().appendChild(o)},e.prototype.setValue=function(t,e){if(this.value===t)return this.fireItemSelected(),this;if(null==t)return this.reset(),this;var i=this.options.findIndex((function(e){return e.value===t}));if(-1!==i){var o=this.options[i];this.value=o.value,this.displayValue=null!=o.text?o.text:o.value,this.highlightItem(this.itemEls[i]),e||this.fireChangeEvent()}return this},e.prototype.setValueByIndex=function(t){return this.setValue(this.options[t].value)},e.prototype.getValue=function(){return this.value},e.prototype.getDisplayValue=function(){return this.displayValue},e.prototype.refreshHighlighted=function(){var t=this;this.clearHighlighted();var e=this.options.findIndex((function(e){return e.value===t.value}));-1!==e&&this.highlightItem(this.itemEls[e])},e.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},e.prototype.highlightItem=function(t){t.offsetParent&&(this.clearHighlighted(),this.highlightedEl=t,this.highlightedEl.classList.add(e.ACTIVE_CLASS),Ki(this.highlightedEl,!0),this.highlightedEl.focus())},e.prototype.clearHighlighted=function(){this.highlightedEl&&this.highlightedEl.offsetParent&&(this.highlightedEl.classList.remove(e.ACTIVE_CLASS),Ki(this.highlightedEl,!1),this.highlightedEl=null)},e.prototype.fireChangeEvent=function(){this.dispatchEvent({type:ge.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()},e.prototype.fireItemSelected=function(){this.dispatchEvent({type:e.EVENT_ITEM_SELECTED})},e.EVENT_ITEM_SELECTED="selectedItem",e.ACTIVE_CLASS="ag-active-item",Jr([ut],e.prototype,"init",null),e}(vr),ts=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),es=function(){return es=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},es.apply(this,arguments)},is=function(t){function e(e){return t.call(this,es({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"listbox"},e))||this}return ts(e,t),e.prototype.postConstruct=function(){var e;t.prototype.postConstruct.call(this),this.createListComponent(),this.eWrapper.tabIndex=null!==(e=this.gridOptionsService.getNum("tabIndex"))&&void 0!==e?e:0},e.prototype.createListComponent=function(){var t=this;this.listComponent=this.createBean(new Zr("select")),this.listComponent.setParentComponent(this),this.listComponent.addGuiEventListener("keydown",(function(e){e.key===Nn.TAB&&(e.preventDefault(),e.stopImmediatePropagation(),t.getGui().dispatchEvent(new KeyboardEvent("keydown",{key:e.key,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,bubbles:!0})))})),this.listComponent.addManagedListener(this.listComponent,Zr.EVENT_ITEM_SELECTED,(function(){t.hidePicker(),t.dispatchEvent({type:e.EVENT_ITEM_SELECTED})})),this.listComponent.addManagedListener(this.listComponent,ge.EVENT_FIELD_VALUE_CHANGED,(function(){t.listComponent&&(t.setValue(t.listComponent.getValue(),!1,!0),t.hidePicker())}))},e.prototype.createPickerComponent=function(){return this.listComponent},e.prototype.showPicker=function(){this.listComponent&&(t.prototype.showPicker.call(this),this.listComponent.refreshHighlighted())},e.prototype.addOptions=function(t){var e=this;return t.forEach((function(t){return e.addOption(t)})),this},e.prototype.addOption=function(t){return this.listComponent.addOption(t),this},e.prototype.setValue=function(e,i,o){if(this.value===e||!this.listComponent)return this;o||this.listComponent.setValue(e,!0);var n=this.listComponent.getValue();return n===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),t.prototype.setValue.call(this,e,i))},e.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),t.prototype.destroy.call(this)},e.EVENT_ITEM_SELECTED="selectedItem",e}(Xr),os=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ns=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},rs=function(t){function e(e,i,o,n){void 0===o&&(o="text"),void 0===n&&(n="input");var r=t.call(this,e,'\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'+n+' ref="eInput" class="ag-input-field-input"></'+n+">\n                </div>\n            </div>",i)||this;return r.inputType=o,r.displayFieldTag=n,r}return os(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.setInputType(),this.eLabel.classList.add(this.className+"-label"),this.eWrapper.classList.add(this.className+"-input-wrapper"),this.eInput.classList.add(this.className+"-input"),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-"+this.getCompId()+"-input";var e=this.config,i=e.width,o=e.value;null!=i&&this.setWidth(i),null!=o&&this.setValue(o),this.addInputListeners(),this.activateTabIndex([this.eInput])},e.prototype.refreshLabel=function(){s(this.getLabel())?Ri(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),t.prototype.refreshLabel.call(this)},e.prototype.addInputListeners=function(){var t=this;this.addManagedListener(this.eInput,"input",(function(e){return t.setValue(e.target.value)}))},e.prototype.setInputType=function(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)},e.prototype.getInputElement=function(){return this.eInput},e.prototype.setInputWidth=function(t){return Cn(this.eWrapper,t),this},e.prototype.setInputName=function(t){return this.getInputElement().setAttribute("name",t),this},e.prototype.getFocusableElement=function(){return this.eInput},e.prototype.setMaxLength=function(t){var e=this.eInput;return e.maxLength=t,this},e.prototype.setInputPlaceholder=function(t){return Tn(this.eInput,"placeholder",t),this},e.prototype.setInputAriaLabel=function(t){return Oi(this.eInput,t),this},e.prototype.setDisabled=function(e){return Ko(this.eInput,e),t.prototype.setDisabled.call(this,e)},e.prototype.setAutoComplete=function(t){if(!0===t)Tn(this.eInput,"autocomplete",null);else{var e="string"===typeof t?t:"off";Tn(this.eInput,"autocomplete",e)}return this},ns([br("eLabel")],e.prototype,"eLabel",void 0),ns([br("eWrapper")],e.prototype,"eWrapper",void 0),ns([br("eInput")],e.prototype,"eInput",void 0),e}(zr),ss=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),as=function(t){function e(e,i,o){void 0===i&&(i="ag-checkbox"),void 0===o&&(o="checkbox");var n=t.call(this,e,i,o)||this;return n.labelAlignment="right",n.selected=!1,n.readOnly=!1,n.passive=!1,n}return ss(e,t),e.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},e.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},e.prototype.setPassive=function(t){this.passive=t},e.prototype.isReadOnly=function(){return this.readOnly},e.prototype.setReadOnly=function(t){this.eWrapper.classList.toggle("ag-disabled",t),this.eInput.disabled=t,this.readOnly=t},e.prototype.setDisabled=function(e){return this.eWrapper.classList.toggle("ag-disabled",e),t.prototype.setDisabled.call(this,e)},e.prototype.toggle=function(){if(!this.eInput.disabled){var t=this.isSelected(),e=this.getNextValue();this.passive?this.dispatchChange(e,t):this.setValue(e)}},e.prototype.getValue=function(){return this.isSelected()},e.prototype.setValue=function(t,e){return this.refreshSelectedClass(t),this.setSelected(t,e),this},e.prototype.setName=function(t){var e=this.getInputElement();return e.name=t,this},e.prototype.isSelected=function(){return this.selected},e.prototype.setSelected=function(t,e){this.isSelected()!==t&&(this.previousValue=this.isSelected(),t=this.selected="boolean"===typeof t?t:void 0,this.eInput.checked=t,this.eInput.indeterminate=void 0===t,e||this.dispatchChange(this.selected,this.previousValue))},e.prototype.dispatchChange=function(t,e,i){this.dispatchEvent({type:ge.EVENT_FIELD_VALUE_CHANGED,selected:t,previousValue:e,event:i});var o=this.getInputElement(),n={type:ge.EVENT_CHECKBOX_CHANGED,id:o.id,name:o.name,selected:t,previousValue:e};this.eventService.dispatchEvent(n)},e.prototype.onCheckboxClick=function(t){if(!this.passive&&!this.eInput.disabled){var e=this.isSelected(),i=this.selected=t.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,e,t)}},e.prototype.refreshSelectedClass=function(t){this.eWrapper.classList.toggle("ag-checked",!0===t),this.eWrapper.classList.toggle("ag-indeterminate",null==t)},e}(rs),ls=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),us=function(t){function e(e){return t.call(this,e,"ag-radio-button","radio")||this}return ls(e,t),e.prototype.isSelected=function(){return this.eInput.checked},e.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},e.prototype.addInputListeners=function(){t.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,ge.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},e.prototype.onChange=function(t){t.selected&&t.name&&this.eInput.name&&this.eInput.name===t.name&&t.id&&this.eInput.id!==t.id&&this.setValue(!1,!0)},e}(as),cs=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),hs=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},ps=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},ds=function(){function t(t,e,i){this.localeService=t,this.optionsFactory=e,this.valueFormatter=i}return t.prototype.getModelAsString=function(t){var e=this;if(!t)return null;var i=null!=t.operator,o=this.localeService.getLocaleTextFunc();if(i){var n=t,r=n.conditions;if(!r){var s=n.condition1,a=n.condition2;r=[s,a]}var l=r.map((function(t){return e.getModelAsString(t)})),u="AND"===n.operator?"andCondition":"orCondition";return l.join(" "+o(u,Tr[u])+" ")}if(t.type===fs.BLANK||t.type===fs.NOT_BLANK)return o(t.type,t.type);var c=t,h=this.optionsFactory.getCustomOption(c.type),p=h||{},d=p.displayKey,f=p.displayName,g=p.numberOfInputs;return d&&f&&0===g?(o(d,f),f):this.conditionToString(c,h)},t.prototype.updateParams=function(t){this.optionsFactory=t.optionsFactory},t.prototype.formatValue=function(t){var e;return this.valueFormatter?null!==(e=this.valueFormatter(null!==t&&void 0!==t?t:null))&&void 0!==e?e:"":String(t)},t}(),fs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eTypes=[],e.eJoinOperatorPanels=[],e.eJoinOperatorsAnd=[],e.eJoinOperatorsOr=[],e.eConditionBodies=[],e.listener=function(){return e.onUiChanged()},e.lastUiCompletePosition=null,e.joinOperatorId=0,e}return cs(e,t),e.prototype.getNumberOfInputs=function(t){var i=this.optionsFactory.getCustomOption(t);if(i){var o=i.numberOfInputs;return null!=o?o:1}var n=[e.EMPTY,e.NOT_BLANK,e.BLANK];return t&&n.indexOf(t)>=0?0:t===e.IN_RANGE?2:1},e.prototype.onFloatingFilterChanged=function(t,e){this.setTypeFromFloatingFilter(t),this.setValueFromFloatingFilter(e),this.onUiChanged(!0)},e.prototype.setTypeFromFloatingFilter=function(t){var e=this;this.eTypes.forEach((function(i,o){0===o?i.setValue(t,!0):i.setValue(e.optionsFactory.getDefaultOption(),!0)}))},e.prototype.getModelFromUi=function(){var t=this.getUiCompleteConditions();return 0===t.length?null:this.maxNumConditions>1&&t.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:t[0],condition2:t[1],conditions:t}:t[0]},e.prototype.getConditionTypes=function(){return this.eTypes.map((function(t){return t.getValue()}))},e.prototype.getConditionType=function(t){return this.eTypes[t].getValue()},e.prototype.getJoinOperator=function(){return 0===this.eJoinOperatorsOr.length?this.defaultJoinOperator:!0===this.eJoinOperatorsOr[0].getValue()?"OR":"AND"},e.prototype.areModelsEqual=function(t,e){var i=this;if(!t&&!e)return!0;if(!t&&e||t&&!e)return!1;var o,n=!t.operator,r=!e.operator,s=!n&&r||n&&!r;if(s)return!1;if(n){var a=t,l=e;o=this.areSimpleModelsEqual(a,l)}else{var u=t,c=e;o=u.operator===c.operator&&kt(u.conditions,c.conditions,(function(t,e){return i.areSimpleModelsEqual(t,e)}))}return o},e.prototype.setModelIntoUi=function(t){var e=this,i=t.operator;if(i){var o=t;o.conditions||(o.conditions=[o.condition1,o.condition2]);var n=this.validateAndUpdateConditions(o.conditions),r=this.getNumConditions();if(n<r)this.removeConditionsAndOperators(n);else if(n>r)for(var s=r;s<n;s++)this.createJoinOperatorPanel(),this.createOption();var a="OR"===o.operator;this.eJoinOperatorsAnd.forEach((function(t){return t.setValue(!a,!0)})),this.eJoinOperatorsOr.forEach((function(t){return t.setValue(a,!0)})),o.conditions.forEach((function(t,i){e.eTypes[i].setValue(t.type,!0),e.setConditionIntoUi(t,i)}))}else{var l=t;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(l.type,!0),this.setConditionIntoUi(l,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),cr.resolve()},e.prototype.validateAndUpdateConditions=function(t){var e=t.length;return e>this.maxNumConditions&&(t.splice(this.maxNumConditions),G((function(){return console.warn('AG Grid: Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.')}),"simpleFilterSetModelMaxNumConditions"),e=this.maxNumConditions),e},e.prototype.doesFilterPass=function(t){var e,i=this,o=this.getModel();if(null==o)return!0;var n=o.operator,r=[];if(n){var s=o;r.push.apply(r,ps([],hs(null!==(e=s.conditions)&&void 0!==e?e:[])))}else r.push(o);var a=n&&"OR"===n?"some":"every";return r[a]((function(e){return i.individualConditionPasses(t,e)}))},e.prototype.setParams=function(e){t.prototype.setParams.call(this,e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new Ir,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")},e.prototype.setNumConditions=function(t){var e,i;null!=t.suppressAndOrCondition&&G((function(){return console.warn('AG Grid: Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.')}),"simpleFilterSuppressAndOrCondition"),null!=t.alwaysShowBothConditions&&G((function(){return console.warn('AG Grid: Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.')}),"simpleFilterAlwaysShowBothConditions"),this.maxNumConditions=null!==(e=t.maxNumConditions)&&void 0!==e?e:t.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(G((function(){return console.warn('AG Grid: "filterParams.maxNumConditions" must be greater than or equal to zero.')}),"simpleFilterMaxNumConditions"),this.maxNumConditions=1),this.numAlwaysVisibleConditions=null!==(i=t.numAlwaysVisibleConditions)&&void 0!==i?i:t.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(G((function(){return console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.')}),"simpleFilterNumAlwaysVisibleConditions"),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(G((function(){return console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".')}),"simpleFilterNumAlwaysVisibleGreaterThanMaxNumConditions"),this.numAlwaysVisibleConditions=this.maxNumConditions)},e.prototype.createOption=function(){var t=this,e=this.createManagedBean(new is);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());var i=this.createValueElement();this.eConditionBodies.push(i),this.eFilterBody.appendChild(i),this.putOptionsIntoDropdown(e),this.resetType(e);var o=this.getNumConditions()-1;this.forEachPositionInput(o,(function(e){return t.resetInput(e)})),this.addChangedListeners(e,o)},e.prototype.createJoinOperatorPanel=function(){var t=document.createElement("div");this.eJoinOperatorPanels.push(t),t.classList.add("ag-filter-condition");var e=this.createJoinOperator(this.eJoinOperatorsAnd,t,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,t,"or");this.eFilterBody.appendChild(t);var o=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(e,o,n),this.resetJoinOperatorOr(i,o,n),this.isReadOnly()||(e.onValueChange(this.listener),i.onValueChange(this.listener))},e.prototype.createJoinOperator=function(t,e,i){var o=this.createManagedBean(new us);return t.push(o),o.addCssClass("ag-filter-condition-operator"),o.addCssClass("ag-filter-condition-operator-"+i),e.appendChild(o.getGui()),o},e.prototype.getDefaultJoinOperator=function(t){return"AND"===t||"OR"===t?t:"AND"},e.prototype.createFilterListOptions=function(){var t=this,e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map((function(e){return"string"===typeof e?t.createBoilerplateListOption(e):t.createCustomListOption(e)}))},e.prototype.putOptionsIntoDropdown=function(t){this.filterListOptions.forEach((function(e){t.addOption(e)})),t.setDisabled(this.filterListOptions.length<=1)},e.prototype.createBoilerplateListOption=function(t){return{value:t,text:this.translate(t)}},e.prototype.createCustomListOption=function(t){var e=t.displayKey,i=this.optionsFactory.getCustomOption(t.displayKey);return{value:e,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(e)}},e.prototype.isAllowTwoConditions=function(){return this.maxNumConditions>=2},e.prototype.createBodyTemplate=function(){return""},e.prototype.getCssIdentifier=function(){return"simple-filter"},e.prototype.updateUiVisibility=function(){var t=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,t)},e.prototype.updateNumConditions=function(){for(var t,e=-1,i=!0,o=0;o<this.getNumConditions();o++)this.isConditionUiComplete(o)?e=o:i=!1;if(this.shouldAddNewConditionAtEnd(i))this.createJoinOperatorPanel(),this.createOption();else{var n=null!==(t=this.lastUiCompletePosition)&&void 0!==t?t:this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);var r=e+1,s=n-r;s>0&&this.removeConditionsAndOperators(r,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e},e.prototype.updateConditionStatusesAndValues=function(t,e){var i=this;this.eTypes.forEach((function(e,o){var n=i.isConditionDisabled(o,t);e.setDisabled(n||i.filterListOptions.length<=1),1===o&&(Ko(i.eJoinOperatorPanels[0],n),i.eJoinOperatorsAnd[0].setDisabled(n),i.eJoinOperatorsOr[0].setDisabled(n))})),this.eConditionBodies.forEach((function(t,e){Uo(t,i.isConditionBodyVisible(e))}));var o="OR"===(null!==e&&void 0!==e?e:this.getJoinOperator());this.eJoinOperatorsAnd.forEach((function(t,e){t.setValue(!o,!0)})),this.eJoinOperatorsOr.forEach((function(t,e){t.setValue(o,!0)})),this.forEachInput((function(e,o,n,r){i.setElementDisplayed(e,o<r),i.setElementDisabled(e,i.isConditionDisabled(n,t))})),this.resetPlaceholder()},e.prototype.shouldAddNewConditionAtEnd=function(t){return t&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()},e.prototype.removeConditionsAndOperators=function(t,e){if(!(t>=this.getNumConditions())){this.removeComponents(this.eTypes,t,e),this.removeElements(this.eConditionBodies,t,e),this.removeValueElements(t,e);var i=Math.max(t-1,0);this.removeElements(this.eJoinOperatorPanels,i,e),this.removeComponents(this.eJoinOperatorsAnd,i,e),this.removeComponents(this.eJoinOperatorsOr,i,e)}},e.prototype.removeElements=function(t,e,i){var o=this.removeItems(t,e,i);o.forEach((function(t){return an(t)}))},e.prototype.removeComponents=function(t,e,i){var o=this,n=this.removeItems(t,e,i);n.forEach((function(t){an(t.getGui()),o.destroyBean(t)}))},e.prototype.removeItems=function(t,e,i){return null==i?t.splice(e):t.splice(e,i)},e.prototype.afterGuiAttached=function(e){if(t.prototype.afterGuiAttached.call(this,e),this.resetPlaceholder(),!(null===e||void 0===e?void 0:e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{var i=this.getInputs(0)[0];if(!i)return;i instanceof rs&&i.getInputElement().focus()}},e.prototype.afterGuiDetached=function(){t.prototype.afterGuiDetached.call(this);var e=this.getModel();this.areModelsEqual(e,this.getModelFromUi())&&!this.hasInvalidInputs()||this.resetUiToActiveModel(e);for(var i=-1,o=-1,n=!1,r=this.getJoinOperator(),s=this.getNumConditions()-1;s>=0;s--)if(this.isConditionUiComplete(s))-1===i&&(i=s,o=s);else{var a=s>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(s-1),l=s<i;(a||l)&&(this.removeConditionsAndOperators(s,1),n=!0,l&&o--)}var u=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),u=!0),this.shouldAddNewConditionAtEnd(o===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),u=!0),u&&this.updateConditionStatusesAndValues(o,r),n&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=o},e.prototype.getPlaceholderText=function(t,e){var i=this.translate(t);if(H(this.filterPlaceholder)){var o=this.filterPlaceholder,n=this.eTypes[e].getValue(),r=this.translate(n);i=o({filterOptionKey:n,filterOption:r,placeholder:i})}else"string"===typeof this.filterPlaceholder&&(i=this.filterPlaceholder);return i},e.prototype.resetPlaceholder=function(){var t=this,e=this.localeService.getLocaleTextFunc();this.forEachInput((function(i,o,n,r){if(i instanceof rs){var s=0===o&&r>1?"inRangeStart":0===o?"filterOoo":"inRangeEnd",a=0===o&&r>1?e("ariaFilterFromValue","Filter from value"):0===o?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");i.setInputPlaceholder(t.getPlaceholderText(s,n)),i.setInputAriaLabel(a)}}))},e.prototype.setElementValue=function(t,e,i){t instanceof rs&&t.setValue(null!=e?String(e):null,!0)},e.prototype.setElementDisplayed=function(t,e){t instanceof vr&&Uo(t.getGui(),e)},e.prototype.setElementDisabled=function(t,e){t instanceof vr&&Ko(t.getGui(),e)},e.prototype.attachElementOnChange=function(t,e){t instanceof rs&&t.onValueChange(e)},e.prototype.forEachInput=function(t){var e=this;this.getConditionTypes().forEach((function(i,o){e.forEachPositionTypeInput(o,i,t)}))},e.prototype.forEachPositionInput=function(t,e){var i=this.getConditionType(t);this.forEachPositionTypeInput(t,i,e)},e.prototype.forEachPositionTypeInput=function(t,e,i){for(var o=this.getNumberOfInputs(e),n=this.getInputs(t),r=0;r<n.length;r++){var s=n[r];null!=s&&i(s,r,t,o)}},e.prototype.isConditionDisabled=function(t,e){return!!this.isReadOnly()||0!==t&&t>e+1},e.prototype.isConditionBodyVisible=function(t){var e=this.getConditionType(t),i=this.getNumberOfInputs(e);return i>0},e.prototype.isConditionUiComplete=function(t){if(t>=this.getNumConditions())return!1;var i=this.getConditionType(t);return i!==e.EMPTY&&!this.getValues(t).some((function(t){return null==t}))},e.prototype.getNumConditions=function(){return this.eTypes.length},e.prototype.getUiCompleteConditions=function(){for(var t=[],e=0;e<this.getNumConditions();e++)this.isConditionUiComplete(e)&&t.push(this.createCondition(e));return t},e.prototype.createMissingConditionsAndOperators=function(){if(!this.isReadOnly())for(var t=this.getNumConditions();t<this.numAlwaysVisibleConditions;t++)this.createJoinOperatorPanel(),this.createOption()},e.prototype.resetUiToDefaults=function(t){var e=this;return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach((function(t){return e.resetType(t)})),this.eJoinOperatorsAnd.forEach((function(t,i){return e.resetJoinOperatorAnd(t,i,e.joinOperatorId+i)})),this.eJoinOperatorsOr.forEach((function(t,i){return e.resetJoinOperatorOr(t,i,e.joinOperatorId+i)})),this.joinOperatorId++,this.forEachInput((function(t){return e.resetInput(t)})),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,t||this.onUiChanged(),cr.resolve()},e.prototype.resetType=function(t){var e=this.localeService.getLocaleTextFunc(),i=e("ariaFilteringOperator","Filtering operator");t.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)},e.prototype.resetJoinOperatorAnd=function(t,e,i){this.resetJoinOperator(t,e,this.isDefaultOperator("AND"),this.translate("andCondition"),i)},e.prototype.resetJoinOperatorOr=function(t,e,i){this.resetJoinOperator(t,e,this.isDefaultOperator("OR"),this.translate("orCondition"),i)},e.prototype.resetJoinOperator=function(t,e,i,o,n){this.updateJoinOperatorDisabled(t.setValue(i,!0).setName("ag-simple-filter-and-or-"+this.getCompId()+"-"+n).setLabel(o),e)},e.prototype.updateJoinOperatorsDisabled=function(){var t=this;this.eJoinOperatorsAnd.forEach((function(e,i){return t.updateJoinOperatorDisabled(e,i)})),this.eJoinOperatorsOr.forEach((function(e,i){return t.updateJoinOperatorDisabled(e,i)}))},e.prototype.updateJoinOperatorDisabled=function(t,e){t.setDisabled(this.isReadOnly()||e>0)},e.prototype.resetInput=function(t){this.setElementValue(t,null),this.setElementDisabled(t,this.isReadOnly())},e.prototype.setConditionIntoUi=function(t,e){var i=this,o=this.mapValuesFromModel(t);this.forEachInput((function(t,n,r,s){r===e&&i.setElementValue(t,null!=o[n]?o[n]:null)}))},e.prototype.setValueFromFloatingFilter=function(t){var e=this;this.forEachInput((function(i,o,n,r){e.setElementValue(i,0===o&&0===n?t:null,!0)}))},e.prototype.isDefaultOperator=function(t){return t===this.defaultJoinOperator},e.prototype.addChangedListeners=function(t,e){var i=this;this.isReadOnly()||(t.onValueChange(this.listener),this.forEachPositionInput(e,(function(t){i.attachElementOnChange(t,i.listener)})))},e.prototype.individualConditionPasses=function(t,e){var i=this.getCellValue(t.node),o=this.mapValuesFromModel(e),n=this.optionsFactory.getCustomOption(e.type),r=this.evaluateCustomFilter(n,o,i);return null!=r?r:null==i?this.evaluateNullValue(e.type):this.evaluateNonNullValue(o,i,e,t)},e.prototype.evaluateCustomFilter=function(t,e,i){if(null!=t){var o=t.predicate;return null==o||e.some((function(t){return null==t}))?void 0:o(e,i)}},e.prototype.isBlank=function(t){return null==t||"string"===typeof t&&0===t.trim().length},e.prototype.hasInvalidInputs=function(){return!1},e.EMPTY="empty",e.BLANK="blank",e.NOT_BLANK="notBlank",e.EQUALS="equals",e.NOT_EQUAL="notEqual",e.LESS_THAN="lessThan",e.LESS_THAN_OR_EQUAL="lessThanOrEqual",e.GREATER_THAN="greaterThan",e.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",e.IN_RANGE="inRange",e.CONTAINS="contains",e.NOT_CONTAINS="notContains",e.STARTS_WITH="startsWith",e.ENDS_WITH="endsWith",e}(jr),gs=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gs(e,t),e.prototype.setParams=function(e){t.prototype.setParams.call(this,e),this.scalarFilterParams=e},e.prototype.evaluateNullValue=function(t){switch(t){case e.EQUALS:case e.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case e.GREATER_THAN:case e.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case e.LESS_THAN:case e.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case e.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case e.BLANK:return!0;case e.NOT_BLANK:return!1}return!1},e.prototype.evaluateNonNullValue=function(t,i,o){var n=this.comparator(),r=null!=t[0]?n(t[0],i):0;switch(o.type){case e.EQUALS:return 0===r;case e.NOT_EQUAL:return 0!==r;case e.GREATER_THAN:return r>0;case e.GREATER_THAN_OR_EQUAL:return r>=0;case e.LESS_THAN:return r<0;case e.LESS_THAN_OR_EQUAL:return r<=0;case e.IN_RANGE:var s=n(t[1],i);return this.scalarFilterParams.inRangeInclusive?r>=0&&s<=0:r>0&&s<0;case e.BLANK:return this.isBlank(i);case e.NOT_BLANK:return!this.isBlank(i);default:return console.warn('AG Grid: Unexpected type of filter "'+o.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},e}(fs),_s=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ms=function(){return ms=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},ms.apply(this,arguments)},vs=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},bs=1e3,Cs=1/0,ws=function(t){function e(e,i,o){var n=t.call(this,i,o)||this;return n.dateFilterParams=e,n}return _s(e,t),e.prototype.conditionToString=function(t,e){var i=t.type,o=(e||{}).numberOfInputs,n=i==fs.IN_RANGE||2===o,r=Fo(t.dateFrom),s=Fo(t.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(n){var l=null!==r?Mo(r,a):"null",u=null!==s?Mo(s,a):"null";return l+"-"+u}return null!=r?Mo(r,a):""+i},e.prototype.updateParams=function(e){t.prototype.updateParams.call(this,e),this.dateFilterParams=e.dateFilterParams},e}(ds),Ss=function(t){function e(){var e=t.call(this,"dateFilter")||this;return e.eConditionPanelsFrom=[],e.eConditionPanelsTo=[],e.dateConditionFromComps=[],e.dateConditionToComps=[],e.minValidYear=bs,e.maxValidYear=Cs,e.minValidDate=null,e.maxValidDate=null,e}return _s(e,t),e.prototype.afterGuiAttached=function(e){t.prototype.afterGuiAttached.call(this,e),this.dateConditionFromComps[0].afterGuiAttached(e)},e.prototype.mapValuesFromModel=function(t){var e=t||{},i=e.dateFrom,o=e.dateTo,n=e.type;return[i&&Fo(i)||null,o&&Fo(o)||null].slice(0,this.getNumberOfInputs(n))},e.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},e.prototype.defaultComparator=function(t,e){var i=e;return null==e||i<t?-1:i>t?1:0},e.prototype.setParams=function(e){this.dateFilterParams=e,t.prototype.setParams.call(this,e);var i=function(t,i){if(null!=e[t]){if(!isNaN(e[t]))return null==e[t]?i:Number(e[t]);console.warn("AG Grid: DateFilter "+t+" is not a number")}return i};this.minValidYear=i("minValidYear",bs),this.maxValidYear=i("maxValidYear",Cs),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Fo(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Fo(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new ws(this.dateFilterParams,this.localeService,this.optionsFactory)},e.prototype.createDateCompWrapper=function(t){var e=this,i=new Rr(this.getContext(),this.userComponentFactory,{onDateChanged:function(){return e.onUiChanged()},filterParams:this.dateFilterParams},t);return this.addDestroyFunc((function(){return i.destroy()})),i},e.prototype.setElementValue=function(t,e){t.setDate(e)},e.prototype.setElementDisplayed=function(t,e){t.setDisplayed(e)},e.prototype.setElementDisabled=function(t,e){t.setDisabled(e)},e.prototype.getDefaultFilterOptions=function(){return e.DEFAULT_FILTER_OPTIONS},e.prototype.createValueElement=function(){var t=document.createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t},e.prototype.createFromToElement=function(t,e,i,o){var n=document.createElement("div");n.classList.add("ag-filter-"+o),n.classList.add("ag-filter-date-"+o),e.push(n),t.appendChild(n),i.push(this.createDateCompWrapper(n))},e.prototype.removeValueElements=function(t,e){this.removeDateComps(this.dateConditionFromComps,t,e),this.removeDateComps(this.dateConditionToComps,t,e),this.removeItems(this.eConditionPanelsFrom,t,e),this.removeItems(this.eConditionPanelsTo,t,e)},e.prototype.removeDateComps=function(t,e,i){var o=this.removeItems(t,e,i);o.forEach((function(t){return t.destroy()}))},e.prototype.isValidDateValue=function(t){if(null===t)return!1;if(this.minValidDate){if(t<this.minValidDate)return!1}else if(t.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(t>this.maxValidDate)return!1}else if(t.getUTCFullYear()>this.maxValidYear)return!1;return!0},e.prototype.isConditionUiComplete=function(e){var i=this;if(!t.prototype.isConditionUiComplete.call(this,e))return!1;var o=!0;return this.forEachInput((function(t,n,r,s){r!==e||!o||n>=s||(o=o&&i.isValidDateValue(t.getDate()))})),o},e.prototype.areSimpleModelsEqual=function(t,e){return t.dateFrom===e.dateFrom&&t.dateTo===e.dateTo&&t.type===e.type},e.prototype.getFilterType=function(){return"date"},e.prototype.createCondition=function(t){var e=this.getConditionType(t),i={},o=this.getValues(t);return o.length>0&&(i.dateFrom=Ao(o[0])),o.length>1&&(i.dateTo=Ao(o[1])),ms({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:e},i)},e.prototype.resetPlaceholder=function(){var t=this.localeService.getLocaleTextFunc(),e=this.translate("dateFormatOoo"),i=t("ariaFilterValue","Filter Value");this.forEachInput((function(t){t.setInputPlaceholder(e),t.setInputAriaLabel(i)}))},e.prototype.getInputs=function(t){return t>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[t],this.dateConditionToComps[t]]},e.prototype.getValues=function(t){var e=[];return this.forEachPositionInput(t,(function(t,i,o,n){i<n&&e.push(t.getDate())})),e},e.prototype.getModelAsString=function(t){var e;return null!==(e=this.filterModelFormatter.getModelAsString(t))&&void 0!==e?e:""},e.DEFAULT_FILTER_OPTIONS=[ys.EQUALS,ys.GREATER_THAN,ys.LESS_THAN,ys.NOT_EQUAL,ys.IN_RANGE,ys.BLANK,ys.NOT_BLANK],vs([pt("userComponentFactory")],e.prototype,"userComponentFactory",void 0),e}(ys),Es=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),xs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Es(e,t),e.prototype.getDefaultDebounceMs=function(){return 0},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.isEventFromFloatingFilter=function(t){return t&&t.afterFloatingFilter},e.prototype.isEventFromDataChange=function(t){return null===t||void 0===t?void 0:t.afterDataChange},e.prototype.getLastType=function(){return this.lastType},e.prototype.isReadOnly=function(){return this.readOnly},e.prototype.setLastTypeFromModel=function(t){if(t){var e,i=t.operator;if(i){var o=t;e=o.conditions[0]}else e=t;this.lastType=e.type}else this.lastType=this.optionsFactory.getDefaultOption()},e.prototype.canWeEditAfterModelFromParentFilter=function(t){if(!t)return this.isTypeEditable(this.lastType);var e=t.operator;if(e)return!1;var i=t;return this.isTypeEditable(i.type)},e.prototype.init=function(t){this.setSimpleParams(t)},e.prototype.setSimpleParams=function(t){this.optionsFactory=new Ir,this.optionsFactory.init(t.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!t.filterParams.readOnly;var e=this.isTypeEditable(this.lastType);this.setEditable(e)},e.prototype.onParamsUpdated=function(t){this.setSimpleParams(t)},e.prototype.doesFilterHaveSingleInput=function(t){var e=this.optionsFactory.getCustomOption(t),i=(e||{}).numberOfInputs;return null==i||1==i},e.prototype.isTypeEditable=function(t){var e=[fs.IN_RANGE,fs.EMPTY,fs.BLANK,fs.NOT_BLANK];return!!t&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(t)&&e.indexOf(t)<0},e}(vr),Os=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Rs=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Is=function(t){function e(){return t.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>')||this}return Os(e,t),e.prototype.getDefaultFilterOptions=function(){return Ss.DEFAULT_FILTER_OPTIONS},e.prototype.init=function(e){t.prototype.init.call(this,e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new ws(this.filterParams,this.localeService,this.optionsFactory);var i=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(i("ariaDateFilterInput","Date Filter Input"))},e.prototype.onParamsUpdated=function(e){t.prototype.onParamsUpdated.call(this,e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams})},e.prototype.setEditable=function(t){Uo(this.eDateWrapper,t),Uo(this.eReadOnlyText.getGui(),!t)},e.prototype.onParentModelChanged=function(e,i){if(!this.isEventFromFloatingFilter(i)&&!this.isEventFromDataChange(i)){t.prototype.setLastTypeFromModel.call(this,e);var o=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(o),o){if(e){var n=e;this.dateComp.setDate(Fo(n.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}},e.prototype.onDateChanged=function(){var t=this,e=this.dateComp.getDate(),i=Ao(e);this.params.parentFilterInstance((function(e){if(e){var o=Fo(i);e.onFloatingFilterChanged(t.getLastType()||null,o)}}))},e.prototype.getDateComponentParams=function(){var t=jr.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Y(this.onDateChanged.bind(this),t),filterParams:this.params.column.getColDef().filterParams}},e.prototype.createDateComponent=function(){var t=this;this.dateComp=new Rr(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc((function(){return t.dateComp.destroy()}))},e.prototype.updateDateComponent=function(){var t=this.getDateComponentParams(),e=this.gridOptionsService,i=e.api,o=e.columnApi,n=e.context;t.api=i,t.columnApi=o,t.context=n,this.dateComp.updateParams(t)},e.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},Rs([pt("userComponentFactory")],e.prototype,"userComponentFactory",void 0),Rs([br("eReadOnlyText")],e.prototype,"eReadOnlyText",void 0),Rs([br("eDateWrapper")],e.prototype,"eDateWrapper",void 0),e}(xs),Ts=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ps=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ds=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},ks=function(t){function e(){return t.call(this,'\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>')||this}return Ts(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){var e=this;this.params=t,this.setParams(t);var i=this.gridOptionsService.getDocument(),o=this.eDateInput.getInputElement();this.addManagedListener(o,"mousedown",(function(){e.eDateInput.isDisabled()||e.usingSafariDatePicker||o.focus()})),this.addManagedListener(o,"input",(function(t){t.target===i.activeElement&&(e.eDateInput.isDisabled()||e.params.onDateChanged())}))},e.prototype.setParams=function(t){var e=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(t);this.usingSafariDatePicker=i&&so(),e.type=i?"date":"text";var o=t.filterParams||{},n=o.minValidYear,r=o.maxValidYear,s=o.minValidDate,a=o.maxValidDate;if(s&&n&&G((function(){return console.warn("AG Grid: DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.")}),"DateFilter.minValidDateAndMinValidYearWarning"),a&&r&&G((function(){return console.warn("AG Grid: DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.")}),"DateFilter.maxValidDateAndMaxValidYearWarning"),s&&a){var l=Ds([s,a].map((function(t){return t instanceof Date?t:Fo(t)})),2),u=l[0],c=l[1];u&&c&&u.getTime()>c.getTime()&&G((function(){return console.warn("AG Grid: DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}),"DateFilter.minValidDateAndMaxValidDateWarning")}s?s instanceof Date?e.min=Mo(s):e.min=s:n&&(e.min=n+"-01-01"),a?a instanceof Date?e.max=Mo(a):e.max=a:r&&(e.max=r+"-12-31")},e.prototype.onParamsUpdated=function(t){this.params=t,this.setParams(t)},e.prototype.getDate=function(){return Fo(this.eDateInput.getValue())},e.prototype.setDate=function(t){this.eDateInput.setValue(Ao(t,!1))},e.prototype.setInputPlaceholder=function(t){this.eDateInput.setInputPlaceholder(t)},e.prototype.setDisabled=function(t){this.eDateInput.setDisabled(t)},e.prototype.afterGuiAttached=function(t){t&&t.suppressFocus||this.eDateInput.getInputElement().focus()},e.prototype.shouldUseBrowserDatePicker=function(t){return t.filterParams&&null!=t.filterParams.browserDatePicker?t.filterParams.browserDatePicker:lo()||uo()||so()&&ao()>=14.1},Ps([br("eDateInput")],e.prototype,"eDateInput",void 0),e}(vr),As=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ls=function(t){function e(e,i,o){return void 0===i&&(i="ag-text-field"),void 0===o&&(o="text"),t.call(this,e,i,o)||this}return As(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},e.prototype.setValue=function(e,i){return this.eInput.value!==e&&(this.eInput.value=s(e)?e:""),t.prototype.setValue.call(this,e,i)},e.prototype.setStartValue=function(t){this.setValue(t,!0)},e.prototype.preventDisallowedCharacters=function(){var t=new RegExp("["+this.config.allowedCharPattern+"]"),e=function(e){Wn(e)&&e.key&&!t.test(e.key)&&e.preventDefault()};this.addManagedListener(this.eInput,"keydown",e),this.addManagedListener(this.eInput,"paste",(function(e){var i,o=null===(i=e.clipboardData)||void 0===i?void 0:i.getData("text");o&&o.split("").some((function(e){return!t.test(e)}))&&e.preventDefault()}))},e}(rs),Ms=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Fs=function(t){function e(e){return t.call(this,e,"ag-number-field","number")||this}return Ms(e,t),e.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",(function(){var t=parseFloat(e.eInput.value),i=isNaN(t)?"":e.normalizeValue(t.toString());e.value!==i&&e.setValue(i)})),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"},e.prototype.onWheel=function(t){document.activeElement===this.eInput&&t.preventDefault()},e.prototype.normalizeValue=function(t){if(""===t)return"";null!=this.precision&&(t=this.adjustPrecision(t));var e=parseFloat(t);return null!=this.min&&e<this.min?t=this.min.toString():null!=this.max&&e>this.max&&(t=this.max.toString()),t},e.prototype.adjustPrecision=function(t,e){if(null==this.precision)return t;if(e){var i=parseFloat(t).toFixed(this.precision);return parseFloat(i).toString()}var o=String(t).split(".");if(o.length>1){if(o[1].length<=this.precision)return t;if(this.precision>0)return o[0]+"."+o[1].slice(0,this.precision)}return o[0]},e.prototype.setMin=function(t){return this.min===t||(this.min=t,Tn(this.eInput,"min",t)),this},e.prototype.setMax=function(t){return this.max===t||(this.max=t,Tn(this.eInput,"max",t)),this},e.prototype.setPrecision=function(t){return this.precision=t,this},e.prototype.setStep=function(t){return this.step===t||(this.step=t,Tn(this.eInput,"step",t)),this},e.prototype.setValue=function(e,i){var o=this;return this.setValueOrInputValue((function(e){return t.prototype.setValue.call(o,e,i)}),(function(){return o}),e)},e.prototype.setStartValue=function(e){var i=this;return this.setValueOrInputValue((function(e){return t.prototype.setValue.call(i,e,!0)}),(function(t){i.eInput.value=t}),e)},e.prototype.setValueOrInputValue=function(t,e,i){if(s(i)){var o=this.isScientificNotation(i);if(o&&this.eInput.validity.valid)return t(i);if(!o){i=this.adjustPrecision(i);var n=this.normalizeValue(i);o=i!=n}if(o)return e(i)}return t(i)},e.prototype.getValue=function(){if(this.eInput.validity.valid){var e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):t.prototype.getValue.call(this)}},e.prototype.isScientificNotation=function(t){return"string"===typeof t&&t.includes("e")},e}(Ls),Ns=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Vs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ns(e,t),e.prototype.conditionToString=function(t,e){var i=(e||{}).numberOfInputs,o=t.type==fs.IN_RANGE||2===i;return o?this.formatValue(t.filter)+"-"+this.formatValue(t.filterTo):null!=t.filter?this.formatValue(t.filter):""+t.type},e}(ds);function Bs(t){var e=(null!==t&&void 0!==t?t:{}).allowedCharPattern;return null!==e&&void 0!==e?e:null}var Gs,js,Hs,$s=function(t){function e(){var e=t.call(this,"numberFilter")||this;return e.eValuesFrom=[],e.eValuesTo=[],e}return Ns(e,t),e.prototype.mapValuesFromModel=function(t){var e=t||{},i=e.filter,o=e.filterTo,n=e.type;return[this.processValue(i),this.processValue(o)].slice(0,this.getNumberOfInputs(n))},e.prototype.getDefaultDebounceMs=function(){return 500},e.prototype.comparator=function(){return function(t,e){return t===e?0:t<e?1:-1}},e.prototype.setParams=function(e){this.numberFilterParams=e,t.prototype.setParams.call(this,e),this.filterModelFormatter=new Vs(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)},e.prototype.getDefaultFilterOptions=function(){return e.DEFAULT_FILTER_OPTIONS},e.prototype.setElementValue=function(e,i,o){var n=!o&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(null!==i&&void 0!==i?i:null):i;t.prototype.setElementValue.call(this,e,n)},e.prototype.createValueElement=function(){var t=Bs(this.numberFilterParams),e=document.createElement("div");return e.classList.add("ag-filter-body"),Ci(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from",t),this.createFromToElement(e,this.eValuesTo,"to",t),e},e.prototype.createFromToElement=function(t,e,i,o){var n=this.createManagedBean(o?new Ls({allowedCharPattern:o}):new Fs);n.addCssClass("ag-filter-"+i),n.addCssClass("ag-filter-filter"),e.push(n),t.appendChild(n.getGui())},e.prototype.removeValueElements=function(t,e){this.removeComponents(this.eValuesFrom,t,e),this.removeComponents(this.eValuesTo,t,e)},e.prototype.getValues=function(t){var e=this,i=[];return this.forEachPositionInput(t,(function(t,o,n,r){o<r&&i.push(e.processValue(e.stringToFloat(t.getValue())))})),i},e.prototype.areSimpleModelsEqual=function(t,e){return t.filter===e.filter&&t.filterTo===e.filterTo&&t.type===e.type},e.prototype.getFilterType=function(){return"number"},e.prototype.processValue=function(t){return null==t||isNaN(t)?null:t},e.prototype.stringToFloat=function(t){if("number"===typeof t)return t;var e=r(t);return null!=e&&""===e.trim()&&(e=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(e):null==e||"-"===e.trim()?null:parseFloat(e)},e.prototype.createCondition=function(t){var e=this.getConditionType(t),i={filterType:this.getFilterType(),type:e},o=this.getValues(t);return o.length>0&&(i.filter=o[0]),o.length>1&&(i.filterTo=o[1]),i},e.prototype.getInputs=function(t){return t>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[t],this.eValuesTo[t]]},e.prototype.getModelAsString=function(t){var e;return null!==(e=this.filterModelFormatter.getModelAsString(t))&&void 0!==e?e:""},e.prototype.hasInvalidInputs=function(){var t=!1;return this.forEachInput((function(e){e.getInputElement().validity.valid||(t=!0)})),t},e.DEFAULT_FILTER_OPTIONS=[ys.EQUALS,ys.NOT_EQUAL,ys.LESS_THAN,ys.LESS_THAN_OR_EQUAL,ys.GREATER_THAN,ys.GREATER_THAN_OR_EQUAL,ys.IN_RANGE,ys.BLANK,ys.NOT_BLANK],e}(ys),Ws=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Us=function(){return Us=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Us.apply(this,arguments)},zs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ws(e,t),e.prototype.conditionToString=function(t,e){var i=(e||{}).numberOfInputs,o=t.type==fs.IN_RANGE||2===i;return o?t.filter+"-"+t.filterTo:null!=t.filter?""+t.filter:""+t.type},e}(ds),Ks=function(t){function e(){var e=t.call(this,"textFilter")||this;return e.eValuesFrom=[],e.eValuesTo=[],e}return Ws(e,t),e.trimInput=function(t){var e=t&&t.trim();return""===e?t:e},e.prototype.getDefaultDebounceMs=function(){return 500},e.prototype.setParams=function(i){this.textFilterParams=i,t.prototype.setParams.call(this,i),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?e.DEFAULT_FORMATTER:e.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new zs(this.localeService,this.optionsFactory)},e.prototype.getTextMatcher=function(){var t=this.textFilterParams.textCustomComparator;return t?(sr.doOnce((function(){return console.warn("AG Grid - textCustomComparator is deprecated, use textMatcher instead.")}),"textCustomComparator.deprecated"),function(e){var i=e.filterOption,o=e.value,n=e.filterText;return t(i,o,n)}):this.textFilterParams.textMatcher||e.DEFAULT_MATCHER},e.prototype.createCondition=function(t){var e=this.getConditionType(t),i={filterType:this.getFilterType(),type:e},o=this.getValuesWithSideEffects(t,!0);return o.length>0&&(i.filter=o[0]),o.length>1&&(i.filterTo=o[1]),i},e.prototype.getFilterType=function(){return"text"},e.prototype.areSimpleModelsEqual=function(t,e){return t.filter===e.filter&&t.filterTo===e.filterTo&&t.type===e.type},e.prototype.getInputs=function(t){return t>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[t],this.eValuesTo[t]]},e.prototype.getValues=function(t){return this.getValuesWithSideEffects(t,!1)},e.prototype.getValuesWithSideEffects=function(t,i){var o=this,n=[];return this.forEachPositionInput(t,(function(t,s,a,l){var u;if(s<l){var c=r(t.getValue());i&&o.textFilterParams.trimInput&&(c=null!==(u=e.trimInput(c))&&void 0!==u?u:null,t.setValue(c,!0)),n.push(c)}})),n},e.prototype.getDefaultFilterOptions=function(){return e.DEFAULT_FILTER_OPTIONS},e.prototype.createValueElement=function(){var t=document.createElement("div");return t.classList.add("ag-filter-body"),Ci(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from"),this.createFromToElement(t,this.eValuesTo,"to"),t},e.prototype.createFromToElement=function(t,e,i){var o=this.createManagedBean(new Ls);o.addCssClass("ag-filter-"+i),o.addCssClass("ag-filter-filter"),e.push(o),t.appendChild(o.getGui())},e.prototype.removeValueElements=function(t,e){this.removeComponents(this.eValuesFrom,t,e),this.removeComponents(this.eValuesTo,t,e)},e.prototype.mapValuesFromModel=function(t){var e=t||{},i=e.filter,o=e.filterTo,n=e.type;return[i||null,o||null].slice(0,this.getNumberOfInputs(n))},e.prototype.evaluateNullValue=function(t){var e=[fs.NOT_EQUAL,fs.NOT_CONTAINS,fs.BLANK];return!!t&&e.indexOf(t)>=0},e.prototype.evaluateNonNullValue=function(t,e,i,o){var n=this,r=t.map((function(t){return n.formatter(t)}))||[],s=this.formatter(e),a=this.textFilterParams,l=a.api,u=a.colDef,c=a.column,h=a.columnApi,p=a.context,d=a.textFormatter;if(i.type===fs.BLANK)return this.isBlank(e);if(i.type===fs.NOT_BLANK)return!this.isBlank(e);var f={api:l,colDef:u,column:c,columnApi:h,context:p,node:o.node,data:o.data,filterOption:i.type,value:s,textFormatter:d};return r.some((function(t){return n.matcher(Us(Us({},f),{filterText:t}))}))},e.prototype.getModelAsString=function(t){var e;return null!==(e=this.filterModelFormatter.getModelAsString(t))&&void 0!==e?e:""},e.DEFAULT_FILTER_OPTIONS=[fs.CONTAINS,fs.NOT_CONTAINS,fs.EQUALS,fs.NOT_EQUAL,fs.STARTS_WITH,fs.ENDS_WITH,fs.BLANK,fs.NOT_BLANK],e.DEFAULT_FORMATTER=function(t){return t},e.DEFAULT_LOWERCASE_FORMATTER=function(t){return null==t?null:t.toString().toLowerCase()},e.DEFAULT_MATCHER=function(t){var i=t.filterOption,o=t.value,n=t.filterText;if(null==n)return!1;switch(i){case e.CONTAINS:return o.indexOf(n)>=0;case e.NOT_CONTAINS:return o.indexOf(n)<0;case e.EQUALS:return o===n;case e.NOT_EQUAL:return o!=n;case e.STARTS_WITH:return 0===o.indexOf(n);case e.ENDS_WITH:var r=o.lastIndexOf(n);return r>=0&&r===o.length-n.length;default:return!1}},e}(fs),Ys=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),qs=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Xs=function(t){function e(e){var i=t.call(this)||this;return i.params=e,i.valueChangedListener=function(){},i}return Ys(e,t),e.prototype.setupGui=function(t){var e,i=this;this.eFloatingFilterTextInput=this.createManagedBean(new Ls(null===(e=this.params)||void 0===e?void 0:e.config));var o=this.eFloatingFilterTextInput.getGui();t.appendChild(o),this.addManagedListener(o,"input",(function(t){return i.valueChangedListener(t)})),this.addManagedListener(o,"keydown",(function(t){return i.valueChangedListener(t)}))},e.prototype.setEditable=function(t){this.eFloatingFilterTextInput.setDisabled(!t)},e.prototype.setAutoComplete=function(t){this.eFloatingFilterTextInput.setAutoComplete(t)},e.prototype.getValue=function(){return this.eFloatingFilterTextInput.getValue()},e.prototype.setValue=function(t,e){this.eFloatingFilterTextInput.setValue(t,e)},e.prototype.setValueChangedListener=function(t){this.valueChangedListener=t},e.prototype.setParams=function(t){this.setAriaLabel(t.ariaLabel),void 0!==t.autoComplete&&this.setAutoComplete(t.autoComplete)},e.prototype.setAriaLabel=function(t){this.eFloatingFilterTextInput.setInputAriaLabel(t)},e}(le),Qs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ys(e,t),e.prototype.postConstruct=function(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>\n        ')},e.prototype.getDefaultDebounceMs=function(){return 500},e.prototype.onParentModelChanged=function(t,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(this.setLastTypeFromModel(t),this.setEditable(this.canWeEditAfterModelFromParentFilter(t)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(t)))},e.prototype.init=function(e){this.setupFloatingFilterInputService(e),t.prototype.init.call(this,e),this.setTextInputParams(e)},e.prototype.setupFloatingFilterInputService=function(t){this.floatingFilterInputService=this.createFloatingFilterInputService(t),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)},e.prototype.setTextInputParams=function(t){var e;this.params=t;var i=null!==(e=t.browserAutoComplete)&&void 0!==e&&e;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(t),autoComplete:i}),this.applyActive=jr.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){var o=jr.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),n=Y(this.syncUpWithParentFilter.bind(this),o);this.floatingFilterInputService.setValueChangedListener(n)}},e.prototype.onParamsUpdated=function(e){t.prototype.onParamsUpdated.call(this,e),this.setTextInputParams(e)},e.prototype.recreateFloatingFilterInputService=function(t){var e=this.floatingFilterInputService.getValue();rn(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(t),this.floatingFilterInputService.setValue(e,!0)},e.prototype.getAriaLabel=function(t){var e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),i=this.localeService.getLocaleTextFunc();return e+" "+i("ariaFilterInput","Filter Input")},e.prototype.syncUpWithParentFilter=function(t){var e=this,i=t.key===Nn.ENTER;if(!this.applyActive||i){var o=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(o=Ks.trimInput(o),this.floatingFilterInputService.setValue(o,!0)),this.params.parentFilterInstance((function(t){t&&t.onFloatingFilterChanged(e.getLastType()||null,o||null)}))}},e.prototype.setEditable=function(t){this.floatingFilterInputService.setEditable(t)},qs([pt("columnModel")],e.prototype,"columnModel",void 0),qs([br("eFloatingFilterInputContainer")],e.prototype,"eFloatingFilterInputContainer",void 0),qs([ut],e.prototype,"postConstruct",null),e}(xs),Js=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Zs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueChangedListener=function(){},e.numberInputActive=!0,e}return Js(e,t),e.prototype.setupGui=function(t){var e=this;this.eFloatingFilterNumberInput=this.createManagedBean(new Fs),this.eFloatingFilterTextInput=this.createManagedBean(new Ls),this.eFloatingFilterTextInput.setDisabled(!0);var i=this.eFloatingFilterNumberInput.getGui(),o=this.eFloatingFilterTextInput.getGui();t.appendChild(i),t.appendChild(o),this.setupListeners(i,(function(t){return e.valueChangedListener(t)})),this.setupListeners(o,(function(t){return e.valueChangedListener(t)}))},e.prototype.setEditable=function(t){this.numberInputActive=t,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)},e.prototype.setAutoComplete=function(t){this.eFloatingFilterNumberInput.setAutoComplete(t),this.eFloatingFilterTextInput.setAutoComplete(t)},e.prototype.getValue=function(){return this.getActiveInputElement().getValue()},e.prototype.setValue=function(t,e){this.getActiveInputElement().setValue(t,e)},e.prototype.getActiveInputElement=function(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput},e.prototype.setValueChangedListener=function(t){this.valueChangedListener=t},e.prototype.setupListeners=function(t,e){this.addManagedListener(t,"input",e),this.addManagedListener(t,"keydown",e)},e.prototype.setParams=function(t){this.setAriaLabel(t.ariaLabel),void 0!==t.autoComplete&&this.setAutoComplete(t.autoComplete)},e.prototype.setAriaLabel=function(t){this.eFloatingFilterNumberInput.setInputAriaLabel(t),this.eFloatingFilterTextInput.setInputAriaLabel(t)},e}(le),ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Js(e,t),e.prototype.init=function(e){var i;t.prototype.init.call(this,e),this.filterModelFormatter=new Vs(this.localeService,this.optionsFactory,null===(i=e.filterParams)||void 0===i?void 0:i.numberFormatter)},e.prototype.onParamsUpdated=function(e){var i=Bs(e.filterParams);i!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),t.prototype.onParamsUpdated.call(this,e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},e.prototype.getDefaultFilterOptions=function(){return $s.DEFAULT_FILTER_OPTIONS},e.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},e.prototype.createFloatingFilterInputService=function(t){return this.allowedCharPattern=Bs(t.filterParams),this.allowedCharPattern?this.createManagedBean(new Xs({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Zs)},e}(Qs),ea=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ea(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.filterModelFormatter=new zs(this.localeService,this.optionsFactory)},e.prototype.onParamsUpdated=function(e){t.prototype.onParamsUpdated.call(this,e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},e.prototype.getDefaultFilterOptions=function(){return Ks.DEFAULT_FILTER_OPTIONS},e.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},e.prototype.createFloatingFilterInputService=function(){return this.createManagedBean(new Xs)},e}(Qs),oa=function(){function t(t,e){var i=this;void 0===e&&(e=!1),this.destroyFuncs=[],this.touching=!1,this.eventService=new vt,this.eElement=t,this.preventMouseClick=e;var o=this.onTouchStart.bind(this),n=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",o,{passive:!0}),this.eElement.addEventListener("touchmove",n,{passive:!0}),this.eElement.addEventListener("touchend",r,{passive:!1}),this.destroyFuncs.push((function(){i.eElement.removeEventListener("touchstart",o,{passive:!0}),i.eElement.removeEventListener("touchmove",n,{passive:!0}),i.eElement.removeEventListener("touchend",r,{passive:!1})}))}return t.prototype.getActiveTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e].identifier===this.touchStart.identifier;if(i)return t[e]}return null},t.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},t.prototype.onTouchStart=function(e){var i=this;if(!this.touching){this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;var o=this.touchStart;window.setTimeout((function(){var n=i.touchStart===o;if(i.touching&&n&&!i.moved){i.moved=!0;var r={type:t.EVENT_LONG_TAP,touchStart:i.touchStart,touchEvent:e};i.eventService.dispatchEvent(r)}}),500)}},t.prototype.onTouchMove=function(t){if(this.touching){var e=this.getActiveTouch(t.touches);if(e){var i=!Xn(e,this.touchStart,4);i&&(this.moved=!0)}}},t.prototype.onTouchEnd=function(e){if(this.touching){if(!this.moved){var i={type:t.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(i),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}},t.prototype.checkForDoubleTap=function(){var e=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0){var i=e-this.lastTapTime;if(i>t.DOUBLE_TAP_MILLIS){var o={type:t.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(o),this.lastTapTime=null}else this.lastTapTime=e}else this.lastTapTime=e},t.prototype.destroy=function(){this.destroyFuncs.forEach((function(t){return t()}))},t.EVENT_TAP="tap",t.EVENT_DOUBLE_TAP="doubleTap",t.EVENT_LONG_TAP="longTap",t.DOUBLE_TAP_MILLIS=500,t}(),na=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ra=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},sa=function(t){function e(i){var o=t.call(this)||this;return i||o.setTemplate(e.TEMPLATE),o}return na(e,t),e.prototype.attachCustomElements=function(t,e,i,o,n){this.eSortOrder=t,this.eSortAsc=e,this.eSortDesc=i,this.eSortMixed=o,this.eSortNone=n},e.prototype.setupSort=function(t,e){var i=this;void 0===e&&(e=!1),this.column=t,this.suppressOrder=e,this.setupMultiSortIndicator();var o=!!this.column.getColDef().sortable;o&&(this.addInIcon("sortAscending",this.eSortAsc,t),this.addInIcon("sortDescending",this.eSortDesc,t),this.addInIcon("sortUnSort",this.eSortNone,t),this.addManagedListener(this.eventService,ge.EVENT_SORT_CHANGED,(function(){return i.onSortChanged()})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return i.onSortChanged()})),this.onSortChanged())},e.prototype.addInIcon=function(t,e,i){if(null!=e){var o=Mn(t,this.gridOptionsService,i);o&&e.appendChild(o)}},e.prototype.onSortChanged=function(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()},e.prototype.updateIcons=function(){var t=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){var e="asc"===t;Uo(this.eSortAsc,e,{skipAriaHidden:!0})}if(this.eSortDesc){var i="desc"===t;Uo(this.eSortDesc,i,{skipAriaHidden:!0})}if(this.eSortNone){var o=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.is("unSortIcon"),n=null===t||void 0===t;Uo(this.eSortNone,!o&&n,{skipAriaHidden:!0})}},e.prototype.setupMultiSortIndicator=function(){var t=this;this.addInIcon("sortUnSort",this.eSortMixed,this.column);var e=this.column.getColDef().showRowGroup,i=this.gridOptionsService.isColumnsSortingCoupledToGroup();i&&e&&(this.addManagedListener(this.eventService,ge.EVENT_SORT_CHANGED,(function(){return t.updateMultiSortIndicator()})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.updateMultiSortIndicator()})),this.updateMultiSortIndicator())},e.prototype.updateMultiSortIndicator=function(){if(this.eSortMixed){var t="mixed"===this.sortController.getDisplaySortForColumn(this.column);Uo(this.eSortMixed,t,{skipAriaHidden:!0})}},e.prototype.updateSortOrder=function(){var t,e=this;if(this.eSortOrder){var i=this.sortController.getColumnsWithSortingOrdered(),o=null!==(t=this.sortController.getDisplaySortIndexForColumn(this.column))&&void 0!==t?t:-1,n=i.some((function(t){var i;return null!==(i=e.sortController.getDisplaySortIndexForColumn(t))&&void 0!==i&&i})),r=o>=0&&n;Uo(this.eSortOrder,r,{skipAriaHidden:!0}),o>=0?this.eSortOrder.innerHTML=(o+1).toString():rn(this.eSortOrder)}},e.TEMPLATE='<span class="ag-sort-indicator-container">\n            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>\n        </span>',ra([br("eSortOrder")],e.prototype,"eSortOrder",void 0),ra([br("eSortAsc")],e.prototype,"eSortAsc",void 0),ra([br("eSortDesc")],e.prototype,"eSortDesc",void 0),ra([br("eSortMixed")],e.prototype,"eSortMixed",void 0),ra([br("eSortNone")],e.prototype,"eSortNone",void 0),ra([pt("columnModel")],e.prototype,"columnModel",void 0),ra([pt("sortController")],e.prototype,"sortController",void 0),e}(vr),aa=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),la=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ua=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastMovingChanged=0,e}return aa(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.refresh=function(t){return this.params=t,this.workOutTemplate()==this.currentTemplate&&(this.workOutShowMenu()==this.currentShowMenu&&(this.workOutSort()==this.currentSort&&(this.setDisplayName(t),!0)))},e.prototype.workOutTemplate=function(){var t=Tt(this.params.template,e.TEMPLATE);return t=t&&t.trim?t.trim():t,t},e.prototype.init=function(t){this.params=t,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(t.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(t)},e.prototype.setDisplayName=function(t){if(this.currentDisplayName!=t.displayName){this.currentDisplayName=t.displayName;var e=xe(this.currentDisplayName);this.eText&&(this.eText.innerHTML=e)}},e.prototype.setupIcons=function(t){this.addInIcon("menu",this.eMenu,t),this.addInIcon("filter",this.eFilter,t)},e.prototype.addInIcon=function(t,e,i){if(null!=e){var o=Mn(t,this.gridOptionsService,i);o&&e.appendChild(o)}},e.prototype.setupTap=function(){var t=this,e=this.gridOptionsService;if(!e.is("suppressTouch")){var i=new oa(this.getGui(),!0),o=e.is("suppressMenuHide"),n=o&&s(this.eMenu),r=n?new oa(this.eMenu,!0):i;if(this.params.enableMenu){var a=n?"EVENT_TAP":"EVENT_LONG_TAP",l=function(i){e.api.showColumnMenuAfterMouseClick(t.params.column,i.touchStart)};this.addManagedListener(r,oa[a],l)}if(this.params.enableSorting){var u=function(e){var i=e.touchStart.target;o&&t.eMenu.contains(i)||t.sortController.progressSort(t.params.column,!1,"uiColumnSorted")};this.addManagedListener(i,oa.EVENT_TAP,u)}this.addDestroyFunc((function(){return i.destroy()})),n&&this.addDestroyFunc((function(){return r.destroy()}))}},e.prototype.workOutShowMenu=function(){var t=!this.gridOptionsService.is("suppressMenuHide"),e=ho()&&t,i=this.params.enableMenu&&!e;return i},e.prototype.setMenu=function(){var t=this;if(this.eMenu)if(this.currentShowMenu=this.workOutShowMenu(),this.currentShowMenu){var e=this.gridOptionsService.is("suppressMenuHide");this.addManagedListener(this.eMenu,"click",(function(){return t.showMenu(t.eMenu)})),this.eMenu.classList.toggle("ag-header-menu-always-show",e)}else an(this.eMenu)},e.prototype.showMenu=function(t){t||(t=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,t,"columnMenu")},e.prototype.workOutSort=function(){return this.params.enableSorting},e.prototype.setupSort=function(){var t=this;if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new sa(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),this.currentSort){var e="ctrl"===this.gridOptionsService.get("multiSortKey");this.addManagedListener(this.params.column,xt.EVENT_MOVING_CHANGED,(function(){t.lastMovingChanged=(new Date).getTime()})),this.eLabel&&this.addManagedListener(this.eLabel,"click",(function(i){var o=t.params.column.isMoving(),n=(new Date).getTime(),r=n-t.lastMovingChanged<50,s=o||r;if(!s){var a=e?i.ctrlKey||i.metaKey:i.shiftKey;t.params.progressSort(a)}}));var i=function(){if(t.addOrRemoveCssClass("ag-header-cell-sorted-asc",t.params.column.isSortAscending()),t.addOrRemoveCssClass("ag-header-cell-sorted-desc",t.params.column.isSortDescending()),t.addOrRemoveCssClass("ag-header-cell-sorted-none",t.params.column.isSortNone()),t.params.column.getColDef().showRowGroup){var e=t.columnModel.getSourceColumnsForGroupColumn(t.params.column),i=null===e||void 0===e?void 0:e.every((function(e){return t.params.column.getSort()==e.getSort()})),o=!i;t.addOrRemoveCssClass("ag-header-cell-sorted-mixed",o)}};this.addManagedListener(this.eventService,ge.EVENT_SORT_CHANGED,i),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_ROW_GROUP_CHANGED,i)}},e.prototype.setupFilterIcon=function(){this.eFilter&&(this.addManagedListener(this.params.column,xt.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},e.prototype.onFilterChanged=function(){var t=this.params.column.isFilterActive();Uo(this.eFilter,t,{skipAriaHidden:!0})},e.TEMPLATE='<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation">\n                <span ref="eText" class="ag-header-cell-text"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n            </div>\n        </div>',la([pt("sortController")],e.prototype,"sortController",void 0),la([pt("menuFactory")],e.prototype,"menuFactory",void 0),la([pt("columnModel")],e.prototype,"columnModel",void 0),la([br("eFilter")],e.prototype,"eFilter",void 0),la([br("eSortIndicator")],e.prototype,"eSortIndicator",void 0),la([br("eMenu")],e.prototype,"eMenu",void 0),la([br("eLabel")],e.prototype,"eLabel",void 0),la([br("eText")],e.prototype,"eText",void 0),la([br("eSortOrder")],e.prototype,"eSortOrder",void 0),la([br("eSortAsc")],e.prototype,"eSortAsc",void 0),la([br("eSortDesc")],e.prototype,"eSortDesc",void 0),la([br("eSortMixed")],e.prototype,"eSortMixed",void 0),la([br("eSortNone")],e.prototype,"eSortNone",void 0),e}(vr),ca=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ha=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},pa=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return ca(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){this.params=t,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},e.prototype.checkWarnings=function(){var t=this.params;if(t.template){var e="AG Grid: A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)";G((function(){return console.warn(e)}),"HeaderGroupComp.templateNotSupported")}},e.prototype.setupExpandIcons=function(){var t=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var e=function(e){if(!Zt(e)){var i=!t.params.columnGroup.isExpanded();t.columnModel.setColumnGroupOpened(t.params.columnGroup.getProvidedColumnGroup(),i,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);var i=function(t){Jt(t)};this.addManagedListener(this.eCloseIcon,"dblclick",i),this.addManagedListener(this.eOpenIcon,"dblclick",i),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();var o=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(o,Rt.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(o,Rt.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},e.prototype.addTouchAndClickListeners=function(t,e){var i=new oa(t,!0);this.addManagedListener(i,oa.EVENT_TAP,e),this.addDestroyFunc((function(){return i.destroy()})),this.addManagedListener(t,"click",e)},e.prototype.updateIconVisibility=function(){var t=this.params.columnGroup;if(t.isExpandable()){var e=this.params.columnGroup.isExpanded();Uo(this.eOpenIcon,e),Uo(this.eCloseIcon,!e)}else Uo(this.eOpenIcon,!1),Uo(this.eCloseIcon,!1)},e.prototype.addInIcon=function(t,e){var i=Mn(t,this.gridOptionsService,null);i&&this.getRefElement(e).appendChild(i)},e.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return Uo(this.eOpenIcon,!1),void Uo(this.eCloseIcon,!1)},e.prototype.setupLabel=function(){var t,e=this.params,i=e.displayName,o=e.columnGroup;if(s(i)){var n=xe(i);this.getRefElement("agLabel").innerHTML=n}this.addOrRemoveCssClass("ag-sticky-label",!(null===(t=o.getColGroupDef())||void 0===t?void 0:t.suppressStickyLabel))},e.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>',ha([pt("columnModel")],e.prototype,"columnModel",void 0),ha([br("agOpened")],e.prototype,"eOpenIcon",void 0),ha([br("agClosed")],e.prototype,"eCloseIcon",void 0),e}(vr),da=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),fa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return da(e,t),e.prototype.isPopup=function(){return!0},e.prototype.setParentComponent=function(e){e.addCssClass("ag-has-popup"),t.prototype.setParentComponent.call(this,e)},e.prototype.destroy=function(){var e=this.parentComponent,i=e&&e.isAlive();i&&e.getGui().classList.remove("ag-has-popup"),t.prototype.destroy.call(this)},e}(vr),ga=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ya=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},_a=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return ga(e,t),e.prototype.init=function(t){this.params=t,this.focusAfterAttached=t.cellStartedEdit,this.eTextArea.setMaxLength(t.maxLength||200).setCols(t.cols||60).setRows(t.rows||10),s(t.value,!0)&&this.eTextArea.setValue(t.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()},e.prototype.onKeyDown=function(t){var e=t.key;(e===Nn.LEFT||e===Nn.UP||e===Nn.RIGHT||e===Nn.DOWN||t.shiftKey&&e===Nn.ENTER)&&t.stopPropagation()},e.prototype.afterGuiAttached=function(){var t=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(t("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},e.prototype.getValue=function(){var t=this.eTextArea.getValue();return s(t)||s(this.params.value)?this.params.parseValue(t):this.params.value},e.TEMPLATE='<div class="ag-large-text">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',ya([br("eTextArea")],e.prototype,"eTextArea",void 0),e}(fa),ma=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),va=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ba=function(t){function e(){var e=t.call(this,'<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>\n            </div>')||this;return e.startedByEnter=!1,e}return ma(e,t),e.prototype.init=function(t){this.focusAfterAttached=t.cellStartedEdit;var e=this,i=e.eSelect,o=e.valueFormatterService,n=e.gridOptionsService,r=t.values,s=t.value,l=t.eventKey;if(a(r))console.warn("AG Grid: no values found for select cellEditor");else{this.startedByEnter=null!=l&&l===Nn.ENTER;var u=!1;r.forEach((function(e){var n={value:e},r=o.formatValue(t.column,null,e),a=null!==r&&void 0!==r;n.text=a?r:e,i.addOption(n),u=u||s===e})),u?i.setValue(t.value,!0):t.values.length&&i.setValue(t.values[0],!0);var c=t.valueListGap,h=t.valueListMaxWidth,p=t.valueListMaxHeight;null!=c&&i.setPickerGap(c),null!=p&&i.setPickerMaxHeight(p),null!=h&&i.setPickerMaxWidth(h),"fullRow"!==n.get("editType")&&this.addManagedListener(this.eSelect,is.EVENT_ITEM_SELECTED,(function(){return t.stopEditing()}))}},e.prototype.afterGuiAttached=function(){var t=this;this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout((function(){t.isAlive()&&t.eSelect.showPicker()}))},e.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},e.prototype.getValue=function(){return this.eSelect.getValue()},e.prototype.isPopup=function(){return!1},va([pt("valueFormatterService")],e.prototype,"valueFormatterService",void 0),va([br("eSelect")],e.prototype,"eSelect",void 0),e}(fa),Ca=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),wa=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Sa=function(t){function e(e){var i=t.call(this,'\n            <div class="ag-cell-edit-wrapper">\n                '+e.getTemplate()+"\n            </div>")||this;return i.cellEditorInput=e,i}return Ca(e,t),e.prototype.init=function(t){this.params=t;var e,i=this.eInput;if(this.cellEditorInput.init(i,t),t.cellStartedEdit){this.focusAfterAttached=!0;var o=t.eventKey;o===Nn.BACKSPACE||t.eventKey===Nn.DELETE?e="":o&&1===o.length?e=o:(e=this.cellEditorInput.getStartValue(),o!==Nn.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,e=this.cellEditorInput.getStartValue();null!=e&&i.setStartValue(e),this.addManagedListener(i.getGui(),"keydown",(function(t){var e=t.key;e!==Nn.PAGE_UP&&e!==Nn.PAGE_DOWN||t.preventDefault()}))},e.prototype.afterGuiAttached=function(){var t,e,i=this.localeService.getLocaleTextFunc(),o=this.eInput;if(o.setInputAriaLabel(i("ariaInputEditor","Input Editor")),this.focusAfterAttached){so()||o.getFocusableElement().focus();var n=o.getInputElement();this.highlightAllOnFocus?n.select():null===(e=(t=this.cellEditorInput).setCaret)||void 0===e||e.call(t)}},e.prototype.focusIn=function(){var t=this.eInput,e=t.getFocusableElement(),i=t.getInputElement();e.focus(),i.select()},e.prototype.getValue=function(){return this.cellEditorInput.getValue()},e.prototype.isPopup=function(){return!1},wa([br("eInput")],e.prototype,"eInput",void 0),e}(fa),Ea=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),xa=function(){function t(){}return t.prototype.getTemplate=function(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'},t.prototype.init=function(t,e){this.eInput=t,this.params=e,null!=e.maxLength&&t.setMaxLength(e.maxLength)},t.prototype.getValue=function(){var t=this.eInput.getValue();return s(t)||s(this.params.value)?this.params.parseValue(t):this.params.value},t.prototype.getStartValue=function(){var t=this.params.useFormatter||this.params.column.getColDef().refData;return t?this.params.formatValue(this.params.value):this.params.value},t.prototype.setCaret=function(){var t=this.eInput.getValue(),e=s(t)&&t.length||0;e&&this.eInput.getInputElement().setSelectionRange(e,e)},t}(),Oa=function(t){function e(){return t.call(this,new xa)||this}return Ea(e,t),e}(Sa),Ra=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ia=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ta="",Pa="",Da=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.refreshCount=0,i}return Ra(e,t),e.prototype.init=function(t){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(t)},e.prototype.showDelta=function(t,e){var i=Math.abs(e),o=t.formatValue(i),n=s(o)?o:i,r=e>=0;this.eDelta.innerHTML=r?Ta+n:Pa+n,this.eDelta.classList.toggle("ag-value-change-delta-up",r),this.eDelta.classList.toggle("ag-value-change-delta-down",!r)},e.prototype.setTimerToRemoveDelta=function(){var t=this;this.refreshCount++;var e=this.refreshCount;window.setTimeout((function(){e===t.refreshCount&&t.hideDeltaValue()}),2e3)},e.prototype.hideDeltaValue=function(){this.eValue.classList.remove("ag-value-change-value-highlight"),rn(this.eDelta)},e.prototype.refresh=function(t){var e=t.value;if(e===this.lastValue)return!1;if(s(t.valueFormatted)?this.eValue.innerHTML=t.valueFormatted:s(t.value)?this.eValue.innerHTML=e:rn(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering())return!1;if("number"===typeof e&&"number"===typeof this.lastValue){var i=e-this.lastValue;this.showDelta(t,i)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=e,!0},e.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',Ia([pt("filterManager")],e.prototype,"filterManager",void 0),e}(vr),ka=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Aa=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},La=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.refreshCount=0,i.eCurrent=i.queryForHtmlElement(".ag-value-slide-current"),i}return ka(e,t),e.prototype.init=function(t){this.refresh(t)},e.prototype.addSlideAnimation=function(){var t=this;this.refreshCount++;var e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=un('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout((function(){e===t.refreshCount&&t.ePrevious.classList.add("ag-value-slide-out-end")}),50),window.setTimeout((function(){e===t.refreshCount&&(t.getGui().removeChild(t.ePrevious),t.ePrevious=null)}),3e3)},e.prototype.refresh=function(t){var e=t.value;return a(e)&&(e=""),e!==this.lastValue&&(!this.filterManager.isSuppressFlashingCellsBecauseFiltering()&&(this.addSlideAnimation(),this.lastValue=e,s(t.valueFormatted)?this.eCurrent.innerHTML=t.valueFormatted:s(t.value)?this.eCurrent.innerHTML=e:rn(this.eCurrent),!0))},e.TEMPLATE='<span>\n            <span class="ag-value-slide-current"></span>\n        </span>',Aa([pt("filterManager")],e.prototype,"filterManager",void 0),e}(vr),Ma=function(){return Ma=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Ma.apply(this,arguments)},Fa=function(){function t(e){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=t.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=e}return t.prototype.setData=function(t){this.setDataCommon(t,!1)},t.prototype.updateData=function(t){this.setDataCommon(t,!0)},t.prototype.setDataCommon=function(t,e){var i=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();var o=this.createDataChangedEvent(t,i,e);this.dispatchLocalEvent(o)},t.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},t.prototype.createDataChangedEvent=function(e,i,o){return{type:t.EVENT_DATA_CHANGED,node:this,oldData:i,newData:e,update:o}},t.prototype.createLocalRowEvent=function(t){return{type:t,node:this}},t.prototype.getRowIndexString=function(){return"top"===this.rowPinned?"t-"+this.rowIndex:"bottom"===this.rowPinned?"b-"+this.rowIndex:this.rowIndex.toString()},t.prototype.createDaemonNode=function(){var e=new t(this.beans);return e.id=this.id,e.data=this.data,e.__daemon=!0,e.selected=this.selected,e.level=this.level,e},t.prototype.setDataAndId=function(t,e){var i=s(this.id)?this.createDaemonNode():null,o=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(e),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);var n=this.createDataChangedEvent(t,o,!1);this.dispatchLocalEvent(n)},t.prototype.checkRowSelectable=function(){var t=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(!t||t(this))},t.prototype.setRowSelectable=function(e){if(this.selectable!==e){this.selectable=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_SELECTABLE_CHANGED));var i=this.beans.gridOptionsService.is("groupSelectsChildren");if(i){var o=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:null!==o&&void 0!==o&&o,source:"selectableChanged"})}}},t.prototype.setId=function(e){var i=this.beans.gridOptionsService.getCallback("getRowId");if(i)if(this.data){var o=this.getGroupKeys(!0);this.id=i({data:this.data,parentKeys:o.length>0?o:void 0,level:this.level}),null!==this.id&&"string"===typeof this.id&&this.id.startsWith(t.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row IDs cannot start with "+t.ID_PREFIX_ROW_GROUP+", this is a reserved prefix for AG Grid's row grouping feature."),null!==this.id&&"string"!==typeof this.id&&(this.id=""+this.id)}else this.id=void 0;else this.id=e},t.prototype.getGroupKeys=function(t){void 0===t&&(t=!1);var e=[],i=this;t&&(i=i.parent);while(i&&i.level>=0)e.push(i.key),i=i.parent;return e.reverse(),e},t.prototype.isPixelInRange=function(t){return!(!s(this.rowTop)||!s(this.rowHeight))&&(t>=this.rowTop&&t<this.rowTop+this.rowHeight)},t.prototype.setFirstChild=function(e){this.firstChild!==e&&(this.firstChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_FIRST_CHILD_CHANGED)))},t.prototype.setLastChild=function(e){this.lastChild!==e&&(this.lastChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_LAST_CHILD_CHANGED)))},t.prototype.setChildIndex=function(e){this.childIndex!==e&&(this.childIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_CHILD_INDEX_CHANGED)))},t.prototype.setRowTop=function(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_TOP_CHANGED)),this.setDisplayed(null!==e))},t.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},t.prototype.setDisplayed=function(e){this.displayed!==e&&(this.displayed=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_DISPLAYED_CHANGED)))},t.prototype.setDragging=function(e){this.dragging!==e&&(this.dragging=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_DRAGGING_CHANGED)))},t.prototype.setHighlighted=function(e){e!==this.highlighted&&(this.highlighted=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_HIGHLIGHT_CHANGED)))},t.prototype.setHovered=function(t){this.hovered!==t&&(this.hovered=t)},t.prototype.isHovered=function(){return this.hovered},t.prototype.setAllChildrenCount=function(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},t.prototype.setMaster=function(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_MASTER_CHANGED)))},t.prototype.setGroup=function(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_GROUP_CHANGED)))},t.prototype.setRowHeight=function(e,i){void 0===i&&(i=!1),this.rowHeight=e,this.rowHeightEstimated=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_HEIGHT_CHANGED))},t.prototype.setRowAutoHeight=function(t,e){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[e.getId()]=t,null!=t&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=Y(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},t.prototype.checkAutoHeights=function(){var t=this,e=!1,i=!0,o=0,n=this.__autoHeights;if(null!=n){var r=this.beans.columnModel.getAllDisplayedAutoHeightCols();if(r.forEach((function(r){var s=n[r.getId()];if(null==s){if(!t.beans.columnModel.isColSpanActive())return void(e=!0);var a=[];switch(r.getPinned()){case"left":a=t.beans.columnModel.getDisplayedLeftColumnsForRow(t);break;case"right":a=t.beans.columnModel.getDisplayedRightColumnsForRow(t);break;case null:a=t.beans.columnModel.getViewportCenterColumnsForRow(t);break}if(a.includes(r))return void(e=!0);s=-1}else i=!1;s>o&&(o=s)})),!e&&((i||o<10)&&(o=this.beans.gridOptionsService.getRowHeightForNode(this).height),o!=this.rowHeight)){this.setRowHeight(o);var s=this.beans.rowModel;s.onRowHeightChangedDebounced&&s.onRowHeightChangedDebounced()}}},t.prototype.setRowIndex=function(e){this.rowIndex!==e&&(this.rowIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_ROW_INDEX_CHANGED)))},t.prototype.setUiLevel=function(e){this.uiLevel!==e&&(this.uiLevel=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_UI_LEVEL_CHANGED)))},t.prototype.setExpanded=function(e,i){if(this.expanded!==e){this.expanded=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_EXPANDED_CHANGED));var o=Object.assign({},this.createGlobalRowEvent(ge.EVENT_ROW_GROUP_OPENED),{expanded:e,event:i||null});this.beans.rowNodeEventThrottle.dispatchExpanded(o),this.sibling&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},t.prototype.createGlobalRowEvent=function(t){return{type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi}},t.prototype.dispatchLocalEvent=function(t){this.eventService&&this.eventService.dispatchEvent(t)},t.prototype.setDataValue=function(t,e,i){var o=this,n=function(){var e;return"string"!==typeof t?t:null!==(e=o.beans.columnModel.getGridColumn(t))&&void 0!==e?e:o.beans.columnModel.getPrimaryColumn(t)},r=n(),s=this.getValueFromValueService(r);if(this.beans.gridOptionsService.is("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(r,s,e,i),!1;var a=this.beans.valueService.setValue(this,r,e,i);return this.dispatchCellChangedEvent(r,e,s),this.checkRowSelectable(),a},t.prototype.getValueFromValueService=function(t){var e=this.leafGroup&&this.beans.columnModel.isPivotMode(),i=this.group&&this.expanded&&!this.footer&&!e,o=this.beans.gridOptionsService.getGroupIncludeFooter(),n=o({node:this}),r=this.beans.gridOptionsService.is("groupSuppressBlankHeader"),s=i&&n&&!r,a=this.beans.valueService.getValue(t,this,!1,s);return a},t.prototype.dispatchEventForSaveValueReadOnly=function(t,e,i,o){var n={type:ge.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,data:this.data,node:this,oldValue:e,newValue:i,value:i,source:o};this.beans.eventService.dispatchEvent(n)},t.prototype.setGroupValue=function(t,e){var i=this.beans.columnModel.getGridColumn(t);a(this.groupData)&&(this.groupData={});var o=i.getColId(),n=this.groupData[o];n!==e&&(this.groupData[o]=e,this.dispatchCellChangedEvent(i,e,n))},t.prototype.setAggData=function(t){var e=this,i=T([this.aggData,t]),o=this.aggData;this.aggData=t,this.eventService&&i.forEach((function(t){var i=e.aggData?e.aggData[t]:void 0,n=o?o[t]:void 0;if(i!==n){var r=e.beans.columnModel.lookupGridColumn(t);r&&e.dispatchCellChangedEvent(r,i,n)}}))},t.prototype.updateHasChildren=function(){var e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0,i=this.beans.gridOptionsService.isRowModelType("serverSide");if(i){var o=this.beans.gridOptionsService.is("treeData"),n=this.beans.gridOptionsService.get("isServerSideGroup");e=!this.stub&&!this.footer&&(o?!!n&&n(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_HAS_CHILDREN_CHANGED)))},t.prototype.hasChildren=function(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren},t.prototype.isEmptyRowGroupNode=function(){return this.group&&l(this.childrenAfterGroup)},t.prototype.dispatchCellChangedEvent=function(e,i,o){var n={type:t.EVENT_CELL_CHANGED,node:this,column:e,newValue:i,oldValue:o};this.dispatchLocalEvent(n)},t.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},t.prototype.isExpandable=function(){return!!(this.hasChildren()&&!this.footer||this.master)},t.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},t.prototype.depthFirstSearch=function(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach((function(e){return e.depthFirstSearch(t)})),t(this)},t.prototype.calculateSelectedFromChildren=function(){var t,e=!1,i=!1,o=!1;if(!(null===(t=this.childrenAfterGroup)||void 0===t?void 0:t.length))return this.selectable?this.selected:null;for(var n=0;n<this.childrenAfterGroup.length;n++){var r=this.childrenAfterGroup[n],s=r.isSelected();if(!r.selectable){var a=r.calculateSelectedFromChildren();if(null===a)continue;s=a}switch(s){case!0:e=!0;break;case!1:i=!0;break;default:o=!0;break}}return o||e&&i?void 0:!!e||!i&&(this.selectable?this.selected:null)},t.prototype.setSelectedInitialValue=function(t){this.selected=t},t.prototype.selectThisNode=function(e,i,o){void 0===o&&(o="api");var n=!this.selectable&&e,r=this.selected===e;if(n||r)return!1;if(this.selected=e,this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(t.EVENT_ROW_SELECTED));var s=this.sibling;s&&s.footer&&s.dispatchLocalEvent(s.createLocalRowEvent(t.EVENT_ROW_SELECTED))}var a=Ma(Ma({},this.createGlobalRowEvent(ge.EVENT_ROW_SELECTED)),{event:i||null,source:o});return this.beans.eventService.dispatchEvent(a),!0},t.prototype.setSelected=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i="api"),"boolean"!==typeof i?this.setSelectedParams({newValue:t,clearSelection:e,rangeSelect:!1,source:i}):console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.")},t.prototype.setSelectedParams=function(t){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):void 0===this.id?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Ma(Ma({},t),{nodes:[this.footer?this.sibling:this]}))},t.prototype.isRowPinned=function(){return"top"===this.rowPinned||"bottom"===this.rowPinned},t.prototype.isParentOfNode=function(t){var e=this.parent;while(e){if(e===t)return!0;e=e.parent}return!1},t.prototype.addEventListener=function(t,e){this.eventService||(this.eventService=new vt),this.eventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.eventService&&(this.eventService.removeEventListener(t,e),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))},t.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(t.EVENT_MOUSE_ENTER))},t.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(t.EVENT_MOUSE_LEAVE))},t.prototype.getFirstChildOfFirstChild=function(t){var e=this,i=!0,o=!1,n=null;while(i&&!o){var r=e.parent,a=s(r)&&e.firstChild;a?r.rowGroupColumn===t&&(o=!0,n=r):i=!1,e=r}return o?n:null},t.prototype.isFullWidthCell=function(){if(this.detail)return!0;var t=this.beans.gridOptionsService.getCallback("isFullWidthRow");return!!t&&t({rowNode:this})},t.prototype.getRoute=function(){if(null!=this.key){var t=[],e=this;while(null!=e.key)t.push(e.key),e=e.parent;return t.reverse()}},t.prototype.createFooter=function(){var e=this;if(!this.sibling){var i=new Set(["eventService","__objectId","sticky"]),o=new t(this.beans);Object.keys(this).forEach((function(t){i.has(t)||(o[t]=e[t])})),o.footer=!0,o.setRowTop(null),o.setRowIndex(null),o.oldRowTop=null,o.id="rowGroupFooter_"+this.id,o.sibling=this,this.sibling=o}},t.prototype.destroyFooter=function(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)},t.ID_PREFIX_ROW_GROUP="row-group-",t.ID_PREFIX_TOP_PINNED="t-",t.ID_PREFIX_BOTTOM_PINNED="b-",t.OBJECT_ID_SEQUENCE=0,t.EVENT_ROW_SELECTED="rowSelected",t.EVENT_DATA_CHANGED="dataChanged",t.EVENT_CELL_CHANGED="cellChanged",t.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",t.EVENT_MASTER_CHANGED="masterChanged",t.EVENT_GROUP_CHANGED="groupChanged",t.EVENT_MOUSE_ENTER="mouseEnter",t.EVENT_MOUSE_LEAVE="mouseLeave",t.EVENT_HEIGHT_CHANGED="heightChanged",t.EVENT_TOP_CHANGED="topChanged",t.EVENT_DISPLAYED_CHANGED="displayedChanged",t.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",t.EVENT_LAST_CHILD_CHANGED="lastChildChanged",t.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",t.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",t.EVENT_EXPANDED_CHANGED="expandedChanged",t.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",t.EVENT_SELECTABLE_CHANGED="selectableChanged",t.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",t.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",t.EVENT_DRAGGING_CHANGED="draggingChanged",t}(),Na=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Va=function(){return Va=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Va.apply(this,arguments)},Ba=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ga=function(t){function e(){return t.call(this,'\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return Na(e,t),e.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0),Pi(this.eCheckbox.getInputElement(),"polite")},e.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},e.prototype.onDataChanged=function(){this.onSelectionChanged()},e.prototype.onSelectableChanged=function(){this.showOrHideSelect()},e.prototype.onSelectionChanged=function(){var t=this.localeService.getLocaleTextFunc(),e=this.rowNode.isSelected(),i=Xi(t,e),o=t("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(e,!0),this.eCheckbox.setInputAriaLabel(o+" ("+i+")")},e.prototype.onClicked=function(t,e,i){return this.rowNode.setSelectedParams({newValue:t,rangeSelect:i.shiftKey,groupSelectsFiltered:e,event:i,source:"checkboxSelected"})},e.prototype.init=function(t){var e=this;this.rowNode=t.rowNode,this.column=t.column,this.overrides=t.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",(function(t){Jt(t)})),this.addManagedListener(this.eCheckbox.getInputElement(),"click",(function(t){Jt(t);var i=e.gridOptionsService.is("groupSelectsFiltered"),o=e.eCheckbox.getValue();if(e.shouldHandleIndeterminateState(o,i)){var n=e.onClicked(!0,i,t||{});0===n&&e.onClicked(!1,i,t)}else o?e.onClicked(!1,i,t):e.onClicked(!0,i,t||{})})),this.addManagedListener(this.rowNode,Fa.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this));var i=this.gridOptionsService.get("isRowSelectable"),o=i||"function"===typeof this.getIsVisible();if(o){var n=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,n),this.addManagedListener(this.rowNode,Fa.EVENT_DATA_CHANGED,n),this.addManagedListener(this.rowNode,Fa.EVENT_CELL_CHANGED,n),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},e.prototype.shouldHandleIndeterminateState=function(t,e){return e&&(void 0===this.eCheckbox.getPreviousValue()||void 0===t)&&this.gridOptionsService.isRowModelType("clientSide")},e.prototype.showOrHideSelect=function(){var t,e,i,o,n=this.rowNode.selectable,r=this.getIsVisible();if(n)if("function"===typeof r){var s=null===(t=this.overrides)||void 0===t?void 0:t.callbackParams,a=null===(e=this.column)||void 0===e?void 0:e.createColumnFunctionCallbackParams(this.rowNode);n=!!a&&r(Va(Va({},s),a))}else n=null!==r&&void 0!==r&&r;var l=null===(i=this.column)||void 0===i?void 0:i.getColDef().showDisabledCheckboxes;if(l)return this.eCheckbox.setDisabled(!n),this.setVisible(!0),void this.setDisplayed(!0);(null===(o=this.overrides)||void 0===o?void 0:o.removeHidden)?this.setDisplayed(n):this.setVisible(n)},e.prototype.getIsVisible=function(){var t,e;return this.overrides?this.overrides.isVisible:null===(e=null===(t=this.column)||void 0===t?void 0:t.getColDef())||void 0===e?void 0:e.checkboxSelection},Ba([br("eCheckbox")],e.prototype,"eCheckbox",void 0),Ba([ut],e.prototype,"postConstruct",null),e}(vr),ja=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ha=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},$a=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(t){t[t["ToolPanel"]=0]="ToolPanel",t[t["HeaderCell"]=1]="HeaderCell",t[t["RowDrag"]=2]="RowDrag",t[t["ChartPanel"]=3]="ChartPanel",t[t["AdvancedFilterBuilder"]=4]="AdvancedFilterBuilder"})(Gs||(Gs={})),function(t){t[t["Up"]=0]="Up",t[t["Down"]=1]="Down"}(js||(js={})),function(t){t[t["Left"]=0]="Left",t[t["Right"]=1]="Right"}(Hs||(Hs={}));var Wa,Ua=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragSourceAndParamsList=[],e.dropTargets=[],e}var i;return ja(e,t),i=e,e.prototype.init=function(){this.ePinnedIcon=Ln("columnMovePin",this.gridOptionsService,null),this.eHideIcon=Ln("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=Ln("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=Ln("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=Ln("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=Ln("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=Ln("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=Ln("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=Ln("dropNotAllowed",this.gridOptionsService,null)},e.prototype.addDragSource=function(t,e){void 0===e&&(e=!1);var i={eElement:t.eElement,dragStartPixels:t.dragStartPixels,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:e};this.dragSourceAndParamsList.push({params:i,dragSource:t}),this.dragService.addDragSource(i)},e.prototype.removeDragSource=function(t){var e=this.dragSourceAndParamsList.find((function(e){return e.dragSource===t}));e&&(this.dragService.removeDragSource(e.params),Nt(this.dragSourceAndParamsList,e))},e.prototype.clearDragSourceParamsList=function(){var t=this;this.dragSourceAndParamsList.forEach((function(e){return t.dragService.removeDragSource(e.params)})),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0},e.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},e.prototype.onDragStart=function(t,e){this.dragging=!0,this.dragSource=t,this.eventLastTime=e,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},e.prototype.onDragStop=function(t){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var e=this.createDropTargetEvent(this.lastDropTarget,t,null,null,!1);this.lastDropTarget.onDragStop(e)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},e.prototype.onDragging=function(t,e){var i,o,n,r,s=this,a=this.getHorizontalDirection(t),l=this.getVerticalDirection(t);this.eventLastTime=t,this.positionGhost(t);var u=this.dropTargets.filter((function(e){return s.isMouseOnDropTarget(t,e)})),c=this.findCurrentDropTarget(t,u);if(c!==this.lastDropTarget)this.leaveLastTargetIfExists(t,a,l,e),null!==this.lastDropTarget&&null===c&&(null===(o=(i=this.dragSource).onGridExit)||void 0===o||o.call(i,this.dragItem)),null===this.lastDropTarget&&null!==c&&(null===(r=(n=this.dragSource).onGridEnter)||void 0===r||r.call(n,this.dragItem)),this.enterDragTargetIfExists(c,t,a,l,e),this.lastDropTarget=c;else if(c&&c.onDragging){var h=this.createDropTargetEvent(c,t,a,l,e);c.onDragging(h)}},e.prototype.getAllContainersFromDropTarget=function(t){var e=t.getSecondaryContainers?t.getSecondaryContainers():null,i=[[t.getContainer()]];return e?i.concat(e):i},e.prototype.allContainersIntersect=function(t,e){var i,o;try{for(var n=$a(e),r=n.next();!r.done;r=n.next()){var s=r.value,a=s.getBoundingClientRect();if(0===a.width||0===a.height)return!1;var l=t.clientX>=a.left&&t.clientX<a.right,u=t.clientY>=a.top&&t.clientY<a.bottom;if(!l||!u)return!1}}catch(c){i={error:c}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(i)throw i.error}}return!0},e.prototype.isMouseOnDropTarget=function(t,e){var i,o,n=this.getAllContainersFromDropTarget(e),r=!1;try{for(var s=$a(n),a=s.next();!a.done;a=s.next()){var l=a.value;if(this.allContainersIntersect(t,l)){r=!0;break}}}catch(u){i={error:u}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return!(e.targetContainsSource&&!e.getContainer().contains(this.dragSource.eElement))&&(r&&e.isInterestedIn(this.dragSource.type,this.dragSource.eElement))},e.prototype.findCurrentDropTarget=function(t,e){var i,o,n,r,s=e.length;if(0===s)return null;if(1===s)return e[0];var a=this.gridOptionsService.getRootNode(),l=a.elementsFromPoint(t.clientX,t.clientY);try{for(var u=$a(l),c=u.next();!c.done;c=u.next()){var h=c.value;try{for(var p=(n=void 0,$a(e)),d=p.next();!d.done;d=p.next()){var f=d.value,g=Wt(this.getAllContainersFromDropTarget(f));if(-1!==g.indexOf(h))return f}}catch(y){n={error:y}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}}}catch(_){i={error:_}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return null},e.prototype.enterDragTargetIfExists=function(t,e,i,o,n){if(t){if(t.onDragEnter){var r=this.createDropTargetEvent(t,e,i,o,n);t.onDragEnter(r)}this.setGhostIcon(t.getIconName?t.getIconName():null)}},e.prototype.leaveLastTargetIfExists=function(t,e,i,o){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var n=this.createDropTargetEvent(this.lastDropTarget,t,e,i,o);this.lastDropTarget.onDragLeave(n)}this.setGhostIcon(null)}},e.prototype.addDropTarget=function(t){this.dropTargets.push(t)},e.prototype.removeDropTarget=function(t){this.dropTargets=this.dropTargets.filter((function(e){return e.getContainer()!==t.getContainer()}))},e.prototype.hasExternalDropZones=function(){return this.dropTargets.some((function(t){return t.external}))},e.prototype.findExternalZone=function(t){var e=this.dropTargets.filter((function(t){return t.external}));return e.find((function(e){return e.getContainer()===t.getContainer()}))||null},e.prototype.getHorizontalDirection=function(t){var e=this.eventLastTime&&this.eventLastTime.clientX,i=t.clientX;return e===i?null:e>i?Hs.Left:Hs.Right},e.prototype.getVerticalDirection=function(t){var e=this.eventLastTime&&this.eventLastTime.clientY,i=t.clientY;return e===i?null:e>i?js.Up:js.Down},e.prototype.createDropTargetEvent=function(t,e,i,o,n){var r=t.getContainer(),s=r.getBoundingClientRect(),a=this,l=a.gridApi,u=a.columnApi,c=a.dragItem,h=a.dragSource,p=e.clientX-s.left,d=e.clientY-s.top;return{event:e,x:p,y:d,vDirection:o,hDirection:i,dragSource:h,fromNudge:n,dragItem:c,api:l,columnApi:u,dropZoneTarget:r}},e.prototype.positionGhost=function(t){var e=this.eGhost;if(e){var i=e.getBoundingClientRect(),o=i.height,n=yo()-2,r=_o()-2,s=tn(e.offsetParent),a=t.clientY,l=t.clientX,u=a-s.top-o/2,c=l-s.left-10,h=this.gridOptionsService.getDocument(),p=h.defaultView||window,d=p.pageYOffset||h.documentElement.scrollTop,f=p.pageXOffset||h.documentElement.scrollLeft;n>0&&c+e.clientWidth>n+f&&(c=n+f-e.clientWidth),c<0&&(c=0),r>0&&u+e.clientHeight>r+d&&(u=r+d-e.clientHeight),u<0&&(u=0),e.style.left=c+"px",e.style.top=u+"px"}},e.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},e.prototype.createGhost=function(){this.eGhost=un(i.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);var t=this.environment.getTheme().theme;t&&this.eGhost.classList.add(t),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var e=this.eGhost.querySelector(".ag-dnd-ghost-label"),o=this.dragSource.dragItemName;H(o)&&(o=o()),e.innerHTML=xe(o)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var n=this.gridOptionsService.getDocument(),r=null;try{r=n.fullscreenElement}catch(l){}finally{if(!r){var s=this.gridOptionsService.getRootNode(),a=s.querySelector("body");r=a||(s instanceof ShadowRoot?s:null===s||void 0===s?void 0:s.documentElement)}}this.eGhostParent=r,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},e.prototype.setGhostIcon=function(t,e){void 0===e&&(e=!1),rn(this.eGhostIcon);var o=null;switch(t||(t=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():i.ICON_NOT_ALLOWED),t){case i.ICON_PINNED:o=this.ePinnedIcon;break;case i.ICON_MOVE:o=this.eMoveIcon;break;case i.ICON_LEFT:o=this.eLeftIcon;break;case i.ICON_RIGHT:o=this.eRightIcon;break;case i.ICON_GROUP:o=this.eGroupIcon;break;case i.ICON_AGGREGATE:o=this.eAggregateIcon;break;case i.ICON_PIVOT:o=this.ePivotIcon;break;case i.ICON_NOT_ALLOWED:o=this.eDropNotAllowedIcon;break;case i.ICON_HIDE:o=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",e),o===this.eHideIcon&&this.gridOptionsService.is("suppressDragLeaveHidesColumns")||o&&this.eGhostIcon.appendChild(o)},e.ICON_PINNED="pinned",e.ICON_MOVE="move",e.ICON_LEFT="left",e.ICON_RIGHT="right",e.ICON_GROUP="group",e.ICON_AGGREGATE="aggregate",e.ICON_PIVOT="pivot",e.ICON_NOT_ALLOWED="notAllowed",e.ICON_HIDE="hide",e.GHOST_TEMPLATE='<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>',Ha([pt("dragService")],e.prototype,"dragService",void 0),Ha([pt("mouseEventService")],e.prototype,"mouseEventService",void 0),Ha([pt("columnApi")],e.prototype,"columnApi",void 0),Ha([pt("gridApi")],e.prototype,"gridApi",void 0),Ha([ut],e.prototype,"init",null),Ha([ct],e.prototype,"clearDragSourceParamsList",null),e=i=Ha([ht("dragAndDropService")],e),e}(le),za=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ka=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ya=function(t){function e(e,i,o,n,r,s){var a=t.call(this)||this;return a.cellValueFn=e,a.rowNode=i,a.column=o,a.customGui=n,a.dragStartPixels=r,a.suppressVisibilityChange=s,a.dragSource=null,a}return za(e,t),e.prototype.isCustomGui=function(){return null!=this.customGui},e.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Mn("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var t=this.gridOptionsService.is("rowDragManaged")?new Qa(this,this.beans,this.rowNode,this.column):new Xa(this,this.beans,this.rowNode,this.column);this.createManagedBean(t,this.beans.context)}},e.prototype.setDragElement=function(t,e){this.setTemplateFromElement(t),this.addDragSource(e)},e.prototype.getSelectedNodes=function(){var t=this.gridOptionsService.is("rowDragMultiRow");if(!t)return[this.rowNode];var e=this.beans.selectionService.getSelectedNodes();return-1!==e.indexOf(this.rowNode)?e:[this.rowNode]},e.prototype.checkCompatibility=function(){var t=this.gridOptionsService.is("rowDragManaged"),e=this.gridOptionsService.is("treeData");e&&t&&G((function(){return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true")}),"RowDragComp.managedAndTreeData")},e.prototype.getDragItem=function(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}},e.prototype.getRowDragText=function(t){if(t){var e=t.getColDef();if(e.rowDragText)return e.rowDragText}return this.gridOptionsService.get("rowDragText")},e.prototype.addDragSource=function(t){var e=this;void 0===t&&(t=4),this.dragSource&&this.removeDragSource();var i=this.getRowDragText(this.column),o=this.localeService.getLocaleTextFunc();this.dragSource={type:Gs.RowDrag,eElement:this.getGui(),dragItemName:function(){var t,n=e.getDragItem(),r=(null===(t=n.rowNodes)||void 0===t?void 0:t.length)||1;return i?i(n,r):1===r?e.cellValueFn():r+" "+o("rowDragRows","rows")},getDragItem:function(){return e.getDragItem()},dragStartPixels:t,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},e.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},Ka([pt("beans")],e.prototype,"beans",void 0),Ka([ut],e.prototype,"postConstruct",null),Ka([ct],e.prototype,"removeDragSource",null),e}(vr),qa=function(t){function e(e,i,o){var n=t.call(this)||this;return n.parent=e,n.rowNode=i,n.column=o,n}return za(e,t),e.prototype.setDisplayedOrVisible=function(t){var e={skipAriaHidden:!0};if(t)this.parent.setDisplayed(!1,e);else{var i=!0,o=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),o=H(this.column.getColDef().rowDrag)),o?(this.parent.setDisplayed(!0,e),this.parent.setVisible(i,e)):(this.parent.setDisplayed(i,e),this.parent.setVisible(!0,e))}},e}(le),Xa=function(t){function e(e,i,o,n){var r=t.call(this,e,o,n)||this;return r.beans=i,r}return za(e,t),e.prototype.postConstruct=function(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,ge.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},e.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},e.prototype.workOutVisibility=function(){var t=this.gridOptionsService.is("suppressRowDrag");this.setDisplayedOrVisible(t)},Ka([ut],e.prototype,"postConstruct",null),e}(qa),Qa=function(t){function e(e,i,o,n){var r=t.call(this,e,o,n)||this;return r.beans=i,r}return za(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,ge.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,ge.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,ge.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,ge.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},e.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},e.prototype.workOutVisibility=function(){var t=this.beans.ctrlsService.getGridBodyCtrl(),e=t.getRowDragFeature(),i=e&&e.shouldPreventRowMove(),o=this.gridOptionsService.is("suppressRowDrag"),n=this.beans.dragAndDropService.hasExternalDropZones(),r=i&&!n||o;this.setDisplayedOrVisible(r)},Ka([ut],e.prototype,"postConstruct",null),e}(qa),Ja=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Za=function(){return Za=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Za.apply(this,arguments)},tl=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},el=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ja(e,t),e.prototype.init=function(t,e,i,o,n,r,s){this.params=s,this.eGui=e,this.eCheckbox=i,this.eExpanded=o,this.eContracted=n,this.comp=t,this.compClass=r;var a=s.node,l=s.value,u=s.colDef,c=this.isTopLevelFooter();if(!c){var h=this.isEmbeddedRowMismatch();if(h)return;var p=!0===(null===u||void 0===u?void 0:u.showRowGroup),d=null==l&&!a.master;if(!p&&d)return;if(a.footer&&this.gridOptionsService.is("groupHideOpenParents")){var f=u&&u.showRowGroup,g=a.rowGroupColumn&&a.rowGroupColumn.getColId();if(f!==g)return}}this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.expandListener=null},e.prototype.refreshAriaExpanded=function(){var t=this.params,e=t.node,i=t.eParentOfValue;if(this.expandListener&&(this.expandListener=this.expandListener()),this.isExpandable()){var o=function(){Mi(i,!!e.expanded)};this.expandListener=this.addManagedListener(e,Fa.EVENT_EXPANDED_CHANGED,o)||null,o()}else Fi(i)},e.prototype.isTopLevelFooter=function(){if(!this.gridOptionsService.is("groupIncludeTotalFooter"))return!1;if(null!=this.params.value||-1!=this.params.node.level)return!1;var t=this.params.colDef,e=null==t;if(e)return!0;if(!0===t.showRowGroup)return!0;var i=this.columnModel.getRowGroupColumns();if(!i||0===i.length)return!0;var o=i[0];return o.getId()===t.showRowGroup},e.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsService.is("embedFullWidthRows"))return!1;var t="left"===this.params.pinned,e="right"===this.params.pinned,i=!t&&!e;return this.gridOptionsService.is("enableRtl")?this.columnModel.isPinningLeft()?!e:!i:this.columnModel.isPinningLeft()?!t:!i},e.prototype.findDisplayedGroupNode=function(){var t=this.params.column,e=this.params.node;if(this.showingValueForOpenedParent){var i=e.parent;while(null!=i){if(i.rowGroupColumn&&t.isRowGroupDisplayed(i.rowGroupColumn.getId())){this.displayedGroupNode=i;break}i=i.parent}}a(this.displayedGroupNode)&&(this.displayedGroupNode=e)},e.prototype.setupShowingValueForOpenedParent=function(){var t=this.params.node,e=this.params.column;if(this.gridOptionsService.is("groupHideOpenParents"))if(t.groupData){var i=null!=t.rowGroupColumn;if(i){var o=t.rowGroupColumn.getId(),n=e.isRowGroupDisplayed(o);if(n)return void(this.showingValueForOpenedParent=!1)}var r=null!=t.groupData[e.getId()];this.showingValueForOpenedParent=r}else this.showingValueForOpenedParent=!1;else this.showingValueForOpenedParent=!1},e.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},e.prototype.addGroupValue=function(){var t=this.adjustParamsWithDetailsFromRelatedColumn(),e=this.getInnerCompDetails(t),i=t.valueFormatted,o=t.value,n=i;if(null==n)if(""===o&&this.params.node.group){var r=this.localeService.getLocaleTextFunc();n=r("blanks","(Blanks)")}else n=null!==o&&void 0!==o?o:null;this.comp.setInnerRenderer(e,n)},e.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var t=this.displayedGroupNode.rowGroupColumn,e=this.params.column;if(!t)return this.params;var i=null!=e;if(i){var o=e.isRowGroupDisplayed(t.getId());if(!o)return this.params}var n=this.params,r=this.params,s=r.value,a=r.node,l=this.valueFormatterService.formatValue(t,a,s),u=Za(Za({},n),{valueFormatted:l});return u},e.prototype.addFooterValue=function(){var t=this.params.footerValueGetter,e="";if(t){var i=w(this.params);i.value=this.params.value,"function"===typeof t?e=t(i):"string"===typeof t?e=this.expressionService.evaluate(t,i):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else e="Total "+(null!=this.params.value?this.params.value:"");var o=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(o,e)},e.prototype.getInnerCompDetails=function(t){var e=this;if(t.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),t);var i=this.userComponentFactory.getInnerRendererDetails(t,t),o=function(t){return t&&t.componentClass==e.compClass};if(i&&!o(i))return i;var n=this.displayedGroupNode.rowGroupColumn,r=n?n.getColDef():void 0;if(r){var s=this.userComponentFactory.getCellRendererDetails(r,t);if(s&&!o(s))return s;if(o(s)&&r.cellRendererParams&&r.cellRendererParams.innerRenderer){var a=this.userComponentFactory.getInnerRendererDetails(r.cellRendererParams,t);return a}}},e.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,Fa.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},e.prototype.updateChildCount=function(){var t=this.displayedGroupNode.allChildrenCount,e=this.isShowRowGroupForThisRow(),i=e&&null!=t&&t>=0,o=i?"("+t+")":"";this.comp.setChildCount(o)},e.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsService.is("treeData"))return!0;var t=this.displayedGroupNode.rowGroupColumn;if(!t)return!1;var e=this.params.column,i=null==e||e.isRowGroupDisplayed(t.getId());return i},e.prototype.addExpandAndContract=function(){var t,e=this.params,i=Mn("groupExpanded",this.gridOptionsService,null),o=Mn("groupContracted",this.gridOptionsService,null);i&&this.eExpanded.appendChild(i),o&&this.eContracted.appendChild(o);var n=e.eGridCell,r=(null===(t=this.params.column)||void 0===t?void 0:t.isCellEditable(e.node))&&this.gridOptionsService.is("enableGroupEdit");r||!this.isExpandable()||e.suppressDoubleClickExpand||this.addManagedListener(n,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(n,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(e.node,Fa.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var s=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,Fa.EVENT_ALL_CHILDREN_COUNT_CHANGED,s),this.addManagedListener(this.displayedGroupNode,Fa.EVENT_MASTER_CHANGED,s),this.addManagedListener(this.displayedGroupNode,Fa.EVENT_GROUP_CHANGED,s),this.addManagedListener(this.displayedGroupNode,Fa.EVENT_HAS_CHILDREN_CHANGED,s)},e.prototype.onExpandClicked=function(t){Zt(t)||(Jt(t),this.onExpandOrContract(t))},e.prototype.onExpandOrContract=function(t){var e=this.displayedGroupNode,i=!e.expanded;!i&&e.sticky&&this.scrollToStickyNode(e),e.setExpanded(i,t)},e.prototype.scrollToStickyNode=function(t){var e=this.ctrlsService.getGridBodyCtrl(),i=e.getScrollFeature();i.setVerticalScrollPosition(t.rowTop-t.stickyRowTop)},e.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var t=this.displayedGroupNode,e=this.columnModel.isPivotMode()&&t.leafGroup,i=t.isExpandable()&&!t.footer&&!e;if(!i)return!1;var o=this.params.column,n=null!=o&&"string"===typeof o.getColDef().showRowGroup;if(n){var r=this.isShowRowGroupForThisRow();return r}return!0},e.prototype.showExpandAndContractIcons=function(){var t=this,e=t.params,i=t.displayedGroupNode,o=t.columnModel,n=e.node,r=this.isExpandable();if(r){var s=!!this.showingValueForOpenedParent||n.expanded;this.comp.setExpandedDisplayed(s),this.comp.setContractedDisplayed(!s)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var a=o.isPivotMode(),l=a&&i.leafGroup,u=r&&!l,c=n.footer&&-1===n.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",u),this.comp.addOrRemoveCssClass("ag-row-group",u),a?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",l):c||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!u)},e.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()},e.prototype.setupIndent=function(){var t=this.params.node,e=this.params.suppressPadding;e||(this.addManagedListener(t,Fa.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},e.prototype.setIndent=function(){if(!this.gridOptionsService.is("groupHideOpenParents")){var t=this.params,e=t.node,i=!!t.colDef,o=this.gridOptionsService.is("treeData"),n=!i||o||!0===t.colDef.showRowGroup,r=n?e.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+r,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},e.prototype.addFullWidthRowDraggerIfNeeded=function(){var t=this;if(this.params.fullWidth&&this.params.rowDrag){var e=new Ya((function(){return t.params.value}),this.params.node);this.createManagedBean(e,this.context),this.eGui.insertAdjacentElement("afterbegin",e.getGui())}},e.prototype.isUserWantsSelected=function(){var t=this.params.checkbox;return"function"===typeof t||!0===t},e.prototype.addCheckboxIfNeeded=function(){var t=this,e=this.displayedGroupNode,i=this.isUserWantsSelected()&&!e.footer&&!e.rowPinned&&!e.detail;if(i){var o=new Ga;this.getContext().createBean(o),o.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(o.getGui()),this.addDestroyFunc((function(){return t.getContext().destroyBean(o)}))}this.comp.setCheckboxVisible(i)},e.prototype.onKeyDown=function(t){var e=t.key===Nn.ENTER;if(e&&!this.params.suppressEnterExpand){var i=this.params.column&&this.params.column.isCellEditable(this.params.node);i||this.onExpandOrContract(t)}},e.prototype.onCellDblClicked=function(t){if(!Zt(t)){var e=ie(this.eExpanded,t)||ie(this.eContracted,t);e||this.onExpandOrContract(t)}},tl([pt("expressionService")],e.prototype,"expressionService",void 0),tl([pt("valueFormatterService")],e.prototype,"valueFormatterService",void 0),tl([pt("columnModel")],e.prototype,"columnModel",void 0),tl([pt("userComponentFactory")],e.prototype,"userComponentFactory",void 0),tl([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),e}(le),il=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ol=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},nl=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return il(e,t),e.prototype.init=function(t){var e=this,i={setInnerRenderer:function(t,i){return e.setRenderDetails(t,i)},setChildCount:function(t){return e.eChildCount.innerHTML=t},addOrRemoveCssClass:function(t,i){return e.addOrRemoveCssClass(t,i)},setContractedDisplayed:function(t){return Uo(e.eContracted,t)},setExpandedDisplayed:function(t){return Uo(e.eExpanded,t)},setCheckboxVisible:function(t){return e.eCheckbox.classList.toggle("ag-invisible",!t)}},o=this.createManagedBean(new el),n=!t.colDef,r=this.getGui();o.init(i,r,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,t),n&&Ci(r,"gridcell")},e.prototype.setRenderDetails=function(t,e){var i=this;if(t){var o=t.newAgStackInstance();if(!o)return;o.then((function(t){if(t){var e=function(){return i.context.destroyBean(t)};i.isAlive()?(i.eValue.appendChild(t.getGui()),i.addDestroyFunc(e)):e()}}))}else this.eValue.innerText=e},e.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),t.prototype.destroy.call(this)},e.prototype.refresh=function(){return!1},e.TEMPLATE='<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>',ol([br("eExpanded")],e.prototype,"eExpanded",void 0),ol([br("eContracted")],e.prototype,"eContracted",void 0),ol([br("eCheckbox")],e.prototype,"eCheckbox",void 0),ol([br("eValue")],e.prototype,"eValue",void 0),ol([br("eChildCount")],e.prototype,"eChildCount",void 0),e}(vr),rl=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),sl=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},al=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return rl(e,t),e.prototype.init=function(t){t.node.failedLoad?this.setupFailed():this.setupLoading()},e.prototype.setupFailed=function(){var t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingError","ERR")},e.prototype.setupLoading=function(){var t=Mn("groupLoading",this.gridOptionsService,null);t&&this.eLoadingIcon.appendChild(t);var e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingOoo","Loading")},e.prototype.refresh=function(t){return!1},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',sl([br("eLoadingIcon")],e.prototype,"eLoadingIcon",void 0),sl([br("eLoadingText")],e.prototype,"eLoadingText",void 0),e}(vr),ll=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ul=function(t){function e(){return t.call(this)||this}return ll(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){var i,o=null!==(i=this.gridOptionsService.get("overlayLoadingTemplate"))&&void 0!==i?i:e.DEFAULT_LOADING_OVERLAY_TEMPLATE,n=this.localeService.getLocaleTextFunc(),r=o.replace("[LOADING...]",n("loadingOoo","Loading..."));this.setTemplate(r)},e.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',e}(vr),cl=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),hl=function(t){function e(){return t.call(this)||this}return cl(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){var i,o=null!==(i=this.gridOptionsService.get("overlayNoRowsTemplate"))&&void 0!==i?i:e.DEFAULT_NO_ROWS_TEMPLATE,n=this.localeService.getLocaleTextFunc(),r=o.replace("[NO_ROWS_TO_SHOW]",n("noRowsToShow","No Rows To Show"));this.setTemplate(r)},e.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',e}(vr),pl=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),dl=function(t){function e(){return t.call(this,'<div class="ag-tooltip"></div>')||this}return pl(e,t),e.prototype.init=function(t){var e=t.value;this.getGui().innerHTML=xe(e)},e}(fa),fl=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),gl=function(){function t(){}return t.prototype.getTemplate=function(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'},t.prototype.init=function(t,e){this.eInput=t,this.params=e,null!=e.max&&t.setMax(e.max),null!=e.min&&t.setMin(e.min),null!=e.precision&&t.setPrecision(e.precision),null!=e.step&&t.setStep(e.step),e.showStepperButtons&&t.getInputElement().classList.add("ag-number-field-input-stepper")},t.prototype.getValue=function(){var t=this.eInput.getValue();if(!s(t)&&!s(this.params.value))return this.params.value;var e=this.params.parseValue(t);if(null==e)return e;if("string"===typeof e){if(""===e)return null;e=Number(e)}return isNaN(e)?null:e},t.prototype.getStartValue=function(){return this.params.value},t}(),yl=function(t){function e(){return t.call(this,new gl)||this}return fl(e,t),e}(Sa),_l=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ml=function(){function t(){}return t.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},t.prototype.init=function(t,e){this.eInput=t,this.params=e,null!=e.min&&t.setMin(e.min),null!=e.max&&t.setMax(e.max),null!=e.step&&t.setStep(e.step)},t.prototype.getValue=function(){var t=this.eInput.getDate();return s(t)||s(this.params.value)?null!==t&&void 0!==t?t:null:this.params.value},t.prototype.getStartValue=function(){var t=this.params.value;if(t instanceof Date)return Ao(t,!1)},t}(),vl=function(t){function e(){return t.call(this,new ml)||this}return _l(e,t),e}(Sa),bl=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Cl=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},wl=function(){function t(t){this.getDataTypeService=t}return t.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},t.prototype.init=function(t,e){this.eInput=t,this.params=e,null!=e.min&&t.setMin(e.min),null!=e.max&&t.setMax(e.max),null!=e.step&&t.setStep(e.step)},t.prototype.getValue=function(){var t=this.formatDate(this.eInput.getDate());return s(t)||s(this.params.value)?this.params.parseValue(null!==t&&void 0!==t?t:""):this.params.value},t.prototype.getStartValue=function(){var t,e;return Ao(null!==(e=this.parseDate(null!==(t=this.params.value)&&void 0!==t?t:void 0))&&void 0!==e?e:null,!1)},t.prototype.parseDate=function(t){return this.getDataTypeService().getDateParserFunction()(t)},t.prototype.formatDate=function(t){return this.getDataTypeService().getDateFormatterFunction()(t)},t}(),Sl=function(t){function e(){var e=t.call(this,new wl((function(){return e.dataTypeService})))||this;return e}return bl(e,t),Cl([pt("dataTypeService")],e.prototype,"dataTypeService",void 0),e}(Sa),El=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),xl=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ol=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return El(e,t),e.prototype.init=function(t){var e=this;this.params=t,this.updateCheckbox(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.addManagedListener(this.eCheckbox.getInputElement(),"click",(function(t){if(Jt(t),!e.eCheckbox.isDisabled()){var i=e.eCheckbox.getValue();e.onCheckboxChanged(i)}})),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",(function(t){Jt(t)}));var i=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",(function(t){if(t.key===Nn.SPACE&&!e.eCheckbox.isDisabled()){e.params.eGridCell===i.activeElement&&e.eCheckbox.toggle();var o=e.eCheckbox.getValue();e.onCheckboxChanged(o),t.preventDefault()}}))},e.prototype.refresh=function(t){return this.params=t,this.updateCheckbox(t),!0},e.prototype.updateCheckbox=function(t){var e,i,o,n,r=!0;if(t.node.group&&t.column){var s=t.column.getColId();s.startsWith(ve)?n=null==t.value||""===t.value?void 0:"true"===t.value:t.node.aggData&&void 0!==t.node.aggData[s]?n=null!==(e=t.value)&&void 0!==e?e:void 0:r=!1}else n=null!==(i=t.value)&&void 0!==i?i:void 0;if(r){this.eCheckbox.setValue(n);var a=null!=t.disabled?t.disabled:!(null===(o=t.column)||void 0===o?void 0:o.isCellEditable(t.node));this.eCheckbox.setDisabled(a);var l=this.localeService.getLocaleTextFunc(),u=Xi(l,n),c=a?u:l("ariaToggleCellValue","Press SPACE to toggle cell value")+" ("+u+")";this.eCheckbox.setInputAriaLabel(c)}else this.eCheckbox.setDisplayed(!1)},e.prototype.onCheckboxChanged=function(t){var e=this.params,i=e.column,o=e.node,n=e.rowIndex,r=e.value,s={type:ge.EVENT_CELL_EDITING_STARTED,column:i,colDef:null===i||void 0===i?void 0:i.getColDef(),data:o.data,node:o,rowIndex:n,rowPinned:o.rowPinned,value:r};this.eventService.dispatchEvent(s);var a=this.params.node.setDataValue(this.params.column,t,"edit"),l={type:ge.EVENT_CELL_EDITING_STOPPED,column:i,colDef:null===i||void 0===i?void 0:i.getColDef(),data:o.data,node:o,rowIndex:n,rowPinned:o.rowPinned,value:r,oldValue:r,newValue:t,valueChanged:a};this.eventService.dispatchEvent(l)},e.TEMPLATE='\n        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n        </div>',xl([br("eCheckbox")],e.prototype,"eCheckbox",void 0),e}(vr),Rl=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Il=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Tl=function(t){function e(){return t.call(this,'\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return Rl(e,t),e.prototype.init=function(t){var e,i=this;this.params=t;var o=null!==(e=t.value)&&void 0!==e?e:void 0;this.eCheckbox.setValue(o),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(o),this.addManagedListener(this.eCheckbox,ge.EVENT_FIELD_VALUE_CHANGED,(function(t){return i.setAriaLabel(t.selected)}))},e.prototype.getValue=function(){return this.eCheckbox.getValue()},e.prototype.focusIn=function(){this.eCheckbox.getFocusableElement().focus()},e.prototype.afterGuiAttached=function(){this.params.cellStartedEdit&&this.focusIn()},e.prototype.isPopup=function(){return!1},e.prototype.setAriaLabel=function(t){var e=this.localeService.getLocaleTextFunc(),i=Xi(e,t),o=e("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(o+" ("+i+")")},Il([br("eCheckbox")],e.prototype,"eCheckbox",void 0),e}(fa),Pl=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Dl=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},kl=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Al=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},Ll=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.agGridDefaults={agDateInput:ks,agColumnHeader:ua,agColumnGroupHeader:pa,agSortIndicator:sa,agTextColumnFloatingFilter:ia,agNumberColumnFloatingFilter:ta,agDateColumnFloatingFilter:Is,agReadOnlyFloatingFilter:Or,agAnimateShowChangeCellRenderer:Da,agAnimateSlideCellRenderer:La,agGroupCellRenderer:nl,agGroupRowRenderer:nl,agLoadingCellRenderer:al,agCheckboxCellRenderer:Ol,agCellEditor:Oa,agTextCellEditor:Oa,agNumberCellEditor:yl,agDateCellEditor:vl,agDateStringCellEditor:Sl,agSelectCellEditor:ba,agLargeTextCellEditor:_a,agCheckboxCellEditor:Tl,agTextColumnFilter:Ks,agNumberColumnFilter:$s,agDateColumnFilter:Ss,agLoadingOverlay:ul,agNoRowsOverlay:hl,agTooltipComponent:dl},e.enterpriseAgDefaultCompsModule={agSetColumnFilter:Z.SetFilterModule,agSetColumnFloatingFilter:Z.SetFilterModule,agMultiColumnFilter:Z.MultiFilterModule,agMultiColumnFloatingFilter:Z.MultiFilterModule,agGroupColumnFilter:Z.RowGroupingModule,agGroupColumnFloatingFilter:Z.RowGroupingModule,agRichSelect:Z.RichSelectModule,agRichSelectCellEditor:Z.RichSelectModule,agDetailCellRenderer:Z.MasterDetailModule,agSparklineCellRenderer:Z.SparklinesModule},e.jsComps={},e}return Pl(e,t),e.prototype.init=function(){var t=this;null!=this.gridOptions.components&&C(this.gridOptions.components,(function(e,i){return t.registerJsComponent(e,i)}))},e.prototype.registerDefaultComponent=function(t,e){this.agGridDefaults[t]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[t]=e},e.prototype.registerJsComponent=function(t,e){this.jsComps[t]=e},e.prototype.retrieve=function(t,e){var i=this,o=function(t,e){return{componentFromFramework:e,component:t}},n=this.getFrameworkOverrides().frameworkComponent(e,this.gridOptions.components);if(null!=n)return o(n,!0);var r=this.jsComps[e];if(r){var s=this.getFrameworkOverrides().isFrameworkComponent(r);return o(r,s)}var a=this.agGridDefaults[e];if(a)return o(a,!1);var l=this.enterpriseAgDefaultCompsModule[e];return l?nt.__assertRegistered(l,"AG Grid '"+t+"' component: "+e,this.context.getGridId()):G((function(){i.warnAboutMissingComponent(t,e)}),"MissingComp"+e),null},e.prototype.warnAboutMissingComponent=function(t,e){var i=Al(Al([],kl(Object.keys(this.agGridDefaults).filter((function(t){return!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(t)})))),kl(Object.keys(this.jsComps))),o=$e(e,i,!0,.8).values;console.warn("AG Grid: Could not find '"+e+"' component. It was configured as \""+t+": '"+e+"'\" but it wasn't found in the list of registered components."),o.length>0&&console.warn("         Did you mean: ["+o.slice(0,3)+"]?"),console.warn("If using a custom component check it has been registered as described in: https://ag-grid.com/javascript-data-grid/components/")},Dl([pt("gridOptions")],e.prototype,"gridOptions",void 0),Dl([ut],e.prototype,"init",null),e=Dl([ht("userComponentRegistry")],e),e}(le),Ml={propertyName:"dateComponent",cellRenderer:!1},Fl={propertyName:"headerComponent",cellRenderer:!1},Nl={propertyName:"headerGroupComponent",cellRenderer:!1},Vl={propertyName:"cellRenderer",cellRenderer:!0},Bl={propertyName:"cellEditor",cellRenderer:!1},Gl={propertyName:"innerRenderer",cellRenderer:!0},jl={propertyName:"loadingOverlayComponent",cellRenderer:!1},Hl={propertyName:"noRowsOverlayComponent",cellRenderer:!1},$l={propertyName:"tooltipComponent",cellRenderer:!1},Wl={propertyName:"filter",cellRenderer:!1},Ul={propertyName:"floatingFilterComponent",cellRenderer:!1},zl={propertyName:"toolPanel",cellRenderer:!1},Kl={propertyName:"statusPanel",cellRenderer:!1},Yl={propertyName:"fullWidthCellRenderer",cellRenderer:!0},ql={propertyName:"loadingCellRenderer",cellRenderer:!0},Xl={propertyName:"groupRowRenderer",cellRenderer:!0},Ql={propertyName:"detailCellRenderer",cellRenderer:!0},Jl=function(){function t(){}return t.getFloatingFilterType=function(t){return this.filterToFloatingFilterMapping[t]},t.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},t}(),Zl=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),tu=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},eu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zl(e,t),e.prototype.getHeaderCompDetails=function(t,e){return this.getCompDetails(t,Fl,"agColumnHeader",e)},e.prototype.getHeaderGroupCompDetails=function(t){var e=t.columnGroup.getColGroupDef();return this.getCompDetails(e,Nl,"agColumnGroupHeader",t)},e.prototype.getFullWidthCellRendererDetails=function(t){return this.getCompDetails(this.gridOptions,Yl,null,t,!0)},e.prototype.getFullWidthLoadingCellRendererDetails=function(t){return this.getCompDetails(this.gridOptions,ql,"agLoadingCellRenderer",t,!0)},e.prototype.getFullWidthGroupCellRendererDetails=function(t){return this.getCompDetails(this.gridOptions,Xl,"agGroupRowRenderer",t,!0)},e.prototype.getFullWidthDetailCellRendererDetails=function(t){return this.getCompDetails(this.gridOptions,Ql,"agDetailCellRenderer",t,!0)},e.prototype.getInnerRendererDetails=function(t,e){return this.getCompDetails(t,Gl,null,e)},e.prototype.getFullWidthGroupRowInnerCellRenderer=function(t,e){return this.getCompDetails(t,Gl,null,e)},e.prototype.getCellRendererDetails=function(t,e){return this.getCompDetails(t,Vl,null,e)},e.prototype.getCellEditorDetails=function(t,e){return this.getCompDetails(t,Bl,"agCellEditor",e,!0)},e.prototype.getFilterDetails=function(t,e,i){return this.getCompDetails(t,Wl,i,e,!0)},e.prototype.getDateCompDetails=function(t){return this.getCompDetails(this.gridOptions,Ml,"agDateInput",t,!0)},e.prototype.getLoadingOverlayCompDetails=function(t){return this.getCompDetails(this.gridOptions,jl,"agLoadingOverlay",t,!0)},e.prototype.getNoRowsOverlayCompDetails=function(t){return this.getCompDetails(this.gridOptions,Hl,"agNoRowsOverlay",t,!0)},e.prototype.getTooltipCompDetails=function(t){return this.getCompDetails(t.colDef,$l,"agTooltipComponent",t,!0)},e.prototype.getSetFilterCellRendererDetails=function(t,e){return this.getCompDetails(t,Vl,null,e)},e.prototype.getFloatingFilterCompDetails=function(t,e,i){return this.getCompDetails(t,Ul,i,e)},e.prototype.getToolPanelCompDetails=function(t,e){return this.getCompDetails(t,zl,null,e,!0)},e.prototype.getStatusPanelCompDetails=function(t,e){return this.getCompDetails(t,Kl,null,e,!0)},e.prototype.getCompDetails=function(t,e,i,o,n){var r=this;void 0===n&&(n=!1);var s=e.propertyName,a=e.cellRenderer,l=this.getCompKeys(t,e,o),u=l.compName,c=l.jsComp,h=l.fwComp,p=l.paramsFromSelector,d=l.popupFromSelector,f=l.popupPositionFromSelector,g=function(t){var e=r.userComponentRegistry.retrieve(s,t);e&&(c=e.componentFromFramework?void 0:e.component,h=e.componentFromFramework?e.component:void 0)};if(null!=u&&g(u),null==c&&null==h&&null!=i&&g(i),c&&a&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(s,c)),c||h){var y=this.mergeParamsWithApplicationProvidedParams(t,e,o,p),_=null==c,m=c||h;return{componentFromFramework:_,componentClass:m,params:y,type:e,popupFromSelector:d,popupPositionFromSelector:f,newAgStackInstance:function(){return r.newAgStackInstance(m,_,y,e)}}}n&&console.error("AG Grid: Could not find component "+u+", did you forget to configure this component?")},e.prototype.getCompKeys=function(t,e,i){var o,n,r,s,a,l,u=this,c=e.propertyName;if(t){var h=t,p=h[c+"Selector"],d=p?p(i):null,f=function(t){if("string"===typeof t)o=t;else if(null!=t&&!0!==t){var e=u.getFrameworkOverrides().isFrameworkComponent(t);e?r=t:n=t}};d?(f(d.component),s=d.params,a=d.popup,l=d.popupPosition):f(h[c])}return{compName:o,jsComp:n,fwComp:r,paramsFromSelector:s,popupFromSelector:a,popupPositionFromSelector:l}},e.prototype.newAgStackInstance=function(t,e,i,o){var n,r=o.propertyName,s=!e;if(s)n=new t;else{var a=this.componentMetadataProvider.retrieve(r);n=this.frameworkComponentWrapper.wrap(t,a.mandatoryMethodList,a.optionalMethodList,o)}var l=this.initComponent(n,i);return null==l?cr.resolve(n):l.then((function(){return n}))},e.prototype.mergeParamsWithApplicationProvidedParams=function(t,e,i,o){void 0===o&&(o=null);var n={context:this.gridOptionsService.context,columnApi:this.gridOptionsService.columnApi,api:this.gridOptionsService.api};D(n,i);var r=t,s=r&&r[e.propertyName+"Params"];if("function"===typeof s){var a=s(i);D(n,a)}else"object"===typeof s&&D(n,s);return D(n,o),n},e.prototype.initComponent=function(t,e){if(this.context.createBean(t),null!=t.init)return t.init(e)},e.prototype.getDefaultFloatingFilterType=function(t,e){if(null==t)return null;var i=null,o=this.getCompKeys(t,Wl),n=o.compName,r=o.jsComp,s=o.fwComp;if(n)i=Jl.getFloatingFilterType(n);else{var a=null==r&&null==s&&!0===t.filter;a&&(i=e())}return i},tu([pt("gridOptions")],e.prototype,"gridOptions",void 0),tu([pt("agComponentUtils")],e.prototype,"agComponentUtils",void 0),tu([pt("componentMetadataProvider")],e.prototype,"componentMetadataProvider",void 0),tu([pt("userComponentRegistry")],e.prototype,"userComponentRegistry",void 0),tu([dt("frameworkComponentWrapper")],e.prototype,"frameworkComponentWrapper",void 0),e=tu([ht("userComponentFactory")],e),e}(le);(function(t){t[t["SINGLE_SHEET"]=0]="SINGLE_SHEET",t[t["MULTI_SHEET"]=1]="MULTI_SHEET"})(Wa||(Wa={}));var iu,ou,nu=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ru=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},su=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragEndFunctions=[],e.dragSources=[],e}return nu(e,t),e.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},e.prototype.removeListener=function(t){var e=t.dragSource.eElement,i=t.mouseDownListener;if(e.removeEventListener("mousedown",i),t.touchEnabled){var o=t.touchStartListener;e.removeEventListener("touchstart",o,{passive:!0})}},e.prototype.removeDragSource=function(t){var e=this.dragSources.find((function(e){return e.dragSource===t}));e&&(this.removeListener(e),Nt(this.dragSources,e))},e.prototype.isDragging=function(){return this.dragging},e.prototype.addDragSource=function(t){var e=this,i=this.onMouseDown.bind(this,t),o=t.eElement,n=t.includeTouch,r=t.stopPropagationForTouch;o.addEventListener("mousedown",i);var s=null,a=this.gridOptionsService.is("suppressTouch");n&&!a&&(s=function(i){Wo(i.target)||(i.cancelable&&(i.preventDefault(),r&&i.stopPropagation()),e.onTouchStart(t,i))},o.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:t,mouseDownListener:i,touchStartListener:s,touchEnabled:!!n})},e.prototype.getStartTarget=function(){return this.startTarget},e.prototype.onTouchStart=function(t,e){var i=this;this.currentDragParams=t,this.dragging=!1;var o=e.touches[0];this.touchLastTime=o,this.touchStart=o;var n=function(e){return i.onTouchMove(e,t.eElement)},r=function(e){return i.onTouchUp(e,t.eElement)},s=function(t){t.cancelable&&t.preventDefault()},a=e.target,l=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:s,options:{passive:!1}},{target:a,type:"touchmove",listener:n,options:{passive:!0}},{target:a,type:"touchend",listener:r,options:{passive:!0}},{target:a,type:"touchcancel",listener:r,options:{passive:!0}}];this.addTemporaryEvents(l),0===t.dragStartPixels&&this.onCommonMove(o,this.touchStart,t.eElement)},e.prototype.onMouseDown=function(t,e){var i=this,o=e;if((!t.skipMouseEvent||!t.skipMouseEvent(e))&&!o._alreadyProcessedByDragService&&(o._alreadyProcessedByDragService=!0,0===e.button)){this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.currentDragParams=t,this.dragging=!1,this.mouseStartEvent=e,this.startTarget=e.target;var n=function(e){return i.onMouseMove(e,t.eElement)},r=function(e){return i.onMouseUp(e,t.eElement)},s=function(t){return t.preventDefault()},a=this.gridOptionsService.getRootNode(),l=[{target:a,type:"mousemove",listener:n},{target:a,type:"mouseup",listener:r},{target:a,type:"contextmenu",listener:s}];this.addTemporaryEvents(l),0===t.dragStartPixels&&this.onMouseMove(e,t.eElement)}},e.prototype.addTemporaryEvents=function(t){t.forEach((function(t){var e=t.target,i=t.type,o=t.listener,n=t.options;e.addEventListener(i,o,n)})),this.dragEndFunctions.push((function(){t.forEach((function(t){var e=t.target,i=t.type,o=t.listener,n=t.options;e.removeEventListener(i,o,n)}))}))},e.prototype.isEventNearStartEvent=function(t,e){var i=this.currentDragParams.dragStartPixels,o=s(i)?i:4;return Xn(t,e,o)},e.prototype.getFirstActiveTouch=function(t){for(var e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null},e.prototype.onCommonMove=function(t,e,i){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(t,e))return;this.dragging=!0;var o={type:ge.EVENT_DRAG_STARTED,target:i};this.eventService.dispatchEvent(o),this.currentDragParams.onDragStart(e),this.currentDragParams.onDragging(e)}this.currentDragParams.onDragging(t)},e.prototype.onTouchMove=function(t,e){var i=this.getFirstActiveTouch(t.touches);i&&this.onCommonMove(i,this.touchStart,e)},e.prototype.onMouseMove=function(t,e){this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.onCommonMove(t,this.mouseStartEvent,e)},e.prototype.shouldPreventMouseEvent=function(t){var e=this.gridOptionsService.is("enableCellTextSelection"),i=so(),o="mousemove"===t.type;return(e&&o||i)&&t.cancelable&&this.mouseEventService.isEventFromThisGrid(t)&&!this.isOverFormFieldElement(t)},e.prototype.isOverFormFieldElement=function(t){var e=t.target,i=null===e||void 0===e?void 0:e.tagName.toLocaleLowerCase();return!!(null===i||void 0===i?void 0:i.match("^a$|textarea|input|select|button"))},e.prototype.onTouchUp=function(t,e){var i=this.getFirstActiveTouch(t.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,e)},e.prototype.onMouseUp=function(t,e){this.onUpCommon(t,e)},e.prototype.onUpCommon=function(t,e){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(t);var i={type:ge.EVENT_DRAG_STOPPED,target:e};this.eventService.dispatchEvent(i)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach((function(t){return t()})),this.dragEndFunctions.length=0},ru([pt("mouseEventService")],e.prototype,"mouseEventService",void 0),ru([ct],e.prototype,"removeAllListeners",null),e=ru([ht("dragService")],e),e}(le),au=function(){function t(t){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=t.scrollContainer,this.scrollHorizontally=-1!==t.scrollAxis.indexOf("x"),this.scrollVertically=-1!==t.scrollAxis.indexOf("y"),this.scrollByTick=null!=t.scrollByTick?t.scrollByTick:20,t.onScrollCallback&&(this.onScrollCallback=t.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=t.getVerticalPosition,this.setVerticalPosition=t.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=t.getHorizontalPosition,this.setHorizontalPosition=t.setHorizontalPosition),this.shouldSkipVerticalScroll=t.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=t.shouldSkipHorizontalScroll||function(){return!1}}return t.prototype.check=function(t,e){void 0===e&&(e=!1);var i=e||this.shouldSkipVerticalScroll();if(!i||!this.shouldSkipHorizontalScroll()){var o=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=t.clientX<o.left+n,this.tickRight=t.clientX>o.right-n,this.tickUp=t.clientY<o.top+n&&!i,this.tickDown=t.clientY>o.bottom-n&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},t.prototype.ensureTickingStarted=function(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},t.prototype.doTick=function(){var t;if(this.tickCount++,t=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-t),this.tickDown&&this.setVerticalPosition(e+t)}if(this.scrollHorizontally){var i=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(i-t),this.tickRight&&this.setHorizontalPosition(i+t)}this.onScrollCallback&&this.onScrollCallback()},t.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},t}(),lu=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),uu=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},cu="ag-list-item-hovered";(function(t){function e(e,i,o){var n=t.call(this)||this;return n.comp=e,n.virtualList=i,n.params=o,n.currentDragValue=null,n.lastHoveredListItem=null,n}lu(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},e.prototype.listItemDragStart=function(t){this.currentDragValue=this.params.getCurrentDragValue(t),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)},e.prototype.listItemDragEnd=function(){var t=this;window.setTimeout((function(){t.currentDragValue=null,t.moveBlocked=!1}),10)},e.prototype.createDropTarget=function(){var t=this,e={isInterestedIn:function(e){return e===t.params.dragSourceType},getIconName:function(){return Ua[t.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return t.comp.getGui()},onDragging:function(e){return t.onDragging(e)},onDragStop:function(){return t.onDragStop()},onDragLeave:function(){return t.onDragLeave()}};this.dragAndDropService.addDropTarget(e)},e.prototype.createAutoScrollService=function(){var t=this.virtualList.getGui();this.autoScrollService=new au({scrollContainer:t,scrollAxis:"y",getVerticalPosition:function(){return t.scrollTop},setVerticalPosition:function(e){return t.scrollTop=e}})},e.prototype.onDragging=function(t){if(this.currentDragValue&&!this.moveBlocked){var e=this.getListDragItem(t),i=this.virtualList.getComponentAt(e.rowIndex);if(i){var o=i.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===e.rowIndex&&this.lastHoveredListItem.position===e.position||(this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredListItem=e,jo(o,cu),jo(o,"ag-item-highlight-"+e.position))}}},e.prototype.getListDragItem=function(t){var e=this.virtualList.getGui(),i=parseFloat(window.getComputedStyle(e).paddingTop),o=this.virtualList.getRowHeight(),n=this.virtualList.getScrollTop(),r=Math.max(0,(t.y-i+n)/o),s=this.params.getNumRows(this.comp)-1,a=0|Math.min(s,r);return{rowIndex:a,position:Math.round(r)>r||r>s?"bottom":"top",component:this.virtualList.getComponentAt(a)}},e.prototype.onDragStop=function(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())},e.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},e.prototype.clearHoveredItems=function(){var t=this.virtualList.getGui();t.querySelectorAll("."+cu).forEach((function(t){[cu,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach((function(e){t.classList.remove(e)}))})),this.lastHoveredListItem=null},uu([pt("dragAndDropService")],e.prototype,"dragAndDropService",void 0),uu([ut],e.prototype,"postConstruct",null)})(le);(function(t){t[t["Above"]=0]="Above",t[t["Below"]=1]="Below"})(iu||(iu={})),function(t){t["EVERYTHING"]="group",t["FILTER"]="filter",t["SORT"]="sort",t["MAP"]="map",t["AGGREGATE"]="aggregate",t["FILTER_AGGREGATES"]="filter_aggregates",t["PIVOT"]="pivot",t["NOTHING"]="nothing"}(ou||(ou={}));var hu=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};function pu(t){var e=t,i=null!=e&&null!=e.getFrameworkComponentInstance;return i?e.getFrameworkComponentInstance():t}var du,fu=function(){function t(){this.detailGridInfoMap={},this.destroyCalled=!1}return t.prototype.registerOverlayWrapperComp=function(t){this.overlayWrapperComp=t},t.prototype.registerSideBarComp=function(t){this.sideBarComp=t},t.prototype.init=function(){var t=this;switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady((function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl()}))},t.prototype.__getAlignedGridService=function(){return this.alignedGridsService},t.prototype.__getContext=function(){return this.context},t.prototype.getSetterMethod=function(t){return"set"+t.charAt(0).toUpperCase()+t.substring(1)},t.prototype.__setPropertyOnly=function(t,e){return this.gos.__setPropertyOnly(t,e)},t.prototype.__updateProperty=function(t,e,i,o){void 0===o&&(o=void 0),this.gos.set(t,e,i,{},o);var n=this.getSetterMethod(t),r=this;r[n]&&r[n](e)},t.prototype.getGridId=function(){return this.context.getGridId()},t.prototype.addDetailGridInfo=function(t,e){this.detailGridInfoMap[t]=e},t.prototype.removeDetailGridInfo=function(t){this.detailGridInfoMap[t]=void 0},t.prototype.getDetailGridInfo=function(t){return this.detailGridInfoMap[t]},t.prototype.forEachDetailGridInfo=function(t){var e=0;C(this.detailGridInfoMap,(function(i,o){s(o)&&(t(o,e),e++)}))},t.prototype.getDataAsCsv=function(t){if(nt.__assertRegistered(Z.CsvExportModule,"api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(t)},t.prototype.exportDataAsCsv=function(t){nt.__assertRegistered(Z.CsvExportModule,"api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(t)},t.prototype.getExcelExportMode=function(t){var e=this.gos.get("defaultExcelExportParams"),i=Object.assign({exportMode:"xlsx"},e,t);return i.exportMode},t.prototype.assertNotExcelMultiSheet=function(t,e){if(!nt.__assertRegistered(Z.ExcelExportModule,"api."+t,this.context.getGridId()))return!1;var i=this.getExcelExportMode(e);return this.excelCreator.getFactoryMode(i)!==Wa.MULTI_SHEET||(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1)},t.prototype.getDataAsExcel=function(t){if(this.assertNotExcelMultiSheet("getDataAsExcel",t))return this.excelCreator.getDataAsExcel(t)},t.prototype.exportDataAsExcel=function(t){this.assertNotExcelMultiSheet("exportDataAsExcel",t)&&this.excelCreator.exportDataAsExcel(t)},t.prototype.getSheetDataForExcel=function(t){if(nt.__assertRegistered(Z.ExcelExportModule,"api.getSheetDataForExcel",this.context.getGridId())){var e=this.getExcelExportMode(t);return this.excelCreator.setFactoryMode(Wa.MULTI_SHEET,e),this.excelCreator.getSheetDataForExcel(t)}},t.prototype.getMultipleSheetsAsExcel=function(t){if(nt.__assertRegistered(Z.ExcelExportModule,"api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(t)},t.prototype.exportMultipleSheetsAsExcel=function(t){if(nt.__assertRegistered(Z.ExcelExportModule,"api.exportMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.exportMultipleSheetsAsExcel(t)},t.prototype.setTreeData=function(t){this.gos.set("treeData",t)},t.prototype.setGridAriaProperty=function(t,e){if(t){var i=this.ctrlsService.getGridBodyCtrl().getGui(),o="aria-"+t;null===e?i.removeAttribute(o):i.setAttribute(o,e)}},t.prototype.logMissingRowModel=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];console.error("AG Grid: api."+t+" can only be called when gridOptions.rowModelType is "+e.join(" or "))},t.prototype.setServerSideDatasource=function(t){this.serverSideRowModel?this.serverSideRowModel.setDatasource(t):this.logMissingRowModel("setServerSideDatasource","serverSide")},t.prototype.setCacheBlockSize=function(t){this.serverSideRowModel?(this.gos.set("cacheBlockSize",t),this.serverSideRowModel.resetRootStore()):this.logMissingRowModel("setCacheBlockSize","serverSide")},t.prototype.setDatasource=function(t){this.gos.isRowModelType("infinite")?this.rowModel.setDatasource(t):this.logMissingRowModel("setDatasource","infinite")},t.prototype.setViewportDatasource=function(t){this.gos.isRowModelType("viewport")?this.rowModel.setViewportDatasource(t):this.logMissingRowModel("setViewportDatasource","viewport")},t.prototype.setRowData=function(t){var e=null==this.immutableService;e?this.logMissingRowModel("setRowData","clientSide"):this.immutableService.isActive()?this.immutableService.setRowData(t):(this.selectionService.reset(),this.clientSideRowModel.setRowData(t))},t.prototype.setPinnedTopRowData=function(t){this.pinnedRowModel.setPinnedTopRowData(t)},t.prototype.setPinnedBottomRowData=function(t){this.pinnedRowModel.setPinnedBottomRowData(t)},t.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},t.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},t.prototype.getPinnedTopRow=function(t){return this.pinnedRowModel.getPinnedTopRow(t)},t.prototype.getPinnedBottomRow=function(t){return this.pinnedRowModel.getPinnedBottomRow(t)},t.prototype.setColumnDefs=function(t,e){void 0===e&&(e="api"),this.columnModel.setColumnDefs(t,e),this.gos.set("columnDefs",t,!0,{source:e})},t.prototype.setAutoGroupColumnDef=function(t,e){void 0===e&&(e="api"),this.gos.set("autoGroupColumnDef",t,!0,{source:e})},t.prototype.setDefaultColDef=function(t,e){void 0===e&&(e="api"),this.gos.set("defaultColDef",t,!0,{source:e})},t.prototype.setColumnTypes=function(t,e){void 0===e&&(e="api"),this.gos.set("columnTypes",t,!0,{source:e})},t.prototype.expireValueCache=function(){this.valueCache.expire()},t.prototype.getVerticalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()},t.prototype.getHorizontalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()},t.prototype.setAlwaysShowHorizontalScroll=function(t){this.gos.set("alwaysShowHorizontalScroll",t)},t.prototype.setAlwaysShowVerticalScroll=function(t){this.gos.set("alwaysShowVerticalScroll",t)},t.prototype.refreshCells=function(t){void 0===t&&(t={}),this.rowRenderer.refreshCells(t)},t.prototype.flashCells=function(t){void 0===t&&(t={}),this.rowRenderer.flashCells(t)},t.prototype.redrawRows=function(t){void 0===t&&(t={});var e=t?t.rowNodes:void 0;this.rowRenderer.redrawRows(e)},t.prototype.setFunctionsReadOnly=function(t){this.gos.set("functionsReadOnly",t)},t.prototype.refreshHeader=function(){this.ctrlsService.getHeaderRowContainerCtrls().forEach((function(t){return t.refresh()}))},t.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},t.prototype.isColumnFilterPresent=function(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()},t.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},t.prototype.getModel=function(){return this.rowModel},t.prototype.setRowNodeExpanded=function(t,e,i){t&&(i&&t.parent&&-1!==t.parent.level&&this.setRowNodeExpanded(t.parent,e,i),t.setExpanded(e))},t.prototype.onGroupExpandedOrCollapsed=function(){a(this.clientSideRowModel)?this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide"):this.clientSideRowModel.refreshModel({step:ou.MAP})},t.prototype.refreshClientSideRowModel=function(t){a(this.clientSideRowModel)?this.logMissingRowModel("refreshClientSideRowModel","clientSide"):this.clientSideRowModel.refreshModel(t)},t.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},t.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},t.prototype.getRowNode=function(t){return this.rowModel.getRowNode(t)},t.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}},t.prototype.expandAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")},t.prototype.collapseAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):this.logMissingRowModel("expandAll","clientSide","serverSide")},t.prototype.addRenderedRowListener=function(t,e,i){this.rowRenderer.addRenderedRowListener(t,e,i)},t.prototype.getQuickFilter=function(){return this.gos.get("quickFilterText")},t.prototype.setQuickFilter=function(t){this.gos.set("quickFilterText",t)},t.prototype.setExcludeHiddenColumnsFromQuickFilter=function(t){qe("30","setExcludeHiddenColumnsFromQuickFilter",void 0,"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `setIncludeHiddenColumnsInQuickFilter`"),this.setIncludeHiddenColumnsInQuickFilter(!t)},t.prototype.setIncludeHiddenColumnsInQuickFilter=function(t){this.gos.set("includeHiddenColumnsInQuickFilter",t)},t.prototype.setQuickFilterParser=function(t){this.gos.set("quickFilterParser",t)},t.prototype.setQuickFilterMatcher=function(t){this.gos.set("quickFilterMatcher",t)},t.prototype.getAdvancedFilterModel=function(){return nt.__assertRegistered(Z.AdvancedFilterModule,"api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null},t.prototype.setAdvancedFilterModel=function(t){this.gos.set("advancedFilterModel",t)},t.prototype.setEnableAdvancedFilter=function(t){this.gos.set("enableAdvancedFilter",t)},t.prototype.setIncludeHiddenColumnsInAdvancedFilter=function(t){this.gos.set("includeHiddenColumnsInAdvancedFilter",t)},t.prototype.setAdvancedFilterParent=function(t){this.gos.set("advancedFilterParent",t)},t.prototype.setAdvancedFilterBuilderParams=function(t){this.gos.set("advancedFilterBuilderParams",t)},t.prototype.showAdvancedFilterBuilder=function(){nt.__assertRegistered(Z.AdvancedFilterModule,"api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")},t.prototype.setNodesSelected=function(t){var e=t.nodes.every((function(t){return t.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):void 0!==t.id||(console.warn("AG Grid: cannot select node until id for node is known"),!1)}));if(e){var i=t.nodes,o=t.source,n=t.newValue,r=i;this.selectionService.setNodesSelected({nodes:r,source:null!==o&&void 0!==o?o:"api",newValue:n})}},t.prototype.selectAll=function(t){void 0===t&&(t="apiSelectAll"),this.selectionService.selectAllRowNodes({source:t})},t.prototype.deselectAll=function(t){void 0===t&&(t="apiSelectAll"),this.selectionService.deselectAllRowNodes({source:t})},t.prototype.selectAllFiltered=function(t){void 0===t&&(t="apiSelectAllFiltered"),this.selectionService.selectAllRowNodes({source:t,justFiltered:!0})},t.prototype.deselectAllFiltered=function(t){void 0===t&&(t="apiSelectAllFiltered"),this.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})},t.prototype.getServerSideSelectionState=function(){return a(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getServerSideSelectionState()},t.prototype.setServerSideSelectionState=function(t){a(this.serverSideRowModel)?this.logMissingRowModel("setServerSideSelectionState","serverSide"):this.selectionService.setServerSideSelectionState(t)},t.prototype.selectAllOnCurrentPage=function(t){void 0===t&&(t="apiSelectAllCurrentPage"),this.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})},t.prototype.deselectAllOnCurrentPage=function(t){void 0===t&&(t="apiSelectAllCurrentPage"),this.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})},t.prototype.sizeColumnsToFit=function(t){this.gridBodyCtrl.sizeColumnsToFit(t)},t.prototype.showLoadingOverlay=function(){this.overlayWrapperComp.showLoadingOverlay()},t.prototype.showNoRowsOverlay=function(){this.overlayWrapperComp.showNoRowsOverlay()},t.prototype.hideOverlay=function(){this.overlayWrapperComp.hideOverlay()},t.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},t.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},t.prototype.getBestCostNodeSelection=function(){if(!a(this.clientSideRowModel))return this.selectionService.getBestCostNodeSelection();this.logMissingRowModel("getBestCostNodeSelection","clientSide")},t.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},t.prototype.ensureColumnVisible=function(t,e){void 0===e&&(e="auto"),this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(t,e)},t.prototype.ensureIndexVisible=function(t,e){this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t,e)},t.prototype.ensureNodeVisible=function(t,e){void 0===e&&(e=null),this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(t,e)},t.prototype.forEachLeafNode=function(t){a(this.clientSideRowModel)?this.logMissingRowModel("forEachLeafNode","clientSide"):this.clientSideRowModel.forEachLeafNode(t)},t.prototype.forEachNode=function(t,e){this.rowModel.forEachNode(t,e)},t.prototype.forEachNodeAfterFilter=function(t){a(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilter","clientSide"):this.clientSideRowModel.forEachNodeAfterFilter(t)},t.prototype.forEachNodeAfterFilterAndSort=function(t){a(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide"):this.clientSideRowModel.forEachNodeAfterFilterAndSort(t)},t.prototype.getFilterInstance=function(t,e){return this.filterManager.getFilterInstance(t,e)},t.prototype.destroyFilter=function(t){var e=this.columnModel.getPrimaryColumn(t);if(e)return this.filterManager.destroyFilter(e,"api")},t.prototype.getStatusPanel=function(t){if(nt.__assertRegistered(Z.StatusBarModule,"api.getStatusPanel",this.context.getGridId())){var e=this.statusBarService.getStatusPanel(t);return pu(e)}},t.prototype.getColumnDef=function(t){var e=this.columnModel.getPrimaryColumn(t);return e?e.getColDef():null},t.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},t.prototype.onFilterChanged=function(t){void 0===t&&(t="api"),this.filterManager.onFilterChanged({source:t})},t.prototype.onSortChanged=function(){this.sortController.onSortChanged("api")},t.prototype.setFilterModel=function(t){this.filterManager.setFilterModel(t)},t.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},t.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},t.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},t.prototype.setFocusedCell=function(t,e,i){this.focusService.setFocusedCell({rowIndex:t,column:e,rowPinned:i,forceBrowserFocus:!0})},t.prototype.setSuppressRowDrag=function(t){this.gos.set("suppressRowDrag",t)},t.prototype.setSuppressMoveWhenRowDragging=function(t){this.gos.set("suppressMoveWhenRowDragging",t)},t.prototype.setSuppressRowClickSelection=function(t){this.gos.set("suppressRowClickSelection",t)},t.prototype.addRowDropZone=function(t){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(t)},t.prototype.removeRowDropZone=function(t){var e=this.dragAndDropService.findExternalZone(t);e&&this.dragAndDropService.removeDropTarget(e)},t.prototype.getRowDropZoneParams=function(t){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(t)},t.prototype.setHeaderHeight=function(t){this.gos.set("headerHeight",t)},t.prototype.setDomLayout=function(t){this.gos.set("domLayout",t)},t.prototype.setEnableCellTextSelection=function(t){this.gridBodyCtrl.setCellTextSelection(t)},t.prototype.setFillHandleDirection=function(t){this.gos.set("fillHandleDirection",t)},t.prototype.setGroupHeaderHeight=function(t){this.gos.set("groupHeaderHeight",t)},t.prototype.setFloatingFiltersHeight=function(t){this.gos.set("floatingFiltersHeight",t)},t.prototype.setPivotHeaderHeight=function(t){this.gos.set("pivotHeaderHeight",t)},t.prototype.setPivotGroupHeaderHeight=function(t){this.gos.set("pivotGroupHeaderHeight",t)},t.prototype.setPivotMode=function(t){this.columnModel.setPivotMode(t)},t.prototype.setAnimateRows=function(t){this.gos.set("animateRows",t)},t.prototype.setIsExternalFilterPresent=function(t){this.gos.set("isExternalFilterPresent",t)},t.prototype.setDoesExternalFilterPass=function(t){this.gos.set("doesExternalFilterPass",t)},t.prototype.setNavigateToNextCell=function(t){this.gos.set("navigateToNextCell",t)},t.prototype.setTabToNextCell=function(t){this.gos.set("tabToNextCell",t)},t.prototype.setTabToNextHeader=function(t){this.gos.set("tabToNextHeader",t)},t.prototype.setNavigateToNextHeader=function(t){this.gos.set("navigateToNextHeader",t)},t.prototype.setRowGroupPanelShow=function(t){this.gos.set("rowGroupPanelShow",t)},t.prototype.setGetGroupRowAgg=function(t){this.gos.set("getGroupRowAgg",t)},t.prototype.setGetBusinessKeyForNode=function(t){this.gos.set("getBusinessKeyForNode",t)},t.prototype.setGetChildCount=function(t){this.gos.set("getChildCount",t)},t.prototype.setProcessRowPostCreate=function(t){this.gos.set("processRowPostCreate",t)},t.prototype.setGetRowId=function(t){this.gos.set("getRowId",t)},t.prototype.setGetRowClass=function(t){this.gos.set("getRowClass",t)},t.prototype.setIsFullWidthRow=function(t){this.gos.set("isFullWidthRow",t)},t.prototype.setIsRowSelectable=function(t){this.gos.set("isRowSelectable",t)},t.prototype.setIsRowMaster=function(t){this.gos.set("isRowMaster",t)},t.prototype.setPostSortRows=function(t){this.gos.set("postSortRows",t)},t.prototype.setGetDocument=function(t){this.gos.set("getDocument",t)},t.prototype.setGetContextMenuItems=function(t){this.gos.set("getContextMenuItems",t)},t.prototype.setGetMainMenuItems=function(t){this.gos.set("getMainMenuItems",t)},t.prototype.setProcessCellForClipboard=function(t){this.gos.set("processCellForClipboard",t)},t.prototype.setSendToClipboard=function(t){this.gos.set("sendToClipboard",t)},t.prototype.setProcessCellFromClipboard=function(t){this.gos.set("processCellFromClipboard",t)},t.prototype.setProcessSecondaryColDef=function(t){qe("28.0","setProcessSecondaryColDef","setProcessPivotResultColDef"),this.setProcessPivotResultColDef(t)},t.prototype.setProcessSecondaryColGroupDef=function(t){qe("28.0","setProcessSecondaryColGroupDef","setProcessPivotResultColGroupDef"),this.setProcessPivotResultColGroupDef(t)},t.prototype.setProcessPivotResultColDef=function(t){this.gos.set("processPivotResultColDef",t)},t.prototype.setProcessPivotResultColGroupDef=function(t){this.gos.set("processPivotResultColGroupDef",t)},t.prototype.setPostProcessPopup=function(t){this.gos.set("postProcessPopup",t)},t.prototype.setInitialGroupOrderComparator=function(t){this.gos.set("initialGroupOrderComparator",t)},t.prototype.setGetChartToolbarItems=function(t){this.gos.set("getChartToolbarItems",t)},t.prototype.setPaginationNumberFormatter=function(t){this.gos.set("paginationNumberFormatter",t)},t.prototype.setGetServerSideStoreParams=function(t){qe("28.0","setGetServerSideStoreParams","setGetServerSideGroupLevelParams"),this.setGetServerSideGroupLevelParams(t)},t.prototype.setGetServerSideGroupLevelParams=function(t){this.gos.set("getServerSideGroupLevelParams",t)},t.prototype.setIsServerSideGroupOpenByDefault=function(t){this.gos.set("isServerSideGroupOpenByDefault",t)},t.prototype.setIsApplyServerSideTransaction=function(t){this.gos.set("isApplyServerSideTransaction",t)},t.prototype.setIsServerSideGroup=function(t){this.gos.set("isServerSideGroup",t)},t.prototype.setGetServerSideGroupKey=function(t){this.gos.set("getServerSideGroupKey",t)},t.prototype.setGetRowStyle=function(t){this.gos.set("getRowStyle",t)},t.prototype.setGetRowHeight=function(t){this.gos.set("getRowHeight",t)},t.prototype.assertSideBarLoaded=function(t){return nt.__assertRegistered(Z.SideBarModule,"api."+t,this.context.getGridId())},t.prototype.isSideBarVisible=function(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarComp.isDisplayed()},t.prototype.setSideBarVisible=function(t){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarComp.setDisplayed(t)},t.prototype.setSideBarPosition=function(t){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarComp.setSideBarPosition(t)},t.prototype.openToolPanel=function(t){this.assertSideBarLoaded("openToolPanel")&&this.sideBarComp.openToolPanel(t,"api")},t.prototype.closeToolPanel=function(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarComp.close("api")},t.prototype.getOpenedToolPanel=function(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarComp.openedItem():null},t.prototype.refreshToolPanel=function(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarComp.refresh()},t.prototype.isToolPanelShowing=function(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarComp.isToolPanelShowing()},t.prototype.getToolPanelInstance=function(t){if(this.assertSideBarLoaded("getToolPanelInstance")){var e=this.sideBarComp.getToolPanelInstance(t);return pu(e)}},t.prototype.getSideBar=function(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarComp.getDef()},t.prototype.setSideBar=function(t){this.gos.set("sideBar",t)},t.prototype.setSuppressClipboardPaste=function(t){this.gos.set("suppressClipboardPaste",t)},t.prototype.resetRowHeights=function(){if(s(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive())return void console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");this.clientSideRowModel.resetRowHeights()}},t.prototype.setGroupRemoveSingleChildren=function(t){this.gos.set("groupRemoveSingleChildren",t)},t.prototype.setGroupRemoveLowestSingleChildren=function(t){this.gos.set("groupRemoveLowestSingleChildren",t)},t.prototype.setGroupDisplayType=function(t){this.gos.set("groupDisplayType",t)},t.prototype.setGroupIncludeFooter=function(t){this.gos.set("groupIncludeFooter",t)},t.prototype.setGroupIncludeTotalFooter=function(t){this.gos.set("groupIncludeTotalFooter",t)},t.prototype.setRowClass=function(t){this.gos.set("rowClass",t)},t.prototype.setDeltaSort=function(t){this.gos.set("deltaSort",t)},t.prototype.setRowCount=function(t,e){if(this.serverSideRowModel)return this.columnModel.isRowGroupEmpty()?void this.serverSideRowModel.setRowCount(t,e):void console.error("AG Grid: setRowCount cannot be used while using row grouping.");this.infiniteRowModel?this.infiniteRowModel.setRowCount(t,e):this.logMissingRowModel("setRowCount","infinite","serverSide")},t.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},t.prototype.getValue=function(t,e){var i=this.columnModel.getPrimaryColumn(t);return a(i)&&(i=this.columnModel.getGridColumn(t)),a(i)?null:this.valueService.getValue(i,e)},t.prototype.addEventListener=function(t,e){var i=this.gos.useAsyncEvents();this.eventService.addEventListener(t,e,i)},t.prototype.addGlobalListener=function(t){var e=this.gos.useAsyncEvents();this.eventService.addGlobalListener(t,e)},t.prototype.removeEventListener=function(t,e){var i=this.gos.useAsyncEvents();this.eventService.removeEventListener(t,e,i)},t.prototype.removeGlobalListener=function(t){var e=this.gos.useAsyncEvents();this.eventService.removeGlobalListener(t,e)},t.prototype.dispatchEvent=function(t){this.eventService.dispatchEvent(t)},t.prototype.destroy=function(){if(!this.destroyCalled){this.destroyCalled=!0,this.dispatchEvent({type:ge.EVENT_GRID_PRE_DESTROYED});var t=this.ctrlsService.getGridCtrl();t&&t.destroyGridUi(),this.context.destroy()}},t.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(F.bind(window,this,"Grid API"),100)},t.prototype.warnIfDestroyed=function(t){return this.destroyCalled&&console.warn("AG Grid: Grid API method "+t+" was called on a grid that was destroyed."),this.destroyCalled},t.prototype.resetQuickFilter=function(){this.warnIfDestroyed("resetQuickFilter")||this.filterManager.resetQuickFilterCache()},t.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(nt.__assertRegistered(Z.RangeSelectionModule,"api.getCellRanges",this.context.getGridId()),null)},t.prototype.addCellRange=function(t){this.rangeService?this.rangeService.addCellRange(t):nt.__assertRegistered(Z.RangeSelectionModule,"api.addCellRange",this.context.getGridId())},t.prototype.clearRangeSelection=function(){this.rangeService&&this.rangeService.removeAllCellRanges(),nt.__assertRegistered(Z.RangeSelectionModule,"gridApi.clearRangeSelection",this.context.getGridId())},t.prototype.undoCellEditing=function(){this.undoRedoService.undo("api")},t.prototype.redoCellEditing=function(){this.undoRedoService.redo("api")},t.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},t.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},t.prototype.getChartModels=function(){if(nt.__assertRegistered(Z.GridChartsModule,"api.getChartModels",this.context.getGridId()))return this.chartService.getChartModels()},t.prototype.getChartRef=function(t){if(nt.__assertRegistered(Z.GridChartsModule,"api.getChartRef",this.context.getGridId()))return this.chartService.getChartRef(t)},t.prototype.getChartImageDataURL=function(t){if(nt.__assertRegistered(Z.GridChartsModule,"api.getChartImageDataURL",this.context.getGridId()))return this.chartService.getChartImageDataURL(t)},t.prototype.downloadChart=function(t){if(nt.__assertRegistered(Z.GridChartsModule,"api.downloadChart",this.context.getGridId()))return this.chartService.downloadChart(t)},t.prototype.openChartToolPanel=function(t){if(nt.__assertRegistered(Z.GridChartsModule,"api.openChartToolPanel",this.context.getGridId()))return this.chartService.openChartToolPanel(t)},t.prototype.closeChartToolPanel=function(t){if(nt.__assertRegistered(Z.GridChartsModule,"api.closeChartToolPanel",this.context.getGridId()))return this.chartService.closeChartToolPanel(t.chartId)},t.prototype.createRangeChart=function(t){if(nt.__assertRegistered(Z.GridChartsModule,"api.createRangeChart",this.context.getGridId()))return this.chartService.createRangeChart(t)},t.prototype.createPivotChart=function(t){if(nt.__assertRegistered(Z.GridChartsModule,"api.createPivotChart",this.context.getGridId()))return this.chartService.createPivotChart(t)},t.prototype.createCrossFilterChart=function(t){if(nt.__assertRegistered(Z.GridChartsModule,"api.createCrossFilterChart",this.context.getGridId()))return this.chartService.createCrossFilterChart(t)},t.prototype.updateChart=function(t){nt.__assertRegistered(Z.GridChartsModule,"api.updateChart",this.context.getGridId())&&this.chartService.updateChart(t)},t.prototype.restoreChart=function(t,e){if(nt.__assertRegistered(Z.GridChartsModule,"api.restoreChart",this.context.getGridId()))return this.chartService.restoreChart(t,e)},t.prototype.copyToClipboard=function(t){nt.__assertRegistered(Z.ClipboardModule,"api.copyToClipboard",this.context.getGridId())&&this.clipboardService.copyToClipboard(t)},t.prototype.cutToClipboard=function(t){nt.__assertRegistered(Z.ClipboardModule,"api.cutToClipboard",this.context.getGridId())&&this.clipboardService.cutToClipboard(t,"api")},t.prototype.copySelectedRowsToClipboard=function(t){nt.__assertRegistered(Z.ClipboardModule,"api.copySelectedRowsToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRowsToClipboard(t)},t.prototype.copySelectedRangeToClipboard=function(t){nt.__assertRegistered(Z.ClipboardModule,"api.copySelectedRangeToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRangeToClipboard(t)},t.prototype.copySelectedRangeDown=function(){nt.__assertRegistered(Z.ClipboardModule,"api.copySelectedRangeDown",this.context.getGridId())&&this.clipboardService.copyRangeDown()},t.prototype.pasteFromClipboard=function(){nt.__assertRegistered(Z.ClipboardModule,"api.pasteFromClipboard",this.context.getGridId())&&this.clipboardService.pasteFromClipboard()},t.prototype.showColumnMenuAfterButtonClick=function(t,e){var i=this.columnModel.getGridColumn(t);this.menuFactory.showMenuAfterButtonClick(i,e,"columnMenu")},t.prototype.showColumnMenuAfterMouseClick=function(t,e){var i=this.columnModel.getGridColumn(t);i||(i=this.columnModel.getPrimaryColumn(t)),i?this.menuFactory.showMenuAfterMouseEvent(i,e):console.error("AG Grid: column '"+t+"' not found")},t.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},t.prototype.setPopupParent=function(t){this.gos.set("popupParent",t)},t.prototype.tabToNextCell=function(t){return this.navigationService.tabToNextCell(!1,t)},t.prototype.tabToPreviousCell=function(t){return this.navigationService.tabToNextCell(!0,t)},t.prototype.getCellRendererInstances=function(t){void 0===t&&(t={});var e=this.rowRenderer.getCellRendererInstances(t),i=e.map(pu);return i},t.prototype.getCellEditorInstances=function(t){void 0===t&&(t={});var e=this.rowRenderer.getCellEditorInstances(t),i=e.map(pu);return i},t.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},t.prototype.stopEditing=function(t){void 0===t&&(t=!1),this.rowRenderer.stopEditing(t)},t.prototype.startEditingCell=function(t){var e=this.columnModel.getGridColumn(t.colKey);if(e){var i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:e},o=null==t.rowPinned;o&&this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t.rowIndex);var n=this.navigationService.getCellByPosition(i);n&&(this.focusService.isCellFocused(i)||this.focusService.setFocusedCell(i),n.startRowOrCellEdit(t.key))}else console.warn("AG Grid: no column found for "+t.colKey)},t.prototype.addAggFunc=function(t,e){this.aggFuncService&&this.aggFuncService.addAggFunc(t,e)},t.prototype.addAggFuncs=function(t){this.aggFuncService&&this.aggFuncService.addAggFuncs(t)},t.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},t.prototype.applyServerSideTransaction=function(t){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransaction(t);this.logMissingRowModel("applyServerSideTransaction","serverSide")},t.prototype.applyServerSideTransactionAsync=function(t,e){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransactionAsync(t,e);this.logMissingRowModel("applyServerSideTransactionAsync","serverSide")},t.prototype.applyServerSideRowData=function(t){var e,i,o=null!==(e=t.startRow)&&void 0!==e?e:0,n=null!==(i=t.route)&&void 0!==i?i:[];o<0?console.warn("AG Grid: invalid value "+t.startRow+" for startRow, the value should be >= 0"):this.serverSideRowModel?this.serverSideRowModel.applyRowData(t.successParams,o,n):this.logMissingRowModel("setServerSideDatasource","serverSide")},t.prototype.retryServerSideLoads=function(){this.serverSideRowModel?this.serverSideRowModel.retryLoads():this.logMissingRowModel("retryServerSideLoads","serverSide")},t.prototype.flushServerSideAsyncTransactions=function(){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.flushAsyncTransactions();this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide")},t.prototype.applyTransaction=function(t){if(this.clientSideRowModel)return this.clientSideRowModel.updateRowData(t);this.logMissingRowModel("applyTransaction","clientSide")},t.prototype.applyTransactionAsync=function(t,e){this.clientSideRowModel?this.clientSideRowModel.batchUpdateRowData(t,e):this.logMissingRowModel("applyTransactionAsync","clientSide")},t.prototype.flushAsyncTransactions=function(){this.clientSideRowModel?this.clientSideRowModel.flushAsyncTransactions():this.logMissingRowModel("flushAsyncTransactions","clientSide")},t.prototype.setSuppressModelUpdateAfterUpdateTransaction=function(t){this.gos.set("suppressModelUpdateAfterUpdateTransaction",t)},t.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")},t.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")},t.prototype.refreshServerSide=function(t){this.serverSideRowModel?this.serverSideRowModel.refreshStore(t):this.logMissingRowModel("refreshServerSide","serverSide")},t.prototype.refreshServerSideStore=function(t){return qe("28.0","refreshServerSideStore","refreshServerSide"),this.refreshServerSide(t)},t.prototype.getServerSideStoreState=function(){return qe("28.0","getServerSideStoreState","getServerSideGroupLevelState"),this.getServerSideGroupLevelState()},t.prototype.getServerSideGroupLevelState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])},t.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")},t.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")},t.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},t.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},t.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},t.prototype.getDisplayedRowAtIndex=function(t){return this.rowModel.getRow(t)},t.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},t.prototype.setDataTypeDefinitions=function(t){this.gos.set("dataTypeDefinitions",t)},t.prototype.setPagination=function(t){this.gos.set("pagination",t)},t.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},t.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},t.prototype.paginationSetPageSize=function(t){this.gos.set("paginationPageSize",t)},t.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},t.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},t.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},t.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},t.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},t.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},t.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},t.prototype.paginationGoToPage=function(t){this.paginationProxy.goToPage(t)},hu([dt("immutableService")],t.prototype,"immutableService",void 0),hu([dt("csvCreator")],t.prototype,"csvCreator",void 0),hu([dt("excelCreator")],t.prototype,"excelCreator",void 0),hu([pt("rowRenderer")],t.prototype,"rowRenderer",void 0),hu([pt("navigationService")],t.prototype,"navigationService",void 0),hu([pt("filterManager")],t.prototype,"filterManager",void 0),hu([pt("columnModel")],t.prototype,"columnModel",void 0),hu([pt("selectionService")],t.prototype,"selectionService",void 0),hu([pt("gridOptionsService")],t.prototype,"gos",void 0),hu([pt("valueService")],t.prototype,"valueService",void 0),hu([pt("alignedGridsService")],t.prototype,"alignedGridsService",void 0),hu([pt("eventService")],t.prototype,"eventService",void 0),hu([pt("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),hu([pt("context")],t.prototype,"context",void 0),hu([pt("rowModel")],t.prototype,"rowModel",void 0),hu([pt("sortController")],t.prototype,"sortController",void 0),hu([pt("paginationProxy")],t.prototype,"paginationProxy",void 0),hu([pt("focusService")],t.prototype,"focusService",void 0),hu([pt("dragAndDropService")],t.prototype,"dragAndDropService",void 0),hu([dt("rangeService")],t.prototype,"rangeService",void 0),hu([dt("clipboardService")],t.prototype,"clipboardService",void 0),hu([dt("aggFuncService")],t.prototype,"aggFuncService",void 0),hu([pt("menuFactory")],t.prototype,"menuFactory",void 0),hu([dt("contextMenuFactory")],t.prototype,"contextMenuFactory",void 0),hu([pt("valueCache")],t.prototype,"valueCache",void 0),hu([pt("animationFrameService")],t.prototype,"animationFrameService",void 0),hu([dt("statusBarService")],t.prototype,"statusBarService",void 0),hu([dt("chartService")],t.prototype,"chartService",void 0),hu([dt("undoRedoService")],t.prototype,"undoRedoService",void 0),hu([dt("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),hu([dt("ssrmTransactionManager")],t.prototype,"serverSideTransactionManager",void 0),hu([pt("ctrlsService")],t.prototype,"ctrlsService",void 0),hu([ut],t.prototype,"init",null),hu([ct],t.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),t=hu([ht("gridApi")],t),t}(),gu=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),yu=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},_u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.quickFilter=null,e.quickFilterParts=null,e}var i;return gu(e,t),i=e,e.prototype.postConstruct=function(){var t=this;this.addManagedListener(this.eventService,ge.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){return t.resetQuickFilterCache()})),this.addManagedListener(this.eventService,ge.EVENT_NEW_COLUMNS_LOADED,(function(){return t.resetQuickFilterCache()})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.resetQuickFilterCache()})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_VISIBLE,(function(){t.gridOptionsService.is("includeHiddenColumnsInQuickFilter")||t.resetQuickFilterCache()})),this.addManagedPropertyListener("quickFilterText",(function(e){return t.setQuickFilter(e.currentValue)})),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",(function(){return t.onIncludeHiddenColumnsInQuickFilterChanged()})),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.parser=this.gridOptionsService.get("quickFilterParser"),this.matcher=this.gridOptionsService.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],(function(){return t.setQuickFilterParserAndMatcher()}))},e.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},e.prototype.doesRowPassQuickFilter=function(t){var e=this,i=this.gridOptionsService.is("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(i,t):this.quickFilterParts.every((function(o){return i?e.doesRowPassQuickFilterCache(t,o):e.doesRowPassQuickFilterNoCache(t,o)}))},e.prototype.resetQuickFilterCache=function(){this.rowModel.forEachNode((function(t){return t.quickFilterAggregateText=null}))},e.prototype.setQuickFilterParts=function(){var t=this,e=t.quickFilter,i=t.parser;this.quickFilterParts=e?i?i(e):e.split(" "):null},e.prototype.parseQuickFilter=function(t){return s(t)?this.gridOptionsService.isRowModelType("clientSide")?t.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null},e.prototype.setQuickFilter=function(t){if(null==t||"string"===typeof t){var e=this.parseQuickFilter(t);this.quickFilter!==e&&(this.quickFilter=e,this.setQuickFilterParts(),this.dispatchEvent({type:i.EVENT_QUICK_FILTER_CHANGED}))}else console.warn("AG Grid - setQuickFilter() only supports string inputs, received: "+typeof t)},e.prototype.setQuickFilterParserAndMatcher=function(){var t=this.gridOptionsService.get("quickFilterParser"),e=this.gridOptionsService.get("quickFilterMatcher"),o=t!==this.parser||e!==this.matcher;this.parser=t,this.matcher=e,o&&(this.setQuickFilterParts(),this.dispatchEvent({type:i.EVENT_QUICK_FILTER_CHANGED}))},e.prototype.onIncludeHiddenColumnsInQuickFilterChanged=function(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:i.EVENT_QUICK_FILTER_CHANGED})},e.prototype.doesRowPassQuickFilterNoCache=function(t,e){var i=this,o=this.columnModel.getAllColumnsForQuickFilter();return o.some((function(o){var n=i.getQuickFilterTextForColumn(o,t);return s(n)&&n.indexOf(e)>=0}))},e.prototype.doesRowPassQuickFilterCache=function(t,e){return this.checkGenerateQuickFilterAggregateText(t),t.quickFilterAggregateText.indexOf(e)>=0},e.prototype.doesRowPassQuickFilterMatcher=function(t,e){var i;t?(this.checkGenerateQuickFilterAggregateText(e),i=e.quickFilterAggregateText):i=this.getQuickFilterAggregateText(e);var o=this,n=o.quickFilterParts,r=o.matcher;return r(n,i)},e.prototype.checkGenerateQuickFilterAggregateText=function(t){t.quickFilterAggregateText||(t.quickFilterAggregateText=this.getQuickFilterAggregateText(t))},e.prototype.getQuickFilterTextForColumn=function(t,e){var i=this.valueService.getValue(t,e,!0),o=t.getColDef();if(o.getQuickFilterText){var n={value:i,node:e,data:e.data,column:t,colDef:o,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};i=o.getQuickFilterText(n)}return s(i)?i.toString().toUpperCase():null},e.prototype.getQuickFilterAggregateText=function(t){var e=this,o=[],n=this.columnModel.getAllColumnsForQuickFilter();return n.forEach((function(i){var n=e.getQuickFilterTextForColumn(i,t);s(n)&&o.push(n)})),o.join(i.QUICK_FILTER_SEPARATOR)},e.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged",e.QUICK_FILTER_SEPARATOR="\n",yu([pt("valueService")],e.prototype,"valueService",void 0),yu([pt("columnModel")],e.prototype,"columnModel",void 0),yu([pt("rowModel")],e.prototype,"rowModel",void 0),yu([ut],e.prototype,"postConstruct",null),e=i=yu([ht("quickFilterService")],e),e}(le),mu=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),vu=function(){return vu=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},vu.apply(this,arguments)},bu=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Cu=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allColumnFilters=new Map,e.allColumnListeners=new Map,e.activeAggregateFilters=[],e.activeColumnFilters=[],e.processingFilterChange=!1,e.filterModelUpdateQueue=[],e}return mu(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.eventService,ge.EVENT_GRID_COLUMNS_CHANGED,(function(){return t.onColumnsChanged()})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_VALUE_CHANGED,(function(){return t.refreshFiltersForAggregations()})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_PIVOT_CHANGED,(function(){return t.refreshFiltersForAggregations()})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){return t.refreshFiltersForAggregations()})),this.addManagedListener(this.eventService,ge.EVENT_NEW_COLUMNS_LOADED,(function(){return t.updateAdvancedFilterColumns()})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_VISIBLE,(function(){return t.updateAdvancedFilterColumns()})),this.allowShowChangeAfterFilter=this.gridOptionsService.is("allowShowChangeAfterFilter"),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",(function(){return t.updateAggFiltering()})),this.addManagedPropertyListener("advancedFilterModel",(function(e){return t.setAdvancedFilterModel(e.currentValue)})),this.addManagedListener(this.eventService,ge.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,(function(e){var i=e.enabled;return t.onAdvancedFilterEnabledChanged(i)})),this.addManagedListener(this.eventService,ge.EVENT_DATA_TYPES_INFERRED,(function(){return t.processFilterModelUpdateQueue()})),this.addManagedListener(this.quickFilterService,_u.EVENT_QUICK_FILTER_CHANGED,(function(){return t.onFilterChanged({source:"quickFilter"})}))},e.prototype.isExternalFilterPresentCallback=function(){var t=this.gridOptionsService.getCallback("isExternalFilterPresent");return"function"===typeof t&&t({})},e.prototype.doesExternalFilterPass=function(t){var e=this.gridOptionsService.get("doesExternalFilterPass");return"function"===typeof e&&e(t)},e.prototype.setFilterModel=function(t){var e=this;if(this.isAdvancedFilterEnabled())this.warnAdvancedFilters();else if(this.dataTypeService.isPendingInference())this.filterModelUpdateQueue.push(t);else{var i=[],o=this.getFilterModel();if(t){var n=er(Object.keys(t));this.allColumnFilters.forEach((function(o,r){var s=t[r];i.push(e.setModelOnFilterWrapper(o.filterPromise,s)),n.delete(r)})),n.forEach((function(o){var n=e.columnModel.getPrimaryColumn(o)||e.columnModel.getGridColumn(o);if(n)if(n.isFilterAllowed()){var r=e.getOrCreateFilterWrapper(n,"NO_UI");r?i.push(e.setModelOnFilterWrapper(r.filterPromise,t[o])):console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+o)}else console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+o);else console.warn("AG Grid: setFilterModel() - no column found for colId: "+o)}))}else this.allColumnFilters.forEach((function(t){i.push(e.setModelOnFilterWrapper(t.filterPromise,null))}));cr.all(i).then((function(){var t=e.getFilterModel(),i=[];e.allColumnFilters.forEach((function(e,n){var r=o?o[n]:null,s=t?t[n]:null;sr.jsonEquals(r,s)||i.push(e.column)})),i.length>0&&e.onFilterChanged({columns:i,source:"api"})}))}},e.prototype.setModelOnFilterWrapper=function(t,e){return new cr((function(i){t.then((function(t){"function"!==typeof t.setModel&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),i()),(t.setModel(e)||cr.resolve()).then((function(){return i()}))}))}))},e.prototype.getFilterModel=function(){var t={};return this.allColumnFilters.forEach((function(e,i){var o=e.filterPromise,n=o.resolveNow(null,(function(t){return t}));if(null==n)return null;if("function"===typeof n.getModel){var r=n.getModel();s(r)&&(t[i]=r)}else console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel")})),t},e.prototype.isColumnFilterPresent=function(){return this.activeColumnFilters.length>0},e.prototype.isAggregateFilterPresent=function(){return!!this.activeAggregateFilters.length},e.prototype.isExternalFilterPresent=function(){return this.externalFilterPresent},e.prototype.isChildFilterPresent=function(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()},e.prototype.isAdvancedFilterPresent=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()},e.prototype.onAdvancedFilterEnabledChanged=function(t){var e,i=this;t?this.allColumnFilters.size&&(this.allColumnFilters.forEach((function(t){return i.disposeFilterWrapper(t,"advancedFilterEnabled")})),this.onFilterChanged({source:"advancedFilter"})):(null===(e=this.advancedFilterService)||void 0===e?void 0:e.isFilterPresent())&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))},e.prototype.isAdvancedFilterEnabled=function(){var t;return null===(t=this.advancedFilterService)||void 0===t?void 0:t.isEnabled()},e.prototype.isAdvancedFilterHeaderActive=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()},e.prototype.doAggregateFiltersPass=function(t,e){return this.doColumnFiltersPass(t,e,!0)},e.prototype.updateActiveFilters=function(){var t=this;this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;var e=function(t){return!!t&&(t.isFilterActive?t.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1))},i=!!this.gridOptionsService.getGroupAggFiltering(),o=function(e){var o=!e.isPrimary();if(o)return!0;var n=!t.columnModel.isPivotActive(),r=e.isValueActive();return!(!r||!n)&&(!!t.columnModel.isPivotMode()||i)};this.allColumnFilters.forEach((function(i){if(i.filterPromise.resolveNow(!1,e)){var n=i.filterPromise.resolveNow(null,(function(t){return t}));o(i.column)?t.activeAggregateFilters.push(n):t.activeColumnFilters.push(n)}}))},e.prototype.updateFilterFlagInColumns=function(t,e){this.allColumnFilters.forEach((function(i){var o=i.filterPromise.resolveNow(!1,(function(t){return t.isFilterActive()}));i.column.setFilterActive(o,t,e)}))},e.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()},e.prototype.doColumnFiltersPass=function(t,e,i){for(var o=t.data,n=t.aggData,r=i?this.activeAggregateFilters:this.activeColumnFilters,s=i?n:o,a=0;a<r.length;a++){var l=r[a];if(null!=l&&l!==e){if("function"!==typeof l.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:t,data:s}))return!1}}return!0},e.prototype.resetQuickFilterCache=function(){this.quickFilterService.resetQuickFilterCache()},e.prototype.refreshFiltersForAggregations=function(){var t=this.gridOptionsService.getGroupAggFiltering();t&&this.onFilterChanged()},e.prototype.callOnFilterChangedOutsideRenderCycle=function(t){var e=this,i=function(){return e.onFilterChanged(t)};this.rowRenderer.isRefreshInProgress()?setTimeout(i,0):i()},e.prototype.onFilterChanged=function(t){void 0===t&&(t={});var e=t.source,i=t.filterInstance,o=t.additionalEventAttributes,n=t.columns;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",o),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach((function(t){t.filterPromise&&t.filterPromise.then((function(t){t&&t!==i&&t.onAnyFilterChanged&&t.onAnyFilterChanged()}))}));var r={source:e,type:ge.EVENT_FILTER_CHANGED,columns:n||[]};o&&D(r,o),this.processingFilterChange=!0,this.eventService.dispatchEvent(r),this.processingFilterChange=!1},e.prototype.isSuppressFlashingCellsBecauseFiltering=function(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange},e.prototype.isQuickFilterPresent=function(){return this.quickFilterService.isQuickFilterPresent()},e.prototype.updateAggFiltering=function(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()},e.prototype.isAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())},e.prototype.isNonAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())},e.prototype.doesRowPassOtherFilters=function(t,e){return this.doesRowPassFilter({rowNode:e,filterInstanceToSkip:t})},e.prototype.doesRowPassAggregateFilters=function(t){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode))&&!(this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(t.rowNode,t.filterInstanceToSkip))},e.prototype.doesRowPassFilter=function(t){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode))&&(!(this.isExternalFilterPresent()&&!this.doesExternalFilterPass(t.rowNode))&&(!(this.isColumnFilterPresent()&&!this.doColumnFiltersPass(t.rowNode,t.filterInstanceToSkip))&&!(this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(t.rowNode))))},e.prototype.onNewRowsLoaded=function(t){this.allColumnFilters.forEach((function(t){t.filterPromise.then((function(t){t.onNewRowsLoaded&&t.onNewRowsLoaded()}))})),this.updateFilterFlagInColumns(t,{afterDataChange:!0}),this.updateActiveFilters()},e.prototype.createValueGetter=function(t){var e=this;return function(i){var o=i.node;return e.valueService.getValue(t,o,!0)}},e.prototype.getFilterComponent=function(t,e,i){var o;if(void 0===i&&(i=!0),i)return(null===(o=this.getOrCreateFilterWrapper(t,e))||void 0===o?void 0:o.filterPromise)||null;var n=this.cachedFilter(t);return n?n.filterPromise:null},e.prototype.isFilterActive=function(t){var e=this.cachedFilter(t);return!!e&&e.filterPromise.resolveNow(!1,(function(t){return t.isFilterActive()}))},e.prototype.getOrCreateFilterWrapper=function(t,e){var i=this;if(!t.isFilterAllowed())return null;var o=this.cachedFilter(t);if(o)"NO_UI"!==e&&this.putIntoGui(o,e);else{o=this.createFilterWrapper(t,e);var n=t.getColId();this.allColumnFilters.set(n,o),this.allColumnListeners.set(n,this.addManagedListener(t,xt.EVENT_COL_DEF_CHANGED,(function(){return i.checkDestroyFilter(n)})))}return o},e.prototype.cachedFilter=function(t){return this.allColumnFilters.get(t.getColId())},e.prototype.getDefaultFilter=function(t){var e;if(nt.__isRegistered(Z.SetFilterModule,this.context.getGridId()))e="agSetColumnFilter";else{var i=t.getColDef().cellDataType;e="number"===i?"agNumberColumnFilter":"date"===i||"dateString"===i?"agDateColumnFilter":"agTextColumnFilter"}return e},e.prototype.getDefaultFloatingFilter=function(t){var e;if(nt.__isRegistered(Z.SetFilterModule,this.context.getGridId()))e="agSetColumnFloatingFilter";else{var i=t.getColDef().cellDataType;e="number"===i?"agNumberColumnFloatingFilter":"date"===i||"dateString"===i?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return e},e.prototype.createFilterInstance=function(t){var e,i=this,o=this.getDefaultFilter(t),n=t.getColDef(),r=vu(vu({},this.createFilterParams(t,n)),{filterModifiedCallback:function(){var o={type:ge.EVENT_FILTER_MODIFIED,column:t,filterInstance:e};i.eventService.dispatchEvent(o)},filterChangedCallback:function(o){var n,r=null!==(n=null===o||void 0===o?void 0:o.source)&&void 0!==n?n:"api",s={filterInstance:e,additionalEventAttributes:o,columns:[t],source:r};i.callOnFilterChangedOutsideRenderCycle(s)},doesRowPassOtherFilter:function(t){return i.doesRowPassOtherFilters(e,t)}}),s=this.userComponentFactory.getFilterDetails(n,r,o);return s?{filterPromise:function(){var t=s.newAgStackInstance();return t&&t.then((function(t){return e=t})),t},compDetails:s}:{filterPromise:null,compDetails:null}},e.prototype.createFilterParams=function(t,e){var i={column:t,colDef:w(e),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(t),doesRowPassOtherFilter:function(){return!0},api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return i},e.prototype.createFilterWrapper=function(t,e){var i,o={column:t,filterPromise:null,compiledElement:null,guiPromise:cr.resolve(null),compDetails:null},n=this.createFilterInstance(t),r=n.filterPromise,s=n.compDetails;return o.filterPromise=null!==(i=null===r||void 0===r?void 0:r())&&void 0!==i?i:null,o.compDetails=s,r&&this.putIntoGui(o,e),o},e.prototype.putIntoGui=function(t,e){var i=this,o=document.createElement("div");o.className="ag-filter",t.guiPromise=new cr((function(n){t.filterPromise.then((function(r){var a=r.getGui();s(a)||console.warn("AG Grid: getGui method from filter returned "+a+", it should be a DOM element or an HTML template string."),"string"===typeof a&&(a=un(a)),o.appendChild(a),n(o);var l={type:ge.EVENT_FILTER_OPENED,column:t.column,source:e,eGui:o};i.eventService.dispatchEvent(l)}))}))},e.prototype.onColumnsChanged=function(){var t=this,e=[];this.allColumnFilters.forEach((function(i,o){var n;n=i.column.isPrimary()?t.columnModel.getPrimaryColumn(o):t.columnModel.getGridColumn(o),n||(e.push(i.column),t.disposeFilterWrapper(i,"columnChanged"),t.disposeColumnListener(o))})),e.length>0?this.onFilterChanged({columns:e,source:"api"}):this.updateDependantFilters()},e.prototype.updateDependantFilters=function(){var t=this,e=this.columnModel.getGroupAutoColumns();null===e||void 0===e||e.forEach((function(e){"agGroupColumnFilter"===e.getColDef().filter&&t.getOrCreateFilterWrapper(e,"NO_UI")}))},e.prototype.isFilterAllowed=function(t){var e,i;if(this.isAdvancedFilterEnabled())return!1;var o=t.isFilterAllowed();if(!o)return!1;var n=this.allColumnFilters.get(t.getColId());return null===(i=null===(e=null===n||void 0===n?void 0:n.filterPromise)||void 0===e?void 0:e.resolveNow(!0,(function(t){var e,i;return"function"!==typeof(null===(e=t)||void 0===e?void 0:e.isFilterAllowed)||(null===(i=t)||void 0===i?void 0:i.isFilterAllowed())})))||void 0===i||i},e.prototype.getFloatingFilterCompDetails=function(t,e){var i=this,o=t.getColDef(),n=this.createFilterParams(t,o),r=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(o,Wl,n),s=this.userComponentFactory.getDefaultFloatingFilterType(o,(function(){return i.getDefaultFloatingFilter(t)}));null==s&&(s="agReadOnlyFloatingFilter");var a=function(e){var o=i.getFilterComponent(t,"NO_UI");null!=o&&o.then((function(t){e(pu(t))}))},l={column:t,filterParams:r,currentParentModel:function(){return i.getCurrentFloatingFilterParentModel(t)},parentFilterInstance:a,showParentFilter:e,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(o,l,s)},e.prototype.getCurrentFloatingFilterParentModel=function(t){var e=this.getFilterComponent(t,"NO_UI",!1);return e?e.resolveNow(null,(function(t){return t&&t.getModel()})):null},e.prototype.destroyFilter=function(t,e){void 0===e&&(e="api");var i=t.getColId(),o=this.allColumnFilters.get(i);this.disposeColumnListener(i),o&&(this.disposeFilterWrapper(o,e),this.onFilterChanged({columns:[t],source:"api"}))},e.prototype.disposeColumnListener=function(t){var e=this.allColumnListeners.get(t);e&&(this.allColumnListeners.delete(t),e())},e.prototype.disposeFilterWrapper=function(t,e){var i=this;t.filterPromise.then((function(o){(o.setModel(null)||cr.resolve()).then((function(){i.getContext().destroyBean(o),t.column.setFilterActive(!1,"filterDestroyed"),i.allColumnFilters.delete(t.column.getColId());var n={type:ge.EVENT_FILTER_DESTROYED,source:e,column:t.column};i.eventService.dispatchEvent(n)}))}))},e.prototype.checkDestroyFilter=function(t){var e=this.allColumnFilters.get(t);if(e){var i=e.column,o=(i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null}).compDetails;this.areFilterCompsDifferent(e.compDetails,o)&&this.destroyFilter(i,"columnChanged")}},e.prototype.areFilterCompsDifferent=function(t,e){if(!e||!t)return!0;var i=t.componentClass,o=e.componentClass,n=i===o||(null===i||void 0===i?void 0:i.render)&&(null===o||void 0===o?void 0:o.render)&&i.render===o.render;return!n},e.prototype.getAdvancedFilterModel=function(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null},e.prototype.setAdvancedFilterModel=function(t){this.isAdvancedFilterEnabled()&&(this.advancedFilterService.setModel(null!==t&&void 0!==t?t:null),this.onFilterChanged({source:"advancedFilter"}))},e.prototype.showAdvancedFilterBuilder=function(t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(t,!0)},e.prototype.updateAdvancedFilterColumns=function(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})},e.prototype.hasFloatingFilters=function(){if(this.isAdvancedFilterEnabled())return!1;var t=this.columnModel.getAllGridColumns();return!!t&&t.some((function(t){return t.getColDef().floatingFilter}))},e.prototype.getFilterInstance=function(t,e){if(!this.isAdvancedFilterEnabled()){var i=this.getFilterInstanceImpl(t,(function(t){if(e){var i=pu(t);e(i)}})),o=pu(i);return o}this.warnAdvancedFilters()},e.prototype.getFilterInstanceImpl=function(t,e){var i=this.columnModel.getPrimaryColumn(t);if(i){var o=this.getFilterComponent(i,"NO_UI"),n=o&&o.resolveNow(null,(function(t){return t}));return n?setTimeout(e,0,n):o&&o.then((function(t){e(t)})),n}},e.prototype.warnAdvancedFilters=function(){G((function(){console.warn("AG Grid: Column Filter API methods have been disabled as Advanced Filters are enabled.")}),"advancedFiltersCompatibility")},e.prototype.setupAdvancedFilterHeaderComp=function(t){var e;null===(e=this.advancedFilterService)||void 0===e||e.getCtrl().setupHeaderComp(t)},e.prototype.getHeaderRowCount=function(){return this.isAdvancedFilterHeaderActive()?1:0},e.prototype.getHeaderHeight=function(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0},e.prototype.processFilterModelUpdateQueue=function(){var t=this;this.filterModelUpdateQueue.forEach((function(e){return t.setFilterModel(e)})),this.filterModelUpdateQueue=[]},e.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),this.allColumnFilters.forEach((function(t){return e.disposeFilterWrapper(t,"gridDestroyed")})),this.allColumnListeners.clear()},bu([pt("valueService")],e.prototype,"valueService",void 0),bu([pt("columnModel")],e.prototype,"columnModel",void 0),bu([pt("rowModel")],e.prototype,"rowModel",void 0),bu([pt("userComponentFactory")],e.prototype,"userComponentFactory",void 0),bu([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),bu([pt("dataTypeService")],e.prototype,"dataTypeService",void 0),bu([pt("quickFilterService")],e.prototype,"quickFilterService",void 0),bu([dt("advancedFilterService")],e.prototype,"advancedFilterService",void 0),bu([ut],e.prototype,"init",null),e=bu([ht("filterManager")],e),e}(le),wu=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Su=function(t){function e(e,i){var o=t.call(this,e)||this;return o.ctrl=i,o}return wu(e,t),e.prototype.getCtrl=function(){return this.ctrl},e}(vr),Eu=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),xu=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ou=function(t){function e(i){return t.call(this,e.TEMPLATE,i)||this}return Eu(e,t),e.prototype.postConstruct=function(){var t=this,e=this.getGui(),i={addOrRemoveCssClass:function(e,i){return t.addOrRemoveCssClass(e,i)},addOrRemoveBodyCssClass:function(e,i){return t.eFloatingFilterBody.classList.toggle(e,i)},setButtonWrapperDisplayed:function(e){return Uo(t.eButtonWrapper,e)},setCompDetails:function(e){return t.setCompDetails(e)},getFloatingFilterComp:function(){return t.compPromise},setWidth:function(t){return e.style.width=t},setMenuIcon:function(e){return t.eButtonShowMainFilter.appendChild(e)}};this.ctrl.setComp(i,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)},e.prototype.setCompDetails=function(t){var e=this;if(!t)return this.destroyFloatingFilterComp(),void(this.compPromise=null);this.compPromise=t.newAgStackInstance(),this.compPromise.then((function(t){return e.afterCompCreated(t)}))},e.prototype.destroyFloatingFilterComp=function(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))},e.prototype.afterCompCreated=function(t){t&&(this.isAlive()?(this.destroyFloatingFilterComp(),this.floatingFilterComp=t,this.eFloatingFilterBody.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached()):this.destroyBean(t))},e.TEMPLATE='<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',xu([br("eFloatingFilterBody")],e.prototype,"eFloatingFilterBody",void 0),xu([br("eButtonWrapper")],e.prototype,"eButtonWrapper",void 0),xu([br("eButtonShowMainFilter")],e.prototype,"eButtonShowMainFilter",void 0),xu([ut],e.prototype,"postConstruct",null),xu([ct],e.prototype,"destroyFloatingFilterComp",null),e}(Su),Ru=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Iu=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};(function(t){t["AUTO_HEIGHT"]="ag-layout-auto-height",t["NORMAL"]="ag-layout-normal",t["PRINT"]="ag-layout-print"})(du||(du={}));var Tu,Pu,Du=function(t){function e(e){var i=t.call(this)||this;return i.view=e,i}return Ru(e,t),e.prototype.postConstruct=function(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},e.prototype.updateLayoutClasses=function(){var t=this.getDomLayout(),e={autoHeight:"autoHeight"===t,normal:"normal"===t,print:"print"===t},i=e.autoHeight?du.AUTO_HEIGHT:e.print?du.PRINT:du.NORMAL;this.view.updateLayoutClasses(i,e)},e.prototype.getDomLayout=function(){var t,e=null!==(t=this.gridOptionsService.get("domLayout"))&&void 0!==t?t:"normal",i=["normal","print","autoHeight"];return-1===i.indexOf(e)?(G((function(){return console.warn("AG Grid: "+e+" is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.")}),"warn about dom layout values"),"normal"):e},Iu([ut],e.prototype,"postConstruct",null),e}(le),ku=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Au=function(){return Au=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Au.apply(this,arguments)},Lu=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};(function(t){t[t["Vertical"]=0]="Vertical",t[t["Horizontal"]=1]="Horizontal"})(Tu||(Tu={})),function(t){t[t["Container"]=0]="Container",t[t["FakeContainer"]=1]="FakeContainer"}(Pu||(Pu={}));var Mu,Fu=function(t){function e(e){var i=t.call(this)||this;return i.lastScrollSource=[null,null],i.scrollLeft=-1,i.nextScrollTop=-1,i.scrollTop=-1,i.eBodyViewport=e,i.resetLastHScrollDebounced=Y((function(){return i.lastScrollSource[Tu.Horizontal]=null}),500),i.resetLastVScrollDebounced=Y((function(){return i.lastScrollSource[Tu.Vertical]=null}),500),i}return ku(e,t),e.prototype.postConstruct=function(){var t=this;this.enableRtl=this.gridOptionsService.is("enableRtl"),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady((function(e){t.centerRowContainerCtrl=e.centerRowContainerCtrl,t.onDisplayedColumnsWidthChanged(),t.addScrollListener()}))},e.prototype.addScrollListener=function(){var t=this.ctrlsService.getFakeHScrollComp(),e=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),t.onScrollCallback(this.onFakeHScroll.bind(this));var i=this.gridOptionsService.is("debounceVerticalScrollbar"),o=i?Y(this.onVScroll.bind(this),100):this.onVScroll.bind(this),n=i?Y(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",o),e.onScrollCallback(n)},e.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},e.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(t){var e=null==this.centerRowContainerCtrl;if(!e){void 0===t&&(t=this.centerRowContainerCtrl.getCenterViewportScrollLeft());var i=this.enableRtl?t:-t,o=this.ctrlsService.getTopCenterRowContainerCtrl(),n=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),r=this.ctrlsService.getBottomCenterRowContainerCtrl(),s=this.ctrlsService.getFakeHScrollComp(),a=this.ctrlsService.getHeaderRowContainerCtrl();a.setHorizontalScroll(-i),r.setContainerTranslateX(i),o.setContainerTranslateX(i),n.setContainerTranslateX(i);var l=this.centerRowContainerCtrl.getViewportElement(),u=this.lastScrollSource[Tu.Horizontal]===Pu.Container;t=Math.abs(t),u?s.setScrollPosition(t):nn(l,t,this.enableRtl)}},e.prototype.isControllingScroll=function(t,e){return null==this.lastScrollSource[e]?(this.lastScrollSource[e]=t,!0):this.lastScrollSource[e]===t},e.prototype.onFakeHScroll=function(){this.isControllingScroll(Pu.FakeContainer,Tu.Horizontal)&&this.onHScrollCommon(Pu.FakeContainer)},e.prototype.onHScroll=function(){this.isControllingScroll(Pu.Container,Tu.Horizontal)&&this.onHScrollCommon(Pu.Container)},e.prototype.onHScrollCommon=function(t){var e,i=this.centerRowContainerCtrl.getViewportElement(),o=i.scrollLeft;this.shouldBlockScrollUpdate(Tu.Horizontal,o,!0)||(e=t===Pu.Container?on(i,this.enableRtl):this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(e)),this.resetLastHScrollDebounced())},e.prototype.onFakeVScroll=function(){this.isControllingScroll(Pu.FakeContainer,Tu.Vertical)&&this.onVScrollCommon(Pu.FakeContainer)},e.prototype.onVScroll=function(){this.isControllingScroll(Pu.Container,Tu.Vertical)&&this.onVScrollCommon(Pu.Container)},e.prototype.onVScrollCommon=function(t){var e;e=t===Pu.Container?this.eBodyViewport.scrollTop:this.ctrlsService.getFakeVScrollComp().getScrollPosition(),this.shouldBlockScrollUpdate(Tu.Vertical,e,!0)||(this.animationFrameService.setScrollTop(e),this.nextScrollTop=e,t===Pu.Container?this.ctrlsService.getFakeVScrollComp().setScrollPosition(e):this.eBodyViewport.scrollTop=e,this.gridOptionsService.is("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())},e.prototype.doHorizontalScroll=function(t){var e=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===t&&t===e||(this.scrollLeft=t,this.fireScrollEvent(Tu.Horizontal),this.horizontallyScrollHeaderCenterAndFloatingCenter(t),this.centerRowContainerCtrl.onHorizontalViewportChanged(!0))},e.prototype.fireScrollEvent=function(t){var e=this,i={type:ge.EVENT_BODY_SCROLL,direction:t===Tu.Horizontal?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(i),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout((function(){var t=Au(Au({},i),{type:ge.EVENT_BODY_SCROLL_END});e.eventService.dispatchEvent(t)}),100)},e.prototype.shouldBlockScrollUpdate=function(t,e,i){return void 0===i&&(i=!1),!(i&&!ho())&&(t===Tu.Vertical?this.shouldBlockVerticalScroll(e):this.shouldBlockHorizontalScroll(e))},e.prototype.shouldBlockVerticalScroll=function(t){var e=Xo(this.eBodyViewport),i=this.eBodyViewport.scrollHeight;return t<0||t+e>i},e.prototype.shouldBlockHorizontalScroll=function(t){var e=this.centerRowContainerCtrl.getCenterWidth(),i=this.centerRowContainerCtrl.getViewportElement().scrollWidth;if(this.enableRtl&&en()){if(t>0)return!0}else if(t<0)return!0;return Math.abs(t)+e>i},e.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent(Tu.Vertical)},e.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(Pu.Container)},e.prototype.scrollGridIfNeeded=function(){var t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),t},e.prototype.setHorizontalScrollPosition=function(t,e){void 0===e&&(e=!1);var i=0,o=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!e&&this.shouldBlockScrollUpdate(Tu.Horizontal,t)&&(t=this.enableRtl&&en()?t>0?0:o:Math.min(Math.max(t,i),o)),nn(this.centerRowContainerCtrl.getViewportElement(),Math.abs(t),this.enableRtl),this.doHorizontalScroll(t)},e.prototype.setVerticalScrollPosition=function(t){this.eBodyViewport.scrollTop=t},e.prototype.getVScrollPosition=function(){var t={top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight};return t},e.prototype.getHScrollPosition=function(){return this.centerRowContainerCtrl.getHScrollPosition()},e.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()},e.prototype.scrollHorizontally=function(t){var e=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(e+t),this.centerRowContainerCtrl.getViewportElement().scrollLeft-e},e.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},e.prototype.ensureNodeVisible=function(t,e){void 0===e&&(e=null);for(var i=this.rowModel.getRowCount(),o=-1,n=0;n<i;n++){var r=this.rowModel.getRow(n);if("function"===typeof t){var s=t;if(r&&s(r)){o=n;break}}else if(t===r||t===r.data){o=n;break}}o>=0&&this.ensureIndexVisible(o,e)},e.prototype.ensureIndexVisible=function(t,e){if(!this.gridOptionsService.isDomLayout("print")){var i=this.paginationProxy.getRowCount();if("number"!==typeof t||t<0||t>=i)console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+t);else{var o=this.gridOptionsService.is("pagination"),n=o&&!this.gridOptionsService.is("suppressPaginationPanel");n||this.paginationProxy.goToPageWithIndex(t);var r,s=this.ctrlsService.getGridBodyCtrl(),a=s.getStickyTopHeight(),l=this.paginationProxy.getRow(t);do{var u=l.rowTop,c=l.rowHeight,h=this.paginationProxy.getPixelOffset(),p=l.rowTop-h,d=p+l.rowHeight,f=this.getVScrollPosition(),g=this.heightScaler.getDivStretchOffset(),y=f.top+g,_=f.bottom+g,m=_-y,v=this.heightScaler.getScrollPositionForPixel(p),b=this.heightScaler.getScrollPositionForPixel(d-m),C=Math.min((v+b)/2,p),w=y+a>p,S=_<d,E=null;"top"===e?E=v:"bottom"===e?E=b:"middle"===e?E=C:w?E=v-a:S&&(E=b),null!==E&&(this.setVerticalScrollPosition(E),this.rowRenderer.redraw({afterScroll:!0})),r=u!==l.rowTop||c!==l.rowHeight}while(r);this.animationFrameService.flushAllFrames()}}},e.prototype.ensureColumnVisible=function(t,e){void 0===e&&(e="auto");var i=this.columnModel.getGridColumn(t);if(i&&!i.isPinned()&&this.columnModel.isColumnDisplayed(i)){var o=this.getPositionedHorizontalScroll(i,e);null!==o&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(o),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}},e.prototype.getPositionedHorizontalScroll=function(t,e){var i=this.isColumnOutsideViewport(t),o=i.columnBeforeStart,n=i.columnAfterEnd,r=this.centerRowContainerCtrl.getCenterWidth()<t.getActualWidth(),s=this.centerRowContainerCtrl.getCenterWidth(),a=this.enableRtl,l=(a?o:n)||r,u=a?n:o;"auto"!==e&&(l="start"===e,u="end"===e);var c="middle"===e;if(l||u||c){var h=this.getColumnBounds(t),p=h.colLeft,d=h.colMiddle,f=h.colRight;return c?d-s/2:l?a?f:p:a?p-s:f-s}return null},e.prototype.isColumnOutsideViewport=function(t){var e=this.getViewportBounds(),i=e.start,o=e.end,n=this.getColumnBounds(t),r=n.colLeft,s=n.colRight,a=this.enableRtl,l=a?i>s:o<s,u=a?o<r:i>r;return{columnBeforeStart:l,columnAfterEnd:u}},e.prototype.getColumnBounds=function(t){var e=this.enableRtl,i=this.columnModel.getBodyContainerWidth(),o=t.getActualWidth(),n=t.getLeft(),r=e?-1:1,s=e?i-n:n,a=s+o*r,l=s+o/2*r;return{colLeft:s,colMiddle:l,colRight:a}},e.prototype.getViewportBounds=function(){var t=this.centerRowContainerCtrl.getCenterWidth(),e=this.centerRowContainerCtrl.getCenterViewportScrollLeft(),i=e,o=t+e;return{start:i,end:o,width:t}},Lu([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Lu([pt("animationFrameService")],e.prototype,"animationFrameService",void 0),Lu([pt("paginationProxy")],e.prototype,"paginationProxy",void 0),Lu([pt("rowModel")],e.prototype,"rowModel",void 0),Lu([pt("rowContainerHeightService")],e.prototype,"heightScaler",void 0),Lu([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),Lu([pt("columnModel")],e.prototype,"columnModel",void 0),Lu([ut],e.prototype,"postConstruct",null),e}(le),Nu=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Vu=function(){return Vu=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Vu.apply(this,arguments)},Bu=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Gu=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},ju=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},Hu=function(t){function e(e){var i=t.call(this)||this;return i.isMultiRowDrag=!1,i.isGridSorted=!1,i.isGridFiltered=!1,i.isRowGroupActive=!1,i.eContainer=e,i}return Nu(e,t),e.prototype.postConstruct=function(){var t=this;this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel);var e=function(){t.onSortChanged(),t.onFilterChanged(),t.onRowGroupChanged()};this.addManagedListener(this.eventService,ge.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_MODEL_UPDATED,(function(){e()})),e(),this.ctrlsService.whenReady((function(){var e=t.ctrlsService.getGridBodyCtrl();t.autoScrollService=new au({scrollContainer:e.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return e.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(t){return e.getScrollFeature().setVerticalScrollPosition(t)},onScrollCallback:function(){t.onDragging(t.lastDraggingEvent)}})}))},e.prototype.onSortChanged=function(){this.isGridSorted=this.sortController.isSortActive()},e.prototype.onFilterChanged=function(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()},e.prototype.onRowGroupChanged=function(){var t=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!l(t)},e.prototype.getContainer=function(){return this.eContainer},e.prototype.isInterestedIn=function(t){return t===Gs.RowDrag},e.prototype.getIconName=function(){var t=this.gridOptionsService.is("rowDragManaged");return t&&this.shouldPreventRowMove()?Ua.ICON_NOT_ALLOWED:Ua.ICON_MOVE},e.prototype.shouldPreventRowMove=function(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive},e.prototype.getRowNodes=function(t){var e=this;if(!this.isFromThisGrid(t))return t.dragItem.rowNodes||[];var i=this.gridOptionsService.is("rowDragMultiRow"),o=ju([],Gu(this.selectionService.getSelectedNodes())).sort((function(t,i){return null==t.rowIndex||null==i.rowIndex?0:e.getRowIndexNumber(t)-e.getRowIndexNumber(i)})),n=t.dragItem.rowNode;return i&&-1!==o.indexOf(n)?(this.isMultiRowDrag=!0,o):(this.isMultiRowDrag=!1,[n])},e.prototype.onDragEnter=function(t){t.dragItem.rowNodes=this.getRowNodes(t),this.dispatchGridEvent(ge.EVENT_ROW_DRAG_ENTER,t),this.getRowNodes(t).forEach((function(t){t.setDragging(!0)})),this.onEnterOrDragging(t)},e.prototype.onDragging=function(t){this.onEnterOrDragging(t)},e.prototype.isFromThisGrid=function(t){var e=t.dragSource.dragSourceDomDataKey;return e===this.gridOptionsService.getDomDataKey()},e.prototype.isDropZoneWithinThisGrid=function(t){var e=this.ctrlsService.getGridBodyCtrl(),i=e.getGui(),o=t.dropZoneTarget;return!i.contains(o)},e.prototype.onEnterOrDragging=function(t){this.dispatchGridEvent(ge.EVENT_ROW_DRAG_MOVE,t),this.lastDraggingEvent=t;var e=this.mouseEventService.getNormalisedPosition(t).y,i=this.gridOptionsService.is("rowDragManaged");i&&this.doManagedDrag(t,e),this.autoScrollService.check(t.event)},e.prototype.doManagedDrag=function(t,e){var i=this.isFromThisGrid(t),o=this.gridOptionsService.is("rowDragManaged"),n=t.dragItem.rowNodes;o&&this.shouldPreventRowMove()||(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!i?this.isDropZoneWithinThisGrid(t)||this.clientSideRowModel.highlightRowAtPixel(n[0],e):this.moveRows(n,e))},e.prototype.getRowIndexNumber=function(t){return parseInt(Dt(t.getRowIndexString().split("-")),10)},e.prototype.moveRowAndClearHighlight=function(t){var e=this,i=this.clientSideRowModel.getLastHighlightedRowNode(),o=i&&i.highlighted===iu.Below,n=this.mouseEventService.getNormalisedPosition(t).y,r=t.dragItem.rowNodes,s=o?1:0;if(this.isFromThisGrid(t))r.forEach((function(t){t.rowTop<n&&(s-=1)})),this.moveRows(r,n,s);else{var a=this.gridOptionsService.getCallback("getRowId"),l=this.clientSideRowModel.getRowIndexAtPixel(n)+1;this.clientSideRowModel.getHighlightPosition(n)===iu.Above&&l--,this.clientSideRowModel.updateRowData({add:r.map((function(t){return t.data})).filter((function(t){return!e.clientSideRowModel.getRowNode(a?a({data:t,level:0}):t.id)})),addIndex:l})}this.clearRowHighlight()},e.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},e.prototype.moveRows=function(t,e,i){void 0===i&&(i=0);var o=this.clientSideRowModel.ensureRowsAtPixel(t,e,i);o&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},e.prototype.addRowDropZone=function(t){var e=this;if(t.getContainer())if(this.dragAndDropService.findExternalZone(t))console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");else{var i={getContainer:t.getContainer};t.fromGrid?(t.fromGrid=void 0,i=t):(t.onDragEnter&&(i.onDragEnter=function(i){t.onDragEnter(e.draggingToRowDragEvent(ge.EVENT_ROW_DRAG_ENTER,i))}),t.onDragLeave&&(i.onDragLeave=function(i){t.onDragLeave(e.draggingToRowDragEvent(ge.EVENT_ROW_DRAG_LEAVE,i))}),t.onDragging&&(i.onDragging=function(i){t.onDragging(e.draggingToRowDragEvent(ge.EVENT_ROW_DRAG_MOVE,i))}),t.onDragStop&&(i.onDragStop=function(i){t.onDragStop(e.draggingToRowDragEvent(ge.EVENT_ROW_DRAG_END,i))})),this.dragAndDropService.addDropTarget(Vu({isInterestedIn:function(t){return t===Gs.RowDrag},getIconName:function(){return Ua.ICON_MOVE},external:!0},i))}else G((function(){return console.warn("AG Grid: addRowDropZone - A container target needs to be provided")}),"add-drop-zone-empty-target")},e.prototype.getRowDropZone=function(t){var e=this,i=this.getContainer.bind(this),o=this.onDragEnter.bind(this),n=this.onDragLeave.bind(this),r=this.onDragging.bind(this),s=this.onDragStop.bind(this);return t?{getContainer:i,onDragEnter:t.onDragEnter?function(i){o(i),t.onDragEnter(e.draggingToRowDragEvent(ge.EVENT_ROW_DRAG_ENTER,i))}:o,onDragLeave:t.onDragLeave?function(i){n(i),t.onDragLeave(e.draggingToRowDragEvent(ge.EVENT_ROW_DRAG_LEAVE,i))}:n,onDragging:t.onDragging?function(i){r(i),t.onDragging(e.draggingToRowDragEvent(ge.EVENT_ROW_DRAG_MOVE,i))}:r,onDragStop:t.onDragStop?function(i){s(i),t.onDragStop(e.draggingToRowDragEvent(ge.EVENT_ROW_DRAG_END,i))}:s,fromGrid:!0}:{getContainer:i,onDragEnter:o,onDragLeave:n,onDragging:r,onDragStop:s,fromGrid:!0}},e.prototype.draggingToRowDragEvent=function(t,e){var i,o,n=this.mouseEventService.getNormalisedPosition(e).y,r=n>this.paginationProxy.getCurrentPageHeight(),s=-1;switch(r||(s=this.rowModel.getRowIndexAtPixel(n),i=this.rowModel.getRow(s)),e.vDirection){case js.Down:o="down";break;case js.Up:o="up";break;default:o=null;break}var a={type:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,event:e.event,node:e.dragItem.rowNode,nodes:e.dragItem.rowNodes,overIndex:s,overNode:i,y:n,vDirection:o};return a},e.prototype.dispatchGridEvent=function(t,e){var i=this.draggingToRowDragEvent(t,e);this.eventService.dispatchEvent(i)},e.prototype.onDragLeave=function(t){this.dispatchGridEvent(ge.EVENT_ROW_DRAG_LEAVE,t),this.stopDragging(t),this.gridOptionsService.is("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(t)&&(this.isMultiRowDrag=!1)},e.prototype.onDragStop=function(t){this.dispatchGridEvent(ge.EVENT_ROW_DRAG_END,t),this.stopDragging(t),!this.gridOptionsService.is("rowDragManaged")||!this.gridOptionsService.is("suppressMoveWhenRowDragging")&&this.isFromThisGrid(t)||this.isDropZoneWithinThisGrid(t)||this.moveRowAndClearHighlight(t)},e.prototype.stopDragging=function(t){this.autoScrollService.ensureCleared(),this.getRowNodes(t).forEach((function(t){t.setDragging(!1)}))},Bu([pt("dragAndDropService")],e.prototype,"dragAndDropService",void 0),Bu([pt("rowModel")],e.prototype,"rowModel",void 0),Bu([pt("paginationProxy")],e.prototype,"paginationProxy",void 0),Bu([pt("columnModel")],e.prototype,"columnModel",void 0),Bu([pt("focusService")],e.prototype,"focusService",void 0),Bu([pt("sortController")],e.prototype,"sortController",void 0),Bu([pt("filterManager")],e.prototype,"filterManager",void 0),Bu([pt("selectionService")],e.prototype,"selectionService",void 0),Bu([pt("mouseEventService")],e.prototype,"mouseEventService",void 0),Bu([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Bu([dt("rangeService")],e.prototype,"rangeService",void 0),Bu([ut],e.prototype,"postConstruct",null),e}(le),$u=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Wu=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};(function(t){t["ANIMATION_ON"]="ag-row-animation",t["ANIMATION_OFF"]="ag-row-no-animation"})(Mu||(Mu={}));var Uu,zu,Ku="ag-force-vertical-scroll",Yu="ag-selectable",qu="ag-column-moving",Xu=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stickyTopHeight=0,e}return $u(e,t),e.prototype.getScrollFeature=function(){return this.bodyScrollFeature},e.prototype.getBodyViewportElement=function(){return this.eBodyViewport},e.prototype.setComp=function(t,e,i,o,n,r){this.comp=t,this.eGridBody=e,this.eBodyViewport=i,this.eTop=o,this.eBottom=n,this.eStickyTop=r,this.setCellTextSelection(this.gridOptionsService.is("enableCellTextSelection")),this.createManagedBean(new Du(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Fu(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([o,i,n,r]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(o),this.ctrlsService.registerGridBodyCtrl(this)},e.prototype.getComp=function(){return this.comp},e.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,ge.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},e.prototype.addFocusListeners=function(t){var e=this;t.forEach((function(t){e.addManagedListener(t,"focusin",(function(e){var i=e.target,o=Yo(i,"ag-root",t);t.classList.toggle("ag-has-focus",!o)})),e.addManagedListener(t,"focusout",(function(e){var i=e.target,o=e.relatedTarget,n=t.contains(o),r=Yo(o,"ag-root",t),s=Yo(i,"ag-root",t);s||n&&!r||t.classList.remove("ag-has-focus")}))}))},e.prototype.setColumnMovingCss=function(t){this.comp.setColumnMovingCss(qu,t)},e.prototype.setCellTextSelection=function(t){void 0===t&&(t=!1),this.comp.setCellSelectableCss(Yu,t)},e.prototype.onScrollVisibilityChanged=function(){var t=this,e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyTopWidth(e);var i=e&&this.gridOptionsService.getScrollbarWidth()||0,o=bo()?16:0,n="calc(100% + "+(i+o)+"px)";this.animationFrameService.requestAnimationFrame((function(){return t.comp.setBodyViewportWidth(n)}))},e.prototype.onGridColumnsChanged=function(){var t=this.columnModel.getAllGridColumns();this.comp.setColumnCount(t?t.length:0)},e.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",(function(t){if(t.target instanceof HTMLImageElement)return t.preventDefault(),!1}))},e.prototype.addStopEditingWhenGridLosesFocus=function(){var t=this;if(this.gridOptionsService.is("stopEditingWhenCellsLoseFocus")){var e=function(e){var o=e.relatedTarget;if(null!==fo(o)){var n=i.some((function(t){return t.contains(o)}))&&t.mouseEventService.isElementInThisGrid(o);if(!n){var r=t.popupService;n=r.getActivePopups().some((function(t){return t.contains(o)}))||r.isElementWithinCustomPopup(o)}n||t.rowRenderer.stopEditing()}else t.rowRenderer.stopEditing()},i=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];i.forEach((function(i){return t.addManagedListener(i,"focusout",e)}))}},e.prototype.updateRowCount=function(){var t=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),e=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=-1===e?-1:t+e;this.comp.setRowCount(i)},e.prototype.registerBodyViewportResizeListener=function(t){this.comp.registerBodyViewportResizeListener(t)},e.prototype.setVerticalScrollPaddingVisible=function(t){var e=t?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(e)},e.prototype.isVerticalScrollShowing=function(){var t=this.gridOptionsService.is("alwaysShowVerticalScroll"),e=t?Ku:null,i=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(e,t),t||i&&bn(this.eBodyViewport)},e.prototype.setupRowAnimationCssClass=function(){var t=this,e=function(){var e=t.gridOptionsService.isAnimateRows()&&!t.rowContainerHeightService.isStretching(),i=e?Mu.ANIMATION_ON:Mu.ANIMATION_OFF;t.comp.setRowAnimationCssOnBodyViewport(i,e)};e(),this.addManagedListener(this.eventService,ge.EVENT_HEIGHT_SCALE_CHANGED,e),this.addManagedPropertyListener("animateRows",e)},e.prototype.getGridBodyElement=function(){return this.eGridBody},e.prototype.addBodyViewportListener=function(){var t=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",t),this.mockContextMenuForIPad(t),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()},e.prototype.addFullWidthContainerWheelListener=function(){var t=this,e=this.eBodyViewport.querySelector(".ag-full-width-container"),i=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&i&&this.addManagedListener(e,"wheel",(function(e){return t.onFullWidthContainerWheel(e,i)}))},e.prototype.onFullWidthContainerWheel=function(t,e){!t.deltaX||Math.abs(t.deltaY)>Math.abs(t.deltaX)||!this.mouseEventService.isEventFromThisGrid(t)||(t.preventDefault(),e.scrollBy({left:t.deltaX}))},e.prototype.onBodyViewportContextMenu=function(t,e,i){if(t||i){if(this.gridOptionsService.is("preventDefaultOnContextMenu")){var o=t||i;o.preventDefault()}var n=(t||e).target;if(n===this.eBodyViewport||n===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement()){if(!this.contextMenuFactory)return;t?this.contextMenuFactory.onContextMenu(t,null,null,null,null,this.eGridBody):i&&this.contextMenuFactory.onContextMenu(null,i,null,null,null,this.eGridBody)}}},e.prototype.mockContextMenuForIPad=function(t){if(ho()){var e=new oa(this.eBodyViewport),i=function(e){t(void 0,e.touchStart,e.touchEvent)};this.addManagedListener(e,oa.EVENT_LONG_TAP,i),this.addDestroyFunc((function(){return e.destroy()}))}},e.prototype.onBodyViewportWheel=function(t){this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&t.preventDefault()},e.prototype.onStickyTopWheel=function(t){t.preventDefault(),t.offsetY&&this.scrollVertically(t.deltaY)},e.prototype.getGui=function(){return this.eGridBody},e.prototype.scrollVertically=function(t){var e=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(e+t),this.eBodyViewport.scrollTop-e},e.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new Hu(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},e.prototype.getRowDragFeature=function(){return this.rowDragFeature},e.prototype.onPinnedRowDataChanged=function(){this.setFloatingHeights()},e.prototype.setFloatingHeights=function(){var t=this.pinnedRowModel,e=t.getPinnedTopTotalHeight();e&&(e+=1);var i=t.getPinnedBottomTotalHeight();i&&(i+=1),this.comp.setTopHeight(e),this.comp.setBottomHeight(i),this.comp.setTopDisplay(e?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop()},e.prototype.setStickyTopHeight=function(t){void 0===t&&(t=0),this.comp.setStickyTopHeight(t+"px"),this.stickyTopHeight=t},e.prototype.getStickyTopHeight=function(){return this.stickyTopHeight},e.prototype.setStickyTopWidth=function(t){if(t){var e=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - "+e+"px)")}else this.comp.setStickyTopWidth("100%")},e.prototype.onHeaderHeightChanged=function(){this.setStickyTopOffsetTop()},e.prototype.setStickyTopOffsetTop=function(){var t=this.ctrlsService.getGridHeaderCtrl(),e=t.getHeaderHeight()+this.filterManager.getHeaderHeight(),i=this.pinnedRowModel.getPinnedTopTotalHeight(),o=0;e>0&&(o+=e+1),i>0&&(o+=i+1),this.comp.setStickyTopTop(o+"px")},e.prototype.sizeColumnsToFit=function(t,e){var i=this,o=this.isVerticalScrollShowing(),n=o?this.gridOptionsService.getScrollbarWidth():0,r=Qo(this.eGridBody),s=r-n;s>0?this.columnModel.sizeColumnsToFit(s,"sizeColumnsToFit",!1,t):void 0===e?window.setTimeout((function(){i.sizeColumnsToFit(t,100)}),0):100===e?window.setTimeout((function(){i.sizeColumnsToFit(t,500)}),100):500===e?window.setTimeout((function(){i.sizeColumnsToFit(t,-1)}),500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},e.prototype.addScrollEventListener=function(t){this.eBodyViewport.addEventListener("scroll",t,{passive:!0})},e.prototype.removeScrollEventListener=function(t){this.eBodyViewport.removeEventListener("scroll",t)},Wu([pt("animationFrameService")],e.prototype,"animationFrameService",void 0),Wu([pt("rowContainerHeightService")],e.prototype,"rowContainerHeightService",void 0),Wu([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Wu([pt("columnModel")],e.prototype,"columnModel",void 0),Wu([pt("scrollVisibleService")],e.prototype,"scrollVisibleService",void 0),Wu([dt("contextMenuFactory")],e.prototype,"contextMenuFactory",void 0),Wu([pt("headerNavigationService")],e.prototype,"headerNavigationService",void 0),Wu([pt("dragAndDropService")],e.prototype,"dragAndDropService",void 0),Wu([pt("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),Wu([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),Wu([pt("popupService")],e.prototype,"popupService",void 0),Wu([pt("mouseEventService")],e.prototype,"mouseEventService",void 0),Wu([pt("rowModel")],e.prototype,"rowModel",void 0),Wu([pt("filterManager")],e.prototype,"filterManager",void 0),e}(le);(function(t){t[t["FILL"]=0]="FILL",t[t["RANGE"]=1]="RANGE"})(Uu||(Uu={})),function(t){t[t["VALUE"]=0]="VALUE",t[t["DIMENSION"]=1]="DIMENSION"}(zu||(zu={}));var Qu,Ju="ag-cell-range-selected",Zu="ag-cell-range-chart",tc="ag-cell-range-single-cell",ec="ag-cell-range-chart-category",ic="ag-cell-range-handle",oc="ag-cell-range-top",nc="ag-cell-range-right",rc="ag-cell-range-bottom",sc="ag-cell-range-left",ac=function(){function t(t,e){this.beans=t,this.cellCtrl=e}return t.prototype.setComp=function(t,e){this.cellComp=t,this.eGui=e,this.onRangeSelectionChanged()},t.prototype.onRangeSelectionChanged=function(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Ju,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass(Ju+"-1",1===this.rangeCount),this.cellComp.addOrRemoveCssClass(Ju+"-2",2===this.rangeCount),this.cellComp.addOrRemoveCssClass(Ju+"-3",3===this.rangeCount),this.cellComp.addOrRemoveCssClass(Ju+"-4",this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(Zu,this.hasChartRange),Ki(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass(tc,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())},t.prototype.updateRangeBorders=function(){var t=this.getRangeBorders(),e=this.isSingleCell(),i=!e&&t.top,o=!e&&t.right,n=!e&&t.bottom,r=!e&&t.left;this.cellComp.addOrRemoveCssClass(oc,i),this.cellComp.addOrRemoveCssClass(nc,o),this.cellComp.addOrRemoveCssClass(rc,n),this.cellComp.addOrRemoveCssClass(sc,r)},t.prototype.isSingleCell=function(){var t=this.beans.rangeService;return 1===this.rangeCount&&t&&!t.isMoreThanOneCell()},t.prototype.getHasChartRange=function(){var t=this.beans.rangeService;if(!this.rangeCount||!t)return!1;var e=t.getCellRanges();return e.length>0&&e.every((function(t){return $t([zu.DIMENSION,zu.VALUE],t.type)}))},t.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},t.prototype.getRangeBorders=function(){var t,e,i=this,o=this.beans.gridOptionsService.is("enableRtl"),n=!1,r=!1,s=!1,a=!1,l=this.cellCtrl.getCellPosition().column,u=this.beans,c=u.rangeService,h=u.columnModel;o?(t=h.getDisplayedColAfter(l),e=h.getDisplayedColBefore(l)):(t=h.getDisplayedColBefore(l),e=h.getDisplayedColAfter(l));var p=c.getCellRanges().filter((function(t){return c.isCellInSpecificRange(i.cellCtrl.getCellPosition(),t)}));t||(a=!0),e||(r=!0);for(var d=0;d<p.length;d++){if(n&&r&&s&&a)break;var f=p[d],g=c.getRangeStartRow(f),y=c.getRangeEndRow(f);!n&&this.beans.rowPositionUtils.sameRow(g,this.cellCtrl.getCellPosition())&&(n=!0),!s&&this.beans.rowPositionUtils.sameRow(y,this.cellCtrl.getCellPosition())&&(s=!0),!a&&t&&f.columns.indexOf(t)<0&&(a=!0),!r&&e&&f.columns.indexOf(e)<0&&(r=!0)}return{top:n,right:r,bottom:s,left:a}},t.prototype.refreshHandle=function(){if(this.beans.rangeService){var t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(ic,!!this.selectionHandle)}},t.prototype.shouldHaveSelectionHandle=function(){var t=this.beans,e=t.gridOptionsService,i=t.rangeService,o=i.getCellRanges(),n=o.length;if(this.rangeCount<1||n<1)return!1;var r=Dt(o),s=this.cellCtrl.getCellPosition(),a=e.is("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),l=e.is("enableRangeHandle"),u=1===n&&!this.cellCtrl.isEditing()&&(a||l);if(this.hasChartRange){var c=o[0].type===zu.DIMENSION,h=c&&i.isCellInSpecificRange(s,o[0]);this.cellComp.addOrRemoveCssClass(ec,h),u=r.type===zu.VALUE}return u&&null!=r.endRow&&i.isContiguousRange(r)&&i.isBottomRightCell(r,s)},t.prototype.addSelectionHandle=function(){var t=this.beans,e=t.gridOptionsService,i=t.rangeService,o=Dt(i.getCellRanges()).type,n=e.is("enableFillHandle")&&a(o),r=n?Uu.FILL:Uu.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==r&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(r)),this.selectionHandle.refresh(this.cellCtrl)},t.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},t}(),lc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),uc=function(t){function e(e,i){var o=t.call(this)||this;return o.cellCtrl=e,o.beans=i,o.column=e.getColumn(),o.rowNode=e.getRowNode(),o.setupColSpan(),o.setupRowSpan(),o}return lc(e,t),e.prototype.setupRowSpan=function(){this.rowSpan=this.column.getRowSpan(this.rowNode)},e.prototype.setComp=function(t){this.eGui=t,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},e.prototype.onDisplayColumnsChanged=function(){var t=this.getColSpanningList();kt(this.colsSpanning,t)||(this.colsSpanning=t,this.onWidthChanged(),this.onLeftChanged())},e.prototype.setupColSpan=function(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,ge.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},e.prototype.onWidthChanged=function(){if(this.eGui){var t=this.getCellWidth();this.eGui.style.width=t+"px"}},e.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce((function(t,e){return t+e.getActualWidth()}),0):this.column.getActualWidth()},e.prototype.getColSpanningList=function(){var t=this.column.getColSpan(this.rowNode),e=[];if(1===t)e.push(this.column);else for(var i=this.column,o=this.column.getPinned(),n=0;i&&n<t;n++){if(e.push(i),i=this.beans.columnModel.getDisplayedColAfter(i),!i||a(i))break;if(o!==i.getPinned())break}return e},e.prototype.onLeftChanged=function(){if(this.eGui){var t=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=t+"px"}},e.prototype.getCellLeft=function(){var t;return t=this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?Dt(this.colsSpanning):this.column,t.getLeft()},e.prototype.modifyLeftForPrintLayout=function(t){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return t;var e=this.beans.columnModel.getDisplayedColumnsLeftWidth();if("right"===this.column.getPinned()){var i=this.beans.columnModel.getBodyContainerWidth();return e+i+(t||0)}return e+(t||0)},e.prototype.applyRowSpan=function(){if(1!==this.rowSpan){var t=this.beans.gridOptionsService.getRowHeightAsNumber(),e=t*this.rowSpan;this.eGui.style.height=e+"px",this.eGui.style.zIndex="1"}},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(le),cc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),hc=function(t){function e(e,i){var o=t.call(this)||this;return o.staticClasses=[],o.cellCtrl=e,o.beans=i,o.column=e.getColumn(),o.rowNode=e.getRowNode(),o}return cc(e,t),e.prototype.setComp=function(t){this.cellComp=t,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},e.prototype.applyCellClassRules=function(){var t=this,e=this.column.getColDef(),i={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.beans.stylingService.processClassRules(e.cellClassRules,i,(function(e){return t.cellComp.addOrRemoveCssClass(e,!0)}),(function(e){return t.cellComp.addOrRemoveCssClass(e,!1)}))},e.prototype.applyUserStyles=function(){var t=this.column.getColDef();if(t.cellStyle){var e;if("function"===typeof t.cellStyle){var i={column:this.column,value:this.cellCtrl.getValue(),colDef:t,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context},o=t.cellStyle;e=o(i)}else e=t.cellStyle;e&&this.cellComp.setUserStyles(e)}},e.prototype.applyClassesFromColDef=function(){var t=this,e=this.column.getColDef(),i={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.staticClasses.length&&this.staticClasses.forEach((function(e){return t.cellComp.addOrRemoveCssClass(e,!1)})),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,i),this.staticClasses.length&&this.staticClasses.forEach((function(e){return t.cellComp.addOrRemoveCssClass(e,!0)}))},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(le),pc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),dc=function(t){function e(e,i){var o=t.call(this)||this;return o.ctrl=e,o.beans=i,o}return pc(e,t),e.prototype.setComp=function(t){this.eGui=t,this.setupTooltip()},e.prototype.setBrowserTooltip=function(t){var e="title";null!=t&&""!=t?this.eGui.setAttribute(e,t):this.eGui.removeAttribute(e)},e.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsService.is("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.setBrowserTooltip(this.tooltip):this.createTooltipFeatureIfNeeded()},e.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue()},e.prototype.createTooltipFeatureIfNeeded=function(){var t,e,i,o,n=this;if(null==this.genericTooltipFeature){var r={getTooltipParams:function(){return n.getTooltipParams()},getGui:function(){return n.ctrl.getGui()}};this.genericTooltipFeature=this.createManagedBean(new fr(r,null===(e=(t=this.ctrl).getTooltipShowDelayOverride)||void 0===e?void 0:e.call(t),null===(o=(i=this.ctrl).getTooltipHideDelayOverride)||void 0===o?void 0:o.call(i)),this.beans.context)}},e.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.setBrowserTooltip(this.tooltip)},e.prototype.getTooltipParams=function(){var t=this,e=this.ctrl,i=e.getColumn?e.getColumn():void 0,o=e.getColDef?e.getColDef():void 0,n=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:o,column:i,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:n,data:n?n.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:function(){return t.genericTooltipFeature.hideTooltip(!0)}}},e.prototype.getTooltipText=function(){return this.tooltip},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(le),fc=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},gc=function(){function t(){}return t.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsService.is("masterDetail"),this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)},fc([pt("resizeObserverService")],t.prototype,"resizeObserverService",void 0),fc([pt("paginationProxy")],t.prototype,"paginationProxy",void 0),fc([pt("context")],t.prototype,"context",void 0),fc([pt("columnApi")],t.prototype,"columnApi",void 0),fc([pt("gridApi")],t.prototype,"gridApi",void 0),fc([pt("gridOptionsService")],t.prototype,"gridOptionsService",void 0),fc([pt("expressionService")],t.prototype,"expressionService",void 0),fc([pt("environment")],t.prototype,"environment",void 0),fc([pt("rowRenderer")],t.prototype,"rowRenderer",void 0),fc([pt("templateService")],t.prototype,"templateService",void 0),fc([pt("valueService")],t.prototype,"valueService",void 0),fc([pt("eventService")],t.prototype,"eventService",void 0),fc([pt("columnModel")],t.prototype,"columnModel",void 0),fc([pt("headerNavigationService")],t.prototype,"headerNavigationService",void 0),fc([pt("navigationService")],t.prototype,"navigationService",void 0),fc([pt("columnAnimationService")],t.prototype,"columnAnimationService",void 0),fc([dt("rangeService")],t.prototype,"rangeService",void 0),fc([pt("focusService")],t.prototype,"focusService",void 0),fc([dt("contextMenuFactory")],t.prototype,"contextMenuFactory",void 0),fc([pt("popupService")],t.prototype,"popupService",void 0),fc([pt("valueFormatterService")],t.prototype,"valueFormatterService",void 0),fc([pt("stylingService")],t.prototype,"stylingService",void 0),fc([pt("columnHoverService")],t.prototype,"columnHoverService",void 0),fc([pt("userComponentFactory")],t.prototype,"userComponentFactory",void 0),fc([pt("userComponentRegistry")],t.prototype,"userComponentRegistry",void 0),fc([pt("animationFrameService")],t.prototype,"animationFrameService",void 0),fc([pt("dragService")],t.prototype,"dragService",void 0),fc([pt("dragAndDropService")],t.prototype,"dragAndDropService",void 0),fc([pt("sortController")],t.prototype,"sortController",void 0),fc([pt("filterManager")],t.prototype,"filterManager",void 0),fc([pt("rowContainerHeightService")],t.prototype,"rowContainerHeightService",void 0),fc([pt("frameworkOverrides")],t.prototype,"frameworkOverrides",void 0),fc([pt("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),fc([pt("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),fc([pt("selectionService")],t.prototype,"selectionService",void 0),fc([dt("selectionHandleFactory")],t.prototype,"selectionHandleFactory",void 0),fc([pt("rowCssClassCalculator")],t.prototype,"rowCssClassCalculator",void 0),fc([pt("rowModel")],t.prototype,"rowModel",void 0),fc([pt("ctrlsService")],t.prototype,"ctrlsService",void 0),fc([pt("ctrlsFactory")],t.prototype,"ctrlsFactory",void 0),fc([pt("agStackComponentsRegistry")],t.prototype,"agStackComponentsRegistry",void 0),fc([pt("valueCache")],t.prototype,"valueCache",void 0),fc([pt("rowNodeEventThrottle")],t.prototype,"rowNodeEventThrottle",void 0),fc([pt("localeService")],t.prototype,"localeService",void 0),fc([pt("valueParserService")],t.prototype,"valueParserService",void 0),fc([ut],t.prototype,"postConstruct",null),t=fc([ht("beans")],t),t}(),yc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),_c=function(t){function e(e,i,o){var n=t.call(this)||this;return n.cellCtrl=e,n.beans=i,n.column=o,n}return yc(e,t),e.prototype.onMouseEvent=function(t,e){if(!Zt(e))switch(t){case"click":this.onCellClicked(e);break;case"mousedown":case"touchstart":this.onMouseDown(e);break;case"dblclick":this.onCellDoubleClicked(e);break;case"mouseout":this.onMouseOut(e);break;case"mouseover":this.onMouseOver(e);break}},e.prototype.onCellClicked=function(t){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(t),void t.preventDefault();var e=this.beans,i=e.eventService,o=e.rangeService,n=e.gridOptionsService,r=t.ctrlKey||t.metaKey;o&&r&&o.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&o.intersectLastRange(!0);var s=this.cellCtrl.createEvent(t,ge.EVENT_CELL_CLICKED);i.dispatchEvent(s);var a=this.column.getColDef();a.onCellClicked&&window.setTimeout((function(){return a.onCellClicked(s)}),0);var l=(n.is("singleClickEdit")||a.singleClickEdit)&&!n.is("suppressClickEdit");!l||t.shiftKey&&0!=(null===o||void 0===o?void 0:o.getCellRanges().length)||this.cellCtrl.startRowOrCellEdit()},e.prototype.isDoubleClickOnIPad=function(){if(!ho()||te("dblclick"))return!1;var t=(new Date).getTime(),e=t-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=t,e},e.prototype.onCellDoubleClicked=function(t){var e=this.column.getColDef(),i=this.cellCtrl.createEvent(t,ge.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(i),"function"===typeof e.onCellDoubleClicked&&window.setTimeout((function(){return e.onCellDoubleClicked(i)}),0);var o=!this.beans.gridOptionsService.is("singleClickEdit")&&!this.beans.gridOptionsService.is("suppressClickEdit");o&&this.cellCtrl.startRowOrCellEdit(null,t)},e.prototype.onMouseDown=function(t){var e=t.ctrlKey,i=t.metaKey,o=t.shiftKey,n=t.target,r=this,s=r.cellCtrl,a=r.beans,l=a.eventService,u=a.rangeService,c=a.focusService;if(!this.isRightClickInExistingRange(t)){var h=u&&0!=u.getCellRanges().length;if(!o||!h){var p=so()&&!s.isEditing()&&!Wo(n);s.focusCell(p)}if(o&&h&&!c.isCellFocused(s.getCellPosition())){t.preventDefault();var d=c.getFocusedCell();if(d){var f=d.column,g=d.rowIndex,y=d.rowPinned,_=a.rowRenderer.getRowByPosition({rowIndex:g,rowPinned:y}),m=null===_||void 0===_?void 0:_.getCellCtrl(f);(null===m||void 0===m?void 0:m.isEditing())&&m.stopEditing(),c.setFocusedCell({column:f,rowIndex:g,rowPinned:y,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(n)){if(u){var v=this.cellCtrl.getCellPosition();if(o)u.extendLatestRangeToCell(v);else{var b=e||i;u.setRangeToCell(v,b)}}l.dispatchEvent(this.cellCtrl.createEvent(t,ge.EVENT_CELL_MOUSE_DOWN))}}},e.prototype.isRightClickInExistingRange=function(t){var e=this.beans.rangeService;if(e){var i=e.isCellInAnyRange(this.cellCtrl.getCellPosition()),o=2===t.button||t.ctrlKey&&this.beans.gridOptionsService.is("allowContextMenuWithControlKey");if(i&&o)return!0}return!1},e.prototype.containsWidget=function(t){return Yo(t,"ag-selection-checkbox",3)},e.prototype.onMouseOut=function(t){if(!this.mouseStayingInsideCell(t)){var e=this.cellCtrl.createEvent(t,ge.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.clearMouseOver()}},e.prototype.onMouseOver=function(t){if(!this.mouseStayingInsideCell(t)){var e=this.cellCtrl.createEvent(t,ge.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.setMouseOver([this.column])}},e.prototype.mouseStayingInsideCell=function(t){if(!t.target||!t.relatedTarget)return!1;var e=this.cellCtrl.getGui(),i=e.contains(t.target),o=e.contains(t.relatedTarget);return i&&o},e.prototype.destroy=function(){},e}(gc),mc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),vc=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;return s.cellCtrl=e,s.beans=i,s.rowNode=n,s.rowCtrl=r,s}return mc(e,t),e.prototype.setComp=function(t){this.eGui=t},e.prototype.onKeyDown=function(t){var e=t.key;switch(e){case Nn.ENTER:this.onEnterKeyDown(t);break;case Nn.F2:this.onF2KeyDown(t);break;case Nn.ESCAPE:this.onEscapeKeyDown(t);break;case Nn.TAB:this.onTabKeyDown(t);break;case Nn.BACKSPACE:case Nn.DELETE:this.onBackspaceOrDeleteKeyDown(e,t);break;case Nn.DOWN:case Nn.UP:case Nn.RIGHT:case Nn.LEFT:this.onNavigationKeyDown(t,e);break}},e.prototype.onNavigationKeyDown=function(t,e){this.cellCtrl.isEditing()||(t.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(t):this.beans.navigationService.navigateToNextCell(t,e,this.cellCtrl.getCellPosition(),!0),t.preventDefault())},e.prototype.onShiftRangeSelect=function(t){if(this.beans.rangeService){var e=this.beans.rangeService.extendLatestRangeInDirection(t);e&&this.beans.navigationService.ensureCellVisible(e)}},e.prototype.onTabKeyDown=function(t){this.beans.navigationService.onTabKeyDown(this.cellCtrl,t)},e.prototype.onBackspaceOrDeleteKeyDown=function(t,e){var i=this,o=i.cellCtrl,n=i.beans,r=i.rowNode,s=n.gridOptionsService,a=n.rangeService,l=n.eventService;o.isEditing()||(l.dispatchEvent({type:ge.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),Yn(t,s.is("enableCellEditingOnBackspace"))?a&&s.is("enableRangeSelection")?a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):o.isCellEditable()&&r.setDataValue(o.getColumn(),null,"cellClear"):o.startRowOrCellEdit(t,e),l.dispatchEvent({type:ge.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))},e.prototype.onEnterKeyDown=function(t){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,t.shiftKey);else if(this.beans.gridOptionsService.is("enterNavigatesVertically")){var e=t.shiftKey?Nn.UP:Nn.DOWN;this.beans.navigationService.navigateToNextCell(null,e,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(Nn.ENTER,t),this.cellCtrl.isEditing()&&t.preventDefault()},e.prototype.onF2KeyDown=function(t){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(Nn.F2,t)},e.prototype.onEscapeKeyDown=function(t){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},e.prototype.processCharacter=function(t){var e=t.target,i=e!==this.eGui;if(!i&&!this.cellCtrl.isEditing()){var o=t.key;" "===o?this.onSpaceKeyDown(t):(this.cellCtrl.startRowOrCellEdit(o,t),t.preventDefault())}},e.prototype.onSpaceKeyDown=function(t){var e=this.beans.gridOptionsService;if(!this.cellCtrl.isEditing()&&e.isRowSelection()){var i=this.rowNode.isSelected(),o=!i;if(o||!e.is("suppressRowDeselection")){var n=this.beans.gridOptionsService.is("groupSelectsFiltered"),r=this.rowNode.setSelectedParams({newValue:o,rangeSelect:t.shiftKey,groupSelectsFiltered:n,event:t,source:"spaceKey"});void 0===i&&0===r&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:t.shiftKey,groupSelectsFiltered:n,event:t,source:"spaceKey"})}}t.preventDefault()},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(le),bc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Cc=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},wc=function(t){function e(e,i,o){var n=t.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return n.rowNode=e,n.column=i,n.eCell=o,n}return bc(e,t),e.prototype.postConstruct=function(){var t=this.getGui();t.appendChild(Mn("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",(function(t){t.stopPropagation()})),this.addDragSource(),this.checkVisibility()},e.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},e.prototype.onDragStart=function(t){var e=this,i=this.column.getColDef().dndSourceOnRowDrag;t.dataTransfer.setDragImage(this.eCell,0,0);var o=function(){try{var i=JSON.stringify(e.rowNode.data);t.dataTransfer.setData("application/json",i),t.dataTransfer.setData("text/plain",i)}catch(o){}};if(i){var n={rowNode:this.rowNode,dragEvent:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};i(n)}else o()},e.prototype.checkVisibility=function(){var t=this.column.isDndSource(this.rowNode);this.setDisplayed(t)},Cc([ut],e.prototype,"postConstruct",null),e}(vr),Sc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ec=function(){return Ec=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Ec.apply(this,arguments)},xc="ag-cell",Oc="ag-cell-auto-height",Rc="ag-cell-normal-height",Ic="ag-cell-focus",Tc="ag-cell-first-right-pinned",Pc="ag-cell-last-left-pinned",Dc="ag-cell-not-inline-editing",kc="ag-column-hover",Ac="ag-cell-wrap-text",Lc=0,Mc=function(t){function e(e,i,o,n){var r=t.call(this)||this;r.cellRangeFeature=null,r.cellPositionFeature=null,r.cellCustomStyleFeature=null,r.tooltipFeature=null,r.cellMouseListenerFeature=null,r.cellKeyboardListenerFeature=null,r.suppressRefreshCell=!1,r.onCellCompAttachedFuncs=[],r.column=e,r.rowNode=i,r.beans=o,r.rowCtrl=n,r.instanceId=e.getId()+"-"+Lc++;var s=r.column.getColDef();return r.colIdSanitised=xe(r.column.getId()),r.beans.gridOptionsService.is("suppressCellFocus")||(r.tabIndex=-1),r.isCellRenderer=null!=s.cellRenderer||null!=s.cellRendererSelector,r.createCellPosition(),r.addFeatures(),r.updateAndFormatValue(!0),r}return Sc(e,t),e.prototype.shouldRestoreFocus=function(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)},e.prototype.addFeatures=function(){var t=this;this.cellPositionFeature=new uc(this,this.beans),this.addDestroyFunc((function(){var e;null===(e=t.cellPositionFeature)||void 0===e||e.destroy(),t.cellPositionFeature=null})),this.cellCustomStyleFeature=new hc(this,this.beans),this.addDestroyFunc((function(){var e;null===(e=t.cellCustomStyleFeature)||void 0===e||e.destroy(),t.cellCustomStyleFeature=null})),this.cellMouseListenerFeature=new _c(this,this.beans,this.column),this.addDestroyFunc((function(){var e;null===(e=t.cellMouseListenerFeature)||void 0===e||e.destroy(),t.cellMouseListenerFeature=null})),this.cellKeyboardListenerFeature=new vc(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc((function(){var e;null===(e=t.cellKeyboardListenerFeature)||void 0===e||e.destroy(),t.cellKeyboardListenerFeature=null}));var e=this.beans.rangeService&&this.beans.gridOptionsService.is("enableRangeSelection");e&&(this.cellRangeFeature=new ac(this.beans,this),this.addDestroyFunc((function(){var e;null===(e=t.cellRangeFeature)||void 0===e||e.destroy(),t.cellRangeFeature=null}))),this.column.isTooltipEnabled()&&this.addTooltipFeature()},e.prototype.addTooltipFeature=function(){var t=this,e=function(){var e=t.column.getColDef(),i=t.rowNode.data;if(e.tooltipField&&s(i))return M(i,e.tooltipField,t.column.isTooltipFieldContainsDots());var o=e.tooltipValueGetter;return o?o({location:"cell",api:t.beans.gridOptionsService.api,columnApi:t.beans.gridOptionsService.columnApi,context:t.beans.gridOptionsService.context,colDef:t.column.getColDef(),column:t.column,rowIndex:t.cellPosition.rowIndex,node:t.rowNode,data:t.rowNode.data,value:t.value,valueFormatted:t.valueFormatted}):null},i={getColumn:function(){return t.column},getColDef:function(){return t.column.getColDef()},getRowIndex:function(){return t.cellPosition.rowIndex},getRowNode:function(){return t.rowNode},getGui:function(){return t.getGui()},getLocation:function(){return"cell"},getTooltipValue:e,getValueFormatted:function(){return t.valueFormatted}};this.tooltipFeature=new dc(i,this.beans),this.addDestroyFunc((function(){var e;null===(e=t.tooltipFeature)||void 0===e||e.destroy(),t.tooltipFeature=null}))},e.prototype.setComp=function(t,e,i,o,n){var r,s,a,l;this.cellComp=t,this.eGui=e,this.printLayout=o,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),i&&this.setupAutoHeight(i),this.setAriaColIndex(),null===(r=this.cellPositionFeature)||void 0===r||r.setComp(e),null===(s=this.cellCustomStyleFeature)||void 0===s||s.setComp(t),null===(a=this.tooltipFeature)||void 0===a||a.setComp(e),null===(l=this.cellKeyboardListenerFeature)||void 0===l||l.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,e),n&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach((function(t){return t()})),this.onCellCompAttachedFuncs=[])},e.prototype.setupAutoHeight=function(t){var e=this;if(this.column.isAutoHeight()){var i=t.parentElement,o=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,n=function(r){if(!e.editing&&e.isAlive()){var s=qo(i),a=s.paddingTop,l=s.paddingBottom,u=s.borderBottomWidth,c=s.borderTopWidth,h=a+l+u+c,p=t.offsetHeight,d=p+h;if(r<5){var f=e.beans.gridOptionsService.getDocument(),g=!f||!f.contains(t),y=0==d;if(g||y)return void e.beans.frameworkOverrides.setTimeout((function(){return n(r+1)}),0)}var _=Math.max(d,o);e.rowNode.setRowAutoHeight(_,e.column)}},r=function(){return n(0)};r();var s=this.beans.resizeObserverService.observeResize(t,r);this.addDestroyFunc((function(){s(),e.rowNode.setRowAutoHeight(void 0,e.column)}))}},e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.getIncludeSelection=function(){return this.includeSelection},e.prototype.getIncludeRowDrag=function(){return this.includeRowDrag},e.prototype.getIncludeDndSource=function(){return this.includeDndSource},e.prototype.getColumnIdSanitised=function(){return this.colIdSanitised},e.prototype.getTabIndex=function(){return this.tabIndex},e.prototype.getIsCellRenderer=function(){return this.isCellRenderer},e.prototype.getValueToDisplay=function(){return null!=this.valueFormatted?this.valueFormatted:this.value},e.prototype.showValue=function(t){void 0===t&&(t=!1);var e,i=this.getValueToDisplay();if(this.isCellRenderer){var o=this.createCellRendererParams();e=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),o)}this.cellComp.setRenderDetails(e,i,t),this.refreshHandle()},e.prototype.setupControlComps=function(){var t=this.column.getColDef();this.includeSelection=this.isIncludeControl(t.checkboxSelection),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)},e.prototype.isForceWrapper=function(){var t=this.beans.gridOptionsService.is("enableCellTextSelection")||this.column.isAutoHeight();return t},e.prototype.isIncludeControl=function(t){var e=null!=this.rowNode.rowPinned,i="function"===typeof t,o=!e&&(i||!0===t);return o},e.prototype.refreshShouldDestroy=function(){var t=this.column.getColDef(),e=this.includeSelection!=this.isIncludeControl(t.checkboxSelection),i=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),o=this.includeDndSource!=this.isIncludeControl(t.dndSource);return e||i||o},e.prototype.startEditing=function(t,e,i){var o=this;if(void 0===t&&(t=null),void 0===e&&(e=!1),void 0===i&&(i=null),this.isCellEditable()&&!this.editing)if(this.cellComp){var n=this.createCellEditorParams(t,e),r=this.column.getColDef(),s=this.beans.userComponentFactory.getCellEditorDetails(r,n),a=null!=(null===s||void 0===s?void 0:s.popupFromSelector)?s.popupFromSelector:!!r.cellEditorPopup,l=null!=(null===s||void 0===s?void 0:s.popupPositionFromSelector)?s.popupPositionFromSelector:r.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(s,a,l);var u=this.createEvent(i,ge.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(u)}else this.onCellCompAttachedFuncs.push((function(){o.startEditing(t,e,i)}))},e.prototype.setEditing=function(t){this.editing!==t&&(this.editing=t,this.refreshHandle())},e.prototype.stopRowOrCellEdit=function(t){void 0===t&&(t=!1),"fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.stopRowEditing(t):this.stopEditing(t)},e.prototype.onPopupEditorClosed=function(){this.isEditing()&&this.stopEditingAndFocus()},e.prototype.takeValueFromCellEditor=function(t){var e={newValueExists:!1};if(t)return e;var i=this.cellComp.getCellEditor();if(!i)return e;var o=i.isCancelAfterEnd&&i.isCancelAfterEnd();if(o)return e;var n=i.getValue();return{newValue:n,newValueExists:!0}},e.prototype.saveNewValue=function(t,e){if(e===t)return!1;this.suppressRefreshCell=!0;var i=this.rowNode.setDataValue(this.column,e,"edit");return this.suppressRefreshCell=!1,i},e.prototype.stopEditing=function(t){if(void 0===t&&(t=!1),!this.editing)return!1;var e=this.takeValueFromCellEditor(t),i=e.newValue,o=e.newValueExists,n=this.rowNode.getValueFromValueService(this.column),r=!1;return o&&(r=this.saveNewValue(n,i)),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(n,i,!t&&!!r),r},e.prototype.dispatchEditingStoppedEvent=function(t,e,i){var o=Ec(Ec({},this.createEvent(null,ge.EVENT_CELL_EDITING_STOPPED)),{oldValue:t,newValue:e,valueChanged:i});this.beans.eventService.dispatchEvent(o)},e.prototype.createCellEditorParams=function(t,e){return{value:this.rowNode.getValueFromValueService(this.column),eventKey:t,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsService.api,cellStartedEdit:e,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)}},e.prototype.createCellRendererParams=function(){var t=this,e={value:this.value,valueFormatted:this.valueFormatted,getValue:function(){return t.rowNode.getValueFromValueService(t.column)},setValue:function(e){return t.beans.valueService.setValue(t.rowNode,t.column,e)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(e,i,o,n){return t.registerRowDragger(e,i,n)}};return e},e.prototype.parseValue=function(t){return this.beans.valueParserService.parseValue(this.column,this.rowNode,t,this.getValue())},e.prototype.setFocusOutOnEditor=function(){if(this.editing){var t=this.cellComp.getCellEditor();t&&t.focusOut&&t.focusOut()}},e.prototype.setFocusInOnEditor=function(){if(this.editing){var t=this.cellComp.getCellEditor();t&&t.focusIn?t.focusIn():this.focusCell(!0)}},e.prototype.onCellChanged=function(t){if(this.cellComp){var e=t.column===this.column;e&&this.refreshCell({})}},e.prototype.refreshCell=function(t){var e,i,o;if(!this.suppressRefreshCell&&!this.editing&&this.cellComp){var n=this.column.getColDef(),r=null!=t&&!!t.newData,s=null!=t&&!!t.suppressFlash||!!n.suppressCellFlash,a=null==n.field&&null==n.valueGetter&&null==n.showRowGroup,l=t&&t.forceRefresh||a||r,u=this.updateAndFormatValue(),c=l||u;if(c){this.showValue(r);var h=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering(),p=!s&&!h&&(this.beans.gridOptionsService.is("enableCellChangeFlash")||n.enableCellChangeFlash);p&&this.flashCell(),null===(e=this.cellCustomStyleFeature)||void 0===e||e.applyUserStyles(),null===(i=this.cellCustomStyleFeature)||void 0===i||i.applyClassesFromColDef()}this.refreshToolTip(),null===(o=this.cellCustomStyleFeature)||void 0===o||o.applyCellClassRules()}},e.prototype.stopEditingAndFocus=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.stopRowOrCellEdit(),this.focusCell(!0),t||this.navigateAfterEdit(e)},e.prototype.navigateAfterEdit=function(t){var e=this.beans.gridOptionsService.is("enterNavigatesVerticallyAfterEdit");if(e){var i=t?Nn.UP:Nn.DOWN;this.beans.navigationService.navigateToNextCell(null,i,this.getCellPosition(),!1)}},e.prototype.flashCell=function(t){var e=t&&t.flashDelay,i=t&&t.fadeDelay;this.animateCell("data-changed",e,i)},e.prototype.animateCell=function(t,e,i){var o,n,r=this;if(this.cellComp){var a="ag-cell-"+t,l="ag-cell-"+t+"-animation",u=this.beans.gridOptionsService;e||(e=null!==(o=u.getNum("cellFlashDelay"))&&void 0!==o?o:500),s(i)||(i=null!==(n=u.getNum("cellFadeDelay"))&&void 0!==n?n:1e3),this.cellComp.addOrRemoveCssClass(a,!0),this.cellComp.addOrRemoveCssClass(l,!1),window.setTimeout((function(){r.isAlive()&&(r.cellComp.addOrRemoveCssClass(a,!1),r.cellComp.addOrRemoveCssClass(l,!0),r.eGui.style.transition="background-color "+i+"ms",window.setTimeout((function(){r.isAlive()&&(r.cellComp.addOrRemoveCssClass(l,!1),r.eGui.style.transition="")}),i))}),e)}},e.prototype.onFlashCells=function(t){if(this.cellComp){var e=this.beans.cellPositionUtils.createId(this.getCellPosition()),i=t.cells[e];i&&this.animateCell("highlight")}},e.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},e.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},e.prototype.formatValue=function(t){var e;return null!==(e=this.callValueFormatter(t))&&void 0!==e?e:t},e.prototype.callValueFormatter=function(t){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,t)},e.prototype.updateAndFormatValue=function(t){void 0===t&&(t=!1);var e=this.value,i=this.valueFormatted;this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value);var o=!!t||(!this.valuesAreEqual(e,this.value)||this.valueFormatted!=i);return o},e.prototype.valuesAreEqual=function(t,e){var i=this.column.getColDef();return i.equals?i.equals(t,e):t===e},e.prototype.getComp=function(){return this.cellComp},e.prototype.getValue=function(){return this.value},e.prototype.getValueFormatted=function(){return this.valueFormatted},e.prototype.addDomData=function(){var t=this,i=this.getGui();this.beans.gridOptionsService.setDomData(i,e.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc((function(){return t.beans.gridOptionsService.setDomData(i,e.DOM_DATA_KEY_CELL_CTRL,null)}))},e.prototype.createEvent=function(t,e){var i={type:e,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex};return i},e.prototype.processCharacter=function(t){var e;null===(e=this.cellKeyboardListenerFeature)||void 0===e||e.processCharacter(t)},e.prototype.onKeyDown=function(t){var e;null===(e=this.cellKeyboardListenerFeature)||void 0===e||e.onKeyDown(t)},e.prototype.onMouseEvent=function(t,e){var i;null===(i=this.cellMouseListenerFeature)||void 0===i||i.onMouseEvent(t,e)},e.prototype.getGui=function(){return this.eGui},e.prototype.refreshToolTip=function(){var t;null===(t=this.tooltipFeature)||void 0===t||t.refreshToolTip()},e.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},e.prototype.onLeftChanged=function(){var t;this.cellComp&&(null===(t=this.cellPositionFeature)||void 0===t||t.onLeftChanged())},e.prototype.onDisplayedColumnsChanged=function(){this.eGui&&this.setAriaColIndex()},e.prototype.setAriaColIndex=function(){var t=this.beans.columnModel.getAriaColumnIndex(this.column);$i(this.getGui(),t)},e.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},e.prototype.onWidthChanged=function(){var t;return null===(t=this.cellPositionFeature)||void 0===t?void 0:t.onWidthChanged()},e.prototype.getColumn=function(){return this.column},e.prototype.getRowNode=function(){return this.rowNode},e.prototype.getBeans=function(){return this.beans},e.prototype.isPrintLayout=function(){return this.printLayout},e.prototype.appendChild=function(t){this.eGui.appendChild(t)},e.prototype.refreshHandle=function(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},e.prototype.getCellPosition=function(){return this.cellPosition},e.prototype.isEditing=function(){return this.editing},e.prototype.startRowOrCellEdit=function(t,e){void 0===e&&(e=null),this.cellComp&&("fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,e))},e.prototype.getRowCtrl=function(){return this.rowCtrl},e.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},e.prototype.updateRangeBordersIfRangeCount=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},e.prototype.onRangeSelectionChanged=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},e.prototype.isRangeSelectionEnabled=function(){return null!=this.cellRangeFeature},e.prototype.focusCell=function(t){void 0===t&&(t=!1),this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})},e.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},e.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(Tc,t)}},e.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(Pc,t)}},e.prototype.onCellFocused=function(t){if(!this.beans.gridOptionsService.is("suppressCellFocus")){var e=this.beans.focusService.isCellFocused(this.cellPosition);if(this.cellComp){if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(Ic,e),e&&t&&t.forceBrowserFocus){var i=this.cellComp.getFocusableElement();i.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}var o="fullRow"===this.beans.gridOptionsService.get("editType");e||o||!this.editing||this.stopRowOrCellEdit()}else e&&(null===t||void 0===t?void 0:t.forceBrowserFocus)&&(this.focusEventToRestore=t)}},e.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:r(this.rowNode.rowPinned),column:this.column}},e.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass(xc,!0),this.cellComp.addOrRemoveCssClass(Dc,!0);var t=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass(Oc,t),this.cellComp.addOrRemoveCssClass(Rc,!t)},e.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsService.is("columnHoverHighlight")){var t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(kc,t)}},e.prototype.onColDefChanged=function(){this.cellComp&&(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))},e.prototype.setWrapText=function(){var t=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass(Ac,t)},e.prototype.dispatchCellContextMenuEvent=function(t){var e=this.column.getColDef(),i=this.createEvent(t,ge.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(i),e.onCellContextMenu&&window.setTimeout((function(){return e.onCellContextMenu(i)}),0)},e.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},e.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},e.prototype.destroy=function(){this.onCellCompAttachedFuncs=[],t.prototype.destroy.call(this)},e.prototype.createSelectionCheckbox=function(){var t=new Ga;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t},e.prototype.createDndSource=function(){var t=new wc(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t},e.prototype.registerRowDragger=function(t,e,i){var o=this;if(this.customRowDragComp)this.customRowDragComp.setDragElement(t,e);else{var n=this.createRowDragComp(t,e,i);n&&(this.customRowDragComp=n,this.addDestroyFunc((function(){o.beans.context.destroyBean(n),o.customRowDragComp=null})))}},e.prototype.createRowDragComp=function(t,e,i){var o=this,n=this.beans.gridOptionsService.is("pagination"),r=this.beans.gridOptionsService.is("rowDragManaged"),s=this.beans.gridOptionsService.isRowModelType("clientSide");if(r){if(!s)return void G((function(){return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model")}),"CellComp.addRowDragging");if(n)return void G((function(){return console.warn("AG Grid: managed row dragging is not possible when doing pagination")}),"CellComp.addRowDragging")}var a=new Ya((function(){return o.value}),this.rowNode,this.column,t,e,i);return this.beans.context.createBean(a),a},e.DOM_DATA_KEY_CELL_CTRL="cellCtrl",e}(le),Fc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Nc=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vc=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Bc=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t};(function(t){t["Normal"]="Normal",t["FullWidth"]="FullWidth",t["FullWidthLoading"]="FullWidthLoading",t["FullWidthGroup"]="FullWidthGroup",t["FullWidthDetail"]="FullWidthDetail"})(Qu||(Qu={}));var Gc,jc,Hc=0,$c=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;return s.allRowGuis=[],s.active=!0,s.centerCellCtrls={list:[],map:{}},s.leftCellCtrls={list:[],map:{}},s.rightCellCtrls={list:[],map:{}},s.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},s.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},s.lastMouseDownOnDragger=!1,s.emptyStyle={},s.updateColumnListsPending=!1,s.rowId=null,s.businessKeySanitised=null,s.beans=i,s.gridOptionsService=i.gridOptionsService,s.rowNode=e,s.paginationPage=i.paginationProxy.getCurrentPage(),s.useAnimationFrameForCreate=n,s.printLayout=r,s.instanceId=e.id+"-"+Hc++,s.rowId=xe(e.id),s.initRowBusinessKey(),s.rowFocused=i.focusService.isRowFocused(s.rowNode.rowIndex,s.rowNode.rowPinned),s.rowLevel=i.rowCssClassCalculator.calculateRowLevel(s.rowNode),s.setRowType(),s.setAnimateFlags(o),s.rowStyles=s.processStylesFromGridOptions(),s.isFullWidth()&&!s.gridOptionsService.is("suppressCellFocus")&&(s.tabIndex=-1),s.addListeners(),s}return Fc(e,t),e.prototype.initRowBusinessKey=function(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()},e.prototype.updateRowBusinessKey=function(){if("function"===typeof this.businessKeyForNodeFunc){var t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=xe(t)}},e.prototype.getRowId=function(){return this.rowId},e.prototype.getRowStyles=function(){return this.rowStyles},e.prototype.getTabIndex=function(){return this.tabIndex},e.prototype.isSticky=function(){return this.rowNode.sticky},e.prototype.getBeans=function(){return this.beans},e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.setComp=function(t,e,i){var o={rowComp:t,element:e,containerType:i};this.allRowGuis.push(o),i===jc.LEFT?this.leftGui=o:i===jc.RIGHT?this.rightGui=o:i===jc.FULL_WIDTH?this.fullWidthGui=o:this.centerGui=o,this.initialiseRowComp(o),"FullWidthLoading"===this.rowType||this.rowNode.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent()},e.prototype.unsetComp=function(t){switch(this.allRowGuis=this.allRowGuis.filter((function(e){return e.containerType!==t})),t){case jc.LEFT:this.leftGui=void 0;break;case jc.RIGHT:this.rightGui=void 0;break;case jc.FULL_WIDTH:this.fullWidthGui=void 0;break;case jc.CENTER:this.centerGui=void 0;break}},e.prototype.isCacheable=function(){return this.rowType===Qu.FullWidthDetail&&this.gridOptionsService.is("keepDetailRows")},e.prototype.setCached=function(t){var e=t?"none":"";this.allRowGuis.forEach((function(t){return t.element.style.display=e}))},e.prototype.initialiseRowComp=function(t){var i=this,o=this.gridOptionsService;this.listenOnDomOrder(t),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),o.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);var n=t.rowComp,r=this.getInitialRowClasses(t.containerType);r.forEach((function(t){return n.addOrRemoveCssClass(t,!0)})),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&Mi(t.element,1==this.rowNode.expanded),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),o.setDomData(t.element,e.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc((function(){return o.setDomData(t.element,e.DOM_DATA_KEY_ROW_CTRL,null)})),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),o.is("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask((function(){i.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)})),this.executeProcessRowPostCreateFunc()},e.prototype.setRowCompRowBusinessKey=function(t){null!=this.businessKeySanitised&&t.setRowBusinessKey(this.businessKeySanitised)},e.prototype.getBusinessKey=function(){return this.businessKeySanitised},e.prototype.setRowCompRowId=function(t){this.rowId=xe(this.rowNode.id),null!=this.rowId&&t.setRowId(this.rowId)},e.prototype.executeSlideAndFadeAnimations=function(t){var e=this,i=t.containerType,o=this.slideInAnimation[i];o&&(z((function(){e.onTopChanged()})),this.slideInAnimation[i]=!1);var n=this.fadeInAnimation[i];n&&(z((function(){t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})),this.fadeInAnimation[i]=!1)},e.prototype.addRowDraggerToRow=function(t){if(this.gridOptionsService.is("enableRangeSelection"))G((function(){console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")}),"rowDragAndRangeSelectionEnabled");else{var e=this.beans.localeService.getLocaleTextFunc(),i=new Ya((function(){return"1 "+e("rowDragRow","row")}),this.rowNode,void 0,t.element,void 0,!0);this.createManagedBean(i,this.beans.context)}},e.prototype.setupFullWidth=function(t){var e=this.getPinnedForContainer(t.containerType),i=this.createFullWidthParams(t.element,e);if(this.rowType!=Qu.FullWidthDetail||nt.__assertRegistered(Z.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId())){var o;switch(this.rowType){case Qu.FullWidthDetail:o=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(i);break;case Qu.FullWidthGroup:o=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(i);break;case Qu.FullWidthLoading:o=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(i);break;default:o=this.beans.userComponentFactory.getFullWidthCellRendererDetails(i);break}t.rowComp.showFullWidth(o)}},e.prototype.isPrintLayout=function(){return this.printLayout},e.prototype.getFullWidthCellRenderer=function(){var t,e;return null===(e=null===(t=this.fullWidthGui)||void 0===t?void 0:t.rowComp)||void 0===e?void 0:e.getFullWidthCellRenderer()},e.prototype.getCellElement=function(t){var e=this.getCellCtrl(t);return e?e.getGui():null},e.prototype.executeProcessRowPostCreateFunc=function(){var t=this.gridOptionsService.getCallback("processRowPostCreate");if(t&&this.areAllContainersReady()){var e={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(e)}},e.prototype.areAllContainersReady=function(){var t=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),e=!!this.centerGui,i=!!this.rightGui||!this.beans.columnModel.isPinningRight();return t&&e&&i},e.prototype.setRowType=function(){var t=this.rowNode.stub,e=this.rowNode.isFullWidthCell(),i=this.beans.doingMasterDetail&&this.rowNode.detail,o=this.beans.columnModel.isPivotMode(),n=!!this.rowNode.group&&!this.rowNode.footer,r=n&&this.gridOptionsService.isGroupUseEntireRow(o);this.rowType=t?Qu.FullWidthLoading:i?Qu.FullWidthDetail:e?Qu.FullWidth:r?Qu.FullWidthGroup:Qu.Normal},e.prototype.updateColumnLists=function(t,e){var i=this;if(void 0===t&&(t=!1),void 0===e&&(e=!1),!this.isFullWidth()){var o=t||this.gridOptionsService.is("suppressAnimationFrame")||this.printLayout;o?this.updateColumnListsImpl(e):this.updateColumnListsPending||(this.beans.animationFrameService.createTask((function(){i.active&&i.updateColumnListsImpl(!0)}),this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}},e.prototype.createCellCtrls=function(t,e,i){var o=this;void 0===i&&(i=null);var n={list:[],map:{}},r=function(t,e){n.list.push(e),n.map[t]=e};return e.forEach((function(e){var i=e.getInstanceId(),n=t.map[i];n||(n=new Mc(e,o.rowNode,o.beans,o)),r(i,n)})),t.list.forEach((function(t){var e=null!=n.map[t.getColumn().getInstanceId()];if(!e){var s=!o.isCellEligibleToBeRemoved(t,i);s?r(t.getColumn().getInstanceId(),t):t.destroy()}})),n},e.prototype.updateColumnListsImpl=function(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)},e.prototype.setCellCtrls=function(t){var e=this;this.allRowGuis.forEach((function(i){var o=e.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(o,t)}))},e.prototype.getCellCtrlsForContainer=function(t){switch(t){case jc.LEFT:return this.leftCellCtrls.list;case jc.RIGHT:return this.rightCellCtrls.list;case jc.FULL_WIDTH:return[];case jc.CENTER:return this.centerCellCtrls.list;default:var e=t;throw new Error("Unhandled case: "+e)}},e.prototype.createAllCellCtrls=function(){var t=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var e=t.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e);var i=t.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,i,"left");var o=t.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}},e.prototype.isCellEligibleToBeRemoved=function(t,e){var i=!0,o=!1,n=t.getColumn();if(n.getPinned()!=e)return i;var r=t.isEditing(),s=this.beans.focusService.isCellFocused(t.getCellPosition()),a=r||s;if(a){var l=t.getColumn(),u=this.beans.columnModel.getAllDisplayedColumns(),c=u.indexOf(l)>=0;return c?o:i}return i},e.prototype.getDomOrder=function(){var t=this.gridOptionsService.is("ensureDomOrder");return t||this.gridOptionsService.isDomLayout("print")},e.prototype.listenOnDomOrder=function(t){var e=this,i=function(){t.rowComp.setDomOrder(e.getDomOrder())};this.addManagedPropertyListener("domLayout",i),this.addManagedPropertyListener("ensureDomOrder",i)},e.prototype.setAnimateFlags=function(t){if(!this.isSticky()&&t){var e=s(this.rowNode.oldRowTop),i=this.beans.columnModel.isPinningLeft(),o=this.beans.columnModel.isPinningRight();if(e){if(this.isFullWidth()&&!this.gridOptionsService.is("embedFullWidthRows"))return void(this.slideInAnimation.fullWidth=!0);this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=o}else{if(this.isFullWidth()&&!this.gridOptionsService.is("embedFullWidthRows"))return void(this.fadeInAnimation.fullWidth=!0);this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=o}}},e.prototype.isEditing=function(){return this.editingRow},e.prototype.stopRowEditing=function(t){this.stopEditing(t)},e.prototype.isFullWidth=function(){return this.rowType!==Qu.Normal},e.prototype.getRowType=function(){return this.rowType},e.prototype.refreshFullWidth=function(){var t=this,e=function(e,i){if(!e)return!0;var o=e.rowComp.getFullWidthCellRenderer();if(!o)return!1;if(!o.refresh)return!1;var n=t.createFullWidthParams(e.element,i),r=o.refresh(n);return r},i=e(this.fullWidthGui,null),o=e(this.centerGui,null),n=e(this.leftGui,"left"),r=e(this.rightGui,"right"),s=i&&o&&n&&r;return s},e.prototype.addListeners=function(){var t=this;this.addManagedListener(this.rowNode,Fa.EVENT_HEIGHT_CHANGED,(function(){return t.onRowHeightChanged()})),this.addManagedListener(this.rowNode,Fa.EVENT_ROW_SELECTED,(function(){return t.onRowSelected()})),this.addManagedListener(this.rowNode,Fa.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,Fa.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var e=this.beans.eventService;this.addManagedListener(e,ge.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,ge.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,ge.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,ge.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this)),this.addManagedListener(e,ge.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusCleared.bind(this)),this.addManagedListener(e,ge.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,ge.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(e,ge.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()},e.prototype.onColumnMoved=function(){this.updateColumnLists()},e.prototype.addListenersForCellComps=function(){var t=this;this.addManagedListener(this.rowNode,Fa.EVENT_ROW_INDEX_CHANGED,(function(){t.getAllCellCtrls().forEach((function(t){return t.onRowIndexChanged()}))})),this.addManagedListener(this.rowNode,Fa.EVENT_CELL_CHANGED,(function(e){t.getAllCellCtrls().forEach((function(t){return t.onCellChanged(e)}))}))},e.prototype.onRowNodeDataChanged=function(t){var e=this,i=this.isFullWidth()!==!!this.rowNode.isFullWidthCell();if(i)this.beans.rowRenderer.redrawRow(this.rowNode);else if(this.isFullWidth()){var o=this.refreshFullWidth();o||this.beans.rowRenderer.redrawRow(this.rowNode)}else this.getAllCellCtrls().forEach((function(e){return e.refreshCell({suppressFlash:!t.update,newData:!t.update})})),this.allRowGuis.forEach((function(t){e.setRowCompRowId(t.rowComp),e.updateRowBusinessKey(),e.setRowCompRowBusinessKey(t.rowComp)})),this.onRowSelected(),this.postProcessCss()},e.prototype.onRowNodeCellChanged=function(){this.postProcessCss()},e.prototype.postProcessCss=function(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},e.prototype.onRowNodeHighlightChanged=function(){var t=this.rowNode.highlighted;this.allRowGuis.forEach((function(e){var i=t===iu.Above,o=t===iu.Below;e.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),e.rowComp.addOrRemoveCssClass("ag-row-highlight-below",o)}))},e.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},e.prototype.postProcessRowDragging=function(){var t=this.rowNode.dragging;this.allRowGuis.forEach((function(e){return e.rowComp.addOrRemoveCssClass("ag-row-dragging",t)}))},e.prototype.updateExpandedCss=function(){var t=this.rowNode.isExpandable(),e=1==this.rowNode.expanded;this.allRowGuis.forEach((function(i){i.rowComp.addOrRemoveCssClass("ag-row-group",t),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&e),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!e),Mi(i.element,t&&e)}))},e.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},e.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists(!1,!0)},e.prototype.getRowPosition=function(){return{rowPinned:r(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}},e.prototype.onKeyboardNavigate=function(t){var e=this.allRowGuis.find((function(e){return e.element.contains(t.target)})),i=e?e.element:null,o=i===t.target;if(o){var n=this.rowNode,r=this.beans.focusService.getFocusedCell(),s={rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:r&&r.column};this.beans.navigationService.navigateToNextCell(t,t.key,s,!0),t.preventDefault()}},e.prototype.onTabKeyDown=function(t){if(!t.defaultPrevented&&!Zt(t)){var e=this.allRowGuis.find((function(e){return e.element.contains(t.target)})),i=e?e.element:null,o=i===t.target,n=null;o||(n=this.beans.focusService.findNextFocusableElement(i,!1,t.shiftKey)),(this.isFullWidth()&&o||!n)&&this.beans.navigationService.onTabKeyDown(this,t)}},e.prototype.onFullWidthRowFocused=function(t){var e,i=this.rowNode,o=!!t&&(this.isFullWidth()&&t.rowIndex===i.rowIndex&&t.rowPinned==i.rowPinned),n=this.fullWidthGui?this.fullWidthGui.element:null===(e=this.centerGui)||void 0===e?void 0:e.element;n&&(n.classList.toggle("ag-full-width-focus",o),o&&n.focus({preventScroll:!0}))},e.prototype.refreshCell=function(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),this.updateColumnLists()},e.prototype.removeCellCtrl=function(t,e){var i={list:[],map:{}};return t.list.forEach((function(t){t!==e&&(i.list.push(t),i.map[t.getInstanceId()]=t)})),i},e.prototype.onMouseEvent=function(t,e){switch(t){case"dblclick":this.onRowDblClick(e);break;case"click":this.onRowClick(e);break;case"touchstart":case"mousedown":this.onRowMouseDown(e);break}},e.prototype.createRowEvent=function(t,e){return{type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,event:e}},e.prototype.createRowEventWithSource=function(t,e){var i=this.createRowEvent(t,e);return i.source=this,i},e.prototype.onRowDblClick=function(t){if(!Zt(t)){var e=this.createRowEventWithSource(ge.EVENT_ROW_DOUBLE_CLICKED,t);this.beans.eventService.dispatchEvent(e)}},e.prototype.onRowMouseDown=function(t){if(this.lastMouseDownOnDragger=Yo(t.target,"ag-row-drag",3),this.isFullWidth()){var e=this.rowNode,i=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:e.rowIndex,column:i.getAllDisplayedColumns()[0],rowPinned:e.rowPinned,forceBrowserFocus:!0})}},e.prototype.onRowClick=function(t){var e=Zt(t)||this.lastMouseDownOnDragger;if(!e){var i=this.createRowEventWithSource(ge.EVENT_ROW_CLICKED,t);this.beans.eventService.dispatchEvent(i);var o=t.ctrlKey||t.metaKey,n=t.shiftKey,r=this.gridOptionsService.is("groupSelectsChildren");if(!(r&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()||this.gridOptionsService.is("suppressRowClickSelection"))){var s=this.gridOptionsService.is("rowMultiSelectWithClick"),a=!this.gridOptionsService.is("suppressRowDeselection"),l="rowClicked";if(this.rowNode.isSelected())s?this.rowNode.setSelectedParams({newValue:!1,event:t,source:l}):o?a&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:l}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!n,rangeSelect:n,event:t,source:l});else{var u=!s&&!o;this.rowNode.setSelectedParams({newValue:!0,clearSelection:u,rangeSelect:n,event:t,source:l})}}}},e.prototype.setupDetailRowAutoHeight=function(t){var e=this;if(this.rowType===Qu.FullWidthDetail&&this.gridOptionsService.is("detailRowAutoHeight")){var i=function(){var i=t.clientHeight;if(null!=i&&i>0){var o=function(){e.rowNode.setRowHeight(i),e.beans.clientSideRowModel?e.beans.clientSideRowModel.onRowHeightChanged():e.beans.serverSideRowModel&&e.beans.serverSideRowModel.onRowHeightChanged()};e.beans.frameworkOverrides.setTimeout(o,0)}},o=this.beans.resizeObserverService.observeResize(t,i);this.addDestroyFunc(o),i()}},e.prototype.createFullWidthParams=function(t,e){var i=this,o={fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,eGridCell:t,eParentOfValue:t,pinned:e,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(t,e,o,n){return i.addFullWidthRowDragging(t,e,o,n)}};return o},e.prototype.addFullWidthRowDragging=function(t,e,i,o){if(void 0===i&&(i=""),this.isFullWidth()){var n=new Ya((function(){return i}),this.rowNode,void 0,t,e,o);this.createManagedBean(n,this.beans.context)}},e.prototype.onUiLevelChanged=function(){var t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){var e="ag-row-level-"+t,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach((function(t){t.rowComp.addOrRemoveCssClass(e,!0),t.rowComp.addOrRemoveCssClass(i,!1)}))}this.rowLevel=t},e.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},e.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},e.prototype.onModelUpdated=function(){this.refreshFirstAndLastRowStyles()},e.prototype.refreshFirstAndLastRowStyles=function(){var t=this.isFirstRowOnPage(),e=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach((function(e){return e.rowComp.addOrRemoveCssClass("ag-row-first",t)}))),this.lastRowOnPage!==e&&(this.lastRowOnPage=e,this.allRowGuis.forEach((function(t){return t.rowComp.addOrRemoveCssClass("ag-row-last",e)})))},e.prototype.stopEditing=function(t){var e,i;if(void 0===t&&(t=!1),!this.stoppingRowEdit){var o=this.getAllCellCtrls(),n=this.editingRow;this.stoppingRowEdit=!0;var r=!1;try{for(var s=Nc(o),a=s.next();!a.done;a=s.next()){var l=a.value,u=l.stopEditing(t);n&&!t&&!r&&u&&(r=!0)}}catch(h){e={error:h}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}if(r){var c=this.createRowEvent(ge.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(c)}n&&this.setEditingRow(!1),this.stoppingRowEdit=!1}},e.prototype.setInlineEditingCss=function(t){this.allRowGuis.forEach((function(e){e.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),e.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)}))},e.prototype.setEditingRow=function(t){this.editingRow=t,this.allRowGuis.forEach((function(e){return e.rowComp.addOrRemoveCssClass("ag-row-editing",t)}));var e=t?this.createRowEvent(ge.EVENT_ROW_EDITING_STARTED):this.createRowEvent(ge.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(e)},e.prototype.startRowEditing=function(t,e,i){if(void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),!this.editingRow){var o=this.getAllCellCtrls().reduce((function(o,n){var r=n===e;return r?n.startEditing(t,r,i):n.startEditing(null,r,i),!!o||n.isEditing()}),!1);o&&this.setEditingRow(!0)}},e.prototype.getAllCellCtrls=function(){if(0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length)return this.centerCellCtrls.list;var t=Bc(Bc(Bc([],Vc(this.centerCellCtrls.list)),Vc(this.leftCellCtrls.list)),Vc(this.rightCellCtrls.list));return t},e.prototype.postProcessClassesFromGridOptions=function(){var t=this,e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);e&&e.length&&e.forEach((function(e){t.allRowGuis.forEach((function(t){return t.rowComp.addOrRemoveCssClass(e,!0)}))}))},e.prototype.postProcessRowClassRules=function(){var t=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,(function(e){t.allRowGuis.forEach((function(t){return t.rowComp.addOrRemoveCssClass(e,!0)}))}),(function(e){t.allRowGuis.forEach((function(t){return t.rowComp.addOrRemoveCssClass(e,!1)}))}))},e.prototype.setStylesFromGridOptions=function(t,e){var i=this;t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(e,(function(t){return t.rowComp.setUserStyles(i.rowStyles)}))},e.prototype.getPinnedForContainer=function(t){var e=t===jc.LEFT?"left":t===jc.RIGHT?"right":null;return e},e.prototype.getInitialRowClasses=function(t){var e=this.getPinnedForContainer(t),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:e};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)},e.prototype.processStylesFromGridOptions=function(){var t=this.gridOptionsService.get("rowStyle");if(!t||"function"!==typeof t){var e,i=this.gridOptionsService.getCallback("getRowStyle");if(i){var o={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};e=i(o)}return e||t?Object.assign({},t,e):this.emptyStyle}console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead")},e.prototype.onRowSelected=function(t){var e=this,i=!!this.rowNode.isSelected();this.forEachGui(t,(function(t){t.rowComp.addOrRemoveCssClass("ag-row-selected",i),Ki(t.element,!!i||void 0);var o=e.createAriaLabel();Oi(t.element,null==o?"":o)}))},e.prototype.createAriaLabel=function(){var t=this.rowNode.isSelected();if(!t||!this.gridOptionsService.is("suppressRowDeselection")){var e=this.beans.localeService.getLocaleTextFunc(),i=e(t?"ariaRowDeselect":"ariaRowSelect","Press SPACE to "+(t?"deselect":"select")+" this row.");return i}},e.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},e.prototype.addHoverFunctionality=function(t){var e=this;this.active&&(this.addManagedListener(t,"mouseenter",(function(){return e.rowNode.onMouseEnter()})),this.addManagedListener(t,"mouseleave",(function(){return e.rowNode.onMouseLeave()})),this.addManagedListener(this.rowNode,Fa.EVENT_MOUSE_ENTER,(function(){e.beans.dragService.isDragging()||e.gridOptionsService.is("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),e.rowNode.setHovered(!0))})),this.addManagedListener(this.rowNode,Fa.EVENT_MOUSE_LEAVE,(function(){t.classList.remove("ag-row-hover"),e.rowNode.setHovered(!1)})))},e.prototype.roundRowTopToBounds=function(t){var e=this.beans.ctrlsService.getGridBodyCtrl(),i=e.getScrollFeature().getVScrollPosition(),o=this.applyPaginationOffset(i.top,!0)-100,n=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(o,t),n)},e.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},e.prototype.forEachGui=function(t,e){t?e(t):this.allRowGuis.forEach(e)},e.prototype.onRowHeightChanged=function(t){if(null!=this.rowNode.rowHeight){var e=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),o=this.gridOptionsService.isGetRowHeightFunction(),n=o?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,r=n?Math.min(i,n)-2+"px":void 0;this.forEachGui(t,(function(t){t.element.style.height=e+"px",r&&t.element.style.setProperty("--ag-line-height",r)}))}},e.prototype.addEventListener=function(e,i){t.prototype.addEventListener.call(this,e,i)},e.prototype.removeEventListener=function(e,i){t.prototype.removeEventListener.call(this,e,i)},e.prototype.destroyFirstPass=function(){this.active=!1,this.gridOptionsService.isAnimateRows()&&this.setupRemoveAnimation(),this.rowNode.setHovered(!1);var e=this.createRowEvent(ge.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(e),this.beans.eventService.dispatchEvent(e),t.prototype.destroy.call(this)},e.prototype.setupRemoveAnimation=function(){if(!this.isSticky()){var t=null!=this.rowNode.rowTop;if(t){var e=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(e)}else this.allRowGuis.forEach((function(t){return t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)}))}},e.prototype.destroySecondPass=function(){this.allRowGuis.length=0;var t=function(t){return t.list.forEach((function(t){return t.destroy()})),{list:[],map:{}}};this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)},e.prototype.setFocusedClasses=function(t){var e=this;this.forEachGui(t,(function(t){t.rowComp.addOrRemoveCssClass("ag-row-focus",e.rowFocused),t.rowComp.addOrRemoveCssClass("ag-row-no-focus",!e.rowFocused)}))},e.prototype.onCellFocused=function(){this.onCellFocusChanged()},e.prototype.onCellFocusCleared=function(){this.onCellFocusChanged()},e.prototype.onCellFocusChanged=function(){var t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)},e.prototype.onPaginationChanged=function(){var t=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()},e.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},e.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},e.prototype.applyPaginationOffset=function(t,e){if(void 0===e&&(e=!1),this.rowNode.isRowPinned()||this.rowNode.sticky)return t;var i=this.beans.paginationProxy.getPixelOffset(),o=e?1:-1;return t+i*o},e.prototype.setRowTop=function(t){if(!this.printLayout&&s(t)){var e=this.applyPaginationOffset(t),i=this.rowNode.isRowPinned()||this.rowNode.sticky,o=i?e:this.beans.rowContainerHeightService.getRealPixelPosition(e),n=o+"px";this.setRowTopStyle(n)}},e.prototype.getInitialRowTop=function(t){var e=this.gridOptionsService.is("suppressRowTransform");return e?this.getInitialRowTopShared(t):void 0},e.prototype.getInitialTransform=function(t){var e=this.gridOptionsService.is("suppressRowTransform");return e?void 0:"translateY("+this.getInitialRowTopShared(t)+")"},e.prototype.getInitialRowTopShared=function(t){if(this.printLayout)return"";var e;if(this.isSticky())e=this.rowNode.stickyRowTop;else{var i=this.slideInAnimation[t]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,o=this.applyPaginationOffset(i);e=this.rowNode.isRowPinned()?o:this.beans.rowContainerHeightService.getRealPixelPosition(o)}return e+"px"},e.prototype.setRowTopStyle=function(t){var e=this.gridOptionsService.is("suppressRowTransform");this.allRowGuis.forEach((function(i){return e?i.rowComp.setTop(t):i.rowComp.setTransform("translateY("+t+")")}))},e.prototype.getRowNode=function(){return this.rowNode},e.prototype.getCellCtrl=function(t){var e=null;return this.getAllCellCtrls().forEach((function(i){i.getColumn()==t&&(e=i)})),null!=e||this.getAllCellCtrls().forEach((function(i){i.getColSpanningList().indexOf(t)>=0&&(e=i)})),e},e.prototype.onRowIndexChanged=function(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())},e.prototype.getRowIndex=function(){return this.rowNode.getRowIndexString()},e.prototype.updateRowIndexes=function(t){var e=this.rowNode.getRowIndexString(),i=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),o=this.rowNode.rowIndex%2===0,n=i+this.rowNode.rowIndex+1;this.forEachGui(t,(function(t){t.rowComp.setRowIndex(e),t.rowComp.addOrRemoveCssClass("ag-row-even",o),t.rowComp.addOrRemoveCssClass("ag-row-odd",!o),ji(t.element,n)}))},e.prototype.getPinnedLeftRowElement=function(){return this.leftGui?this.leftGui.element:void 0},e.prototype.getPinnedRightRowElement=function(){return this.rightGui?this.rightGui.element:void 0},e.prototype.getBodyRowElement=function(){return this.centerGui?this.centerGui.element:void 0},e.prototype.getFullWidthRowElement=function(){return this.fullWidthGui?this.fullWidthGui.element:void 0},e.DOM_DATA_KEY_ROW_CTRL="renderedRow",e}(le),Wc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Uc=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},zc=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Kc=function(t){function e(e){var i=t.call(this)||this;return i.element=e,i}return Wc(e,t),e.prototype.postConstruct=function(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()},e.prototype.addKeyboardListeners=function(){var t="keydown",e=this.processKeyboardEvent.bind(this,t);this.addManagedListener(this.element,t,e)},e.prototype.addMouseListeners=function(){var t=this,e=te("touchstart")?"touchstart":"mousedown",i=["dblclick","contextmenu","mouseover","mouseout","click",e];i.forEach((function(e){var i=t.processMouseEvent.bind(t,e);t.addManagedListener(t.element,e,i)}))},e.prototype.processMouseEvent=function(t,e){if(this.mouseEventService.isEventFromThisGrid(e)&&!Zt(e)){var i=this.getRowForEvent(e),o=this.mouseEventService.getRenderedCellForEvent(e);"contextmenu"===t?this.handleContextMenuMouseEvent(e,null,i,o):(o&&o.onMouseEvent(t,e),i&&i.onMouseEvent(t,e))}},e.prototype.mockContextMenuForIPad=function(){var t=this;if(ho()){var e=new oa(this.element),i=function(e){var i=t.getRowForEvent(e.touchEvent),o=t.mouseEventService.getRenderedCellForEvent(e.touchEvent);t.handleContextMenuMouseEvent(null,e.touchEvent,i,o)};this.addManagedListener(e,oa.EVENT_LONG_TAP,i),this.addDestroyFunc((function(){return e.destroy()}))}},e.prototype.getRowForEvent=function(t){var e=t.target;while(e){var i=this.gridOptionsService.getDomData(e,$c.DOM_DATA_KEY_ROW_CTRL);if(i)return i;e=e.parentElement}return null},e.prototype.handleContextMenuMouseEvent=function(t,e,i,o){var n=i?i.getRowNode():null,r=o?o.getColumn():null,s=null;if(r){var a=t||e;o.dispatchCellContextMenuEvent(a),s=this.valueService.getValue(r,n)}var l=this.ctrlsService.getGridBodyCtrl(),u=o?o.getGui():l.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(t,e,n,r,s,u)},e.prototype.getControlsForEventTarget=function(t){return{cellCtrl:ee(this.gridOptionsService,t,Mc.DOM_DATA_KEY_CELL_CTRL),rowCtrl:ee(this.gridOptionsService,t,$c.DOM_DATA_KEY_ROW_CTRL)}},e.prototype.processKeyboardEvent=function(t,e){var i=this.getControlsForEventTarget(e.target),o=i.cellCtrl,n=i.rowCtrl;e.defaultPrevented||(o?this.processCellKeyboardEvent(o,t,e):n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,t,e))},e.prototype.processCellKeyboardEvent=function(t,e,i){var o=t.getRowNode(),n=t.getColumn(),r=t.isEditing(),s=!Un(this.gridOptionsService,i,o,n,r);if(s&&"keydown"===e){var a=!r&&this.navigationService.handlePageScrollingKey(i);a||t.onKeyDown(i),this.doGridOperations(i,t.isEditing()),Wn(i)&&t.processCharacter(i)}if("keydown"===e){var l=t.createEvent(i,ge.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(l)}},e.prototype.processFullWidthRowKeyboardEvent=function(t,e,i){var o=t.getRowNode(),n=this.focusService.getFocusedCell(),r=n&&n.column,s=!Un(this.gridOptionsService,i,o,r,!1);if(s){var a=i.key;if("keydown"===e)switch(a){case Nn.PAGE_HOME:case Nn.PAGE_END:case Nn.PAGE_UP:case Nn.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case Nn.UP:case Nn.DOWN:t.onKeyboardNavigate(i);break;case Nn.TAB:t.onTabKeyDown(i);break}}if("keydown"===e){var l=t.createRowEvent(ge.EVENT_CELL_KEY_DOWN,i);this.eventService.dispatchEvent(l)}},e.prototype.doGridOperations=function(t,e){if((t.ctrlKey||t.metaKey)&&!e&&this.mouseEventService.isEventFromThisGrid(t)){var i=Kn(t);return i===Nn.A?this.onCtrlAndA(t):i===Nn.C?this.onCtrlAndC(t):i===Nn.D?this.onCtrlAndD(t):i===Nn.V?this.onCtrlAndV(t):i===Nn.X?this.onCtrlAndX(t):i===Nn.Y?this.onCtrlAndY():i===Nn.Z?this.onCtrlAndZ(t):void 0}},e.prototype.onCtrlAndA=function(t){var e=this,i=e.pinnedRowModel,o=e.paginationProxy,n=e.rangeService;if(n&&o.isRowsToRender()){var r=zc([i.isEmpty("top"),i.isEmpty("bottom")],2),s=r[0],a=r[1],u=s?null:"top",c=void 0,h=void 0;a?(c=null,h=this.paginationProxy.getRowCount()-1):(c="bottom",h=i.getPinnedBottomRowData().length-1);var p=this.columnModel.getAllDisplayedColumns();if(l(p))return;n.setCellRange({rowStartIndex:0,rowStartPinned:u,rowEndIndex:h,rowEndPinned:c,columnStart:p[0],columnEnd:Dt(p)})}t.preventDefault()},e.prototype.onCtrlAndC=function(t){if(this.clipboardService&&!this.gridOptionsService.is("enableCellTextSelection")){var e=this.getControlsForEventTarget(t.target),i=e.cellCtrl,o=e.rowCtrl;(null===i||void 0===i?void 0:i.isEditing())||(null===o||void 0===o?void 0:o.isEditing())||(t.preventDefault(),this.clipboardService.copyToClipboard())}},e.prototype.onCtrlAndX=function(t){if(this.clipboardService&&!this.gridOptionsService.is("enableCellTextSelection")&&!this.gridOptionsService.is("suppressCutToClipboard")){var e=this.getControlsForEventTarget(t.target),i=e.cellCtrl,o=e.rowCtrl;(null===i||void 0===i?void 0:i.isEditing())||(null===o||void 0===o?void 0:o.isEditing())||(t.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}},e.prototype.onCtrlAndV=function(t){var e=this.getControlsForEventTarget(t.target),i=e.cellCtrl,o=e.rowCtrl;(null===i||void 0===i?void 0:i.isEditing())||(null===o||void 0===o?void 0:o.isEditing())||this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()},e.prototype.onCtrlAndD=function(t){this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),t.preventDefault()},e.prototype.onCtrlAndZ=function(t){this.gridOptionsService.is("undoRedoCellEditing")&&(t.preventDefault(),t.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))},e.prototype.onCtrlAndY=function(){this.undoRedoService.redo("ui")},Uc([pt("mouseEventService")],e.prototype,"mouseEventService",void 0),Uc([pt("valueService")],e.prototype,"valueService",void 0),Uc([dt("contextMenuFactory")],e.prototype,"contextMenuFactory",void 0),Uc([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Uc([pt("navigationService")],e.prototype,"navigationService",void 0),Uc([pt("focusService")],e.prototype,"focusService",void 0),Uc([pt("undoRedoService")],e.prototype,"undoRedoService",void 0),Uc([pt("columnModel")],e.prototype,"columnModel",void 0),Uc([pt("paginationProxy")],e.prototype,"paginationProxy",void 0),Uc([pt("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),Uc([dt("rangeService")],e.prototype,"rangeService",void 0),Uc([dt("clipboardService")],e.prototype,"clipboardService",void 0),Uc([ut],e.prototype,"postConstruct",null),e}(le),Yc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),qc=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Xc=function(t){function e(e){var i=t.call(this)||this;return i.centerContainerCtrl=e,i}return Yc(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady((function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl(),t.listenForResize()})),this.addManagedListener(this.eventService,ge.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))},e.prototype.listenForResize=function(){var t=this,e=function(){return t.onCenterViewportResized()};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)},e.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},e.prototype.onCenterViewportResized=function(){if(this.centerContainerCtrl.isViewportVisible()){this.checkViewportAndScrolls();var t=this.centerContainerCtrl.getCenterWidth();t!==this.centerWidth&&(this.centerWidth=t,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},e.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()},e.prototype.getBodyHeight=function(){return this.bodyHeight},e.prototype.checkBodyHeight=function(){var t=this.gridBodyCtrl.getBodyViewportElement(),e=Xo(t);if(this.bodyHeight!==e){this.bodyHeight=e;var i={type:ge.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(i)}},e.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},e.prototype.updateScrollVisibleServiceImpl=function(){var t={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(t)},e.prototype.isHorizontalScrollShowing=function(){return this.centerContainerCtrl.isHorizontalScrollShowing()},e.prototype.onHorizontalViewportChanged=function(){var t=this.centerContainerCtrl.getCenterWidth(),e=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(t,e)},qc([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),qc([pt("columnModel")],e.prototype,"columnModel",void 0),qc([pt("scrollVisibleService")],e.prototype,"scrollVisibleService",void 0),qc([ut],e.prototype,"postConstruct",null),e}(le),Qc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Jc=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Zc=function(t){function e(e){var i=t.call(this)||this;return i.element=e,i}return Qc(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.eventService,ge.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},e.prototype.onPinnedLeftWidthChanged=function(){var t=this.pinnedWidthService.getPinnedLeftWidth(),e=t>0;Uo(this.element,e),wn(this.element,t)},e.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedLeftWidth()},Jc([pt("pinnedWidthService")],e.prototype,"pinnedWidthService",void 0),Jc([ut],e.prototype,"postConstruct",null),e}(le),th=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),eh=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ih=function(t){function e(e){var i=t.call(this)||this;return i.element=e,i}return th(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.eventService,ge.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},e.prototype.onPinnedRightWidthChanged=function(){var t=this.pinnedWidthService.getPinnedRightWidth(),e=t>0;Uo(this.element,e),wn(this.element,t)},e.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedRightWidth()},eh([pt("pinnedWidthService")],e.prototype,"pinnedWidthService",void 0),eh([ut],e.prototype,"postConstruct",null),e}(le),oh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),nh=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},rh=function(t){function e(e,i){var o=t.call(this)||this;return o.eContainer=e,o.eViewport=i,o}return oh(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.eventService,ge.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},e.prototype.onHeightChanged=function(){var t=this.maxDivHeightScaler.getUiContainerHeight(),e=null!=t?t+"px":"";this.eContainer.style.height=e,this.eViewport&&(this.eViewport.style.height=e)},nh([pt("rowContainerHeightService")],e.prototype,"maxDivHeightScaler",void 0),nh([ut],e.prototype,"postConstruct",null),e}(le),sh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ah=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},lh=function(t){function e(e){var i=t.call(this)||this;return i.eContainer=e,i}return sh(e,t),e.prototype.postConstruct=function(){var t=this;if(this.gridOptionsService.is("enableRangeSelection")&&!a(this.rangeService)){var e={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(e),this.addDestroyFunc((function(){return t.dragService.removeDragSource(e)}))}},ah([dt("rangeService")],e.prototype,"rangeService",void 0),ah([pt("dragService")],e.prototype,"dragService",void 0),ah([ut],e.prototype,"postConstruct",null),e}(le),uh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ch=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},hh=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this)||this;return o.callback=e,o.addSpacer=i,o}return uh(e,t),e.prototype.postConstruct=function(){var t=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",t),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,ge.EVENT_LEFT_PINNED_WIDTH_CHANGED,t),this.addSpacer&&(this.addManagedListener(this.eventService,ge.EVENT_RIGHT_PINNED_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,ge.EVENT_SCROLL_VISIBILITY_CHANGED,t),this.addManagedListener(this.eventService,ge.EVENT_SCROLLBAR_WIDTH_CHANGED,t)),this.setWidth()},e.prototype.setWidth=function(){var t,e=this.columnModel,i=this.gridOptionsService.isDomLayout("print"),o=e.getBodyContainerWidth(),n=e.getDisplayedColumnsLeftWidth(),r=e.getDisplayedColumnsRightWidth();if(i)t=o+n+r;else if(t=o,this.addSpacer){var s=this.gridOptionsService.is("enableRtl")?n:r;0===s&&this.scrollVisibleService.isVerticalScrollShowing()&&(t+=this.gridOptionsService.getScrollbarWidth())}this.callback(t)},ch([pt("columnModel")],e.prototype,"columnModel",void 0),ch([pt("scrollVisibleService")],e.prototype,"scrollVisibleService",void 0),ch([ut],e.prototype,"postConstruct",null),e}(le),ph=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),dh=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},fh=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},gh=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t};function yh(t){switch(t){case Gc.CENTER:case Gc.TOP_CENTER:case Gc.STICKY_TOP_CENTER:case Gc.BOTTOM_CENTER:return jc.CENTER;case Gc.LEFT:case Gc.TOP_LEFT:case Gc.STICKY_TOP_LEFT:case Gc.BOTTOM_LEFT:return jc.LEFT;case Gc.RIGHT:case Gc.TOP_RIGHT:case Gc.STICKY_TOP_RIGHT:case Gc.BOTTOM_RIGHT:return jc.RIGHT;case Gc.FULL_WIDTH:case Gc.TOP_FULL_WIDTH:case Gc.STICKY_TOP_FULL_WIDTH:case Gc.BOTTOM_FULL_WIDTH:return jc.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}(function(t){t["LEFT"]="left",t["RIGHT"]="right",t["CENTER"]="center",t["FULL_WIDTH"]="fullWidth",t["TOP_LEFT"]="topLeft",t["TOP_RIGHT"]="topRight",t["TOP_CENTER"]="topCenter",t["TOP_FULL_WIDTH"]="topFullWidth",t["STICKY_TOP_LEFT"]="stickyTopLeft",t["STICKY_TOP_RIGHT"]="stickyTopRight",t["STICKY_TOP_CENTER"]="stickyTopCenter",t["STICKY_TOP_FULL_WIDTH"]="stickyTopFullWidth",t["BOTTOM_LEFT"]="bottomLeft",t["BOTTOM_RIGHT"]="bottomRight",t["BOTTOM_CENTER"]="bottomCenter",t["BOTTOM_FULL_WIDTH"]="bottomFullWidth"})(Gc||(Gc={})),function(t){t["LEFT"]="left",t["RIGHT"]="right",t["CENTER"]="center",t["FULL_WIDTH"]="fullWidth"}(jc||(jc={}));var _h=Te([[Gc.CENTER,"ag-center-cols-container"],[Gc.LEFT,"ag-pinned-left-cols-container"],[Gc.RIGHT,"ag-pinned-right-cols-container"],[Gc.FULL_WIDTH,"ag-full-width-container"],[Gc.TOP_CENTER,"ag-floating-top-container"],[Gc.TOP_LEFT,"ag-pinned-left-floating-top"],[Gc.TOP_RIGHT,"ag-pinned-right-floating-top"],[Gc.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[Gc.STICKY_TOP_CENTER,"ag-sticky-top-container"],[Gc.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[Gc.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[Gc.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[Gc.BOTTOM_CENTER,"ag-floating-bottom-container"],[Gc.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[Gc.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[Gc.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),mh=Te([[Gc.CENTER,"ag-center-cols-viewport"],[Gc.TOP_CENTER,"ag-floating-top-viewport"],[Gc.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[Gc.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),vh=function(t){function e(e){var i=t.call(this)||this;return i.visible=!0,i.EMPTY_CTRLS=[],i.name=e,i.isFullWithContainer=i.name===Gc.TOP_FULL_WIDTH||i.name===Gc.STICKY_TOP_FULL_WIDTH||i.name===Gc.BOTTOM_FULL_WIDTH||i.name===Gc.FULL_WIDTH,i}return ph(e,t),e.getRowContainerCssClasses=function(t){var e=_h.get(t),i=mh.get(t);return{container:e,viewport:i}},e.getPinned=function(t){switch(t){case Gc.BOTTOM_LEFT:case Gc.TOP_LEFT:case Gc.STICKY_TOP_LEFT:case Gc.LEFT:return"left";case Gc.BOTTOM_RIGHT:case Gc.TOP_RIGHT:case Gc.STICKY_TOP_RIGHT:case Gc.RIGHT:return"right";default:return null}},e.prototype.postConstruct=function(){var t=this;this.enableRtl=this.gridOptionsService.is("enableRtl"),this.embedFullWidthRows=this.gridOptionsService.is("embedFullWidthRows"),this.forContainers([Gc.CENTER],(function(){return t.viewportSizeFeature=t.createManagedBean(new Xc(t))}))},e.prototype.registerWithCtrlsService=function(){switch(this.name){case Gc.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case Gc.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case Gc.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case Gc.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case Gc.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case Gc.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case Gc.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case Gc.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case Gc.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case Gc.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case Gc.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case Gc.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this);break}},e.prototype.forContainers=function(t,e){t.indexOf(this.name)>=0&&e()},e.prototype.getContainerElement=function(){return this.eContainer},e.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},e.prototype.setComp=function(t,e,i){var o=this;this.comp=t,this.eContainer=e,this.eViewport=i,this.createManagedBean(new Kc(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var n=[Gc.TOP_CENTER,Gc.TOP_LEFT,Gc.TOP_RIGHT],r=[Gc.STICKY_TOP_CENTER,Gc.STICKY_TOP_LEFT,Gc.STICKY_TOP_RIGHT],s=[Gc.BOTTOM_CENTER,Gc.BOTTOM_LEFT,Gc.BOTTOM_RIGHT],a=[Gc.CENTER,Gc.LEFT,Gc.RIGHT],l=gh(gh(gh(gh([],fh(n)),fh(s)),fh(a)),fh(r)),u=[Gc.CENTER,Gc.LEFT,Gc.RIGHT,Gc.FULL_WIDTH],c=[Gc.CENTER,Gc.TOP_CENTER,Gc.STICKY_TOP_CENTER,Gc.BOTTOM_CENTER],h=[Gc.LEFT,Gc.BOTTOM_LEFT,Gc.TOP_LEFT,Gc.STICKY_TOP_LEFT],p=[Gc.RIGHT,Gc.BOTTOM_RIGHT,Gc.TOP_RIGHT,Gc.STICKY_TOP_RIGHT];this.forContainers(h,(function(){o.pinnedWidthFeature=o.createManagedBean(new Zc(o.eContainer)),o.addManagedListener(o.eventService,ge.EVENT_LEFT_PINNED_WIDTH_CHANGED,(function(){return o.onPinnedWidthChanged()}))})),this.forContainers(p,(function(){o.pinnedWidthFeature=o.createManagedBean(new ih(o.eContainer)),o.addManagedListener(o.eventService,ge.EVENT_RIGHT_PINNED_WIDTH_CHANGED,(function(){return o.onPinnedWidthChanged()}))})),this.forContainers(u,(function(){return o.createManagedBean(new rh(o.eContainer,o.name===Gc.CENTER?i:void 0))})),this.forContainers(l,(function(){return o.createManagedBean(new lh(o.eContainer))})),this.forContainers(c,(function(){return o.createManagedBean(new hh((function(t){return o.comp.setContainerWidth(t+"px")})))})),bo()&&(this.forContainers([Gc.CENTER],(function(){var t=o.enableRtl?ge.EVENT_LEFT_PINNED_WIDTH_CHANGED:ge.EVENT_RIGHT_PINNED_WIDTH_CHANGED;o.addManagedListener(o.eventService,t,(function(){return o.refreshPaddingForFakeScrollbar()}))})),this.refreshPaddingForFakeScrollbar()),this.addListeners(),this.registerWithCtrlsService()},e.prototype.refreshPaddingForFakeScrollbar=function(){var t=this,e=t.enableRtl,i=t.columnModel,o=t.eContainer,n=e?Gc.LEFT:Gc.RIGHT;this.forContainers([Gc.CENTER,n],(function(){var t=i.getContainerWidth(n),r=e?"marginLeft":"marginRight";o.style[r]=t?"16px":"0px"}))},e.prototype.addListeners=function(){var t=this;this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,(function(){return t.onDisplayedColumnsChanged()})),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,(function(){return t.onDisplayedColumnsWidthChanged()})),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_ROWS_CHANGED,(function(e){return t.onDisplayedRowsChanged(e.afterScroll)})),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()},e.prototype.listenOnDomOrder=function(){var t=this,e=[Gc.STICKY_TOP_CENTER,Gc.STICKY_TOP_LEFT,Gc.STICKY_TOP_RIGHT,Gc.STICKY_TOP_FULL_WIDTH],i=e.indexOf(this.name)>=0;if(i)this.comp.setDomOrder(!0);else{var o=function(){var e=t.gridOptionsService.is("ensureDomOrder"),i=t.gridOptionsService.isDomLayout("print");t.comp.setDomOrder(e||i)};this.addManagedPropertyListener("domLayout",o),o()}},e.prototype.stopHScrollOnPinnedRows=function(){var t=this;this.forContainers([Gc.TOP_CENTER,Gc.STICKY_TOP_CENTER,Gc.BOTTOM_CENTER],(function(){var e=function(){return t.eViewport.scrollLeft=0};t.addManagedListener(t.eViewport,"scroll",e)}))},e.prototype.onDisplayedColumnsChanged=function(){var t=this;this.forContainers([Gc.CENTER],(function(){return t.onHorizontalViewportChanged()}))},e.prototype.onDisplayedColumnsWidthChanged=function(){var t=this;this.forContainers([Gc.CENTER],(function(){return t.onHorizontalViewportChanged()}))},e.prototype.addPreventScrollWhileDragging=function(){var t=this,e=function(e){t.dragService.isDragging()&&e.cancelable&&e.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc((function(){return t.eContainer.removeEventListener("touchmove",e)}))},e.prototype.onHorizontalViewportChanged=function(t){void 0===t&&(t=!1);var e=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(e,i,t)},e.prototype.getCenterWidth=function(){return Qo(this.eViewport)},e.prototype.getCenterViewportScrollLeft=function(){return on(this.eViewport,this.enableRtl)},e.prototype.registerViewportResizeListener=function(t){var e=this.resizeObserverService.observeResize(this.eViewport,t);this.addDestroyFunc((function(){return e()}))},e.prototype.isViewportVisible=function(){return ln(this.eViewport)},e.prototype.getViewportScrollLeft=function(){return on(this.eViewport,this.enableRtl)},e.prototype.isHorizontalScrollShowing=function(){var t=this.gridOptionsService.is("alwaysShowHorizontalScroll");return t||vn(this.eViewport)},e.prototype.getViewportElement=function(){return this.eViewport},e.prototype.setContainerTranslateX=function(t){this.eContainer.style.transform="translateX("+t+"px)"},e.prototype.getHScrollPosition=function(){var t={left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth};return t},e.prototype.setCenterViewportScrollLeft=function(t){nn(this.eViewport,t,this.enableRtl)},e.prototype.isContainerVisible=function(){var t=e.getPinned(this.name);return!t||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0},e.prototype.onPinnedWidthChanged=function(){var t=this.isContainerVisible();this.visible!=t&&(this.visible=t,this.onDisplayedRowsChanged()),bo()&&this.refreshPaddingForFakeScrollbar()},e.prototype.onDisplayedRowsChanged=function(t){var e=this;if(void 0===t&&(t=!1),this.visible){var i=this.gridOptionsService.isDomLayout("print"),o=function(t){var o=t.isFullWidth(),n=e.embedFullWidthRows||i,r=e.isFullWithContainer?!n&&o:n||!o;return r},n=this.getRowCtrls().filter(o);this.comp.setRowCtrls(n,t)}else this.comp.setRowCtrls(this.EMPTY_CTRLS,!1)},e.prototype.getRowCtrls=function(){switch(this.name){case Gc.TOP_CENTER:case Gc.TOP_LEFT:case Gc.TOP_RIGHT:case Gc.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case Gc.STICKY_TOP_CENTER:case Gc.STICKY_TOP_LEFT:case Gc.STICKY_TOP_RIGHT:case Gc.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case Gc.BOTTOM_CENTER:case Gc.BOTTOM_LEFT:case Gc.BOTTOM_RIGHT:case Gc.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}},dh([pt("scrollVisibleService")],e.prototype,"scrollVisibleService",void 0),dh([pt("dragService")],e.prototype,"dragService",void 0),dh([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),dh([pt("columnModel")],e.prototype,"columnModel",void 0),dh([pt("resizeObserverService")],e.prototype,"resizeObserverService",void 0),dh([pt("animationFrameService")],e.prototype,"animationFrameService",void 0),dh([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),dh([ut],e.prototype,"postConstruct",null),e}(le),bh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ch=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},wh='<div class="ag-root ag-unselectable" role="treegrid">\n        <ag-header-root ref="gridHeader"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <ag-row-container ref="topLeftContainer" name="'+Gc.TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="'+Gc.TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="'+Gc.TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="'+Gc.TOP_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-body" ref="eBody" role="presentation">\n            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n                <ag-row-container ref="leftContainer" name="'+Gc.LEFT+'"></ag-row-container>\n                <ag-row-container ref="centerContainer" name="'+Gc.CENTER+'"></ag-row-container>\n                <ag-row-container ref="rightContainer" name="'+Gc.RIGHT+'"></ag-row-container>\n                <ag-row-container ref="fullWidthContainer" name="'+Gc.FULL_WIDTH+'"></ag-row-container>\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">\n            <ag-row-container ref="stickyTopLeftContainer" name="'+Gc.STICKY_TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="stickyTopCenterContainer" name="'+Gc.STICKY_TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="stickyTopRightContainer" name="'+Gc.STICKY_TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="stickyTopFullWidthContainer" name="'+Gc.STICKY_TOP_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <ag-row-container ref="bottomLeftContainer" name="'+Gc.BOTTOM_LEFT+'"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="'+Gc.BOTTOM_CENTER+'"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="'+Gc.BOTTOM_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="'+Gc.BOTTOM_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>',Sh=function(t){function e(){return t.call(this,wh)||this}return bh(e,t),e.prototype.init=function(){var t=this,e=function(t,e){var i=t+"px";e.style.minHeight=i,e.style.height=i},i={setRowAnimationCssOnBodyViewport:function(e,i){return t.setRowAnimationCssOnBodyViewport(e,i)},setColumnCount:function(e){return Hi(t.getGui(),e)},setRowCount:function(e){return Gi(t.getGui(),e)},setTopHeight:function(i){return e(i,t.eTop)},setBottomHeight:function(i){return e(i,t.eBottom)},setTopDisplay:function(e){return t.eTop.style.display=e},setBottomDisplay:function(e){return t.eBottom.style.display=e},setStickyTopHeight:function(e){return t.eStickyTop.style.height=e},setStickyTopTop:function(e){return t.eStickyTop.style.top=e},setStickyTopWidth:function(e){return t.eStickyTop.style.width=e},setColumnMovingCss:function(e,i){return t.addOrRemoveCssClass(e,i)},updateLayoutClasses:function(e,i){var o=[t.eBodyViewport.classList,t.eBody.classList];o.forEach((function(t){t.toggle(du.AUTO_HEIGHT,i.autoHeight),t.toggle(du.NORMAL,i.normal),t.toggle(du.PRINT,i.print)})),t.addOrRemoveCssClass(du.AUTO_HEIGHT,i.autoHeight),t.addOrRemoveCssClass(du.NORMAL,i.normal),t.addOrRemoveCssClass(du.PRINT,i.print)},setAlwaysVerticalScrollClass:function(e,i){return t.eBodyViewport.classList.toggle(Ku,i)},registerBodyViewportResizeListener:function(e){var i=t.resizeObserverService.observeResize(t.eBodyViewport,e);t.addDestroyFunc((function(){return i()}))},setPinnedTopBottomOverflowY:function(e){return t.eTop.style.overflowY=t.eBottom.style.overflowY=e},setCellSelectableCss:function(e,i){[t.eTop,t.eBodyViewport,t.eBottom].forEach((function(t){return t.classList.toggle(e,i)}))},setBodyViewportWidth:function(e){return t.eBodyViewport.style.width=e}};this.ctrl=this.createManagedBean(new Xu),this.ctrl.setComp(i,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService||"multiple"===this.gridOptionsService.get("rowSelection"))&&Bi(this.getGui(),!0)},e.prototype.setRowAnimationCssOnBodyViewport=function(t,e){var i=this.eBodyViewport.classList;i.toggle(Mu.ANIMATION_ON,e),i.toggle(Mu.ANIMATION_OFF,!e)},e.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},Ch([pt("resizeObserverService")],e.prototype,"resizeObserverService",void 0),Ch([dt("rangeService")],e.prototype,"rangeService",void 0),Ch([br("eBodyViewport")],e.prototype,"eBodyViewport",void 0),Ch([br("eStickyTop")],e.prototype,"eStickyTop",void 0),Ch([br("eTop")],e.prototype,"eTop",void 0),Ch([br("eBottom")],e.prototype,"eBottom",void 0),Ch([br("gridHeader")],e.prototype,"headerRootComp",void 0),Ch([br("eBody")],e.prototype,"eBody",void 0),Ch([ut],e.prototype,"init",null),e}(vr),Eh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),xh=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Oh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Eh(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},e.prototype.onDisplayedColumnsChanged=function(){this.update()},e.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},e.prototype.update=function(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)},e.prototype.updateImpl=function(){var t=this.ctrlsService.getCenterRowContainerCtrl();if(t){var e={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(e)}},e.prototype.setScrollsVisible=function(t){var e=this.horizontalScrollShowing!==t.horizontalScrollShowing||this.verticalScrollShowing!==t.verticalScrollShowing;if(e){this.horizontalScrollShowing=t.horizontalScrollShowing,this.verticalScrollShowing=t.verticalScrollShowing;var i={type:ge.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(i)}},e.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},e.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},xh([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),xh([ut],e.prototype,"postConstruct",null),e=xh([ht("scrollVisibleService")],e),e}(le),Rh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ih=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Th=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gridInstanceId=i.gridInstanceSequence.next(),e}var i;return Rh(e,t),i=e,e.prototype.stampTopLevelGridCompWithGridInstance=function(t){t[i.GRID_DOM_KEY]=this.gridInstanceId},e.prototype.getRenderedCellForEvent=function(t){return ee(this.gridOptionsService,t.target,Mc.DOM_DATA_KEY_CELL_CTRL)},e.prototype.isEventFromThisGrid=function(t){var e=this.isElementInThisGrid(t.target);return e},e.prototype.isElementInThisGrid=function(t){var e=t;while(e){var o=e[i.GRID_DOM_KEY];if(s(o)){var n=o===this.gridInstanceId;return n}e=e.parentElement}return!1},e.prototype.getCellPositionForEvent=function(t){var e=this.getRenderedCellForEvent(t);return e?e.getCellPosition():null},e.prototype.getNormalisedPosition=function(t){var e,i,o=this.gridOptionsService.isDomLayout("normal"),n=t;if(null!=n.clientX||null!=n.clientY?(e=n.clientX,i=n.clientY):(e=n.x,i=n.y),o){var r=this.ctrlsService.getGridBodyCtrl(),s=r.getScrollFeature().getVScrollPosition(),a=r.getScrollFeature().getHScrollPosition();e+=a.left,i+=s.top}return{x:e,y:i}},e.gridInstanceSequence=new ar,e.GRID_DOM_KEY="__ag_grid_instance",Ih([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),e=i=Ih([ht("mouseEventService")],e),e}(le),Ph=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Dh=function(){return Dh=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Dh.apply(this,arguments)},kh=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ah=function(t){function e(){var e=t.call(this)||this;return e.onPageDown=q(e.onPageDown,100),e.onPageUp=q(e.onPageUp,100),e}return Ph(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady((function(e){t.gridBodyCon=e.gridBodyCtrl}))},e.prototype.handlePageScrollingKey=function(t,e){void 0===e&&(e=!1);var i=t.key,o=t.altKey,n=t.ctrlKey||t.metaKey,r=!!this.rangeService&&t.shiftKey,s=this.mouseEventService.getCellPositionForEvent(t),a=!1;switch(i){case Nn.PAGE_HOME:case Nn.PAGE_END:n||o||(this.onHomeOrEndKey(i),a=!0);break;case Nn.LEFT:case Nn.RIGHT:case Nn.UP:case Nn.DOWN:if(!s)return!1;!n||o||r||(this.onCtrlUpDownLeftRight(i,s),a=!0);break;case Nn.PAGE_DOWN:case Nn.PAGE_UP:n||o||(a=this.handlePageUpDown(i,s,e));break}return a&&t.preventDefault(),a},e.prototype.handlePageUpDown=function(t,e,i){return i&&(e=this.focusService.getFocusedCell()),!!e&&(t===Nn.PAGE_UP?this.onPageUp(e):this.onPageDown(e),!0)},e.prototype.navigateTo=function(t){var e=t.scrollIndex,i=t.scrollType,o=t.scrollColumn,n=t.focusIndex,r=t.focusColumn;if(s(o)&&!o.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(o),s(e)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e,i),t.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:r,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){var a={rowIndex:n,rowPinned:null,column:r};this.rangeService.setRangeToCell(a)}},e.prototype.onPageDown=function(t){var e=this.ctrlsService.getGridBodyCtrl(),i=e.getScrollFeature().getVScrollPosition(),o=this.getViewportHeight(),n=this.paginationProxy.getPixelOffset(),r=i.top+o,s=this.paginationProxy.getRowIndexAtPixel(r+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,s):this.navigateToNextPage(t,s)},e.prototype.onPageUp=function(t){var e=this.ctrlsService.getGridBodyCtrl(),i=e.getScrollFeature().getVScrollPosition(),o=this.paginationProxy.getPixelOffset(),n=i.top,r=this.paginationProxy.getRowIndexAtPixel(n+o);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,r,!0):this.navigateToNextPage(t,r,!0)},e.prototype.navigateToNextPage=function(t,e,i){void 0===i&&(i=!1);var o,n=this.getViewportHeight(),r=this.paginationProxy.getPageFirstRow(),s=this.paginationProxy.getPageLastRow(),a=this.paginationProxy.getPixelOffset(),l=this.paginationProxy.getRow(t.rowIndex),u=i?(null===l||void 0===l?void 0:l.rowHeight)-n-a:n-a,c=(null===l||void 0===l?void 0:l.rowTop)+u,h=this.paginationProxy.getRowIndexAtPixel(c+a);if(h===t.rowIndex){var p=i?-1:1;e=h=t.rowIndex+p}i?(o="bottom",h<r&&(h=r),e<r&&(e=r)):(o="top",h>s&&(h=s),e>s&&(e=s)),this.isRowTallerThanView(h)&&(e=h,o="top"),this.navigateTo({scrollIndex:e,scrollType:o,scrollColumn:null,focusIndex:h,focusColumn:t.column})},e.prototype.navigateToNextPageWithAutoHeight=function(t,e,i){var o=this;void 0===i&&(i=!1),this.navigateTo({scrollIndex:e,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:e,focusColumn:t.column}),setTimeout((function(){var n=o.getNextFocusIndexForAutoHeight(t,i);o.navigateTo({scrollIndex:e,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:t.column,isAsync:!0})}),50)},e.prototype.getNextFocusIndexForAutoHeight=function(t,e){var i;void 0===e&&(e=!1);var o=e?-1:1,n=this.getViewportHeight(),r=this.paginationProxy.getPageLastRow(),s=0,a=t.rowIndex;while(a>=0&&a<=r){var l=this.paginationProxy.getRow(a);if(l){var u=null!==(i=l.rowHeight)&&void 0!==i?i:0;if(s+u>n)break;s+=u}a+=o}return Math.max(0,Math.min(a,r))},e.prototype.getViewportHeight=function(){var t=this.ctrlsService.getGridBodyCtrl(),e=t.getScrollFeature().getVScrollPosition(),i=this.gridOptionsService.getScrollbarWidth(),o=e.bottom-e.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(o-=i),o},e.prototype.isRowTallerThanView=function(t){var e=this.paginationProxy.getRow(t);if(!e)return!1;var i=e.rowHeight;return"number"===typeof i&&i>this.getViewportHeight()},e.prototype.onCtrlUpDownLeftRight=function(t,e){var i=this.cellNavigationService.getNextCellToFocus(t,e,!0),o=i.rowIndex,n=i.column;this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:n,focusIndex:o,focusColumn:n})},e.prototype.onHomeOrEndKey=function(t){var e=t===Nn.PAGE_HOME,i=this.columnModel.getAllDisplayedColumns(),o=e?i[0]:Dt(i),n=e?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:o,focusIndex:n,focusColumn:o})},e.prototype.onTabKeyDown=function(t,e){var i=e.shiftKey,o=this.tabToNextCellCommon(t,i,e);if(o)e.preventDefault();else if(i){var n=t.getRowPosition(),r=n.rowIndex,s=n.rowPinned,a=s?0===r:r===this.paginationProxy.getPageFirstRow();a&&(0===this.gridOptionsService.getNum("headerHeight")?this.focusService.focusNextGridCoreContainer(!0,!0):(e.preventDefault(),this.focusService.focusPreviousFromFirstCell(e)))}else t instanceof Mc&&t.focusCell(!0),this.focusService.focusNextGridCoreContainer(i)&&e.preventDefault()},e.prototype.tabToNextCell=function(t,e){var i=this.focusService.getFocusedCell();if(!i)return!1;var o=this.getCellByPosition(i);return!!(o||(o=this.rowRenderer.getRowByPosition(i),o&&o.isFullWidth()))&&this.tabToNextCellCommon(o,t,e)},e.prototype.tabToNextCellCommon=function(t,e,i){var o,n=t.isEditing();if(!n&&t instanceof Mc){var r=t,s=r.getRowCtrl();s&&(n=s.isEditing())}return o=n?"fullRow"===this.gridOptionsService.get("editType")?this.moveToNextEditingRow(t,e,i):this.moveToNextEditingCell(t,e,i):this.moveToNextCellNotEditing(t,e),o||!!this.focusService.getFocusedHeader()},e.prototype.moveToNextEditingCell=function(t,e,i){void 0===i&&(i=null);var o=t.getCellPosition();t.getGui().focus(),t.stopEditing();var n=this.findNextCellToFocusOn(o,e,!0);return null!=n&&(n.startEditing(null,!0,i),n.focusCell(!1),!0)},e.prototype.moveToNextEditingRow=function(t,e,i){void 0===i&&(i=null);var o=t.getCellPosition(),n=this.findNextCellToFocusOn(o,e,!0);if(null==n)return!1;var r=n.getCellPosition(),s=this.isCellEditable(o),a=this.isCellEditable(r),l=r&&o.rowIndex===r.rowIndex&&o.rowPinned===r.rowPinned;if(s&&t.setFocusOutOnEditor(),!l){var u=t.getRowCtrl();u.stopEditing();var c=n.getRowCtrl();c.startRowEditing(void 0,void 0,i)}return a?(n.setFocusInOnEditor(),n.focusCell()):n.focusCell(!0),!0},e.prototype.moveToNextCellNotEditing=function(t,e){var i,o=this.columnModel.getAllDisplayedColumns();i=t instanceof $c?Dh(Dh({},t.getRowPosition()),{column:e?o[0]:Dt(o)}):t.getCellPosition();var n=this.findNextCellToFocusOn(i,e,!1);if(n instanceof Mc)n.focusCell(!0);else if(n)return this.tryToFocusFullWidthRow(n.getRowPosition(),e);return s(n)},e.prototype.findNextCellToFocusOn=function(t,e,i){var o=t;while(1){t!==o&&(t=o),e||(o=this.getLastCellOfColSpan(o)),o=this.cellNavigationService.getNextTabbedCell(o,e);var n=this.gridOptionsService.getCallback("tabToNextCell");if(s(n)){var r={backwards:e,editing:i,previousCellPosition:t,nextCellPosition:o||null},a=n(r);s(a)?(a.floating&&(G((function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")}),"no floating in userCell"),a.rowPinned=a.floating),o={rowIndex:a.rowIndex,column:a.column,rowPinned:a.rowPinned}):o=null}if(!o)return null;if(o.rowIndex<0){var l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+o.rowIndex,column:o.column},fromCell:!0}),null}var u="fullRow"===this.gridOptionsService.get("editType");if(i&&!u){var c=this.isCellEditable(o);if(!c)continue}this.ensureCellVisible(o);var h=this.getCellByPosition(o);if(!h){var p=this.rowRenderer.getRowByPosition(o);if(!p||!p.isFullWidth()||i)continue;return p}if(!h.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(o),h}},e.prototype.isCellEditable=function(t){var e=this.lookupRowNodeForCell(t);return!!e&&t.column.isCellEditable(e)},e.prototype.getCellByPosition=function(t){var e=this.rowRenderer.getRowByPosition(t);return e?e.getCellCtrl(t.column):null},e.prototype.lookupRowNodeForCell=function(t){return"top"===t.rowPinned?this.pinnedRowModel.getPinnedTopRow(t.rowIndex):"bottom"===t.rowPinned?this.pinnedRowModel.getPinnedBottomRow(t.rowIndex):this.paginationProxy.getRow(t.rowIndex)},e.prototype.navigateToNextCell=function(t,e,i,o){var n=i,r=!1;while(n&&(n===i||!this.isValidNavigateCell(n)))this.gridOptionsService.is("enableRtl")?e===Nn.LEFT&&(n=this.getLastCellOfColSpan(n)):e===Nn.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextCellToFocus(e,n),r=a(n);if(r&&t&&t.key===Nn.UP&&(n={rowIndex:-1,rowPinned:null,column:i.column}),o){var l=this.gridOptionsService.getCallback("navigateToNextCell");if(s(l)){var u={key:e,previousCellPosition:i,nextCellPosition:n||null,event:t},c=l(u);s(c)?(c.floating&&(G((function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")}),"no floating in userCell"),c.rowPinned=c.floating),n={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}):n=null}}if(n)if(n.rowIndex<0){var h=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:h+n.rowIndex,column:i.column},event:t||void 0,fromCell:!0})}else{var p=this.getNormalisedPosition(n);p?this.focusPosition(p):this.tryToFocusFullWidthRow(n)}},e.prototype.getNormalisedPosition=function(t){this.ensureCellVisible(t);var e=this.getCellByPosition(t);return e?(t=e.getCellPosition(),this.ensureCellVisible(t),t):null},e.prototype.tryToFocusFullWidthRow=function(t,e){void 0===e&&(e=!1);var i=this.columnModel.getAllDisplayedColumns(),o=this.rowRenderer.getRowByPosition(t);if(!o||!o.isFullWidth())return!1;var n=this.focusService.getFocusedCell(),r={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column||(e?Dt(i):i[0])};this.focusPosition(r);var s=null!=n&&this.rowPositionUtils.before(r,n),a={type:ge.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column,isFullWidthCell:!0,floating:r.rowPinned,fromBelow:s};return this.eventService.dispatchEvent(a),!0},e.prototype.focusPosition=function(t){this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(t)},e.prototype.isValidNavigateCell=function(t){var e=this.rowPositionUtils.getRowNode(t);return!!e},e.prototype.getLastCellOfColSpan=function(t){var e=this.getCellByPosition(t);if(!e)return t;var i=e.getColSpanningList();return 1===i.length?t:{rowIndex:t.rowIndex,column:Dt(i),rowPinned:t.rowPinned}},e.prototype.ensureCellVisible=function(t){var e=this.gridOptionsService.isGroupRowsSticky(),i=this.rowModel.getRow(t.rowIndex),o=e&&(null===i||void 0===i?void 0:i.sticky);!o&&a(t.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t.rowIndex),t.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(t.column)},kh([pt("mouseEventService")],e.prototype,"mouseEventService",void 0),kh([pt("paginationProxy")],e.prototype,"paginationProxy",void 0),kh([pt("focusService")],e.prototype,"focusService",void 0),kh([dt("rangeService")],e.prototype,"rangeService",void 0),kh([pt("columnModel")],e.prototype,"columnModel",void 0),kh([pt("rowModel")],e.prototype,"rowModel",void 0),kh([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),kh([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),kh([pt("headerNavigationService")],e.prototype,"headerNavigationService",void 0),kh([pt("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),kh([pt("cellNavigationService")],e.prototype,"cellNavigationService",void 0),kh([pt("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),kh([ut],e.prototype,"postConstruct",null),e=kh([ht("navigationService")],e),e}(le),Lh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Mh=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Fh=function(t){function e(e){var i=t.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return i.params=e,i}return Lh(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.setDomData(this.getGui(),e.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},e.prototype.addKeyDownListener=function(){var t=this,e=this.getGui(),i=this.params,o=function(e){Un(t.gridOptionsService,e,i.node,i.column,!0)||i.onKeyDown(e)};this.addManagedListener(e,"keydown",o)},e.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",Mh([ut],e.prototype,"postConstruct",null),e}(fa),Nh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Vh=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;s.rendererVersion=0,s.editorVersion=0,s.beans=e,s.column=i.getColumn(),s.rowNode=i.getRowNode(),s.rowCtrl=i.getRowCtrl(),s.eRow=n,s.cellCtrl=i,s.setTemplate('<div comp-id="'+s.getCompId()+'"/>');var a=s.getGui();s.forceWrapper=i.isForceWrapper(),s.refreshWrapper(!1);var l=function(t,e){null!=e&&""!=e?a.setAttribute(t,e):a.removeAttribute(t)};Ci(a,"gridcell"),l("col-id",i.getColumnIdSanitised());var u=i.getTabIndex();void 0!==u&&l("tabindex",u.toString());var c={addOrRemoveCssClass:function(t,e){return s.addOrRemoveCssClass(t,e)},setUserStyles:function(t){return mn(a,t)},getFocusableElement:function(){return s.getFocusableElement()},setIncludeSelection:function(t){return s.includeSelection=t},setIncludeRowDrag:function(t){return s.includeRowDrag=t},setIncludeDndSource:function(t){return s.includeDndSource=t},setRenderDetails:function(t,e,i){return s.setRenderDetails(t,e,i)},setEditDetails:function(t,e,i){return s.setEditDetails(t,e,i)},getCellEditor:function(){return s.cellEditor||null},getCellRenderer:function(){return s.cellRenderer||null},getParentOfValue:function(){return s.getParentOfValue()}};return i.setComp(c,s.getGui(),s.eCellWrapper,o,r),s}return Nh(e,t),e.prototype.getParentOfValue=function(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()},e.prototype.setRenderDetails=function(t,e,i){var o=this.cellEditor&&!this.cellEditorPopupWrapper;if(!o){this.firstRender=null==this.firstRender;var n=this.refreshWrapper(!1);if(this.refreshEditStyles(!1),t){var r=i||n,s=!r&&this.refreshCellRenderer(t);s||(this.destroyRenderer(),this.createCellRendererInstance(t))}else this.destroyRenderer(),this.insertValueWithoutCellRenderer(e)}},e.prototype.setEditDetails=function(t,e,i){t?this.createCellEditorInstance(t,e,i):this.destroyEditor()},e.prototype.removeControls=function(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},e.prototype.refreshWrapper=function(t){var e=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=e||this.forceWrapper,o=i&&null==this.eCellWrapper;o&&(this.eCellWrapper=un('<div class="ag-cell-wrapper" role="presentation"></div>'),this.getGui().appendChild(this.eCellWrapper));var n=!i&&null!=this.eCellWrapper;n&&(an(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);var r=!t&&i,s=r&&null==this.eCellValue;s&&(this.eCellValue=un('<span class="ag-cell-value" role="presentation"></span>'),this.eCellWrapper.appendChild(this.eCellValue));var a=!r&&null!=this.eCellValue;a&&(an(this.eCellValue),this.eCellValue=void 0);var l=o||n||s||a;return l&&this.removeControls(),t||e&&this.addControls(),l},e.prototype.addControls=function(){this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))},e.prototype.createCellEditorInstance=function(t,e,i){var o=this,n=this.editorVersion,r=t.newAgStackInstance();if(r){var s=t.params;r.then((function(t){return o.afterCellEditorCreated(n,t,s,e,i)}));var l=a(this.cellEditor);l&&s.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},e.prototype.insertValueWithoutCellRenderer=function(t){var e=this.getParentOfValue();rn(e);var i=null!=t?xe(t):null;null!=i&&(e.innerHTML=i)},e.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},e.prototype.destroyRenderer=function(){var t=this.beans.context;this.cellRenderer=t.destroyBean(this.cellRenderer),an(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},e.prototype.destroyEditor=function(){var t=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=t.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=t.destroyBean(this.cellEditorPopupWrapper),an(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},e.prototype.refreshCellRenderer=function(t){if(null==this.cellRenderer||null==this.cellRenderer.refresh)return!1;if(this.cellRendererClass!==t.componentClass)return!1;var e=this.cellRenderer.refresh(t.params);return!0===e||void 0===e},e.prototype.createCellRendererInstance=function(t){var e=this,i=this.beans.gridOptionsService.is("suppressAnimationFrame"),o=!i,n=this.rendererVersion,r=t.componentClass,s=function(){var i=e.rendererVersion!==n||!e.isAlive();if(!i){var o=t.newAgStackInstance(),s=e.afterCellRendererCreated.bind(e,n,r);o&&o.then(s)}};o&&this.firstRender?this.beans.animationFrameService.createTask(s,this.rowNode.rowIndex,"createTasksP2"):s()},e.prototype.getCtrl=function(){return this.cellCtrl},e.prototype.getRowCtrl=function(){return this.rowCtrl},e.prototype.getCellRenderer=function(){return this.cellRenderer},e.prototype.getCellEditor=function(){return this.cellEditor},e.prototype.afterCellRendererCreated=function(t,e,i){var o=!this.isAlive()||t!==this.rendererVersion;if(o)this.beans.context.destroyBean(i);else if(this.cellRenderer=i,this.cellRendererClass=e,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){var n=this.getParentOfValue();rn(n),n.appendChild(this.cellRendererGui)}},e.prototype.afterCellEditorCreated=function(t,e,i,o,n){var r=t!==this.editorVersion;if(r)this.beans.context.destroyBean(e);else{var s=e.isCancelBeforeStart&&e.isCancelBeforeStart();if(s)return this.beans.context.destroyBean(e),void this.cellCtrl.stopEditing(!0);if(!e.getGui)return console.warn("AG Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),void this.beans.context.destroyBean(e);this.cellEditor=e,this.cellEditorGui=e.getGui();var a=o||void 0!==e.isPopup&&e.isPopup();a?this.addPopupCellEditor(i,n):this.addInCellEditor(),this.refreshEditStyles(!0,a),e.afterGuiAttached&&e.afterGuiAttached()}},e.prototype.refreshEditStyles=function(t,e){var i;this.addOrRemoveCssClass("ag-cell-inline-editing",t&&!e),this.addOrRemoveCssClass("ag-cell-popup-editing",t&&!!e),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!t||!!e),null===(i=this.rowCtrl)||void 0===i||i.setInlineEditingCss(t)},e.prototype.addInCellEditor=function(){var t=this.getGui(),e=this.beans.gridOptionsService.getDocument();if(t.contains(e.activeElement)&&t.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui){var i=this.getParentOfValue();i.appendChild(this.cellEditorGui)}},e.prototype.addPopupCellEditor=function(t,e){var i=this;"fullRow"===this.beans.gridOptionsService.get("editType")&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var o=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new Fh(t));var n=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&n.appendChild(this.cellEditorGui);var r=this.beans.popupService,s=this.beans.gridOptionsService.is("stopEditingWhenCellsLoseFocus"),a=null!=e?e:o.getPopupPosition?o.getPopupPosition():"over",l=this.beans.gridOptionsService.is("enableRtl"),u={ePopup:n,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:a,alignSide:l?"right":"left",keepWithinBounds:!0},c=r.positionPopupByComponent.bind(r,u),h=this.beans.localeService.getLocaleTextFunc(),p=r.addPopup({modal:s,eChild:n,closeOnEsc:!0,closedCallback:function(){i.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:h("ariaLabelCellEditor","Cell Editor")});p&&(this.hideEditorPopup=p.hideFunc)},e.prototype.detach=function(){this.eRow.removeChild(this.getGui())},e.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),t.prototype.destroy.call(this)},e.prototype.clearParentOfValue=function(){var t=this.getGui(),e=this.beans.gridOptionsService.getDocument();t.contains(e.activeElement)&&po()&&t.focus({preventScroll:!0}),rn(this.getParentOfValue())},e}(vr),Bh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Gh=function(t){function e(e,i,o){var n=t.call(this)||this;n.cellComps={},n.beans=i,n.rowCtrl=e,n.setTemplate('<div comp-id="'+n.getCompId()+'" style="'+n.getInitialStyle(o)+'"/>');var r=n.getGui(),s=r.style;n.domOrder=n.rowCtrl.getDomOrder(),Ci(r,"row");var a=n.rowCtrl.getTabIndex();null!=a&&r.setAttribute("tabindex",a.toString());var l={setDomOrder:function(t){return n.domOrder=t},setCellCtrls:function(t){return n.setCellCtrls(t)},showFullWidth:function(t){return n.showFullWidth(t)},getFullWidthCellRenderer:function(){return n.getFullWidthCellRenderer()},addOrRemoveCssClass:function(t,e){return n.addOrRemoveCssClass(t,e)},setUserStyles:function(t){return mn(r,t)},setTop:function(t){return s.top=t},setTransform:function(t){return s.transform=t},setRowIndex:function(t){return r.setAttribute("row-index",t)},setRowId:function(t){return r.setAttribute("row-id",t)},setRowBusinessKey:function(t){return r.setAttribute("row-business-key",t)}};return e.setComp(l,n.getGui(),o),n.addDestroyFunc((function(){e.unsetComp(o)})),n}return Bh(e,t),e.prototype.getInitialStyle=function(t){var e=this.rowCtrl.getInitialTransform(t),i=this.rowCtrl.getInitialRowTop(t);return e?"transform: "+e:"top: "+i},e.prototype.showFullWidth=function(t){var e=this,i=function(t){if(e.isAlive()){var i=t.getGui();e.getGui().appendChild(i),e.rowCtrl.setupDetailRowAutoHeight(i),e.setFullWidthRowComp(t)}else e.beans.context.destroyBean(t)},o=t.newAgStackInstance();o&&o.then(i)},e.prototype.setCellCtrls=function(t){var e=this,i=Object.assign({},this.cellComps);t.forEach((function(t){var o=t.getInstanceId(),n=e.cellComps[o];null==n?e.newCellComp(t):i[o]=null}));var o=P(i).filter((function(t){return null!=t}));this.destroyCells(o),this.ensureDomOrder(t)},e.prototype.ensureDomOrder=function(t){var e=this;if(this.domOrder){var i=[];t.forEach((function(t){var o=e.cellComps[t.getInstanceId()];o&&i.push(o.getGui())})),gn(this.getGui(),i)}},e.prototype.newCellComp=function(t){var e=new Vh(this.beans,t,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[t.getInstanceId()]=e,this.getGui().appendChild(e.getGui())},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.destroyAllCells()},e.prototype.destroyAllCells=function(){var t=P(this.cellComps).filter((function(t){return null!=t}));this.destroyCells(t)},e.prototype.setFullWidthRowComp=function(t){var e=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=t,this.addDestroyFunc((function(){e.fullWidthCellRenderer=e.beans.context.destroyBean(e.fullWidthCellRenderer)}))},e.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},e.prototype.destroyCells=function(t){var e=this;t.forEach((function(t){if(t){var i=t.getCtrl().getInstanceId();e.cellComps[i]===t&&(t.detach(),t.destroy(),e.cellComps[i]=null)}}))},e}(vr),jh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Hh=function(){return Hh=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Hh.apply(this,arguments)},$h=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};function Wh(){var t,e=vr.elementGettingCreated.getAttribute("name"),i=vh.getRowContainerCssClasses(e),o=e===Gc.CENTER||e===Gc.TOP_CENTER||e===Gc.STICKY_TOP_CENTER||e===Gc.BOTTOM_CENTER;return t=o?'<div class="'+i.viewport+'" ref="eViewport" role="presentation">\n                <div class="'+i.container+'" ref="eContainer"></div>\n            </div>':'<div class="'+i.container+'" ref="eContainer"></div>',t}var Uh,zh=function(t){function e(){var e=t.call(this,Wh())||this;return e.rowComps={},e.name=vr.elementGettingCreated.getAttribute("name"),e.type=yh(e.name),e}return jh(e,t),e.prototype.postConstruct=function(){var t=this,e={setViewportHeight:function(e){return t.eViewport.style.height=e},setRowCtrls:function(e){return t.setRowCtrls(e)},setDomOrder:function(e){t.domOrder=e},setContainerWidth:function(e){return t.eContainer.style.width=e}},i=this.createManagedBean(new vh(this.name));i.setComp(e,this.eContainer,this.eViewport)},e.prototype.preDestroy=function(){this.setRowCtrls([])},e.prototype.setRowCtrls=function(t){var e=this,i=Hh({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;var o=function(t){var o=t.getInstanceId(),n=i[o];if(n)e.rowComps[o]=n,delete i[o],e.ensureDomOrder(n.getGui());else{if(!t.getRowNode().displayed)return;var r=new Gh(t,e.beans,e.type);e.rowComps[o]=r,e.appendRow(r.getGui())}};t.forEach(o),P(i).forEach((function(t){e.eContainer.removeChild(t.getGui()),t.destroy()})),Ci(this.eContainer,t.length?"rowgroup":"presentation")},e.prototype.appendRow=function(t){this.domOrder?yn(this.eContainer,t,this.lastPlacedElement):this.eContainer.appendChild(t),this.lastPlacedElement=t},e.prototype.ensureDomOrder=function(t){this.domOrder&&(fn(this.eContainer,t,this.lastPlacedElement),this.lastPlacedElement=t)},$h([pt("beans")],e.prototype,"beans",void 0),$h([br("eViewport")],e.prototype,"eViewport",void 0),$h([br("eContainer")],e.prototype,"eContainer",void 0),$h([ut],e.prototype,"postConstruct",null),$h([ct],e.prototype,"preDestroy",null),e}(vr),Kh=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Yh=function(){function t(t){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=t}return t.prototype.onDragEnter=function(t){var e=this;if(this.clearColumnsList(),!this.gridOptionsService.is("functionsReadOnly")){var i=t.dragItem.columns;i&&i.forEach((function(t){t.isPrimary()&&(t.isAnyFunctionActive()||(t.isAllowValue()?e.columnsToAggregate.push(t):t.isAllowRowGroup()?e.columnsToGroup.push(t):t.isAllowPivot()&&e.columnsToPivot.push(t)))}))}},t.prototype.getIconName=function(){var t=this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length;return t>0?this.pinned?Ua.ICON_PINNED:Ua.ICON_MOVE:null},t.prototype.onDragLeave=function(t){this.clearColumnsList()},t.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},t.prototype.onDragging=function(t){},t.prototype.onDragStop=function(t){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},Kh([pt("columnModel")],t.prototype,"columnModel",void 0),Kh([pt("gridOptionsService")],t.prototype,"gridOptionsService",void 0),t}(),qh=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Xh=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Qh=function(){function t(t,e){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=t,this.eContainer=e,this.centerContainer=!s(t)}return t.prototype.init=function(){var t=this;this.ctrlsService.whenReady((function(){t.gridBodyCon=t.ctrlsService.getGridBodyCtrl()}))},t.prototype.getIconName=function(){return this.pinned?Ua.ICON_PINNED:Ua.ICON_MOVE},t.prototype.onDragEnter=function(t){var e=t.dragItem.columns,i=t.dragSource.type===Gs.ToolPanel;if(i)this.setColumnsVisible(e,!0,"uiColumnDragged");else{var o=t.dragItem.visibleState,n=(e||[]).filter((function(t){return o[t.getId()]}));this.setColumnsVisible(n,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(t,!0,!0)},t.prototype.onDragLeave=function(){this.ensureIntervalCleared(),this.lastMovedInfo=null},t.prototype.setColumnsVisible=function(t,e,i){if(void 0===i&&(i="api"),t){var o=t.filter((function(t){return!t.getColDef().lockVisible}));this.columnModel.setColumnsVisible(o,e,i)}},t.prototype.setColumnsPinned=function(t,e,i){if(void 0===i&&(i="api"),t){var o=t.filter((function(t){return!t.getColDef().lockPinned}));this.columnModel.setColumnsPinned(o,e,i)}},t.prototype.onDragStop=function(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null},t.prototype.normaliseX=function(t){if(this.gridOptionsService.is("enableRtl")){var e=this.eContainer.clientWidth;t=e-t}return this.centerContainer&&(t+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),t},t.prototype.checkCenterForScrolling=function(t){if(this.centerContainer){var e=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),i=e+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.is("enableRtl")?(this.needToMoveRight=t<e+50,this.needToMoveLeft=t>i-50):(this.needToMoveLeft=t<e+50,this.needToMoveRight=t>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},t.prototype.onDragging=function(t,e,i,o){var n,r=this;if(void 0===t&&(t=this.lastDraggingEvent),void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===o&&(o=!1),o){if(this.lastMovedInfo){var s=this.lastMovedInfo,l=s.columns,u=s.toIndex;this.moveColumns(l,u,"uiColumnMoved",!0)}}else if(this.lastDraggingEvent=t,!a(t.hDirection)){var c=this.normaliseX(t.x);e||this.checkCenterForScrolling(c);var h=this.normaliseDirection(t.hDirection),p=t.dragSource.type,d=(null===(n=t.dragSource.getDragItem().columns)||void 0===n?void 0:n.filter((function(t){return!t.getColDef().lockPinned||t.getPinned()==r.pinned})))||[];this.attemptMoveColumns({dragSourceType:p,allMovingColumns:d,hDirection:h,mouseX:c,fromEnter:e,fakeEvent:i})}},t.prototype.normaliseDirection=function(t){if(!this.gridOptionsService.is("enableRtl"))return t;switch(t){case Hs.Left:return Hs.Right;case Hs.Right:return Hs.Left;default:console.error("AG Grid: Unknown direction "+t)}},t.prototype.attemptMoveColumns=function(t){var e=t.dragSourceType,i=t.hDirection,o=t.mouseX,n=t.fromEnter,r=t.fakeEvent,s=i===Hs.Left,a=i===Hs.Right,l=t.allMovingColumns;if(e===Gs.HeaderCell){var u=[];l.forEach((function(t){var e,i=null,o=t.getParent();while(null!=o&&1===o.getDisplayedLeafColumns().length)i=o,o=o.getParent();if(null!=i){var n=!!(null===(e=i.getColGroupDef())||void 0===e?void 0:e.marryChildren),r=n?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns();r.forEach((function(t){u.includes(t)||u.push(t)}))}else u.includes(t)||u.push(t)})),l=u}var c=l.slice();this.columnModel.sortColumnsLikeGridColumns(c);var h=this.calculateValidMoves(c,a,o),p=this.calculateOldIndex(c);if(0!==h.length){var d=h[0],f=null!==p&&!n;if(e==Gs.HeaderCell&&(f=null!==p),f&&!r){if(s&&d>=p)return;if(a&&d<=p)return}for(var g=this.columnModel.getAllDisplayedColumns(),y=[],_=null,m=0;m<h.length;m++){var v=h[m],b=this.columnModel.getProposedColumnOrder(c,v);if(this.columnModel.doesOrderPassRules(b)){var C=b.filter((function(t){return g.includes(t)}));if(null===_)_=C;else if(!sr.areEqual(C,_))break;var w=this.groupFragCount(b);y.push({move:v,fragCount:w})}}0!==y.length&&(y.sort((function(t,e){return t.fragCount-e.fragCount})),this.moveColumns(l,y[0].move,"uiColumnMoved",!1))}},t.prototype.calculateOldIndex=function(t){var e=this.columnModel.getAllGridColumns(),i=Lt(t.map((function(t){return e.indexOf(t)}))),o=i[0],n=Dt(i),r=n-o,s=r!==i.length-1;return s?null:o},t.prototype.moveColumns=function(t,e,i,o){this.columnModel.moveColumns(t,e,i,o),this.lastMovedInfo=o?null:{columns:t,toIndex:e}},t.prototype.groupFragCount=function(t){function e(t){var e=[],i=t.getOriginalParent();while(null!=i)e.push(i),i=i.getOriginalParent();return e}for(var i=0,o=function(o){var n,r=e(t[o]),s=e(t[o+1]);n=Xh(r.length>s.length?[r,s]:[s,r],2),r=n[0],s=n[1],r.forEach((function(t){-1===s.indexOf(t)&&i++}))},n=0;n<t.length-1;n++)o(n);return i},t.prototype.calculateValidMoves=function(t,e,i){var o=this.gridOptionsService.is("suppressMovableColumns")||t.some((function(t){return t.getColDef().suppressMovable}));if(o)return[];var n,r=this.columnModel.getDisplayedColumns(this.pinned),s=this.columnModel.getAllGridColumns(),a=r.filter((function(e){return $t(t,e)})),l=r.filter((function(e){return!$t(t,e)})),u=s.filter((function(e){return!$t(t,e)})),c=0,h=i;if(e){var p=0;a.forEach((function(t){return p+=t.getActualWidth()})),h-=p}if(h>0){for(var d=0;d<l.length;d++){var f=l[d];if(h-=f.getActualWidth(),h<0)break;c++}e&&c++}if(c>0){var g=l[c-1];n=u.indexOf(g)+1}else n=u.indexOf(l[0]),-1===n&&(n=0);var y=[n],_=function(t,e){return t-e};if(e){var m=n+1,v=s.length-1;while(m<=v)y.push(m),m++;y.sort(_)}else{m=n,v=s.length-1;var b=s[m];while(m<=v&&this.isColumnHidden(r,b))m++,y.push(m),b=s[m];m=n-1;var C=0;while(m>=C)y.push(m),m--;y.sort(_).reverse()}return y},t.prototype.isColumnHidden=function(t,e){return t.indexOf(e)<0},t.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(Ua.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(Ua.ICON_RIGHT,!0))},t.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(Ua.ICON_MOVE))},t.prototype.moveInterval=function(){var t;this.intervalCount++,t=10+5*this.intervalCount,t>100&&(t=100);var e=null,i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=i.scrollHorizontally(-t):this.needToMoveRight&&(e=i.scrollHorizontally(t)),0!==e)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var o=this.lastDraggingEvent.dragItem.columns,n=o.filter((function(t){return!t.getColDef().lockPinned}));if(n.length>0&&(this.dragAndDropService.setGhostIcon(Ua.ICON_PINNED),this.failedMoveAttempts>7)){var r=this.needToMoveLeft?"left":"right";this.setColumnsPinned(n,r,"uiColumnDragged"),this.dragAndDropService.nudge()}}},qh([pt("columnModel")],t.prototype,"columnModel",void 0),qh([pt("dragAndDropService")],t.prototype,"dragAndDropService",void 0),qh([pt("gridOptionsService")],t.prototype,"gridOptionsService",void 0),qh([pt("ctrlsService")],t.prototype,"ctrlsService",void 0),qh([ut],t.prototype,"init",null),t}(),Jh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Zh=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},tp=function(t){function e(e,i){var o=t.call(this)||this;return o.pinned=e,o.eContainer=i,o}return Jh(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady((function(e){switch(t.pinned){case"left":t.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.leftRowContainerCtrl.getContainerElement()],[e.bottomLeftRowContainerCtrl.getContainerElement()],[e.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":t.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.rightRowContainerCtrl.getContainerElement()],[e.bottomRightRowContainerCtrl.getContainerElement()],[e.topRightRowContainerCtrl.getContainerElement()]];break;default:t.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.centerRowContainerCtrl.getViewportElement()],[e.bottomCenterRowContainerCtrl.getViewportElement()],[e.topCenterRowContainerCtrl.getViewportElement()]];break}}))},e.prototype.isInterestedIn=function(t){return t===Gs.HeaderCell||t===Gs.ToolPanel&&this.gridOptionsService.is("allowDragFromColumnsToolPanel")},e.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},e.prototype.getContainer=function(){return this.eContainer},e.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new Qh(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new Yh(this.pinned)),this.dragAndDropService.addDropTarget(this)},e.prototype.getIconName=function(){return this.currentDropListener.getIconName()},e.prototype.isDropColumnInPivotMode=function(t){return this.columnModel.isPivotMode()&&t.dragSource.type===Gs.ToolPanel},e.prototype.onDragEnter=function(t){this.currentDropListener=this.isDropColumnInPivotMode(t)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(t)},e.prototype.onDragLeave=function(t){this.currentDropListener.onDragLeave(t)},e.prototype.onDragging=function(t){this.currentDropListener.onDragging(t)},e.prototype.onDragStop=function(t){this.currentDropListener.onDragStop(t)},Zh([pt("dragAndDropService")],e.prototype,"dragAndDropService",void 0),Zh([pt("columnModel")],e.prototype,"columnModel",void 0),Zh([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Zh([ut],e.prototype,"postConstruct",null),Zh([ut],e.prototype,"init",null),e}(le),ep=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},ip=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},op=function(){function t(){}return t.getHeaderClassesFromColDef=function(t,e,i,o){return a(t)?[]:this.getColumnClassesFromCollDef(t.headerClass,t,e,i,o)},t.getToolPanelClassesFromColDef=function(t,e,i,o){return a(t)?[]:this.getColumnClassesFromCollDef(t.toolPanelClass,t,e,i,o)},t.getClassParams=function(t,e,i,o){return{colDef:t,column:i,columnGroup:o,api:e.api,columnApi:e.columnApi,context:e.context}},t.getColumnClassesFromCollDef=function(t,e,i,o,n){if(a(t))return[];var r;if("function"===typeof t){var s=this.getClassParams(e,i,o,n);r=t(s)}else r=t;return"string"===typeof r?[r]:Array.isArray(r)?ip([],ep(r)):[]},t}(),np=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),rp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},sp=function(t){function e(i){var o=t.call(this,e.TEMPLATE,i)||this;return o.headerCompVersion=0,o.column=i.getColumnGroupChild(),o.pinned=i.getPinned(),o}return np(e,t),e.prototype.postConstruct=function(){var t=this,e=this.getGui(),i=function(t,i){null!=i&&""!=i?e.setAttribute(t,i):e.removeAttribute(t)};i("col-id",this.column.getColId());var o={setWidth:function(t){return e.style.width=t},addOrRemoveCssClass:function(e,i){return t.addOrRemoveCssClass(e,i)},setAriaDescription:function(t){return Ii(e,t)},setAriaSort:function(t){return t?Ui(e,t):zi(e)},setUserCompDetails:function(e){return t.setUserCompDetails(e)},getUserCompInstance:function(){return t.headerComp}};this.ctrl.setComp(o,this.getGui(),this.eResize,this.eHeaderCompWrapper);var n=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",n)},e.prototype.destroyHeaderComp=function(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},e.prototype.setUserCompDetails=function(t){var e=this;this.headerCompVersion++;var i=this.headerCompVersion;t.newAgStackInstance().then((function(t){return e.afterCompCreated(i,t)}))},e.prototype.afterCompCreated=function(t,e){t==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=e,this.headerCompGui=e.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(e)},e.TEMPLATE='<div class="ag-header-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>',rp([br("eResize")],e.prototype,"eResize",void 0),rp([br("eHeaderCompWrapper")],e.prototype,"eHeaderCompWrapper",void 0),rp([ut],e.prototype,"postConstruct",null),rp([ct],e.prototype,"destroyHeaderComp",null),e}(Su),ap=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),lp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},up=function(t){function e(i){return t.call(this,e.TEMPLATE,i)||this}return ap(e,t),e.prototype.postConstruct=function(){var t=this,e=this.getGui(),i=function(t,i){return void 0!=i?e.setAttribute(t,i):e.removeAttribute(t)};e.setAttribute("col-id",this.ctrl.getColId());var o={addOrRemoveCssClass:function(e,i){return t.addOrRemoveCssClass(e,i)},setResizableDisplayed:function(e){return Uo(t.eResize,e)},setWidth:function(t){return e.style.width=t},setAriaExpanded:function(t){return i("aria-expanded",t)},setUserCompDetails:function(e){return t.setUserCompDetails(e)}};this.ctrl.setComp(o,e,this.eResize)},e.prototype.setUserCompDetails=function(t){var e=this;t.newAgStackInstance().then((function(t){return e.afterHeaderCompCreated(t)}))},e.prototype.afterHeaderCompCreated=function(t){var e=this,i=function(){return e.destroyBean(t)};if(this.isAlive()){var o=this.getGui(),n=t.getGui();o.appendChild(n),this.addDestroyFunc(i),this.ctrl.setDragSource(o)}else i()},e.TEMPLATE='<div class="ag-header-group-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',lp([pt("userComponentFactory")],e.prototype,"userComponentFactory",void 0),lp([br("eResize")],e.prototype,"eResize",void 0),lp([ut],e.prototype,"postConstruct",null),e}(Su),cp=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),hp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};(function(t){t["COLUMN_GROUP"]="group",t["COLUMN"]="column",t["FLOATING_FILTER"]="filter"})(Uh||(Uh={}));var pp,dp=function(t){function e(e){var i=t.call(this)||this;return i.headerComps={},i.ctrl=e,i.setTemplate('<div class="'+i.ctrl.getHeaderRowClass()+'" role="row"></div>'),i}return cp(e,t),e.prototype.init=function(){var t=this;this.getGui().style.transform=this.ctrl.getTransform(),ji(this.getGui(),this.ctrl.getAriaRowIndex());var e={setHeight:function(e){return t.getGui().style.height=e},setTop:function(e){return t.getGui().style.top=e},setHeaderCtrls:function(e,i){return t.setHeaderCtrls(e,i)},setWidth:function(e){return t.getGui().style.width=e}};this.ctrl.setComp(e)},e.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([],!1)},e.prototype.setHeaderCtrls=function(t,e){var i=this;if(this.isAlive()){var o=this.headerComps;if(this.headerComps={},t.forEach((function(t){var e=t.getInstanceId(),n=o[e];delete o[e],null==n&&(n=i.createHeaderComp(t),i.getGui().appendChild(n.getGui())),i.headerComps[e]=n})),C(o,(function(t,e){i.getGui().removeChild(e.getGui()),i.destroyBean(e)})),e){var n=P(this.headerComps);n.sort((function(t,e){var i=t.getCtrl().getColumnGroupChild().getLeft(),o=e.getCtrl().getColumnGroupChild().getLeft();return i-o}));var r=n.map((function(t){return t.getGui()}));gn(this.getGui(),r)}}},e.prototype.createHeaderComp=function(t){var e;switch(this.ctrl.getType()){case Uh.COLUMN_GROUP:e=new up(t);break;case Uh.FLOATING_FILTER:e=new Ou(t);break;default:e=new sp(t);break}return this.createBean(e),e.setParentComponent(this),e},hp([ut],e.prototype,"init",null),hp([ct],e.prototype,"destroyHeaderCtrls",null),e}(vr),fp=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),gp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},yp=0,_p=function(t){function e(e,i){var o=t.call(this)||this;return o.lastFocusEvent=null,o.columnGroupChild=e,o.parentRowCtrl=i,o.instanceId=e.getUniqueId()+"-"+yp++,o}return fp(e,t),e.prototype.shouldStopEventPropagation=function(t){var e=this.focusService.getFocusedHeader(),i=e.headerRowIndex,o=e.column;return zn(this.gridOptionsService,t,i,o)},e.prototype.getWrapperHasFocus=function(){var t=this.gridOptionsService.getDocument(),e=t.activeElement;return e===this.eGui},e.prototype.setGui=function(t){this.eGui=t,this.addDomData()},e.prototype.handleKeyDown=function(t){var e=this.getWrapperHasFocus();switch(t.key){case Nn.PAGE_DOWN:case Nn.PAGE_UP:case Nn.PAGE_HOME:case Nn.PAGE_END:e&&t.preventDefault()}},e.prototype.addDomData=function(){var t=this,i=e.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,i,this),this.addDestroyFunc((function(){return t.gridOptionsService.setDomData(t.eGui,i,null)}))},e.prototype.getGui=function(){return this.eGui},e.prototype.focus=function(t){return!!this.eGui&&(this.lastFocusEvent=t||null,this.eGui.focus(),!0)},e.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},e.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},e.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.getColumnGroupChild=function(){return this.columnGroupChild},e.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",gp([pt("focusService")],e.prototype,"focusService",void 0),gp([pt("beans")],e.prototype,"beans",void 0),gp([pt("userComponentFactory")],e.prototype,"userComponentFactory",void 0),e}(le),mp=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),vp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},bp=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.columnOrGroup=e,r.eCell=i,r.ariaEl=r.eCell.querySelector("[role=columnheader]")||r.eCell,r.colsSpanning=n,r.beans=o,r}return mp(e,t),e.prototype.setColsSpanning=function(t){this.colsSpanning=t,this.onLeftChanged()},e.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?Dt(this.colsSpanning):this.columnOrGroup},e.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,xt.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))},e.prototype.setLeftFirstTime=function(){var t=this.beans.gridOptionsService.is("suppressColumnMoveAnimation"),e=s(this.columnOrGroup.getOldLeft()),i=this.beans.columnAnimationService.isActive()&&e&&!t;i?this.animateInLeft():this.onLeftChanged()},e.prototype.animateInLeft=function(){var t=this,e=this.getColumnOrGroup(),i=e.getLeft(),o=e.getOldLeft(),n=this.modifyLeftForPrintLayout(e,o),r=this.modifyLeftForPrintLayout(e,i);this.setLeft(n),this.actualLeft=r,this.beans.columnAnimationService.executeNextVMTurn((function(){t.actualLeft===r&&t.setLeft(r)}))},e.prototype.onLeftChanged=function(){var t=this.getColumnOrGroup(),e=t.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(t,e),this.setLeft(this.actualLeft)},e.prototype.modifyLeftForPrintLayout=function(t,e){var i=this.beans.gridOptionsService.isDomLayout("print");if(!i)return e;if("left"===t.getPinned())return e;var o=this.beans.columnModel.getDisplayedColumnsLeftWidth();if("right"===t.getPinned()){var n=this.beans.columnModel.getBodyContainerWidth();return o+n+e}return o+e},e.prototype.setLeft=function(t){var e;if(s(t)&&(this.eCell.style.left=t+"px"),this.columnOrGroup instanceof xt)e=this.columnOrGroup;else{var i=this.columnOrGroup,o=i.getLeafColumns();if(!o.length)return;o.length>1&&Wi(this.ariaEl,o.length),e=o[0]}var n=this.beans.columnModel.getAriaColumnIndex(e);$i(this.ariaEl,n)},vp([ut],e.prototype,"postConstruct",null),e}(le),Cp=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),wp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Sp=function(t){function e(e,i){var o=t.call(this)||this;return o.columns=e,o.element=i,o}return Cp(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.is("columnHoverHighlight")&&this.addMouseHoverListeners()},e.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},e.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},e.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},wp([pt("columnHoverService")],e.prototype,"columnHoverService",void 0),wp([ut],e.prototype,"postConstruct",null),e}(le),Ep=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),xp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Op=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.iconCreated=!1,o.column=e,o}return Ep(e,t),e.prototype.setComp=function(e,i,o,n){t.prototype.setGui.call(this,i),this.comp=e,this.eButtonShowMainFilter=o,this.eFloatingFilterBody=n,this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,xt.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))},e.prototype.setupActive=function(){var t=this.column.getColDef(),e=!!t.filter,i=!!t.floatingFilter;this.active=e&&i},e.prototype.setupUi=function(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),this.active&&!this.iconCreated){var t=Mn("filter",this.gridOptionsService,this.column);t&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(t))}},e.prototype.setupFocus=function(){this.createManagedBean(new Ar(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},e.prototype.setupAria=function(){var t=this.localeService.getLocaleTextFunc();Oi(this.eButtonShowMainFilter,t("ariaFilterMenuOpen","Open Filter Menu"))},e.prototype.onTabKeyDown=function(t){var e=this.gridOptionsService.getDocument(),i=e.activeElement,o=i===this.eGui;if(!o){var n=this.focusService.findNextFocusableElement(this.eGui,null,t.shiftKey);if(n)return this.beans.headerNavigationService.scrollToColumn(this.column),t.preventDefault(),void n.focus();var r=this.findNextColumnWithFloatingFilter(t.shiftKey);r&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:r},event:t})&&t.preventDefault()}},e.prototype.findNextColumnWithFloatingFilter=function(t){var e=this.beans.columnModel,i=this.column;do{if(i=t?e.getDisplayedColBefore(i):e.getDisplayedColAfter(i),!i)break}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i},e.prototype.handleKeyDown=function(e){t.prototype.handleKeyDown.call(this,e);var i=this.getWrapperHasFocus();switch(e.key){case Nn.UP:case Nn.DOWN:i||e.preventDefault();case Nn.LEFT:case Nn.RIGHT:if(i)return;e.stopPropagation();case Nn.ENTER:i&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case Nn.ESCAPE:i||this.eGui.focus()}},e.prototype.onFocusIn=function(t){var e=this.eGui.contains(t.relatedTarget);if(!e){var i=!!t.relatedTarget&&!t.relatedTarget.classList.contains("ag-floating-filter"),o=!!t.relatedTarget&&Yo(t.relatedTarget,"ag-floating-filter");if(i&&o&&t.target===this.eGui){var n=this.lastFocusEvent,r=!(!n||n.key!==Nn.TAB);if(n&&r){var s=n.shiftKey;this.focusService.focusInto(this.eGui,s)}}var a=this.getRowIndex();this.beans.focusService.setFocusedHeader(a,this.column)}},e.prototype.setupHover=function(){var t=this;this.createManagedBean(new Sp([this.column],this.eGui));var e=function(){if(t.gridOptionsService.is("columnHoverHighlight")){var e=t.columnHoverService.isHovered(t.column);t.comp.addOrRemoveCssClass("ag-column-hover",e)}};this.addManagedListener(this.eventService,ge.EVENT_COLUMN_HOVER_CHANGED,e),e()},e.prototype.setupLeft=function(){var t=new bp(this.column,this.eGui,this.beans);this.createManagedBean(t)},e.prototype.setupFilterButton=function(){var t=this.column.getColDef();this.suppressFilterButton=!!t.floatingFilterComponentParams&&!!t.floatingFilterComponentParams.suppressFilterButton},e.prototype.setupUserComp=function(){var t=this;if(this.active){var e=this.filterManager.getFloatingFilterCompDetails(this.column,(function(){return t.showParentFilter()}));e&&this.setCompDetails(e)}},e.prototype.setCompDetails=function(t){this.userCompDetails=t,this.comp.setCompDetails(t)},e.prototype.showParentFilter=function(){var t=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuFactory.showMenuAfterButtonClick(this.column,t,"floatingFilter","filterMenuTab",["filterMenuTab"])},e.prototype.setupSyncWithFilter=function(){var t=this;if(this.active){var e=function(e){var i=t.comp.getFloatingFilterComp();i&&i.then((function(i){if(i){var o=t.filterManager.getCurrentFloatingFilterParentModel(t.column);i.onParentModelChanged(o,e)}}))};this.destroySyncListener=this.addManagedListener(this.column,xt.EVENT_FILTER_CHANGED,e),this.filterManager.isFilterActive(this.column)&&e(null)}},e.prototype.setupWidth=function(){var t=this,e=function(){var e=t.column.getActualWidth()+"px";t.comp.setWidth(e)};this.addManagedListener(this.column,xt.EVENT_WIDTH_CHANGED,e),e()},e.prototype.setupFilterChangedListener=function(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,xt.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)))},e.prototype.updateFilterButton=function(){!this.suppressFilterButton&&this.comp&&this.comp.setButtonWrapperDisplayed(this.filterManager.isFilterAllowed(this.column))},e.prototype.onColDefChanged=function(){var t,e,i=this,o=this.active;this.setupActive();var n=!o&&this.active;o&&!this.active&&(null===(t=this.destroySyncListener)||void 0===t||t.call(this),null===(e=this.destroyFilterChangedListener)||void 0===e||e.call(this));var r=this.active?this.filterManager.getFloatingFilterCompDetails(this.column,(function(){return i.showParentFilter()})):null,s=this.comp.getFloatingFilterComp();s&&r?s.then((function(t){var e;!t||i.filterManager.areFilterCompsDifferent(null!==(e=i.userCompDetails)&&void 0!==e?e:null,r)?i.updateCompDetails(r,n):i.updateFloatingFilterParams(r)})):this.updateCompDetails(r,n)},e.prototype.updateCompDetails=function(t,e){this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),e&&(this.setupSyncWithFilter(),this.setupFilterChangedListener())},e.prototype.updateFloatingFilterParams=function(t){var e;if(t){var i=t.params;null===(e=this.comp.getFloatingFilterComp())||void 0===e||e.then((function(t){(null===t||void 0===t?void 0:t.onParamsUpdated)&&"function"===typeof t.onParamsUpdated&&t.onParamsUpdated(i)}))}},xp([pt("filterManager")],e.prototype,"filterManager",void 0),xp([pt("columnHoverService")],e.prototype,"columnHoverService",void 0),xp([pt("menuFactory")],e.prototype,"menuFactory",void 0),e}(_p),Rp=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ip=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Tp=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;return s.pinned=e,s.column=i,s.eResize=o,s.comp=n,s.ctrl=r,s}return Rp(e,t),e.prototype.postConstruct=function(){var t,e,i=this,o=this.column.getColDef(),n=[],r=function(){if(Uo(i.eResize,t),t){var o=i.horizontalResizeService.addResizeBar({eResizeBar:i.eResize,onResizeStart:i.onResizeStart.bind(i),onResizing:i.onResizing.bind(i,!1),onResizeEnd:i.onResizing.bind(i,!0)});if(n.push(o),e){var r=i.gridOptionsService.is("skipHeaderOnAutoSize"),s=function(){i.columnModel.autoSizeColumn(i.column,r,"uiColumnResized")};i.eResize.addEventListener("dblclick",s);var a=new oa(i.eResize);a.addEventListener(oa.EVENT_DOUBLE_TAP,s),i.addDestroyFunc((function(){i.eResize.removeEventListener("dblclick",s),a.removeEventListener(oa.EVENT_DOUBLE_TAP,s),a.destroy()}))}}},s=function(){n.forEach((function(t){return t()})),n.length=0},a=function(){var n=i.column.isResizable(),a=!i.gridOptionsService.is("suppressAutoSize")&&!o.suppressAutoSize,l=n!==t||a!==e;l&&(t=n,e=a,s(),r())};a(),this.addDestroyFunc(s),this.ctrl.addRefreshFunction(a)},e.prototype.onResizing=function(t,e){var i=this.normaliseResizeAmount(e),o=[{key:this.column,newWidth:this.resizeStartWidth+i}];this.columnModel.setColumnWidths(o,this.resizeWithShiftKey,t,"uiColumnResized"),t&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},e.prototype.onResizeStart=function(t){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=t,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},e.prototype.normaliseResizeAmount=function(t){var e=t,i="left"!==this.pinned,o="right"===this.pinned;return this.gridOptionsService.is("enableRtl")?i&&(e*=-1):o&&(e*=-1),e},Ip([pt("horizontalResizeService")],e.prototype,"horizontalResizeService",void 0),Ip([pt("columnModel")],e.prototype,"columnModel",void 0),Ip([ut],e.prototype,"postConstruct",null),e}(le),Pp=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Dp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},kp=function(t){function e(e){var i=t.call(this)||this;i.cbSelectAllVisible=!1,i.processingEventFromCheckbox=!1,i.column=e;var o=e.getColDef();return i.filteredOnly=!!(null===o||void 0===o?void 0:o.headerCheckboxSelectionFilteredOnly),i.currentPageOnly=!!(null===o||void 0===o?void 0:o.headerCheckboxSelectionCurrentPageOnly),i}return Pp(e,t),e.prototype.onSpaceKeyDown=function(t){var e=this.cbSelectAll,i=this.gridOptionsService.getDocument();e.isDisplayed()&&!e.getGui().contains(i.activeElement)&&(t.preventDefault(),e.setValue(!e.getValue()))},e.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},e.prototype.setComp=function(t){this.headerCellCtrl=t,this.cbSelectAll=this.createManagedBean(new as),this.cbSelectAll.addCssClass("ag-header-select-all"),Ci(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,ge.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,ge.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),Ai(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},e.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()},e.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},e.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},e.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var t=this.selectionService.getSelectAllState(this.filteredOnly,this.currentPageOnly);this.cbSelectAll.setValue(t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},e.prototype.refreshSelectAllLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=this.cbSelectAll.getValue(),i=e?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),o=t("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",o+" ("+i+")"):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(o+" ("+i+")"),this.headerCellCtrl.refreshAriaDescription()},e.prototype.checkSelectionType=function(t){var e="multiple"===this.gridOptionsService.get("rowSelection");return!!e||(console.warn("AG Grid: "+t+" is only available if using 'multiple' rowSelection."),!1)},e.prototype.checkRightRowModelType=function(t){var e=this.rowModel.getType(),i="clientSide"===e||"serverSide"===e;return!!i||(console.warn("AG Grid: "+t+" is only available if using 'clientSide' or 'serverSide' rowModelType, you are using "+e+"."),!1)},e.prototype.onCbSelectAll=function(){if(!this.processingEventFromCheckbox&&this.cbSelectAllVisible){var t=this.cbSelectAll.getValue(),e="uiSelectAll";this.currentPageOnly?e="uiSelectAllCurrentPage":this.filteredOnly&&(e="uiSelectAllFiltered");var i={source:e,justFiltered:this.filteredOnly,justCurrentPage:this.currentPageOnly};t?this.selectionService.selectAllRowNodes(i):this.selectionService.deselectAllRowNodes(i)}},e.prototype.isCheckboxSelection=function(){var t=this.column.getColDef().headerCheckboxSelection;if("function"===typeof t){var e=t,i={column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi,context:this.gridOptionsService.context};t=e(i)}return!!t&&(this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"))},Dp([pt("gridApi")],e.prototype,"gridApi",void 0),Dp([pt("columnApi")],e.prototype,"columnApi",void 0),Dp([pt("rowModel")],e.prototype,"rowModel",void 0),Dp([pt("selectionService")],e.prototype,"selectionService",void 0),e}(le),Ap=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Lp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};(function(t){t["TAB_GUARD"]="ag-tab-guard",t["TAB_GUARD_TOP"]="ag-tab-guard-top",t["TAB_GUARD_BOTTOM"]="ag-tab-guard-bottom"})(pp||(pp={}));var Mp,Fp=function(t){function e(e){var i=t.call(this)||this;i.skipTabGuardFocus=!1;var o=e.comp,n=e.eTopGuard,r=e.eBottomGuard,s=e.focusInnerElement,a=e.onFocusIn,l=e.onFocusOut,u=e.shouldStopEventPropagation,c=e.onTabKeyDown,h=e.handleKeyDown,p=e.eFocusableElement;return i.comp=o,i.eTopGuard=n,i.eBottomGuard=r,i.providedFocusInnerElement=s,i.eFocusableElement=p,i.providedFocusIn=a,i.providedFocusOut=l,i.providedShouldStopEventPropagation=u,i.providedOnTabKeyDown=c,i.providedHandleKeyDown=h,i}return Ap(e,t),e.prototype.postConstruct=function(){var t=this;this.createManagedBean(new Ar(this.eFocusableElement,{shouldStopEventPropagation:function(){return t.shouldStopEventPropagation()},onTabKeyDown:function(e){return t.onTabKeyDown(e)},handleKeyDown:function(e){return t.handleKeyDown(e)},onFocusIn:function(e){return t.onFocusIn(e)},onFocusOut:function(e){return t.onFocusOut(e)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach((function(e){return t.addManagedListener(e,"focus",t.onFocus.bind(t))}))},e.prototype.handleKeyDown=function(t){this.providedHandleKeyDown&&this.providedHandleKeyDown(t)},e.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},e.prototype.shouldStopEventPropagation=function(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()},e.prototype.activateTabGuards=function(){var t=this.gridOptionsService.getNum("tabIndex")||0;this.comp.setTabIndex(t.toString())},e.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},e.prototype.onFocus=function(t){if(this.skipTabGuardFocus)this.skipTabGuardFocus=!1;else{var e=t.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(e):this.focusInnerElement(e)}},e.prototype.onFocusIn=function(t){this.providedFocusIn&&this.providedFocusIn(t)||this.deactivateTabGuards()},e.prototype.onFocusOut=function(t){this.providedFocusOut&&this.providedFocusOut(t)||this.eFocusableElement.contains(t.relatedTarget)||this.activateTabGuards()},e.prototype.onTabKeyDown=function(t){var e=this;if(this.providedOnTabKeyDown)this.providedOnTabKeyDown(t);else if(!t.defaultPrevented){var i=this.tabGuardsAreActive();i&&this.deactivateTabGuards();var o=this.getNextFocusableElement(t.shiftKey);i&&setTimeout((function(){return e.activateTabGuards()}),0),o&&(o.focus(),t.preventDefault())}},e.prototype.focusInnerElement=function(t){void 0===t&&(t=!1);var e=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(e.splice(0,1),e.splice(e.length-1,1)),e.length&&e[t?e.length-1:0].focus({preventScroll:!0})},e.prototype.getNextFocusableElement=function(t){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,t)},e.prototype.forceFocusOutOfContainer=function(t){void 0===t&&(t=!1);var e=t?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,e.focus()},Lp([pt("focusService")],e.prototype,"focusService",void 0),Lp([ut],e.prototype,"postConstruct",null),e}(le),Np=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Vp=function(){return Vp=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Vp.apply(this,arguments)},Bp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Gp=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},jp=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},Hp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return Np(e,t),i=e,e.addKeyboardModeEvents=function(t,e){var o=i.instancesMonitored.get(t);o&&o.length>0?-1===o.indexOf(e)&&o.push(e):(i.instancesMonitored.set(t,[e]),t.addEventListener("keydown",i.toggleKeyboardMode),t.addEventListener("mousedown",i.toggleKeyboardMode))},e.removeKeyboardModeEvents=function(t,e){var o=i.instancesMonitored.get(t),n=[];o&&o.length&&(n=jp([],Gp(o)).filter((function(t){return t!==e})),i.instancesMonitored.set(t,n)),0===n.length&&(t.removeEventListener("keydown",i.toggleKeyboardMode),t.removeEventListener("mousedown",i.toggleKeyboardMode))},e.toggleKeyboardMode=function(t){var e=i.keyboardModeActive,o="keydown"===t.type;if((!o||!(t.ctrlKey||t.metaKey||t.altKey))&&!(e&&o||!e&&!o)){i.keyboardModeActive=o;var n=t.target.ownerDocument;if(n){var r=i.instancesMonitored.get(n);r&&r.forEach((function(t){t.dispatchEvent({type:o?ge.EVENT_KEYBOARD_FOCUS:ge.EVENT_MOUSE_FOCUS})}))}}},e.prototype.init=function(){var t=this,e=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,ge.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,ge.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_GROUP_OPENED,e),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.ctrlsService.whenReady((function(e){t.gridCtrl=e.gridCtrl;var o=t.gridOptionsService.getDocument();i.addKeyboardModeEvents(o,t.gridCtrl),t.addDestroyFunc((function(){return t.unregisterGridCompController(t.gridCtrl)}))}))},e.prototype.unregisterGridCompController=function(t){var e=this.gridOptionsService.getDocument();i.removeKeyboardModeEvents(e,t)},e.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var t=this.focusedCellPosition.column,e=this.columnModel.getGridColumn(t.getId());t!==e&&this.clearFocusedCell()}},e.prototype.isKeyboardMode=function(){return i.keyboardModeActive},e.prototype.getFocusCellToUseAfterRefresh=function(){var t=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(t.activeElement,$c.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},e.prototype.getFocusHeaderToUseAfterRefresh=function(){var t=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(t.activeElement,_p.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},e.prototype.isDomDataMissingInHierarchy=function(t,e){var i=t;while(i){var o=this.gridOptionsService.getDomData(i,e);if(o)return!1;i=i.parentNode}return!0},e.prototype.getFocusedCell=function(){return this.focusedCellPosition},e.prototype.shouldRestoreFocus=function(t){var e=this;return!!this.isCellRestoreFocused(t)&&(setTimeout((function(){e.restoredFocusedCellPosition=null}),0),!0)},e.prototype.isCellRestoreFocused=function(t){return null!=this.restoredFocusedCellPosition&&this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)},e.prototype.setRestoreFocusedCell=function(t){"react"===this.getFrameworkOverrides().renderingEngine&&(this.restoredFocusedCellPosition=t)},e.prototype.getFocusEventParams=function(){var t=this.focusedCellPosition,e=t.rowIndex,i=t.rowPinned,o=t.column,n={rowIndex:e,rowPinned:i,column:o,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:i});return r&&(n.isFullWidthCell=r.isFullWidth()),n},e.prototype.clearFocusedCell=function(){if(this.restoredFocusedCellPosition=null,null!=this.focusedCellPosition){var t=Vp({type:ge.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(t)}},e.prototype.setFocusedCell=function(t){var e=t.column,i=t.rowIndex,o=t.rowPinned,n=t.forceBrowserFocus,s=void 0!==n&&n,a=t.preventScrollOnBrowserFocus,l=void 0!==a&&a,u=this.columnModel.getGridColumn(e);if(u){this.focusedCellPosition=u?{rowIndex:i,rowPinned:r(o),column:u}:null;var c=Vp(Vp({type:ge.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:s,preventScrollOnBrowserFocus:l,floating:null});this.eventService.dispatchEvent(c)}else this.focusedCellPosition=null},e.prototype.isCellFocused=function(t){return null!=this.focusedCellPosition&&this.cellPositionUtils.equals(t,this.focusedCellPosition)},e.prototype.isRowNodeFocused=function(t){return this.isRowFocused(t.rowIndex,t.rowPinned)},e.prototype.isHeaderWrapperFocused=function(t){if(null==this.focusedHeaderPosition)return!1;var e=t.getColumnGroupChild(),i=t.getRowIndex(),o=t.getPinned(),n=this.focusedHeaderPosition,r=n.column,s=n.headerRowIndex;return e===r&&i===s&&o==r.getPinned()},e.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},e.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},e.prototype.setFocusedHeader=function(t,e){this.focusedHeaderPosition={headerRowIndex:t,column:e}},e.prototype.focusHeaderPosition=function(t){var e=t.direction,i=t.fromTab,o=t.allowUserOverride,n=t.event,r=t.fromCell,s=t.headerPosition;if(r&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(s);if(o){var a=this.getFocusedHeader(),l=this.headerNavigationService.getHeaderRowCount();if(i){var u=this.gridOptionsService.getCallback("tabToNextHeader");if(u){var c={backwards:"Before"===e,previousHeaderPosition:a,nextHeaderPosition:s,headerRowCount:l};s=u(c)}}else{u=this.gridOptionsService.getCallback("navigateToNextHeader");if(u&&n){var h={key:n.key,previousHeaderPosition:a,nextHeaderPosition:s,headerRowCount:l,event:n};s=u(h)}}}if(!s)return!1;if(-1===s.headerRowIndex)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(s):this.focusGridView(s.column);this.headerNavigationService.scrollToColumn(s.column,e);var p=this.ctrlsService.getHeaderRowContainerCtrl(s.column.getPinned()),d=p.focusHeader(s.headerRowIndex,s.column,n);return d},e.prototype.focusFirstHeader=function(){var t=this.columnModel.getAllDisplayedColumns()[0];return!!t&&(t.getParent()&&(t=this.columnModel.getColumnGroupAtLevel(t,0)),this.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:t}}))},e.prototype.focusLastHeader=function(t){var e=this.headerNavigationService.getHeaderRowCount()-1,i=Dt(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:e,column:i},event:t})},e.prototype.focusPreviousFromFirstCell=function(t){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)},e.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},e.prototype.isRowFocused=function(t,e){return null!=this.focusedCellPosition&&(this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===r(e))},e.prototype.findFocusableElements=function(t,e,i){void 0===i&&(i=!1);var o=Ho,n=$o;e&&(n+=", "+e),i&&(n+=', [tabindex="-1"]');var r=Array.prototype.slice.apply(t.querySelectorAll(o)),s=Array.prototype.slice.apply(t.querySelectorAll(n));if(!s.length)return r;var a=function(t,e){return t.filter((function(t){return-1===e.indexOf(t)}))};return a(r,s)},e.prototype.focusInto=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var o=this.findFocusableElements(t,null,i),n=e?Dt(o):o[0];return!!n&&(n.focus({preventScroll:!0}),!0)},e.prototype.findFocusableElementBeforeTabGuard=function(t,e){if(!e)return null;var i=this.findFocusableElements(t),o=i.indexOf(e);if(-1===o)return null;for(var n=-1,r=o-1;r>=0;r--)if(i[r].classList.contains(pp.TAB_GUARD_TOP)){n=r;break}return n<=0?null:i[n-1]},e.prototype.findNextFocusableElement=function(t,e,i){void 0===t&&(t=this.eGridDiv);var o,n=this.findFocusableElements(t,e?':not([tabindex="-1"])':null),r=this.gridOptionsService.getDocument(),s=r.activeElement;o=e?n.findIndex((function(t){return t.contains(s)})):n.indexOf(s);var a=o+(i?-1:1);return a<0||a>=n.length?null:n[a]},e.prototype.isTargetUnderManagedComponent=function(t,e){if(!e)return!1;var i=t.querySelectorAll("."+Ar.FOCUS_MANAGED_CLASS);if(!i.length)return!1;for(var o=0;o<i.length;o++)if(i[o].contains(e))return!0;return!1},e.prototype.findTabbableParent=function(t,e){void 0===e&&(e=5);var i=0;while(t&&null===fo(t)&&++i<=e)t=t.parentElement;return null===fo(t)?null:t},e.prototype.focusGridView=function(t,e){if(this.gridOptionsService.is("suppressCellFocus"))return e?this.focusLastHeader():this.focusNextGridCoreContainer(!1);var i=e?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!i)return!1;var o=i.rowIndex,n=i.rowPinned,s=this.getFocusedHeader();if(!t&&s&&(t=s.column),null==o||!t)return!1;if(this.navigationService.ensureCellVisible({rowIndex:o,column:t,rowPinned:n}),this.setFocusedCell({rowIndex:o,column:t,rowPinned:r(n),forceBrowserFocus:!0}),this.rangeService){var a={rowIndex:o,rowPinned:n,column:t};this.rangeService.setRangeToCell(a)}return!0},e.prototype.focusNextGridCoreContainer=function(t,e){return void 0===e&&(e=!1),!(e||!this.gridCtrl.focusNextInnerContainer(t))||((e||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)},e.prototype.focusAdvancedFilter=function(t){return this.advancedFilterFocusColumn=null===t||void 0===t?void 0:t.column,this.advancedFilterService.getCtrl().focusHeaderComp()},e.prototype.focusNextFromAdvancedFilter=function(t,e){var i,o,n=null!==(i=e?void 0:this.advancedFilterFocusColumn)&&void 0!==i?i:null===(o=this.columnModel.getAllDisplayedColumns())||void 0===o?void 0:o[0];return t?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(n)},e.prototype.clearAdvancedFilterColumn=function(){this.advancedFilterFocusColumn=void 0},e.AG_KEYBOARD_FOCUS="ag-keyboard-focus",e.keyboardModeActive=!1,e.instancesMonitored=new Map,Bp([pt("eGridDiv")],e.prototype,"eGridDiv",void 0),Bp([pt("columnModel")],e.prototype,"columnModel",void 0),Bp([pt("headerNavigationService")],e.prototype,"headerNavigationService",void 0),Bp([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),Bp([pt("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),Bp([pt("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),Bp([dt("rangeService")],e.prototype,"rangeService",void 0),Bp([pt("navigationService")],e.prototype,"navigationService",void 0),Bp([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Bp([pt("filterManager")],e.prototype,"filterManager",void 0),Bp([dt("advancedFilterService")],e.prototype,"advancedFilterService",void 0),Bp([ut],e.prototype,"init",null),e=i=Bp([ht("focusService")],e),e}(le),$p=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Wp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Up=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.refreshFunctions=[],o.userHeaderClasses=new Set,o.ariaDescriptionProperties=new Map,o.column=e,o}return $p(e,t),e.prototype.setComp=function(e,i,o,n){var r=this;t.prototype.setGui.call(this,i),this.comp=e,this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(n),this.addColumnHoverListener(),this.setupFilterCss(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.createManagedBean(new Tp(this.getPinned(),this.column,o,e,this)),this.createManagedBean(new Sp([this.column],i)),this.createManagedBean(new bp(this.column,i,this.beans)),this.createManagedBean(new Ar(i,{shouldStopEventPropagation:function(t){return r.shouldStopEventPropagation(t)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addMouseDownListenerIfNeeded(i),this.addManagedListener(this.column,xt.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onHeaderHeightChanged.bind(this))},e.prototype.addMouseDownListenerIfNeeded=function(t){var e=this;if(so()){var i=["mousedown","touchstart"],o=this.gridOptionsService.getDocument();i.forEach((function(i){e.addManagedListener(t,i,(function(e){var i=o.activeElement;i===t||t.contains(i)||(t.focus(),Hp.toggleKeyboardMode(e))}))}))}},e.prototype.setupUserComp=function(){var t=this.lookupUserCompDetails();this.setCompDetails(t)},e.prototype.setCompDetails=function(t){this.userCompDetails=t,this.comp.setUserCompDetails(t)},e.prototype.lookupUserCompDetails=function(){var t=this.createParams(),e=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(e,t)},e.prototype.createParams=function(){var t=this,e=this.column.getColDef(),i={column:this.column,displayName:this.displayName,enableSorting:e.sortable,enableMenu:this.menuEnabled,showColumnMenu:function(e){t.gridApi.showColumnMenuAfterButtonClick(t.column,e)},progressSort:function(e){t.sortController.progressSort(t.column,!!e,"uiColumnSorted")},setSort:function(e,i){t.sortController.setSortForColumn(t.column,e,!!i,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context,eGridHeader:this.getGui()};return i},e.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new kp(this.column)),this.selectAllFeature.setComp(this)},e.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},e.prototype.handleKeyDown=function(e){t.prototype.handleKeyDown.call(this,e),e.key===Nn.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===Nn.ENTER&&this.onEnterKeyDown(e)},e.prototype.onEnterKeyDown=function(t){var e=this.comp.getUserCompInstance();if(e)if(t.ctrlKey||t.metaKey)this.menuEnabled&&e.showMenu&&(t.preventDefault(),e.showMenu());else if(this.sortable){var i=t.shiftKey;this.sortController.progressSort(this.column,i,"uiColumnSorted")}},e.prototype.isMenuEnabled=function(){return this.menuEnabled},e.prototype.onFocusIn=function(t){if(!this.getGui().contains(t.relatedTarget)){var e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column)}this.setActiveHeader(!0)},e.prototype.onFocusOut=function(t){this.getGui().contains(t.relatedTarget)||this.setActiveHeader(!1)},e.prototype.setupTooltip=function(){var t=this,e={getColumn:function(){return t.column},getColDef:function(){return t.column.getColDef()},getGui:function(){return t.eGui},getLocation:function(){return"header"},getTooltipValue:function(){var e=t.column.getColDef().headerTooltip;return e}},i=this.createManagedBean(new dc(e,this.beans));i.setComp(this.eGui),this.refreshFunctions.push((function(){return i.refreshToolTip()}))},e.prototype.setupClassesFromColDef=function(){var t=this,e=function(){var e=t.column.getColDef(),i=op.getHeaderClassesFromColDef(e,t.gridOptionsService,t.column,null),o=t.userHeaderClasses;t.userHeaderClasses=new Set(i),i.forEach((function(e){o.has(e)?o.delete(e):t.comp.addOrRemoveCssClass(e,!0)})),o.forEach((function(e){return t.comp.addOrRemoveCssClass(e,!1)}))};this.refreshFunctions.push(e),e()},e.prototype.setDragSource=function(t){var e=this;if(this.dragSourceElement=t,this.removeDragSource(),t&&this.draggable){var i=!this.gridOptionsService.is("suppressDragLeaveHidesColumns");this.moveDragSource={type:Gs.HeaderCell,eElement:t,getDefaultIconName:function(){return i?Ua.ICON_HIDE:Ua.ICON_NOT_ALLOWED},getDragItem:function(){return e.createDragItem()},dragItemName:this.displayName,onDragStarted:function(){i=!e.gridOptionsService.is("suppressDragLeaveHidesColumns"),e.column.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return e.column.setMoving(!1,"uiColumnMoved")},onGridEnter:function(t){var o;if(i){var n=(null===(o=null===t||void 0===t?void 0:t.columns)||void 0===o?void 0:o.filter((function(t){return!t.getColDef().lockVisible})))||[];e.columnModel.setColumnsVisible(n,!0,"uiColumnMoved")}},onGridExit:function(t){var o;if(i){var n=(null===(o=null===t||void 0===t?void 0:t.columns)||void 0===o?void 0:o.filter((function(t){return!t.getColDef().lockVisible})))||[];e.columnModel.setColumnsVisible(n,!1,"uiColumnMoved")}}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)}},e.prototype.createDragItem=function(){var t={};return t[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:t}},e.prototype.removeDragSource=function(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)},e.prototype.onColDefChanged=function(){this.refresh()},e.prototype.updateState=function(){var t=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!t.suppressMenu,this.sortable=t.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},e.prototype.addRefreshFunction=function(t){this.refreshFunctions.push(t)},e.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach((function(t){return t()}))},e.prototype.refreshHeaderComp=function(){var t=this.lookupUserCompDetails(),e=this.comp.getUserCompInstance(),i=null!=e&&this.userCompDetails.componentClass==t.componentClass,o=!!i&&this.attemptHeaderCompRefresh(t.params);o?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)},e.prototype.attemptHeaderCompRefresh=function(t){var e=this.comp.getUserCompInstance();if(!e)return!1;if(!e.refresh)return!1;var i=e.refresh(t);return i},e.prototype.calculateDisplayName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)},e.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},e.prototype.workOutDraggable=function(){var t=this.column.getColDef(),e=this.gridOptionsService.is("suppressMovableColumns"),i=!e&&!t.suppressMovable&&!t.lockPosition;return!!i||!!t.enableRowGroup||!!t.enablePivot},e.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},e.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},e.prototype.onColumnValueChanged=function(){this.checkDisplayName()},e.prototype.setupWidth=function(){var t=this,e=function(){var e=t.column.getActualWidth();t.comp.setWidth(e+"px")};this.addManagedListener(this.column,xt.EVENT_WIDTH_CHANGED,e),e()},e.prototype.setupMovingCss=function(){var t=this,e=function(){t.comp.addOrRemoveCssClass("ag-header-cell-moving",t.column.isMoving())};this.addManagedListener(this.column,xt.EVENT_MOVING_CHANGED,e),e()},e.prototype.setupMenuClass=function(){var t=this,e=function(){t.comp.addOrRemoveCssClass("ag-column-menu-visible",t.column.isMenuVisible())};this.addManagedListener(this.column,xt.EVENT_MENU_VISIBLE_CHANGED,e),e()},e.prototype.setupSortableClass=function(){var t=this,e=function(){t.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!t.sortable)};e(),this.addRefreshFunction(e),this.addManagedListener(this.eventService,xt.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))},e.prototype.setupWrapTextClass=function(){var t=this,e=function(){var e=!!t.column.getColDef().wrapHeaderText;t.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};e(),this.addRefreshFunction(e)},e.prototype.onHeaderHeightChanged=function(){this.refreshSpanHeaderHeight()},e.prototype.refreshSpanHeaderHeight=function(){var t=this,e=t.eGui,i=t.column,o=t.comp,n=t.columnModel,r=t.gridOptionsService;if(i.isSpanHeaderHeight()){var s=this.getColumnGroupPaddingInfo(),a=s.numberOfParents,l=s.isSpanningTotal;o.addOrRemoveCssClass("ag-header-span-height",a>0);var u=n.getColumnHeaderRowHeight();if(0===a)return o.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),void e.style.setProperty("height",u+"px");o.addOrRemoveCssClass("ag-header-span-total",l);var c=r.is("pivotMode"),h=c?n.getPivotGroupHeaderHeight():n.getGroupHeaderHeight(),p=a*h;e.style.setProperty("top",-p+"px"),e.style.setProperty("height",u+p+"px")}},e.prototype.getColumnGroupPaddingInfo=function(){var t=this.column.getParent();if(!t||!t.isPadding())return{numberOfParents:0,isSpanningTotal:!1};var e=t.getPaddingLevel()+1,i=!0;while(t){if(!t.isPadding()){i=!1;break}t=t.getParent()}return{numberOfParents:e,isSpanningTotal:i}},e.prototype.setupAutoHeight=function(t){var e,i=this,o=function(e){if(i.isAlive()){var n=qo(i.getGui()),r=n.paddingTop,s=n.paddingBottom,a=n.borderBottomWidth,l=n.borderTopWidth,u=r+s+a+l,c=t.offsetHeight,h=c+u;if(e<5){var p=i.beans.gridOptionsService.getDocument(),d=!p||!p.contains(t),f=0==h;if(d||f)return void i.beans.frameworkOverrides.setTimeout((function(){return o(e+1)}),0)}i.columnModel.setColumnHeaderHeight(i.column,h)}},n=!1,r=function(){var t=i.column.isAutoHeaderHeight();t&&!n&&s(),!t&&n&&a()},s=function(){n=!0,o(0),i.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),e=i.resizeObserverService.observeResize(t,(function(){return o(0)}))},a=function(){n=!1,e&&e(),i.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),e=void 0};r(),this.addDestroyFunc((function(){return a()})),this.addManagedListener(this.column,xt.EVENT_WIDTH_CHANGED,(function(){return n&&o(0)})),this.addManagedListener(this.eventService,xt.EVENT_SORT_CHANGED,(function(){n&&i.beans.frameworkOverrides.setTimeout((function(){return o(0)}))})),this.addRefreshFunction(r)},e.prototype.refreshAriaSort=function(){if(this.sortable){var t=this.localeService.getLocaleTextFunc(),e=this.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(wi(e)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort."))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)},e.prototype.refreshAriaMenu=function(){if(this.menuEnabled){var t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",t("ariaMenuColumn","Press CTRL ENTER to open column menu."))}else this.setAriaDescriptionProperty("menu",null)},e.prototype.setAriaDescriptionProperty=function(t,e){null!=e?this.ariaDescriptionProperties.set(t,e):this.ariaDescriptionProperties.delete(t)},e.prototype.refreshAriaDescription=function(){var t=Array.from(this.ariaDescriptionProperties.values());this.comp.setAriaDescription(t.length?t.join(" "):void 0)},e.prototype.refreshAria=function(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaDescription()},e.prototype.addColumnHoverListener=function(){var t=this,e=function(){if(t.gridOptionsService.is("columnHoverHighlight")){var e=t.columnHoverService.isHovered(t.column);t.comp.addOrRemoveCssClass("ag-column-hover",e)}};this.addManagedListener(this.eventService,ge.EVENT_COLUMN_HOVER_CHANGED,e),e()},e.prototype.setupFilterCss=function(){var t=this,e=function(){t.comp.addOrRemoveCssClass("ag-header-cell-filtered",t.column.isFilterActive())};this.addManagedListener(this.column,xt.EVENT_FILTER_ACTIVE_CHANGED,e),e()},e.prototype.getColId=function(){return this.column.getColId()},e.prototype.addActiveHeaderMouseListeners=function(){var t=this,e=function(e){return t.setActiveHeader("mouseenter"===e.type)};this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e)},e.prototype.setActiveHeader=function(t){this.comp.addOrRemoveCssClass("ag-header-active",t)},Wp([pt("columnModel")],e.prototype,"columnModel",void 0),Wp([pt("columnHoverService")],e.prototype,"columnHoverService",void 0),Wp([pt("sortController")],e.prototype,"sortController",void 0),Wp([pt("menuFactory")],e.prototype,"menuFactory",void 0),Wp([pt("dragAndDropService")],e.prototype,"dragAndDropService",void 0),Wp([pt("resizeObserverService")],e.prototype,"resizeObserverService",void 0),Wp([pt("gridApi")],e.prototype,"gridApi",void 0),Wp([pt("columnApi")],e.prototype,"columnApi",void 0),Wp([ct],e.prototype,"removeDragSource",null),e}(_p),zp=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Kp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Yp=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.eResize=i,r.comp=e,r.pinned=o,r.columnGroup=n,r}return zp(e,t),e.prototype.postConstruct=function(){var t=this;if(this.columnGroup.isResizable()){var e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gridOptionsService.is("suppressAutoSize")){var i=this.gridOptionsService.is("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",(function(){var e=[],o=t.columnGroup.getDisplayedLeafColumns();o.forEach((function(t){t.getColDef().suppressAutoSize||e.push(t.getColId())})),e.length>0&&t.columnModel.autoSizeColumns({columns:e,skipHeader:i,stopAtGroup:t.columnGroup,source:"uiColumnResized"}),t.resizeLeafColumnsToFit("uiColumnResized")}))}}else this.comp.setResizableDisplayed(!1)},e.prototype.onResizeStart=function(t){var e=this;this.calculateInitialValues();var i=null;if(t&&(i=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),i){var o=i.getDisplayedLeafColumns();this.resizeTakeFromCols=o.filter((function(t){return t.isResizable()})),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach((function(t){return e.resizeTakeFromStartWidth+=t.getActualWidth()})),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach((function(t){return e.resizeTakeFromRatios.push(t.getActualWidth()/e.resizeTakeFromStartWidth)}))}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},e.prototype.onResizing=function(t,e,i){void 0===i&&(i="uiColumnResized");var o=this.normaliseDragChange(e),n=this.resizeStartWidth+o;this.resizeColumns(n,i,t)},e.prototype.resizeLeafColumnsToFit=function(t){var e=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup);this.calculateInitialValues(),e>this.resizeStartWidth&&this.resizeColumns(e,t,!0)},e.prototype.resizeColumns=function(t,e,i){void 0===i&&(i=!0);var o=[];if(o.push({columns:this.resizeCols,ratios:this.resizeRatios,width:t}),this.resizeTakeFromCols){var n=t-this.resizeStartWidth;o.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-n})}this.columnModel.resizeColumnSets({resizeSets:o,finished:i,source:e}),i&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},e.prototype.calculateInitialValues=function(){var t=this,e=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=e.filter((function(t){return t.isResizable()})),this.resizeStartWidth=0,this.resizeCols.forEach((function(e){return t.resizeStartWidth+=e.getActualWidth()})),this.resizeRatios=[],this.resizeCols.forEach((function(e){return t.resizeRatios.push(e.getActualWidth()/t.resizeStartWidth)}))},e.prototype.normaliseDragChange=function(t){var e=t;return this.gridOptionsService.is("enableRtl")?"left"!==this.pinned&&(e*=-1):"right"===this.pinned&&(e*=-1),e},Kp([pt("horizontalResizeService")],e.prototype,"horizontalResizeService",void 0),Kp([pt("autoWidthCalculator")],e.prototype,"autoWidthCalculator",void 0),Kp([pt("columnModel")],e.prototype,"columnModel",void 0),Kp([ut],e.prototype,"postConstruct",null),e}(le),qp=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Xp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Qp=function(t){function e(e,i){var o=t.call(this)||this;return o.removeChildListenersFuncs=[],o.columnGroup=i,o.comp=e,o}return qp(e,t),e.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,fe.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},e.prototype.addListenersToChildrenColumns=function(){var t=this;this.removeListenersOnChildrenColumns();var e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach((function(i){i.addEventListener("widthChanged",e),i.addEventListener("visibleChanged",e),t.removeChildListenersFuncs.push((function(){i.removeEventListener("widthChanged",e),i.removeEventListener("visibleChanged",e)}))}))},e.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach((function(t){return t()})),this.removeChildListenersFuncs=[]},e.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},e.prototype.onWidthChanged=function(){var t=this.columnGroup.getActualWidth();this.comp.setWidth(t+"px"),this.comp.addOrRemoveCssClass("ag-hidden",0===t)},Xp([ut],e.prototype,"postConstruct",null),e}(le),Jp=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Zp=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},td=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.columnGroup=e,o}return Jp(e,t),e.prototype.setComp=function(e,i,o){t.prototype.setGui.call(this,i),this.comp=e,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();var n=this.getParentRowCtrl().getPinned(),r=this.columnGroup.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new Sp(r,i)),this.createManagedBean(new bp(this.columnGroup,i,this.beans)),this.createManagedBean(new Qp(e,this.columnGroup)),this.groupResizeFeature=this.createManagedBean(new Yp(e,o,n,this.columnGroup)),this.createManagedBean(new Ar(i,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},e.prototype.resizeLeafColumnsToFit=function(t){this.groupResizeFeature&&this.groupResizeFeature.resizeLeafColumnsToFit(t)},e.prototype.setupUserComp=function(){var t=this,e=this.displayName,i={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:function(e){t.columnModel.setColumnGroupOpened(t.columnGroup.getProvidedColumnGroup(),e,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};if(!e){var o=this.columnGroup,n=o.getLeafColumns();while(o.getParent()&&o.getParent().getLeafColumns().length===n.length)o=o.getParent();var r=o.getColGroupDef();r&&(e=r.headerName),e||(e=n?this.columnModel.getDisplayNameForColumn(n[0],"header",!0):"")}var s=this.userComponentFactory.getHeaderGroupCompDetails(i);this.comp.setUserCompDetails(s)},e.prototype.setupTooltip=function(){var t=this,e=this.columnGroup.getColGroupDef(),i={getColumn:function(){return t.columnGroup},getGui:function(){return t.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return e&&e.headerTooltip}};e&&(i.getColDef=function(){return e});var o=this.createManagedBean(new dc(i,this.beans));o.setComp(this.eGui)},e.prototype.setupExpandable=function(){var t=this.columnGroup.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(t,Rt.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(t,Rt.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},e.prototype.refreshExpanded=function(){var t=this.columnGroup;this.expandable=t.isExpandable();var e=t.isExpanded();this.expandable?this.comp.setAriaExpanded(e?"true":"false"):this.comp.setAriaExpanded(void 0)},e.prototype.getColId=function(){return this.columnGroup.getUniqueId()},e.prototype.addClasses=function(){var t=this,e=this.columnGroup.getColGroupDef(),i=op.getHeaderClassesFromColDef(e,this.gridOptionsService,null,this.columnGroup);if(this.columnGroup.isPadding()){i.push("ag-header-group-cell-no-group");var o=this.columnGroup.getLeafColumns();o.every((function(t){return t.isSpanHeaderHeight()}))&&i.push("ag-header-span-height")}else i.push("ag-header-group-cell-with-group");i.forEach((function(e){return t.comp.addOrRemoveCssClass(e,!0)}))},e.prototype.setupMovingCss=function(){var t=this,e=this.columnGroup.getProvidedColumnGroup(),i=e.getLeafColumns(),o=function(){return t.comp.addOrRemoveCssClass("ag-header-cell-moving",t.columnGroup.isMoving())};i.forEach((function(e){t.addManagedListener(e,xt.EVENT_MOVING_CHANGED,o)})),o()},e.prototype.onFocusIn=function(t){if(!this.eGui.contains(t.relatedTarget)){var e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.columnGroup)}},e.prototype.handleKeyDown=function(e){t.prototype.handleKeyDown.call(this,e);var i=this.getWrapperHasFocus();if(this.expandable&&i&&e.key===Nn.ENTER){var o=this.columnGroup,n=!o.isExpanded();this.columnModel.setColumnGroupOpened(o.getProvidedColumnGroup(),n,"uiColumnExpanded")}},e.prototype.setDragSource=function(t){var e=this;if(!this.isSuppressMoving()){var i=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),o=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),n={type:Gs.HeaderCell,eElement:t,getDefaultIconName:function(){return o?Ua.ICON_HIDE:Ua.ICON_NOT_ALLOWED},dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:function(){o=!e.gridOptionsService.is("suppressDragLeaveHidesColumns"),i.forEach((function(t){return t.setMoving(!0,"uiColumnDragged")}))},onDragStopped:function(){return i.forEach((function(t){return t.setMoving(!1,"uiColumnDragged")}))},onGridEnter:function(t){var i;if(o){var n=(null===(i=null===t||void 0===t?void 0:t.columns)||void 0===i?void 0:i.filter((function(t){return!t.getColDef().lockVisible})))||[];e.columnModel.setColumnsVisible(n,!0,"uiColumnMoved")}},onGridExit:function(t){var i;if(o){var n=(null===(i=null===t||void 0===t?void 0:t.columns)||void 0===i?void 0:i.filter((function(t){return!t.getColDef().lockVisible})))||[];e.columnModel.setColumnsVisible(n,!1,"uiColumnMoved")}}};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc((function(){return e.dragAndDropService.removeDragSource(n)}))}},e.prototype.getDragItemForGroup=function(){var t=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),e={};t.forEach((function(t){return e[t.getId()]=t.isVisible()}));var i=[];return this.columnModel.getAllDisplayedColumns().forEach((function(e){t.indexOf(e)>=0&&(i.push(e),Nt(t,e))})),t.forEach((function(t){return i.push(t)})),{columns:i,visibleState:e}},e.prototype.isSuppressMoving=function(){var t=!1;this.columnGroup.getLeafColumns().forEach((function(e){(e.getColDef().suppressMovable||e.getColDef().lockPosition)&&(t=!0)}));var e=t||this.gridOptionsService.is("suppressMovableColumns");return e},Zp([pt("columnModel")],e.prototype,"columnModel",void 0),Zp([pt("dragAndDropService")],e.prototype,"dragAndDropService",void 0),Zp([pt("gridApi")],e.prototype,"gridApi",void 0),Zp([pt("columnApi")],e.prototype,"columnApi",void 0),e}(_p),ed=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),id=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},od=0,nd=function(t){function e(e,i,o){var n=t.call(this)||this;n.instanceId=od++,n.headerCellCtrls={},n.rowIndex=e,n.pinned=i,n.type=o;var r=o==Uh.COLUMN_GROUP?"ag-header-row-column-group":o==Uh.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return n.headerRowClass="ag-header-row "+r,n}return ed(e,t),e.prototype.postConstruct=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.is("ensureDomOrder")},e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.setComp=function(t,e){void 0===e&&(e=!0),this.comp=t,e&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()},e.prototype.getHeaderRowClass=function(){return this.headerRowClass},e.prototype.getAriaRowIndex=function(){return this.rowIndex+1},e.prototype.getTransform=function(){if(so())return"translateZ(0)"},e.prototype.addEventListeners=function(){var t=this;this.addManagedListener(this.eventService,ge.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_VIRTUAL_COLUMNS_CHANGED,(function(e){return t.onVirtualColumnsChanged(e.afterScroll)})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",(function(e){return t.isEnsureDomOrder=e.currentValue})),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))},e.prototype.getHeaderCellCtrl=function(t){return y(this.headerCellCtrls).find((function(e){return e.getColumnGroupChild()===t}))},e.prototype.onDisplayedColumnsChanged=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()},e.prototype.getType=function(){return this.type},e.prototype.onColumnResized=function(){this.setWidth()},e.prototype.setWidth=function(){var t=this.getWidthForRow();this.comp.setWidth(t+"px")},e.prototype.getWidthForRow=function(){if(this.isPrintLayout){var t=null!=this.pinned;return t?0:this.columnModel.getContainerWidth("right")+this.columnModel.getContainerWidth("left")+this.columnModel.getContainerWidth(null)}return this.columnModel.getContainerWidth(this.pinned)},e.prototype.onRowHeightChanged=function(){var t=this.getTopAndHeight(),e=t.topOffset,i=t.rowHeight;this.comp.setTop(e+"px"),this.comp.setHeight(i+"px")},e.prototype.getTopAndHeight=function(){var t=this.columnModel.getHeaderRowCount(),e=[],i=0;this.filterManager.hasFloatingFilters()&&(t++,i=1);for(var o=this.columnModel.getColumnGroupHeaderRowHeight(),n=this.columnModel.getColumnHeaderRowHeight(),r=1+i,s=t-r,a=0;a<s;a++)e.push(o);e.push(n);for(a=0;a<i;a++)e.push(this.columnModel.getFloatingFiltersHeight());var l=0;for(a=0;a<this.rowIndex;a++)l+=e[a];var u=e[this.rowIndex];return{topOffset:l,rowHeight:u}},e.prototype.getPinned=function(){return this.pinned},e.prototype.getRowIndex=function(){return this.rowIndex},e.prototype.onVirtualColumnsChanged=function(t){void 0===t&&(t=!1);var e=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(e,i,t)},e.prototype.getHeaderCtrls=function(){var t=this,e=this.headerCellCtrls;this.headerCellCtrls={};var i=this.getColumnsInViewport();i.forEach((function(i){if(!i.isEmptyGroup()){var o=i.getUniqueId(),n=e[o];delete e[o];var r=n&&n.getColumnGroupChild()!=i;if(r&&(t.destroyBean(n),n=void 0),null==n)switch(t.type){case Uh.FLOATING_FILTER:n=t.createBean(new Op(i,t));break;case Uh.COLUMN_GROUP:n=t.createBean(new td(i,t));break;default:n=t.createBean(new Up(i,t));break}t.headerCellCtrls[o]=n}}));var o=function(e){var i=t.focusService.isHeaderWrapperFocused(e);if(!i)return!1;var o=t.columnModel.isDisplayed(e.getColumnGroupChild());return o};C(e,(function(e,i){var n=o(i);n?t.headerCellCtrls[e]=i:t.destroyBean(i)}));var n=P(this.headerCellCtrls);return n},e.prototype.getColumnsInViewport=function(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},e.prototype.getColumnsInViewportPrintLayout=function(){var t=this;if(null!=this.pinned)return[];var e=[],i=this.getActualDepth();return["left",null,"right"].forEach((function(o){var n=t.columnModel.getVirtualHeaderGroupRow(o,i);e=e.concat(n)})),e},e.prototype.getActualDepth=function(){return this.type==Uh.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},e.prototype.getColumnsInViewportNormalLayout=function(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},e.prototype.focusHeader=function(t,e){var i=P(this.headerCellCtrls),o=i.find((function(e){return e.getColumnGroupChild()==t}));return!!o&&(o.focus(e),!0)},e.prototype.destroy=function(){var e=this;C(this.headerCellCtrls,(function(t,i){e.destroyBean(i)})),this.headerCellCtrls={},t.prototype.destroy.call(this)},id([pt("columnModel")],e.prototype,"columnModel",void 0),id([pt("focusService")],e.prototype,"focusService",void 0),id([pt("filterManager")],e.prototype,"filterManager",void 0),id([ut],e.prototype,"postConstruct",null),e}(le),rd=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),sd=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ad=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},ld=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},ud=function(t){function e(e){var i=t.call(this)||this;return i.hidden=!1,i.includeFloatingFilter=!1,i.groupsRowCtrls=[],i.pinned=e,i}return rd(e,t),e.prototype.setComp=function(t,e){this.comp=t,this.eViewport=e,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,ge.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},e.prototype.setupDragAndDrop=function(t){var e=new tp(this.pinned,t);this.createManagedBean(e)},e.prototype.refresh=function(t){var e=this;void 0===t&&(t=!1);var i=new ar,o=this.focusService.getFocusHeaderToUseAfterRefresh(),n=function(){var t=e.columnModel.getHeaderRowCount()-1;e.groupsRowCtrls=e.destroyBeans(e.groupsRowCtrls);for(var o=0;o<t;o++){var n=e.createBean(new nd(i.next(),e.pinned,Uh.COLUMN_GROUP));e.groupsRowCtrls.push(n)}},r=function(){var o=i.next(),n=!e.hidden&&(null==e.columnsRowCtrl||!t||e.columnsRowCtrl.getRowIndex()!==o),r=n||e.hidden;r&&(e.columnsRowCtrl=e.destroyBean(e.columnsRowCtrl)),n&&(e.columnsRowCtrl=e.createBean(new nd(o,e.pinned,Uh.COLUMN)))},s=function(){e.includeFloatingFilter=e.filterManager.hasFloatingFilters()&&!e.hidden;var o=function(){e.filtersRowCtrl=e.destroyBean(e.filtersRowCtrl)};if(e.includeFloatingFilter){var n=i.next();if(e.filtersRowCtrl){var r=e.filtersRowCtrl.getRowIndex()!==n;t&&!r||o()}e.filtersRowCtrl||(e.filtersRowCtrl=e.createBean(new nd(n,e.pinned,Uh.FLOATING_FILTER)))}else o()};n(),r(),s();var a=this.getAllCtrls();this.comp.setCtrls(a),this.restoreFocusOnHeader(o)},e.prototype.restoreFocusOnHeader=function(t){null!=t&&t.column.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:t})},e.prototype.getAllCtrls=function(){var t=ld([],ad(this.groupsRowCtrls));return this.columnsRowCtrl&&t.push(this.columnsRowCtrl),this.filtersRowCtrl&&t.push(this.filtersRowCtrl),t},e.prototype.onGridColumnsChanged=function(){this.refresh(!0)},e.prototype.onDisplayedColumnsChanged=function(){var t=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)},e.prototype.setupCenterWidth=function(){var t=this;null==this.pinned&&this.createManagedBean(new hh((function(e){return t.comp.setCenterWidth(e+"px")}),!0))},e.prototype.setHorizontalScroll=function(t){this.comp.setViewportScrollLeft(t)},e.prototype.setupPinnedWidth=function(){var t=this;if(null!=this.pinned){var e="left"===this.pinned,i="right"===this.pinned;this.hidden=!0;var o=function(){var o=e?t.pinnedWidthService.getPinnedLeftWidth():t.pinnedWidthService.getPinnedRightWidth();if(null!=o){var n=0==o,r=t.hidden!==n,s=t.gridOptionsService.is("enableRtl"),a=t.gridOptionsService.getScrollbarWidth(),l=t.scrollVisibleService.isVerticalScrollShowing()&&(s&&e||!s&&i),u=l?o+a:o;t.comp.setPinnedContainerWidth(u+"px"),t.comp.setDisplayed(!n),r&&(t.hidden=n,t.refresh())}};this.addManagedListener(this.eventService,ge.EVENT_LEFT_PINNED_WIDTH_CHANGED,o),this.addManagedListener(this.eventService,ge.EVENT_RIGHT_PINNED_WIDTH_CHANGED,o),this.addManagedListener(this.eventService,ge.EVENT_SCROLL_VISIBILITY_CHANGED,o),this.addManagedListener(this.eventService,ge.EVENT_SCROLLBAR_WIDTH_CHANGED,o)}},e.prototype.getHeaderCtrlForColumn=function(t){if(t instanceof xt){if(!this.columnsRowCtrl)return;return this.columnsRowCtrl.getHeaderCellCtrl(t)}if(0!==this.groupsRowCtrls.length)for(var e=0;e<this.groupsRowCtrls.length;e++){var i=this.groupsRowCtrls[e].getHeaderCellCtrl(t);if(i)return i}},e.prototype.getHtmlElementForColumnHeader=function(t){var e=this.getHeaderCtrlForColumn(t);return e?e.getGui():null},e.prototype.getRowType=function(t){var e=this.getAllCtrls(),i=e[t];return i?i.getType():void 0},e.prototype.focusHeader=function(t,e,i){var o=this.getAllCtrls(),n=o[t];return!!n&&n.focusHeader(e,i)},e.prototype.getRowCount=function(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)},e.prototype.destroy=function(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),t.prototype.destroy.call(this)},sd([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),sd([pt("scrollVisibleService")],e.prototype,"scrollVisibleService",void 0),sd([pt("pinnedWidthService")],e.prototype,"pinnedWidthService",void 0),sd([pt("columnModel")],e.prototype,"columnModel",void 0),sd([pt("focusService")],e.prototype,"focusService",void 0),sd([pt("filterManager")],e.prototype,"filterManager",void 0),e}(le),cd=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),hd=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},pd=function(t){function e(e){var i=t.call(this)||this;return i.headerRowComps={},i.rowCompsList=[],i.pinned=e,i}return cd(e,t),e.prototype.init=function(){var t=this;this.selectAndSetTemplate();var e={setDisplayed:function(e){return t.setDisplayed(e)},setCtrls:function(e){return t.setCtrls(e)},setCenterWidth:function(e){return t.eCenterContainer.style.width=e},setViewportScrollLeft:function(e){return t.getGui().scrollLeft=e},setPinnedContainerWidth:function(e){var i=t.getGui();i.style.width=e,i.style.maxWidth=e,i.style.minWidth=e}},i=this.createManagedBean(new ud(this.pinned));i.setComp(e,this.getGui())},e.prototype.selectAndSetTemplate=function(){var t="left"==this.pinned,i="right"==this.pinned,o=t?e.PINNED_LEFT_TEMPLATE:i?e.PINNED_RIGHT_TEMPLATE:e.CENTER_TEMPLATE;this.setTemplate(o),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},e.prototype.destroyRowComps=function(){this.setCtrls([])},e.prototype.destroyRowComp=function(t){this.destroyBean(t),this.eRowContainer.removeChild(t.getGui())},e.prototype.setCtrls=function(t){var e,i=this,o=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];var n=function(t){var o=t.getGui(),n=o.parentElement!=i.eRowContainer;n&&i.eRowContainer.appendChild(o),e&&fn(i.eRowContainer,o,e),e=o};t.forEach((function(t){var e=t.getInstanceId(),r=o[e];delete o[e];var s=r||i.createBean(new dp(t));i.headerRowComps[e]=s,i.rowCompsList.push(s),n(s)})),P(o).forEach((function(t){return i.destroyRowComp(t)}))},e.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"></div>',e.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"></div>',e.CENTER_TEMPLATE='<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>',hd([br("eCenterContainer")],e.prototype,"eCenterContainer",void 0),hd([ut],e.prototype,"init",null),hd([ct],e.prototype,"destroyRowComps",null),e}(vr),dd=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),fd=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};(function(t){t[t["UP"]=0]="UP",t[t["DOWN"]=1]="DOWN",t[t["LEFT"]=2]="LEFT",t[t["RIGHT"]=3]="RIGHT"})(Mp||(Mp={}));var gd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return dd(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady((function(e){t.gridBodyCon=e.gridBodyCtrl}))},e.prototype.getHeaderRowCount=function(){var t=this.ctrlsService.getHeaderRowContainerCtrl();return t?t.getRowCount():0},e.prototype.navigateVertically=function(t,e,i){if(e||(e=this.focusService.getFocusedHeader()),!e)return!1;var o=e.headerRowIndex,n=e.column,r=this.getHeaderRowCount(),s=t===Mp.UP,a=s?this.headerPositionUtils.getColumnVisibleParent(n,o):this.headerPositionUtils.getColumnVisibleChild(n,o),l=a.nextRow,u=a.nextFocusColumn,c=!1;return l<0&&(l=0,u=n,c=!0),l>=r&&(l=-1),!(!c&&!u)&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l,column:u},allowUserOverride:!0,event:i})},e.prototype.navigateHorizontally=function(t,e,i){void 0===e&&(e=!1);var o,n,r=this.focusService.getFocusedHeader(),s=t===Mp.LEFT,a=this.gridOptionsService.is("enableRtl");return s!==a?(n="Before",o=this.headerPositionUtils.findHeader(r,n)):(n="After",o=this.headerPositionUtils.findHeader(r,n)),o||!e?this.focusService.focusHeaderPosition({headerPosition:o,direction:n,fromTab:e,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(r,n,i)},e.prototype.focusNextHeaderRow=function(t,e,i){var o,n=t.headerRowIndex,r=null;return"Before"===e?n>0&&(o=n-1,r=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"end")):(o=n+1,r=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"start")),this.focusService.focusHeaderPosition({headerPosition:r,direction:e,fromTab:!0,allowUserOverride:!0,event:i})},e.prototype.scrollToColumn=function(t,e){if(void 0===e&&(e="After"),!t.getPinned()){var i;if(t instanceof fe){var o=t.getDisplayedLeafColumns();i="Before"===e?Dt(o):o[0]}else i=t;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}},fd([pt("focusService")],e.prototype,"focusService",void 0),fd([pt("headerPositionUtils")],e.prototype,"headerPositionUtils",void 0),fd([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),fd([ut],e.prototype,"postConstruct",null),e=fd([ht("headerNavigationService")],e),e}(le),yd=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),_d=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},md=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yd(e,t),e.prototype.setComp=function(t,e,i){this.comp=t,this.eGui=e,this.createManagedBean(new Ar(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)},e.prototype.setupHeaderHeight=function(){var t=this.setHeaderHeight.bind(this);t(),this.addManagedPropertyListener("headerHeight",t),this.addManagedPropertyListener("pivotHeaderHeight",t),this.addManagedPropertyListener("groupHeaderHeight",t),this.addManagedPropertyListener("pivotGroupHeaderHeight",t),this.addManagedPropertyListener("floatingFiltersHeight",t),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,t),this.addManagedListener(this.eventService,ge.EVENT_GRID_STYLES_CHANGED,t),this.addManagedListener(this.eventService,ge.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,t)},e.prototype.getHeaderHeight=function(){return this.headerHeight},e.prototype.setHeaderHeight=function(){var t,e=this.columnModel,i=0,o=e.getHeaderRowCount(),n=this.filterManager.hasFloatingFilters();n&&(o++,i=1);var r=this.columnModel.getColumnGroupHeaderRowHeight(),s=this.columnModel.getColumnHeaderRowHeight(),a=1+i,l=o-a;if(t=i*e.getFloatingFiltersHeight(),t+=l*r,t+=s,this.headerHeight!==t){this.headerHeight=t;var u=t+1+"px";this.comp.setHeightAndMinHeight(u),this.eventService.dispatchEvent({type:ge.EVENT_HEADER_HEIGHT_CHANGED})}},e.prototype.onPivotModeChanged=function(){var t=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)},e.prototype.onDisplayedColumnsChanged=function(){var t=this.columnModel.getAllDisplayedColumns(),e=t.some((function(t){return t.isSpanHeaderHeight()}));this.comp.addOrRemoveCssClass("ag-header-allow-overflow",e)},e.prototype.onTabKeyDown=function(t){var e=this.gridOptionsService.is("enableRtl"),i=t.shiftKey!==e?Mp.LEFT:Mp.RIGHT;(this.headerNavigationService.navigateHorizontally(i,!0,t)||this.focusService.focusNextGridCoreContainer(t.shiftKey))&&t.preventDefault()},e.prototype.handleKeyDown=function(t){var e=null;switch(t.key){case Nn.LEFT:e=Mp.LEFT;case Nn.RIGHT:s(e)||(e=Mp.RIGHT),this.headerNavigationService.navigateHorizontally(e,!1,t);break;case Nn.UP:e=Mp.UP;case Nn.DOWN:s(e)||(e=Mp.DOWN),this.headerNavigationService.navigateVertically(e,null,t)&&t.preventDefault();break;default:return}},e.prototype.onFocusOut=function(t){var e=this.gridOptionsService.getDocument(),i=t.relatedTarget;!i&&this.eGui.contains(e.activeElement)||this.eGui.contains(i)||this.focusService.clearFocusedHeader()},_d([pt("headerNavigationService")],e.prototype,"headerNavigationService",void 0),_d([pt("focusService")],e.prototype,"focusService",void 0),_d([pt("columnModel")],e.prototype,"columnModel",void 0),_d([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),_d([pt("filterManager")],e.prototype,"filterManager",void 0),e}(le),vd=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),bd=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Cd=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return vd(e,t),e.prototype.postConstruct=function(){var t=this,e={addOrRemoveCssClass:function(e,i){return t.addOrRemoveCssClass(e,i)},setHeightAndMinHeight:function(e){t.getGui().style.height=e,t.getGui().style.minHeight=e}},i=this.createManagedBean(new md);i.setComp(e,this.getGui(),this.getFocusableElement());var o=function(e){t.createManagedBean(e),t.appendChild(e)};o(new pd("left")),o(new pd(null)),o(new pd("right"))},e.TEMPLATE='<div class="ag-header" role="presentation"/>',bd([ut],e.prototype,"postConstruct",null),e}(vr),wd=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Sd=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ed=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wd(e,t),e.prototype.addResizeBar=function(t){var e=this,i={dragStartPixels:t.dragStartPixels||0,eElement:t.eResizeBar,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this,t),onDragging:this.onDragging.bind(this,t),includeTouch:!0,stopPropagationForTouch:!0};this.dragService.addDragSource(i);var o=function(){return e.dragService.removeDragSource(i)};return o},e.prototype.onDragStart=function(t,e){this.dragStartX=e.clientX,this.setResizeIcons();var i=e instanceof MouseEvent&&!0===e.shiftKey;t.onResizeStart(i)},e.prototype.setResizeIcons=function(){var t=this.ctrlsService.getGridCtrl();t.setResizeCursor(!0),t.disableUserSelect(!0)},e.prototype.onDragStop=function(t,e){t.onResizeEnd(this.resizeAmount),this.resetIcons()},e.prototype.resetIcons=function(){var t=this.ctrlsService.getGridCtrl();t.setResizeCursor(!1),t.disableUserSelect(!1)},e.prototype.onDragging=function(t,e){this.resizeAmount=e.clientX-this.dragStartX,t.onResizing(this.resizeAmount)},Sd([pt("dragService")],e.prototype,"dragService",void 0),Sd([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),e=Sd([ht("horizontalResizeService")],e),e}(le),xd=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Od=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Rd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xd(e,t),e.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},e.prototype.showMenuAfterMouseEvent=function(t,e){var i=this;this.showPopup(t,(function(o){i.popupService.positionPopupUnderMouseEvent({column:t,type:"columnMenu",mouseEvent:e,ePopup:o})}),"columnMenu",e.target)},e.prototype.showMenuAfterButtonClick=function(t,e,i){var o=this;this.showPopup(t,(function(n){o.popupService.positionPopupByComponent({type:i,eventSource:e,ePopup:n,keepWithinBounds:!0,position:"under",column:t})}),i,e)},e.prototype.showPopup=function(t,e,i,o){var n=this,r=this.filterManager.getOrCreateFilterWrapper(t,"COLUMN_MENU");if(!r)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");var s,a=document.createElement("div");Ci(a,"presentation"),a.classList.add("ag-menu"),this.tabListener=this.addManagedListener(a,"keydown",(function(t){return n.trapFocusWithin(t,a)})),r.guiPromise.then((function(t){return a.appendChild(t)}));var l=function(){var t;return null===(t=r.filterPromise)||void 0===t?void 0:t.then((function(t){var e;return null===(e=null===t||void 0===t?void 0:t.afterGuiDetached)||void 0===e?void 0:e.call(t)}))},u=o||this.ctrlsService.getGridBodyCtrl().getGui(),c=function(e){t.setMenuVisible(!1,"contextMenu");var i=e instanceof KeyboardEvent;if(n.tabListener&&(n.tabListener=n.tabListener()),i&&o&&ln(o)){var r=n.focusService.findTabbableParent(o);r&&r.focus()}l()},h=this.localeService.getLocaleTextFunc(),p=this.popupService.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:c,positionCallback:function(){return e(a)},anchorToElement:u,ariaLabel:h("ariaLabelColumnMenu","Column Menu")});p&&(this.hidePopup=s=p.hideFunc),r.filterPromise.then((function(t){e(a),t.afterGuiAttached&&t.afterGuiAttached({container:i,hidePopup:s})})),t.setMenuVisible(!0,"contextMenu")},e.prototype.trapFocusWithin=function(t,e){t.key!==Nn.TAB||t.defaultPrevented||this.focusService.findNextFocusableElement(e,!1,t.shiftKey)||(t.preventDefault(),this.focusService.focusInto(e,t.shiftKey))},e.prototype.isMenuEnabled=function(t){return t.isFilterAllowed()&&t.getMenuTabs(["filterMenuTab"]).includes("filterMenuTab")},Od([pt("filterManager")],e.prototype,"filterManager",void 0),Od([pt("popupService")],e.prototype,"popupService",void 0),Od([pt("focusService")],e.prototype,"focusService",void 0),Od([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),e=Od([ht("menuFactory")],e),e}(le),Id=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Td=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};(function(t){function e(i){var o=t.call(this,e.getTemplate(i.cssClass))||this;return o.items=[],o.tabbedItemScrollMap=new Map,o.params=i,i.items&&i.items.forEach((function(t){return o.addItem(t)})),o}Id(e,t),e.prototype.postConstruct=function(){var t=this;this.createManagedBean(new Ar(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),this.addDestroyFunc((function(){var e,i,o;return null===(o=null===(i=null===(e=t.activeItem)||void 0===e?void 0:e.tabbedItem)||void 0===i?void 0:i.afterDetachedCallback)||void 0===o?void 0:o.call(i)}))},e.getTemplate=function(t){return'<div class="ag-tabs '+t+'">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header '+(t?t+"-header":"")+'"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body '+(t?t+"-body":"")+'"></div>\n        </div>'},e.prototype.handleKeyDown=function(t){var e=this.gridOptionsService.getDocument();switch(t.key){case Nn.RIGHT:case Nn.LEFT:if(!this.eHeader.contains(e.activeElement))return;var i=t.key===Nn.RIGHT,o=this.gridOptionsService.is("enableRtl"),n=this.items.indexOf(this.activeItem),r=i!==o?Math.min(n+1,this.items.length-1):Math.max(n-1,0);if(n===r)return;t.preventDefault();var s=this.items[r];this.showItemWrapper(s),s.eHeaderButton.focus();break;case Nn.UP:case Nn.DOWN:t.stopPropagation();break}},e.prototype.onTabKeyDown=function(t){if(!t.defaultPrevented){var e=this,i=e.focusService,o=e.eHeader,n=e.eBody,r=e.activeItem,s=this.gridOptionsService.getDocument(),a=s.activeElement,l=t.target;if(t.preventDefault(),o.contains(a))i.focusInto(n,t.shiftKey);else{var u=null;i.isTargetUnderManagedComponent(n,l)&&(t.shiftKey&&(u=this.focusService.findFocusableElementBeforeTabGuard(n,l)),u||(u=r.eHeaderButton)),!u&&n.contains(a)&&(u=i.findNextFocusableElement(n,!1,t.shiftKey),u||(u=r.eHeaderButton)),u&&u.focus()}}},e.prototype.setAfterAttachedParams=function(t){this.afterAttachedParams=t},e.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},e.prototype.addItem=function(t){var e=document.createElement("span");Ci(e,"tab"),e.setAttribute("tabindex","-1"),e.appendChild(t.title),e.classList.add("ag-tab"),this.eHeader.appendChild(e),Oi(e,t.titleLabel);var i={tabbedItem:t,eHeaderButton:e};this.items.push(i),e.addEventListener("click",this.showItemWrapper.bind(this,i))},e.prototype.showItem=function(t){var e=this.items.find((function(e){return e.tabbedItem===t}));e&&this.showItemWrapper(e)},e.prototype.showItemWrapper=function(t){var e,i,o=this,n=t.tabbedItem,r=t.eHeaderButton;this.params.onItemClicked&&this.params.onItemClicked({item:n}),this.activeItem!==t?(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),rn(this.eBody),n.bodyPromise.then((function(t){o.eBody.appendChild(t);var e=!o.focusService.isKeyboardMode();if(o.focusService.focusInto(o.eBody,!1,e),n.afterAttachedCallback&&n.afterAttachedCallback(o.afterAttachedParams),o.params.keepScrollPosition){var i=n.getScrollableContainer&&n.getScrollableContainer()||t;o.lastScrollListener=o.addManagedListener(i,"scroll",(function(){o.tabbedItemScrollMap.set(n.name,i.scrollTop)}));var r=o.tabbedItemScrollMap.get(n.name);void 0!==r&&setTimeout((function(){i.scrollTop=r}),0)}})),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),null===(i=(e=this.activeItem.tabbedItem).afterDetachedCallback)||void 0===i||i.call(e)),r.classList.add("ag-tab-selected"),this.activeItem=t):J(this.params.onActiveItemClicked)},Td([pt("focusService")],e.prototype,"focusService",void 0),Td([br("eHeader")],e.prototype,"eHeader",void 0),Td([br("eBody")],e.prototype,"eBody",void 0),Td([ut],e.prototype,"postConstruct",null)})(vr);var Pd,Dd=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),kd=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ad=50,Ld=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.polyfillFunctions=[],e}return Dd(e,t),e.prototype.observeResize=function(t,e){var i=this,o=this.gridOptionsService.getWindow(),n=function(){var i=new o.ResizeObserver(e);return i.observe(t),function(){return i.disconnect()}},r=function(){var o=dn(t),n=pn(t),r=!0,s=function(){if(r){var a=dn(t),l=pn(t),u=a!==o||l!==n;u&&(o=a,n=l,e()),i.doNextPolyfillTurn(s)}};return s(),function(){return r=!1}},s=this.gridOptionsService.is("suppressBrowserResizeObserver"),a=!!o.ResizeObserver;return a&&!s?n():r()},e.prototype.doNextPolyfillTurn=function(t){this.polyfillFunctions.push(t),this.schedulePolyfill()},e.prototype.schedulePolyfill=function(){var t=this;if(!this.polyfillScheduled){var e=function(){var e=t.polyfillFunctions;t.polyfillScheduled=!1,t.polyfillFunctions=[],e.forEach((function(t){return t()}))};this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(e,Ad)}},e=kd([ht("resizeObserverService")],e),e}(le),Md=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Fd=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Nd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.createTasksP1={list:[],sorted:!1},e.createTasksP2={list:[],sorted:!1},e.destroyTasks=[],e.ticking=!1,e.scrollGoingDown=!0,e.lastPage=0,e.lastScrollTop=0,e.taskCount=0,e.cancelledTasks=new Set,e}return Md(e,t),e.prototype.setScrollTop=function(t){var e=this.gridOptionsService.is("pagination");if(this.scrollGoingDown=t>=this.lastScrollTop,e&&0===t){var i=this.paginationProxy.getCurrentPage();i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=t},e.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsService.is("suppressAnimationFrame")},e.prototype.isOn=function(){return this.useAnimationFrame},e.prototype.verifyAnimationFrameOn=function(t){!1===this.useAnimationFrame&&console.warn("AG Grid: AnimationFrameService."+t+" called but animation frames are off")},e.prototype.createTask=function(t,e,i){this.verifyAnimationFrameOn(i);var o={task:t,index:e,createOrder:++this.taskCount};this.addTaskToList(this[i],o),this.schedule()},e.prototype.cancelTask=function(t){this.cancelledTasks.add(t)},e.prototype.addTaskToList=function(t,e){t.list.push(e),t.sorted=!1},e.prototype.sortTaskList=function(t){if(!t.sorted){var e=this.scrollGoingDown?1:-1;t.list.sort((function(t,i){return t.index!==i.index?e*(i.index-t.index):i.createOrder-t.createOrder})),t.sorted=!0}},e.prototype.addDestroyTask=function(t){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(t),this.schedule()},e.prototype.executeFrame=function(t){this.verifyAnimationFrameOn("executeFrame");var e=this.createTasksP1,i=e.list,o=this.createTasksP2,n=o.list,r=this.destroyTasks,s=(new Date).getTime(),a=(new Date).getTime()-s,l=t<=0,u=this.ctrlsService.getGridBodyCtrl();while(l||a<t){var c=u.getScrollFeature().scrollGridIfNeeded();if(!c){var h=void 0;if(i.length)this.sortTaskList(e),h=i.pop().task;else if(n.length)this.sortTaskList(o),h=n.pop().task;else{if(!r.length){this.cancelledTasks.clear();break}h=r.pop()}this.cancelledTasks.has(h)||h()}a=(new Date).getTime()-s}i.length||n.length||r.length?this.requestFrame():this.stopTicking()},e.prototype.stopTicking=function(){this.ticking=!1},e.prototype.flushAllFrames=function(){this.useAnimationFrame&&this.executeFrame(-1)},e.prototype.schedule=function(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))},e.prototype.requestFrame=function(){var t=this.executeFrame.bind(this,60);this.requestAnimationFrame(t)},e.prototype.requestAnimationFrame=function(t){var e=this.gridOptionsService.getWindow();e.requestAnimationFrame?e.requestAnimationFrame(t):e.webkitRequestAnimationFrame?e.webkitRequestAnimationFrame(t):e.setTimeout(t,0)},e.prototype.isQueueEmpty=function(){return!this.ticking},e.prototype.debounce=function(t){var e=this,i=!1;return function(){e.isOn()?i||(i=!0,e.addDestroyTask((function(){i=!1,t()}))):e.getFrameworkOverrides().setTimeout(t,0)}},Fd([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Fd([pt("paginationProxy")],e.prototype,"paginationProxy",void 0),Fd([ut],e.prototype,"init",null),e=Fd([ht("animationFrameService")],e),e}(le),Vd=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Bd=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Gd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vd(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady((function(e){t.centerRowContainerCtrl=e.centerRowContainerCtrl}))},e.prototype.getPreferredWidthForColumn=function(t,e){var i=this.getHeaderCellForColumn(t);if(!i)return-1;var o=this.rowRenderer.getAllCellsForColumn(t);return e||o.push(i),this.addElementsToContainerAndGetWidth(o)},e.prototype.getPreferredWidthForColumnGroup=function(t){var e=this.getHeaderCellForColumn(t);return e?this.addElementsToContainerAndGetWidth([e]):-1},e.prototype.addElementsToContainerAndGetWidth=function(t){var e=this,i=document.createElement("form");i.style.position="fixed";var o=this.centerRowContainerCtrl.getContainerElement();t.forEach((function(t){return e.cloneItemIntoDummy(t,i)})),o.appendChild(i);var n=i.offsetWidth;o.removeChild(i);var r=this.getAutoSizePadding();return n+r},e.prototype.getAutoSizePadding=function(){var t=this.gridOptionsService.getNum("autoSizePadding");return null!=t&&t>=0?t:20},e.prototype.getHeaderCellForColumn=function(t){var e=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach((function(i){var o=i.getHtmlElementForColumnHeader(t);null!=o&&(e=o)})),e},e.prototype.cloneItemIntoDummy=function(t,e){var i=t.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";var o=document.createElement("div"),n=o.classList,r=["ag-header-cell","ag-header-group-cell"].some((function(t){return i.classList.contains(t)}));r?(n.add("ag-header","ag-header-row"),o.style.position="static"):n.add("ag-row");var s=t.parentElement;while(s){var a=["ag-header-row","ag-row"].some((function(t){return s.classList.contains(t)}));if(a){for(var l=0;l<s.classList.length;l++){var u=s.classList[l];"ag-row-position-absolute"!=u&&n.add(u)}break}s=s.parentElement}o.appendChild(i),e.appendChild(o)},Bd([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),Bd([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Bd([pt("rowCssClassCalculator")],e.prototype,"rowCssClassCalculator",void 0),Bd([ut],e.prototype,"postConstruct",null),e=Bd([ht("autoWidthCalculator")],e),e}(le),jd=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Hd=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},$d=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wd=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Ud=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},zd=function(t){function e(e,i){var o=t.call(this)||this;return o.createRowCon=e,o.destroyRowCtrls=i,o.stickyRowCtrls=[],o.containerHeight=0,o}return jd(e,t),e.prototype.postConstruct=function(){var t=this;this.isClientSide="clientSide"===this.rowModel.getType(),this.ctrlsService.whenReady((function(e){t.gridBodyCtrl=e.gridBodyCtrl}))},e.prototype.getStickyRowCtrls=function(){return this.stickyRowCtrls},e.prototype.checkStickyRows=function(){var t=this,e=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],e);var i=[],o=this.rowRenderer.getFirstVisibleVerticalPixel(),n=function(n){var r,s,a,l;if(i.push(n),t.isClientSide){var u=n;while(u.expanded)if(u.master)u=u.detailNode;else if(u.childrenAfterSort){if(0===u.childrenAfterSort.length)break;u=Dt(u.childrenAfterSort)}l=u.rowTop+u.rowHeight}else if(n.master)l=n.detailNode.rowTop+n.detailNode.rowHeight;else{var c=null===(r=n.childStore)||void 0===r?void 0:r.getStoreBounds();l=(null!==(s=null===c||void 0===c?void 0:c.heightPx)&&void 0!==s?s:0)+(null!==(a=null===c||void 0===c?void 0:c.topPx)&&void 0!==a?a:0)}var h=o+e+n.rowHeight;n.stickyRowTop=l<h?e+(l-h):e,e=0,i.forEach((function(t){var i=t.stickyRowTop+t.rowHeight;e<i&&(e=i)}))};while(1){var r=o+e,s=this.rowModel.getRowIndexAtPixel(r),a=this.rowModel.getRow(s);if(null==a)break;if(a.level<0)break;var l=[],u=a.parent;while(u.level>=0)l.push(u),u=u.parent;var c=l.reverse().find((function(t){return i.indexOf(t)<0&&t.displayed}));if(c)n(c);else{if(!(a.isExpandable()&&a.expanded&&a.rowTop<r))break;n(a)}}return this.refreshNodesAndContainerHeight(i,e)},e.prototype.refreshStickyNode=function(t){for(var e=[],i=0;i<this.stickyRowCtrls.length;i++){var o=this.stickyRowCtrls[i].getRowNode();o!==t&&e.push(o)}this.refreshNodesAndContainerHeight(e,this.containerHeight)&&this.checkStickyRows()},e.prototype.refreshNodesAndContainerHeight=function(t,e){var i,o,n,r=this,s=!1,a=this.stickyRowCtrls.filter((function(e){return-1===t.indexOf(e.getRowNode())})),l=t.filter((function(t){return-1===r.stickyRowCtrls.findIndex((function(e){return e.getRowNode()===t}))}));(a.length||l.length)&&(s=!0);var u={};a.forEach((function(t){u[t.getRowNode().id]=t,r.stickyRowCtrls=r.stickyRowCtrls.filter((function(e){return e!==t}))}));try{for(var c=$d(Object.values(u)),h=c.next();!h.done;h=c.next()){var p=h.value;p.getRowNode().sticky=!1}}catch(f){i={error:f}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}this.destroyRowCtrls(u,!1);var d=l.map((function(t){return t.sticky=!0,r.createRowCon(t,!1,!1)}));return(n=this.stickyRowCtrls).push.apply(n,Ud([],Wd(d))),this.stickyRowCtrls.forEach((function(t){return t.setRowTop(t.getRowNode().stickyRowTop)})),this.stickyRowCtrls.sort((function(t,e){return e.getRowNode().rowIndex-t.getRowNode().rowIndex})),this.containerHeight!==e&&(this.containerHeight=e,this.gridBodyCtrl.setStickyTopHeight(e),s=!0),s},Hd([pt("rowModel")],e.prototype,"rowModel",void 0),Hd([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),Hd([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Hd([ut],e.prototype,"postConstruct",null),e}(le),Kd=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Yd=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},qd=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Xd=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},Qd=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jd=10,Zd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.destroyFuncsForColumnListeners=[],e.rowCtrlsByRowIndex={},e.zombieRowCtrls={},e.allRowCtrls=[],e.topRowCtrls=[],e.bottomRowCtrls=[],e.refreshInProgress=!1,e.dataFirstRenderedFired=!1,e}return Kd(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady((function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl(),t.initialise()}))},e.prototype.initialise=function(){if(this.addManagedListener(this.eventService,ge.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListener("domLayout",this.onDomLayoutChanged.bind(this)),this.addManagedPropertyListener("rowClass",this.redrawRows.bind(this)),this.gridOptionsService.isGroupRowsSticky()){var t=this.rowModel.getType();"clientSide"!==t&&"serverSide"!==t||(this.stickyRowFeature=this.createManagedBean(new zd(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.is("embedFullWidthRows"),this.redrawAfterModelUpdate()},e.prototype.initialiseCache=function(){if(this.gridOptionsService.is("keepDetailRows")){var t=this.getKeepDetailRowsCount(),e=null!=t?t:3;this.cachedRowCtrls=new tf(e)}},e.prototype.getKeepDetailRowsCount=function(){var t=this.gridOptionsService.getNum("keepDetailRowsCount");return s(t)&&t>0?t:Jd},e.prototype.getStickyTopRowCtrls=function(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]},e.prototype.updateAllRowCtrls=function(){var t=P(this.rowCtrlsByRowIndex),e=this.gridOptionsService.is("ensureDomOrder"),i=this.gridOptionsService.isDomLayout("print");(e||i)&&t.sort((function(t,e){return t.getRowNode().rowIndex-e.getRowNode.rowIndex}));var o=P(this.zombieRowCtrls),n=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];o.length>0||n.length>0?this.allRowCtrls=Xd(Xd(Xd([],qd(t)),qd(o)),qd(n)):this.allRowCtrls=t},e.prototype.onCellFocusChanged=function(t){this.getAllCellCtrls().forEach((function(e){return e.onCellFocused(t)})),this.getFullWidthRowCtrls().forEach((function(e){return e.onFullWidthRowFocused(t)}))},e.prototype.registerCellEventListeners=function(){var t=this;this.addManagedListener(this.eventService,ge.EVENT_CELL_FOCUSED,(function(e){t.onCellFocusChanged(e)})),this.addManagedListener(this.eventService,ge.EVENT_CELL_FOCUS_CLEARED,(function(){t.onCellFocusChanged()})),this.addManagedListener(this.eventService,ge.EVENT_FLASH_CELLS,(function(e){t.getAllCellCtrls().forEach((function(t){return t.onFlashCells(e)}))})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_HOVER_CHANGED,(function(){t.getAllCellCtrls().forEach((function(t){return t.onColumnHover()}))})),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,(function(){t.getAllCellCtrls().forEach((function(t){return t.onDisplayedColumnsChanged()}))})),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,(function(){t.printLayout&&t.getAllCellCtrls().forEach((function(t){return t.onLeftChanged()}))}));var e=this.gridOptionsService.is("enableRangeSelection");e&&(this.addManagedListener(this.eventService,ge.EVENT_RANGE_SELECTION_CHANGED,(function(){t.getAllCellCtrls().forEach((function(t){return t.onRangeSelectionChanged()}))})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_MOVED,(function(){t.getAllCellCtrls().forEach((function(t){return t.updateRangeBordersIfRangeCount()}))})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_PINNED,(function(){t.getAllCellCtrls().forEach((function(t){return t.updateRangeBordersIfRangeCount()}))})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_VISIBLE,(function(){t.getAllCellCtrls().forEach((function(t){return t.updateRangeBordersIfRangeCount()}))}))),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,ge.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},e.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach((function(t){return t()})),this.destroyFuncsForColumnListeners.length=0},e.prototype.refreshListenersToColumnsForCellComps=function(){var t=this;this.removeGridColumnListeners();var e=this.columnModel.getAllGridColumns();e&&e.forEach((function(e){var i=function(i){t.getAllCellCtrls().forEach((function(t){t.getColumn()===e&&i(t)}))},o=function(){i((function(t){return t.onLeftChanged()}))},n=function(){i((function(t){return t.onWidthChanged()}))},r=function(){i((function(t){return t.onFirstRightPinnedChanged()}))},s=function(){i((function(t){return t.onLastLeftPinnedChanged()}))},a=function(){i((function(t){return t.onColDefChanged()}))};e.addEventListener("leftChanged",o),e.addEventListener("widthChanged",n),e.addEventListener("firstRightPinnedChanged",r),e.addEventListener("lastLeftPinnedChanged",s),e.addEventListener("colDefChanged",a),t.destroyFuncsForColumnListeners.push((function(){e.removeEventListener("leftChanged",o),e.removeEventListener("widthChanged",n),e.removeEventListener("firstRightPinnedChanged",r),e.removeEventListener("lastLeftPinnedChanged",s),e.removeEventListener("colDefChanged",a)}))}))},e.prototype.onDomLayoutChanged=function(){var t=this.gridOptionsService.isDomLayout("print"),e=t||this.gridOptionsService.is("embedFullWidthRows"),i=e!==this.embedFullWidthRows||this.printLayout!==t;this.printLayout=t,this.embedFullWidthRows=e,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})},e.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)},e.prototype.onPageLoaded=function(t){var e={recycleRows:t.keepRenderedRows,animate:t.animate,newData:t.newData,newPage:t.newPage,onlyBody:!0};this.redrawAfterModelUpdate(e)},e.prototype.getAllCellsForColumn=function(t){var e=[];return this.getAllRowCtrls().forEach((function(i){var o=i.getCellElement(t);o&&e.push(o)})),e},e.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},e.prototype.getTopRowCtrls=function(){return this.topRowCtrls},e.prototype.getCentreRowCtrls=function(){return this.allRowCtrls},e.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},e.prototype.refreshFloatingRows=function(t,e){var i=this;t.forEach((function(t){t.destroyFirstPass(),t.destroySecondPass()})),t.length=0,e&&e.forEach((function(e){var o=new $c(e,i.beans,!1,!1,i.printLayout);t.push(o)}))},e.prototype.onPinnedRowDataChanged=function(){var t={recycleRows:!0};this.redrawAfterModelUpdate(t)},e.prototype.redrawRow=function(t,e){var i=this;if(void 0===e&&(e=!1),t.sticky)this.stickyRowFeature.refreshStickyNode(t);else{var o=function(e){var o=e[t.rowIndex];o&&o.getRowNode()===t&&(o.destroyFirstPass(),o.destroySecondPass(),e[t.rowIndex]=i.createRowCon(t,!1,!1))};switch(t.rowPinned){case"top":o(this.topRowCtrls);case"bottom":o(this.bottomRowCtrls);default:o(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}e||this.dispatchDisplayedRowsChanged(!1)},e.prototype.redrawRows=function(t){var e=this,i=null!=t;if(i)return null===t||void 0===t||t.forEach((function(t){return e.redrawRow(t,!0)})),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()},e.prototype.getCellToRestoreFocusToAfterRefresh=function(t){var e=(null===t||void 0===t?void 0:t.suppressKeepFocus)?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==e)return null;var i=this.gridOptionsService.getDocument(),o=i.activeElement,n=this.gridOptionsService.getDomData(o,Mc.DOM_DATA_KEY_CELL_CTRL),r=this.gridOptionsService.getDomData(o,$c.DOM_DATA_KEY_ROW_CTRL),s=n||r;return s?e:null},e.prototype.redrawAfterModelUpdate=function(t){void 0===t&&(t={}),this.getLockOnRefresh();var e=this.getCellToRestoreFocusToAfterRefresh(t);this.updateContainerHeights(),this.scrollToTopIfNewData(t);var i=!t.domLayoutChanged&&!!t.recycleRows,o=t.animate&&this.gridOptionsService.isAnimateRows(),n=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(n,o),this.gridBodyCtrl.updateRowCount(),t.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=e&&this.restoreFocusedCell(e),this.releaseLockOnRefresh()},e.prototype.scrollToTopIfNewData=function(t){var e=t.newData||t.newPage,i=this.gridOptionsService.is("suppressScrollOnNewData");e&&!i&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},e.prototype.updateContainerHeights=function(){if(this.printLayout)this.rowContainerHeightService.setModelHeight(null);else{var t=this.paginationProxy.getCurrentPageHeight();0===t&&(t=1),this.rowContainerHeightService.setModelHeight(t)}},e.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},e.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},e.prototype.isRefreshInProgress=function(){return this.refreshInProgress},e.prototype.restoreFocusedCell=function(t){t&&(this.focusService.setRestoreFocusedCell(t),this.onCellFocusChanged({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,api:this.beans.gridApi,columnApi:this.beans.columnApi,context:this.beans.gridOptionsService.context,type:"mock"}))},e.prototype.stopEditing=function(t){void 0===t&&(t=!1),this.getAllRowCtrls().forEach((function(e){e.stopEditing(t)}))},e.prototype.getAllCellCtrls=function(){for(var t=[],e=this.getAllRowCtrls(),i=e.length,o=0;o<i;o++)for(var n=e[o].getAllCellCtrls(),r=n.length,s=0;s<r;s++)t.push(n[s]);return t},e.prototype.getAllRowCtrls=function(){var t,e,i=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],o=Xd(Xd(Xd([],qd(this.topRowCtrls)),qd(this.bottomRowCtrls)),qd(i));try{for(var n=Qd(Object.keys(this.rowCtrlsByRowIndex)),r=n.next();!r.done;r=n.next()){var s=r.value;o.push(this.rowCtrlsByRowIndex[s])}}catch(a){t={error:a}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return o},e.prototype.addRenderedRowListener=function(t,e,i){var o=this.rowCtrlsByRowIndex[e];o&&o.addEventListener(t,i)},e.prototype.flashCells=function(t){void 0===t&&(t={});var e=t.flashDelay,i=t.fadeDelay;this.getCellCtrls(t.rowNodes,t.columns).forEach((function(t){return t.flashCell({flashDelay:e,fadeDelay:i})}))},e.prototype.refreshCells=function(t){var e=this;void 0===t&&(t={});var i={forceRefresh:t.force,newData:!1,suppressFlash:t.suppressFlash};this.getCellCtrls(t.rowNodes,t.columns).forEach((function(t){if(t.refreshShouldDestroy()){var e=t.getRowCtrl();e&&e.refreshCell(t)}else t.refreshCell(i)})),t.rowNodes&&(this.getRowCtrls(t.rowNodes).forEach((function(t){if(t.isFullWidth()){var i=t.refreshFullWidth();i||e.redrawRow(t.getRowNode(),!0)}})),this.dispatchDisplayedRowsChanged(!1))},e.prototype.getCellRendererInstances=function(t){var e,i=this,o=this.getCellCtrls(t.rowNodes,t.columns).map((function(t){return t.getCellRenderer()})).filter((function(t){return null!=t}));if(null===(e=t.columns)||void 0===e?void 0:e.length)return o;var n=[],r=this.mapRowNodes(t.rowNodes);return this.getAllRowCtrls().forEach((function(t){if((!r||i.isRowInMap(t.getRowNode(),r))&&t.isFullWidth()){var e=t.getFullWidthCellRenderer();e&&n.push(e)}})),Xd(Xd([],qd(n)),qd(o))},e.prototype.getCellEditorInstances=function(t){var e=[];return this.getCellCtrls(t.rowNodes,t.columns).forEach((function(t){var i=t.getCellEditor();i&&e.push(i)})),e},e.prototype.getEditingCells=function(){var t=[];return this.getAllCellCtrls().forEach((function(e){if(e.isEditing()){var i=e.getCellPosition();t.push(i)}})),t},e.prototype.mapRowNodes=function(t){if(t){var e={top:{},bottom:{},normal:{}};return t.forEach((function(t){var i=t.id;"top"===t.rowPinned?e.top[i]=t:"bottom"===t.rowPinned?e.bottom[i]=t:e.normal[i]=t})),e}},e.prototype.isRowInMap=function(t,e){var i=t.id,o=t.rowPinned;return"bottom"===o?null!=e.bottom[i]:"top"===o?null!=e.top[i]:null!=e.normal[i]},e.prototype.getRowCtrls=function(t){var e=this,i=this.mapRowNodes(t),o=this.getAllRowCtrls();return t&&i?o.filter((function(t){var o=t.getRowNode();return e.isRowInMap(o,i)})):o},e.prototype.getCellCtrls=function(t,e){var i,o=this;s(e)&&(i={},e.forEach((function(t){var e=o.columnModel.getGridColumn(t);s(e)&&(i[e.getId()]=!0)})));var n=[];return this.getRowCtrls(t).forEach((function(t){t.getAllCellCtrls().forEach((function(t){var e=t.getColumn().getId(),o=i&&!i[e];o||n.push(t)}))})),n},e.prototype.destroy=function(){this.removeAllRowComps(),t.prototype.destroy.call(this)},e.prototype.removeAllRowComps=function(){var t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)},e.prototype.getRowsToRecycle=function(){var t=[];C(this.rowCtrlsByRowIndex,(function(e,i){var o=null==i.getRowNode().id;o&&t.push(e)})),this.removeRowCtrls(t);var e={};return C(this.rowCtrlsByRowIndex,(function(t,i){var o=i.getRowNode();e[o.id]=i})),this.rowCtrlsByRowIndex={},e},e.prototype.removeRowCtrls=function(t){var e=this;t.forEach((function(t){var i=e.rowCtrlsByRowIndex[t];i&&(i.destroyFirstPass(),i.destroySecondPass()),delete e.rowCtrlsByRowIndex[t]}))},e.prototype.onBodyScroll=function(t){"vertical"===t.direction&&this.redraw({afterScroll:!0})},e.prototype.redraw=function(t){void 0===t&&(t={});var e,i=t.afterScroll;this.stickyRowFeature&&po()&&(e=this.getCellToRestoreFocusToAfterRefresh()||void 0);var o=this.firstRenderedRow,n=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();var r=!1;this.stickyRowFeature&&(r=this.stickyRowFeature.checkStickyRows());var s=this.firstRenderedRow!==o||this.lastRenderedRow!==n;if((!i||r||s)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,i),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(i),null!=e)){var a=this.getCellToRestoreFocusToAfterRefresh();null!=e&&null==a&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(e))}},e.prototype.removeRowCompsNotToDraw=function(t){var e={};t.forEach((function(t){return e[t]=!0}));var i=Object.keys(this.rowCtrlsByRowIndex),o=i.filter((function(t){return!e[t]}));this.removeRowCtrls(o)},e.prototype.calculateIndexesToDraw=function(t){var e=this,i=So(this.firstRenderedRow,this.lastRenderedRow),o=function(t,o){var n=o.getRowNode().rowIndex;null!=n&&(n<e.firstRenderedRow||n>e.lastRenderedRow)&&e.doNotUnVirtualiseRow(o)&&i.push(n)};C(this.rowCtrlsByRowIndex,o),C(t,o),i.sort((function(t,e){return t-e}));for(var n=[],r=0;r<i.length;r++){var s=i[r],a=this.paginationProxy.getRow(s);a&&!a.sticky&&n.push(s)}return n},e.prototype.recycleRows=function(t,e,i){var o=this;void 0===e&&(e=!1),void 0===i&&(i=!1);var n=this.calculateIndexesToDraw(t);if(this.removeRowCompsNotToDraw(n),this.printLayout&&(e=!1),n.forEach((function(n){var r=o.createOrUpdateRowCtrl(n,t,e,i);s(r)})),t){var r=i&&!this.gridOptionsService.is("suppressAnimationFrame")&&!this.printLayout;r?this.beans.animationFrameService.addDestroyTask((function(){o.destroyRowCtrls(t,e),o.updateAllRowCtrls(),o.dispatchDisplayedRowsChanged()})):this.destroyRowCtrls(t,e)}this.updateAllRowCtrls()},e.prototype.dispatchDisplayedRowsChanged=function(t){void 0===t&&(t=!1);var e={type:ge.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:t};this.eventService.dispatchEvent(e)},e.prototype.onDisplayedColumnsChanged=function(){var t=this.columnModel.isPinningLeft(),e=this.columnModel.isPinningRight(),i=this.pinningLeft!==t||e!==this.pinningRight;i&&(this.pinningLeft=t,this.pinningRight=e,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},e.prototype.redrawFullWidthEmbeddedRows=function(){var t=[];this.getFullWidthRowCtrls().forEach((function(e){var i=e.getRowNode().rowIndex;t.push(i.toString())})),this.refreshFloatingRowComps(),this.removeRowCtrls(t),this.redraw({afterScroll:!0})},e.prototype.getFullWidthRowCtrls=function(t){var e=this,i=this.mapRowNodes(t);return this.getAllRowCtrls().filter((function(t){if(!t.isFullWidth())return!1;var o=t.getRowNode();return!(null!=i&&!e.isRowInMap(o,i))}))},e.prototype.createOrUpdateRowCtrl=function(t,e,i,o){var n,r=this.rowCtrlsByRowIndex[t];r||(n=this.paginationProxy.getRow(t),s(n)&&s(e)&&e[n.id]&&n.alreadyRendered&&(r=e[n.id],e[n.id]=null));var a=!r;if(a){if(n||(n=this.paginationProxy.getRow(t)),!s(n))return;r=this.createRowCon(n,i,o)}return n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[t]=r,r},e.prototype.destroyRowCtrls=function(t,e){var i=this,o=[];C(t,(function(t,n){n&&(i.cachedRowCtrls&&n.isCacheable()?i.cachedRowCtrls.addRow(n):(n.destroyFirstPass(),e?(i.zombieRowCtrls[n.getInstanceId()]=n,o.push((function(){n.destroySecondPass(),delete i.zombieRowCtrls[n.getInstanceId()]}))):n.destroySecondPass()))})),e&&(o.push((function(){i.updateAllRowCtrls(),i.dispatchDisplayedRowsChanged()})),$(o))},e.prototype.getRowBuffer=function(){var t=this.gridOptionsService.getNum("rowBuffer");return"number"===typeof t?t<0&&(G((function(){return console.warn("AG Grid: rowBuffer should not be negative")}),"warn rowBuffer negative"),t=0,this.gridOptionsService.set("rowBuffer",0)):t=10,t},e.prototype.getRowBufferInPixels=function(){var t=this.getRowBuffer(),e=this.gridOptionsService.getRowHeightAsNumber();return t*e},e.prototype.workOutFirstAndLastRowsToRender=function(){var t,e;if(this.rowContainerHeightService.updateOffset(),this.paginationProxy.isRowsToRender())if(this.printLayout)this.environment.refreshRowHeightVariable(),t=this.paginationProxy.getPageFirstRow(),e=this.paginationProxy.getPageLastRow();else{var i=this.getRowBufferInPixels(),o=this.ctrlsService.getGridBodyCtrl(),n=this.gridOptionsService.is("suppressRowVirtualisation"),r=!1,s=void 0,a=void 0;do{var l=this.paginationProxy.getPixelOffset(),u=this.paginationProxy.getCurrentPagePixelRange(),c=u.pageFirstPixel,h=u.pageLastPixel,p=this.rowContainerHeightService.getDivStretchOffset(),d=o.getScrollFeature().getVScrollPosition(),f=d.top,g=d.bottom;n?(s=c+p,a=h+p):(s=Math.max(f+l-i,c)+p,a=Math.min(g+l+i,h)+p),this.firstVisibleVPixel=Math.max(f+l,c)+p,r=this.ensureAllRowsInRangeHaveHeightsCalculated(s,a)}while(r);var y=this.paginationProxy.getRowIndexAtPixel(s),_=this.paginationProxy.getRowIndexAtPixel(a),m=this.paginationProxy.getPageFirstRow(),v=this.paginationProxy.getPageLastRow();y<m&&(y=m),_>v&&(_=v),t=y,e=_}else t=0,e=-1;var b=this.gridOptionsService.isDomLayout("normal"),C=this.gridOptionsService.is("suppressMaxRenderedRowRestriction"),w=Math.max(this.getRowBuffer(),500);b&&!C&&e-t>w&&(e=t+w);var S=t!==this.firstRenderedRow,E=e!==this.lastRenderedRow;if(S||E){this.firstRenderedRow=t,this.lastRenderedRow=e;var x={type:ge.EVENT_VIEWPORT_CHANGED,firstRow:t,lastRow:e};this.eventService.dispatchEvent(x)}},e.prototype.dispatchFirstDataRenderedEvent=function(){var t=this;if(!this.dataFirstRenderedFired){this.dataFirstRenderedFired=!0;var e={type:ge.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame((function(){t.beans.eventService.dispatchEvent(e)}))}},e.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(t,e){var i=this.paginationProxy.ensureRowHeightsValid(t,e,-1,-1);return i&&this.updateContainerHeights(),i},e.prototype.getFirstVisibleVerticalPixel=function(){return this.firstVisibleVPixel},e.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},e.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},e.prototype.doNotUnVirtualiseRow=function(t){var e=!1,i=!0,o=t.getRowNode(),n=this.focusService.isRowNodeFocused(o),r=t.isEditing(),s=o.detail,a=n||r||s;if(!a)return e;var l=this.paginationProxy.isRowPresent(o);return l?i:e},e.prototype.createRowCon=function(t,e,i){var o=this.cachedRowCtrls?this.cachedRowCtrls.getRow(t):null;if(o)return o;var n=this.gridOptionsService.is("suppressAnimationFrame"),r=i&&!n&&!this.printLayout,s=new $c(t,this.beans,e,r,this.printLayout);return s},e.prototype.getRenderedNodes=function(){var t=this.rowCtrlsByRowIndex;return Object.keys(t).map((function(e){return t[e].getRowNode()}))},e.prototype.getRowByPosition=function(t){var e,i=t.rowIndex;switch(t.rowPinned){case"top":e=this.topRowCtrls[i];break;case"bottom":e=this.bottomRowCtrls[i];break;default:e=this.rowCtrlsByRowIndex[i],e||(e=this.getStickyTopRowCtrls().find((function(t){return t.getRowNode().rowIndex===i}))||null);break}return e},e.prototype.getRowNode=function(t){switch(t.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}},e.prototype.isRangeInRenderedViewport=function(t,e){var i=null==t||null==e;if(i)return!1;var o=t>this.lastRenderedRow,n=e<this.firstRenderedRow,r=!n&&!o;return r},Yd([pt("animationFrameService")],e.prototype,"animationFrameService",void 0),Yd([pt("paginationProxy")],e.prototype,"paginationProxy",void 0),Yd([pt("columnModel")],e.prototype,"columnModel",void 0),Yd([pt("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),Yd([pt("rowModel")],e.prototype,"rowModel",void 0),Yd([pt("focusService")],e.prototype,"focusService",void 0),Yd([pt("beans")],e.prototype,"beans",void 0),Yd([pt("rowContainerHeightService")],e.prototype,"rowContainerHeightService",void 0),Yd([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Yd([ut],e.prototype,"postConstruct",null),e=Yd([ht("rowRenderer")],e),e}(le),tf=function(){function t(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}return t.prototype.addRow=function(t){if(this.entriesMap[t.getRowNode().id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){var e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}},t.prototype.getRow=function(t){if(null==t||null==t.id)return null;var e=this.entriesMap[t.id];if(!e)return null;this.removeFromCache(e),e.setCached(!1);var i=e.getRowNode()!=t;return i?null:e},t.prototype.removeFromCache=function(t){var e=t.getRowNode().id;delete this.entriesMap[e],Nt(this.entriesList,t)},t.prototype.getEntries=function(){return this.entriesList},t}(),ef=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),of=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},nf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ef(e,t),e.prototype.formatValue=function(t,e,i,o,n){void 0===n&&(n=!0);var r,s=null,a=t.getColDef();if(o?r=o:n&&(r=a.valueFormatter),r){var l={value:i,node:e,data:e?e.data:null,colDef:a,column:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};s="function"===typeof r?r(l):this.expressionService.evaluate(r,l)}else if(a.refData)return a.refData[i]||"";return null==s&&Array.isArray(i)&&(s=i.join(", ")),s},of([pt("expressionService")],e.prototype,"expressionService",void 0),e=of([ht("valueFormatterService")],e),e}(le),rf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),sf=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},af=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rf(e,t),e.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsService.get("pinnedTopRowData")),this.setPinnedBottomRowData(this.gridOptionsService.get("pinnedBottomRowData"))},e.prototype.isEmpty=function(t){var e="top"===t?this.pinnedTopRows:this.pinnedBottomRows;return l(e)},e.prototype.isRowsToRender=function(t){return!this.isEmpty(t)},e.prototype.getRowAtPixel=function(t,e){var i="top"===e?this.pinnedTopRows:this.pinnedBottomRows;if(l(i))return 0;for(var o=0;o<i.length;o++){var n=i[o],r=n.rowTop+n.rowHeight-1;if(r>=t)return o}return i.length-1},e.prototype.setPinnedTopRowData=function(t){this.pinnedTopRows=this.createNodesFromData(t,!0);var e={type:ge.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)},e.prototype.setPinnedBottomRowData=function(t){this.pinnedBottomRows=this.createNodesFromData(t,!1);var e={type:ge.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)},e.prototype.createNodesFromData=function(t,e){var i=this,o=[];if(t){var n=0;t.forEach((function(t,r){var s=new Fa(i.beans);s.data=t;var a=e?Fa.ID_PREFIX_TOP_PINNED:Fa.ID_PREFIX_BOTTOM_PINNED;s.id=a+r,s.rowPinned=e?"top":"bottom",s.setRowTop(n),s.setRowHeight(i.gridOptionsService.getRowHeightForNode(s).height),s.setRowIndex(r),n+=s.rowHeight,o.push(s)}))}return o},e.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},e.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},e.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},e.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},e.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},e.prototype.getPinnedTopRow=function(t){return this.pinnedTopRows[t]},e.prototype.getPinnedBottomRow=function(t){return this.pinnedBottomRows[t]},e.prototype.forEachPinnedTopRow=function(t){l(this.pinnedTopRows)||this.pinnedTopRows.forEach(t)},e.prototype.forEachPinnedBottomRow=function(t){l(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(t)},e.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},e.prototype.getTotalHeight=function(t){if(!t||0===t.length)return 0;var e=Dt(t);return e.rowTop+e.rowHeight},sf([pt("beans")],e.prototype,"beans",void 0),sf([ut],e.prototype,"init",null),e=sf([ht("pinnedRowModel")],e),e}(le);(function(t){t["Applied"]="Applied",t["StoreNotFound"]="StoreNotFound",t["StoreLoading"]="StoreLoading",t["StoreWaitingToLoad"]="StoreWaitingToLoad",t["StoreLoadingFailed"]="StoreLoadingFailed",t["StoreWrongType"]="StoreWrongType",t["Cancelled"]="Cancelled"})(Pd||(Pd={}));var lf,uf=function(){function t(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}return t.prototype.setInactive=function(){this.active=!1},t.prototype.isActive=function(){return this.active},t.prototype.depthFirstSearchChangedPath=function(t,e){if(t.children)for(var i=0;i<t.children.length;i++)this.depthFirstSearchChangedPath(t.children[i],e);e(t.rowNode)},t.prototype.depthFirstSearchEverything=function(t,e,i){if(t.childrenAfterGroup)for(var o=0;o<t.childrenAfterGroup.length;o++){var n=t.childrenAfterGroup[o];n.childrenAfterGroup?this.depthFirstSearchEverything(t.childrenAfterGroup[o],e,i):i&&e(n)}e(t)},t.prototype.forEachChangedNodeDepthFirst=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)},t.prototype.executeFromRootNode=function(t){t(this.pathRoot.rowNode)},t.prototype.createPathItems=function(t){var e=t,i=0;while(!this.mapToItems[e.id]){var o={rowNode:e,children:null};this.mapToItems[e.id]=o,i++,e=e.parent}return i},t.prototype.populateColumnsMap=function(t,e){var i=this;if(this.keepingColumns&&e){var o=t;while(o)this.nodeIdsToColumns[o.id]||(this.nodeIdsToColumns[o.id]={}),e.forEach((function(t){return i.nodeIdsToColumns[o.id][t.getId()]=!0})),o=o.parent}},t.prototype.linkPathItems=function(t,e){for(var i=t,o=0;o<e;o++){var n=this.mapToItems[i.id],r=this.mapToItems[i.parent.id];r.children||(r.children=[]),r.children.push(n),i=i.parent}},t.prototype.addParentNode=function(t,e){if(t&&!t.isRowPinned()){var i=this.createPathItems(t);this.linkPathItems(t,i),this.populateColumnsMap(t,e)}},t.prototype.canSkip=function(t){return this.active&&!this.mapToItems[t.id]},t.prototype.getValueColumnsForNode=function(t,e){if(!this.keepingColumns)return e;var i=this.nodeIdsToColumns[t.id],o=e.filter((function(t){return i[t.getId()]}));return o},t.prototype.getNotValueColumnsForNode=function(t,e){if(!this.keepingColumns)return null;var i=this.nodeIdsToColumns[t.id],o=e.filter((function(t){return!i[t.getId()]}));return o},t}(),cf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),hf=function(t){function e(i){var o=t.call(this)||this;return o.state=e.STATE_WAITING_TO_LOAD,o.version=0,o.id=i,o}return cf(e,t),e.prototype.getId=function(){return this.id},e.prototype.load=function(){this.state=e.STATE_LOADING,this.loadFromDatasource()},e.prototype.getVersion=function(){return this.version},e.prototype.setStateWaitingToLoad=function(){this.version++,this.state=e.STATE_WAITING_TO_LOAD},e.prototype.getState=function(){return this.state},e.prototype.pageLoadFailed=function(t){var i=this.isRequestMostRecentAndLive(t);i&&(this.state=e.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},e.prototype.success=function(t,e){this.successCommon(t,e)},e.prototype.pageLoaded=function(t,e,i){this.successCommon(t,{rowData:e,rowCount:i})},e.prototype.isRequestMostRecentAndLive=function(t){var e=t===this.version,i=this.isAlive();return e&&i},e.prototype.successCommon=function(t,i){this.dispatchLoadCompleted();var o=this.isRequestMostRecentAndLive(t);o&&(this.state=e.STATE_LOADED,this.processServerResult(i))},e.prototype.dispatchLoadCompleted=function(t){void 0===t&&(t=!0);var i={type:e.EVENT_LOAD_COMPLETE,success:t,block:this};this.dispatchEvent(i)},e.EVENT_LOAD_COMPLETE="loadComplete",e.STATE_WAITING_TO_LOAD="needsLoading",e.STATE_LOADING="loading",e.STATE_LOADED="loaded",e.STATE_FAILED="failed",e}(le),pf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),df=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ff=function(t,e){return function(i,o){e(i,o,t)}},gf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.activeBlockLoadsCount=0,e.blocks=[],e.active=!0,e}var i;return pf(e,t),i=e,e.prototype.postConstruct=function(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();var t=this.gridOptionsService.getNum("blockLoadDebounceMillis");t&&t>0&&(this.checkBlockToLoadDebounce=sr.debounce(this.performCheckBlocksToLoad.bind(this),t))},e.prototype.setBeans=function(t){this.logger=t.create("RowNodeBlockLoader")},e.prototype.getMaxConcurrentDatasourceRequests=function(){var t=this.gridOptionsService.getNum("maxConcurrentDatasourceRequests");return null==t?2:t<=0?void 0:t},e.prototype.addBlock=function(t){this.blocks.push(t),t.addEventListener(hf.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},e.prototype.removeBlock=function(t){sr.removeFromArray(this.blocks,t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.active=!1},e.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:i.BLOCK_LOADED_EVENT}),0==this.activeBlockLoadsCount&&this.dispatchEvent({type:i.BLOCK_LOADER_FINISHED_EVENT})},e.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},e.prototype.performCheckBlocksToLoad=function(){if(this.active)if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)this.logger.log("checkBlockToLoad: max loads exceeded");else{var t=this.getAvailableLoadingCount(),e=this.blocks.filter((function(t){return t.getState()===hf.STATE_WAITING_TO_LOAD})).slice(0,t);this.registerLoads(e.length),e.forEach((function(t){return t.load()})),this.printCacheStatus()}},e.prototype.getBlockState=function(){if(this.gridOptionsService.isRowModelType("serverSide")){var t=this.rowModel;return t.getBlockStates()}var e={};return this.blocks.forEach((function(t){var i=t.getBlockStateJson(),o=i.id,n=i.state;e[o]=n})),e},e.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+", blocks = "+JSON.stringify(this.getBlockState()))},e.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},e.prototype.registerLoads=function(t){this.activeBlockLoadsCount+=t},e.prototype.getAvailableLoadingCount=function(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0},e.BLOCK_LOADED_EVENT="blockLoaded",e.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",df([pt("rowModel")],e.prototype,"rowModel",void 0),df([ut],e.prototype,"postConstruct",null),df([ff(0,gt("loggerFactory"))],e.prototype,"setBeans",null),e=i=df([ht("rowNodeBlockLoader")],e),e}(le),yf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),_f=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},mf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentPage=0,e.topDisplayedRowIndex=0,e.bottomDisplayedRowIndex=0,e.pixelOffset=0,e.masterRowCount=0,e}return yf(e,t),e.prototype.postConstruct=function(){this.active=this.gridOptionsService.is("pagination"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,ge.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationPageSizeChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()},e.prototype.ensureRowHeightsValid=function(t,e,i,o){var n=this.rowModel.ensureRowHeightsValid(t,e,this.getPageFirstRow(),this.getPageLastRow());return n&&this.calculatePages(),n},e.prototype.isPaginateChildRows=function(){var t=this.gridOptionsService.is("groupRemoveSingleChildren")||this.gridOptionsService.is("groupRemoveLowestSingleChildren");return!!t||this.gridOptionsService.is("paginateChildRows")},e.prototype.onModelUpdated=function(t){this.calculatePages();var e={type:ge.EVENT_PAGINATION_CHANGED,animate:!!t&&t.animate,newData:!!t&&t.newData,newPage:!!t&&t.newPage,keepRenderedRows:!!t&&t.keepRenderedRows};this.eventService.dispatchEvent(e)},e.prototype.onPaginationPageSizeChanged=function(){this.active=this.gridOptionsService.is("pagination"),this.calculatePages();var t={type:ge.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(t)},e.prototype.goToPage=function(t){if(this.active&&this.currentPage!==t&&"number"===typeof this.currentPage){this.currentPage=t;var e={type:ge.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0};this.onModelUpdated(e)}},e.prototype.getPixelOffset=function(){return this.pixelOffset},e.prototype.getRow=function(t){return this.rowModel.getRow(t)},e.prototype.getRowNode=function(t){return this.rowModel.getRowNode(t)},e.prototype.getRowIndexAtPixel=function(t){return this.rowModel.getRowIndexAtPixel(t)},e.prototype.getCurrentPageHeight=function(){return a(this.topRowBounds)||a(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},e.prototype.getCurrentPagePixelRange=function(){var t=this.topRowBounds?this.topRowBounds.rowTop:0,e=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:t,pageLastPixel:e}},e.prototype.isRowPresent=function(t){if(!this.rowModel.isRowPresent(t))return!1;var e=t.rowIndex>=this.topDisplayedRowIndex&&t.rowIndex<=this.bottomDisplayedRowIndex;return e},e.prototype.isEmpty=function(){return this.rowModel.isEmpty()},e.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},e.prototype.forEachNode=function(t){return this.rowModel.forEachNode(t)},e.prototype.forEachNodeOnPage=function(t){for(var e=this.getPageFirstRow(),i=this.getPageLastRow(),o=e;o<=i;o++){var n=this.getRow(o);n&&t(n)}},e.prototype.getType=function(){return this.rowModel.getType()},e.prototype.getRowBounds=function(t){var e=this.rowModel.getRowBounds(t);return e.rowIndex=t,e},e.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},e.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},e.prototype.getRowCount=function(){return this.rowModel.getRowCount()},e.prototype.getPageForIndex=function(t){return Math.floor(t/this.pageSize)},e.prototype.goToPageWithIndex=function(t){if(this.active){var e=this.getPageForIndex(t);this.goToPage(e)}},e.prototype.isRowInPage=function(t){if(!this.active)return!0;var e=this.getPageForIndex(t.rowIndex);return e===this.currentPage},e.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},e.prototype.getCurrentPage=function(){return this.currentPage},e.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},e.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},e.prototype.goToFirstPage=function(){this.goToPage(0)},e.prototype.goToLastPage=function(){var t=this.rowModel.getRowCount(),e=Math.floor(t/this.pageSize);this.goToPage(e)},e.prototype.getPageSize=function(){return this.pageSize},e.prototype.getTotalPages=function(){return this.totalPages},e.prototype.setPageSize=function(){this.pageSize=this.gridOptionsService.getNum("paginationPageSize"),(null==this.pageSize||this.pageSize<1)&&(this.pageSize=100)},e.prototype.calculatePages=function(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(s(this.topRowBounds)?this.topRowBounds.rowTop:0)},e.prototype.setPixelOffset=function(t){this.pixelOffset!==t&&(this.pixelOffset=t,this.eventService.dispatchEvent({type:ge.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},e.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},e.prototype.adjustCurrentPageIfInvalid=function(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)},e.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)this.setZeroRows();else{var t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid();var e=this.pageSize*this.currentPage,i=this.pageSize*(this.currentPage+1)-1;if(i>t&&(i=t),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(e),i===t)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var o=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=o-1}}},e.prototype.getMasterRowCount=function(){return this.masterRowCount},e.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),0!==this.masterRowCount){var t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>t&&(this.bottomDisplayedRowIndex=t)}else this.setZeroRows()},e.prototype.calculatedPagesNotActive=function(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},_f([pt("rowModel")],e.prototype,"rowModel",void 0),_f([ut],e.prototype,"postConstruct",null),e=_f([ht("paginationProxy")],e),e}(le),vf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),bf=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Cf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vf(e,t),e.prototype.processAllCellClasses=function(t,e,i,o){this.processClassRules(t.cellClassRules,e,i,o),this.processStaticCellClasses(t,e,i)},e.prototype.processClassRules=function(t,e,i,o){if(null!=t){for(var n=Object.keys(t),r={},s={},a=function(i){var o,a=n[i],u=t[a];"string"===typeof u?o=l.expressionService.evaluate(u,e):"function"===typeof u&&(o=u(e)),a.split(" ").forEach((function(t){null!=t&&""!=t.trim()&&(o?r[t]=!0:s[t]=!0)}))},l=this,u=0;u<n.length;u++)a(u);o&&Object.keys(s).forEach(o),Object.keys(r).forEach(i)}},e.prototype.getStaticCellClasses=function(t,e){var i,o=t.cellClass;if(!o)return[];if("function"===typeof o){var n=o;i=n(e)}else i=o;return"string"===typeof i&&(i=[i]),i||[]},e.prototype.processStaticCellClasses=function(t,e,i){var o=this.getStaticCellClasses(t,e);o.forEach((function(t){i(t)}))},bf([pt("expressionService")],e.prototype,"expressionService",void 0),e=bf([ht("stylingService")],e),e}(le),wf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Sf=function(t){function e(e){return t.call(this,e,"ag-toggle-button")||this}return wf(e,t),e.prototype.setValue=function(e,i){return t.prototype.setValue.call(this,e,i),this.addOrRemoveCssClass("ag-selected",this.getValue()),this},e}(as),Ef=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),xf=function(t){function e(e){return t.call(this,e,"ag-text-area",null,"textarea")||this}return Ef(e,t),e.prototype.setValue=function(e,i){var o=t.prototype.setValue.call(this,e,i);return this.eInput.value=e,o},e.prototype.setCols=function(t){return this.eInput.cols=t,this},e.prototype.setRows=function(t){return this.eInput.rows=t,this},e}(rs),Of=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Rf=function(t){function e(e){return t.call(this,e,"ag-date-field","date")||this}return Of(e,t),e.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));var i=so();this.addManagedListener(this.eInput,"mousedown",(function(){e.isDisabled()||i||e.eInput.focus()})),this.eInput.step="any"},e.prototype.onWheel=function(t){document.activeElement===this.eInput&&t.preventDefault()},e.prototype.setMin=function(t){var e,i=t instanceof Date?null!==(e=Ao(null!==t&&void 0!==t?t:null,!1))&&void 0!==e?e:void 0:t;return this.min===i||(this.min=i,Tn(this.eInput,"min",i)),this},e.prototype.setMax=function(t){var e,i=t instanceof Date?null!==(e=Ao(null!==t&&void 0!==t?t:null,!1))&&void 0!==e?e:void 0:t;return this.max===i||(this.max=i,Tn(this.eInput,"max",i)),this},e.prototype.setStep=function(t){return this.step===t||(this.step=t,Tn(this.eInput,"step",t)),this},e.prototype.getDate=function(){var t;if(this.eInput.validity.valid)return null!==(t=Fo(this.getValue()))&&void 0!==t?t:void 0},e.prototype.setDate=function(t,e){this.setValue(Ao(null!==t&&void 0!==t?t:null,!1),e)},e}(Ls),If=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Tf=function(t){function e(e){return t.call(this,e,"ag-range-field","range")||this}return If(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this);var e=this.config,i=e.min,o=e.max,n=e.step;null!=i&&this.setMinValue(i),null!=o&&this.setMaxValue(o),this.setStep(n||1)},e.prototype.addInputListeners=function(){var t=this;this.addManagedListener(this.eInput,"input",(function(e){var i=e.target.value;t.setValue(i)}))},e.prototype.setMinValue=function(t){return this.min=t,this.eInput.setAttribute("min",t.toString()),this},e.prototype.setMaxValue=function(t){return this.max=t,this.eInput.setAttribute("max",t.toString()),this},e.prototype.setStep=function(t){return this.eInput.setAttribute("step",t.toString()),this},e.prototype.setValue=function(e,i){null!=this.min&&(e=Math.max(parseFloat(e),this.min).toString()),null!=this.max&&(e=Math.min(parseFloat(e),this.max).toString());var o=t.prototype.setValue.call(this,e,i);return this.eInput.value=e,o},e}(rs),Pf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Df=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},kf=function(t){function e(e,i){var o=t.call(this,'<div class="ag-rich-select-row" role="presentation"></div>')||this;return o.params=e,o.wrapperEl=i,o}return Pf(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.getGui(),"mouseup",this.onMouseUp.bind(this))},e.prototype.setState=function(t){var e="";this.params.valueFormatter&&(e=this.params.valueFormatter(t));var i=this.populateWithRenderer(t,e);i||this.populateWithoutRenderer(t,e),this.value=t},e.prototype.highlightString=function(t){var e=this.parsedValue;if(!this.params.cellRenderer&&s(e))if(s(t)){var i=null===e||void 0===e?void 0:e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());if(i>=0){var o=i+t.length,n=xe(e.slice(0,i),!0),r=xe(e.slice(i,o),!0),a=xe(e.slice(o));this.renderValueWithoutRenderer(n+'<span class="ag-rich-select-row-text-highlight">'+r+"</span>"+a)}}else this.renderValueWithoutRenderer(e)},e.prototype.updateHighlighted=function(t){var e,i=this.getGui(),o="ag-rich-select-row-"+this.getCompId();if(null===(e=i.parentElement)||void 0===e||e.setAttribute("id",o),t){var n=this.getParentComponent().getAriaElement();Li(n,o),this.wrapperEl.setAttribute("data-active-option",o)}Ki(i.parentElement,t),this.addOrRemoveCssClass("ag-rich-select-row-selected",t)},e.prototype.populateWithoutRenderer=function(t,e){var i=this.gridOptionsService.getDocument(),o=this.getGui(),n=i.createElement("span");n.style.overflow="hidden",n.style.textOverflow="ellipsis";var r=xe(s(e)?e:t,!0);this.parsedValue=s(r)?r:null,o.appendChild(n),this.renderValueWithoutRenderer(r)},e.prototype.renderValueWithoutRenderer=function(t){var e=this.getGui().querySelector("span");e&&(e.innerHTML=s(t)?t:"&nbsp;")},e.prototype.populateWithRenderer=function(t,e){var i,o,n=this;return this.params.cellRenderer&&(o=this.userComponentFactory.getCellRendererDetails(this.params,{value:t,valueFormatted:e,api:this.gridOptionsService.api})),o&&(i=o.newAgStackInstance()),i&&Dn(i,this.getGui()),!!i&&(i.then((function(t){n.addDestroyFunc((function(){n.getContext().destroyBean(t)}))})),!0)},e.prototype.onMouseUp=function(){var t=this.getParentComponent(),e={type:ge.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};null===t||void 0===t||t.dispatchEvent(e)},Df([pt("userComponentFactory")],e.prototype,"userComponentFactory",void 0),Df([ut],e.prototype,"postConstruct",null),e}(vr),Af=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Lf=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Mf=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},Ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Af(e,t),e.prototype.initialiseTabGuard=function(t){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var e=[this.eTopGuard,this.eBottomGuard],i={setTabIndex:function(t){e.forEach((function(e){return null!=t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new Fp({comp:i,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:t.onFocusIn,onFocusOut:t.onFocusOut,focusInnerElement:t.focusInnerElement,handleKeyDown:t.handleKeyDown,onTabKeyDown:t.onTabKeyDown,shouldStopEventPropagation:t.shouldStopEventPropagation}))},e.prototype.createTabGuard=function(t){var e=document.createElement("div"),i="top"===t?pp.TAB_GUARD_TOP:pp.TAB_GUARD_BOTTOM;return e.classList.add(pp.TAB_GUARD,i),Ci(e,"presentation"),e},e.prototype.addTabGuards=function(t,e){this.eFocusableElement.insertAdjacentElement("afterbegin",t),this.eFocusableElement.insertAdjacentElement("beforeend",e)},e.prototype.removeAllChildrenExceptTabGuards=function(){var t=[this.eTopGuard,this.eBottomGuard];rn(this.getFocusableElement()),this.addTabGuards.apply(this,Mf([],Lf(t)))},e.prototype.forceFocusOutOfContainer=function(t){void 0===t&&(t=!1),this.tabGuardCtrl.forceFocusOutOfContainer(t)},e.prototype.appendChild=function(e,i){On(e)||(e=e.getGui());var o=this.eBottomGuard;o?o.insertAdjacentElement("beforebegin",e):t.prototype.appendChild.call(this,e,i)},e}(vr),Nf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Vf=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Bf=function(t){function e(i){var o=t.call(this,e.getTemplate((null===i||void 0===i?void 0:i.cssIdentifier)||"default"))||this;o.renderedRows=new Map,o.rowHeight=20;var n=i||{},r=n.cssIdentifier,s=void 0===r?"default":r,a=n.ariaRole,l=void 0===a?"listbox":a,u=n.listName;return o.cssIdentifier=s,o.ariaRole=l,o.listName=u,o}return Nf(e,t),e.prototype.postConstruct=function(){var t=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(e){return t.onFocusIn(e)},onFocusOut:function(e){return t.onFocusOut(e)},focusInnerElement:function(e){return t.focusInnerElement(e)},onTabKeyDown:function(e){return t.onTabKeyDown(e)},handleKeyDown:function(e){return t.handleKeyDown(e)}}),this.setAriaProperties(),this.addManagedListener(this.eventService,ge.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))},e.prototype.onGridStylesChanged=function(){this.rowHeight=this.getItemHeight(),this.refresh()},e.prototype.setAriaProperties=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaDefaultListName",this.listName||"List"),i=this.eContainer;Ci(i,this.ariaRole),Oi(i,e)},e.prototype.addResizeObserver=function(){var t=this,e=function(){return t.animationFrameService.requestAnimationFrame((function(){return t.drawVirtualRows()}))},i=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(i)},e.prototype.focusInnerElement=function(t){this.focusRow(t?this.model.getRowCount()-1:0)},e.prototype.onFocusIn=function(t){var e=t.target;return e.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=Ei(e)-1),!1},e.prototype.onFocusOut=function(t){return this.getFocusableElement().contains(t.relatedTarget)||(this.lastFocusedRowIndex=null),!1},e.prototype.handleKeyDown=function(t){switch(t.key){case Nn.UP:case Nn.DOWN:this.navigate(t.key===Nn.UP)&&t.preventDefault();break}},e.prototype.onTabKeyDown=function(t){this.navigate(t.shiftKey)?t.preventDefault():(Jt(t),this.forceFocusOutOfContainer(t.shiftKey))},e.prototype.navigate=function(t){if(null==this.lastFocusedRowIndex)return!1;var e=this.lastFocusedRowIndex+(t?-1:1);return!(e<0||e>=this.model.getRowCount())&&(this.focusRow(e),!0)},e.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},e.prototype.focusRow=function(t){var e=this;this.ensureIndexVisible(t),window.setTimeout((function(){if(e.isAlive()){var i=e.renderedRows.get(t);i&&i.eDiv.focus()}}),10)},e.prototype.getComponentAt=function(t){var e=this.renderedRows.get(t);return e&&e.rowComponent},e.prototype.forEachRenderedRow=function(t){this.renderedRows.forEach((function(e,i){return t(e.rowComponent,i)}))},e.getTemplate=function(t){return'<div class="ag-virtual-list-viewport ag-'+t+'-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-'+t+'-virtual-list-container" ref="eContainer"></div>\n            </div>'},e.prototype.getItemHeight=function(){return this.environment.getListItemHeight()},e.prototype.ensureIndexVisible=function(t,e){void 0===e&&(e=!0);var i=this.model.getRowCount();if("number"!==typeof t||t<0||t>=i)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+t),!1;var o=t*this.rowHeight,n=o+this.rowHeight,r=this.getGui(),s=r.scrollTop,a=r.offsetHeight,l=s+a,u=e?0:this.rowHeight,c=s>o+u,h=l<n-u;if(c)return r.scrollTop=o,!0;if(h){var p=n-a;return r.scrollTop=p,!0}return!1},e.prototype.setComponentCreator=function(t){this.componentCreator=t},e.prototype.setComponentUpdater=function(t){this.componentUpdater=t},e.prototype.getRowHeight=function(){return this.rowHeight},e.prototype.getScrollTop=function(){return this.getGui().scrollTop},e.prototype.setRowHeight=function(t){this.rowHeight=t,this.refresh()},e.prototype.refresh=function(t){var e=this;if(null!=this.model&&this.isAlive()){var i=this.model.getRowCount();this.eContainer.style.height=i*this.rowHeight+"px",X((function(){return e.eContainer.clientHeight>=i*e.rowHeight}),(function(){e.isAlive()&&(e.canSoftRefresh(t)?e.drawVirtualRows(!0):(e.clearVirtualRows(),e.drawVirtualRows()))}))}},e.prototype.canSoftRefresh=function(t){return!!(t&&this.renderedRows.size&&"function"===typeof this.model.areRowsEqual&&this.componentUpdater)},e.prototype.clearVirtualRows=function(){var t=this;this.renderedRows.forEach((function(e,i){return t.removeRow(i)}))},e.prototype.drawVirtualRows=function(t){if(this.isAlive()&&this.model){var e=this.getGui(),i=e.scrollTop,o=i+e.offsetHeight,n=Math.floor(i/this.rowHeight),r=Math.floor(o/this.rowHeight);this.ensureRowsRendered(n,r,t)}},e.prototype.ensureRowsRendered=function(t,e,i){var o=this;this.renderedRows.forEach((function(i,n){(n<t||n>e)&&n!==o.lastFocusedRowIndex&&o.removeRow(n)})),i&&this.refreshRows();for(var n=t;n<=e;n++)this.renderedRows.has(n)||n<this.model.getRowCount()&&this.insertRow(n)},e.prototype.insertRow=function(t){var e=this,i=this.model.getRow(t),o=document.createElement("div");if(o.classList.add("ag-virtual-list-item","ag-"+this.cssIdentifier+"-virtual-list-item"),Ci(o,"tree"===this.ariaRole?"treeitem":"option"),Ni(o,this.model.getRowCount()),Vi(o,t+1),o.setAttribute("tabindex","-1"),"function"===typeof this.model.isRowSelected){var n=this.model.isRowSelected(t);Ki(o,!!n),Yi(o,n)}o.style.height=this.rowHeight+"px",o.style.top=this.rowHeight*t+"px";var r=this.componentCreator(i,o);r.addGuiEventListener("focusin",(function(){return e.lastFocusedRowIndex=t})),o.appendChild(r.getGui()),this.renderedRows.has(t-1)?this.renderedRows.get(t-1).eDiv.insertAdjacentElement("afterend",o):this.renderedRows.has(t+1)?this.renderedRows.get(t+1).eDiv.insertAdjacentElement("beforebegin",o):this.eContainer.appendChild(o),this.renderedRows.set(t,{rowComponent:r,eDiv:o,value:i})},e.prototype.removeRow=function(t){var e=this.renderedRows.get(t);this.eContainer.removeChild(e.eDiv),this.destroyBean(e.rowComponent),this.renderedRows.delete(t)},e.prototype.refreshRows=function(){var t=this,e=this.model.getRowCount();this.renderedRows.forEach((function(i,o){var n,r;if(o>=e)t.removeRow(o);else{var s=t.model.getRow(o);(null===(r=(n=t.model).areRowsEqual)||void 0===r?void 0:r.call(n,i.value,s))?t.componentUpdater(s,i.rowComponent):t.removeRow(o)}}))},e.prototype.addScrollListener=function(){var t=this;this.addGuiEventListener("scroll",(function(){return t.drawVirtualRows()}),{passive:!0})},e.prototype.setModel=function(t){this.model=t},e.prototype.getAriaElement=function(){return this.eContainer},e.prototype.destroy=function(){this.isAlive()&&(this.clearVirtualRows(),t.prototype.destroy.call(this))},Vf([pt("resizeObserverService")],e.prototype,"resizeObserverService",void 0),Vf([pt("animationFrameService")],e.prototype,"animationFrameService",void 0),Vf([br("eContainer")],e.prototype,"eContainer",void 0),Vf([ut],e.prototype,"postConstruct",null),e}(Ff),Gf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),jf=function(){return jf=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},jf.apply(this,arguments)},Hf=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},$f='\n    <div class="ag-picker-field" role="presentation">\n        <div ref="eLabel"></div>\n            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">\n            <div ref="eDisplayField" class="ag-picker-field-display"></div>\n            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n        </div>\n    </div>',Wf=function(t){function e(e){var i,o,n=t.call(this,jf(jf({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:null!==(i=null===e||void 0===e?void 0:e.template)&&void 0!==i?i:$f,modalPicker:!1},e),{maxPickerHeight:null!==(o=null===e||void 0===e?void 0:e.maxPickerHeight)&&void 0!==o?o:"calc(var(--ag-row-height) * 6.5)"}))||this;n.searchString="",n.highlightedItem=-1,n.lastRowHovered=-1,n.searchStringCreator=null;var r=e||{},s=r.cellRowHeight,a=r.value,l=r.valueList,u=r.searchStringCreator;return null!=s&&(n.cellRowHeight=s),void 0!==a&&(n.value=a),null!=l&&(n.values=l),u&&(n.searchStringCreator=u),n}return Gf(e,t),e.prototype.postConstruct=function(){var e,i=this;t.prototype.postConstruct.call(this),this.createLoadingElement(),this.createListComponent();var o=this.config,n=o.allowTyping,r=o.placeholder;n?(this.eInput.setAutoComplete(!1).setInputPlaceholder(r),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=null!==(e=this.gridOptionsService.getNum("tabIndex"))&&void 0!==e?e:0;var s=this.config.searchDebounceDelay,a=void 0===s?300:s;this.clearSearchString=Y(this.clearSearchString,a),this.renderSelectedValue(),n&&(this.eInput.onValueChange((function(t){return i.searchTextFromString(t)})),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))},e.prototype.createLoadingElement=function(){var t=this.gridOptionsService.getDocument(),e=this.localeService.getLocaleTextFunc(),i=t.createElement("div");i.classList.add("ag-loading-text"),i.innerText=e("loadingOoo","Loading..."),this.eLoading=i},e.prototype.createListComponent=function(){var t=this;this.listComponent=this.createBean(new Bf({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this)),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,ge.EVENT_FIELD_PICKER_VALUE_SELECTED,(function(e){t.onListValueSelected(e.value,e.fromEnterKey)}));var e=this.cellRowHeight;e&&this.listComponent.setRowHeight(e);var i=this.listComponent.getGui(),o=this.listComponent.getAriaElement();this.addManagedListener(i,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(i,"mousedown",(function(t){return t.preventDefault()})),i.classList.add("ag-rich-select-list");var n="ag-rich-select-list-"+this.listComponent.getCompId();o.setAttribute("id",n);var r=this.localeService.getLocaleTextFunc(),s=r(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);Oi(o,s),qi(this.eWrapper,o)},e.prototype.renderSelectedValue=function(){var t,e,i=this,o=this,n=o.value,r=o.eDisplayField,a=o.config,l=this.config.valueFormatter?this.config.valueFormatter(n):n;if(a.allowTyping)this.eInput.setValue(l);else if(a.cellRenderer&&(t=this.userComponentFactory.getCellRendererDetails(this.config,{value:n,valueFormatted:l,api:this.gridOptionsService.api})),t&&(e=t.newAgStackInstance()),e)rn(r),Dn(e,r),e.then((function(t){i.addDestroyFunc((function(){return i.getContext().destroyBean(t)}))}));else if(s(this.value))r.innerText=l,r.classList.remove("ag-display-as-placeholder");else{var u=a.placeholder;s(u)?(r.innerHTML=""+xe(u),r.classList.add("ag-display-as-placeholder")):rn(r)}},e.prototype.getCurrentValueIndex=function(){var t=this,e=t.currentList,i=t.value;if(null==i)return-1;for(var o=0;o<e.length;o++)if(e[o]===i)return o;return-1},e.prototype.highlightFilterMatch=function(){var t,e=this;null===(t=this.listComponent)||void 0===t||t.forEachRenderedRow((function(t,i){t.highlightString(e.searchString)}))},e.prototype.highlightSelectedValue=function(t){var e,i=this;null==t&&(t=this.getCurrentValueIndex()),this.highlightedItem=t,null===(e=this.listComponent)||void 0===e||e.forEachRenderedRow((function(e,o){var n=-1!==t&&i.highlightedItem===o;e.updateHighlighted(n)}))},e.prototype.setRowHeight=function(t){t!==this.cellRowHeight&&(this.cellRowHeight=t),this.listComponent&&this.listComponent.setRowHeight(t)},e.prototype.createPickerComponent=function(){var t=this.values;return t&&this.setValueList({valueList:t}),this.listComponent},e.prototype.setSearchStringCreator=function(t){this.searchStringCreator=t},e.prototype.setValueList=function(t){var e=t.valueList,i=t.refresh;this.listComponent&&this.currentList!==e&&(this.currentList=e,this.listComponent.setModel({getRowCount:function(){return e.length},getRow:function(t){return e[t]}}),i&&(this.values?this.listComponent.refresh():(this.values=e,this.isPickerDisplayed&&this.showCurrentValueInPicker())))},e.prototype.showPicker=function(){t.prototype.showPicker.call(this),this.showCurrentValueInPicker()},e.prototype.showCurrentValueInPicker=function(){var t,e;if(this.listComponent)if(this.currentList){(null===(t=this.eLoading)||void 0===t?void 0:t.offsetParent)&&(null===(e=this.eLoading.parentElement)||void 0===e||e.removeChild(this.eLoading));var i=this.getCurrentValueIndex();-1!==i?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(i),this.listComponent.refresh(!0),this.highlightSelectedValue(i)):this.listComponent.refresh()}else this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading)},e.prototype.beforeHidePicker=function(){this.highlightedItem=-1,t.prototype.beforeHidePicker.call(this)},e.prototype.onWrapperFocus=function(t){this.eInput&&this.eInput.getFocusableElement().focus()},e.prototype.onWrapperFocusOut=function(t){this.eWrapper.contains(t.relatedTarget)||this.hidePicker()},e.prototype.buildSearchStringFromKeyboardEvent=function(t){var e=t.key;if(e===Nn.BACKSPACE)this.searchString=this.searchString.slice(0,-1),e="";else if(!Wn(t))return;t.preventDefault(),this.searchTextFromCharacter(e)},e.prototype.searchTextFromCharacter=function(t){this.searchString+=t,this.runSearch(),this.clearSearchString()},e.prototype.searchTextFromString=function(t){null==t&&(t=""),this.searchString=t,this.runSearch()},e.prototype.buildSearchStrings=function(t){var e,i=this.config.valueFormatter,o=void 0===i?function(t){return t}:i;return"number"===typeof t[0]||"string"===typeof t[0]?e=t.map((function(t){return o(t)})):"object"===typeof t[0]&&this.searchStringCreator&&(e=this.searchStringCreator(t)),e},e.prototype.getSuggestionsAndFilteredValues=function(t,e){var i=this,o=[],n=[];if(!t.length)return{suggestions:o,filteredValues:n};var r=this.config,s=r.allowTyping,a=r.searchType,l=void 0===a?"fuzzy":a,u=r.filterList,c=u&&s;if("fuzzy"===l){var h=$e(this.searchString,e,!0);o=h.values;var p=h.indices;if(c&&p.length)for(var d=0;d<p.length;d++)n.push(this.values[p[d]])}else o=e.filter((function(t,e){var o=t.toLocaleLowerCase(),r=i.searchString.toLocaleLowerCase(),s="match"===l?o.startsWith(r):-1!==o.indexOf(r);return c&&s&&n.push(i.values[e]),s}));return{suggestions:o,filteredValues:n}},e.prototype.filterListModel=function(t){var e=this.config,i=e.allowTyping,o=e.filterList;i&&o&&this.setValueList({valueList:t,refresh:!0})},e.prototype.runSearch=function(){var t,e,i,o=this.values,n=this.buildSearchStrings(o);if(n){var r=this.getSuggestionsAndFilteredValues(this.searchString,n),s=r.suggestions,a=r.filteredValues,l=this.config,u=l.allowTyping,c=l.filterList,h=l.highlightMatch,p=l.searchType,d=void 0===p?"fuzzy":p,f=a.length,g=!(!u||!c||""===this.searchString);if(g&&this.filterListModel(g?a:o),s.length){var y=g?0:n.indexOf(s[0]);this.selectListItem(y),h&&"fuzzy"!==d&&this.highlightFilterMatch()}else if(this.highlightSelectedValue(-1),!g||f)null===(t=this.listComponent)||void 0===t||t.ensureIndexVisible(0);else if(g){this.getAriaElement().removeAttribute("data-active-option");var _=null===(e=this.listComponent)||void 0===e?void 0:e.getAriaElement();_&&Li(_,null)}var m=null===(i=this.listComponent)||void 0===i?void 0:i.getGui();null===m||void 0===m||m.classList.toggle("ag-hidden",g&&!f)}else this.highlightSelectedValue(-1)},e.prototype.clearSearchString=function(){this.searchString=""},e.prototype.selectListItem=function(t,e,i){if(!(!this.isPickerDisplayed||!this.listComponent||t<0||t>=this.currentList.length)){var o=this.listComponent.ensureIndexVisible(t,!e);o&&!i&&this.listComponent.refresh(!0),this.highlightSelectedValue(t)}},e.prototype.setValue=function(e,i,o){var n=this.currentList.indexOf(e);return-1===n?this:(this.value=e,o||this.selectListItem(n),this.renderSelectedValue(),t.prototype.setValue.call(this,e,i))},e.prototype.createRowComponent=function(t){var e=new kf(this.config,this.eWrapper);e.setParentComponent(this.listComponent),this.getContext().createBean(e),e.setState(t);var i=this.config,o=i.highlightMatch,n=i.searchType,r=void 0===n?"fuzzy":n;return o&&"fuzzy"!==r&&e.highlightString(this.searchString),e},e.prototype.getRowForMouseEvent=function(t){var e=this.listComponent;if(!e)return-1;var i=null===e||void 0===e?void 0:e.getGui(),o=i.getBoundingClientRect(),n=e.getScrollTop(),r=t.clientY-o.top+n;return Math.floor(r/e.getRowHeight())},e.prototype.onPickerMouseMove=function(t){if(this.listComponent){var e=this.getRowForMouseEvent(t);-1!==e&&e!=this.lastRowHovered&&(this.lastRowHovered=e,this.selectListItem(e,!0,!0))}},e.prototype.onNavigationKeyDown=function(t,e){t.preventDefault();var i=e===Nn.DOWN;if(this.isPickerDisplayed||!i){var o=this.highlightedItem,n=i?1:-1,r=-1===o?0:o+n;this.selectListItem(r,!1,!0)}else this.showPicker()},e.prototype.onEnterKeyDown=function(t){this.isPickerDisplayed&&(t.preventDefault(),this.onListValueSelected(this.currentList[this.highlightedItem],!0))},e.prototype.onTabKeyDown=function(){this.isPickerDisplayed&&this.setValue(this.currentList[this.highlightedItem],!1,!0)},e.prototype.onListValueSelected=function(t,e){this.setValue(t,!1,!0),this.dispatchPickerEvent(t,e),this.hidePicker()},e.prototype.dispatchPickerEvent=function(t,e){var i={type:ge.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:e,value:t};this.dispatchEvent(i)},e.prototype.getFocusableElement=function(){var e=this.config.allowTyping;return e?this.eInput.getFocusableElement():t.prototype.getFocusableElement.call(this)},e.prototype.onKeyDown=function(t){var e=t.key,i=this.config.allowTyping;switch(e){case Nn.LEFT:case Nn.RIGHT:case Nn.PAGE_HOME:case Nn.PAGE_END:i||t.preventDefault();break;case Nn.PAGE_UP:case Nn.PAGE_DOWN:t.preventDefault();break;case Nn.DOWN:case Nn.UP:this.onNavigationKeyDown(t,e);break;case Nn.ESCAPE:this.isPickerDisplayed&&(t.preventDefault(),Jt(t),this.hidePicker());break;case Nn.ENTER:this.onEnterKeyDown(t);break;case Nn.TAB:this.onTabKeyDown();break;default:i||this.buildSearchStringFromKeyboardEvent(t)}},e.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,t.prototype.destroy.call(this)},Hf([pt("userComponentFactory")],e.prototype,"userComponentFactory",void 0),Hf([br("eInput")],e.prototype,"eInput",void 0),e}(Xr),Uf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),zf=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Kf=function(t){function e(i){var o=t.call(this,i,e.TEMPLATE)||this;return o.labelAlignment="top",o}return Uf(e,t),e.prototype.init=function(){this.eSlider.addCssClass("ag-slider-field")},e.prototype.onValueChange=function(t){var e=this,i=ge.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,i,(function(){var i=parseFloat(e.eText.getValue());e.eSlider.setValue(i.toString(),!0),t(i||0)})),this.addManagedListener(this.eSlider,i,(function(){var i=e.eSlider.getValue();e.eText.setValue(i,!0),t(parseFloat(i))})),this},e.prototype.setSliderWidth=function(t){return this.eSlider.setWidth(t),this},e.prototype.setTextFieldWidth=function(t){return this.eText.setWidth(t),this},e.prototype.setMinValue=function(t){return this.eSlider.setMinValue(t),this.eText.setMin(t),this},e.prototype.setMaxValue=function(t){return this.eSlider.setMaxValue(t),this.eText.setMax(t),this},e.prototype.getValue=function(){return this.eText.getValue()},e.prototype.setValue=function(t){return this.getValue()===t||(this.eText.setValue(t,!0),this.eSlider.setValue(t,!0),this.dispatchEvent({type:ge.EVENT_FIELD_VALUE_CHANGED})),this},e.prototype.setStep=function(t){return this.eSlider.setStep(t),this.eText.setStep(t),this},e.TEMPLATE='<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>',zf([br("eLabel")],e.prototype,"eLabel",void 0),zf([br("eSlider")],e.prototype,"eSlider",void 0),zf([br("eText")],e.prototype,"eText",void 0),zf([ut],e.prototype,"init",null),e}(Wr),Yf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),qf=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Xf=function(t){function e(i){void 0===i&&(i={});var o=t.call(this,e.getTemplate(i))||this;o.suppressEnabledCheckbox=!0,o.suppressOpenCloseIcons=!1;var n=i.title,r=i.enabled,s=i.items,a=i.suppressEnabledCheckbox,l=i.suppressOpenCloseIcons;return o.title=n,o.cssIdentifier=i.cssIdentifier||"default",o.enabled=null==r||r,o.items=s||[],o.alignItems=i.alignItems||"center",null!=a&&(o.suppressEnabledCheckbox=a),null!=l&&(o.suppressOpenCloseIcons=l),o}return Yf(e,t),e.getTemplate=function(t){var e=t.cssIdentifier||"default",i=t.direction||"vertical";return'<div class="ag-group ag-'+e+'-group" role="presentation">\n            <div class="ag-group-title-bar ag-'+e+'-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-'+e+'-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-'+e+'-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-'+e+'-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-'+e+'-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-'+i+" ag-"+e+'-group-container"></div>\n        </div>'},e.prototype.postConstruct=function(){if(this.items.length){var t=this.items;this.items=[],this.addItems(t)}var e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},e.prototype.setupExpandContract=function(){var t=this;this.eGroupClosedIcon.appendChild(Ln("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(Ln("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",(function(){return t.toggleGroupExpand()})),this.addManagedListener(this.eTitleBar,"keydown",(function(e){switch(e.key){case Nn.ENTER:case Nn.SPACE:e.preventDefault(),t.toggleGroupExpand();break;case Nn.RIGHT:case Nn.LEFT:e.preventDefault(),t.toggleGroupExpand(e.key===Nn.RIGHT);break}}))},e.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||Mi(this.eTitleBar,this.expanded)},e.prototype.refreshChildDisplay=function(){var t=!this.suppressOpenCloseIcons;Uo(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),Uo(this.eGroupOpenedIcon,t&&this.expanded),Uo(this.eGroupClosedIcon,t&&!this.expanded)},e.prototype.isExpanded=function(){return this.expanded},e.prototype.setAlignItems=function(t){this.alignItems!==t&&this.removeCssClass("ag-group-item-alignment-"+this.alignItems),this.alignItems=t;var e="ag-group-item-alignment-"+this.alignItems;return this.addCssClass(e),this},e.prototype.toggleGroupExpand=function(t){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),Uo(this.eContainer,!0),this):(t=null!=t?t:!this.expanded,this.expanded===t||(this.expanded=t,this.refreshAriaStatus(),this.refreshChildDisplay(),Uo(this.eContainer,t),this.dispatchEvent({type:this.expanded?e.EVENT_EXPANDED:e.EVENT_COLLAPSED})),this)},e.prototype.addItems=function(t){var e=this;t.forEach((function(t){return e.addItem(t)}))},e.prototype.addItem=function(t){var e=this.eContainer,i=t instanceof vr?t.getGui():t;i.classList.add("ag-group-item","ag-"+this.cssIdentifier+"-group-item"),e.appendChild(i),this.items.push(i)},e.prototype.hideItem=function(t,e){var i=this.items[e];Uo(i,!t)},e.prototype.setTitle=function(t){return this.eTitle.innerText=t,this},e.prototype.addCssClassToTitleBar=function(t){this.eTitleBar.classList.add(t)},e.prototype.setEnabled=function(t,e){return this.enabled=t,this.refreshDisabledStyles(),this.toggleGroupExpand(t),e||this.cbGroupEnabled.setValue(t),this},e.prototype.isEnabled=function(){return this.enabled},e.prototype.onEnableChange=function(t){var e=this;return this.cbGroupEnabled.onValueChange((function(i){e.setEnabled(i,!0),t(i)})),this},e.prototype.hideEnabledCheckbox=function(t){return this.suppressEnabledCheckbox=t,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},e.prototype.hideOpenCloseIcons=function(t){return this.suppressOpenCloseIcons=t,t&&this.toggleGroupExpand(!0),this},e.prototype.refreshDisabledStyles=function(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)},e.EVENT_EXPANDED="expanded",e.EVENT_COLLAPSED="collapsed",qf([br("eTitleBar")],e.prototype,"eTitleBar",void 0),qf([br("eGroupOpenedIcon")],e.prototype,"eGroupOpenedIcon",void 0),qf([br("eGroupClosedIcon")],e.prototype,"eGroupClosedIcon",void 0),qf([br("eToolbar")],e.prototype,"eToolbar",void 0),qf([br("cbGroupEnabled")],e.prototype,"cbGroupEnabled",void 0),qf([br("eTitle")],e.prototype,"eTitle",void 0),qf([br("eContainer")],e.prototype,"eContainer",void 0),qf([ut],e.prototype,"postConstruct",null),e}(vr),Qf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Jf=function(){return Jf=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Jf.apply(this,arguments)},Zf=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},tg=function(t){function e(e){void 0===e&&(e=1);var i=t.call(this,'<div class="ag-menu-list" role="tree"></div>')||this;return i.level=e,i.menuItems=[],i}return Qf(e,t),e.prototype.postConstruct=function(){var t=this;this.initialiseTabGuard({onTabKeyDown:function(e){return t.onTabKeyDown(e)},handleKeyDown:function(e){return t.handleKeyDown(e)}})},e.prototype.onTabKeyDown=function(t){var e=this.getParentComponent(),i=e&&e.getGui(),o=i&&i.classList.contains("ag-focus-managed");o||t.preventDefault(),t.shiftKey&&this.closeIfIsChild(t)},e.prototype.handleKeyDown=function(t){switch(t.key){case Nn.UP:case Nn.RIGHT:case Nn.DOWN:case Nn.LEFT:t.preventDefault(),this.handleNavKey(t.key);break;case Nn.ESCAPE:var e=this.findTopMenu();e&&this.focusService.focusInto(e.getGui());break}},e.prototype.clearActiveItem=function(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)},e.prototype.addMenuItems=function(t){var e=this;null!=t&&t.forEach((function(t){"separator"===t?e.addSeparator():"string"===typeof t?console.warn("AG Grid: unrecognised menu item "+t):e.addItem(t)}))},e.prototype.addItem=function(t){var e=this,i=this.createManagedBean(new sg(Jf(Jf({},t),{isAnotherSubMenuOpen:function(){return e.menuItems.some((function(t){return t.isSubMenuOpen()}))}})));i.setParentComponent(this),Di(i.getGui(),this.level),this.menuItems.push(i),this.appendChild(i.getGui()),this.addManagedListener(i,sg.EVENT_MENU_ITEM_SELECTED,(function(t){e.dispatchEvent(t)})),this.addManagedListener(i,sg.EVENT_MENU_ITEM_ACTIVATED,(function(t){e.activeMenuItem&&e.activeMenuItem!==t.menuItem&&e.activeMenuItem.deactivate(),e.activeMenuItem=t.menuItem}))},e.prototype.activateFirstItem=function(){var t=this.menuItems.filter((function(t){return!t.isDisabled()}))[0];t&&t.activate()},e.prototype.addSeparator=function(){var t='\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>';this.appendChild(un(t))},e.prototype.findTopMenu=function(){var t=this.getParentComponent();if(!t&&this instanceof e)return this;while(1){var i=t&&t.getParentComponent&&t.getParentComponent();if(!i||!(i instanceof e||i instanceof sg))break;t=i}return t instanceof e?t:void 0},e.prototype.handleNavKey=function(t){switch(t){case Nn.UP:case Nn.DOWN:var e=this.findNextItem(t===Nn.UP);return void(e&&e!==this.activeMenuItem&&e.activate())}var i=this.gridOptionsService.is("enableRtl")?Nn.RIGHT:Nn.LEFT;t===i?this.closeIfIsChild():this.openChild()},e.prototype.closeIfIsChild=function(t){var e=this.getParentComponent();e&&e instanceof sg&&(t&&t.preventDefault(),e.closeSubMenu(),e.getGui().focus())},e.prototype.openChild=function(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)},e.prototype.findNextItem=function(t){var e=this.menuItems.filter((function(t){return!t.isDisabled()}));if(e.length){if(!this.activeMenuItem)return t?Dt(e):e[0];var i;t&&e.reverse();for(var o=!1,n=0;n<e.length;n++){var r=e[n];if(o){i=r;break}r===this.activeMenuItem&&(o=!0)}return i||this.activeMenuItem}},e.prototype.destroy=function(){this.clearActiveItem(),t.prototype.destroy.call(this)},Zf([pt("focusService")],e.prototype,"focusService",void 0),Zf([ut],e.prototype,"postConstruct",null),e}(Ff),eg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ig=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},og=function(t){function e(e){var i=t.call(this)||this;return i.wrappedComponent=e,i.setTemplateFromElement(e.getGui()),i}return eg(e,t),e.prototype.postConstruct=function(){var t=this;this.initialiseTabGuard({onTabKeyDown:function(e){return t.onTabKeyDown(e)},handleKeyDown:function(e){return t.handleKeyDown(e)}})},e.prototype.handleKeyDown=function(t){t.key===Nn.ESCAPE&&this.closePanel()},e.prototype.onTabKeyDown=function(t){t.defaultPrevented||(this.closePanel(),t.preventDefault())},e.prototype.closePanel=function(){var t=this.parentComponent;t.closeSubMenu(),setTimeout((function(){return t.getGui().focus()}),0)},ig([ut],e.prototype,"postConstruct",null),e}(Ff),ng=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),rg=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},sg=function(t){function e(e){var i=t.call(this)||this;return i.params=e,i.isActive=!1,i.subMenuIsOpen=!1,i.setTemplate('<div class="'+i.getClassName()+'" tabindex="-1" role="treeitem"></div>'),i}return ng(e,t),e.prototype.init=function(){var t=this;this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();var e=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),ki(e,!0)):(this.addGuiEventListener("click",(function(e){return t.onItemSelected(e)})),this.addGuiEventListener("keydown",(function(e){e.key!==Nn.ENTER&&e.key!==Nn.SPACE||(e.preventDefault(),t.onItemSelected(e))})),this.addGuiEventListener("mousedown",(function(t){t.stopPropagation(),t.preventDefault()})),this.addGuiEventListener("mouseenter",(function(){return t.onMouseEnter()})),this.addGuiEventListener("mouseleave",(function(){return t.onMouseLeave()}))),this.params.cssClasses&&this.params.cssClasses.forEach((function(e){return t.addCssClass(e)}))},e.prototype.isDisabled=function(){return!!this.params.disabled},e.prototype.openSubMenu=function(t){var i=this;if(void 0===t&&(t=!1),this.closeSubMenu(),this.params.subMenu){var o,n=un('<div class="ag-menu" role="presentation"></div>');if(this.params.subMenu instanceof Array){var r=Si(this.getGui()),s=isNaN(r)?1:r+1,a=this.createBean(new tg(s));a.setParentComponent(this),a.addMenuItems(this.params.subMenu),n.appendChild(a.getGui()),this.addManagedListener(a,e.EVENT_MENU_ITEM_SELECTED,(function(t){return i.dispatchEvent(t)})),a.addGuiEventListener("mouseenter",(function(){return i.cancelDeactivate()})),o=function(){return i.destroyBean(a)},t&&setTimeout((function(){return a.activateFirstItem()}),0)}else{var l=this.params.subMenu,u=this.createBean(new og(l));u.setParentComponent(this);var c=u.getGui(),h="mouseenter",p=function(){return i.cancelDeactivate()};c.addEventListener(h,p),o=function(){return c.removeEventListener(h,p)},n.appendChild(c),l.afterGuiAttached&&setTimeout((function(){return l.afterGuiAttached()}),0)}var d=this.getGui(),f=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:d,ePopup:n}),g=this.localeService.getLocaleTextFunc(),y=this.popupService.addPopup({modal:!0,eChild:n,positionCallback:f,anchorToElement:d,ariaLabel:g("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,Mi(d,!0),this.hideSubMenu=function(){y&&y.hideFunc(),i.subMenuIsOpen=!1,Mi(d,!1),o()}}},e.prototype.closeSubMenu=function(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,Mi(this.getGui(),!1))},e.prototype.isSubMenuOpen=function(){return this.subMenuIsOpen},e.prototype.activate=function(t){var e=this;this.cancelActivate(),this.params.disabled||(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),t&&this.params.subMenu&&window.setTimeout((function(){e.isAlive()&&e.isActive&&e.openSubMenu()}),300),this.onItemActivated())},e.prototype.deactivate=function(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()},e.prototype.addIcon=function(){if(this.params.checked||this.params.icon||!this.params.isCompact){var t=un('<span ref="eIcon" class="'+this.getClassName("part")+" "+this.getClassName("icon")+'" role="presentation"></span>');this.params.checked?t.appendChild(Mn("check",this.gridOptionsService)):this.params.icon&&(On(this.params.icon)?t.appendChild(this.params.icon):"string"===typeof this.params.icon?t.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(t)}},e.prototype.addName=function(){if(this.params.name||!this.params.isCompact){var t=un('<span ref="eName" class="'+this.getClassName("part")+" "+this.getClassName("text")+'">'+(this.params.name||"")+"</span>");this.getGui().appendChild(t)}},e.prototype.addTooltip=function(){this.params.tooltip&&(this.tooltip=this.params.tooltip,this.gridOptionsService.is("enableBrowserTooltips")?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new fr(this)))},e.prototype.getTooltipParams=function(){return{location:"menu",value:this.tooltip}},e.prototype.addShortcut=function(){if(this.params.shortcut||!this.params.isCompact){var t=un('<span ref="eShortcut" class="'+this.getClassName("part")+" "+this.getClassName("shortcut")+'">'+(this.params.shortcut||"")+"</span>");this.getGui().appendChild(t)}},e.prototype.addSubMenu=function(){if(this.params.subMenu||!this.params.isCompact){var t=un('<span ref="ePopupPointer" class="'+this.getClassName("part")+" "+this.getClassName("popup-pointer")+'"></span>'),e=this.getGui();if(this.params.subMenu){var i=this.gridOptionsService.is("enableRtl")?"smallLeft":"smallRight";Mi(e,!1),t.appendChild(Mn(i,this.gridOptionsService))}e.appendChild(t)}},e.prototype.onItemSelected=function(t){if(this.params.action?this.params.action():this.openSubMenu(t&&"keydown"===t.type),!this.params.subMenu||this.params.action){var i={type:e.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event:t};this.dispatchEvent(i)}},e.prototype.onItemActivated=function(){var t={type:e.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(t)},e.prototype.cancelActivate=function(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)},e.prototype.cancelDeactivate=function(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)},e.prototype.onMouseEnter=function(){var t=this;this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout((function(){return t.activate(!0)}),e.ACTIVATION_DELAY):this.activate(!0)},e.prototype.onMouseLeave=function(){var t=this;this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout((function(){return t.deactivate()}),e.ACTIVATION_DELAY):this.deactivate()},e.prototype.getClassName=function(t){var e=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return t?e+"-"+t:e},e.EVENT_MENU_ITEM_SELECTED="menuItemSelected",e.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",e.ACTIVATION_DELAY=80,rg([pt("popupService")],e.prototype,"popupService",void 0),rg([ut],e.prototype,"init",null),e}(vr),ag=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),lg=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ug=function(t){function e(i){var o=t.call(this,e.getTemplate(i))||this;return o.closable=!0,o.config=i,o}return ag(e,t),e.getTemplate=function(t){var e=t&&t.cssIdentifier||"default";return'<div class="ag-panel ag-'+e+'-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-'+e+'-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-'+e+'-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-'+e+'-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-'+e+'-panel-content-wrapper"></div>\n        </div>'},e.prototype.postConstruct=function(){var t=this,e=this.config,i=e.component,o=e.closable,n=e.hideTitleBar,r=e.title,s=e.minWidth,a=void 0===s?250:s,l=e.width,u=e.minHeight,c=void 0===u?250:u,h=e.height,p=e.centered,d=e.popup,f=e.x,g=e.y;this.positionableFeature=new Vr(this.getGui(),{minWidth:a,width:l,minHeight:c,height:h,centered:p,x:f,y:g,popup:d,calculateTopBuffer:function(){return t.positionableFeature.getHeight()-t.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var y=this.getGui();i&&this.setBodyComponent(i),n?Uo(this.eTitleBar,!1):(r&&this.setTitle(r),this.setClosable(null!=o?o:this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",(function(e){var i=t.gridOptionsService.getDocument();if(y.contains(e.relatedTarget)||y.contains(i.activeElement)||t.eTitleBarButtons.contains(e.target))e.preventDefault();else{var o=t.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");o&&o.focus()}})),d&&this.positionableFeature.isPositioned()||(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},e.prototype.renderComponent=function(){var t=this,e=this.getGui();e.focus(),this.close=function(){e.parentElement.removeChild(e),t.destroy()}},e.prototype.getHeight=function(){return this.positionableFeature.getHeight()},e.prototype.setHeight=function(t){this.positionableFeature.setHeight(t)},e.prototype.getWidth=function(){return this.positionableFeature.getWidth()},e.prototype.setWidth=function(t){this.positionableFeature.setWidth(t)},e.prototype.setClosable=function(t){if(t!==this.closable&&(this.closable=t),t){var i=this.closeButtonComp=new vr(e.CLOSE_BTN_TEMPLATE);this.getContext().createBean(i);var o=i.getGui(),n=Mn("close",this.gridOptionsService);n.classList.add("ag-panel-title-bar-button-icon"),o.appendChild(n),this.addTitleBarButton(i),i.addManagedListener(o,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){o=this.closeButtonComp.getGui();o.parentElement.removeChild(o),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}},e.prototype.setBodyComponent=function(t){t.setParentComponent(this),this.eContentWrapper.appendChild(t.getGui())},e.prototype.addTitleBarButton=function(t,e){var i=this.eTitleBarButtons,o=i.children,n=o.length;null==e&&(e=n),e=Math.max(0,Math.min(e,n)),t.addCssClass("ag-panel-title-bar-button");var r=t.getGui();0===e?i.insertAdjacentElement("afterbegin",r):e===n?i.insertAdjacentElement("beforeend",r):o[e-1].insertAdjacentElement("afterend",r),t.setParentComponent(this)},e.prototype.getBodyHeight=function(){return Xo(this.eContentWrapper)},e.prototype.getBodyWidth=function(){return Qo(this.eContentWrapper)},e.prototype.setTitle=function(t){this.eTitle.innerText=t},e.prototype.onBtClose=function(){this.close()},e.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var e=this.getGui();e&&e.offsetParent&&this.close(),t.prototype.destroy.call(this)},e.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',lg([br("eContentWrapper")],e.prototype,"eContentWrapper",void 0),lg([br("eTitleBar")],e.prototype,"eTitleBar",void 0),lg([br("eTitleBarButtons")],e.prototype,"eTitleBarButtons",void 0),lg([br("eTitle")],e.prototype,"eTitle",void 0),lg([ut],e.prototype,"postConstruct",null),e}(vr),cg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),hg=function(){return hg=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},hg.apply(this,arguments)},pg=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},dg=function(t){function e(e){var i=t.call(this,hg(hg({},e),{popup:!0}))||this;return i.isMaximizable=!1,i.isMaximized=!1,i.maximizeListeners=[],i.resizeListenerDestroy=null,i.lastPosition={x:0,y:0,width:0,height:0},i}return cg(e,t),e.prototype.postConstruct=function(){var e=this,i=this.getGui(),o=this.config,n=o.movable,r=o.resizable,s=o.maximizable;this.addCssClass("ag-dialog"),t.prototype.postConstruct.call(this),this.addManagedListener(i,"focusin",(function(t){i.contains(t.relatedTarget)||e.popupService.bringPopupToFront(i)})),n&&this.setMovable(n),s&&this.setMaximizable(s),r&&this.setResizable(r)},e.prototype.renderComponent=function(){var t=this.getGui(),e=this.config,i=e.alwaysOnTop,o=e.modal,n=e.title,r=e.afterGuiAttached,s=this.localeService.getLocaleTextFunc(),a=this.popupService.addPopup({modal:o,eChild:t,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop:i,ariaLabel:n||s("ariaLabelDialog","Dialog"),afterGuiAttached:r});a&&(this.close=a.hideFunc)},e.prototype.toggleMaximize=function(){var t=this.positionableFeature.getPosition();if(this.isMaximized){var e=this.lastPosition,i=e.x,o=e.y,n=e.width,r=e.height;this.setWidth(n),this.setHeight(r),this.positionableFeature.offsetElement(i,o)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=t.x,this.lastPosition.y=t.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},e.prototype.refreshMaximizeIcon=function(){Uo(this.maximizeIcon,!this.isMaximized),Uo(this.minimizeIcon,this.isMaximized)},e.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach((function(t){return t()})),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},e.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),t.prototype.destroy.call(this)},e.prototype.setResizable=function(t){this.positionableFeature.setResizable(t)},e.prototype.setMovable=function(t){this.positionableFeature.setMovable(t,this.eTitleBar)},e.prototype.setMaximizable=function(t){var e=this;if(!t)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));var i=this.eTitleBar;if(i&&t!==this.isMaximizable){var o=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),o.addManagedListener(o.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(o,0),this.maximizeListeners.push(this.addManagedListener(i,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",(function(){e.isMaximized=!1,e.refreshMaximizeIcon()}))}},e.prototype.buildMaximizeAndMinimizeElements=function(){var t=this.maximizeButtonComp=this.createBean(new vr('<div class="ag-dialog-button"></span>')),e=t.getGui();return this.maximizeIcon=Mn("maximize",this.gridOptionsService),e.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=Mn("minimize",this.gridOptionsService),e.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),t},pg([pt("popupService")],e.prototype,"popupService",void 0),e}(ug),fg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),gg=function(){return gg=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},gg.apply(this,arguments)},yg=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},_g=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},mg=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t};(function(t){t[t["vertical"]=0]="vertical",t[t["horizontal"]=1]="horizontal"})(lf||(lf={}));var vg,bg=0,Cg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popupList=[],e}var i;return fg(e,t),i=e,e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady((function(e){t.gridCtrl=e.gridCtrl,t.addManagedListener(t.gridCtrl,ge.EVENT_KEYBOARD_FOCUS,(function(){t.popupList.forEach((function(t){return t.element.classList.add(Hp.AG_KEYBOARD_FOCUS)}))})),t.addManagedListener(t.gridCtrl,ge.EVENT_MOUSE_FOCUS,(function(){t.popupList.forEach((function(t){return t.element.classList.remove(Hp.AG_KEYBOARD_FOCUS)}))}))}))},e.prototype.getPopupParent=function(){var t=this.gridOptionsService.get("popupParent");return t||this.gridCtrl.getGui()},e.prototype.positionPopupForMenu=function(t){var e=t.eventSource,i=t.ePopup,o=this.getPopupIndex(i);if(-1!==o){var n=this.popupList[o];n.alignedToElement=e}var r=e.getBoundingClientRect(),s=this.getParentRect(),a=this.keepXYWithinBounds(i,r.top-s.top,lf.vertical),l=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=l+"px";var u,c=s.right-s.left,h=c-l;function p(){return r.right-s.left-2}function d(){return r.left-s.left-l}this.gridOptionsService.is("enableRtl")?(u=d(),u<0&&(u=p(),this.setAlignedStyles(i,"left")),u>h&&(u=0,this.setAlignedStyles(i,"right"))):(u=p(),u>h&&(u=d(),this.setAlignedStyles(i,"right")),u<0&&(u=0,this.setAlignedStyles(i,"left"))),i.style.left=u+"px",i.style.top=a+"px"},e.prototype.positionPopupUnderMouseEvent=function(t){var e=this,i=t.ePopup,o=t.nudgeX,n=t.nudgeY,r=t.skipObserver;this.positionPopup({ePopup:i,nudgeX:o,nudgeY:n,keepWithinBounds:!0,skipObserver:r,updatePosition:function(){return e.calculatePointerAlign(t.mouseEvent)},postProcessCallback:function(){return e.callPostProcessPopup(t.type,t.ePopup,null,t.mouseEvent,t.column,t.rowNode)}})},e.prototype.calculatePointerAlign=function(t){var e=this.getParentRect();return{x:t.clientX-e.left,y:t.clientY-e.top}},e.prototype.positionPopupByComponent=function(t){var e=this,i=t.ePopup,o=t.nudgeX,n=t.nudgeY,r=t.keepWithinBounds,s=t.eventSource,a=t.alignSide,l=void 0===a?"left":a,u=t.position,c=void 0===u?"over":u,h=t.column,p=t.rowNode,d=t.type,f=s.getBoundingClientRect(),g=this.getParentRect(),y=this.getPopupIndex(i);if(-1!==y){var _=this.popupList[y];_.alignedToElement=s}var m=function(){var o,r=f.left-g.left;if("right"===l&&(r-=i.offsetWidth-f.width),"over"===c)o=f.top-g.top,e.setAlignedStyles(i,"over");else{e.setAlignedStyles(i,"under");var s=e.shouldRenderUnderOrAbove(i,f,g,t.nudgeY||0);o="under"===s?f.top-g.top+f.height:f.top-i.offsetHeight-2*(n||0)-g.top}return{x:r,y:o}};this.positionPopup({ePopup:i,nudgeX:o,nudgeY:n,keepWithinBounds:r,updatePosition:m,postProcessCallback:function(){return e.callPostProcessPopup(d,i,s,null,h,p)}})},e.prototype.shouldRenderUnderOrAbove=function(t,e,i,o){var n=i.bottom-e.bottom,r=e.top-i.top,s=t.offsetHeight+o;return n>s?"under":r>s||r>n?"above":"under"},e.prototype.setAlignedStyles=function(t,e){var i=this.getPopupIndex(t);if(-1!==i){var o=this.popupList[i],n=o.alignedToElement;if(n){var r=["right","left","over","above","under"];r.forEach((function(e){n.classList.remove("ag-has-popup-positioned-"+e),t.classList.remove("ag-popup-positioned-"+e)})),e&&(n.classList.add("ag-has-popup-positioned-"+e),t.classList.add("ag-popup-positioned-"+e))}}},e.prototype.callPostProcessPopup=function(t,e,i,o,n,r){var s=this.gridOptionsService.getCallback("postProcessPopup");if(s){var a={column:n,rowNode:r,ePopup:e,type:t,eventSource:i,mouseEvent:o};s(a)}},e.prototype.positionPopup=function(t){var e=this,o=t.ePopup,n=t.keepWithinBounds,r=t.nudgeX,s=t.nudgeY,a=t.skipObserver,l=t.updatePosition,u={width:0,height:0},c=function(i){void 0===i&&(i=!1);var a=l(),c=a.x,h=a.y;i&&o.clientWidth===u.width&&o.clientHeight===u.height||(u.width=o.clientWidth,u.height=o.clientHeight,r&&(c+=r),s&&(h+=s),n&&(c=e.keepXYWithinBounds(o,c,lf.horizontal),h=e.keepXYWithinBounds(o,h,lf.vertical)),o.style.left=c+"px",o.style.top=h+"px",t.postProcessCallback&&t.postProcessCallback())};if(c(),!a){var h=this.resizeObserverService.observeResize(o,(function(){return c(!0)}));setTimeout((function(){return h()}),i.WAIT_FOR_POPUP_CONTENT_RESIZE)}},e.prototype.getActivePopups=function(){return this.popupList.map((function(t){return t.element}))},e.prototype.getPopupList=function(){return this.popupList},e.prototype.getParentRect=function(){var t=this.gridOptionsService.getDocument(),e=this.getPopupParent();return e===t.body?e=t.documentElement:"static"===getComputedStyle(e).position&&(e=e.offsetParent),tn(e)},e.prototype.keepXYWithinBounds=function(t,e,i){var o=i===lf.vertical,n=o?"clientHeight":"clientWidth",r=o?"top":"left",s=o?"offsetHeight":"offsetWidth",a=o?"scrollTop":"scrollLeft",l=this.gridOptionsService.getDocument(),u=l.documentElement,c=this.getPopupParent(),h=c.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),d=c===l.body,f=t[s],g=o?Jo:Zo,y=d?g(u)+u[a]:c[n];d&&(y-=Math.abs(p[r]-h[r]));var _=y-f;return Math.min(Math.max(e,0),Math.abs(_))},e.prototype.addPopup=function(t){var e=this.gridOptionsService.getDocument(),i=t.eChild,o=t.ariaLabel,n=t.alwaysOnTop,r=t.positionCallback,s=t.anchorToElement;if(!e)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:function(){}};var a=this.getPopupIndex(i);if(-1!==a){var l=this.popupList[a];return{hideFunc:l.hideFunc}}this.initialisePopupPosition(i);var u=this.createPopupWrapper(i,o,!!n),c=this.addEventListenersToPopup(gg(gg({},t),{wrapperEl:u}));return r&&r(),this.addPopupToPopupList(i,u,c,s),{hideFunc:c}},e.prototype.initialisePopupPosition=function(t){var e=this.getPopupParent(),i=e.getBoundingClientRect();s(t.style.top)||(t.style.top=-1*i.top+"px"),s(t.style.left)||(t.style.left=-1*i.left+"px")},e.prototype.createPopupWrapper=function(t,e,i){var o,n=this.getPopupParent(),r=document.createElement("div"),s=this.environment.getTheme().allThemes;return s.length&&(o=r.classList).add.apply(o,mg([],_g(s))),r.classList.add("ag-popup"),t.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),t.hasAttribute("role")||Ci(t,"dialog"),Oi(t,e),this.focusService.isKeyboardMode()&&t.classList.add(Hp.AG_KEYBOARD_FOCUS),r.appendChild(t),n.appendChild(r),i?this.setAlwaysOnTop(t,!0):this.bringPopupToFront(t),r},e.prototype.addEventListenersToPopup=function(t){var e=this,i=this.gridOptionsService.getDocument(),o=this.getPopupParent(),n=t.wrapperEl,r=t.eChild;t.click;var s=t.closedCallback,a=t.afterGuiAttached,l=t.closeOnEsc,u=t.modal,c=!1,h=function(t){if(n.contains(i.activeElement)){var e=t.key;e!==Nn.ESCAPE||Zt(t)||f({keyboardEvent:t})}},p=function(t){return f({mouseEvent:t})},d=function(t){return f({touchEvent:t})},f=function(t){void 0===t&&(t={});var a=t.mouseEvent,l=t.touchEvent,u=t.keyboardEvent;e.isEventFromCurrentPopup({mouseEvent:a,touchEvent:l},r)||c||(c=!0,o.removeChild(n),i.removeEventListener("keydown",h),i.removeEventListener("mousedown",p),i.removeEventListener("touchstart",d),i.removeEventListener("contextmenu",p),e.eventService.removeEventListener(ge.EVENT_DRAG_STARTED,p),s&&s(a||l||u),e.removePopupFromPopupList(r))};return a&&a({hidePopup:f}),window.setTimeout((function(){l&&i.addEventListener("keydown",h),u&&(i.addEventListener("mousedown",p),e.eventService.addEventListener(ge.EVENT_DRAG_STARTED,p),i.addEventListener("touchstart",d),i.addEventListener("contextmenu",p))}),0),f},e.prototype.addPopupToPopupList=function(t,e,i,o){this.popupList.push({element:t,wrapper:e,hideFunc:i,instanceId:bg++,isAnchored:!!o}),o&&this.setPopupPositionRelatedToElement(t,o)},e.prototype.getPopupIndex=function(t){return this.popupList.findIndex((function(e){return e.element===t}))},e.prototype.setPopupPositionRelatedToElement=function(t,e){var i=this.getPopupIndex(t);if(-1!==i){var o=this.popupList[i];if(o.stopAnchoringPromise&&o.stopAnchoringPromise.then((function(t){return t&&t()})),o.stopAnchoringPromise=void 0,o.isAnchored=!1,e){var n=this.keepPopupPositionedRelativeTo({element:e,ePopup:t,hidePopup:o.hideFunc});return o.stopAnchoringPromise=n,o.isAnchored=!0,n}}},e.prototype.removePopupFromPopupList=function(t){this.setAlignedStyles(t,null),this.setPopupPositionRelatedToElement(t,null),this.popupList=this.popupList.filter((function(e){return e.element!==t}))},e.prototype.keepPopupPositionedRelativeTo=function(t){var e=this,i=this.getPopupParent(),o=i.getBoundingClientRect(),n=t.element,r=t.ePopup,s=n.getBoundingClientRect(),a=o.top-s.top,l=o.left-s.left,u=a,c=l,h=r.style.top,p=parseInt(h.substring(0,h.length-1),10),d=r.style.left,f=parseInt(d.substring(0,d.length-1),10);return new cr((function(o){e.getFrameworkOverrides().setInterval((function(){var o=i.getBoundingClientRect(),s=n.getBoundingClientRect(),h=0==s.top&&0==s.left&&0==s.height&&0==s.width;if(h)t.hidePopup();else{var d=o.top-s.top;if(d!=u){var g=e.keepXYWithinBounds(r,p+a-d,lf.vertical);r.style.top=g+"px"}u=d;var y=o.left-s.left;if(y!=c){var _=e.keepXYWithinBounds(r,f+l-y,lf.horizontal);r.style.left=_+"px"}c=y}}),200).then((function(t){var e=function(){null!=t&&window.clearInterval(t)};o(e)}))}))},e.prototype.hasAnchoredPopup=function(){return this.popupList.some((function(t){return t.isAnchored}))},e.prototype.isEventFromCurrentPopup=function(t,e){var i=t.mouseEvent,o=t.touchEvent,n=i||o;if(!n)return!1;var r=this.getPopupIndex(e);if(-1===r)return!1;for(var s=r;s<this.popupList.length;s++){var a=this.popupList[s];if(ie(a.element,n))return!0}return this.isElementWithinCustomPopup(n.target)},e.prototype.isElementWithinCustomPopup=function(t){var e=this.gridOptionsService.getDocument();while(t&&t!==e.body){if(t.classList.contains("ag-custom-component-popup")||null===t.parentElement)return!0;t=t.parentElement}return!1},e.prototype.getWrapper=function(t){while(!t.classList.contains("ag-popup")&&t.parentElement)t=t.parentElement;return t.classList.contains("ag-popup")?t:null},e.prototype.setAlwaysOnTop=function(t,e){var i=this.getWrapper(t);i&&(i.classList.toggle("ag-always-on-top",!!e),e&&this.bringPopupToFront(i))},e.prototype.bringPopupToFront=function(t){var e=this.getPopupParent(),i=Array.prototype.slice.call(e.querySelectorAll(".ag-popup")),o=i.length,n=Array.prototype.slice.call(e.querySelectorAll(".ag-popup.ag-always-on-top")),r=n.length,s=this.getWrapper(t);if(s&&!(o<=1)&&e.contains(t)){var a=i.indexOf(s),l=s.querySelectorAll("div"),u=[];if(l.forEach((function(t){0!==t.scrollTop&&u.push([t,t.scrollTop])})),r){var c=s.classList.contains("ag-always-on-top");c?a!==o-1&&Dt(n).insertAdjacentElement("afterend",s):a!==o-r-1&&n[0].insertAdjacentElement("beforebegin",s)}else a!==o-1&&Dt(i).insertAdjacentElement("afterend",s);while(u.length){var h=u.pop();h[0].scrollTop=h[1]}var p={type:"popupToFront",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,eWrapper:s};this.eventService.dispatchEvent(p)}},e.WAIT_FOR_POPUP_CONTENT_RESIZE=200,yg([pt("focusService")],e.prototype,"focusService",void 0),yg([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),yg([pt("resizeObserverService")],e.prototype,"resizeObserverService",void 0),yg([ut],e.prototype,"postConstruct",null),e=i=yg([ht("popupService")],e),e}(le),wg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Sg=function(t){function e(){var e=t.call(this,'\n        <div class="ag-autocomplete-row" role="presentation">\n            <div class="ag-autocomplete-row-label"></div>\n        </div>')||this;return e.hasHighlighting=!1,e}return wg(e,t),e.prototype.setState=function(t,e){this.value=t,this.render(),this.updateSelected(e)},e.prototype.updateSelected=function(t){this.addOrRemoveCssClass("ag-autocomplete-row-selected",t)},e.prototype.setSearchString=function(t){var e,i=!1;if(s(t)){var o=null===(e=this.value)||void 0===e?void 0:e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());if(o>=0){i=!0,this.hasHighlighting=!0;var n=o+t.length,r=xe(this.value.slice(0,o)),a=xe(this.value.slice(o,n)),l=xe(this.value.slice(n));this.getGui().lastElementChild.innerHTML=r+"<b>"+a+"</b>"+l}}!i&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())},e.prototype.render=function(){var t;this.getGui().lastElementChild.innerHTML=null!==(t=xe(this.value))&&void 0!==t?t:"&nbsp;"},e}(vr),Eg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),xg=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Og=function(t){function e(i){var o=t.call(this,e.TEMPLATE)||this;return o.params=i,o.searchString="",o}return Eg(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(){var t=this;this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new Bf({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:function(){return t.autocompleteEntries.length},getRow:function(e){return t.autocompleteEntries[e]}});var e=this.virtualList.getGui();this.addManagedListener(e,"click",(function(){return t.params.onConfirmed()})),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",(function(t){return t.preventDefault()})),this.setSelectedValue(0)},e.prototype.onNavigationKeyDown=function(t,e){t.preventDefault();var i=this.autocompleteEntries.indexOf(this.selectedValue),o=e===Nn.UP?i-1:i+1;this.checkSetSelectedValue(o)},e.prototype.setSearch=function(t){this.searchString=t,s(t)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()},e.prototype.runContainsSearch=function(t,e){var i,o=!1,n=t.toLocaleLowerCase(),r=e.filter((function(t){var e=t.toLocaleLowerCase(),r=e.indexOf(n),s=0===r,a=r>=0;return a&&(!i||!o&&s||o===s&&t.length<i.length)&&(i=t,o=s),a}));return!i&&r.length&&(i=r[0]),{topMatch:i,allMatches:r}},e.prototype.runSearch=function(){var t,e,i,o,n=this.params.autocompleteEntries,r=n.map((function(t){var e;return null!==(e=t.displayValue)&&void 0!==e?e:t.key}));if(this.params.useFuzzySearch)i=$e(this.searchString,r,!0).values,o=i.length?i[0]:void 0;else{var s=this.runContainsSearch(this.searchString,r);i=s.allMatches,o=s.topMatch}var a=n.filter((function(t){var e=t.key,o=t.displayValue;return i.includes(null!==o&&void 0!==o?o:e)}));if(!a.length&&this.selectedValue&&(null===(e=null===(t=this.params)||void 0===t?void 0:t.forceLastSelection)||void 0===e?void 0:e.call(t,this.selectedValue,this.searchString))&&(a=[this.selectedValue]),this.autocompleteEntries=a,this.virtualList.refresh(),o){var l=i.indexOf(o);this.checkSetSelectedValue(l)}},e.prototype.updateSearchInList=function(){var t=this;this.virtualList.forEachRenderedRow((function(e){return e.setSearchString(t.searchString)}))},e.prototype.checkSetSelectedValue=function(t){t>=0&&t<this.autocompleteEntries.length&&this.setSelectedValue(t)},e.prototype.setSelectedValue=function(t){var e=this.autocompleteEntries[t];this.selectedValue!==e&&(this.selectedValue=e,this.virtualList.ensureIndexVisible(t),this.virtualList.forEachRenderedRow((function(e,i){e.updateSelected(t===i)})))},e.prototype.createRowComponent=function(t){var e,i=new Sg;return this.getContext().createBean(i),i.setState(null!==(e=t.displayValue)&&void 0!==e?e:t.key,t===this.selectedValue),i},e.prototype.onMouseMove=function(t){var e=this.virtualList.getGui().getBoundingClientRect(),i=this.virtualList.getScrollTop(),o=t.clientY-e.top+i,n=Math.floor(o/this.virtualList.getRowHeight());this.checkSetSelectedValue(n)},e.prototype.afterGuiAttached=function(){this.virtualList.refresh()},e.prototype.getSelectedValue=function(){var t;return this.autocompleteEntries.length&&null!==(t=this.selectedValue)&&void 0!==t?t:null},e.TEMPLATE='<div class="ag-autocomplete-list-popup">\n            <div ref="eList" class="ag-autocomplete-list"></div>\n        <div>',xg([br("eList")],e.prototype,"eList",void 0),xg([ut],e.prototype,"init",null),e}(fa),Rg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ig=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Tg=function(t){function e(){var e=t.call(this,'\n            <div class="ag-autocomplete" role="presentation">\n                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>\n            </div>')||this;return e.isListOpen=!1,e.lastPosition=0,e.valid=!0,e}return Rg(e,t),e.prototype.postConstruct=function(){var t=this;this.eAutocompleteInput.onValueChange((function(e){return t.onValueChanged(e)})),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc((function(){t.destroyBean(t.autocompleteList)})),this.addGuiEventListener("focusout",(function(){return t.onFocusOut()}))},e.prototype.onValueChanged=function(t){var e=r(t);this.updateValue(e),this.updateAutocompleteList(e)},e.prototype.updateValue=function(t){this.updateLastPosition(),this.dispatchEvent({type:e.EVENT_VALUE_CHANGED,value:t}),this.validate(t)},e.prototype.updateAutocompleteList=function(t){var e,i,o,n,r=null!==(i=null===(e=this.listGenerator)||void 0===e?void 0:e.call(this,t,this.lastPosition))&&void 0!==i?i:{enabled:!1};if(r.type&&r.type===(null===(o=this.autocompleteListParams)||void 0===o?void 0:o.type)||this.isListOpen&&this.closeList(),this.autocompleteListParams=r,null===(n=this.autocompleteListParams)||void 0===n?void 0:n.enabled){this.isListOpen||this.openList();var s=this.autocompleteListParams.searchString;this.autocompleteList.setSearch(null!==s&&void 0!==s?s:"")}else this.isListOpen&&this.closeList()},e.prototype.onKeyDown=function(t){var e=this,i=t.key;switch(this.updateLastPosition(),i){case Nn.ENTER:this.onEnterKeyDown(t);break;case Nn.TAB:this.onTabKeyDown(t);break;case Nn.DOWN:case Nn.UP:this.onUpDownKeyDown(t,i);break;case Nn.LEFT:case Nn.RIGHT:case Nn.PAGE_HOME:case Nn.PAGE_END:setTimeout((function(){e.updatePositionAndList()}));break;case Nn.ESCAPE:this.onEscapeKeyDown(t);break;case Nn.SPACE:t.ctrlKey&&!this.isListOpen&&(t.preventDefault(),this.forceOpenList());break}},e.prototype.confirmSelection=function(){var t,i=null===(t=this.autocompleteList)||void 0===t?void 0:t.getSelectedValue();i&&(this.closeList(),this.dispatchEvent({type:e.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:i,autocompleteType:this.autocompleteListParams.type}))},e.prototype.onTabKeyDown=function(t){this.isListOpen&&(t.preventDefault(),t.stopPropagation(),this.confirmSelection())},e.prototype.onEnterKeyDown=function(t){t.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()},e.prototype.onUpDownKeyDown=function(t,e){var i;t.preventDefault(),this.isListOpen?null===(i=this.autocompleteList)||void 0===i||i.onNavigationKeyDown(t,e):this.forceOpenList()},e.prototype.onEscapeKeyDown=function(t){this.isListOpen&&(t.preventDefault(),t.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))},e.prototype.onFocusOut=function(){this.isListOpen&&this.closeList()},e.prototype.updatePositionAndList=function(){var t;this.updateLastPosition(),this.updateAutocompleteList(null!==(t=this.eAutocompleteInput.getValue())&&void 0!==t?t:null)},e.prototype.setCaret=function(t,e){var i=this.gridOptionsService.getDocument();e&&i.activeElement===i.body&&this.eAutocompleteInput.getFocusableElement().focus(),this.eAutocompleteInput.getInputElement().setSelectionRange(t,t)},e.prototype.forceOpenList=function(){this.onValueChanged(this.eAutocompleteInput.getValue())},e.prototype.updateLastPosition=function(){var t;this.lastPosition=null!==(t=this.eAutocompleteInput.getInputElement().selectionStart)&&void 0!==t?t:0},e.prototype.validate=function(t){var i;this.validator&&(this.validationMessage=this.validator(t),this.eAutocompleteInput.getInputElement().setCustomValidity(null!==(i=this.validationMessage)&&void 0!==i?i:""),this.valid=!this.validationMessage,this.dispatchEvent({type:e.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))},e.prototype.openList=function(){var t=this;this.isListOpen=!0,this.autocompleteList=this.createBean(new Og({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:function(){return t.confirmSelection()},forceLastSelection:this.forceLastSelection}));var e=this.autocompleteList.getGui(),i={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.is("enableRtl")?"right":"left",keepWithinBounds:!0},o=this.popupService.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:function(){return t.popupService.positionPopupByComponent(i)},ariaLabel:this.listAriaLabel});this.hidePopup=o.hideFunc,this.autocompleteList.afterGuiAttached()},e.prototype.closeList=function(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null},e.prototype.onCompleted=function(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:e.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})},e.prototype.getValue=function(){return r(this.eAutocompleteInput.getValue())},e.prototype.setInputPlaceholder=function(t){return this.eAutocompleteInput.setInputPlaceholder(t),this},e.prototype.setInputAriaLabel=function(t){return this.eAutocompleteInput.setInputAriaLabel(t),this},e.prototype.setListAriaLabel=function(t){return this.listAriaLabel=t,this},e.prototype.setListGenerator=function(t){return this.listGenerator=t,this},e.prototype.setValidator=function(t){return this.validator=t,this},e.prototype.isValid=function(){return this.valid},e.prototype.setValue=function(t){var e=t.value,i=t.position,o=t.silent,n=t.updateListOnlyIfOpen,r=t.restoreFocus;this.eAutocompleteInput.setValue(e,!0),this.setCaret(null!==i&&void 0!==i?i:this.lastPosition,r),o||this.updateValue(e),n&&!this.isListOpen||this.updateAutocompleteList(e)},e.prototype.setForceLastSelection=function(t){return this.forceLastSelection=t,this},e.prototype.setInputDisabled=function(t){return this.eAutocompleteInput.setDisabled(t),this},e.EVENT_VALUE_CHANGED="eventValueChanged",e.EVENT_VALUE_CONFIRMED="eventValueConfirmed",e.EVENT_OPTION_SELECTED="eventOptionSelected",e.EVENT_VALID_CHANGED="eventValidChanged",Ig([pt("popupService")],e.prototype,"popupService",void 0),Ig([br("eAutocompleteInput")],e.prototype,"eAutocompleteInput",void 0),Ig([ut],e.prototype,"postConstruct",null),e}(vr),Pg=["mouseover","mouseout","mouseenter","mouseleave","mousemove"],Dg=["touchstart","touchend","touchmove","touchcancel"],kg=function(){function t(){this.renderingEngine="vanilla",this.isOutsideAngular=function(t){return $t(Pg,t)}}return t.prototype.setTimeout=function(t,e){window.setTimeout(t,e)},t.prototype.setInterval=function(t,e){return new cr((function(i){i(window.setInterval(t,e))}))},t.prototype.addEventListener=function(t,e,i,o){var n=$t(Dg,e);t.addEventListener(e,i,{capture:!!o,passive:n})},t.prototype.dispatchEvent=function(t,e,i){e()},t.prototype.frameworkComponent=function(t){return null},t.prototype.isFrameworkComponent=function(t){return!1},t}(),Ag=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Lg=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Mg=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Fg=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},Ng=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ag(e,t),e.prototype.getNextCellToFocus=function(t,e,i){return void 0===i&&(i=!1),i?this.getNextCellToFocusWithCtrlPressed(t,e):this.getNextCellToFocusWithoutCtrlPressed(t,e)},e.prototype.getNextCellToFocusWithCtrlPressed=function(t,e){var i,o,n=t===Nn.UP,r=t===Nn.DOWN,s=t===Nn.LEFT;if(n||r)o=n?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),i=e.column;else{var a=this.columnModel.getAllDisplayedColumns(),l=this.gridOptionsService.is("enableRtl");o=e.rowIndex,i=s!==l?a[0]:Dt(a)}return{rowIndex:o,rowPinned:null,column:i}},e.prototype.getNextCellToFocusWithoutCtrlPressed=function(t,e){var i=e,o=!1;while(!o){switch(t){case Nn.UP:i=this.getCellAbove(i);break;case Nn.DOWN:i=this.getCellBelow(i);break;case Nn.RIGHT:i=this.gridOptionsService.is("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case Nn.LEFT:i=this.gridOptionsService.is("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,console.warn("AG Grid: unknown key for navigation "+t);break}o=!i||this.isCellGoodToFocusOn(i)}return i},e.prototype.isCellGoodToFocusOn=function(t){var e,i=t.column;switch(t.rowPinned){case"top":e=this.pinnedRowModel.getPinnedTopRow(t.rowIndex);break;case"bottom":e=this.pinnedRowModel.getPinnedBottomRow(t.rowIndex);break;default:e=this.rowModel.getRow(t.rowIndex);break}if(!e)return!1;var o=i.isSuppressNavigable(e);return!o},e.prototype.getCellToLeft=function(t){if(!t)return null;var e=this.columnModel.getDisplayedColBefore(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null},e.prototype.getCellToRight=function(t){if(!t)return null;var e=this.columnModel.getDisplayedColAfter(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null},e.prototype.getRowBelow=function(t){var e=t.rowIndex,i=t.rowPinned;if(this.isLastRowInContainer(t))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}var o=this.rowModel.getRow(t.rowIndex),n=this.getNextStickyPosition(o);return n||{rowIndex:e+1,rowPinned:i}},e.prototype.getNextStickyPosition=function(t,e){if(this.gridOptionsService.isGroupRowsSticky()&&t&&t.sticky){var i=Fg([],Mg(this.rowRenderer.getStickyTopRowCtrls())).sort((function(t,e){return t.getRowNode().rowIndex-e.getRowNode().rowIndex})),o=e?-1:1,n=i.findIndex((function(e){return e.getRowNode().rowIndex===t.rowIndex})),r=i[n+o];return r?{rowIndex:r.getRowNode().rowIndex,rowPinned:null}:void 0}},e.prototype.getCellBelow=function(t){if(!t)return null;var e=this.getRowBelow(t);return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null},e.prototype.isLastRowInContainer=function(t){var e=t.rowPinned,i=t.rowIndex;if("top"===e){var o=this.pinnedRowModel.getPinnedTopRowData().length-1;return o<=i}if("bottom"===e){var n=this.pinnedRowModel.getPinnedBottomRowData().length-1;return n<=i}var r=this.paginationProxy.getPageLastRow();return r<=i},e.prototype.getRowAbove=function(t){var e=t.rowIndex,i=t.rowPinned,o=i?0===e:e===this.paginationProxy.getPageFirstRow();if(o)return"top"===i?null:i&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;var n=this.rowModel.getRow(t.rowIndex),r=this.getNextStickyPosition(n,!0);return r||{rowIndex:e-1,rowPinned:i}},e.prototype.getCellAbove=function(t){if(!t)return null;var e=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null},e.prototype.getLastBodyCell=function(){var t=this.paginationProxy.getPageLastRow();return{rowIndex:t,rowPinned:null}},e.prototype.getLastFloatingTopRow=function(){var t=this.pinnedRowModel.getPinnedTopRowData().length-1;return{rowIndex:t,rowPinned:"top"}},e.prototype.getNextTabbedCell=function(t,e){return e?this.getNextTabbedCellBackwards(t):this.getNextTabbedCellForwards(t)},e.prototype.getNextTabbedCellForwards=function(t){var e=this.columnModel.getAllDisplayedColumns(),i=t.rowIndex,o=t.rowPinned,n=this.columnModel.getDisplayedColAfter(t.column);if(!n){n=e[0];var r=this.getRowBelow(t);if(a(r))return null;if(!r.rowPinned&&!this.paginationProxy.isRowInPage(r))return null;i=r?r.rowIndex:null,o=r?r.rowPinned:null}return{rowIndex:i,column:n,rowPinned:o}},e.prototype.getNextTabbedCellBackwards=function(t){var e=this.columnModel.getAllDisplayedColumns(),i=t.rowIndex,o=t.rowPinned,n=this.columnModel.getDisplayedColBefore(t.column);if(!n){n=Dt(e);var r=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});if(a(r))return null;if(!r.rowPinned&&!this.paginationProxy.isRowInPage(r))return null;i=r?r.rowIndex:null,o=r?r.rowPinned:null}return{rowIndex:i,column:n,rowPinned:o}},Lg([pt("columnModel")],e.prototype,"columnModel",void 0),Lg([pt("rowModel")],e.prototype,"rowModel",void 0),Lg([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),Lg([pt("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),Lg([pt("paginationProxy")],e.prototype,"paginationProxy",void 0),e=Lg([ht("cellNavigationService")],e),e}(le),Vg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Bg=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Gg=function(t,e){return function(i,o){e(i,o,t)}},jg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.consuming=!1,e}return Vg(e,t),e.prototype.setBeans=function(t){this.logger=t.create("AlignedGridsService")},e.prototype.init=function(){this.addManagedListener(this.eventService,ge.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},e.prototype.fireEvent=function(t){if(!this.consuming){var e=this.gridOptionsService.get("alignedGrids");e&&e.forEach((function(e){if(e.api){var i=e.api.__getAlignedGridService();t(i)}}))}},e.prototype.onEvent=function(t){this.consuming=!0,t(),this.consuming=!1},e.prototype.fireColumnEvent=function(t){this.fireEvent((function(e){e.onColumnEvent(t)}))},e.prototype.fireScrollEvent=function(t){"horizontal"===t.direction&&this.fireEvent((function(e){e.onScrollEvent(t)}))},e.prototype.onScrollEvent=function(t){var e=this;this.onEvent((function(){var i=e.ctrlsService.getGridBodyCtrl();i.getScrollFeature().setHorizontalScrollPosition(t.left,!0)}))},e.prototype.getMasterColumns=function(t){var e=[];return t.columns?t.columns.forEach((function(t){e.push(t)})):t.column&&e.push(t.column),e},e.prototype.getColumnIds=function(t){var e=[];return t.columns?t.columns.forEach((function(t){e.push(t.getColId())})):t.column&&e.push(t.column.getColId()),e},e.prototype.onColumnEvent=function(t){var e=this;this.onEvent((function(){switch(t.type){case ge.EVENT_COLUMN_MOVED:case ge.EVENT_COLUMN_VISIBLE:case ge.EVENT_COLUMN_PINNED:case ge.EVENT_COLUMN_RESIZED:var i=t;e.processColumnEvent(i);break;case ge.EVENT_COLUMN_GROUP_OPENED:var o=t;e.processGroupOpenedEvent(o);break;case ge.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}}))},e.prototype.processGroupOpenedEvent=function(t){var e=t.columnGroup,i=null;if(e){var o=e.getGroupId();i=this.columnModel.getProvidedColumnGroup(o)}e&&!i||(this.logger.log("onColumnEvent-> processing "+t+" expanded = "+e.isExpanded()),this.columnModel.setColumnGroupOpened(i,e.isExpanded(),"alignedGridChanged"))},e.prototype.processColumnEvent=function(t){var e,i=this,o=t.column,n=null;if(o&&(n=this.columnModel.getPrimaryColumn(o.getColId())),!o||n){var r=this.getMasterColumns(t);switch(t.type){case ge.EVENT_COLUMN_MOVED:var s=t,a=t.columnApi.getColumnState(),l=a.map((function(t){return{colId:t.colId}}));this.columnModel.applyColumnState({state:l,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+t.type+" toIndex = "+s.toIndex);break;case ge.EVENT_COLUMN_VISIBLE:var u=t;a=t.columnApi.getColumnState(),l=a.map((function(t){return{colId:t.colId,hide:t.hide}}));this.columnModel.applyColumnState({state:l},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+t.type+" visible = "+u.visible);break;case ge.EVENT_COLUMN_PINNED:var c=t;a=t.columnApi.getColumnState(),l=a.map((function(t){return{colId:t.colId,pinned:t.pinned}}));this.columnModel.applyColumnState({state:l},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+t.type+" pinned = "+c.pinned);break;case ge.EVENT_COLUMN_RESIZED:var h=t,p={};r.forEach((function(e){i.logger.log("onColumnEvent-> processing "+t.type+" actualWidth = "+e.getActualWidth()),p[e.getId()]={key:e.getColId(),newWidth:e.getActualWidth()}})),null===(e=h.flexColumns)||void 0===e||e.forEach((function(t){p[t.getId()]&&delete p[t.getId()]})),this.columnModel.setColumnWidths(Object.values(p),!1,h.finished,"alignedGridChanged");break}var d=this.ctrlsService.getGridBodyCtrl(),f=d.isVerticalScrollShowing(),g=this.gridOptionsService.get("alignedGrids");g&&g.forEach((function(t){t.api&&t.api.setAlwaysShowVerticalScroll(f)}))}},Bg([pt("columnModel")],e.prototype,"columnModel",void 0),Bg([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Bg([Gg(0,gt("loggerFactory"))],e.prototype,"setBeans",null),Bg([ut],e.prototype,"init",null),e=Bg([ht("alignedGridsService")],e),e}(le),Hg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),$g=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Wg=function(t,e){return function(i,o){e(i,o,t)}},Ug=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},zg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hg(e,t),e.prototype.setBeans=function(t){this.logger=t.create("selectionService"),this.reset()},e.prototype.init=function(){var t=this;this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.addManagedPropertyListener("groupSelectsChildren",(function(e){return t.groupSelectsChildren=e.currentValue})),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",(function(e){return t.rowSelection=e.currentValue})),this.addManagedListener(this.eventService,ge.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},e.prototype.isMultiselect=function(){return"multiple"===this.rowSelection},e.prototype.setNodesSelected=function(t){var e;if(0===t.nodes.length)return 0;var i=t.newValue,o=t.clearSelection,n=t.suppressFinishActions,r=t.rangeSelect;t.event;var s=t.source,a=void 0===s?"api":s;if(t.nodes.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;var l=this.groupSelectsChildren&&!0===t.groupSelectsFiltered,u=t.nodes.map((function(t){return t.footer?t.sibling:t}));if(r){if(t.nodes.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;var c=this.getLastSelectedNode();if(c){var h=u[0],p=c!==h;if(p&&this.isMultiselect()){var d=this.selectRange(h,c,t.newValue,a);return this.setLastSelectedNode(h),d}}}for(var f=0,g=0;g<u.length;g++){h=u[g];var y=l&&h.group;if(!y){var _=h.selectThisNode(i,t.event,a);_&&f++}this.groupSelectsChildren&&(null===(e=h.childrenAfterGroup)||void 0===e?void 0:e.length)&&(f+=this.selectChildren(h,i,l,a))}if(!n){var m=i&&(o||!this.isMultiselect());if(m&&(f+=this.clearOtherNodes(u[0],a)),f>0){this.updateGroupsFromChildrenSelections(a);var v={type:ge.EVENT_SELECTION_CHANGED,source:a};this.eventService.dispatchEvent(v)}i&&this.setLastSelectedNode(u[u.length-1])}return f},e.prototype.selectRange=function(t,e,i,o){var n=this;void 0===i&&(i=!0);var r=this.rowModel.getNodesInRangeForSelection(t,e),s=0;r.forEach((function(e){if(!(e.group&&n.groupSelectsChildren||!1===i&&t===e)){var r=e.selectThisNode(i,void 0,o);r&&s++}})),this.updateGroupsFromChildrenSelections(o);var a={type:ge.EVENT_SELECTION_CHANGED,source:o};return this.eventService.dispatchEvent(a),s},e.prototype.selectChildren=function(t,e,i,o){var n=i?t.childrenAfterAggFilter:t.childrenAfterGroup;return sr.missing(n)?0:this.setNodesSelected({newValue:e,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:o,nodes:n})},e.prototype.setLastSelectedNode=function(t){this.lastSelectedNode=t},e.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},e.prototype.getSelectedNodes=function(){var t=[];return C(this.selectedNodes,(function(e,i){i&&t.push(i)})),t},e.prototype.getSelectedRows=function(){var t=[];return C(this.selectedNodes,(function(e,i){i&&i.data&&t.push(i.data)})),t},e.prototype.getSelectionCount=function(){return Object.values(this.selectedNodes).length},e.prototype.filterFromSelection=function(t){var e={};Object.entries(this.selectedNodes).forEach((function(i){var o=Ug(i,2),n=o[0],r=o[1],s=r&&t(r);s&&(e[n]=r)})),this.selectedNodes=e},e.prototype.updateGroupsFromChildrenSelections=function(t,e){if(!this.groupSelectsChildren)return!1;if("clientSide"!==this.rowModel.getType())return!1;var i=this.rowModel,o=i.getRootNode();e||(e=new uf(!0,o),e.setInactive());var n=!1;return e.forEachChangedNodeDepthFirst((function(e){if(e!==o){var i=e.calculateSelectedFromChildren();n=e.selectThisNode(null!==i&&i,void 0,t)||n}})),n},e.prototype.clearOtherNodes=function(t,e){var i=this,o={},n=0;return C(this.selectedNodes,(function(r,s){if(s&&s.id!==t.id){var a=i.selectedNodes[s.id];n+=a.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:e}),i.groupSelectsChildren&&s.parent&&(o[s.parent.id]=s.parent)}})),C(o,(function(t,i){var o=i.calculateSelectedFromChildren();i.selectThisNode(null!==o&&o,void 0,e)})),n},e.prototype.onRowSelected=function(t){var e=t.node;this.groupSelectsChildren&&e.group||(e.isSelected()?this.selectedNodes[e.id]=e:delete this.selectedNodes[e.id])},e.prototype.syncInRowNode=function(t,e){this.syncInOldRowNode(t,e),this.syncInNewRowNode(t)},e.prototype.syncInOldRowNode=function(t,e){var i=s(e)&&t.id!==e.id;if(i&&e){var o=e.id,n=this.selectedNodes[o]==t;n&&(this.selectedNodes[e.id]=e)}},e.prototype.syncInNewRowNode=function(t){s(this.selectedNodes[t.id])?(t.setSelectedInitialValue(!0),this.selectedNodes[t.id]=t):t.setSelectedInitialValue(!1)},e.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},e.prototype.getBestCostNodeSelection=function(){if("clientSide"===this.rowModel.getType()){var t=this.rowModel,e=t.getTopLevelNodes();if(null!==e){var i=[];return o(e),i}}function o(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];if(r.isSelected())i.push(r);else{var s=r;s.group&&s.children&&o(s.children)}}}},e.prototype.isEmpty=function(){var t=0;return C(this.selectedNodes,(function(e,i){i&&t++})),0===t},e.prototype.deselectAllRowNodes=function(t){var e=function(t){return t.selectThisNode(!1,void 0,o)},i="clientSide"===this.rowModel.getType(),o=t.source,n=t.justFiltered,r=t.justCurrentPage;if(r||n){if(!i)return void console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(n,r).forEach(e)}else C(this.selectedNodes,(function(t,i){i&&e(i)})),this.reset();i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(o);var s={type:ge.EVENT_SELECTION_CHANGED,source:o};this.eventService.dispatchEvent(s)},e.prototype.getSelectAllState=function(t,e){var i=this,o=0,n=0,r=function(t){i.groupSelectsChildren&&t.group||(t.isSelected()?o++:t.selectable&&n++)};return this.getNodesToSelect(t,e).forEach(r),(0!==o||0!==n)&&(o>0&&n>0?null:o>0)},e.prototype.getNodesToSelect=function(t,e){var i=this;if(void 0===t&&(t=!1),void 0===e&&(e=!1),"clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not "+this.rowModel.getType());var o=[];if(e)return this.paginationProxy.forEachNodeOnPage((function(t){if(t.group)if(t.expanded)i.groupSelectsChildren||o.push(t);else{var e=function(t){var i;o.push(t),(null===(i=t.childrenAfterFilter)||void 0===i?void 0:i.length)&&t.childrenAfterFilter.forEach(e)};e(t)}else o.push(t)})),o;var n=this.rowModel;return t?(n.forEachNodeAfterFilter((function(t){o.push(t)})),o):(n.forEachNode((function(t){o.push(t)})),o)},e.prototype.selectAllRowNodes=function(t){if("clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not "+this.rowModel.getType());var e=t.source,i=t.justFiltered,o=t.justCurrentPage,n=function(t){return t.selectThisNode(!0,void 0,e)};this.getNodesToSelect(i,o).forEach(n),"clientSide"===this.rowModel.getType()&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(e);var r={type:ge.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(r)},e.prototype.getServerSideSelectionState=function(){return null},e.prototype.setServerSideSelectionState=function(t){},$g([pt("rowModel")],e.prototype,"rowModel",void 0),$g([pt("paginationProxy")],e.prototype,"paginationProxy",void 0),$g([Wg(0,gt("loggerFactory"))],e.prototype,"setBeans",null),$g([ut],e.prototype,"init",null),e=$g([ht("selectionService")],e),e}(le),Kg=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Yg=function(){function t(){}return t.prototype.sizeColumnsToFit=function(t){"undefined"===typeof t&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(t,"api")},t.prototype.setColumnGroupOpened=function(t,e){this.columnModel.setColumnGroupOpened(t,e,"api")},t.prototype.getColumnGroup=function(t,e){return this.columnModel.getColumnGroup(t,e)},t.prototype.getProvidedColumnGroup=function(t){return this.columnModel.getProvidedColumnGroup(t)},t.prototype.getDisplayNameForColumn=function(t,e){return this.columnModel.getDisplayNameForColumn(t,e)||""},t.prototype.getDisplayNameForColumnGroup=function(t,e){return this.columnModel.getDisplayNameForColumnGroup(t,e)||""},t.prototype.getColumn=function(t){return this.columnModel.getPrimaryColumn(t)},t.prototype.getColumns=function(){return this.columnModel.getAllPrimaryColumns()},t.prototype.applyColumnState=function(t){return this.columnModel.applyColumnState(t,"api")},t.prototype.getColumnState=function(){return this.columnModel.getColumnState()},t.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},t.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},t.prototype.setColumnGroupState=function(t){this.columnModel.setColumnGroupState(t,"api")},t.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},t.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},t.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},t.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},t.prototype.getDisplayedColAfter=function(t){return this.columnModel.getDisplayedColAfter(t)},t.prototype.getDisplayedColBefore=function(t){return this.columnModel.getDisplayedColBefore(t)},t.prototype.setColumnVisible=function(t,e){this.columnModel.setColumnVisible(t,e,"api")},t.prototype.setColumnsVisible=function(t,e){this.columnModel.setColumnsVisible(t,e,"api")},t.prototype.setColumnPinned=function(t,e){this.columnModel.setColumnPinned(t,e,"api")},t.prototype.setColumnsPinned=function(t,e){this.columnModel.setColumnsPinned(t,e,"api")},t.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},t.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},t.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},t.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},t.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},t.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},t.prototype.moveColumn=function(t,e){this.columnModel.moveColumn(t,e,"api")},t.prototype.moveColumnByIndex=function(t,e){this.columnModel.moveColumnByIndex(t,e,"api")},t.prototype.moveColumns=function(t,e){this.columnModel.moveColumns(t,e,"api")},t.prototype.moveRowGroupColumn=function(t,e){this.columnModel.moveRowGroupColumn(t,e)},t.prototype.setColumnAggFunc=function(t,e){this.columnModel.setColumnAggFunc(t,e)},t.prototype.setColumnWidth=function(t,e,i,o){void 0===i&&(i=!0),this.columnModel.setColumnWidths([{key:t,newWidth:e}],!1,i,o)},t.prototype.setColumnWidths=function(t,e,i){void 0===e&&(e=!0),this.columnModel.setColumnWidths(t,!1,e,i)},t.prototype.setPivotMode=function(t){this.columnModel.setPivotMode(t)},t.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},t.prototype.getPivotResultColumn=function(t,e){return this.columnModel.getSecondaryPivotColumn(t,e)},t.prototype.setValueColumns=function(t){this.columnModel.setValueColumns(t,"api")},t.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},t.prototype.removeValueColumn=function(t){this.columnModel.removeValueColumn(t,"api")},t.prototype.removeValueColumns=function(t){this.columnModel.removeValueColumns(t,"api")},t.prototype.addValueColumn=function(t){this.columnModel.addValueColumn(t,"api")},t.prototype.addValueColumns=function(t){this.columnModel.addValueColumns(t,"api")},t.prototype.setRowGroupColumns=function(t){this.columnModel.setRowGroupColumns(t,"api")},t.prototype.removeRowGroupColumn=function(t){this.columnModel.removeRowGroupColumn(t,"api")},t.prototype.removeRowGroupColumns=function(t){this.columnModel.removeRowGroupColumns(t,"api")},t.prototype.addRowGroupColumn=function(t){this.columnModel.addRowGroupColumn(t,"api")},t.prototype.addRowGroupColumns=function(t){this.columnModel.addRowGroupColumns(t,"api")},t.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},t.prototype.setPivotColumns=function(t){this.columnModel.setPivotColumns(t,"api")},t.prototype.removePivotColumn=function(t){this.columnModel.removePivotColumn(t,"api")},t.prototype.removePivotColumns=function(t){this.columnModel.removePivotColumns(t,"api")},t.prototype.addPivotColumn=function(t){this.columnModel.addPivotColumn(t,"api")},t.prototype.addPivotColumns=function(t){this.columnModel.addPivotColumns(t,"api")},t.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},t.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},t.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},t.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},t.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},t.prototype.autoSizeColumn=function(t,e){return this.columnModel.autoSizeColumn(t,e,"api")},t.prototype.autoSizeColumns=function(t,e){this.columnModel.autoSizeColumns({columns:t,skipHeader:e})},t.prototype.autoSizeAllColumns=function(t){this.columnModel.autoSizeAllColumns(t,"api")},t.prototype.setPivotResultColumns=function(t){this.columnModel.setSecondaryColumns(t,"api")},t.prototype.getPivotResultColumns=function(){return this.columnModel.getSecondaryColumns()},t.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(sr.removeAllReferences.bind(window,this,"Column API"),100)},t.prototype.getAllColumns=function(){return qe("28.0","getAllColumns","getColumns"),this.getColumns()},t.prototype.getPrimaryColumns=function(){return qe("28.0","getPrimaryColumns","getColumns"),this.getColumns()},t.prototype.getSecondaryColumns=function(){return qe("28.0","getSecondaryColumns","getPivotResultColumns"),this.getPivotResultColumns()},t.prototype.setSecondaryColumns=function(t){qe("28.0","setSecondaryColumns","setPivotResultColumns"),this.setPivotResultColumns(t)},t.prototype.getSecondaryPivotColumn=function(t,e){return qe("28.0","getSecondaryPivotColumn","getPivotResultColumn"),this.getPivotResultColumn(t,e)},Kg([pt("columnModel")],t.prototype,"columnModel",void 0),Kg([ct],t.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),t=Kg([ht("columnApi")],t),t}(),qg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Xg=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Qg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.initialised=!1,e.isSsrm=!1,e}return qg(e,t),e.prototype.init=function(){var t=this;this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.is("enableCellExpressions"),this.isTreeData=this.gridOptionsService.is("treeData"),this.initialised=!0,this.eventService.addEventListener(ge.EVENT_CELL_VALUE_CHANGED,(function(e){return t.callColumnCellValueChangedHandler(e)}),this.gridOptionsService.useAsyncEvents()),this.addManagedPropertyListener("treeData",(function(e){return t.isTreeData=e.currentValue}))},e.prototype.getValue=function(t,e,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!1),this.initialised||this.init(),e){var n,r=t.getColDef(),s=r.field,a=t.getColId(),l=e.data,u=e.groupData&&void 0!==e.groupData[a],c=!o&&e.aggData&&void 0!==e.aggData[a],h=this.isSsrm&&o&&!!t.getColDef().aggFunc,p=this.isSsrm&&e.footer&&e.field&&(!0===t.getColDef().showRowGroup||t.getColDef().showRowGroup===e.field);if(i&&r.filterValueGetter?n=this.executeFilterValueGetter(r.filterValueGetter,l,t,e):this.isTreeData&&c?n=e.aggData[a]:this.isTreeData&&r.valueGetter?n=this.executeValueGetter(r.valueGetter,l,t,e):this.isTreeData&&s&&l?n=M(l,s,t.isFieldContainsDots()):u?n=e.groupData[a]:c?n=e.aggData[a]:r.valueGetter?n=this.executeValueGetter(r.valueGetter,l,t,e):p?n=M(l,e.field,t.isFieldContainsDots()):s&&l&&!h&&(n=M(l,s,t.isFieldContainsDots())),this.cellExpressions&&"string"===typeof n&&0===n.indexOf("=")){var d=n.substring(1);n=this.executeValueGetter(d,l,t,e)}if(null==n){var f=this.getOpenedGroup(e,t);if(null!=f)return f}return n}},e.prototype.getOpenedGroup=function(t,e){if(this.gridOptionsService.is("showOpenedGroup")){var i=e.getColDef();if(i.showRowGroup){var o=e.getColDef().showRowGroup,n=t.parent;while(null!=n){if(n.rowGroupColumn&&(!0===o||o===n.rowGroupColumn.getColId()))return n.key;n=n.parent}}}},e.prototype.setValue=function(t,e,i,o){var n=this.columnModel.getPrimaryColumn(e);if(!t||!n)return!1;a(t.data)&&(t.data={});var r=n.getColDef(),l=r.field,u=r.valueSetter;if(a(l)&&a(u))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(n,i))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;var c,h={node:t,data:t.data,oldValue:this.getValue(n,t),newValue:i,colDef:n.getColDef(),column:n,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};if(h.newValue=i,c=s(u)?"function"===typeof u?u(h):this.expressionService.evaluate(u,h):this.setValueUsingField(t.data,l,i,n.isFieldContainsDots()),void 0===c&&(c=!0),!c)return!1;t.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),h.newValue=this.getValue(n,t);var p={type:ge.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:h.column,api:h.api,columnApi:h.columnApi,colDef:h.colDef,context:h.context,data:t.data,node:t,oldValue:h.oldValue,newValue:h.newValue,value:h.newValue,source:o};return this.eventService.dispatchEvent(p),!0},e.prototype.callColumnCellValueChangedHandler=function(t){var e=t.colDef.onCellValueChanged;"function"===typeof e&&e({node:t.node,data:t.data,oldValue:t.oldValue,newValue:t.newValue,colDef:t.colDef,column:t.column,api:t.api,columnApi:t.columnApi,context:t.context})},e.prototype.setValueUsingField=function(t,e,i,o){if(!e)return!1;var n=!1;if(o){var r=e.split("."),s=t;while(r.length>0&&s){var a=r.shift();0===r.length?(n=s[a]===i,n||(s[a]=i)):s=s[a]}}else n=t[e]===i,n||(t[e]=i);return!n},e.prototype.executeFilterValueGetter=function(t,e,i,o){var n={data:e,node:o,column:i,colDef:i.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,o)};return"function"===typeof t?t(n):this.expressionService.evaluate(t,n)},e.prototype.executeValueGetter=function(t,e,i,o){var n=i.getColId(),r=this.valueCache.getValue(o,n);if(void 0!==r)return r;var s,a={data:e,node:o,column:i,colDef:i.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,o)};return s="function"===typeof t?t(a):this.expressionService.evaluate(t,a),this.valueCache.setValue(o,n,s),s},e.prototype.getValueCallback=function(t,e){var i=this.columnModel.getPrimaryColumn(e);return i?this.getValue(i,t):null},e.prototype.getKeyForNode=function(t,e){var i=this.getValue(t,e),o=t.getColDef().keyCreator,n=i;if(o){var r={value:i,colDef:t.getColDef(),column:t,node:e,data:e.data,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};n=o(r)}return"string"===typeof n||null==n||(n=String(n),"[object Object]"===n&&G((function(){console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")}),"getKeyForNode - warn about [object,object]")),n},Xg([pt("expressionService")],e.prototype,"expressionService",void 0),Xg([pt("columnModel")],e.prototype,"columnModel",void 0),Xg([pt("valueCache")],e.prototype,"valueCache",void 0),Xg([pt("dataTypeService")],e.prototype,"dataTypeService",void 0),Xg([ut],e.prototype,"init",null),e=Xg([ht("valueService")],e),e}(le),Jg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Zg=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ty=function(t,e){return function(i,o){e(i,o,t)}},ey=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.expressionToFunctionCache={},e}return Jg(e,t),e.prototype.setBeans=function(t){this.logger=t.create("ExpressionService")},e.prototype.evaluate=function(t,e){if("string"===typeof t)return this.evaluateExpression(t,e);console.error("AG Grid: value should be either a string or a function",t)},e.prototype.evaluateExpression=function(t,e){try{var i=this.createExpressionFunction(t),o=i(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.columnApi,e.getValue,e.column,e.columnGroup);return o}catch(n){return console.log("Processing of the expression failed"),console.log("Expression = "+t),console.log("Params =",e),console.log("Exception = "+n),null}},e.prototype.createExpressionFunction=function(t){if(this.expressionToFunctionCache[t])return this.expressionToFunctionCache[t];var e=this.createFunctionBody(t),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",e);return this.expressionToFunctionCache[t]=i,i},e.prototype.createFunctionBody=function(t){return t.indexOf("return")>=0?t:"return "+t+";"},Zg([ty(0,gt("loggerFactory"))],e.prototype,"setBeans",null),e=Zg([ht("expressionService")],e),e}(le),iy=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),oy=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ny=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateCache={},e.waitingCallbacks={},e}return iy(e,t),e.prototype.getTemplate=function(t,e){var i=this.templateCache[t];if(i)return i;var o=this.waitingCallbacks[t],n=this;if(!o){o=[],this.waitingCallbacks[t]=o;var r=new XMLHttpRequest;r.onload=function(){n.handleHttpResult(this,t)},r.open("GET",t),r.send()}return e&&o.push(e),null},e.prototype.handleHttpResult=function(t,e){if(200===t.status&&null!==t.response){this.templateCache[e]=t.response||t.responseText;for(var i=this.waitingCallbacks[e],o=0;o<i.length;o++){var n=i[o];n()}}else console.warn("AG Grid: Unable to get template error "+t.status+" - "+e)},e=oy([ht("templateService")],e),e}(le),ry=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),sy=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ay=function(t,e){return function(i,o){e(i,o,t)}},ly=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ry(e,t),e.prototype.setBeans=function(t){this.logging=t.is("debug")},e.prototype.create=function(t){return new uy(t,this.isLogging.bind(this))},e.prototype.isLogging=function(){return this.logging},sy([ay(0,gt("gridOptionsService"))],e.prototype,"setBeans",null),e=sy([ht("loggerFactory")],e),e}(le),uy=function(){function t(t,e){this.name=t,this.isLoggingFunc=e}return t.prototype.isLogging=function(){return this.isLoggingFunc()},t.prototype.log=function(t){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+t)},t}(),cy=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),hy=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},py=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cy(e,t),e.prototype.setComp=function(t,e,i){var o=this;this.view=t,this.eGridHostDiv=e,this.eGui=i,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:function(){return o.eGui},isInterestedIn:function(t){return t===Gs.HeaderCell||t===Gs.ToolPanel},getIconName:function(){return Ua.ICON_NOT_ALLOWED}}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(e),this.createManagedBean(new Du(this.view)),this.addRtlSupport(),this.addManagedListener(this,ge.EVENT_KEYBOARD_FOCUS,(function(){o.view.addOrRemoveKeyboardFocusClass(!0)})),this.addManagedListener(this,ge.EVENT_MOUSE_FOCUS,(function(){o.view.addOrRemoveKeyboardFocusClass(!1)}));var n=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc((function(){return n()})),this.ctrlsService.registerGridCtrl(this)},e.prototype.isDetailGrid=function(){var t,e=this.focusService.findTabbableParent(this.getGui());return(null===(t=null===e||void 0===e?void 0:e.getAttribute("row-id"))||void 0===t?void 0:t.startsWith("detail"))||!1},e.prototype.showDropZones=function(){return nt.__isRegistered(Z.RowGroupingModule,this.context.getGridId())},e.prototype.showSideBar=function(){return nt.__isRegistered(Z.SideBarModule,this.context.getGridId())},e.prototype.showStatusBar=function(){return nt.__isRegistered(Z.StatusBarModule,this.context.getGridId())},e.prototype.showWatermark=function(){return nt.__isRegistered(Z.EnterpriseCoreModule,this.context.getGridId())},e.prototype.onGridSizeChanged=function(){var t={type:ge.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(t)},e.prototype.addRtlSupport=function(){var t=this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(t)},e.prototype.destroyGridUi=function(){this.view.destroyGridUi()},e.prototype.getGui=function(){return this.eGui},e.prototype.setResizeCursor=function(t){this.view.setCursor(t?"ew-resize":null)},e.prototype.disableUserSelect=function(t){this.view.setUserSelect(t?"none":null)},e.prototype.focusNextInnerContainer=function(t){var e=this.gridOptionsService.getDocument(),i=this.view.getFocusableContainers(),o=i.findIndex((function(t){return t.contains(e.activeElement)})),n=o+(t?-1:1);return!(n<=0||n>=i.length)&&this.focusService.focusInto(i[n])},e.prototype.focusInnerElement=function(t){var e=this.view.getFocusableContainers(),i=this.columnModel.getAllDisplayedColumns();if(t){if(e.length>1)return this.focusService.focusInto(Dt(e),!0);var o=Dt(i);if(this.focusService.focusGridView(o,!0))return!0}return 0===this.gridOptionsService.getNum("headerHeight")?this.focusService.focusGridView(i[0]):this.focusService.focusFirstHeader()},e.prototype.forceFocusOutOfContainer=function(t){void 0===t&&(t=!1),this.view.forceFocusOutOfContainer(t)},hy([pt("focusService")],e.prototype,"focusService",void 0),hy([pt("resizeObserverService")],e.prototype,"resizeObserverService",void 0),hy([pt("columnModel")],e.prototype,"columnModel",void 0),hy([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),hy([pt("mouseEventService")],e.prototype,"mouseEventService",void 0),hy([pt("dragAndDropService")],e.prototype,"dragAndDropService",void 0),e}(le),dy=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),fy=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},gy=function(t){function e(e){var i=t.call(this)||this;return i.eGridDiv=e,i}return dy(e,t),e.prototype.postConstruct=function(){var t=this;this.logger=this.loggerFactory.create("GridComp");var e={destroyGridUi:function(){return t.destroyBean(t)},setRtlClass:function(e){return t.addCssClass(e)},addOrRemoveKeyboardFocusClass:function(e){return t.addOrRemoveCssClass(Hp.AG_KEYBOARD_FOCUS,e)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(e){t.getGui().style.userSelect=null!=e?e:"",t.getGui().style.webkitUserSelect=null!=e?e:""},setCursor:function(e){t.getGui().style.cursor=null!=e?e:""}};this.ctrl=this.createManagedBean(new py);var i=this.createTemplate();this.setTemplate(i),this.ctrl.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(e){return t.ctrl.focusInnerElement(e)}})},e.prototype.insertGridIntoDom=function(){var t=this,e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc((function(){t.eGridDiv.removeChild(e),t.logger.log("Grid removed from DOM")}))},e.prototype.updateLayoutClasses=function(t,e){var i=this.eRootWrapperBody.classList;i.toggle(du.AUTO_HEIGHT,e.autoHeight),i.toggle(du.NORMAL,e.normal),i.toggle(du.PRINT,e.print),this.addOrRemoveCssClass(du.AUTO_HEIGHT,e.autoHeight),this.addOrRemoveCssClass(du.NORMAL,e.normal),this.addOrRemoveCssClass(du.PRINT,e.print)},e.prototype.createTemplate=function(){var t=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",e=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",i=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",o=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"",n='<div class="ag-root-wrapper" role="presentation">\n                '+t+'\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    '+e+"\n                </div>\n                "+i+"\n                <ag-pagination></ag-pagination>\n                "+o+"\n            </div>";return n},e.prototype.getFocusableElement=function(){return this.eRootWrapperBody},e.prototype.getFocusableContainers=function(){var t=[this.gridBodyComp.getGui()];return this.sideBarComp&&t.push(this.sideBarComp.getGui()),t.filter((function(t){return ln(t)}))},fy([pt("loggerFactory")],e.prototype,"loggerFactory",void 0),fy([br("gridBody")],e.prototype,"gridBodyComp",void 0),fy([br("sideBar")],e.prototype,"sideBarComp",void 0),fy([br("rootWrapperBody")],e.prototype,"eRootWrapperBody",void 0),fy([ut],e.prototype,"postConstruct",null),e}(Ff),yy=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),_y=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},my=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},vy=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},by=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return yy(e,t),i=e,e.prototype.progressSort=function(t,e,i){var o=this.getNextSortDirection(t);this.setSortForColumn(t,o,e,i)},e.prototype.setSortForColumn=function(t,e,i,o){"asc"!==e&&"desc"!==e&&(e=null);var n=this.gridOptionsService.isColumnsSortingCoupledToGroup(),r=[t];if(n&&t.getColDef().showRowGroup){var s=this.columnModel.getSourceColumnsForGroupColumn(t),a=null===s||void 0===s?void 0:s.filter((function(t){return t.getColDef().sortable}));a&&(r=vy([t],my(a)))}r.forEach((function(t){return t.setSort(e,o)}));var l=(i||this.gridOptionsService.is("alwaysMultiSort"))&&!this.gridOptionsService.is("suppressMultiSort");l||this.clearSortBarTheseColumns(r,o),this.updateSortIndex(t),this.dispatchSortChangedEvents(o)},e.prototype.updateSortIndex=function(t){var e=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=this.columnModel.getGroupDisplayColumnForGroup(t.getId()),o=e&&i||t,n=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach((function(t){return t.setSortIndex(null)}));var r=n.filter((function(t){return t!==o})),s=o.getSort()?vy(vy([],my(r)),[o]):r;s.forEach((function(t,e){return t.setSortIndex(e)}))},e.prototype.onSortChanged=function(t){this.dispatchSortChangedEvents(t)},e.prototype.isSortActive=function(){var t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns(),e=t.filter((function(t){return!!t.getSort()}));return e&&e.length>0},e.prototype.dispatchSortChangedEvents=function(t){var e={type:ge.EVENT_SORT_CHANGED,source:t};this.eventService.dispatchEvent(e)},e.prototype.clearSortBarTheseColumns=function(t,e){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach((function(i){t.includes(i)||i.setSort(void 0,e)}))},e.prototype.getNextSortDirection=function(t){var e;if(e=t.getColDef().sortingOrder?t.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?this.gridOptionsService.get("sortingOrder"):i.DEFAULT_SORTING_ORDER,!Array.isArray(e)||e.length<=0)return console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's "+e),null;var o,n=e.indexOf(t.getSort()),r=n<0,s=n==e.length-1;return o=r||s?e[0]:e[n+1],i.DEFAULT_SORTING_ORDER.indexOf(o)<0?(console.warn("AG Grid: invalid sort type "+o),null):o},e.prototype.getIndexedSortMap=function(){var t=this,e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter((function(t){return!!t.getSort()}));if(this.columnModel.isPivotMode()){var i=this.gridOptionsService.isColumnsSortingCoupledToGroup();e=e.filter((function(e){var o=!!e.getAggFunc(),n=!e.isPrimary(),r=i?t.columnModel.getGroupDisplayColumnForGroup(e.getId()):e.getColDef().showRowGroup;return o||n||r}))}var o=this.columnModel.getRowGroupColumns().filter((function(t){return!!t.getSort()})),n=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!o.length;n&&(e=vy([],my(new Set(e.map((function(e){var i;return null!==(i=t.columnModel.getGroupDisplayColumnForGroup(e.getId()))&&void 0!==i?i:e}))))));var r={};e.forEach((function(t,e){return r[t.getId()]=e})),e.sort((function(t,e){var i=t.getSortIndex(),o=e.getSortIndex();if(null!=i&&null!=o)return i-o;if(null==i&&null==o){var n=r[t.getId()],s=r[e.getId()];return n>s?1:-1}return null==o?-1:1}));var s=new Map;return e.forEach((function(t,e){return s.set(t,e)})),n&&o.forEach((function(e){var i=t.columnModel.getGroupDisplayColumnForGroup(e.getId());s.set(e,s.get(i))})),s},e.prototype.getColumnsWithSortingOrdered=function(){return vy([],my(this.getIndexedSortMap().entries())).sort((function(t,e){var i=my(t,2);i[0];var o=i[1],n=my(e,2);n[0];var r=n[1];return o-r})).map((function(t){var e=my(t,1),i=e[0];return i}))},e.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().filter((function(t){return t.getSort()})).map((function(t){return{sort:t.getSort(),colId:t.getId()}}))},e.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().filter((function(t){return t.getSort()})).map((function(t){return{sort:t.getSort(),column:t}}))},e.prototype.canColumnDisplayMixedSort=function(t){var e=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=!!t.getColDef().showRowGroup;return e&&i},e.prototype.getDisplaySortForColumn=function(t){var e=this.columnModel.getSourceColumnsForGroupColumn(t);if(!this.canColumnDisplayMixedSort(t)||!(null===e||void 0===e?void 0:e.length))return t.getSort();var i=null!=t.getColDef().field||!!t.getColDef().valueGetter,o=i?vy([t],my(e)):e,n=o[0].getSort(),r=o.every((function(t){return t.getSort()==n}));return r?n:"mixed"},e.prototype.getDisplaySortIndexForColumn=function(t){return this.getIndexedSortMap().get(t)},e.DEFAULT_SORTING_ORDER=["asc","desc",null],_y([pt("columnModel")],e.prototype,"columnModel",void 0),e=i=_y([ht("sortController")],e),e}(le),Cy=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),wy=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Sy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cy(e,t),e.prototype.setMouseOver=function(t){this.selectedColumns=t;var e={type:ge.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)},e.prototype.clearMouseOver=function(){this.selectedColumns=null;var t={type:ge.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)},e.prototype.isHovered=function(t){return!!this.selectedColumns&&this.selectedColumns.indexOf(t)>=0},e=wy([ht("columnHoverService")],e),e}(le),Ey=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),xy=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Oy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.executeNextFuncs=[],e.executeLaterFuncs=[],e.active=!1,e.animationThreadCount=0,e}return Ey(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady((function(e){return t.gridBodyCtrl=e.gridBodyCtrl}))},e.prototype.isActive=function(){return this.active},e.prototype.start=function(){this.active||this.gridOptionsService.is("suppressColumnMoveAnimation")||this.gridOptionsService.is("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)},e.prototype.finish=function(){this.active&&(this.flush(),this.active=!1)},e.prototype.executeNextVMTurn=function(t){this.active?this.executeNextFuncs.push(t):t()},e.prototype.executeLaterVMTurn=function(t){this.active?this.executeLaterFuncs.push(t):t()},e.prototype.ensureAnimationCssClassPresent=function(){var t=this;this.animationThreadCount++;var e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push((function(){t.animationThreadCount===e&&t.gridBodyCtrl.setColumnMovingCss(!1)}))},e.prototype.flush=function(){var t=this.executeNextFuncs;this.executeNextFuncs=[];var e=this.executeLaterFuncs;this.executeLaterFuncs=[],0===t.length&&0===e.length||(window.setTimeout((function(){return t.forEach((function(t){return t()}))}),0),window.setTimeout((function(){return e.forEach((function(t){return t()}))}),300))},xy([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),xy([ut],e.prototype,"postConstruct",null),e=xy([ht("columnAnimationService")],e),e}(le),Ry=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Iy=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ty=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ry(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady((function(e){t.centerRowContainerCon=e.centerRowContainerCtrl,t.addManagedListener(t.eventService,ge.EVENT_BODY_HEIGHT_CHANGED,t.checkPageSize.bind(t)),t.addManagedListener(t.eventService,ge.EVENT_SCROLL_VISIBILITY_CHANGED,t.checkPageSize.bind(t)),t.checkPageSize()}))},e.prototype.notActive=function(){return!this.gridOptionsService.is("paginationAutoPageSize")||null==this.centerRowContainerCon},e.prototype.checkPageSize=function(){var t=this;if(!this.notActive()){var e=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(e>0){var i=function(){var i=t.gridOptionsService.getRowHeightAsNumber(),o=Math.floor(e/i);t.gridOptionsService.set("paginationPageSize",o)};this.isBodyRendered?Y((function(){return i()}),50)():(i(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Iy([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Iy([ut],e.prototype,"postConstruct",null),e=Iy([ht("paginationAutoPageSizeService")],e),e}(le),Py=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Dy=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ky=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cacheVersion=0,e}return Py(e,t),e.prototype.init=function(){this.active=this.gridOptionsService.is("valueCache"),this.neverExpires=this.gridOptionsService.is("valueCacheNeverExpires")},e.prototype.onDataChanged=function(){this.neverExpires||this.expire()},e.prototype.expire=function(){this.cacheVersion++},e.prototype.setValue=function(t,e,i){this.active&&(t.__cacheVersion!==this.cacheVersion&&(t.__cacheVersion=this.cacheVersion,t.__cacheData={}),t.__cacheData[e]=i)},e.prototype.getValue=function(t,e){if(this.active&&t.__cacheVersion===this.cacheVersion)return t.__cacheData[e]},Dy([ut],e.prototype,"init",null),e=Dy([ht("valueCache")],e),e}(le),Ay=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ly=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},My="paste",Fy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ay(e,t),e.prototype.init=function(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,ge.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},e.prototype.onCellValueChanged=function(t){t.source!==My&&this.doChangeDetection(t.node,t.column)},e.prototype.doChangeDetection=function(t,e){if(!this.gridOptionsService.is("suppressChangeDetection")){var i=[t];if(this.clientSideRowModel&&!t.isRowPinned()){var o=this.gridOptionsService.is("aggregateOnlyChangedColumns"),n=new uf(o,this.clientSideRowModel.getRootNode());n.addParentNode(t.parent,[e]),this.clientSideRowModel.doAggregate(n),n.forEachChangedNodeDepthFirst((function(t){i.push(t)}))}this.rowRenderer.refreshCells({rowNodes:i})}},Ly([pt("rowModel")],e.prototype,"rowModel",void 0),Ly([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),Ly([ut],e.prototype,"init",null),e=Ly([ht("changeDetectionService")],e),e}(le),Ny=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Vy=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},By=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ny(e,t),e.prototype.adaptFunction=function(t,e){var i=this.componentMetadataProvider.retrieve(t);return i&&i.functionAdapter?i.functionAdapter(e):null},e.prototype.adaptCellRendererFunction=function(t){var e=function(){function e(){}return e.prototype.refresh=function(t){return!1},e.prototype.getGui=function(){return this.eGui},e.prototype.init=function(e){var i=t(e),o=typeof i;this.eGui="string"!==o&&"number"!==o&&"boolean"!==o?null!=i?i:un("<span></span>"):un("<span>"+i+"</span>")},e}();return e},e.prototype.doesImplementIComponent=function(t){return!!t&&(t.prototype&&"getGui"in t.prototype)},Vy([pt("componentMetadataProvider")],e.prototype,"componentMetadataProvider",void 0),e=Vy([ht("agComponentUtils")],e),e}(le),Gy=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),jy=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Hy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Gy(e,t),e.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}},e.prototype.retrieve=function(t){return this.componentMetaData[t]},jy([pt("agComponentUtils")],e.prototype,"agComponentUtils",void 0),jy([ut],e.prototype,"postConstruct",null),e=jy([ht("componentMetadataProvider")],e),e}(le),$y=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Wy=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Uy=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},zy=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},Ky=25,Yy=10,qy=8,Xy=4,Qy=4,Jy=6,Zy={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:5*Xy,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:7*qy,headerCellMinWidth:48,listItemHeight:4*qy,rowHeight:6*qy,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:8*Qy,headerCellMinWidth:24,listItemHeight:6*Qy,rowHeight:7*Qy,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:8*Jy,headerCellMinWidth:36,listItemHeight:4*Jy,rowHeight:7*Jy,chartMenuPanelWidth:240}},t_={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},e_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.calculatedSizes={},e}return $y(e,t),e.prototype.postConstruct=function(){var t,e=this,i=null!==(t=this.getTheme().el)&&void 0!==t?t:this.eGridDiv;this.mutationObserver=new MutationObserver((function(){e.calculatedSizes={},e.fireGridStylesChangedEvent()})),this.mutationObserver.observe(i||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})},e.prototype.fireGridStylesChangedEvent=function(){var t={type:ge.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(t)},e.prototype.getSassVariable=function(t){var e=this.getTheme(),i=e.themeFamily,o=e.el;if(i&&0===i.indexOf("ag-theme")){this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[i]||(this.calculatedSizes[i]={});var n=this.calculatedSizes[i][t];return null!=n?n:(this.calculatedSizes[i][t]=this.calculateValueForSassProperty(t,i,o),this.calculatedSizes[i][t])}},e.prototype.calculateValueForSassProperty=function(t,e,i){var o,n="ag-theme-"+(e.match("material")?"material":e.match("balham")?"balham":e.match("alpine")?"alpine":"custom"),r=Zy[n][t],s=this.gridOptionsService.getDocument();if(i||(i=this.eGridDiv),!t_[t])return r;var a=t_[t],l=s.createElement("div"),u=Array.from(i.classList);(o=l.classList).add.apply(o,zy([e],Uy(u))),l.style.position="absolute";var c=a.reduce((function(t,e){var i=s.createElement("div");return i.style.position="static",i.classList.add(e),t.appendChild(i),i}),l),h=0;if(s.body){s.body.appendChild(l);var p=-1!==t.toLowerCase().indexOf("height")?"height":"width";h=parseInt(window.getComputedStyle(c)[p],10),s.body.removeChild(l)}return h||r},e.prototype.isThemeDark=function(){var t=this.getTheme().theme;return!!t&&t.indexOf("dark")>=0},e.prototype.chartMenuPanelWidth=function(){return this.getSassVariable("chartMenuPanelWidth")},e.prototype.getTheme=function(){var t=/\bag-(material|(?:theme-([\w\-]*)))\b/g,e=this.eGridDiv,i=null,o=[];while(e){if(i=t.exec(e.className),i){var n=e.className.match(t);n&&(o=n);break}e=e.parentElement||void 0}if(!i)return{allThemes:o};var r=i[0];return{theme:r,el:e,themeFamily:r.replace(/-dark$/,""),allThemes:o}},e.prototype.getFromTheme=function(t,e){var i;return null!==(i=this.getSassVariable(e))&&void 0!==i?i:t},e.prototype.getDefaultRowHeight=function(){return this.getFromTheme(Ky,"rowHeight")},e.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},e.prototype.refreshRowHeightVariable=function(){var t=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),e=this.gridOptionsService.getNum("rowHeight");if(null==e||isNaN(e)||!isFinite(e))return-1;var i=e+"px";return t!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),e):""!=t?parseFloat(t):-1},e.prototype.getMinColWidth=function(){var t=this.getFromTheme(null,"headerCellMinWidth");return s(t)?Math.max(t,Yy):Yy},e.prototype.destroy=function(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),t.prototype.destroy.call(this)},Wy([pt("eGridDiv")],e.prototype,"eGridDiv",void 0),Wy([ut],e.prototype,"postConstruct",null),e=Wy([ht("environment")],e),e}(le),i_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),o_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},n_=function(t,e){return function(i,o){e(i,o,t)}},r_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollY=0,e.uiBodyHeight=0,e}return i_(e,t),e.prototype.agWire=function(t){this.logger=t.create("RowContainerHeightService")},e.prototype.postConstruct=function(){this.addManagedListener(this.eventService,ge.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=go(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},e.prototype.isStretching=function(){return this.stretching},e.prototype.getDivStretchOffset=function(){return this.divStretchOffset},e.prototype.updateOffset=function(){if(this.stretching){var t=this.ctrlsService.getGridBodyCtrl(),e=t.getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight(),o=e!==this.scrollY||i!==this.uiBodyHeight;o&&(this.scrollY=e,this.uiBodyHeight=i,this.calculateOffset())}},e.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var t=this.scrollY/this.maxScrollY,e=t*this.pixelsToShave;this.logger.log("Div Stretch Offset = "+e+" ("+this.pixelsToShave+" * "+t+")"),this.setDivStretchOffset(e)},e.prototype.setUiContainerHeight=function(t){t!==this.uiContainerHeight&&(this.uiContainerHeight=t,this.eventService.dispatchEvent({type:ge.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},e.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},e.prototype.setDivStretchOffset=function(t){var e="number"===typeof t?Math.floor(t):null;this.divStretchOffset!==e&&(this.divStretchOffset=e,this.eventService.dispatchEvent({type:ge.EVENT_HEIGHT_SCALE_CHANGED}))},e.prototype.setModelHeight=function(t){this.modelHeight=t,this.stretching=null!=t&&this.maxDivHeight>0&&t>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},e.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},e.prototype.getRealPixelPosition=function(t){return t-this.divStretchOffset},e.prototype.getUiBodyHeight=function(){var t=this.ctrlsService.getGridBodyCtrl(),e=t.getScrollFeature().getVScrollPosition();return e.bottom-e.top},e.prototype.getScrollPositionForPixel=function(t){if(this.pixelsToShave<=0)return t;var e=this.modelHeight-this.getUiBodyHeight(),i=t/e,o=this.maxScrollY*i;return o},o_([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),o_([n_(0,gt("loggerFactory"))],e.prototype,"agWire",null),o_([ut],e.prototype,"postConstruct",null),e=o_([ht("rowContainerHeightService")],e),e}(le),s_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),a_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},l_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s_(e,t),e.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.isRowSelectableFunc=this.gridOptionsService.get("isRowSelectable")},e.prototype.updateSelectableAfterGrouping=function(t){if(this.isRowSelectableFunc){var e=function(t){return t.childrenAfterGroup};this.recurseDown(t.childrenAfterGroup,e)}},e.prototype.recurseDown=function(t,e){var i=this;t&&t.forEach((function(t){if(t.group){var o;if(t.hasChildren()&&i.recurseDown(e(t),e),i.groupSelectsChildren){var n=(e(t)||[]).find((function(t){return!0===t.selectable}));o=s(n)}else o=!!i.isRowSelectableFunc&&i.isRowSelectableFunc(t);t.setRowSelectable(o)}}))},a_([ut],e.prototype,"init",null),e=a_([ht("selectableService")],e),e}(le),u_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),c_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},h_=function(t){function e(){var e=t.call(this)||this;return e.previousAndFirstButtonsDisabled=!1,e.nextButtonDisabled=!1,e.lastButtonDisabled=!1,e.areListenersSetup=!1,e}return u_(e,t),e.prototype.postConstruct=function(){var t=this.gridOptionsService.is("enableRtl");this.setTemplate(this.getTemplate());var e=this,i=e.btFirst,o=e.btPrevious,n=e.btNext,r=e.btLast;this.activateTabIndex([i,o,n,r]),i.insertAdjacentElement("afterbegin",Mn(t?"last":"first",this.gridOptionsService)),o.insertAdjacentElement("afterbegin",Mn(t?"next":"previous",this.gridOptionsService)),n.insertAdjacentElement("afterbegin",Mn(t?"previous":"next",this.gridOptionsService)),r.insertAdjacentElement("afterbegin",Mn(t?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.onPaginationChanged()},e.prototype.onPaginationChanged=function(){var t=this.gridOptionsService.is("pagination"),e=t&&!this.gridOptionsService.is("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels())},e.prototype.setupListeners=function(){var t=this;this.areListenersSetup||(this.addManagedListener(this.eventService,ge.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach((function(e){var i=e.el,o=e.fn;t.addManagedListener(i,"click",o),t.addManagedListener(i,"keydown",(function(t){t.key!==Nn.ENTER&&t.key!==Nn.SPACE||(t.preventDefault(),o())}))})),this.areListenersSetup=!0)},e.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},e.prototype.setCurrentPageLabel=function(){var t=this.paginationProxy.getTotalPages()>0,e=this.paginationProxy.getCurrentPage(),i=t?e+1:0;this.lbCurrent.innerHTML=this.formatNumber(i)},e.prototype.formatNumber=function(t){var e=this.gridOptionsService.getCallback("paginationNumberFormatter");if(e){var i={value:t};return e(i)}var o=this.localeService.getLocaleTextFunc(),n=o("thousandSeparator",","),r=o("decimalSeparator",".");return Ro(t,n,r)},e.prototype.getTemplate=function(){var t=this.localeService.getLocaleTextFunc(),e=t("page","Page"),i=t("to","to"),o=t("of","of"),n=t("firstPage","First Page"),r=t("previousPage","Previous Page"),s=t("nextPage","Next Page"),a=t("lastPage","Last Page"),l=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'+l+'">\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-'+l+'-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+l+'-to">'+i+'</span>\n                    <span id="ag-'+l+'-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+l+'-of">'+o+'</span>\n                    <span id="ag-'+l+'-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="'+n+'"></div>\n                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="'+r+'"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-'+l+'-start-page">'+e+'</span>\n                        <span id="ag-'+l+'-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-'+l+'-of-page">'+o+'</span>\n                        <span id="ag-'+l+'-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="'+s+'"></div>\n                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="'+a+'"></div>\n                </span>\n            </div>'},e.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},e.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},e.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},e.prototype.enableOrDisableButtons=function(){var t=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=0===t,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);var o=this.isZeroPagesToDisplay(),n=e&&t===i-1;this.nextButtonDisabled=n||o,this.lastButtonDisabled=!e||o||t===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)},e.prototype.toggleButtonDisabled=function(t,e){ki(t,e),t.classList.toggle("ag-disabled",e)},e.prototype.updateRowLabels=function(){var t,e,i=this.paginationProxy.getCurrentPage(),o=this.paginationProxy.getPageSize(),n=this.paginationProxy.isLastPageFound(),r=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;if(this.isZeroPagesToDisplay()?t=e=0:(t=o*i+1,e=t+o-1,n&&e>r&&(e=r)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(t),this.rowNodeBlockLoader.isLoading()){var s=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=s("pageLastRowUnknown","?")}else this.lbLastRowOnPage.innerHTML=this.formatNumber(e)},e.prototype.isZeroPagesToDisplay=function(){var t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages();return t&&0===e},e.prototype.setTotalLabels=function(){var t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages(),i=t?this.paginationProxy.getMasterRowCount():null;if(1===i){var o=this.paginationProxy.getRow(0),n=o&&o.group&&!(o.groupData||o.aggData);if(n)return void this.setTotalLabelsToZero()}if(t)this.lbTotal.innerHTML=this.formatNumber(e),this.lbRecordCount.innerHTML=this.formatNumber(i);else{var r=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=r,this.lbRecordCount.innerHTML=r}},e.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)},c_([pt("paginationProxy")],e.prototype,"paginationProxy",void 0),c_([pt("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),c_([br("btFirst")],e.prototype,"btFirst",void 0),c_([br("btPrevious")],e.prototype,"btPrevious",void 0),c_([br("btNext")],e.prototype,"btNext",void 0),c_([br("btLast")],e.prototype,"btLast",void 0),c_([br("lbRecordCount")],e.prototype,"lbRecordCount",void 0),c_([br("lbFirstRowOnPage")],e.prototype,"lbFirstRowOnPage",void 0),c_([br("lbLastRowOnPage")],e.prototype,"lbLastRowOnPage",void 0),c_([br("lbCurrent")],e.prototype,"lbCurrent",void 0),c_([br("lbTotal")],e.prototype,"lbTotal",void 0),c_([ut],e.prototype,"postConstruct",null),e}(vr),p_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),d_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};(function(t){t[t["Loading"]=0]="Loading",t[t["NoRows"]=1]="NoRows"})(vg||(vg={}));var f_=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.inProgress=!1,i.destroyRequested=!1,i.manuallyDisplayed=!1,i}return p_(e,t),e.prototype.updateLayoutClasses=function(t,e){var i=this.eOverlayWrapper.classList;i.toggle(du.AUTO_HEIGHT,e.autoHeight),i.toggle(du.NORMAL,e.normal),i.toggle(du.PRINT,e.print)},e.prototype.postConstruct=function(){this.createManagedBean(new Du(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.addManagedListener(this.eventService,ge.EVENT_ROW_DATA_UPDATED,this.onRowDataUpdated.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData")&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)},e.prototype.setWrapperTypeClass=function(t){var e=this.eOverlayWrapper.classList;e.toggle("ag-overlay-loading-wrapper",t===vg.Loading),e.toggle("ag-overlay-no-rows-wrapper",t===vg.NoRows)},e.prototype.showLoadingOverlay=function(){if(!this.gridOptionsService.is("suppressLoadingOverlay")){var t={},e=this.userComponentFactory.getLoadingOverlayCompDetails(t),i=e.newAgStackInstance();this.showOverlay(i,vg.Loading)}},e.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsService.is("suppressNoRowsOverlay")){var t={},e=this.userComponentFactory.getNoRowsOverlayCompDetails(t),i=e.newAgStackInstance();this.showOverlay(i,vg.NoRows)}},e.prototype.showOverlay=function(t,e){var i=this;this.inProgress||(this.setWrapperTypeClass(e),this.destroyActiveOverlay(),this.inProgress=!0,t&&t.then((function(t){i.inProgress=!1,i.eOverlayWrapper.appendChild(t.getGui()),i.activeOverlay=t,i.destroyRequested&&(i.destroyRequested=!1,i.destroyActiveOverlay())})),this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.setDisplayed(!0,{skipAriaHidden:!0}))},e.prototype.destroyActiveOverlay=function(){this.inProgress?this.destroyRequested=!0:this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),rn(this.eOverlayWrapper))},e.prototype.hideOverlay=function(){this.manuallyDisplayed=!1,this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})},e.prototype.destroy=function(){this.destroyActiveOverlay(),t.prototype.destroy.call(this)},e.prototype.showOrHideOverlay=function(){var t=this.paginationProxy.isEmpty(),e=this.gridOptionsService.is("suppressNoRowsOverlay");t&&!e?this.showNoRowsOverlay():this.hideOverlay()},e.prototype.onRowDataUpdated=function(){this.showOrHideOverlay()},e.prototype.onNewColumnsLoaded=function(){!this.columnModel.isReady()||this.paginationProxy.isEmpty()||this.manuallyDisplayed||this.hideOverlay()},e.TEMPLATE='\n        <div class="ag-overlay" aria-hidden="true">\n            <div class="ag-overlay-panel">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>\n            </div>\n        </div>',d_([pt("userComponentFactory")],e.prototype,"userComponentFactory",void 0),d_([pt("paginationProxy")],e.prototype,"paginationProxy",void 0),d_([pt("gridApi")],e.prototype,"gridApi",void 0),d_([pt("columnModel")],e.prototype,"columnModel",void 0),d_([br("eOverlayWrapper")],e.prototype,"eOverlayWrapper",void 0),d_([ut],e.prototype,"postConstruct",null),e}(vr),g_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),y_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},__=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g_(e,t),e.prototype.getFirstRow=function(){var t,e=0;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),void 0===t?null:{rowIndex:e,rowPinned:t}},e.prototype.getLastRow=function(){var t,e=null,i=this.pinnedRowModel.getPinnedBottomRowCount(),o=this.pinnedRowModel.getPinnedTopRowCount();return i?(e="bottom",t=i-1):this.rowModel.getRowCount()?(e=null,t=this.paginationProxy.getPageLastRow()):o&&(e="top",t=o-1),void 0===t?null:{rowIndex:t,rowPinned:e}},e.prototype.getRowNode=function(t){switch(t.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}},e.prototype.sameRow=function(t,e){return!t&&!e||!(t&&!e||!t&&e)&&(t.rowIndex===e.rowIndex&&t.rowPinned==e.rowPinned)},e.prototype.before=function(t,e){switch(t.rowPinned){case"top":if("top"!==e.rowPinned)return!0;break;case"bottom":if("bottom"!==e.rowPinned)return!1;break;default:if(s(e.rowPinned))return"top"!==e.rowPinned;break}return t.rowIndex<e.rowIndex},e.prototype.rowMax=function(t){var e,i=this;return t.forEach((function(t){(void 0===e||i.before(e,t))&&(e=t)})),e},e.prototype.rowMin=function(t){var e,i=this;return t.forEach((function(t){(void 0===e||i.before(t,e))&&(e=t)})),e},y_([pt("rowModel")],e.prototype,"rowModel",void 0),y_([pt("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),y_([pt("paginationProxy")],e.prototype,"paginationProxy",void 0),e=y_([ht("rowPositionUtils")],e),e}(le),m_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),v_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},b_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m_(e,t),e.prototype.createId=function(t){var e=t.rowIndex,i=t.rowPinned,o=t.column;return this.createIdFromValues({rowIndex:e,column:o,rowPinned:i})},e.prototype.createIdFromValues=function(t){var e=t.rowIndex,i=t.rowPinned,o=t.column;return e+"."+(null==i?"null":i)+"."+o.getId()},e.prototype.equals=function(t,e){var i=t.column===e.column,o=t.rowPinned===e.rowPinned,n=t.rowIndex===e.rowIndex;return i&&o&&n},e=v_([ht("cellPositionUtils")],e),e}(le),C_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),w_=function(){function t(t){this.cellValueChanges=t}return t}(),S_=function(t){function e(e,i,o,n){var r=t.call(this,e)||this;return r.initialRange=i,r.finalRange=o,r.ranges=n,r}return C_(e,t),e}(w_),E_=function(){function t(e){this.actionStack=[],this.maxStackSize=e||t.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return t.prototype.pop=function(){return this.actionStack.pop()},t.prototype.push=function(t){var e=t.cellValueChanges&&t.cellValueChanges.length>0;e&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(t))},t.prototype.clear=function(){this.actionStack=[]},t.prototype.getCurrentStackSize=function(){return this.actionStack.length},t.DEFAULT_STACK_SIZE=10,t}(),x_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),O_=function(){return O_=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},O_.apply(this,arguments)},R_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},I_=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},T_=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},P_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cellValueChanges=[],e.activeCellEdit=null,e.activeRowEdit=null,e.isPasting=!1,e.isRangeInAction=!1,e.onCellValueChanged=function(t){var i={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned},o=null!==e.activeCellEdit&&e.cellPositionUtils.equals(e.activeCellEdit,i),n=null!==e.activeRowEdit&&e.rowPositionUtils.sameRow(e.activeRowEdit,i),r=o||n||e.isPasting||e.isRangeInAction;if(r){var s=t.rowPinned,a=t.rowIndex,l=t.column,u=t.oldValue,c=t.value,h={rowPinned:s,rowIndex:a,columnId:l.getColId(),newValue:c,oldValue:u};e.cellValueChanges.push(h)}},e.clearStacks=function(){e.undoStack.clear(),e.redoStack.clear()},e}return x_(e,t),e.prototype.init=function(){var t=this;if(this.gridOptionsService.is("undoRedoCellEditing")){var e=this.gridOptionsService.getNum("undoRedoCellEditingLimit");e<=0||(this.undoStack=new E_(e),this.redoStack=new E_(e),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,ge.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,ge.EVENT_MODEL_UPDATED,(function(e){e.keepUndoRedoStack||t.clearStacks()})),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,ge.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,ge.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady((function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl()})))}},e.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},e.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},e.prototype.undo=function(t){var e={type:ge.EVENT_UNDO_STARTED,source:t};this.eventService.dispatchEvent(e);var i=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),o={type:ge.EVENT_UNDO_ENDED,source:t,operationPerformed:i};this.eventService.dispatchEvent(o)},e.prototype.redo=function(t){var e={type:ge.EVENT_REDO_STARTED,source:t};this.eventService.dispatchEvent(e);var i=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),o={type:ge.EVENT_REDO_ENDED,source:t,operationPerformed:i};this.eventService.dispatchEvent(o)},e.prototype.undoRedo=function(t,e,i,o,n){if(!t)return!1;var r=t.pop();return!(!r||!r.cellValueChanges)&&(this.processAction(r,(function(t){return t[o]}),n),r instanceof S_?this.processRange(r.ranges||[r[i]]):this.processCell(r.cellValueChanges),e.push(r),!0)},e.prototype.processAction=function(t,e,i){var o=this;t.cellValueChanges.forEach((function(t){var n=t.rowIndex,r=t.rowPinned,s=t.columnId,a={rowIndex:n,rowPinned:r},l=o.getRowNode(a);l.displayed&&l.setDataValue(s,e(t),i)}))},e.prototype.processRange=function(t){var e,i=this;this.rangeService.removeAllCellRanges(!0),t.forEach((function(o,n){if(o){var r=o.startRow,s=o.endRow;n===t.length-1&&(e={rowPinned:r.rowPinned,rowIndex:r.rowIndex,columnId:o.startColumn.getColId()},i.setLastFocusedCell(e));var a={rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnStart:o.startColumn,columns:o.columns};i.rangeService.addCellRange(a)}}))},e.prototype.processCell=function(t){var e=t[0],i=e.rowIndex,o=e.rowPinned,n={rowIndex:i,rowPinned:o},r=this.getRowNode(n),s={rowPinned:e.rowPinned,rowIndex:r.rowIndex,columnId:e.columnId};this.setLastFocusedCell(s,!!this.rangeService)},e.prototype.setLastFocusedCell=function(t,e){var i=t.rowIndex,o=t.columnId,n=t.rowPinned,r=this.gridBodyCtrl.getScrollFeature(),s=this.columnModel.getGridColumn(o);if(s){r.ensureIndexVisible(i),r.ensureColumnVisible(s);var a={rowIndex:i,column:s,rowPinned:n};this.focusService.setFocusedCell(O_(O_({},a),{forceBrowserFocus:!0})),e&&this.rangeService.setRangeToCell(a)}},e.prototype.addRowEditingListeners=function(){var t=this;this.addManagedListener(this.eventService,ge.EVENT_ROW_EDITING_STARTED,(function(e){t.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}})),this.addManagedListener(this.eventService,ge.EVENT_ROW_EDITING_STOPPED,(function(){var e=new w_(t.cellValueChanges);t.pushActionsToUndoStack(e),t.activeRowEdit=null}))},e.prototype.addCellEditingListeners=function(){var t=this;this.addManagedListener(this.eventService,ge.EVENT_CELL_EDITING_STARTED,(function(e){t.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}})),this.addManagedListener(this.eventService,ge.EVENT_CELL_EDITING_STOPPED,(function(e){t.activeCellEdit=null;var i=e.valueChanged&&!t.activeRowEdit&&!t.isPasting&&!t.isRangeInAction;if(i){var o=new w_(t.cellValueChanges);t.pushActionsToUndoStack(o)}}))},e.prototype.addPasteListeners=function(){var t=this;this.addManagedListener(this.eventService,ge.EVENT_PASTE_START,(function(){t.isPasting=!0})),this.addManagedListener(this.eventService,ge.EVENT_PASTE_END,(function(){var e=new w_(t.cellValueChanges);t.pushActionsToUndoStack(e),t.isPasting=!1}))},e.prototype.addFillListeners=function(){var t=this;this.addManagedListener(this.eventService,ge.EVENT_FILL_START,(function(){t.isRangeInAction=!0})),this.addManagedListener(this.eventService,ge.EVENT_FILL_END,(function(e){var i=new S_(t.cellValueChanges,e.initialRange,e.finalRange);t.pushActionsToUndoStack(i),t.isRangeInAction=!1}))},e.prototype.addCellKeyListeners=function(){var t=this;this.addManagedListener(this.eventService,ge.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,(function(){t.isRangeInAction=!0})),this.addManagedListener(this.eventService,ge.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,(function(){var e;e=t.rangeService&&t.gridOptionsService.is("enableRangeSelection")?new S_(t.cellValueChanges,void 0,void 0,T_([],I_(t.rangeService.getCellRanges()))):new w_(t.cellValueChanges),t.pushActionsToUndoStack(e),t.isRangeInAction=!1}))},e.prototype.pushActionsToUndoStack=function(t){this.undoStack.push(t),this.cellValueChanges=[],this.redoStack.clear()},e.prototype.getRowNode=function(t){switch(t.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}},R_([pt("focusService")],e.prototype,"focusService",void 0),R_([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),R_([pt("rowModel")],e.prototype,"rowModel",void 0),R_([pt("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),R_([pt("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),R_([pt("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),R_([pt("columnModel")],e.prototype,"columnModel",void 0),R_([dt("rangeService")],e.prototype,"rangeService",void 0),R_([ut],e.prototype,"init",null),e=R_([ht("undoRedoService")],e),e}(le),D_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),k_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},A_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D_(e,t),e.prototype.findHeader=function(t,e){var i,o,n;if(t.column instanceof fe?(o="getDisplayedGroup"+e,i=this.columnModel[o](t.column)):(n="getDisplayedCol"+e,i=this.columnModel[n](t.column)),i){var r=t.headerRowIndex,s=this.getHeaderRowType(r);if(s===Uh.COLUMN_GROUP){var a=i;if(a.isPadding()&&this.isAnyChildSpanningHeaderHeight(a)){var l=this.getColumnVisibleChild(a,r,e),u=l.nextFocusColumn,c=l.nextRow;u&&(i=u,r=c)}}return{column:i,headerRowIndex:r}}},e.prototype.isAnyChildSpanningHeaderHeight=function(t){return!!t&&t.getLeafColumns().some((function(t){return t.isSpanHeaderHeight()}))},e.prototype.getColumnVisibleParent=function(t,e){var i=this.getHeaderRowType(e),o=i===Uh.FLOATING_FILTER,n=i===Uh.COLUMN,r=o?t:t.getParent(),s=e-1;if(n&&this.isAnyChildSpanningHeaderHeight(t.getParent())){while(r&&r.isPadding())r=r.getParent(),s--;s<0&&(r=t,s=e)}return{nextFocusColumn:r,nextRow:s}},e.prototype.getColumnVisibleChild=function(t,e,i){void 0===i&&(i="After");var o=this.getHeaderRowType(e),n=t,r=e+1;if(o===Uh.COLUMN_GROUP){var s=t.getLeafColumns(),a="After"===i?s[0]:Dt(s);if(this.isAnyChildSpanningHeaderHeight(a.getParent())){n=a;var l=a.getParent();while(l&&l!==t)l=l.getParent(),r++}else n=t.getDisplayedChildren()[0]}return{nextFocusColumn:n,nextRow:r}},e.prototype.getHeaderRowType=function(t){var e=this.ctrlsService.getHeaderRowContainerCtrl();if(e)return e.getRowType(t)},e.prototype.findColAtEdgeForHeaderRow=function(t,e){var i=this.columnModel.getAllDisplayedColumns(),o=i["start"===e?0:i.length-1];if(o){var n=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned()),r=n.getRowType(t);if(r==Uh.COLUMN_GROUP){var s=this.columnModel.getColumnGroupAtLevel(o,t);return{headerRowIndex:t,column:s}}return{headerRowIndex:null==r?-1:t,column:o}}},k_([pt("columnModel")],e.prototype,"columnModel",void 0),k_([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),e=k_([ht("headerPositionUtils")],e),e}(le),L_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},M_=function(){function t(){}return t.prototype.buildColumnDefs=function(t,e,i){var o=this,n=[],r={};return t.forEach((function(t){var s=o.createDefFromColumn(t,e,i),a=!0,l=s,u=t.getOriginalParent(),c=null;while(u){var h=null;if(u.isPadding())u=u.getOriginalParent();else{var p=r[u.getGroupId()];if(p){p.children.push(l),a=!1;break}if(h=o.createDefFromGroup(u),h&&(h.children=[l],r[h.groupId]=h,l=h,u=u.getOriginalParent()),null!=u&&c===u){a=!1;break}c=u}}a&&n.push(l)})),n},t.prototype.createDefFromGroup=function(t){var e=E(t.getColGroupDef(),["children"]);return e&&(e.groupId=t.getGroupId()),e},t.prototype.createDefFromColumn=function(t,e,i){var o=E(t.getColDef());return o.colId=t.getColId(),o.width=t.getActualWidth(),o.rowGroup=t.isRowGroupActive(),o.rowGroupIndex=t.isRowGroupActive()?e.indexOf(t):null,o.pivot=t.isPivotActive(),o.pivotIndex=t.isPivotActive()?i.indexOf(t):null,o.aggFunc=t.isValueActive()?t.getAggFunc():null,o.hide=!t.isVisible()||void 0,o.pinned=t.isPinned()?t.getPinned():null,o.sort=t.getSort()?t.getSort():null,o.sortIndex=null!=t.getSortIndex()?t.getSortIndex():null,o},t=L_([ht("columnDefFactory")],t),t}(),F_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},N_=function(){function t(){}return t.prototype.getInitialRowClasses=function(t){var e=[];return s(t.extraCssClass)&&e.push(t.extraCssClass),e.push("ag-row"),e.push(t.rowFocused?"ag-row-focus":"ag-row-no-focus"),t.fadeRowIn&&e.push("ag-opacity-zero"),e.push(t.rowIsEven?"ag-row-even":"ag-row-odd"),t.rowNode.isRowPinned()&&e.push("ag-row-pinned"),t.rowNode.isSelected()&&e.push("ag-row-selected"),t.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+t.rowLevel),t.rowNode.stub&&e.push("ag-row-loading"),t.fullWidthRow&&e.push("ag-full-width-row"),t.expandable&&(e.push("ag-row-group"),e.push(t.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),t.rowNode.dragging&&e.push("ag-row-dragging"),Ut(e,this.processClassesFromGridOptions(t.rowNode)),Ut(e,this.preProcessRowClassRules(t.rowNode)),e.push(t.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),t.firstRowOnPage&&e.push("ag-row-first"),t.lastRowOnPage&&e.push("ag-row-last"),t.fullWidthRow&&("left"===t.pinned&&e.push("ag-cell-last-left-pinned"),"right"===t.pinned&&e.push("ag-cell-first-right-pinned")),e},t.prototype.processClassesFromGridOptions=function(t){var e=[],i=function(t){"string"===typeof t?e.push(t):Array.isArray(t)&&t.forEach((function(t){return e.push(t)}))},o=this.gridOptionsService.get("rowClass");if(o){if("function"===typeof o)return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];i(o)}var n=this.gridOptionsService.getCallback("getRowClass");if(n){var r={data:t.data,node:t,rowIndex:t.rowIndex},s=n(r);i(s)}return e},t.prototype.preProcessRowClassRules=function(t){var e=[];return this.processRowClassRules(t,(function(t){e.push(t)}),(function(t){})),e},t.prototype.processRowClassRules=function(t,e,i){var o={data:t.data,node:t,rowIndex:t.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};this.stylingService.processClassRules(this.gridOptionsService.get("rowClassRules"),o,e,i)},t.prototype.calculateRowLevel=function(t){return t.group?t.level:t.parent?t.parent.level+1:0},F_([pt("stylingService")],t.prototype,"stylingService",void 0),F_([pt("gridOptionsService")],t.prototype,"gridOptionsService",void 0),t=F_([ht("rowCssClassCalculator")],t),t}(),V_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),B_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},G_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return V_(e,t),e.prototype.init=function(){var t=this;this.isAccentedSort=this.gridOptionsService.is("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",(function(e){return t.isAccentedSort=e.currentValue})),this.addManagedPropertyListener("autoGroupColumnDef",(function(){return t.primaryColumnsSortGroups=t.gridOptionsService.isColumnsSortingCoupledToGroup()}))},e.prototype.doFullSort=function(t,e){var i=function(t,e){return{currentPos:e,rowNode:t}},o=t.map(i);return o.sort(this.compareRowNodes.bind(this,e)),o.map((function(t){return t.rowNode}))},e.prototype.compareRowNodes=function(t,e,i){for(var o=e.rowNode,n=i.rowNode,r=0,s=t.length;r<s;r++){var a=t[r],l="desc"===a.sort,u=this.getValue(o,a.column),c=this.getValue(n,a.column),h=void 0,p=this.getComparator(a,o);h=p?p(u,c,o,n,l):sr.defaultComparator(u,c,this.isAccentedSort);var d=!isNaN(h);if(d&&0!==h)return"asc"===a.sort?h:-1*h}return e.currentPos-i.currentPos},e.prototype.getComparator=function(t,e){var i=t.column,o=i.getColDef().comparator;if(null!=o)return o;if(i.getColDef().showRowGroup){var n=!e.group&&i.getColDef().field;if(n){var r=this.columnModel.getPrimaryColumn(n);if(r)return r.getColDef().comparator}}},e.prototype.getValue=function(t,e){var i,o;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(e,t,!1,!1);var n=t.rowGroupColumn===e;if(n){var r=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive());if(r){var s=e.getColDef().keyCreator;if(s)return t.key;var a=null===(i=t.allLeafChildren)||void 0===i?void 0:i[0];return a?this.valueService.getValue(e,a,!1,!1):void 0}var l=this.columnModel.getGroupDisplayColumnForGroup(e.getId());if(!l)return;return null===(o=t.groupData)||void 0===o?void 0:o[l.getId()]}return t.group&&e.getColDef().showRowGroup?void 0:this.valueService.getValue(e,t,!1,!1)},B_([pt("valueService")],e.prototype,"valueService",void 0),B_([pt("columnModel")],e.prototype,"columnModel",void 0),B_([ut],e.prototype,"init",null),e=B_([ht("rowNodeSorter")],e),e}(le),j_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),H_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},$_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ready=!1,e.readyCallbacks=[],e}var i;return j_(e,t),i=e,e.prototype.checkReady=function(){if(this.ready=null!=this.gridCtrl&&null!=this.gridBodyCtrl&&null!=this.centerRowContainerCtrl&&null!=this.leftRowContainerCtrl&&null!=this.rightRowContainerCtrl&&null!=this.bottomCenterRowContainerCtrl&&null!=this.bottomLeftRowContainerCtrl&&null!=this.bottomRightRowContainerCtrl&&null!=this.topCenterRowContainerCtrl&&null!=this.topLeftRowContainerCtrl&&null!=this.topRightRowContainerCtrl&&null!=this.stickyTopCenterRowContainerCtrl&&null!=this.stickyTopLeftRowContainerCtrl&&null!=this.stickyTopRightRowContainerCtrl&&null!=this.centerHeaderRowContainerCtrl&&null!=this.leftHeaderRowContainerCtrl&&null!=this.rightHeaderRowContainerCtrl&&null!=this.fakeHScrollComp&&null!=this.fakeVScrollComp&&null!=this.gridHeaderCtrl,this.ready){var t=this.createReadyParams();this.readyCallbacks.forEach((function(e){return e(t)})),this.readyCallbacks.length=0}},e.prototype.whenReady=function(t){this.ready?t(this.createReadyParams()):this.readyCallbacks.push(t)},e.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},e.prototype.registerFakeHScrollComp=function(t){this.fakeHScrollComp=t,this.checkReady()},e.prototype.registerFakeVScrollComp=function(t){this.fakeVScrollComp=t,this.checkReady()},e.prototype.registerGridHeaderCtrl=function(t){this.gridHeaderCtrl=t,this.checkReady()},e.prototype.registerCenterRowContainerCtrl=function(t){this.centerRowContainerCtrl=t,this.checkReady()},e.prototype.registerLeftRowContainerCtrl=function(t){this.leftRowContainerCtrl=t,this.checkReady()},e.prototype.registerRightRowContainerCtrl=function(t){this.rightRowContainerCtrl=t,this.checkReady()},e.prototype.registerTopCenterRowContainerCtrl=function(t){this.topCenterRowContainerCtrl=t,this.checkReady()},e.prototype.registerTopLeftRowContainerCon=function(t){this.topLeftRowContainerCtrl=t,this.checkReady()},e.prototype.registerTopRightRowContainerCtrl=function(t){this.topRightRowContainerCtrl=t,this.checkReady()},e.prototype.registerStickyTopCenterRowContainerCtrl=function(t){this.stickyTopCenterRowContainerCtrl=t,this.checkReady()},e.prototype.registerStickyTopLeftRowContainerCon=function(t){this.stickyTopLeftRowContainerCtrl=t,this.checkReady()},e.prototype.registerStickyTopRightRowContainerCtrl=function(t){this.stickyTopRightRowContainerCtrl=t,this.checkReady()},e.prototype.registerBottomCenterRowContainerCtrl=function(t){this.bottomCenterRowContainerCtrl=t,this.checkReady()},e.prototype.registerBottomLeftRowContainerCtrl=function(t){this.bottomLeftRowContainerCtrl=t,this.checkReady()},e.prototype.registerBottomRightRowContainerCtrl=function(t){this.bottomRightRowContainerCtrl=t,this.checkReady()},e.prototype.registerHeaderContainer=function(t,e){switch(e){case"left":this.leftHeaderRowContainerCtrl=t;break;case"right":this.rightHeaderRowContainerCtrl=t;break;default:this.centerHeaderRowContainerCtrl=t;break}this.checkReady()},e.prototype.registerGridBodyCtrl=function(t){this.gridBodyCtrl=t,this.checkReady()},e.prototype.registerGridCtrl=function(t){this.gridCtrl=t,this.checkReady()},e.prototype.getFakeHScrollComp=function(){return this.fakeHScrollComp},e.prototype.getFakeVScrollComp=function(){return this.fakeVScrollComp},e.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},e.prototype.getGridCtrl=function(){return this.gridCtrl},e.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},e.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},e.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},e.prototype.getStickyTopCenterRowContainerCtrl=function(){return this.stickyTopCenterRowContainerCtrl},e.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},e.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},e.prototype.getHeaderRowContainerCtrl=function(t){switch(t){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}},e.NAME="ctrlsService",e=i=H_([ht(i.NAME)],e),e}(le),W_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),U_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},z_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.registry={},e}return W_(e,t),e.prototype.register=function(t){this.registry[t.controllerName]=t.controllerClass},e.prototype.getInstance=function(t){var e=this.registry[t];if(null!=e)return new e},e=U_([ht("ctrlsFactory")],e),e}(le),K_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Y_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},q_=function(t){function e(e,i){var o=t.call(this,e)||this;return o.direction=i,o.hideTimeout=null,o}return K_(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.eventService,ge.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",co()||ho())},e.prototype.initialiseInvisibleScrollbar=function(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=bo(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))},e.prototype.addActiveListenerToggles=function(){var t=this,e=["mouseenter","mousedown","touchstart"],i=["mouseleave","touchend"],o=this.getGui();e.forEach((function(e){return t.addManagedListener(o,e,(function(){return t.addOrRemoveCssClass("ag-scrollbar-active",!0)}))})),i.forEach((function(e){return t.addManagedListener(o,e,(function(){return t.addOrRemoveCssClass("ag-scrollbar-active",!1)}))}))},e.prototype.onScrollVisibilityChanged=function(){var t=this;void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame((function(){return t.setScrollVisible()}))},e.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var t=this;this.addManagedListener(this.eventService,ge.EVENT_BODY_SCROLL,(function(e){e.direction===t.direction&&(null!==t.hideTimeout&&(window.clearTimeout(t.hideTimeout),t.hideTimeout=null),t.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))})),this.addManagedListener(this.eventService,ge.EVENT_BODY_SCROLL_END,(function(){t.hideTimeout=window.setTimeout((function(){t.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),t.hideTimeout=null}),400)}))},e.prototype.attemptSettingScrollPosition=function(t){var e=this,i=this.getViewport();X((function(){return ln(i)}),(function(){return e.setScrollPosition(t)}),100)},e.prototype.getViewport=function(){return this.eViewport},e.prototype.getContainer=function(){return this.eContainer},e.prototype.onScrollCallback=function(t){this.addManagedListener(this.getViewport(),"scroll",t)},Y_([br("eViewport")],e.prototype,"eViewport",void 0),Y_([br("eContainer")],e.prototype,"eContainer",void 0),Y_([pt("scrollVisibleService")],e.prototype,"scrollVisibleService",void 0),Y_([pt("ctrlsService")],e.prototype,"ctrlsService",void 0),Y_([pt("animationFrameService")],e.prototype,"animationFrameService",void 0),e}(vr),X_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Q_=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},J_=function(t){function e(){return t.call(this,e.TEMPLATE,"horizontal")||this}return X_(e,t),e.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this);var i=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,i),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,ge.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",i),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new hh((function(t){return e.eContainer.style.width=t+"px"})))},e.prototype.initialiseInvisibleScrollbar=function(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gridOptionsService.is("enableRtl"),t.prototype.initialiseInvisibleScrollbar.call(this),this.invisibleScrollbar&&this.refreshCompBottom())},e.prototype.onPinnedRowDataChanged=function(){this.refreshCompBottom()},e.prototype.refreshCompBottom=function(){if(this.invisibleScrollbar){var t=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=t+"px"}},e.prototype.onScrollVisibilityChanged=function(){t.prototype.onScrollVisibilityChanged.call(this),this.setFakeHScrollSpacerWidths()},e.prototype.setFakeHScrollSpacerWidths=function(){var t=this.scrollVisibleService.isVerticalScrollShowing(),e=this.columnModel.getDisplayedColumnsRightWidth(),i=!this.enableRtl&&t,o=this.gridOptionsService.getScrollbarWidth();i&&(e+=o),wn(this.eRightSpacer,e),this.eRightSpacer.classList.toggle("ag-scroller-corner",e<=o);var n=this.columnModel.getDisplayedColumnsLeftWidth(),r=this.enableRtl&&t;r&&(n+=o),wn(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=o)},e.prototype.setScrollVisible=function(){var t=this.scrollVisibleService.isHorizontalScrollShowing(),e=this.invisibleScrollbar,i=this.gridOptionsService.is("suppressHorizontalScroll"),o=t&&this.gridOptionsService.getScrollbarWidth()||0,n=0===o&&e?16:o,r=i?0:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",e),En(this.getGui(),r),En(this.eViewport,r),En(this.eContainer,r),this.setDisplayed(t,{skipAriaHidden:!0})},e.prototype.getScrollPosition=function(){return on(this.getViewport(),this.enableRtl)},e.prototype.setScrollPosition=function(t){ln(this.getViewport())||this.attemptSettingScrollPosition(t),nn(this.getViewport(),t,this.enableRtl)},e.TEMPLATE='<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>',Q_([br("eLeftSpacer")],e.prototype,"eLeftSpacer",void 0),Q_([br("eRightSpacer")],e.prototype,"eRightSpacer",void 0),Q_([pt("columnModel")],e.prototype,"columnModel",void 0),Q_([pt("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),Q_([ut],e.prototype,"postConstruct",null),e}(q_),Z_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),tm=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},em=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Z_(e,t),e.prototype.postConstruct=function(){var t=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,ge.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.addManagedPropertyListener("domLayout",t)},e.prototype.checkContainerWidths=function(){var t=this.gridOptionsService.isDomLayout("print"),e=t?0:this.columnModel.getDisplayedColumnsLeftWidth(),i=t?0:this.columnModel.getDisplayedColumnsRightWidth();e!=this.leftWidth&&(this.leftWidth=e,this.eventService.dispatchEvent({type:ge.EVENT_LEFT_PINNED_WIDTH_CHANGED})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:ge.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},e.prototype.getPinnedRightWidth=function(){return this.rightWidth},e.prototype.getPinnedLeftWidth=function(){return this.leftWidth},tm([pt("columnModel")],e.prototype,"columnModel",void 0),tm([ut],e.prototype,"postConstruct",null),e=tm([ht("pinnedWidthService")],e),e}(le),im=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),om=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},nm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events=[],e}return im(e,t),e.prototype.postConstruct=function(){"clientSide"==this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)},e.prototype.dispatchExpanded=function(t){var e=this;if(null!=this.clientSideRowModel){this.events.push(t);var i=function(){e.clientSideRowModel&&e.clientSideRowModel.onRowGroupOpened(),e.events.forEach((function(t){return e.eventService.dispatchEvent(t)})),e.events=[]};null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced()}else this.eventService.dispatchEvent(t)},om([pt("animationFrameService")],e.prototype,"animationFrameService",void 0),om([pt("rowModel")],e.prototype,"rowModel",void 0),om([ut],e.prototype,"postConstruct",null),e=om([ht("rowNodeEventThrottle")],e),e}(le),rm=function(){return rm=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},rm.apply(this,arguments)},sm=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},am=function(t,e){return function(i,o){e(i,o,t)}},lm=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},um=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t};function cm(t){return"number"==typeof t?t:"string"==typeof t?parseInt(t,10):void 0}function hm(t){return!0===t||"true"===t}var pm,dm=function(){function t(){var t=this;this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new vt,this.globalEventHandlerFactory=function(i){return function(o,n){if(!t.destroyed){var r=e.alwaysSyncGlobalEvents.has(o);if(!(r&&!i||!r&&i)){var s=Ge.getCallbackForEvent(o);"function"===typeof t.gridOptions[s]&&t.gridOptions[s](n)}}}}}var e;return e=t,Object.defineProperty(t.prototype,"context",{get:function(){return this.gridOptions["context"]},enumerable:!1,configurable:!0}),t.prototype.agWire=function(t,e){this.gridOptions.api=t,this.gridOptions.columnApi=e,this.api=t,this.columnApi=e},t.prototype.init=function(){this.gridOptionLookup=new Set(um(um([],lm(Ge.ALL_PROPERTIES)),lm(Ge.EVENT_CALLBACKS)));var t=!this.is("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.getScrollbarWidth()},t.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0},t.prototype.is=function(t){return hm(this.gridOptions[t])},t.prototype.get=function(t){return this.gridOptions[t]},t.prototype.getNum=function(t){return cm(this.gridOptions[t])},t.prototype.getCallback=function(t){return this.mergeGridCommonParams(this.gridOptions[t])},t.prototype.exists=function(t){return s(this.gridOptions[t])},t.prototype.mergeGridCommonParams=function(t){var e=this;if(t){var i=function(i){var o=i;return o.api=e.api,o.columnApi=e.columnApi,o.context=e.context,t(o)};return i}return t},t.prototype.__setPropertyOnly=function(t,e){var i=this.gridOptions[t];return this.gridOptionLookup.has(t)&&(this.gridOptions[t]=e),i!==e},t.prototype.set=function(t,e,i,o,n){if(void 0===i&&(i=!1),void 0===o&&(o={}),void 0===n&&(n=void 0),this.gridOptionLookup.has(t)){var r=this.gridOptions[t];if(i||r!==e){this.gridOptions[t]=e;var s=rm({type:t,currentValue:e,previousValue:r,changeSet:n},o);this.propertyEventService.dispatchEvent(s)}}},t.prototype.addEventListener=function(t,e){this.propertyEventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.propertyEventService.removeEventListener(t,e)},t.prototype.getGridId=function(){return this.api.getGridId()},t.prototype.getScrollbarWidth=function(){if(null==this.scrollbarWidth){var t="number"===typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0,e=t?this.gridOptions.scrollbarWidth:mo();null!=e&&(this.scrollbarWidth=e,this.eventService.dispatchEvent({type:ge.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},t.prototype.isRowModelType=function(t){return this.gridOptions.rowModelType===t||"clientSide"===t&&a(this.gridOptions.rowModelType)},t.prototype.isDomLayout=function(t){var e,i=null!==(e=this.gridOptions.domLayout)&&void 0!==e?e:"normal";return i===t},t.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},t.prototype.useAsyncEvents=function(){return!this.is("suppressAsyncEvents")},t.prototype.isGetRowHeightFunction=function(){return"function"===typeof this.gridOptions.getRowHeight},t.prototype.getRowHeightForNode=function(t,e,i){if(void 0===e&&(e=!1),null==i&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(e)return{height:i,estimated:!0};var o={node:t,data:t.data},n=this.getCallback("getRowHeight")(o);if(this.isNumeric(n))return 0===n&&G((function(){return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.")}),"invalidRowHeight"),{height:Math.max(1,n),estimated:!1}}if(t.detail&&this.is("masterDetail"))return this.getMasterDetailRowHeight();var r=this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i;return{height:r,estimated:!1}},t.prototype.getMasterDetailRowHeight=function(){return this.is("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}},t.prototype.getRowHeightAsNumber=function(){if(!this.gridOptions.rowHeight||a(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();var t=this.environment.refreshRowHeightVariable();return-1!==t?t:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())},t.prototype.isNumeric=function(t){return!isNaN(t)&&"number"===typeof t&&isFinite(t)},t.prototype.getDomDataKey=function(){return this.domDataKey},t.prototype.getDomData=function(t,e){var i=t[this.getDomDataKey()];return i?i[e]:void 0},t.prototype.setDomData=function(t,e,i){var o=this.getDomDataKey(),n=t[o];a(n)&&(n={},t[o]=n),n[e]=i},t.prototype.getDocument=function(){var t=null;return this.gridOptions.getDocument&&s(this.gridOptions.getDocument)?t=this.gridOptions.getDocument():this.eGridDiv&&(t=this.eGridDiv.ownerDocument),t&&s(t)?t:document},t.prototype.getWindow=function(){var t=this.getDocument();return t.defaultView||window},t.prototype.getRootNode=function(){return this.eGridDiv.getRootNode()},t.prototype.getAsyncTransactionWaitMillis=function(){return s(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50},t.prototype.isAnimateRows=function(){return!this.is("ensureDomOrder")&&this.is("animateRows")},t.prototype.isGroupRowsSticky=function(){return!(this.is("suppressGroupRowsSticky")||this.is("paginateChildRows")||this.is("groupHideOpenParents"))},t.prototype.isColumnsSortingCoupledToGroup=function(){var t=this.gridOptions.autoGroupColumnDef,e=this.isRowModelType("clientSide");return e&&!(null===t||void 0===t?void 0:t.comparator)&&!this.is("treeData")},t.prototype.getGroupAggFiltering=function(){var t=this.gridOptions.groupAggFiltering;return"function"===typeof t?this.getCallback("groupAggFiltering"):hm(t)?function(){return!0}:void 0},t.prototype.isGroupIncludeFooterTrueOrCallback=function(){var t=this.gridOptions.groupIncludeFooter;return hm(t)||"function"===typeof t},t.prototype.getGroupIncludeFooter=function(){var t=this.gridOptions.groupIncludeFooter;return"function"===typeof t?this.getCallback("groupIncludeFooter"):hm(t)?function(){return!0}:function(){return!1}},t.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?Je("multipleColumns",this.gridOptions.groupDisplayType):this.is("groupHideOpenParents")},t.prototype.isGroupUseEntireRow=function(t){return!t&&(!!this.gridOptions.groupDisplayType&&Je("groupRows",this.gridOptions.groupDisplayType))},t.alwaysSyncGlobalEvents=new Set([ge.EVENT_GRID_PRE_DESTROYED]),sm([pt("gridOptions")],t.prototype,"gridOptions",void 0),sm([pt("eventService")],t.prototype,"eventService",void 0),sm([pt("environment")],t.prototype,"environment",void 0),sm([pt("eGridDiv")],t.prototype,"eGridDiv",void 0),sm([am(0,gt("gridApi")),am(1,gt("columnApi"))],t.prototype,"agWire",null),sm([ut],t.prototype,"init",null),sm([ct],t.prototype,"destroy",null),t=e=sm([ht("gridOptionsService")],t),t}(),fm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),gm=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ym=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fm(e,t),e.prototype.getLocaleTextFunc=function(){var t=this.gridOptionsService.getCallback("getLocaleText");if(t)return function(e,i,o){var n={key:e,defaultValue:i,variableValues:o};return t(n)};var e=this.gridOptionsService.get("localeText");return function(t,i,o){var n=e&&e[t];if(n&&o&&o.length){var r=0;while(1){if(r>=o.length)break;var s=n.indexOf("${variable}");if(-1===s)break;n=n.replace("${variable}",o[r++])}}return null!==n&&void 0!==n?n:i}},e=gm([ht("localeService")],e),e}(le),_m=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),mm=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},vm=function(t){function e(){return t.call(this,e.TEMPLATE,"vertical")||this}return _m(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.createManagedBean(new rh(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,ge.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))},e.prototype.setScrollVisible=function(){var t=this.scrollVisibleService.isVerticalScrollShowing(),e=this.invisibleScrollbar,i=t&&this.gridOptionsService.getScrollbarWidth()||0,o=0===i&&e?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",e),wn(this.getGui(),o),wn(this.eViewport,o),wn(this.eContainer,o),this.setDisplayed(t,{skipAriaHidden:!0})},e.prototype.onRowContainerHeightChanged=function(){var t=this.ctrlsService.getGridBodyCtrl(),e=t.getBodyViewportElement();this.eViewport.scrollTop!=e.scrollTop&&(this.eViewport.scrollTop=e.scrollTop)},e.prototype.getScrollPosition=function(){return this.getViewport().scrollTop},e.prototype.setScrollPosition=function(t){ln(this.getViewport())||this.attemptSettingScrollPosition(t),this.getViewport().scrollTop=t},e.TEMPLATE='<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>\n            </div>\n        </div>',mm([ut],e.prototype,"postConstruct",null),e}(q_),bm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Cm=function(){return Cm=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Cm.apply(this,arguments)},wm=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Sm=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Em=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},xm={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Om=["january","february","march","april","may","june","july","august","september","october","november","december"],Rm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dataTypeDefinitions={},e.isWaitingForRowData=!1,e.isColumnTypeOverrideInDataTypeDefinitions=!1,e.columnStateUpdatesPendingInference={},e.columnStateUpdateListenerDestroyFuncs=[],e}return bm(e,t),e.prototype.init=function(){var t=this;this.groupHideOpenParents=this.gridOptionsService.is("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",(function(){t.groupHideOpenParents=t.gridOptionsService.is("groupHideOpenParents")})),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",(function(){t.processDataTypeDefinitions(),t.columnModel.recreateColumnDefs("gridOptionsChanged")}))},e.prototype.processDataTypeDefinitions=function(){var t,e=this,i=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(i).forEach((function(t){var i=Sm(t,2),o=i[0],n=i[1];e.dataTypeDefinitions[o]=Cm(Cm({},n),{groupSafeValueFormatter:e.createGroupSafeValueFormatter(n)})}));var o=null!==(t=this.gridOptionsService.get("dataTypeDefinitions"))&&void 0!==t?t:{};this.dataTypeMatchers={},Object.entries(o).forEach((function(t){var n=Sm(t,2),r=n[0],s=n[1],a=e.processDataTypeDefinition(s,o,[r],i);a&&(e.dataTypeDefinitions[r]=a,s.dataTypeMatcher&&(e.dataTypeMatchers[r]=s.dataTypeMatcher))})),this.checkObjectValueHandlers(i),["dateString","text","number","boolean","date"].forEach((function(t){var o=e.dataTypeMatchers[t];o&&delete e.dataTypeMatchers[t],e.dataTypeMatchers[t]=null!==o&&void 0!==o?o:i[t].dataTypeMatcher}))},e.prototype.mergeDataTypeDefinitions=function(t,e){var i=Cm(Cm({},t),e);return t.columnTypes&&e.columnTypes&&e.appendColumnTypes&&(i.columnTypes=Em(Em([],Sm(this.convertColumnTypes(t.columnTypes))),Sm(this.convertColumnTypes(e.columnTypes)))),i},e.prototype.processDataTypeDefinition=function(t,e,i,o){var n,r=t.extendsDataType;if(t.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),t.extendsDataType===t.baseDataType){var s=o[r];if(!this.validateDataTypeDefinition(t,s,r))return;n=this.mergeDataTypeDefinitions(s,t)}else{if(i.includes(r))return void G((function(){return console.warn('AG Grid: Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.')}),"dataTypeExtendsCircularRef");var a=e[r];if(!this.validateDataTypeDefinition(t,a,r))return;var l=this.processDataTypeDefinition(a,e,Em(Em([],Sm(i)),[r]),o);if(!l)return;n=this.mergeDataTypeDefinitions(l,t)}return Cm(Cm({},n),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)})},e.prototype.validateDataTypeDefinition=function(t,e,i){return e?e.baseDataType===t.baseDataType||(G((function(){return console.warn('AG Grid: The "baseDataType" property of a data type definition must match that of its parent.')}),"dataTypeBaseTypesMatch"),!1):(G((function(){return console.warn("AG Grid: The data type definition "+i+" does not exist.")}),"dataTypeDefMissing"+i),!1)},e.prototype.createGroupSafeValueFormatter=function(t){var e=this;if(t.valueFormatter)return function(i){var o,n;if(!(null===(o=i.node)||void 0===o?void 0:o.group))return e.groupHideOpenParents&&i.column.isRowGroupActive()?"string"!==typeof i.value||(null===(n=t.dataTypeMatcher)||void 0===n?void 0:n.call(t,i.value))?t.valueFormatter(i):void 0:t.valueFormatter(i);var r=i.column.getAggFunc();if(r){if("first"===r||"last"===r)return t.valueFormatter(i);if("number"===t.baseDataType&&"count"!==r){if("number"===typeof i.value)return t.valueFormatter(i);if("object"===typeof i.value){if(!i.value)return;if("toNumber"in i.value)return t.valueFormatter(Cm(Cm({},i),{value:i.value.toNumber()}));if("value"in i.value)return t.valueFormatter(Cm(Cm({},i),{value:i.value.value}))}}}}},e.prototype.updateColDefAndGetDataTypeDefinitionColumnType=function(t,e,i){var o=e.cellDataType,n=e.field;if(void 0===o&&(o=t.cellDataType),null!=o&&!0!==o||(o=!!this.canInferCellDataType(t,e)&&this.inferCellDataType(n,i)),o){var r=this.dataTypeDefinitions[o];if(r)return t.cellDataType=o,r.groupSafeValueFormatter&&(t.valueFormatter=r.groupSafeValueFormatter),r.valueParser&&(t.valueParser=r.valueParser),r.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(t,r,i),r.columnTypes;G((function(){return console.warn('AG Grid: Missing data type definition - "'+o+'"')}),"dataTypeMissing"+o)}else t.cellDataType=!1},e.prototype.updateColDefAndGetColumnType=function(t,e,i){var o,n,r=this.updateColDefAndGetDataTypeDefinitionColumnType(t,e,i),s=null!==(n=null!==(o=e.type)&&void 0!==o?o:r)&&void 0!==n?n:t.type;return t.type=s,s?this.convertColumnTypes(s):void 0},e.prototype.addColumnListeners=function(t){if(this.isWaitingForRowData){var e=this.columnStateUpdatesPendingInference[t.getColId()];if(e){var i=function(t){e.add(t.key)};t.addEventListener(xt.EVENT_STATE_UPDATED,i),this.columnStateUpdateListenerDestroyFuncs.push((function(){return t.removeEventListener(xt.EVENT_STATE_UPDATED,i)}))}}},e.prototype.canInferCellDataType=function(t,e){var i,o=this;if("clientSide"!==this.rowModel.getType())return!1;var n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(e,n))return!1;var r=null===e.type?t.type:e.type;if(r){var s=null!==(i=this.gridOptionsService.get("columnTypes"))&&void 0!==i?i:{},a=this.convertColumnTypes(r).some((function(t){var e=s[t.trim()];return e&&o.doColDefPropsPreventInference(e,n)}));if(a)return!1}return!this.doColDefPropsPreventInference(t,n)},e.prototype.doColDefPropsPreventInference=function(t,e){var i=this;return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some((function(o){var n=Sm(o,2),r=n[0],s=n[1];return i.doesColDefPropPreventInference(t,e,r,s)}))},e.prototype.doesColDefPropPreventInference=function(t,e,i,o){if(!e[i])return!1;var n=t[i];return null===n?(e[i]=!1,!1):void 0===o?!!n:n===o},e.prototype.inferCellDataType=function(t,e){var i;if(t){var o,n=this.getInitialData();if(n){var r=t.indexOf(".")>=0&&!this.gridOptionsService.is("suppressFieldDotNotation");o=M(n,t,r)}else this.initWaitForRowData(e);if(null!=o){var s=Sm(null!==(i=Object.entries(this.dataTypeMatchers).find((function(t){var e=Sm(t,2);e[0];var i=e[1];return i(o)})))&&void 0!==i?i:["object"],1),a=s[0];return a}}},e.prototype.getInitialData=function(){var t=this.gridOptionsService.get("rowData");if(null===t||void 0===t?void 0:t.length)return t[0];if(this.initialData)return this.initialData;var e=this.rowModel.getRootNode().allLeafChildren;return(null===e||void 0===e?void 0:e.length)?e[0].data:null},e.prototype.initWaitForRowData=function(t){var e=this;if(this.columnStateUpdatesPendingInference[t]=new Set,!this.isWaitingForRowData){this.isWaitingForRowData=!0;var i=this.isColumnTypeOverrideInDataTypeDefinitions;i&&this.columnModel.queueResizeOperations();var o=this.addManagedListener(this.eventService,ge.EVENT_ROW_DATA_UPDATE_STARTED,(function(t){var n=t.firstRowData;if(n){null===o||void 0===o||o(),e.isWaitingForRowData=!1,e.processColumnsPendingInference(n,i),e.columnStateUpdatesPendingInference={},i&&e.columnModel.processResizeOperations();var r={type:ge.EVENT_DATA_TYPES_INFERRED};e.eventService.dispatchEvent(r)}}))}},e.prototype.isPendingInference=function(){return this.isWaitingForRowData},e.prototype.processColumnsPendingInference=function(t,e){var i=this;this.initialData=t;var o=[];this.columnStateUpdateListenerDestroyFuncs.forEach((function(t){return t()})),this.columnStateUpdateListenerDestroyFuncs=[];var n={},r={};Object.entries(this.columnStateUpdatesPendingInference).forEach((function(t){var s=Sm(t,2),a=s[0],l=s[1],u=i.columnModel.getGridColumn(a);if(u){var c=u.getColDef();if(i.columnModel.resetColumnDefIntoColumn(u)){var h=u.getColDef();if(e&&h.type&&h.type!==c.type){var p=i.getUpdatedColumnState(u,l);p.rowGroup&&null==p.rowGroupIndex&&(n[a]=p),p.pivot&&null==p.pivotIndex&&(r[a]=p),o.push(p)}}}})),e&&o.push.apply(o,Em([],Sm(this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(n,r)))),o.length&&this.columnModel.applyColumnState({state:o},"cellDataTypeInferred"),this.initialData=null},e.prototype.getUpdatedColumnState=function(t,e){var i=this.columnModel.getColumnStateFromColDef(t);return e.forEach((function(t){delete i[t],"rowGroup"===t?delete i.rowGroupIndex:"pivot"===t&&delete i.pivotIndex})),i},e.prototype.checkObjectValueHandlers=function(t){var e=this.dataTypeDefinitions.object,i=t.object;this.hasObjectValueParser=e.valueParser!==i.valueParser,this.hasObjectValueFormatter=e.valueFormatter!==i.valueFormatter},e.prototype.convertColumnTypes=function(t){var e=[];if(t instanceof Array){var i=t.some((function(t){return"string"!==typeof t}));i?console.warn("AG Grid: if colDef.type is supplied an array it should be of type 'string[]'"):e=t}else"string"===typeof t?e=t.split(","):console.warn("AG Grid: colDef.type should be of type 'string' | 'string[]'");return e},e.prototype.getDateStringTypeDefinition=function(){return this.dataTypeDefinitions.dateString},e.prototype.getDateParserFunction=function(){return this.getDateStringTypeDefinition().dateParser},e.prototype.getDateFormatterFunction=function(){return this.getDateStringTypeDefinition().dateFormatter},e.prototype.getDataTypeDefinition=function(t){var e=t.getColDef();if(e.cellDataType)return this.dataTypeDefinitions[e.cellDataType]},e.prototype.getBaseDataType=function(t){var e;return null===(e=this.getDataTypeDefinition(t))||void 0===e?void 0:e.baseDataType},e.prototype.checkType=function(t,e){var i;if(null==e)return!0;var o=null===(i=this.getDataTypeDefinition(t))||void 0===i?void 0:i.dataTypeMatcher;return!o||o(e)},e.prototype.validateColDef=function(t){"object"===t.cellDataType&&(t.valueFormatter!==this.dataTypeDefinitions.object.groupSafeValueFormatter||this.hasObjectValueFormatter||G((function(){return console.warn('AG Grid: Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"')}),"dataTypeObjectValueFormatter"),t.editable&&t.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&G((function(){return console.warn('AG Grid: Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"')}),"dataTypeObjectValueParser"))},e.prototype.setColDefPropertiesForBaseDataType=function(t,e,i){var o=this,n=function(t,i,n){var r=t.getColDef().valueFormatter;return r===e.groupSafeValueFormatter&&(r=e.valueFormatter),o.valueFormatterService.formatValue(t,i,n,r)},r=nt.__isRegistered(Z.SetFilterModule,this.context.getGridId()),a=this.localeService.getLocaleTextFunc(),l=function(e){var i=t.filterParams;t.filterParams="object"===typeof i?Cm(Cm({},i),e):e};switch(t.useValueFormatterForExport=!0,t.useValueParserForImport=!0,e.baseDataType){case"number":t.cellEditor="agNumberCellEditor",r&&l({comparator:function(t,e){var i=null==t?0:parseInt(t),o=null==e?0:parseInt(e);return i===o?0:i>o?1:-1}});break;case"boolean":t.cellEditor="agCheckboxCellEditor",t.cellRenderer="agCheckboxCellRenderer",t.suppressKeyboardEvent=function(t){return!!t.colDef.editable&&t.event.key===Nn.SPACE},l(r?{valueFormatter:function(t){return s(t.value)?a(String(t.value),t.value?"True":"False"):a("blanks","(Blanks)")}}:{maxNumConditions:1,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:function(t,e){return e},numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:function(t,e){return!1===e},numberOfInputs:0}]});break;case"date":t.cellEditor="agDateCellEditor",t.keyCreator=function(t){return n(t.column,t.node,t.value)},r&&l({valueFormatter:function(t){var e=n(t.column,t.node,t.value);return s(e)?e:a("blanks","(Blanks)")},treeList:!0,treeListFormatter:function(t,e){if(1===e&&null!=t){var i=Om[Number(t)-1];return a(i,xm[i])}return null!==t&&void 0!==t?t:a("blanks","(Blanks)")}});break;case"dateString":t.cellEditor="agDateStringCellEditor",t.keyCreator=function(t){return n(t.column,t.node,t.value)};var u=this.getDateParserFunction();l(r?{valueFormatter:function(t){var e=n(t.column,t.node,t.value);return s(e)?e:a("blanks","(Blanks)")},treeList:!0,treeListPathGetter:function(t){var e=u(null!==t&&void 0!==t?t:void 0);return e?[String(e.getFullYear()),String(e.getMonth()+1),String(e.getDate())]:null},treeListFormatter:function(t,e){if(1===e&&null!=t){var i=Om[Number(t)-1];return a(i,xm[i])}return null!==t&&void 0!==t?t:a("blanks","(Blanks)")}}:{comparator:function(t,e){var i=u(e);return null==e||i<t?-1:i>t?1:0}});break;case"object":t.cellEditorParams={useFormatter:!0},t.comparator=function(t,e){var r=o.columnModel.getPrimaryColumn(i),s=null===r||void 0===r?void 0:r.getColDef();if(!r||!s)return 0;var a=null==t?"":n(r,null,t),l=null==e?"":n(r,null,e);return a===l?0:a>l?1:-1},t.keyCreator=function(t){return n(t.column,t.node,t.value)},r?l({valueFormatter:function(t){var e=n(t.column,t.node,t.value);return s(e)?e:a("blanks","(Blanks)")}}):t.filterValueGetter=function(t){return n(t.column,t.node,o.valueService.getValue(t.column,t.node))};break}},e.prototype.getDefaultDataTypes=function(){var t=function(t){return!!t.match("^\\d{4}-\\d{2}-\\d{2}$")},e=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:function(t){return""===t.newValue?null:Number(t.newValue)},valueFormatter:function(t){return null==t.value?"":"number"!==typeof t.value||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value)},dataTypeMatcher:function(t){return"number"===typeof t}},text:{baseDataType:"text",valueParser:function(t){return""===t.newValue?null:u(t.newValue)},dataTypeMatcher:function(t){return"string"===typeof t}},boolean:{baseDataType:"boolean",valueParser:function(t){return""===t.newValue?null:"true"===String(t.newValue).toLowerCase()},valueFormatter:function(t){return null==t.value?"":String(t.value)},dataTypeMatcher:function(t){return"boolean"===typeof t}},date:{baseDataType:"date",valueParser:function(t){return Fo(null==t.newValue?null:String(t.newValue))},valueFormatter:function(t){var i;return null==t.value?"":t.value instanceof Date&&!isNaN(t.value.getTime())?null!==(i=Ao(t.value,!1))&&void 0!==i?i:"":e("invalidDate","Invalid Date")},dataTypeMatcher:function(t){return t instanceof Date}},dateString:{baseDataType:"dateString",dateParser:function(t){var e;return null!==(e=Fo(t))&&void 0!==e?e:void 0},dateFormatter:function(t){var e;return null!==(e=Ao(null!==t&&void 0!==t?t:null,!1))&&void 0!==e?e:void 0},valueParser:function(e){return t(String(e.newValue))?e.newValue:null},valueFormatter:function(e){return t(String(e.value))?e.value:""},dataTypeMatcher:function(e){return"string"===typeof e&&t(e)}},object:{baseDataType:"object",valueParser:function(){return null},valueFormatter:function(t){var e;return null!==(e=u(t.value))&&void 0!==e?e:""}}}},wm([pt("rowModel")],e.prototype,"rowModel",void 0),wm([pt("columnModel")],e.prototype,"columnModel",void 0),wm([pt("columnUtils")],e.prototype,"columnUtils",void 0),wm([pt("valueService")],e.prototype,"valueService",void 0),wm([pt("valueFormatterService")],e.prototype,"valueFormatterService",void 0),wm([ut],e.prototype,"init",null),e=wm([ht("dataTypeService")],e),e}(le),Im=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Tm=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Pm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Im(e,t),e.prototype.parseValue=function(t,e,i,o){var n=t.getColDef(),r={node:e,data:null===e||void 0===e?void 0:e.data,oldValue:o,newValue:i,colDef:n,column:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},a=n.valueParser;return s(a)?"function"===typeof a?a(r):this.expressionService.evaluate(a,r):i},Tm([pt("expressionService")],e.prototype,"expressionService",void 0),e=Tm([ht("valueParserService")],e),e}(le),Dm=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},km=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},Am=function(){function t(t,e,i){e?(this.gridOptions=e,(new Mm).create(t,e,(function(e){var i=new gy(t);e.createBean(i)}),void 0,i)):console.error("AG Grid: no gridOptions provided to the grid")}return t.prototype.destroy=function(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()},t}(),Lm=1,Mm=function(){function t(){}return t.prototype.create=function(t,e,i,o,n){var r,s=this,a=!!e.debug,l=null!==(r=e.gridId)&&void 0!==r?r:String(Lm++),u=this.getRegisteredModules(n,l),c=this.createBeansList(e.rowModelType,u,l),h=this.createProvidedBeans(t,e,n);if(c){var p={providedBeanInstances:h,beanClasses:c,debug:a,gridId:l},d=new uy("AG Grid",(function(){return e.debug})),f=new uy("Context",(function(){return p.debug})),g=new at(p,f),y=g.getBean("beans");this.registerModuleUserComponents(y,u),this.registerStackComponents(y,u),this.registerControllers(y,u),i(g),y.ctrlsService.whenReady((function(){s.setColumnsAndData(y),s.dispatchGridReadyEvent(y);var t=nt.__isRegistered(Z.EnterpriseCoreModule,l);d.log("initialised successfully, enterprise = "+t)})),o&&o(g)}},t.prototype.registerControllers=function(t,e){e.forEach((function(e){e.controllers&&e.controllers.forEach((function(e){return t.ctrlsFactory.register(e)}))}))},t.prototype.registerStackComponents=function(t,e){var i=this.createAgStackComponentsList(e);t.agStackComponentsRegistry.setupComponents(i)},t.prototype.getRegisteredModules=function(t,e){var i=t?t.modules:null,o=nt.__getRegisteredModules(e),n=[],r={},s=function(t,e,i){var o=function(e){r[e.moduleName]||(r[e.moduleName]=!0,n.push(e),nt.__register(e,t,i))};o(e),e.dependantModules&&e.dependantModules.forEach((function(e){return s(t,e,i)}))};return i&&i.forEach((function(t){return s(!0,t,e)})),o&&o.forEach((function(t){return s(!nt.__isPackageBased(),t,void 0)})),n},t.prototype.registerModuleUserComponents=function(t,e){var i=this.extractModuleEntity(e,(function(t){return t.userComponents?t.userComponents:[]}));i.forEach((function(e){t.userComponentRegistry.registerDefaultComponent(e.componentName,e.componentClass)}))},t.prototype.createProvidedBeans=function(t,e,i){var o=i?i.frameworkOverrides:null;a(o)&&(o=new kg);var n={gridOptions:e,eGridDiv:t,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:o};return i&&i.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n},t.prototype.createAgStackComponentsList=function(t){var e=[{componentName:"AgCheckbox",componentClass:as},{componentName:"AgRadioButton",componentClass:us},{componentName:"AgToggleButton",componentClass:Sf},{componentName:"AgInputTextField",componentClass:Ls},{componentName:"AgInputTextArea",componentClass:xf},{componentName:"AgInputNumberField",componentClass:Fs},{componentName:"AgInputDateField",componentClass:Rf},{componentName:"AgInputRange",componentClass:Tf},{componentName:"AgRichSelect",componentClass:Wf},{componentName:"AgSelect",componentClass:is},{componentName:"AgSlider",componentClass:Kf},{componentName:"AgGridBody",componentClass:Sh},{componentName:"AgHeaderRoot",componentClass:Cd},{componentName:"AgSortIndicator",componentClass:sa},{componentName:"AgPagination",componentClass:h_},{componentName:"AgOverlayWrapper",componentClass:f_},{componentName:"AgGroupComponent",componentClass:Xf},{componentName:"AgPanel",componentClass:ug},{componentName:"AgDialog",componentClass:dg},{componentName:"AgRowContainer",componentClass:zh},{componentName:"AgFakeHorizontalScroll",componentClass:J_},{componentName:"AgFakeVerticalScroll",componentClass:vm},{componentName:"AgAutocomplete",componentClass:Tg}],i=this.extractModuleEntity(t,(function(t){return t.agStackComponents?t.agStackComponents:[]}));return e=e.concat(i),e},t.prototype.createBeansList=function(t,e,i){void 0===t&&(t="clientSide");var o=e.filter((function(e){return!e.rowModel||e.rowModel===t})),n={clientSide:Z.ClientSideRowModelModule,infinite:Z.InfiniteRowModelModule,serverSide:Z.ServerSideRowModelModule,viewport:Z.ViewportRowModelModule};if(n[t]){if(nt.__assertRegistered(n[t],"rowModelType = '"+t+"'",i)){var r=[gc,__,b_,A_,Ty,fu,Ll,By,Hy,Ld,eu,r_,Ed,ym,Qe,af,su,di,vt,dm,Cg,zg,Cu,ai,gd,mf,Zd,ey,pe,ny,jg,Ah,ky,Qg,ly,ci,Gd,Rd,Ua,Yg,Hp,Th,e_,Ng,nf,Cf,Oh,by,Sy,Oy,l_,be,Fy,Nd,P_,yi,M_,N_,gf,G_,$_,em,nm,z_,Rm,Pm,_u],s=this.extractModuleEntity(o,(function(t){return t.beans?t.beans:[]}));r.push.apply(r,km([],Dm(s)));var a=[];return r.forEach((function(t){a.indexOf(t)<0&&a.push(t)})),a}}else console.error("AG Grid: could not find row model for rowModelType = "+t)},t.prototype.extractModuleEntity=function(t,e){return[].concat.apply([],km([],Dm(t.map(e))))},t.prototype.setColumnsAndData=function(t){var e=t.gridOptionsService.get("columnDefs");t.columnModel.setColumnDefs(e||[],"gridInitializing"),t.rowModel.start()},t.prototype.dispatchGridReadyEvent=function(t){var e={type:ge.EVENT_GRID_READY};t.eventService.dispatchEvent(e)},t}(),Fm=function(){function t(){}return t.prototype.wrap=function(t,e,i,o){var n=this;void 0===i&&(i=[]);var r=this.createWrapper(t,o);return e.forEach((function(t){n.createMethod(r,t,!0)})),i.forEach((function(t){n.createMethod(r,t,!1)})),r},t.prototype.unwrap=function(t){return t},t.prototype.createMethod=function(t,e,i){t.addMethod(e,this.createMethodProxy(t,e,i))},t.prototype.createMethodProxy=function(t,e,i){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(i&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}},t}();(function(t){t["InsideBase"]="insideBase",t["InsideEnd"]="insideEnd",t["Center"]="center",t["OutsideEnd"]="outsideEnd"})(pm||(pm={}));
/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */
var Nm="undefined"===typeof i.g?{}:i.g;Nm.HTMLElement="undefined"===typeof HTMLElement?{}:HTMLElement,Nm.HTMLButtonElement="undefined"===typeof HTMLButtonElement?{}:HTMLButtonElement,Nm.HTMLSelectElement="undefined"===typeof HTMLSelectElement?{}:HTMLSelectElement,Nm.HTMLInputElement="undefined"===typeof HTMLInputElement?{}:HTMLInputElement,Nm.Node="undefined"===typeof Node?{}:Node,Nm.MouseEvent="undefined"===typeof MouseEvent?{}:MouseEvent;var Vm,Bm=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Gm=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t},jm=function(){function t(e,i,o,n,r,s){this.nextId=0,this.allNodesMap={},this.rootNode=e,this.gridOptionsService=i,this.eventService=o,this.columnModel=n,this.beans=s,this.selectionService=r,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=t.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return t.prototype.postConstruct=function(){this.suppressParentsInRowNodes=this.gridOptionsService.is("suppressParentsInRowNodes"),this.isRowMasterFunc=this.gridOptionsService.get("isRowMaster"),this.doingMasterDetail=this.gridOptionsService.is("masterDetail")},t.prototype.getCopyOfNodesMap=function(){return sr.cloneObject(this.allNodesMap)},t.prototype.getRowNode=function(t){return this.allNodesMap[t]},t.prototype.setRowData=function(e){var i=this;if("string"!==typeof e){this.dispatchRowDataUpdateStartedEvent(e);var o=this.rootNode,n=this.rootNode.sibling;o.childrenAfterFilter=null,o.childrenAfterGroup=null,o.childrenAfterAggFilter=null,o.childrenAfterSort=null,o.childrenMapped=null,o.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?o.allLeafChildren=e.map((function(e){return i.createNode(e,i.rootNode,t.TOP_LEVEL)})):(o.allLeafChildren=[],o.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=o.childrenAfterFilter,n.childrenAfterGroup=o.childrenAfterGroup,n.childrenAfterAggFilter=o.childrenAfterAggFilter,n.childrenAfterSort=o.childrenAfterSort,n.childrenMapped=o.childrenMapped,n.allLeafChildren=o.allLeafChildren)}else console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")},t.prototype.updateRowData=function(t,e){this.dispatchRowDataUpdateStartedEvent(t.add);var i={remove:[],update:[],add:[]},o=[];return this.executeRemove(t,i,o),this.executeUpdate(t,i,o),this.executeAdd(t,i),this.updateSelection(o,"rowDataChanged"),e&&sr.sortRowNodesByOrder(this.rootNode.allLeafChildren,e),i},t.prototype.dispatchRowDataUpdateStartedEvent=function(t){var e={type:ge.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:(null===t||void 0===t?void 0:t.length)?t[0]:null};this.eventService.dispatchEvent(e)},t.prototype.updateSelection=function(t,e){var i=t.length>0;if(i&&this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,source:e}),this.selectionService.updateGroupsFromChildrenSelections(e),i){var o={type:ge.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(o)}},t.prototype.executeAdd=function(e,i){var o,n=this,r=e.add,s=e.addIndex;if(!sr.missingOrEmpty(r)){var a=r.map((function(e){return n.createNode(e,n.rootNode,t.TOP_LEVEL)}));if("number"===typeof s&&s>=0){var l=this.rootNode.allLeafChildren,u=l.length,c=s,h=this.gridOptionsService.is("treeData");if(h&&s>0&&u>0)for(var p=0;p<u;p++)if((null===(o=l[p])||void 0===o?void 0:o.rowIndex)==s-1){c=p+1;break}var d=l.slice(0,c),f=l.slice(c,l.length);this.rootNode.allLeafChildren=Gm(Gm(Gm([],Bm(d)),Bm(a)),Bm(f))}else this.rootNode.allLeafChildren=Gm(Gm([],Bm(this.rootNode.allLeafChildren)),Bm(a));this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),i.add=a}},t.prototype.executeRemove=function(t,e,i){var o=this,n=t.remove;if(!sr.missingOrEmpty(n)){var r={};n.forEach((function(t){var n=o.lookupRowNode(t);n&&(n.isSelected()&&i.push(n),n.clearRowTopAndRowIndex(),r[n.id]=!0,delete o.allNodesMap[n.id],e.remove.push(n))})),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter((function(t){return!r[t.id]})),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},t.prototype.executeUpdate=function(e,i,o){var n=this,r=e.update;sr.missingOrEmpty(r)||r.forEach((function(e){var r=n.lookupRowNode(e);r&&(r.updateData(e),!r.selectable&&r.isSelected()&&o.push(r),n.setMasterForRow(r,e,t.TOP_LEVEL,!1),i.update.push(r))}))},t.prototype.lookupRowNode=function(t){var e,i=this.gridOptionsService.getCallback("getRowId");if(i){var o=i({data:t,level:0});if(e=this.allNodesMap[o],!e)return console.error("AG Grid: could not find row id="+o+", data item was not found for this id"),null}else if(e=this.rootNode.allLeafChildren.find((function(e){return e.data===t})),!e)return console.error("AG Grid: could not find data item as object was not found",t),console.error("Consider using getRowId to help the Grid find matching row data"),null;return e||null},t.prototype.createNode=function(t,e,i){var o=new Fa(this.beans);return o.group=!1,this.setMasterForRow(o,t,i,!0),e&&!this.suppressParentsInRowNodes&&(o.parent=e),o.level=i,o.setDataAndId(t,this.nextId.toString()),this.allNodesMap[o.id]&&console.warn("AG Grid: duplicate node id '"+o.id+"' detected from getRowId callback, this could cause issues in your grid."),this.allNodesMap[o.id]=o,this.nextId++,o},t.prototype.setMasterForRow=function(t,e,i,o){var n=this.gridOptionsService.is("treeData");if(n)t.setMaster(!1),o&&(t.expanded=!1);else if(this.doingMasterDetail?this.isRowMasterFunc?t.setMaster(this.isRowMasterFunc(e)):t.setMaster(!0):t.setMaster(!1),o){var r=this.columnModel.getRowGroupColumns(),s=r?r.length:0,a=i+s;t.expanded=!!t.master&&this.isExpanded(a)}},t.prototype.isExpanded=function(t){var e=this.gridOptionsService.getNum("groupDefaultExpanded");return-1===e||t<e},t.TOP_LEVEL=0,t.ROOT_NODE_ID="ROOT_NODE_ID",t}(),Hm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),$m=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Wm=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},Um=function(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t};(function(t){t[t["Normal"]=0]="Normal",t[t["AfterFilter"]=1]="AfterFilter",t[t["AfterFilterAndSort"]=2]="AfterFilterAndSort",t[t["PivotNodes"]=3]="PivotNodes"})(Vm||(Vm={}));var zm,Km=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=sr.debounce(e.onRowHeightChanged.bind(e),100),e.rowsToDisplay=[],e}return Hm(e,t),e.prototype.init=function(){var t=this,e=this.refreshModel.bind(this,{step:ou.EVERYTHING}),i=!this.gridOptionsService.is("suppressAnimationFrame"),o=this.refreshModel.bind(this,{step:ou.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:i});this.addManagedListener(this.eventService,ge.EVENT_NEW_COLUMNS_LOADED,o),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:ou.PIVOT})),this.addManagedListener(this.eventService,ge.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,ge.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this));var n=this.refreshModel.bind(this,{step:ou.MAP,keepRenderedRows:!0,animate:i});this.addManagedPropertyListeners(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"],n);var r=this.refreshModel.bind(this,{step:ou.AGGREGATE,keepRenderedRows:!0,animate:i});this.addManagedPropertyListeners(["groupIncludeTotalFooter"],r),this.rootNode=new Fa(this.beans),this.nodeManager=new jm(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans),this.addManagedPropertyListener("treeData",(function(){t.setRowData(t.rootNode.allLeafChildren.map((function(t){return t.data})))}))},e.prototype.start=function(){var t=this.gridOptionsService.get("rowData");t&&this.setRowData(t)},e.prototype.ensureRowHeightsValid=function(t,e,i,o){var n,r=!1;do{n=!1;for(var s=this.getRowIndexAtPixel(t),a=this.getRowIndexAtPixel(e),l=Math.max(s,i),u=Math.min(a,o),c=l;c<=u;c++){var h=this.getRow(c);if(h.rowHeightEstimated){var p=this.gridOptionsService.getRowHeightForNode(h);h.setRowHeight(p.height),n=!0,r=!0}}n&&this.setRowTopAndRowIndex()}while(n);return r},e.prototype.setRowTopAndRowIndex=function(){for(var t=this.environment.getDefaultRowHeight(),e=0,i=new Set,o=this.gridOptionsService.isDomLayout("normal"),n=0;n<this.rowsToDisplay.length;n++){var r=this.rowsToDisplay[n];if(null!=r.id&&i.add(r.id),null==r.rowHeight){var s=this.gridOptionsService.getRowHeightForNode(r,o,t);r.setRowHeight(s.height,s.estimated)}r.setRowTop(e),r.setRowIndex(n),e+=r.rowHeight}return i},e.prototype.clearRowTopAndRowIndex=function(t,e){var i=t.isActive(),o=function(t){t&&null!=t.id&&!e.has(t.id)&&t.clearRowTopAndRowIndex()},n=function(t){if(o(t),o(t.detailNode),o(t.sibling),t.hasChildren()&&t.childrenAfterGroup){var e=-1==t.level,r=i&&!e&&!t.expanded;r||t.childrenAfterGroup.forEach(n)}};n(this.rootNode)},e.prototype.ensureRowsAtPixel=function(t,e,i){var o=this;void 0===i&&(i=0);var n=this.getRowIndexAtPixel(e),r=this.getRow(n),s=!this.gridOptionsService.is("suppressAnimationFrame");return r!==t[0]&&(t.forEach((function(t){sr.removeFromArray(o.rootNode.allLeafChildren,t)})),t.forEach((function(t,e){sr.insertIntoArray(o.rootNode.allLeafChildren,t,Math.max(n+i,0)+e)})),this.refreshModel({step:ou.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:s}),!0)},e.prototype.highlightRowAtPixel=function(t,e){var i=null!=e?this.getRowIndexAtPixel(e):null,o=null!=i?this.getRow(i):null;if(o&&t&&o!==t&&null!=e){var n=this.getHighlightPosition(e,o);this.lastHighlightedRow&&this.lastHighlightedRow!==o&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),o.setHighlighted(n),this.lastHighlightedRow=o}else this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)},e.prototype.getHighlightPosition=function(t,e){if(!e){var i=this.getRowIndexAtPixel(t);if(e=this.getRow(i||0),!e)return iu.Below}var o=e.rowTop,n=e.rowHeight;return t-o<n/2?iu.Above:iu.Below},e.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},e.prototype.isLastRowIndexKnown=function(){return!0},e.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},e.prototype.getTopLevelRowCount=function(){var t=this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode;if(t)return 1;var e=this.rootNode.childrenAfterAggFilter;return e?e.length:0},e.prototype.getTopLevelRowDisplayedIndex=function(t){var e=this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode;if(e)return t;var i=this.rootNode.childrenAfterSort[t];if(this.gridOptionsService.is("groupHideOpenParents"))while(i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0)i=i.childrenAfterSort[0];return i.rowIndex},e.prototype.getRowBounds=function(t){if(sr.missing(this.rowsToDisplay))return null;var e=this.rowsToDisplay[t];return e?{rowTop:e.rowTop,rowHeight:e.rowHeight}:null},e.prototype.onRowGroupOpened=function(){var t=this.gridOptionsService.isAnimateRows();this.refreshModel({step:ou.MAP,keepRenderedRows:!0,animate:t})},e.prototype.onFilterChanged=function(t){if(!t.afterDataChange){var e=this.gridOptionsService.isAnimateRows(),i=0===t.columns.length||t.columns.some((function(t){return t.isPrimary()})),o=i?ou.FILTER:ou.FILTER_AGGREGATES;this.refreshModel({step:o,keepRenderedRows:!0,animate:e})}},e.prototype.onSortChanged=function(){var t=this.gridOptionsService.isAnimateRows();this.refreshModel({step:ou.SORT,keepRenderedRows:!0,animate:t,keepEditingRows:!0})},e.prototype.getType=function(){return"clientSide"},e.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:ou.PIVOT}):this.refreshModel({step:ou.AGGREGATE})},e.prototype.createChangePath=function(t){var e=sr.missingOrEmpty(t),i=new uf(!1,this.rootNode);return(e||this.gridOptionsService.is("treeData"))&&i.setInactive(),i},e.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(t){if(!this.gridOptionsService.is("suppressModelUpdateAfterUpdateTransaction"))return!1;if(null==t.rowNodeTransactions)return!1;var e=t.rowNodeTransactions.filter((function(t){return null!=t.add&&t.add.length>0||null!=t.remove&&t.remove.length>0})),i=null==e||0==e.length;return i},e.prototype.buildRefreshModelParams=function(t){var e=ou.EVERYTHING,i={everything:ou.EVERYTHING,group:ou.EVERYTHING,filter:ou.FILTER,map:ou.MAP,aggregate:ou.AGGREGATE,sort:ou.SORT,pivot:ou.PIVOT};if(sr.exists(t)&&(e=i[t]),!sr.missing(e)){var o=!this.gridOptionsService.is("suppressAnimationFrame"),n={step:e,keepRenderedRows:!0,keepEditingRows:!0,animate:o};return n}console.error("AG Grid: invalid step "+t+", available steps are "+Object.keys(i).join(", "))},e.prototype.refreshModel=function(t){var e="object"===typeof t&&"step"in t?t:this.buildRefreshModelParams(t);if(e&&!this.isSuppressModelUpdateAfterUpdateTransaction(e)){var i=this.createChangePath(e.rowNodeTransactions);switch(e.step){case ou.EVERYTHING:this.doRowGrouping(e.groupState,e.rowNodeTransactions,e.rowNodeOrder,i,!!e.afterColumnsChanged);case ou.FILTER:this.doFilter(i);case ou.PIVOT:this.doPivot(i);case ou.AGGREGATE:this.doAggregate(i);case ou.FILTER_AGGREGATES:this.doFilterAggregates(i);case ou.SORT:this.doSort(e.rowNodeTransactions,i);case ou.MAP:this.doRowsToDisplay()}var o=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,o);var n={type:ge.EVENT_MODEL_UPDATED,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack};this.eventService.dispatchEvent(n)}},e.prototype.isEmpty=function(){var t=sr.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return sr.missing(this.rootNode)||t||!this.columnModel.isReady()},e.prototype.isRowsToRender=function(){return sr.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},e.prototype.getNodesInRangeForSelection=function(t,e){var i=!e,o=!1,n=[],r=this.gridOptionsService.is("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort((function(s){if(!o)if(i&&(s===e||s===t)&&(o=!0,s.group&&r))n.push.apply(n,Um([],Wm(s.allLeafChildren)));else{if(!i){if(s!==e&&s!==t)return;i=!0}var a=!s.group||!r;a&&n.push(s)}})),n},e.prototype.setDatasource=function(t){console.error("AG Grid: should never call setDatasource on clientSideRowController")},e.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},e.prototype.getRootNode=function(){return this.rootNode},e.prototype.getRow=function(t){return this.rowsToDisplay[t]},e.prototype.isRowPresent=function(t){return this.rowsToDisplay.indexOf(t)>=0},e.prototype.getRowIndexAtPixel=function(t){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;var e=0,i=this.rowsToDisplay.length-1;if(t<=0)return 0;var o=sr.last(this.rowsToDisplay);if(o.rowTop<=t)return this.rowsToDisplay.length-1;var n=-1,r=-1;while(1){var s=Math.floor((e+i)/2),a=this.rowsToDisplay[s];if(this.isRowInPixel(a,t))return s;a.rowTop<t?e=s+1:a.rowTop>t&&(i=s-1);var l=n===e&&r===i;if(l)return s;n=e,r=i}},e.prototype.isRowInPixel=function(t,e){var i=t.rowTop,o=t.rowTop+t.rowHeight,n=i<=e&&o>e;return n},e.prototype.forEachLeafNode=function(t){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((function(e,i){return t(e,i)}))},e.prototype.forEachNode=function(t,e){void 0===e&&(e=!1),this.recursivelyWalkNodesAndCallback({nodes:Um([],Wm(this.rootNode.childrenAfterGroup||[])),callback:t,recursionType:Vm.Normal,index:0,includeFooterNodes:e})},e.prototype.forEachNodeAfterFilter=function(t,e){void 0===e&&(e=!1),this.recursivelyWalkNodesAndCallback({nodes:Um([],Wm(this.rootNode.childrenAfterAggFilter||[])),callback:t,recursionType:Vm.AfterFilter,index:0,includeFooterNodes:e})},e.prototype.forEachNodeAfterFilterAndSort=function(t,e){void 0===e&&(e=!1),this.recursivelyWalkNodesAndCallback({nodes:Um([],Wm(this.rootNode.childrenAfterSort||[])),callback:t,recursionType:Vm.AfterFilterAndSort,index:0,includeFooterNodes:e})},e.prototype.forEachPivotNode=function(t,e){void 0===e&&(e=!1),this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:t,recursionType:Vm.PivotNodes,index:0,includeFooterNodes:e})},e.prototype.recursivelyWalkNodesAndCallback=function(t){for(var e,i=t.nodes,o=t.callback,n=t.recursionType,r=t.includeFooterNodes,s=t.index,a=0;a<i.length;a++){var l=i[a];if(o(l,s++),l.hasChildren()&&!l.footer){var u=null;switch(n){case Vm.Normal:u=l.childrenAfterGroup;break;case Vm.AfterFilter:u=l.childrenAfterAggFilter;break;case Vm.AfterFilterAndSort:u=l.childrenAfterSort;break;case Vm.PivotNodes:u=l.leafGroup?null:l.childrenAfterSort;break}u&&(s=this.recursivelyWalkNodesAndCallback({nodes:Um([],Wm(u)),callback:o,recursionType:n,index:s,includeFooterNodes:r}))}}var c=null===(e=i[0])||void 0===e?void 0:e.parent;if(!r||!c)return s;var h=c===this.rootNode;if(h){var p=this.gridOptionsService.is("groupIncludeTotalFooter");if(!p)return s}else{var d=this.gridOptionsService.getGroupIncludeFooter();if(!d({node:c}))return s}return c.createFooter(),o(c.sibling,s++),s},e.prototype.doAggregate=function(t){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:t})},e.prototype.doFilterAggregates=function(t){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:t}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},e.prototype.expandOrCollapseAll=function(t){var e=this.gridOptionsService.is("treeData"),i=this.columnModel.isPivotActive(),o=function(n){n&&n.forEach((function(n){var r=function(){n.expanded=t,o(n.childrenAfterGroup)};if(e){var s=sr.exists(n.childrenAfterGroup);s&&r()}else if(i){var a=!n.leafGroup;a&&r()}else{var l=n.group;l&&r()}}))};this.rootNode&&o(this.rootNode.childrenAfterGroup),this.refreshModel({step:ou.MAP});var n=t?"expandAll":"collapseAll",r={type:ge.EVENT_EXPAND_COLLAPSE_ALL,source:n};this.eventService.dispatchEvent(r)},e.prototype.doSort=function(t,e){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,changedPath:e})},e.prototype.doRowGrouping=function(t,e,i,o,n){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:i,changedPath:o}):(this.groupStage.execute({rowNode:this.rootNode,changedPath:o,afterColumnsChanged:n}),this.restoreGroupState(t)),this.gridOptionsService.is("groupSelectsChildren")){var r=this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",o);if(r){var s={type:ge.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(s)}}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren()},e.prototype.restoreGroupState=function(t){t&&sr.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(function(e,i){"boolean"===typeof t[i]&&(e.expanded=t[i])}))},e.prototype.doFilter=function(t){this.filterStage.execute({rowNode:this.rootNode,changedPath:t})},e.prototype.doPivot=function(t){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:t})},e.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsService.is("rememberGroupStateWhenNewData"))return null;var t={};return sr.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(function(e,i){return t[i]=e.expanded})),t},e.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},e.prototype.getRowNode=function(t){var e="string"==typeof t&&0==t.indexOf(Fa.ID_PREFIX_ROW_GROUP);if(e){var i=void 0;return this.forEachNode((function(e){e.id===t&&(i=e)})),i}return this.nodeManager.getRowNode(t)},e.prototype.setRowData=function(t){var e=this.getGroupState();this.nodeManager.setRowData(t),this.selectionService.reset(),this.filterManager.onNewRowsLoaded("rowDataUpdated");var i={type:ge.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(i),this.refreshModel({step:ou.EVERYTHING,groupState:e,newData:!0})},e.prototype.batchUpdateRowData=function(t,e){var i=this;if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];var o=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout((function(){i.executeBatchUpdateRowData()}),o)}this.rowDataTransactionBatch.push({rowDataTransaction:t,callback:e})},e.prototype.flushAsyncTransactions=function(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},e.prototype.executeBatchUpdateRowData=function(){var t=this;this.valueCache.onDataChanged();var e=[],i=[],o=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach((function(n){var r=t.nodeManager.updateRowData(n.rowDataTransaction,void 0);i.push(r),n.callback&&e.push(n.callback.bind(null,r)),"number"===typeof n.rowDataTransaction.addIndex&&(o=!0)})),this.commonUpdateRowData(i,void 0,o),e.length>0&&window.setTimeout((function(){e.forEach((function(t){return t()}))}),0),i.length>0){var n={type:ge.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:i};this.eventService.dispatchEvent(n)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},e.prototype.updateRowData=function(t,e){this.valueCache.onDataChanged();var i=this.nodeManager.updateRowData(t,e),o="number"===typeof t.addIndex;return this.commonUpdateRowData([i],e,o),i},e.prototype.createRowNodeOrder=function(){var t=this.gridOptionsService.is("suppressMaintainUnsortedOrder");if(!t){var e={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var i=0;i<this.rootNode.allLeafChildren.length;i++){var o=this.rootNode.allLeafChildren[i];e[o.id]=i}return e}},e.prototype.commonUpdateRowData=function(t,e,i){var o=!this.gridOptionsService.is("suppressAnimationFrame");i&&(e=this.createRowNodeOrder()),this.refreshModel({step:ou.EVERYTHING,rowNodeTransactions:t,rowNodeOrder:e,keepRenderedRows:!0,keepEditingRows:!0,animate:o}),this.filterManager.onNewRowsLoaded("rowDataUpdated");var n={type:ge.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(n)},e.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},e.prototype.onRowHeightChanged=function(){this.refreshModel({step:ou.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})},e.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},e.prototype.resetRowHeights=function(){var t=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),t&&this.onRowHeightChanged()},e.prototype.resetRowHeightsForAllRowNodes=function(){var t=!1;return this.forEachNode((function(e){e.setRowHeight(e.rowHeight,!0);var i=e.detailNode;i&&i.setRowHeight(i.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t=!0})),t},e.prototype.onGridStylesChanges=function(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()},$m([pt("columnModel")],e.prototype,"columnModel",void 0),$m([pt("selectionService")],e.prototype,"selectionService",void 0),$m([pt("filterManager")],e.prototype,"filterManager",void 0),$m([pt("valueCache")],e.prototype,"valueCache",void 0),$m([pt("beans")],e.prototype,"beans",void 0),$m([pt("filterStage")],e.prototype,"filterStage",void 0),$m([pt("sortStage")],e.prototype,"sortStage",void 0),$m([pt("flattenStage")],e.prototype,"flattenStage",void 0),$m([dt("groupStage")],e.prototype,"groupStage",void 0),$m([dt("aggregationStage")],e.prototype,"aggregationStage",void 0),$m([dt("pivotStage")],e.prototype,"pivotStage",void 0),$m([dt("filterAggregatesStage")],e.prototype,"filterAggregatesStage",void 0),$m([ut],e.prototype,"init",null),e=$m([ht("rowModel")],e),e}(le),Ym=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),qm=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Xm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ym(e,t),e.prototype.execute=function(t){var e=t.changedPath;this.filterService.filter(e)},qm([pt("filterService")],e.prototype,"filterService",void 0),e=qm([ht("filterStage")],e),e}(le),Qm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Jm=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Zm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qm(e,t),e.prototype.execute=function(t){var e=this,i=this.sortController.getSortOptions(),o=sr.exists(i)&&i.length>0,n=o&&sr.exists(t.rowNodeTransactions)&&this.gridOptionsService.is("deltaSort"),r=i.some((function(t){var i=e.gridOptionsService.isColumnsSortingCoupledToGroup();return i?t.column.isPrimary()&&t.column.isRowGroupActive():!!t.column.getColDef().showRowGroup}));this.sortService.sort(i,o,n,t.rowNodeTransactions,t.changedPath,r)},Jm([pt("sortService")],e.prototype,"sortService",void 0),Jm([pt("sortController")],e.prototype,"sortController",void 0),Jm([pt("columnModel")],e.prototype,"columnModel",void 0),e=Jm([ht("sortStage")],e),e}(le),tv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ev=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},iv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tv(e,t),e.prototype.execute=function(t){var e=t.rowNode,i=[],o=this.columnModel.isPivotMode(),n=o&&e.leafGroup,r=n?[e]:e.childrenAfterSort,s=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(s,r,i,o,0);var a=i.length>0,l=!n&&a&&s.groupIncludeTotalFooter;return l&&(e.createFooter(),this.addRowNodeToRowsToDisplay(s,e.sibling,i,0)),i},e.prototype.getFlattenDetails=function(){var t=this.gridOptionsService.is("groupRemoveSingleChildren"),e=!t&&this.gridOptionsService.is("groupRemoveLowestSingleChildren");return{groupRemoveLowestSingleChildren:e,groupRemoveSingleChildren:t,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.is("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.is("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}},e.prototype.recursivelyAddToRowsToDisplay=function(t,e,i,o,n){if(!sr.missingOrEmpty(e))for(var r=0;r<e.length;r++){var s=e[r],a=s.hasChildren(),l=o&&!a,u=t.groupRemoveSingleChildren&&a&&1===s.childrenAfterGroup.length,c=t.groupRemoveLowestSingleChildren&&a&&s.leafGroup&&1===s.childrenAfterGroup.length,h=o&&s.leafGroup,p=t.hideOpenParents&&s.expanded&&!s.master&&!h,d=!l&&!p&&!u&&!c;if(d&&this.addRowNodeToRowsToDisplay(t,s,i,n),!o||!s.leafGroup)if(a){var f=u||c;if(s.expanded||f){var g=f?n:n+1;this.recursivelyAddToRowsToDisplay(t,s.childrenAfterSort,i,o,g);var y=t.getGroupIncludeFooter({node:s});y?(s.createFooter(),this.addRowNodeToRowsToDisplay(t,s.sibling,i,g)):s.destroyFooter()}}else if(s.master&&s.expanded){var _=this.createDetailNode(s);this.addRowNodeToRowsToDisplay(t,_,i,n)}}},e.prototype.addRowNodeToRowsToDisplay=function(t,e,i,o){i.push(e),e.setUiLevel(t.isGroupMultiAutoColumn?0:o)},e.prototype.createDetailNode=function(t){if(sr.exists(t.detailNode))return t.detailNode;var e=new Fa(this.beans);return e.detail=!0,e.selectable=!1,e.parent=t,sr.exists(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1,t.detailNode=e,e},ev([pt("columnModel")],e.prototype,"columnModel",void 0),ev([pt("beans")],e.prototype,"beans",void 0),e=ev([ht("flattenStage")],e),e}(le),ov=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),nv=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},rv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ov(e,t),e.prototype.init=function(){this.postSortFunc=this.gridOptionsService.getCallback("postSortRows")},e.prototype.sort=function(t,e,i,o,n,r){var s=this,a=this.gridOptionsService.is("groupMaintainOrder"),l=this.columnModel.getAllGridColumns().some((function(t){return t.isRowGroupActive()})),u={};i&&o&&(u=this.calculateDirtyNodes(o));var c=this.columnModel.isPivotMode(),h=function(o){s.pullDownGroupDataForHideOpenParents(o.childrenAfterAggFilter,!0);var h=c&&o.leafGroup,p=a&&l&&!o.leafGroup&&!r;if(p){var d=o.childrenAfterAggFilter.slice(0);if(o.childrenAfterSort){var f={};o.childrenAfterSort.forEach((function(t,e){f[t.id]=e})),d.sort((function(t,e){var i,o;return(null!==(i=f[t.id])&&void 0!==i?i:0)-(null!==(o=f[e.id])&&void 0!==o?o:0)}))}o.childrenAfterSort=d}else o.childrenAfterSort=!e||h?o.childrenAfterAggFilter.slice(0):i?s.doDeltaSort(o,u,n,t):s.rowNodeSorter.doFullSort(o.childrenAfterAggFilter,t);if(o.sibling&&(o.sibling.childrenAfterSort=o.childrenAfterSort),s.updateChildIndexes(o),s.postSortFunc){var g={nodes:o.childrenAfterSort};s.postSortFunc(g)}};n&&n.forEachChangedNodeDepthFirst(h),this.updateGroupDataForHideOpenParents(n)},e.prototype.calculateDirtyNodes=function(t){var e={},i=function(t){t&&t.forEach((function(t){return e[t.id]=!0}))};return t&&t.forEach((function(t){i(t.add),i(t.update),i(t.remove)})),e},e.prototype.doDeltaSort=function(t,e,i,o){var n=this,r=t.childrenAfterAggFilter,s=t.childrenAfterSort;if(!s)return this.rowNodeSorter.doFullSort(r,o);var a={},l=[];r.forEach((function(t){e[t.id]||!i.canSkip(t)?l.push(t):a[t.id]=!0}));var u=s.filter((function(t){return a[t.id]})),c=function(t,e){return{currentPos:e,rowNode:t}},h=l.map(c).sort((function(t,e){return n.rowNodeSorter.compareRowNodes(o,t,e)}));return this.mergeSortedArrays(o,h,u.map(c)).map((function(t){var e=t.rowNode;return e}))},e.prototype.mergeSortedArrays=function(t,e,i){var o=[],n=0,r=0;while(n<e.length&&r<i.length){var s=this.rowNodeSorter.compareRowNodes(t,e[n],i[r]);s<0?o.push(e[n++]):o.push(i[r++])}while(n<e.length)o.push(e[n++]);while(r<i.length)o.push(i[r++]);return o},e.prototype.updateChildIndexes=function(t){if(!sr.missing(t.childrenAfterSort))for(var e=t.childrenAfterSort,i=0;i<e.length;i++){var o=e[i],n=0===i,r=i===t.childrenAfterSort.length-1;o.setFirstChild(n),o.setLastChild(r),o.setChildIndex(i)}},e.prototype.updateGroupDataForHideOpenParents=function(t){var e=this;if(this.gridOptionsService.is("groupHideOpenParents")){if(this.gridOptionsService.is("treeData")){var i="AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).";return sr.doOnce((function(){return console.warn(i)}),"sortService.hideOpenParentsWithTreeData"),!1}var o=function(t){e.pullDownGroupDataForHideOpenParents(t.childrenAfterSort,!1),t.childrenAfterSort.forEach((function(t){t.hasChildren()&&o(t)}))};t&&t.executeFromRootNode((function(t){return o(t)}))}},e.prototype.pullDownGroupDataForHideOpenParents=function(t,e){var i=this;this.gridOptionsService.is("groupHideOpenParents")&&!sr.missing(t)&&t.forEach((function(t){var o=i.columnModel.getGroupDisplayColumns();o.forEach((function(o){var n=o.getColDef().showRowGroup;if("string"===typeof n){var r=n,s=i.columnModel.getPrimaryColumn(r),a=s===t.rowGroupColumn;if(!a)if(e)t.setGroupValue(o.getId(),void 0);else{var l=t.getFirstChildOfFirstChild(s);l&&t.setGroupValue(o.getId(),l.key)}}else console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup")}))}))},nv([pt("columnModel")],e.prototype,"columnModel",void 0),nv([pt("rowNodeSorter")],e.prototype,"rowNodeSorter",void 0),nv([ut],e.prototype,"init",null),e=nv([ht("sortService")],e),e}(le),sv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),av=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},lv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return sv(e,t),e.prototype.filter=function(t){var e=this.filterManager.isChildFilterPresent();this.filterNodes(e,t)},e.prototype.filterNodes=function(t,e){var i=this,o=function(e,o){e.hasChildren()?e.childrenAfterFilter=t&&!o?e.childrenAfterGroup.filter((function(t){var e=t.childrenAfterFilter&&t.childrenAfterFilter.length>0,o=t.data&&i.filterManager.doesRowPassFilter({rowNode:t});return e||o})):e.childrenAfterGroup:e.childrenAfterFilter=e.childrenAfterGroup,e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var n=function(t,e){if(t.childrenAfterGroup)for(var r=0;r<t.childrenAfterGroup.length;r++){var s=t.childrenAfterGroup[r],a=e||i.filterManager.doesRowPassFilter({rowNode:s});s.childrenAfterGroup?n(t.childrenAfterGroup[r],a):o(s,a)}o(t,e)},r=function(t){return n(t,!1)};e.executeFromRootNode(r)}else{var s=function(t){return o(t,!1)};e.forEachChangedNodeDepthFirst(s,!0)}},e.prototype.doingTreeDataFiltering=function(){return this.gridOptionsService.is("treeData")&&!this.gridOptionsService.is("excludeChildrenWhenTreeDataFiltering")},av([pt("filterManager")],e.prototype,"filterManager",void 0),e=av([ht("filterService")],e),e}(le),uv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),cv=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},hv=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{while((void 0===e||e-- >0)&&!(o=r.next()).done)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s},pv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return uv(e,t),e.prototype.postConstruct=function(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)},e.prototype.isActive=function(){var t=this.gridOptionsService.exists("getRowId"),e=this.gridOptionsService.is("resetRowDataOnUpdate");return!e&&t},e.prototype.setRowData=function(t){var e=this.createTransactionForRowData(t);if(e){var i=hv(e,2),o=i[0],n=i[1];this.clientSideRowModel.updateRowData(o,n)}},e.prototype.createTransactionForRowData=function(t){if(sr.missing(this.clientSideRowModel))console.error("AG Grid: ImmutableService only works with ClientSideRowModel");else{var e=this.gridOptionsService.getCallback("getRowId");if(null!=e){var i={remove:[],update:[],add:[]},o=this.clientSideRowModel.getCopyOfNodesMap(),n=this.gridOptionsService.is("suppressMaintainUnsortedOrder"),r=n?void 0:{};return sr.exists(t)&&t.forEach((function(t,n){var s=e({data:t,level:0}),a=o[s];if(r&&(r[s]=n),a){var l=a.data!==t;l&&i.update.push(t),o[s]=void 0}else i.add.push(t)})),sr.iterateObject(o,(function(t,e){e&&i.remove.push(e.data)})),[i,r]}console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!")}},cv([pt("rowModel")],e.prototype,"rowModel",void 0),cv([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),cv([ut],e.prototype,"postConstruct",null),e=cv([ht("immutableService")],e),e}(le),dv="30.2.1",fv={version:dv,moduleName:Z.ClientSideRowModelModule,rowModel:"clientSide",beans:[Km,Xm,Zm,iv,rv,lv,pv]},gv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),yv=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},_v=function(t){function e(e,i,o){var n=t.call(this,e)||this;return n.parentCache=i,n.params=o,n.startRow=e*o.blockSize,n.endRow=n.startRow+o.blockSize,n}return gv(e,t),e.prototype.postConstruct=function(){this.createRowNodes()},e.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},e.prototype.setDataAndId=function(t,e,i){sr.exists(e)?t.setDataAndId(e,i.toString()):t.setDataAndId(void 0,void 0)},e.prototype.loadFromDatasource=function(){var t=this,e=this.createLoadParams();sr.missing(this.params.datasource.getRows)?console.warn("AG Grid: datasource is missing getRows method"):window.setTimeout((function(){t.params.datasource.getRows(e)}),0)},e.prototype.processServerFail=function(){},e.prototype.createLoadParams=function(){var t={startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.context};return t},e.prototype.forEachNode=function(t,e,i){var o=this;this.rowNodes.forEach((function(n,r){var s=o.startRow+r;s<i&&t(n,e.next())}))},e.prototype.getLastAccessed=function(){return this.lastAccessed},e.prototype.getRow=function(t,e){void 0===e&&(e=!1),e||(this.lastAccessed=this.params.lastAccessedSequence.next());var i=t-this.startRow;return this.rowNodes[i]},e.prototype.getStartRow=function(){return this.startRow},e.prototype.getEndRow=function(){return this.endRow},e.prototype.createRowNodes=function(){this.rowNodes=[];for(var t=0;t<this.params.blockSize;t++){var e=this.startRow+t,i=new Fa(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(e),i.setRowTop(this.params.rowHeight*e),this.rowNodes.push(i)}},e.prototype.processServerResult=function(t){var e=this;this.rowNodes.forEach((function(i,o){var n=t.rowData?t.rowData[o]:void 0;!i.id&&i.alreadyRendered&&n&&(e.rowNodes[o]=new Fa(e.beans),e.rowNodes[o].setRowIndex(i.rowIndex),e.rowNodes[o].setRowTop(i.rowTop),e.rowNodes[o].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),e.setDataAndId(e.rowNodes[o],n,e.startRow+o)}));var i=null!=t.rowCount&&t.rowCount>=0?t.rowCount:void 0;this.parentCache.pageLoaded(this,i)},e.prototype.destroyRowNodes=function(){this.rowNodes.forEach((function(t){t.clearRowTopAndRowIndex()}))},yv([pt("beans")],e.prototype,"beans",void 0),yv([ut],e.prototype,"postConstruct",null),yv([ct],e.prototype,"destroyRowNodes",null),e}(hf),mv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),vv=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},bv=function(t,e){return function(i,o){e(i,o,t)}},Cv=function(t){function e(e){var i=t.call(this)||this;return i.lastRowIndexKnown=!1,i.blocks={},i.blockCount=0,i.rowCount=e.initialRowCount,i.params=e,i}return mv(e,t),e.prototype.setBeans=function(t){this.logger=t.create("InfiniteCache")},e.prototype.getRow=function(t,e){void 0===e&&(e=!1);var i=Math.floor(t/this.params.blockSize),o=this.blocks[i];if(!o){if(e)return;o=this.createBlock(i)}return o.getRow(t)},e.prototype.createBlock=function(t){var e=this.createBean(new _v(t,this,this.params));return this.blocks[e.getId()]=e,this.blockCount++,this.purgeBlocksIfNeeded(e),this.params.rowNodeBlockLoader.addBlock(e),e},e.prototype.refreshCache=function(){var t=0==this.blockCount;t?this.purgeCache():(this.getBlocksInOrder().forEach((function(t){return t.setStateWaitingToLoad()})),this.params.rowNodeBlockLoader.checkBlockToLoad())},e.prototype.destroyAllBlocks=function(){var t=this;this.getBlocksInOrder().forEach((function(e){return t.destroyBlock(e)}))},e.prototype.getRowCount=function(){return this.rowCount},e.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},e.prototype.pageLoaded=function(t,e){this.isAlive()&&(this.logger.log("onPageLoaded: page = "+t.getId()+", lastRow = "+e),this.checkRowCount(t,e),this.onCacheUpdated())},e.prototype.purgeBlocksIfNeeded=function(t){var i=this,o=this.getBlocksInOrder().filter((function(e){return e!=t})),n=function(t,e){return e.getLastAccessed()-t.getLastAccessed()};o.sort(n);var r=this.params.maxBlocksInCache>0,s=r?this.params.maxBlocksInCache-1:null,a=e.MAX_EMPTY_BLOCKS_TO_KEEP-1;o.forEach((function(t,e){var o=t.getState()===_v.STATE_WAITING_TO_LOAD&&e>=a,n=!!r&&e>=s;if(o||n){if(i.isBlockCurrentlyDisplayed(t))return;if(i.isBlockFocused(t))return;i.removeBlockFromCache(t)}}))},e.prototype.isBlockFocused=function(t){var e=this.focusService.getFocusCellToUseAfterRefresh();if(!e)return!1;if(null!=e.rowPinned)return!1;var i=t.getStartRow(),o=t.getEndRow(),n=e.rowIndex>=i&&e.rowIndex<o;return n},e.prototype.isBlockCurrentlyDisplayed=function(t){var e=t.getStartRow(),i=t.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(e,i)},e.prototype.removeBlockFromCache=function(t){t&&this.destroyBlock(t)},e.prototype.checkRowCount=function(t,e){if("number"===typeof e&&e>=0)this.rowCount=e,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var i=(t.getId()+1)*this.params.blockSize,o=i+this.params.overflowSize;this.rowCount<o&&(this.rowCount=o)}},e.prototype.setRowCount=function(t,e){this.rowCount=t,sr.exists(e)&&(this.lastRowIndexKnown=e),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()},e.prototype.forEachNodeDeep=function(t){var e=this,i=new ar;this.getBlocksInOrder().forEach((function(o){return o.forEachNode(t,i,e.rowCount)}))},e.prototype.getBlocksInOrder=function(){var t=function(t,e){return t.getId()-e.getId()},e=sr.getAllValuesInObject(this.blocks).sort(t);return e},e.prototype.destroyBlock=function(t){delete this.blocks[t.getId()],this.destroyBean(t),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(t)},e.prototype.onCacheUpdated=function(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();var t={type:ge.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)}},e.prototype.destroyAllBlocksPastVirtualRowCount=function(){var t=this,e=[];this.getBlocksInOrder().forEach((function(i){var o=i.getId()*t.params.blockSize;o>=t.rowCount&&e.push(i)})),e.length>0&&e.forEach((function(e){return t.destroyBlock(e)}))},e.prototype.purgeCache=function(){var t=this;this.getBlocksInOrder().forEach((function(e){return t.removeBlockFromCache(e)})),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},e.prototype.getRowNodesInRange=function(t,e){var i=this,o=[],n=-1,r=!1,s=new ar;sr.missing(t)&&(r=!0);var a=!1;this.getBlocksInOrder().forEach((function(l){a||(r&&n+1!==l.getId()?a=!0:(n=l.getId(),l.forEachNode((function(i){var n=i===t||i===e;(r||n)&&o.push(i),n&&(r=!r)}),s,i.rowCount)))}));var l=a||r;return l?[]:o},e.MAX_EMPTY_BLOCKS_TO_KEEP=2,vv([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),vv([pt("focusService")],e.prototype,"focusService",void 0),vv([bv(0,gt("loggerFactory"))],e.prototype,"setBeans",null),vv([ct],e.prototype,"destroyAllBlocks",null),e}(le),wv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Sv=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ev=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wv(e,t),e.prototype.getRowBounds=function(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}},e.prototype.ensureRowHeightsValid=function(t,e,i,o){return!1},e.prototype.init=function(){var t=this;this.gridOptionsService.isRowModelType("infinite")&&(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc((function(){return t.destroyCache()})),this.verifyProps())},e.prototype.verifyProps=function(){if(this.gridOptionsService.exists("initialGroupOrderComparator")){var t="AG Grid: initialGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.";sr.doOnce((function(){return console.warn(t)}),"IRM.InitialGroupOrderComparator")}},e.prototype.start=function(){this.setDatasource(this.gridOptionsService.get("datasource"))},e.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},e.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,ge.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,ge.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))},e.prototype.onFilterChanged=function(){this.reset()},e.prototype.onSortChanged=function(){this.reset()},e.prototype.onColumnEverything=function(){var t;t=!this.cacheParams||this.isSortModelDifferent(),t&&this.reset()},e.prototype.isSortModelDifferent=function(){return!sr.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},e.prototype.getType=function(){return"infinite"},e.prototype.setDatasource=function(t){this.destroyDatasource(),this.datasource=t,t&&this.reset()},e.prototype.isEmpty=function(){return!this.infiniteCache},e.prototype.isRowsToRender=function(){return!!this.infiniteCache},e.prototype.getNodesInRangeForSelection=function(t,e){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(t,e):[]},e.prototype.reset=function(){if(this.datasource){var t=this.gridOptionsService.getCallback("getRowId"),e=null!=t;e||this.selectionService.reset(),this.resetCache();var i=this.createModelUpdatedEvent();this.eventService.dispatchEvent(i)}},e.prototype.createModelUpdatedEvent=function(){return{type:ge.EVENT_MODEL_UPDATED,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}},e.prototype.resetCache=function(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.defaultIfInvalid(this.gridOptionsService.getNum("infiniteInitialRowCount"),1),maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheOverflowSize"),1),blockSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheBlockSize"),100),lastAccessedSequence:new ar},this.infiniteCache=this.createBean(new Cv(this.cacheParams))},e.prototype.defaultIfInvalid=function(t,e){return t>0?t:e},e.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},e.prototype.onCacheUpdated=function(){var t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)},e.prototype.getRow=function(t){if(this.infiniteCache&&!(t>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(t)},e.prototype.getRowNode=function(t){var e;return this.forEachNode((function(i){i.id===t&&(e=i)})),e},e.prototype.forEachNode=function(t){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(t)},e.prototype.getTopLevelRowCount=function(){return this.getRowCount()},e.prototype.getTopLevelRowDisplayedIndex=function(t){return t},e.prototype.getRowIndexAtPixel=function(t){if(0!==this.rowHeight){var e=Math.floor(t/this.rowHeight),i=this.getRowCount()-1;return e>i?i:e}return 0},e.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},e.prototype.isRowPresent=function(t){var e=this.getRowNode(t.id);return!!e},e.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},e.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},e.prototype.isLastRowIndexKnown=function(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()},e.prototype.setRowCount=function(t,e){this.infiniteCache&&this.infiniteCache.setRowCount(t,e)},Sv([pt("filterManager")],e.prototype,"filterManager",void 0),Sv([pt("sortController")],e.prototype,"sortController",void 0),Sv([pt("selectionService")],e.prototype,"selectionService",void 0),Sv([pt("rowRenderer")],e.prototype,"rowRenderer",void 0),Sv([pt("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),Sv([ut],e.prototype,"init",null),Sv([ct],e.prototype,"destroyDatasource",null),e=Sv([ht("rowModel")],e),e}(le),xv="30.2.1",Ov={version:xv,moduleName:Z.InfiniteRowModelModule,rowModel:"infinite",beans:[Ev]},Rv=function(){function t(){}return t.prototype.setBeans=function(t){this.beans=t},t.prototype.getFileName=function(t){var e=this.getDefaultFileExtension();return null!=t&&t.length||(t=this.getDefaultFileName()),-1===t.indexOf(".")?t+"."+e:t},t.prototype.getData=function(t){var e=this.createSerializingSession(t),i=this.beans.gridSerializer.serialize(e,t);return i},t}(),Iv=function(){function t(t){this.groupColumns=[];var e=t.columnModel,i=t.valueService,o=t.gridOptionsService,n=t.valueFormatterService,r=t.valueParserService,s=t.processCellCallback,a=t.processHeaderCallback,l=t.processGroupHeaderCallback,u=t.processRowGroupCallback;this.columnModel=e,this.valueService=i,this.gridOptionsService=o,this.valueFormatterService=n,this.valueParserService=r,this.processCellCallback=s,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=u}return t.prototype.prepare=function(t){this.groupColumns=t.filter((function(t){return!!t.getColDef().showRowGroup}))},t.prototype.extractHeaderValue=function(t){var e=this.getHeaderName(this.processHeaderCallback,t);return null!=e?e:""},t.prototype.extractRowCellValue=function(t,e,i,o,n){var r=this.gridOptionsService.is("groupHideOpenParents"),s=r&&!n.footer||!this.shouldRenderGroupSummaryCell(n,t,e)?this.valueService.getValue(t,n):this.createValueForGroupNode(n),a=this.processCell({accumulatedRowIndex:i,rowNode:n,column:t,value:s,processCellCallback:this.processCellCallback,type:o});return a},t.prototype.shouldRenderGroupSummaryCell=function(t,e,i){var o,n=t&&t.group;if(!n)return!1;var r=this.groupColumns.indexOf(e);if(-1!==r){if(null!=(null===(o=t.groupData)||void 0===o?void 0:o[e.getId()]))return!0;if(this.gridOptionsService.isRowModelType("serverSide")&&t.group)return!0;if(t.footer&&-1===t.level){var s=e.getColDef(),a=null==s||!0===s.showRowGroup;return a||s.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}var l=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotMode());return 0===i&&l},t.prototype.getHeaderName=function(t,e){return t?t({column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):this.columnModel.getDisplayNameForColumn(e,"csv",!0)},t.prototype.createValueForGroupNode=function(t){if(this.processRowGroupCallback)return this.processRowGroupCallback({node:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context});var e=t.footer,i=[t.key];if(!this.gridOptionsService.isGroupMultiAutoColumn())while(t.parent)t=t.parent,i.push(t.key);var o=i.reverse().join(" -> ");return e?"Total "+o:o},t.prototype.processCell=function(t){var e,i=this,o=t.accumulatedRowIndex,n=t.rowNode,r=t.column,s=t.value,a=t.processCellCallback,l=t.type;return a?{value:null!==(e=a({accumulatedRowIndex:o,column:r,node:n,value:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,type:l,parseValue:function(t){return i.valueParserService.parseValue(r,n,t,i.valueService.getValue(r,n))},formatValue:function(t){var e;return null!==(e=i.valueFormatterService.formatValue(r,n,t))&&void 0!==e?e:t}}))&&void 0!==e?e:""}:r.getColDef().useValueFormatterForExport?{value:null!==s&&void 0!==s?s:"",valueFormatted:this.valueFormatterService.formatValue(r,n,s)}:{value:null!==s&&void 0!==s?s:""}},t}(),Tv=function(){function t(){}return t.download=function(t,e){var i=document.defaultView||window;if(i){var o=document.createElement("a"),n=i.URL.createObjectURL(e);o.setAttribute("href",n),o.setAttribute("download",t),o.style.display="none",document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(o),i.setTimeout((function(){i.URL.revokeObjectURL(n)}),0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},t}(),Pv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Dv="\r\n",kv=function(t){function e(e){var i=t.call(this,e)||this;i.isFirstLine=!0,i.result="";var o=e.suppressQuotes,n=e.columnSeparator;return i.suppressQuotes=o,i.columnSeparator=n,i}return Pv(e,t),e.prototype.addCustomContent=function(t){var e=this;t&&("string"===typeof t?(/^\s*\n/.test(t)||this.beginNewLine(),t=t.replace(/\r?\n/g,Dv),this.result+=t):t.forEach((function(t){e.beginNewLine(),t.forEach((function(t,i){0!==i&&(e.result+=e.columnSeparator),e.result+=e.putInQuotes(t.data.value||""),t.mergeAcross&&e.appendEmptyCells(t.mergeAcross)}))})))},e.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},e.prototype.onNewHeaderGroupingRowColumn=function(t,e,i,o){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e),this.appendEmptyCells(o)},e.prototype.appendEmptyCells=function(t){for(var e=1;e<=t;e++)this.result+=this.columnSeparator+this.putInQuotes("")},e.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},e.prototype.onNewHeaderRowColumn=function(t,e){0!=e&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(t))},e.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},e.prototype.onNewBodyRowColumn=function(t,e,i){var o;0!=e&&(this.result+=this.columnSeparator);var n=this.extractRowCellValue(t,e,e,"csv",i);this.result+=this.putInQuotes(null!==(o=n.valueFormatted)&&void 0!==o?o:n.value)},e.prototype.putInQuotes=function(t){if(this.suppressQuotes)return t;if(null===t||void 0===t)return'""';var e;"string"===typeof t?e=t:"function"===typeof t.toString?e=t.toString():(console.warn("AG Grid: unknown value type during csv conversion"),e="");var i=e.replace(/"/g,'""');return'"'+i+'"'},e.prototype.parse=function(){return this.result},e.prototype.beginNewLine=function(){this.isFirstLine||(this.result+=Dv),this.isFirstLine=!1},e}(Iv),Av=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Lv=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Av(e,t),e.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},e.prototype.getMergedParams=function(t){var e=this.gridOptionsService.get("defaultCsvExportParams");return Object.assign({},e,t)},e.prototype.export=function(t){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var e=this.getMergedParams(t),i=this.getData(e),o=new Blob(["\ufeff",i],{type:"text/plain"});return Tv.download(this.getFileName(e.fileName),o),i},e.prototype.exportDataAsCsv=function(t){return this.export(t)},e.prototype.getDataAsCsv=function(t,e){void 0===e&&(e=!1);var i=e?Object.assign({},t):this.getMergedParams(t);return this.getData(i)},e.prototype.getDefaultFileName=function(){return"export.csv"},e.prototype.getDefaultFileExtension=function(){return"csv"},e.prototype.createSerializingSession=function(t){var e=this,i=e.columnModel,o=e.valueService,n=e.gridOptionsService,r=e.valueFormatterService,s=e.valueParserService,a=t,l=a.processCellCallback,u=a.processHeaderCallback,c=a.processGroupHeaderCallback,h=a.processRowGroupCallback,p=a.suppressQuotes,d=a.columnSeparator;return new kv({columnModel:i,valueService:o,gridOptionsService:n,valueFormatterService:r,valueParserService:s,processCellCallback:l||void 0,processHeaderCallback:u||void 0,processGroupHeaderCallback:c||void 0,processRowGroupCallback:h||void 0,suppressQuotes:p||!1,columnSeparator:d||","})},e.prototype.isExportSuppressed=function(){return this.gridOptionsService.is("suppressCsvExport")},Lv([pt("columnModel")],e.prototype,"columnModel",void 0),Lv([pt("valueService")],e.prototype,"valueService",void 0),Lv([pt("gridSerializer")],e.prototype,"gridSerializer",void 0),Lv([pt("gridOptionsService")],e.prototype,"gridOptionsService",void 0),Lv([pt("valueFormatterService")],e.prototype,"valueFormatterService",void 0),Lv([pt("valueParserService")],e.prototype,"valueParserService",void 0),Lv([ut],e.prototype,"postConstruct",null),e=Lv([ht("csvCreator")],e),e}(Rv),Fv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Nv=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};(function(t){t[t["HEADER_GROUPING"]=0]="HEADER_GROUPING",t[t["HEADER"]=1]="HEADER",t[t["BODY"]=2]="BODY"})(zm||(zm={}));var Vv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fv(e,t),e.prototype.serialize=function(t,e){void 0===e&&(e={});var i=this.getColumnsToExport(e.allColumns,e.columnKeys),o=sr.compose(this.prepareSession(i),this.prependContent(e),this.exportColumnGroups(e,i),this.exportHeaders(e,i),this.processPinnedTopRows(e,i),this.processRows(e,i),this.processPinnedBottomRows(e,i),this.appendContent(e));return o(t).parse()},e.prototype.processRow=function(t,e,i,o){var n=e.shouldRowBeSkipped||function(){return!1},r=this.gridOptionsService.context,s=this.gridOptionsService.api,a=this.gridOptionsService.columnApi,l=this.gridOptionsService.is("groupRemoveSingleChildren"),u=this.gridOptionsService.is("groupRemoveLowestSingleChildren"),c=null!=e.rowPositions,h=c||!!e.onlySelected,p=this.gridOptionsService.is("groupHideOpenParents")&&!h,d=this.columnModel.isPivotMode()?o.leafGroup:!o.group,f=!!o.footer,g=e.skipGroups||e.skipRowGroups,y=u&&o.leafGroup,_=1===o.allChildrenCount&&(l||y);if(g&&e.skipGroups&&sr.doOnce((function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")}),"gridSerializer-skipGroups"),!(!d&&!f&&(e.skipRowGroups||_||p)||e.onlySelected&&!o.isSelected()||e.skipPinnedTop&&"top"===o.rowPinned||e.skipPinnedBottom&&"bottom"===o.rowPinned)){var m=-1===o.level;if(!m||d||f){var v=n({node:o,api:s,columnApi:a,context:r});if(!v){var b=t.onNewBodyRow(o);if(i.forEach((function(t,e){b.onColumn(t,e,o)})),e.getCustomContentBelowRow){var C=e.getCustomContentBelowRow({node:o,api:s,columnApi:a,context:r});C&&t.addCustomContent(C)}}}}},e.prototype.appendContent=function(t){return function(e){var i=t.customFooter||t.appendContent;return i&&(t.customFooter&&sr.doOnce((function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")}),"gridSerializer-customFooter"),e.addCustomContent(i)),e}},e.prototype.prependContent=function(t){return function(e){var i=t.customHeader||t.prependContent;return i&&(t.customHeader&&sr.doOnce((function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")}),"gridSerializer-customHeader"),e.addCustomContent(i)),e}},e.prototype.prepareSession=function(t){return function(e){return e.prepare(t),e}},e.prototype.exportColumnGroups=function(t,e){var i=this;return function(o){if(t.skipColumnGroupHeaders)t.columnGroups&&sr.doOnce((function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")}),"gridSerializer-columnGroups");else{var n=new ye,r=i.displayedGroupCreator.createDisplayedGroups(e,n,null);i.recursivelyAddHeaderGroups(r,o,t.processGroupHeaderCallback)}return o}},e.prototype.exportHeaders=function(t,e){return function(i){if(t.skipHeader||t.skipColumnHeaders)t.skipHeader&&sr.doOnce((function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")}),"gridSerializer-skipHeader");else{var o=i.onNewHeaderRow();e.forEach((function(t,e){o.onColumn(t,e,void 0)}))}return i}},e.prototype.processPinnedTopRows=function(t,e){var i=this;return function(o){var n=i.processRow.bind(i,o,t,e);return t.rowPositions?t.rowPositions.filter((function(t){return"top"===t.rowPinned})).sort((function(t,e){return t.rowIndex-e.rowIndex})).map((function(t){return i.pinnedRowModel.getPinnedTopRow(t.rowIndex)})).forEach(n):i.pinnedRowModel.forEachPinnedTopRow(n),o}},e.prototype.processRows=function(t,e){var i=this;return function(o){var n=i.rowModel,r=n.getType(),s="clientSide"===r,a="serverSide"===r,l=!s&&t.onlySelected,u=i.processRow.bind(i,o,t,e),c=t.exportedRows,h=void 0===c?"filteredAndSorted":c;if(t.rowPositions)t.rowPositions.filter((function(t){return null==t.rowPinned})).sort((function(t,e){return t.rowIndex-e.rowIndex})).map((function(t){return n.getRow(t.rowIndex)})).forEach(u);else if(i.columnModel.isPivotMode())s?n.forEachPivotNode(u,!0):a?n.forEachNodeAfterFilterAndSort(u,!0):n.forEachNode(u);else if(t.onlySelectedAllPages||l){var p=i.selectionService.getSelectedNodes();i.replicateSortedOrder(p),p.forEach(u)}else"all"===h?n.forEachNode(u):s||a?n.forEachNodeAfterFilterAndSort(u,!0):n.forEachNode(u);return o}},e.prototype.replicateSortedOrder=function(t){var e=this,i=this.sortController.getSortOptions(),o=function(t,n){var r,s,a,l;return null!=t.rowIndex&&null!=n.rowIndex?t.rowIndex-n.rowIndex:t.level===n.level?(null===(r=t.parent)||void 0===r?void 0:r.id)===(null===(s=n.parent)||void 0===s?void 0:s.id)?e.rowNodeSorter.compareRowNodes(i,{rowNode:t,currentPos:null!==(a=t.rowIndex)&&void 0!==a?a:-1},{rowNode:n,currentPos:null!==(l=n.rowIndex)&&void 0!==l?l:-1}):o(t.parent,n.parent):t.level>n.level?o(t.parent,n):o(t,n.parent)};t.sort(o)},e.prototype.processPinnedBottomRows=function(t,e){var i=this;return function(o){var n=i.processRow.bind(i,o,t,e);return t.rowPositions?t.rowPositions.filter((function(t){return"bottom"===t.rowPinned})).sort((function(t,e){return t.rowIndex-e.rowIndex})).map((function(t){return i.pinnedRowModel.getPinnedBottomRow(t.rowIndex)})).forEach(n):i.pinnedRowModel.forEachPinnedBottomRow(n),o}},e.prototype.getColumnsToExport=function(t,e){void 0===t&&(t=!1);var i=this.columnModel.isPivotMode();if(e&&e.length)return this.columnModel.getGridColumns(e);if(t&&!i){var o=this.gridOptionsService.is("treeData")?this.columnModel.getGridColumns([ve]):[];return o.concat(this.columnModel.getAllGridColumns()||[])}return this.columnModel.getAllDisplayedColumns()},e.prototype.recursivelyAddHeaderGroups=function(t,e,i){var o=[];t.forEach((function(t){var e=t;e.getChildren&&e.getChildren().forEach((function(t){return o.push(t)}))})),t.length>0&&t[0]instanceof fe&&this.doAddHeaderHeader(e,t,i),o&&o.length>0&&this.recursivelyAddHeaderGroups(o,e,i)},e.prototype.doAddHeaderHeader=function(t,e,i){var o=this,n=t.onNewHeaderGroupingRow(),r=0;e.forEach((function(t){var e,s=t;e=i?i({columnGroup:s,api:o.gridOptionsService.api,columnApi:o.gridOptionsService.columnApi,context:o.gridOptionsService.context}):o.columnModel.getDisplayNameForColumnGroup(s,"header");var a=s.getLeafColumns().reduce((function(t,e,i,o){var n=sr.last(t),r="open"===e.getColumnGroupShow();return r?n&&null==n[1]||(n=[i],t.push(n)):n&&null==n[1]&&(n[1]=i-1),i===o.length-1&&n&&null==n[1]&&(n[1]=i),t}),[]);n.onColumn(s,e||"",r++,s.getLeafColumns().length-1,a)}))},Nv([pt("displayedGroupCreator")],e.prototype,"displayedGroupCreator",void 0),Nv([pt("columnModel")],e.prototype,"columnModel",void 0),Nv([pt("rowModel")],e.prototype,"rowModel",void 0),Nv([pt("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),Nv([pt("selectionService")],e.prototype,"selectionService",void 0),Nv([pt("rowNodeSorter")],e.prototype,"rowNodeSorter",void 0),Nv([pt("sortController")],e.prototype,"sortController",void 0),e=Nv([ht("gridSerializer")],e),e}(le),Bv="30.2.1",Gv={version:Bv,moduleName:Z.CsvExportModule,beans:[Mv,Vv]},jv="\r\n",Hv=(function(){function t(){}t.createHeader=function(t){void 0===t&&(t={});var e="<?",i="?>",o=["version"];t.version||(t.version="1.0"),t.encoding&&o.push("encoding"),t.standalone&&o.push("standalone");var n=o.map((function(e){return e+'="'+t[e]+'"'})).join(" ");return e+"xml "+n+" "+i},t.createXml=function(t,e){var i=this,o="";t.properties&&(t.properties.prefixedAttributes&&t.properties.prefixedAttributes.forEach((function(t){Object.keys(t.map).forEach((function(n){o+=i.returnAttributeIfPopulated(t.prefix+n,t.map[n],e)}))})),t.properties.rawMap&&Object.keys(t.properties.rawMap).forEach((function(n){o+=i.returnAttributeIfPopulated(n,t.properties.rawMap[n],e)})));var n="<"+t.name+o;return t.children||null!=t.textNode?null!=t.textNode?n+">"+t.textNode+"</"+t.name+">"+jv:(n+=">"+jv,t.children&&t.children.forEach((function(t){n+=i.createXml(t,e)})),n+"</"+t.name+">"+jv):n+"/>"+jv},t.returnAttributeIfPopulated=function(t,e,i){if(!e&&""!==e&&0!==e)return"";var o=e;return"boolean"===typeof e&&i&&(o=i(e))," "+t+'="'+o+'"'}}(),function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}),$v=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),Wv=(function(){function t(){}t.addFolders=function(t){t.forEach(this.addFolder.bind(this))},t.addFolder=function(t){this.folders.push({path:t,created:new Date,isBase64:!1})},t.addFile=function(t,e,i){void 0===i&&(i=!1),this.files.push({path:t,created:new Date,content:e,isBase64:i})},t.getContent=function(t){void 0===t&&(t="application/zip");var e=this.buildFileStream(),i=this.buildUint8Array(e);return this.clearStream(),new Blob([i],{type:t})},t.clearStream=function(){this.folders=[],this.files=[]},t.buildFileStream=function(t){var e,i;void 0===t&&(t="");var o=this.folders.concat(this.files),n=o.length,r="",s=0,a=0;try{for(var l=Hv(o),u=l.next();!u.done;u=l.next()){var c=u.value,h=this.getHeader(c,s),p=h.fileHeader,d=h.folderHeader,f=h.content;s+=p.length+f.length,a+=d.length,t+=p+f,r+=d}}catch(y){e={error:y}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(e)throw e.error}}var g=this.buildFolderEnd(n,a,s);return t+r+g},t.getHeader=function(t,e){var i=t.content,o=t.path,n=t.created,r=t.isBase64,s=sr.utf8_encode,a=sr.decToHex,l=s(o),u=l!==o,c=this.convertTime(n),h=this.convertDate(n),p="";if(u){var d=a(1,1)+a(this.getFromCrc32Table(l),4)+l;p="up"+a(d.length,2)+d}var f=i?this.getConvertedContent(i,r):{size:0,content:""},g=f.size,y=f.content,_="\n\0"+(u?"\0\b":"\0\0")+"\0\0"+a(c,2)+a(h,2)+a(g?this.getFromCrc32Table(y):0,4)+a(g,4)+a(g,4)+a(l.length,2)+a(p.length,2),m="PK"+_+l+p,v="PK\0"+_+"\0\0\0\0\0\0"+(i?"\0\0\0\0":"\0\0\0")+a(e,4)+l+p;return{fileHeader:m,folderHeader:v,content:y||""}},t.getConvertedContent=function(t,e){return void 0===e&&(e=!1),e&&(t=t.split(";base64,")[1]),t=e?atob(t):t,{size:t.length,content:t}},t.buildFolderEnd=function(t,e,i){var o=sr.decToHex;return"PK\0\0\0\0"+o(t,2)+o(t,2)+o(e,4)+o(i,4)+"\0\0"},t.buildUint8Array=function(t){for(var e=new Uint8Array(t.length),i=0;i<e.length;i++)e[i]=t.charCodeAt(i);return e},t.getFromCrc32Table=function(t){if(!t.length)return 0;for(var e=t.length,i=new Uint8Array(e),o=0;o<e;o++)i[o]=t.charCodeAt(o);var n=-1,r=0,s=0,a=0;for(o=0;o<e;o++)r=i[o],s=255&(n^r),a=$v[s],n=n>>>8^a;return-1^n},t.convertTime=function(t){var e=t.getHours();return e<<=6,e|=t.getMinutes(),e<<=5,e|=t.getSeconds()/2,e},t.convertDate=function(t){var e=t.getFullYear()-1980;return e<<=4,e|=t.getMonth()+1,e<<=5,e|=t.getDate(),e},t.folders=[],t.files=[]}(),[fv,Ov,Gv]);nt.registerModules(Wv);var Uv=i(9242);class zv{static getComponentDefinition(t,e){let i;return i="string"===typeof t?this.searchForComponentInstance(e,t):{extends:(0,o.aZ)(Object.assign({},t))},i||console.error(`Could not find component with name of ${t}. Is it in Vue.components?`),i.extends?(i.extends.setup&&(i.setup=i.extends.setup),i.extends.props=this.addParamsToProps(i.extends.props)):i.props=this.addParamsToProps(i.props),i}static addParamsToProps(t){return!t||Array.isArray(t)&&-1===t.indexOf("params")?t=["params",...t||[]]:"object"!==typeof t||t.params||(t["params"]={type:Object}),t}static createAndMountComponent(t,e,i,o){const n=zv.getComponentDefinition(t,i);if(!n)return;const{vNode:r,destroy:s,el:a}=this.mount(n,{params:Object.freeze(e)},i,o||{});return{componentInstance:r.component.proxy,element:a,destroy:s}}static mount(t,e,i,n){let r=(0,o.Wm)(t,e);r.appContext=i.$.appContext,r.appContext.provides=Object.assign(Object.assign(Object.assign({},n),r.appContext.provides?r.appContext.provides:{}),i.$parent.$options.provide?i.$parent.$options.provide:{});let s=document.createElement("div");(0,Uv.sY)(r,s);const a=()=>{s&&(0,Uv.sY)(null,s),s=null,r=null};return{vNode:r,destroy:a,el:s}}static searchForComponentInstance(t,e,i=10,o=!1){let n=null,r=t.$parent,s=0;while(!n&&r&&r.$options&&++s<i){const t=r;n=t.$options&&t.$options.components?t.$options.components[e]:null,r=r.$parent}if(!n){const i=t.$.appContext.components;i&&i[e]&&(n=i[e])}return n||o?n:(console.error(`Could not find component with name of ${e}. Is it in Vue.components?`),null)}}class Kv extends Fm{constructor(t,e){super(),this.parent=t,Kv.provides||(Kv.provides=e)}createWrapper(t){const e=this;class i extends Yv{init(t){super.init(t)}hasMethod(t){return null!=o.getFrameworkComponentInstance()[t]}callMethod(t,e){const i=this.getFrameworkComponentInstance(),n=o.getFrameworkComponentInstance();return n[t].apply(i,e)}addMethod(t,e){o[t]=e}overrideProcessing(t){return e.parent.autoParamsRefresh&&"refresh"===t}processMethod(t,e){return"refresh"===t&&(this.getFrameworkComponentInstance().params=e[0]),this.hasMethod(t)?this.callMethod(t,e):"refresh"===t}createComponent(i){return e.createComponent(t,i)}}const o=new i;return o}createComponent(t,e){return zv.createAndMountComponent(t,e,this.parent,Kv.provides)}createMethodProxy(t,e,i){return function(){return t.overrideProcessing(e)?t.processMethod(e,arguments):t.hasMethod(e)?t.callMethod(e,arguments):(i&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}}destroy(){this.parent=null}}class Yv{getGui(){return this.element}destroy(){this.getFrameworkComponentInstance()&&"function"===typeof this.getFrameworkComponentInstance().destroy&&this.getFrameworkComponentInstance().destroy(),this.unmount()}getFrameworkComponentInstance(){return this.componentInstance}init(t){const{componentInstance:e,element:i,destroy:o}=this.createComponent(t);this.componentInstance=e,this.unmount=o,this.element=i.firstElementChild}}const qv=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Xv=t=>`on${t.charAt(0).toUpperCase()}${t.substring(1,t.length)}`,Qv=()=>{const t={},e=Ge.PUBLIC_EVENTS.map((t=>Xv(qv(t))));e.forEach((e=>t[e]=void 0));const i={};return Ge.ALL_PROPERTIES.filter((t=>"gridOptions"!=t)).forEach((e=>{t[e]={},i[e]={handler(t,i){this.processChanges(e,t,i)},deep:"popupParent"!==e&&"context"!==e}})),[t,i]};class Jv extends kg{constructor(t){super(),this.parent=t}frameworkComponent(t,e){let i=zv.searchForComponentInstance(this.parent,t,10,!0)?t:null;if(!i&&e&&e[t]){const o=e[t];i=zv.searchForComponentInstance(this.parent,o,10,!0)?o:null}return i}isFrameworkComponent(t){return"object"===typeof t}}const Zv=new Set(["rowDataChanged","rowDataUpdated","cellValueChanged","rowValueChanged"]),tb=new Set([ge.EVENT_GRID_PRE_DESTROYED]),eb="onUpdate:modelValue",ib="update:modelValue",[ob,nb]=Qv(),rb=(0,o.aZ)({render(){return(0,o.h)("div")},props:Object.assign({gridOptions:{type:Object,default:()=>({})},autoParamsRefresh:{type:Boolean,default:()=>!1},componentDependencies:{type:Array,default:()=>[]},plugins:[],modules:{type:Array,default:()=>[]},modelValue:{type:Array,default:void 0,required:!1}},ob),data(){return{gridCreated:!1,isDestroyed:!1,gridReadyFired:!1,emitRowModel:void 0}},watch:Object.assign({modelValue:{handler(t,e){this.processChanges("rowData",t,e)},deep:!0}},nb),methods:{globalEventListenerFactory(t){return(e,i)=>{if(this.isDestroyed)return;"gridReady"===e&&(this.gridReadyFired=!0);const o=tb.has(e);o&&!t||!o&&t||this.updateModelIfUsed(e)}},processChanges(t,e,i){if(this.gridCreated){if(this.skipChange(t,e,i))return;const o={};o[t]={currentValue:"rowData"===t?Object.isFrozen(e)?e:(0,n.Xl)((0,n.IU)(e)):e,previousValue:i},Ge.processOnChange(o,this.gridOptions.api)}},checkForBindingConflicts(){const t=this;(t.rowData||this.gridOptions.rowData)&&t.modelValue&&console.warn("AG Grid: Using both rowData and v-model. rowData will be ignored.")},getRowData(){const t=[];return this.gridOptions.api.forEachNode((e=>{t.push(e.data)})),t},updateModelIfUsed(t){this.gridReadyFired&&this.$attrs[eb]&&Zv.has(t)&&this.emitRowModel&&this.emitRowModel()},getRowDataBasedOnBindings(){const t=this,e=t.modelValue;return e||(t.rowData?t.rowData:t.gridOptions.rowData)},getProvides(){let t=(0,o.FN)(),e={};while(t)t&&t.provides&&(e=Object.assign(Object.assign({},e),t.provides)),t=t.parent;return e},skipChange(t,e,i){if(this.gridReadyFired&&"rowData"===t&&this.$attrs[eb]){if(e===i)return!0;if(e&&i){const t=e,o=i;if(t.length===o.length){for(let e=0;e<t.length;e++)if(t[e]!==o[e])return!1;return!0}}}return!1},debounce(t,e){let i;return()=>{const o=function(){t()};window.clearTimeout(i),i=window.setTimeout(o,e)}}},mounted(){this.emitRowModel=this.debounce((()=>{this.$emit(ib,Object.freeze(this.getRowData()))}),20);const t=this.getProvides(),e=new Kv(this,t),i=(0,n.Xl)(Ge.copyAttributesToGridOptions((0,n.IU)(this.gridOptions),this,!0));this.checkForBindingConflicts();const o=this.getRowDataBasedOnBindings();i.rowData=o?Object.isFrozen(o)?o:(0,n.Xl)((0,n.IU)(o)):o;const r={globalEventListener:this.globalEventListenerFactory().bind(this),globalSyncEventListener:this.globalEventListenerFactory(!0).bind(this),frameworkOverrides:new Jv(this),providedBeanInstances:{frameworkComponentWrapper:e},modules:this.modules};new Am(this.$el,i,r),this.gridCreated=!0},unmounted(){this.gridCreated&&(this.gridOptions.api&&this.gridOptions.api.destroy(),this.isDestroyed=!0)}})},7387:function(t,e,i){var o,n;i(560),
/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */
function(e,i){"use strict";"object"===typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!==typeof window?window:this,(function(i,r){"use strict";var s=[],a=Object.getPrototypeOf,l=s.slice,u=s.flat?function(t){return s.flat.call(t)}:function(t){return s.concat.apply([],t)},c=s.push,h=s.indexOf,p={},d=p.toString,f=p.hasOwnProperty,g=f.toString,y=g.call(Object),_={},m=function(t){return"function"===typeof t&&"number"!==typeof t.nodeType&&"function"!==typeof t.item},v=function(t){return null!=t&&t===t.window},b=i.document,C={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,i){i=i||b;var o,n,r=i.createElement("script");if(r.text=t,e)for(o in C)n=e[o]||e.getAttribute&&e.getAttribute(o),n&&r.setAttribute(o,n);i.head.appendChild(r).parentNode.removeChild(r)}function S(t){return null==t?t+"":"object"===typeof t||"function"===typeof t?p[d.call(t)]||"object":typeof t}var E="3.7.1",x=/HTML$/i,O=function(t,e){return new O.fn.init(t,e)};function R(t){var e=!!t&&"length"in t&&t.length,i=S(t);return!m(t)&&!v(t)&&("array"===i||0===e||"number"===typeof e&&e>0&&e-1 in t)}function I(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}O.fn=O.prototype={jquery:E,constructor:O,length:0,toArray:function(){return l.call(this)},get:function(t){return null==t?l.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=O.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return O.each(this,t)},map:function(t){return this.pushStack(O.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(O.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(O.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:s.sort,splice:s.splice},O.extend=O.fn.extend=function(){var t,e,i,o,n,r,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"===typeof s&&(u=s,s=arguments[a]||{},a++),"object"===typeof s||m(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)o=t[e],"__proto__"!==e&&s!==o&&(u&&o&&(O.isPlainObject(o)||(n=Array.isArray(o)))?(i=s[e],r=n&&!Array.isArray(i)?[]:n||O.isPlainObject(i)?i:{},n=!1,s[e]=O.extend(u,r,o)):void 0!==o&&(s[e]=o));return s},O.extend({expando:"jQuery"+(E+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==d.call(t))&&(e=a(t),!e||(i=f.call(e,"constructor")&&e.constructor,"function"===typeof i&&g.call(i)===y))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){w(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,o=0;if(R(t)){for(i=t.length;o<i;o++)if(!1===e.call(t[o],o,t[o]))break}else for(o in t)if(!1===e.call(t[o],o,t[o]))break;return t},text:function(t){var e,i="",o=0,n=t.nodeType;if(!n)while(e=t[o++])i+=O.text(e);return 1===n||11===n?t.textContent:9===n?t.documentElement.textContent:3===n||4===n?t.nodeValue:i},makeArray:function(t,e){var i=e||[];return null!=t&&(R(Object(t))?O.merge(i,"string"===typeof t?[t]:t):c.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:h.call(e,t,i)},isXMLDoc:function(t){var e=t&&t.namespaceURI,i=t&&(t.ownerDocument||t).documentElement;return!x.test(e||i&&i.nodeName||"HTML")},merge:function(t,e){for(var i=+e.length,o=0,n=t.length;o<i;o++)t[n++]=e[o];return t.length=n,t},grep:function(t,e,i){for(var o,n=[],r=0,s=t.length,a=!i;r<s;r++)o=!e(t[r],r),o!==a&&n.push(t[r]);return n},map:function(t,e,i){var o,n,r=0,s=[];if(R(t))for(o=t.length;r<o;r++)n=e(t[r],r,i),null!=n&&s.push(n);else for(r in t)n=e(t[r],r,i),null!=n&&s.push(n);return u(s)},guid:1,support:_}),"function"===typeof Symbol&&(O.fn[Symbol.iterator]=s[Symbol.iterator]),O.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){p["[object "+e+"]"]=e.toLowerCase()}));var T=s.pop,P=s.sort,D=s.splice,k="[\\x20\\t\\r\\n\\f]",A=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g");O.contains=function(t,e){var i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(t.contains?t.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))};var L=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function M(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}O.escapeSelector=function(t){return(t+"").replace(L,M)};var F=b,N=c;(function(){var t,e,o,n,r,a,u,c,p,d,g=N,y=O.expando,m=0,v=0,b=et(),C=et(),w=et(),S=et(),E=function(t,e){return t===e&&(r=!0),0},x="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="(?:\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",L="\\["+k+"*("+R+")(?:"+k+"*([*^$|!~]?=)"+k+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+k+"*\\]",M=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+L+")*)|.*)\\)|)",V=new RegExp(k+"+","g"),B=new RegExp("^"+k+"*,"+k+"*"),G=new RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),j=new RegExp(k+"|>"),H=new RegExp(M),$=new RegExp("^"+R+"$"),W={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+M),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:new RegExp("^(?:"+x+")$","i"),needsContext:new RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},U=/^(?:input|select|textarea|button)$/i,z=/^h\d$/i,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,q=new RegExp("\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\([^\\r\\n\\f])","g"),X=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},Q=function(){ut()},J=dt((function(t){return!0===t.disabled&&I(t,"fieldset")}),{dir:"parentNode",next:"legend"});function Z(){try{return a.activeElement}catch(t){}}try{g.apply(s=l.call(F.childNodes),F.childNodes),s[F.childNodes.length].nodeType}catch(wt){g={apply:function(t,e){N.apply(t,l.call(e))},call:function(t){N.apply(t,l.call(arguments,1))}}}function tt(t,e,i,o){var n,r,s,l,u,h,d,f=e&&e.ownerDocument,m=e?e.nodeType:9;if(i=i||[],"string"!==typeof t||!t||1!==m&&9!==m&&11!==m)return i;if(!o&&(ut(e),e=e||a,c)){if(11!==m&&(u=K.exec(t)))if(n=u[1]){if(9===m){if(!(s=e.getElementById(n)))return i;if(s.id===n)return g.call(i,s),i}else if(f&&(s=f.getElementById(n))&&tt.contains(e,s)&&s.id===n)return g.call(i,s),i}else{if(u[2])return g.apply(i,e.getElementsByTagName(t)),i;if((n=u[3])&&e.getElementsByClassName)return g.apply(i,e.getElementsByClassName(n)),i}if(!S[t+" "]&&(!p||!p.test(t))){if(d=t,f=e,1===m&&(j.test(t)||G.test(t))){f=Y.test(t)&&lt(e.parentNode)||e,f==e&&_.scope||((l=e.getAttribute("id"))?l=O.escapeSelector(l):e.setAttribute("id",l=y)),h=ht(t),r=h.length;while(r--)h[r]=(l?"#"+l:":scope")+" "+pt(h[r]);d=h.join(",")}try{return g.apply(i,f.querySelectorAll(d)),i}catch(v){S(t,!0)}finally{l===y&&e.removeAttribute("id")}}}return Ct(t.replace(A,"$1"),e,i,o)}function et(){var t=[];function i(o,n){return t.push(o+" ")>e.cacheLength&&delete i[t.shift()],i[o+" "]=n}return i}function it(t){return t[y]=!0,t}function ot(t){var e=a.createElement("fieldset");try{return!!t(e)}catch(wt){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function nt(t){return function(e){return I(e,"input")&&e.type===t}}function rt(t){return function(e){return(I(e,"input")||I(e,"button"))&&e.type===t}}function st(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&J(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function at(t){return it((function(e){return e=+e,it((function(i,o){var n,r=t([],i.length,e),s=r.length;while(s--)i[n=r[s]]&&(i[n]=!(o[n]=i[n]))}))}))}function lt(t){return t&&"undefined"!==typeof t.getElementsByTagName&&t}function ut(t){var i,o=t?t.ownerDocument||t:F;return o!=a&&9===o.nodeType&&o.documentElement?(a=o,u=a.documentElement,c=!O.isXMLDoc(a),d=u.matches||u.webkitMatchesSelector||u.msMatchesSelector,u.msMatchesSelector&&F!=a&&(i=a.defaultView)&&i.top!==i&&i.addEventListener("unload",Q),_.getById=ot((function(t){return u.appendChild(t).id=O.expando,!a.getElementsByName||!a.getElementsByName(O.expando).length})),_.disconnectedMatch=ot((function(t){return d.call(t,"*")})),_.scope=ot((function(){return a.querySelectorAll(":scope")})),_.cssHas=ot((function(){try{return a.querySelector(":has(*,:jqfake)"),!1}catch(wt){return!0}})),_.getById?(e.filter.ID=function(t){var e=t.replace(q,X);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if("undefined"!==typeof e.getElementById&&c){var i=e.getElementById(t);return i?[i]:[]}}):(e.filter.ID=function(t){var e=t.replace(q,X);return function(t){var i="undefined"!==typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},e.find.ID=function(t,e){if("undefined"!==typeof e.getElementById&&c){var i,o,n,r=e.getElementById(t);if(r){if(i=r.getAttributeNode("id"),i&&i.value===t)return[r];n=e.getElementsByName(t),o=0;while(r=n[o++])if(i=r.getAttributeNode("id"),i&&i.value===t)return[r]}return[]}}),e.find.TAG=function(t,e){return"undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if("undefined"!==typeof e.getElementsByClassName&&c)return e.getElementsByClassName(t)},p=[],ot((function(t){var e;u.appendChild(t).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||p.push("\\["+k+"*(?:value|"+x+")"),t.querySelectorAll("[id~="+y+"-]").length||p.push("~="),t.querySelectorAll("a#"+y+"+*").length||p.push(".#.+[+~]"),t.querySelectorAll(":checked").length||p.push(":checked"),e=a.createElement("input"),e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),u.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&p.push(":enabled",":disabled"),e=a.createElement("input"),e.setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||p.push("\\["+k+"*name"+k+"*="+k+"*(?:''|\"\")")})),_.cssHas||p.push(":has"),p=p.length&&new RegExp(p.join("|")),E=function(t,e){if(t===e)return r=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!_.sortDetached&&e.compareDocumentPosition(t)===i?t===a||t.ownerDocument==F&&tt.contains(F,t)?-1:e===a||e.ownerDocument==F&&tt.contains(F,e)?1:n?h.call(n,t)-h.call(n,e):0:4&i?-1:1)},a):a}for(t in tt.matches=function(t,e){return tt(t,null,null,e)},tt.matchesSelector=function(t,e){if(ut(t),c&&!S[e+" "]&&(!p||!p.test(e)))try{var i=d.call(t,e);if(i||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(wt){S(e,!0)}return tt(e,a,null,[t]).length>0},tt.contains=function(t,e){return(t.ownerDocument||t)!=a&&ut(t),O.contains(t,e)},tt.attr=function(t,i){(t.ownerDocument||t)!=a&&ut(t);var o=e.attrHandle[i.toLowerCase()],n=o&&f.call(e.attrHandle,i.toLowerCase())?o(t,i,!c):void 0;return void 0!==n?n:t.getAttribute(i)},tt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},O.uniqueSort=function(t){var e,i=[],o=0,s=0;if(r=!_.sortStable,n=!_.sortStable&&l.call(t,0),P.call(t,E),r){while(e=t[s++])e===t[s]&&(o=i.push(s));while(o--)D.call(t,i[o],1)}return n=null,t},O.fn.uniqueSort=function(){return this.pushStack(O.uniqueSort(l.apply(this)))},e=O.expr={cacheLength:50,createPseudo:it,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(q,X),t[3]=(t[3]||t[4]||t[5]||"").replace(q,X),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||tt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&tt.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return W.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&H.test(i)&&(e=ht(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(q,X).toLowerCase();return"*"===t?function(){return!0}:function(t){return I(t,e)}},CLASS:function(t){var e=b[t+" "];return e||(e=new RegExp("(^|"+k+")"+t+"("+k+"|$)"))&&b(t,(function(t){return e.test("string"===typeof t.className&&t.className||"undefined"!==typeof t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(o){var n=tt.attr(o,t);return null==n?"!="===e:!e||(n+="","="===e?n===i:"!="===e?n!==i:"^="===e?i&&0===n.indexOf(i):"*="===e?i&&n.indexOf(i)>-1:"$="===e?i&&n.slice(-i.length)===i:"~="===e?(" "+n.replace(V," ")+" ").indexOf(i)>-1:"|="===e&&(n===i||n.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,o,n){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===o&&0===n?function(t){return!!t.parentNode}:function(e,i,l){var u,c,h,p,d,f=r!==s?"nextSibling":"previousSibling",g=e.parentNode,_=a&&e.nodeName.toLowerCase(),v=!l&&!a,b=!1;if(g){if(r){while(f){h=e;while(h=h[f])if(a?I(h,_):1===h.nodeType)return!1;d=f="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?g.firstChild:g.lastChild],s&&v){c=g[y]||(g[y]={}),u=c[t]||[],p=u[0]===m&&u[1],b=p&&u[2],h=p&&g.childNodes[p];while(h=++p&&h&&h[f]||(b=p=0)||d.pop())if(1===h.nodeType&&++b&&h===e){c[t]=[m,p,b];break}}else if(v&&(c=e[y]||(e[y]={}),u=c[t]||[],p=u[0]===m&&u[1],b=p),!1===b)while(h=++p&&h&&h[f]||(b=p=0)||d.pop())if((a?I(h,_):1===h.nodeType)&&++b&&(v&&(c=h[y]||(h[y]={}),c[t]=[m,b]),h===e))break;return b-=n,b===o||b%o===0&&b/o>=0}}},PSEUDO:function(t,i){var o,n=e.pseudos[t]||e.setFilters[t.toLowerCase()]||tt.error("unsupported pseudo: "+t);return n[y]?n(i):n.length>1?(o=[t,t,"",i],e.setFilters.hasOwnProperty(t.toLowerCase())?it((function(t,e){var o,r=n(t,i),s=r.length;while(s--)o=h.call(t,r[s]),t[o]=!(e[o]=r[s])})):function(t){return n(t,0,o)}):n}},pseudos:{not:it((function(t){var e=[],i=[],o=bt(t.replace(A,"$1"));return o[y]?it((function(t,e,i,n){var r,s=o(t,null,n,[]),a=t.length;while(a--)(r=s[a])&&(t[a]=!(e[a]=r))})):function(t,n,r){return e[0]=t,o(e,null,r,i),e[0]=null,!i.pop()}})),has:it((function(t){return function(e){return tt(t,e).length>0}})),contains:it((function(t){return t=t.replace(q,X),function(e){return(e.textContent||O.text(e)).indexOf(t)>-1}})),lang:it((function(t){return $.test(t||"")||tt.error("unsupported lang: "+t),t=t.replace(q,X).toLowerCase(),function(e){var i;do{if(i=c?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===u},focus:function(t){return t===Z()&&a.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:st(!1),disabled:st(!0),checked:function(t){return I(t,"input")&&!!t.checked||I(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return z.test(t.nodeName)},input:function(t){return U.test(t.nodeName)},button:function(t){return I(t,"input")&&"button"===t.type||I(t,"button")},text:function(t){var e;return I(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:at((function(){return[0]})),last:at((function(t,e){return[e-1]})),eq:at((function(t,e,i){return[i<0?i+e:i]})),even:at((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:at((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:at((function(t,e,i){var o;for(o=i<0?i+e:i>e?e:i;--o>=0;)t.push(o);return t})),gt:at((function(t,e,i){for(var o=i<0?i+e:i;++o<e;)t.push(o);return t}))}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=nt(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=rt(t);function ct(){}function ht(t,i){var o,n,r,s,a,l,u,c=C[t+" "];if(c)return i?0:c.slice(0);a=t,l=[],u=e.preFilter;while(a){for(s in o&&!(n=B.exec(a))||(n&&(a=a.slice(n[0].length)||a),l.push(r=[])),o=!1,(n=G.exec(a))&&(o=n.shift(),r.push({value:o,type:n[0].replace(A," ")}),a=a.slice(o.length)),e.filter)!(n=W[s].exec(a))||u[s]&&!(n=u[s](n))||(o=n.shift(),r.push({value:o,type:s,matches:n}),a=a.slice(o.length));if(!o)break}return i?a.length:a?tt.error(t):C(t,l).slice(0)}function pt(t){for(var e=0,i=t.length,o="";e<i;e++)o+=t[e].value;return o}function dt(t,e,i){var o=e.dir,n=e.next,r=n||o,s=i&&"parentNode"===r,a=v++;return e.first?function(e,i,n){while(e=e[o])if(1===e.nodeType||s)return t(e,i,n);return!1}:function(e,i,l){var u,c,h=[m,a];if(l){while(e=e[o])if((1===e.nodeType||s)&&t(e,i,l))return!0}else while(e=e[o])if(1===e.nodeType||s)if(c=e[y]||(e[y]={}),n&&I(e,n))e=e[o]||e;else{if((u=c[r])&&u[0]===m&&u[1]===a)return h[2]=u[2];if(c[r]=h,h[2]=t(e,i,l))return!0}return!1}}function ft(t){return t.length>1?function(e,i,o){var n=t.length;while(n--)if(!t[n](e,i,o))return!1;return!0}:t[0]}function gt(t,e,i){for(var o=0,n=e.length;o<n;o++)tt(t,e[o],i);return i}function yt(t,e,i,o,n){for(var r,s=[],a=0,l=t.length,u=null!=e;a<l;a++)(r=t[a])&&(i&&!i(r,o,n)||(s.push(r),u&&e.push(a)));return s}function _t(t,e,i,o,n,r){return o&&!o[y]&&(o=_t(o)),n&&!n[y]&&(n=_t(n,r)),it((function(r,s,a,l){var u,c,p,d,f=[],y=[],_=s.length,m=r||gt(e||"*",a.nodeType?[a]:a,[]),v=!t||!r&&e?m:yt(m,f,t,a,l);if(i?(d=n||(r?t:_||o)?[]:s,i(v,d,a,l)):d=v,o){u=yt(d,y),o(u,[],a,l),c=u.length;while(c--)(p=u[c])&&(d[y[c]]=!(v[y[c]]=p))}if(r){if(n||t){if(n){u=[],c=d.length;while(c--)(p=d[c])&&u.push(v[c]=p);n(null,d=[],u,l)}c=d.length;while(c--)(p=d[c])&&(u=n?h.call(r,p):f[c])>-1&&(r[u]=!(s[u]=p))}}else d=yt(d===s?d.splice(_,d.length):d),n?n(null,s,d,l):g.apply(s,d)}))}function mt(t){for(var i,n,r,s=t.length,a=e.relative[t[0].type],l=a||e.relative[" "],u=a?1:0,c=dt((function(t){return t===i}),l,!0),p=dt((function(t){return h.call(i,t)>-1}),l,!0),d=[function(t,e,n){var r=!a&&(n||e!=o)||((i=e).nodeType?c(t,e,n):p(t,e,n));return i=null,r}];u<s;u++)if(n=e.relative[t[u].type])d=[dt(ft(d),n)];else{if(n=e.filter[t[u].type].apply(null,t[u].matches),n[y]){for(r=++u;r<s;r++)if(e.relative[t[r].type])break;return _t(u>1&&ft(d),u>1&&pt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(A,"$1"),n,u<r&&mt(t.slice(u,r)),r<s&&mt(t=t.slice(r)),r<s&&pt(t))}d.push(n)}return ft(d)}function vt(t,i){var n=i.length>0,r=t.length>0,s=function(s,l,u,h,p){var d,f,y,_=0,v="0",b=s&&[],C=[],w=o,S=s||r&&e.find.TAG("*",p),E=m+=null==w?1:Math.random()||.1,x=S.length;for(p&&(o=l==a||l||p);v!==x&&null!=(d=S[v]);v++){if(r&&d){f=0,l||d.ownerDocument==a||(ut(d),u=!c);while(y=t[f++])if(y(d,l||a,u)){g.call(h,d);break}p&&(m=E)}n&&((d=!y&&d)&&_--,s&&b.push(d))}if(_+=v,n&&v!==_){f=0;while(y=i[f++])y(b,C,l,u);if(s){if(_>0)while(v--)b[v]||C[v]||(C[v]=T.call(h));C=yt(C)}g.apply(h,C),p&&!s&&C.length>0&&_+i.length>1&&O.uniqueSort(h)}return p&&(m=E,o=w),b};return n?it(s):s}function bt(t,e){var i,o=[],n=[],r=w[t+" "];if(!r){e||(e=ht(t)),i=e.length;while(i--)r=mt(e[i]),r[y]?o.push(r):n.push(r);r=w(t,vt(n,o)),r.selector=t}return r}function Ct(t,i,o,n){var r,s,a,l,u,h="function"===typeof t&&t,p=!n&&ht(t=h.selector||t);if(o=o||[],1===p.length){if(s=p[0]=p[0].slice(0),s.length>2&&"ID"===(a=s[0]).type&&9===i.nodeType&&c&&e.relative[s[1].type]){if(i=(e.find.ID(a.matches[0].replace(q,X),i)||[])[0],!i)return o;h&&(i=i.parentNode),t=t.slice(s.shift().value.length)}r=W.needsContext.test(t)?0:s.length;while(r--){if(a=s[r],e.relative[l=a.type])break;if((u=e.find[l])&&(n=u(a.matches[0].replace(q,X),Y.test(s[0].type)&&lt(i.parentNode)||i))){if(s.splice(r,1),t=n.length&&pt(s),!t)return g.apply(o,n),o;break}}}return(h||bt(t,p))(n,i,!c,o,!i||Y.test(t)&&lt(i.parentNode)||i),o}ct.prototype=e.filters=e.pseudos,e.setFilters=new ct,_.sortStable=y.split("").sort(E).join("")===y,ut(),_.sortDetached=ot((function(t){return 1&t.compareDocumentPosition(a.createElement("fieldset"))})),O.find=tt,O.expr[":"]=O.expr.pseudos,O.unique=O.uniqueSort,tt.compile=bt,tt.select=Ct,tt.setDocument=ut,tt.tokenize=ht,tt.escape=O.escapeSelector,tt.getText=O.text,tt.isXML=O.isXMLDoc,tt.selectors=O.expr,tt.support=O.support,tt.uniqueSort=O.uniqueSort})();var V=function(t,e,i){var o=[],n=void 0!==i;while((t=t[e])&&9!==t.nodeType)if(1===t.nodeType){if(n&&O(t).is(i))break;o.push(t)}return o},B=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},G=O.expr.match.needsContext,j=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function H(t,e,i){return m(e)?O.grep(t,(function(t,o){return!!e.call(t,o,t)!==i})):e.nodeType?O.grep(t,(function(t){return t===e!==i})):"string"!==typeof e?O.grep(t,(function(t){return h.call(e,t)>-1!==i})):O.filter(e,t,i)}O.filter=function(t,e,i){var o=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===o.nodeType?O.find.matchesSelector(o,t)?[o]:[]:O.find.matches(t,O.grep(e,(function(t){return 1===t.nodeType})))},O.fn.extend({find:function(t){var e,i,o=this.length,n=this;if("string"!==typeof t)return this.pushStack(O(t).filter((function(){for(e=0;e<o;e++)if(O.contains(n[e],this))return!0})));for(i=this.pushStack([]),e=0;e<o;e++)O.find(t,n[e],i);return o>1?O.uniqueSort(i):i},filter:function(t){return this.pushStack(H(this,t||[],!1))},not:function(t){return this.pushStack(H(this,t||[],!0))},is:function(t){return!!H(this,"string"===typeof t&&G.test(t)?O(t):t||[],!1).length}});var $,W=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,U=O.fn.init=function(t,e,i){var o,n;if(!t)return this;if(i=i||$,"string"===typeof t){if(o="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:W.exec(t),!o||!o[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(o[1]){if(e=e instanceof O?e[0]:e,O.merge(this,O.parseHTML(o[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),j.test(o[1])&&O.isPlainObject(e))for(o in e)m(this[o])?this[o](e[o]):this.attr(o,e[o]);return this}return n=b.getElementById(o[2]),n&&(this[0]=n,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==i.ready?i.ready(t):t(O):O.makeArray(t,this)};U.prototype=O.fn,$=O(b);var z=/^(?:parents|prev(?:Until|All))/,K={children:!0,contents:!0,next:!0,prev:!0};function Y(t,e){while((t=t[e])&&1!==t.nodeType);return t}O.fn.extend({has:function(t){var e=O(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(O.contains(this,e[t]))return!0}))},closest:function(t,e){var i,o=0,n=this.length,r=[],s="string"!==typeof t&&O(t);if(!G.test(t))for(;o<n;o++)for(i=this[o];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&O.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(r.length>1?O.uniqueSort(r):r)},index:function(t){return t?"string"===typeof t?h.call(O(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(O.uniqueSort(O.merge(this.get(),O(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),O.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return V(t,"parentNode")},parentsUntil:function(t,e,i){return V(t,"parentNode",i)},next:function(t){return Y(t,"nextSibling")},prev:function(t){return Y(t,"previousSibling")},nextAll:function(t){return V(t,"nextSibling")},prevAll:function(t){return V(t,"previousSibling")},nextUntil:function(t,e,i){return V(t,"nextSibling",i)},prevUntil:function(t,e,i){return V(t,"previousSibling",i)},siblings:function(t){return B((t.parentNode||{}).firstChild,t)},children:function(t){return B(t.firstChild)},contents:function(t){return null!=t.contentDocument&&a(t.contentDocument)?t.contentDocument:(I(t,"template")&&(t=t.content||t),O.merge([],t.childNodes))}},(function(t,e){O.fn[t]=function(i,o){var n=O.map(this,e,i);return"Until"!==t.slice(-5)&&(o=i),o&&"string"===typeof o&&(n=O.filter(o,n)),this.length>1&&(K[t]||O.uniqueSort(n),z.test(t)&&n.reverse()),this.pushStack(n)}}));var q=/[^\x20\t\r\n\f]+/g;function X(t){var e={};return O.each(t.match(q)||[],(function(t,i){e[i]=!0})),e}function Q(t){return t}function J(t){throw t}function Z(t,e,i,o){var n;try{t&&m(n=t.promise)?n.call(t).done(e).fail(i):t&&m(n=t.then)?n.call(t,e,i):e.apply(void 0,[t].slice(o))}catch(t){i.apply(void 0,[t])}}O.Callbacks=function(t){t="string"===typeof t?X(t):O.extend({},t);var e,i,o,n,r=[],s=[],a=-1,l=function(){for(n=n||t.once,o=e=!0;s.length;a=-1){i=s.shift();while(++a<r.length)!1===r[a].apply(i[0],i[1])&&t.stopOnFalse&&(a=r.length,i=!1)}t.memory||(i=!1),e=!1,n&&(r=i?[]:"")},u={add:function(){return r&&(i&&!e&&(a=r.length-1,s.push(i)),function e(i){O.each(i,(function(i,o){m(o)?t.unique&&u.has(o)||r.push(o):o&&o.length&&"string"!==S(o)&&e(o)}))}(arguments),i&&!e&&l()),this},remove:function(){return O.each(arguments,(function(t,e){var i;while((i=O.inArray(e,r,i))>-1)r.splice(i,1),i<=a&&a--})),this},has:function(t){return t?O.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return n=s=[],r=i="",this},disabled:function(){return!r},lock:function(){return n=s=[],i||e||(r=i=""),this},locked:function(){return!!n},fireWith:function(t,i){return n||(i=i||[],i=[t,i.slice?i.slice():i],s.push(i),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},O.extend({Deferred:function(t){var e=[["notify","progress",O.Callbacks("memory"),O.Callbacks("memory"),2],["resolve","done",O.Callbacks("once memory"),O.Callbacks("once memory"),0,"resolved"],["reject","fail",O.Callbacks("once memory"),O.Callbacks("once memory"),1,"rejected"]],o="pending",n={state:function(){return o},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return n.then(null,t)},pipe:function(){var t=arguments;return O.Deferred((function(i){O.each(e,(function(e,o){var n=m(t[o[4]])&&t[o[4]];r[o[1]]((function(){var t=n&&n.apply(this,arguments);t&&m(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[o[0]+"With"](this,n?[t]:arguments)}))})),t=null})).promise()},then:function(t,o,n){var r=0;function s(t,e,o,n){return function(){var a=this,l=arguments,u=function(){var i,u;if(!(t<r)){if(i=o.apply(a,l),i===e.promise())throw new TypeError("Thenable self-resolution");u=i&&("object"===typeof i||"function"===typeof i)&&i.then,m(u)?n?u.call(i,s(r,e,Q,n),s(r,e,J,n)):(r++,u.call(i,s(r,e,Q,n),s(r,e,J,n),s(r,e,Q,e.notifyWith))):(o!==Q&&(a=void 0,l=[i]),(n||e.resolveWith)(a,l))}},c=n?u:function(){try{u()}catch(i){O.Deferred.exceptionHook&&O.Deferred.exceptionHook(i,c.error),t+1>=r&&(o!==J&&(a=void 0,l=[i]),e.rejectWith(a,l))}};t?c():(O.Deferred.getErrorHook?c.error=O.Deferred.getErrorHook():O.Deferred.getStackHook&&(c.error=O.Deferred.getStackHook()),i.setTimeout(c))}}return O.Deferred((function(i){e[0][3].add(s(0,i,m(n)?n:Q,i.notifyWith)),e[1][3].add(s(0,i,m(t)?t:Q)),e[2][3].add(s(0,i,m(o)?o:J))})).promise()},promise:function(t){return null!=t?O.extend(t,n):n}},r={};return O.each(e,(function(t,i){var s=i[2],a=i[5];n[i[1]]=s.add,a&&s.add((function(){o=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(i[3].fire),r[i[0]]=function(){return r[i[0]+"With"](this===r?void 0:this,arguments),this},r[i[0]+"With"]=s.fireWith})),n.promise(r),t&&t.call(r,r),r},when:function(t){var e=arguments.length,i=e,o=Array(i),n=l.call(arguments),r=O.Deferred(),s=function(t){return function(i){o[t]=this,n[t]=arguments.length>1?l.call(arguments):i,--e||r.resolveWith(o,n)}};if(e<=1&&(Z(t,r.done(s(i)).resolve,r.reject,!e),"pending"===r.state()||m(n[i]&&n[i].then)))return r.then();while(i--)Z(n[i],s(i),r.reject);return r.promise()}});var tt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;O.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&tt.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},O.readyException=function(t){i.setTimeout((function(){throw t}))};var et=O.Deferred();function it(){b.removeEventListener("DOMContentLoaded",it),i.removeEventListener("load",it),O.ready()}O.fn.ready=function(t){return et.then(t).catch((function(t){O.readyException(t)})),this},O.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--O.readyWait:O.isReady)||(O.isReady=!0,!0!==t&&--O.readyWait>0||et.resolveWith(b,[O]))}}),O.ready.then=et.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?i.setTimeout(O.ready):(b.addEventListener("DOMContentLoaded",it),i.addEventListener("load",it));var ot=function(t,e,i,o,n,r,s){var a=0,l=t.length,u=null==i;if("object"===S(i))for(a in n=!0,i)ot(t,e,a,i[a],!0,r,s);else if(void 0!==o&&(n=!0,m(o)||(s=!0),u&&(s?(e.call(t,o),e=null):(u=e,e=function(t,e,i){return u.call(O(t),i)})),e))for(;a<l;a++)e(t[a],i,s?o:o.call(t[a],a,e(t[a],i)));return n?t:u?e.call(t):l?e(t[0],i):r},nt=/^-ms-/,rt=/-([a-z])/g;function st(t,e){return e.toUpperCase()}function at(t){return t.replace(nt,"ms-").replace(rt,st)}var lt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function ut(){this.expando=O.expando+ut.uid++}ut.uid=1,ut.prototype={cache:function(t){var e=t[this.expando];return e||(e={},lt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var o,n=this.cache(t);if("string"===typeof e)n[at(e)]=i;else for(o in e)n[at(o)]=e[o];return n},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][at(e)]},access:function(t,e,i){return void 0===e||e&&"string"===typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,o=t[this.expando];if(void 0!==o){if(void 0!==e){Array.isArray(e)?e=e.map(at):(e=at(e),e=e in o?[e]:e.match(q)||[]),i=e.length;while(i--)delete o[e[i]]}(void 0===e||O.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!O.isEmptyObject(e)}};var ct=new ut,ht=new ut,pt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,dt=/[A-Z]/g;function ft(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:pt.test(t)?JSON.parse(t):t)}function gt(t,e,i){var o;if(void 0===i&&1===t.nodeType)if(o="data-"+e.replace(dt,"-$&").toLowerCase(),i=t.getAttribute(o),"string"===typeof i){try{i=ft(i)}catch(n){}ht.set(t,e,i)}else i=void 0;return i}O.extend({hasData:function(t){return ht.hasData(t)||ct.hasData(t)},data:function(t,e,i){return ht.access(t,e,i)},removeData:function(t,e){ht.remove(t,e)},_data:function(t,e,i){return ct.access(t,e,i)},_removeData:function(t,e){ct.remove(t,e)}}),O.fn.extend({data:function(t,e){var i,o,n,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(n=ht.get(r),1===r.nodeType&&!ct.get(r,"hasDataAttrs"))){i=s.length;while(i--)s[i]&&(o=s[i].name,0===o.indexOf("data-")&&(o=at(o.slice(5)),gt(r,o,n[o])));ct.set(r,"hasDataAttrs",!0)}return n}return"object"===typeof t?this.each((function(){ht.set(this,t)})):ot(this,(function(e){var i;if(r&&void 0===e)return i=ht.get(r,t),void 0!==i?i:(i=gt(r,t),void 0!==i?i:void 0);this.each((function(){ht.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){ht.remove(this,t)}))}}),O.extend({queue:function(t,e,i){var o;if(t)return e=(e||"fx")+"queue",o=ct.get(t,e),i&&(!o||Array.isArray(i)?o=ct.access(t,e,O.makeArray(i)):o.push(i)),o||[]},dequeue:function(t,e){e=e||"fx";var i=O.queue(t,e),o=i.length,n=i.shift(),r=O._queueHooks(t,e),s=function(){O.dequeue(t,e)};"inprogress"===n&&(n=i.shift(),o--),n&&("fx"===e&&i.unshift("inprogress"),delete r.stop,n.call(t,s,r)),!o&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ct.get(t,i)||ct.access(t,i,{empty:O.Callbacks("once memory").add((function(){ct.remove(t,[e+"queue",i])}))})}}),O.fn.extend({queue:function(t,e){var i=2;return"string"!==typeof t&&(e=t,t="fx",i--),arguments.length<i?O.queue(this[0],t):void 0===e?this:this.each((function(){var i=O.queue(this,t,e);O._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&O.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){O.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,o=1,n=O.Deferred(),r=this,s=this.length,a=function(){--o||n.resolveWith(r,[r])};"string"!==typeof t&&(e=t,t=void 0),t=t||"fx";while(s--)i=ct.get(r[s],t+"queueHooks"),i&&i.empty&&(o++,i.empty.add(a));return a(),n.promise(e)}});var yt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_t=new RegExp("^(?:([+-])=|)("+yt+")([a-z%]*)$","i"),mt=["Top","Right","Bottom","Left"],vt=b.documentElement,bt=function(t){return O.contains(t.ownerDocument,t)},Ct={composed:!0};vt.getRootNode&&(bt=function(t){return O.contains(t.ownerDocument,t)||t.getRootNode(Ct)===t.ownerDocument});var wt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&bt(t)&&"none"===O.css(t,"display")};function St(t,e,i,o){var n,r,s=20,a=o?function(){return o.cur()}:function(){return O.css(t,e,"")},l=a(),u=i&&i[3]||(O.cssNumber[e]?"":"px"),c=t.nodeType&&(O.cssNumber[e]||"px"!==u&&+l)&&_t.exec(O.css(t,e));if(c&&c[3]!==u){l/=2,u=u||c[3],c=+l||1;while(s--)O.style(t,e,c+u),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),c/=r;c*=2,O.style(t,e,c+u),i=i||[]}return i&&(c=+c||+l||0,n=i[1]?c+(i[1]+1)*i[2]:+i[2],o&&(o.unit=u,o.start=c,o.end=n)),n}var Et={};function xt(t){var e,i=t.ownerDocument,o=t.nodeName,n=Et[o];return n||(e=i.body.appendChild(i.createElement(o)),n=O.css(e,"display"),e.parentNode.removeChild(e),"none"===n&&(n="block"),Et[o]=n,n)}function Ot(t,e){for(var i,o,n=[],r=0,s=t.length;r<s;r++)o=t[r],o.style&&(i=o.style.display,e?("none"===i&&(n[r]=ct.get(o,"display")||null,n[r]||(o.style.display="")),""===o.style.display&&wt(o)&&(n[r]=xt(o))):"none"!==i&&(n[r]="none",ct.set(o,"display",i)));for(r=0;r<s;r++)null!=n[r]&&(t[r].style.display=n[r]);return t}O.fn.extend({show:function(){return Ot(this,!0)},hide:function(){return Ot(this)},toggle:function(t){return"boolean"===typeof t?t?this.show():this.hide():this.each((function(){wt(this)?O(this).show():O(this).hide()}))}});var Rt=/^(?:checkbox|radio)$/i,It=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Tt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var t=b.createDocumentFragment(),e=t.appendChild(b.createElement("div")),i=b.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),_.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",_.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",_.option=!!e.lastChild})();var Pt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Dt(t,e){var i;return i="undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!==typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&I(t,e)?O.merge([t],i):i}function kt(t,e){for(var i=0,o=t.length;i<o;i++)ct.set(t[i],"globalEval",!e||ct.get(e[i],"globalEval"))}Pt.tbody=Pt.tfoot=Pt.colgroup=Pt.caption=Pt.thead,Pt.th=Pt.td,_.option||(Pt.optgroup=Pt.option=[1,"<select multiple='multiple'>","</select>"]);var At=/<|&#?\w+;/;function Lt(t,e,i,o,n){for(var r,s,a,l,u,c,h=e.createDocumentFragment(),p=[],d=0,f=t.length;d<f;d++)if(r=t[d],r||0===r)if("object"===S(r))O.merge(p,r.nodeType?[r]:r);else if(At.test(r)){s=s||h.appendChild(e.createElement("div")),a=(It.exec(r)||["",""])[1].toLowerCase(),l=Pt[a]||Pt._default,s.innerHTML=l[1]+O.htmlPrefilter(r)+l[2],c=l[0];while(c--)s=s.lastChild;O.merge(p,s.childNodes),s=h.firstChild,s.textContent=""}else p.push(e.createTextNode(r));h.textContent="",d=0;while(r=p[d++])if(o&&O.inArray(r,o)>-1)n&&n.push(r);else if(u=bt(r),s=Dt(h.appendChild(r),"script"),u&&kt(s),i){c=0;while(r=s[c++])Tt.test(r.type||"")&&i.push(r)}return h}var Mt=/^([^.]*)(?:\.(.+)|)/;function Ft(){return!0}function Nt(){return!1}function Vt(t,e,i,o,n,r){var s,a;if("object"===typeof e){for(a in"string"!==typeof i&&(o=o||i,i=void 0),e)Vt(t,a,i,o,e[a],r);return t}if(null==o&&null==n?(n=i,o=i=void 0):null==n&&("string"===typeof i?(n=o,o=void 0):(n=o,o=i,i=void 0)),!1===n)n=Nt;else if(!n)return t;return 1===r&&(s=n,n=function(t){return O().off(t),s.apply(this,arguments)},n.guid=s.guid||(s.guid=O.guid++)),t.each((function(){O.event.add(this,e,n,o,i)}))}function Bt(t,e,i){i?(ct.set(t,e,!1),O.event.add(t,e,{namespace:!1,handler:function(t){var i,o=ct.get(this,e);if(1&t.isTrigger&&this[e]){if(o)(O.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=l.call(arguments),ct.set(this,e,o),this[e](),i=ct.get(this,e),ct.set(this,e,!1),o!==i)return t.stopImmediatePropagation(),t.preventDefault(),i}else o&&(ct.set(this,e,O.event.trigger(o[0],o.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Ft)}})):void 0===ct.get(t,e)&&O.event.add(t,e,Ft)}O.event={global:{},add:function(t,e,i,o,n){var r,s,a,l,u,c,h,p,d,f,g,y=ct.get(t);if(lt(t)){i.handler&&(r=i,i=r.handler,n=r.selector),n&&O.find.matchesSelector(vt,n),i.guid||(i.guid=O.guid++),(l=y.events)||(l=y.events=Object.create(null)),(s=y.handle)||(s=y.handle=function(e){return"undefined"!==typeof O&&O.event.triggered!==e.type?O.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(q)||[""],u=e.length;while(u--)a=Mt.exec(e[u])||[],d=g=a[1],f=(a[2]||"").split(".").sort(),d&&(h=O.event.special[d]||{},d=(n?h.delegateType:h.bindType)||d,h=O.event.special[d]||{},c=O.extend({type:d,origType:g,data:o,handler:i,guid:i.guid,selector:n,needsContext:n&&O.expr.match.needsContext.test(n),namespace:f.join(".")},r),(p=l[d])||(p=l[d]=[],p.delegateCount=0,h.setup&&!1!==h.setup.call(t,o,f,s)||t.addEventListener&&t.addEventListener(d,s)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),n?p.splice(p.delegateCount++,0,c):p.push(c),O.event.global[d]=!0)}},remove:function(t,e,i,o,n){var r,s,a,l,u,c,h,p,d,f,g,y=ct.hasData(t)&&ct.get(t);if(y&&(l=y.events)){e=(e||"").match(q)||[""],u=e.length;while(u--)if(a=Mt.exec(e[u])||[],d=g=a[1],f=(a[2]||"").split(".").sort(),d){h=O.event.special[d]||{},d=(o?h.delegateType:h.bindType)||d,p=l[d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=p.length;while(r--)c=p[r],!n&&g!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||o&&o!==c.selector&&("**"!==o||!c.selector)||(p.splice(r,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(t,c));s&&!p.length&&(h.teardown&&!1!==h.teardown.call(t,f,y.handle)||O.removeEvent(t,d,y.handle),delete l[d])}else for(d in l)O.event.remove(t,d+e[u],i,o,!0);O.isEmptyObject(l)&&ct.remove(t,"handle events")}},dispatch:function(t){var e,i,o,n,r,s,a=new Array(arguments.length),l=O.event.fix(t),u=(ct.get(this,"events")||Object.create(null))[l.type]||[],c=O.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){s=O.event.handlers.call(this,l,u),e=0;while((n=s[e++])&&!l.isPropagationStopped()){l.currentTarget=n.elem,i=0;while((r=n.handlers[i++])&&!l.isImmediatePropagationStopped())l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,o=((O.event.special[r.origType]||{}).handle||r.handler).apply(n.elem,a),void 0!==o&&!1===(l.result=o)&&(l.preventDefault(),l.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(t,e){var i,o,n,r,s,a=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&t.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(r=[],s={},i=0;i<l;i++)o=e[i],n=o.selector+" ",void 0===s[n]&&(s[n]=o.needsContext?O(n,this).index(u)>-1:O.find(n,this,null,[u]).length),s[n]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return u=this,l<e.length&&a.push({elem:u,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(O.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[O.expando]?t:new O.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Rt.test(e.type)&&e.click&&I(e,"input")&&Bt(e,"click",!0),!1},trigger:function(t){var e=this||t;return Rt.test(e.type)&&e.click&&I(e,"input")&&Bt(e,"click"),!0},_default:function(t){var e=t.target;return Rt.test(e.type)&&e.click&&I(e,"input")&&ct.get(e,"click")||I(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},O.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},O.Event=function(t,e){if(!(this instanceof O.Event))return new O.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Ft:Nt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&O.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[O.expando]=!0},O.Event.prototype={constructor:O.Event,isDefaultPrevented:Nt,isPropagationStopped:Nt,isImmediatePropagationStopped:Nt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Ft,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Ft,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Ft,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},O.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},O.event.addProp),O.each({focus:"focusin",blur:"focusout"},(function(t,e){function i(t){if(b.documentMode){var i=ct.get(this,"handle"),o=O.event.fix(t);o.type="focusin"===t.type?"focus":"blur",o.isSimulated=!0,i(t),o.target===o.currentTarget&&i(o)}else O.event.simulate(e,t.target,O.event.fix(t))}O.event.special[t]={setup:function(){var o;if(Bt(this,t,!0),!b.documentMode)return!1;o=ct.get(this,e),o||this.addEventListener(e,i),ct.set(this,e,(o||0)+1)},trigger:function(){return Bt(this,t),!0},teardown:function(){var t;if(!b.documentMode)return!1;t=ct.get(this,e)-1,t?ct.set(this,e,t):(this.removeEventListener(e,i),ct.remove(this,e))},_default:function(e){return ct.get(e.target,t)},delegateType:e},O.event.special[e]={setup:function(){var o=this.ownerDocument||this.document||this,n=b.documentMode?this:o,r=ct.get(n,e);r||(b.documentMode?this.addEventListener(e,i):o.addEventListener(t,i,!0)),ct.set(n,e,(r||0)+1)},teardown:function(){var o=this.ownerDocument||this.document||this,n=b.documentMode?this:o,r=ct.get(n,e)-1;r?ct.set(n,e,r):(b.documentMode?this.removeEventListener(e,i):o.removeEventListener(t,i,!0),ct.remove(n,e))}}})),O.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){O.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,o=this,n=t.relatedTarget,r=t.handleObj;return n&&(n===o||O.contains(o,n))||(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}})),O.fn.extend({on:function(t,e,i,o){return Vt(this,t,e,i,o)},one:function(t,e,i,o){return Vt(this,t,e,i,o,1)},off:function(t,e,i){var o,n;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,O(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"===typeof t){for(n in t)this.off(n,e,t[n]);return this}return!1!==e&&"function"!==typeof e||(i=e,e=void 0),!1===i&&(i=Nt),this.each((function(){O.event.remove(this,t,i,e)}))}});var Gt=/<script|<style|<link/i,jt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ht=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function $t(t,e){return I(t,"table")&&I(11!==e.nodeType?e:e.firstChild,"tr")&&O(t).children("tbody")[0]||t}function Wt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ut(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function zt(t,e){var i,o,n,r,s,a,l;if(1===e.nodeType){if(ct.hasData(t)&&(r=ct.get(t),l=r.events,l))for(n in ct.remove(e,"handle events"),l)for(i=0,o=l[n].length;i<o;i++)O.event.add(e,n,l[n][i]);ht.hasData(t)&&(s=ht.access(t),a=O.extend({},s),ht.set(e,a))}}function Kt(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Rt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Yt(t,e,i,o){e=u(e);var n,r,s,a,l,c,h=0,p=t.length,d=p-1,f=e[0],g=m(f);if(g||p>1&&"string"===typeof f&&!_.checkClone&&jt.test(f))return t.each((function(n){var r=t.eq(n);g&&(e[0]=f.call(this,n,r.html())),Yt(r,e,i,o)}));if(p&&(n=Lt(e,t[0].ownerDocument,!1,t,o),r=n.firstChild,1===n.childNodes.length&&(n=r),r||o)){for(s=O.map(Dt(n,"script"),Wt),a=s.length;h<p;h++)l=n,h!==d&&(l=O.clone(l,!0,!0),a&&O.merge(s,Dt(l,"script"))),i.call(t[h],l,h);if(a)for(c=s[s.length-1].ownerDocument,O.map(s,Ut),h=0;h<a;h++)l=s[h],Tt.test(l.type||"")&&!ct.access(l,"globalEval")&&O.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?O._evalUrl&&!l.noModule&&O._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):w(l.textContent.replace(Ht,""),l,c))}return t}function qt(t,e,i){for(var o,n=e?O.filter(e,t):t,r=0;null!=(o=n[r]);r++)i||1!==o.nodeType||O.cleanData(Dt(o)),o.parentNode&&(i&&bt(o)&&kt(Dt(o,"script")),o.parentNode.removeChild(o));return t}O.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var o,n,r,s,a=t.cloneNode(!0),l=bt(t);if(!_.noCloneChecked&&(1===t.nodeType||11===t.nodeType)&&!O.isXMLDoc(t))for(s=Dt(a),r=Dt(t),o=0,n=r.length;o<n;o++)Kt(r[o],s[o]);if(e)if(i)for(r=r||Dt(t),s=s||Dt(a),o=0,n=r.length;o<n;o++)zt(r[o],s[o]);else zt(t,a);return s=Dt(a,"script"),s.length>0&&kt(s,!l&&Dt(t,"script")),a},cleanData:function(t){for(var e,i,o,n=O.event.special,r=0;void 0!==(i=t[r]);r++)if(lt(i)){if(e=i[ct.expando]){if(e.events)for(o in e.events)n[o]?O.event.remove(i,o):O.removeEvent(i,o,e.handle);i[ct.expando]=void 0}i[ht.expando]&&(i[ht.expando]=void 0)}}}),O.fn.extend({detach:function(t){return qt(this,t,!0)},remove:function(t){return qt(this,t)},text:function(t){return ot(this,(function(t){return void 0===t?O.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Yt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=$t(this,t);e.appendChild(t)}}))},prepend:function(){return Yt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=$t(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Yt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Yt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(O.cleanData(Dt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return O.clone(this,t,e)}))},html:function(t){return ot(this,(function(t){var e=this[0]||{},i=0,o=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"===typeof t&&!Gt.test(t)&&!Pt[(It.exec(t)||["",""])[1].toLowerCase()]){t=O.htmlPrefilter(t);try{for(;i<o;i++)e=this[i]||{},1===e.nodeType&&(O.cleanData(Dt(e,!1)),e.innerHTML=t);e=0}catch(n){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Yt(this,arguments,(function(e){var i=this.parentNode;O.inArray(this,t)<0&&(O.cleanData(Dt(this)),i&&i.replaceChild(e,this))}),t)}}),O.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){O.fn[t]=function(t){for(var i,o=[],n=O(t),r=n.length-1,s=0;s<=r;s++)i=s===r?this:this.clone(!0),O(n[s])[e](i),c.apply(o,i.get());return this.pushStack(o)}}));var Xt=new RegExp("^("+yt+")(?!px)[a-z%]+$","i"),Qt=/^--/,Jt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},Zt=function(t,e,i){var o,n,r={};for(n in e)r[n]=t.style[n],t.style[n]=e[n];for(n in o=i.call(t),e)t.style[n]=r[n];return o},te=new RegExp(mt.join("|"),"i");function ee(t,e,i){var o,n,r,s,a=Qt.test(e),l=t.style;return i=i||Jt(t),i&&(s=i.getPropertyValue(e)||i[e],a&&s&&(s=s.replace(A,"$1")||void 0),""!==s||bt(t)||(s=O.style(t,e)),!_.pixelBoxStyles()&&Xt.test(s)&&te.test(e)&&(o=l.width,n=l.minWidth,r=l.maxWidth,l.minWidth=l.maxWidth=l.width=s,s=i.width,l.width=o,l.minWidth=n,l.maxWidth=r)),void 0!==s?s+"":s}function ie(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}(function(){function t(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",vt.appendChild(u).appendChild(c);var t=i.getComputedStyle(c);o="1%"!==t.top,l=12===e(t.marginLeft),c.style.right="60%",s=36===e(t.right),n=36===e(t.width),c.style.position="absolute",r=12===e(c.offsetWidth/3),vt.removeChild(u),c=null}}function e(t){return Math.round(parseFloat(t))}var o,n,r,s,a,l,u=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",_.clearCloneStyle="content-box"===c.style.backgroundClip,O.extend(_,{boxSizingReliable:function(){return t(),n},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),o},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),r},reliableTrDimensions:function(){var t,e,o,n;return null==a&&(t=b.createElement("table"),e=b.createElement("tr"),o=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",o.style.height="9px",o.style.display="block",vt.appendChild(t).appendChild(e).appendChild(o),n=i.getComputedStyle(e),a=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===e.offsetHeight,vt.removeChild(t)),a}}))})();var oe=["Webkit","Moz","ms"],ne=b.createElement("div").style,re={};function se(t){var e=t[0].toUpperCase()+t.slice(1),i=oe.length;while(i--)if(t=oe[i]+e,t in ne)return t}function ae(t){var e=O.cssProps[t]||re[t];return e||(t in ne?t:re[t]=se(t)||t)}var le=/^(none|table(?!-c[ea]).+)/,ue={position:"absolute",visibility:"hidden",display:"block"},ce={letterSpacing:"0",fontWeight:"400"};function he(t,e,i){var o=_t.exec(e);return o?Math.max(0,o[2]-(i||0))+(o[3]||"px"):e}function pe(t,e,i,o,n,r){var s="width"===e?1:0,a=0,l=0,u=0;if(i===(o?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(u+=O.css(t,i+mt[s],!0,n)),o?("content"===i&&(l-=O.css(t,"padding"+mt[s],!0,n)),"margin"!==i&&(l-=O.css(t,"border"+mt[s]+"Width",!0,n))):(l+=O.css(t,"padding"+mt[s],!0,n),"padding"!==i?l+=O.css(t,"border"+mt[s]+"Width",!0,n):a+=O.css(t,"border"+mt[s]+"Width",!0,n));return!o&&r>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-a-.5))||0),l+u}function de(t,e,i){var o=Jt(t),n=!_.boxSizingReliable()||i,r=n&&"border-box"===O.css(t,"boxSizing",!1,o),s=r,a=ee(t,e,o),l="offset"+e[0].toUpperCase()+e.slice(1);if(Xt.test(a)){if(!i)return a;a="auto"}return(!_.boxSizingReliable()&&r||!_.reliableTrDimensions()&&I(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===O.css(t,"display",!1,o))&&t.getClientRects().length&&(r="border-box"===O.css(t,"boxSizing",!1,o),s=l in t,s&&(a=t[l])),a=parseFloat(a)||0,a+pe(t,e,i||(r?"border":"content"),s,o,a)+"px"}function fe(t,e,i,o,n){return new fe.prototype.init(t,e,i,o,n)}O.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ee(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,i,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var n,r,s,a=at(e),l=Qt.test(e),u=t.style;if(l||(e=ae(a)),s=O.cssHooks[e]||O.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(n=s.get(t,!1,o))?n:u[e];r=typeof i,"string"===r&&(n=_t.exec(i))&&n[1]&&(i=St(t,e,n),r="number"),null!=i&&i===i&&("number"!==r||l||(i+=n&&n[3]||(O.cssNumber[a]?"":"px")),_.clearCloneStyle||""!==i||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,o))||(l?u.setProperty(e,i):u[e]=i))}},css:function(t,e,i,o){var n,r,s,a=at(e),l=Qt.test(e);return l||(e=ae(a)),s=O.cssHooks[e]||O.cssHooks[a],s&&"get"in s&&(n=s.get(t,!0,i)),void 0===n&&(n=ee(t,e,o)),"normal"===n&&e in ce&&(n=ce[e]),""===i||i?(r=parseFloat(n),!0===i||isFinite(r)?r||0:n):n}}),O.each(["height","width"],(function(t,e){O.cssHooks[e]={get:function(t,i,o){if(i)return!le.test(O.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?de(t,e,o):Zt(t,ue,(function(){return de(t,e,o)}))},set:function(t,i,o){var n,r=Jt(t),s=!_.scrollboxSize()&&"absolute"===r.position,a=s||o,l=a&&"border-box"===O.css(t,"boxSizing",!1,r),u=o?pe(t,e,o,l,r):0;return l&&s&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-pe(t,e,"border",!1,r)-.5)),u&&(n=_t.exec(i))&&"px"!==(n[3]||"px")&&(t.style[e]=i,i=O.css(t,e)),he(t,i,u)}}})),O.cssHooks.marginLeft=ie(_.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(ee(t,"marginLeft"))||t.getBoundingClientRect().left-Zt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),O.each({margin:"",padding:"",border:"Width"},(function(t,e){O.cssHooks[t+e]={expand:function(i){for(var o=0,n={},r="string"===typeof i?i.split(" "):[i];o<4;o++)n[t+mt[o]+e]=r[o]||r[o-2]||r[0];return n}},"margin"!==t&&(O.cssHooks[t+e].set=he)})),O.fn.extend({css:function(t,e){return ot(this,(function(t,e,i){var o,n,r={},s=0;if(Array.isArray(e)){for(o=Jt(t),n=e.length;s<n;s++)r[e[s]]=O.css(t,e[s],!1,o);return r}return void 0!==i?O.style(t,e,i):O.css(t,e)}),t,e,arguments.length>1)}}),O.Tween=fe,fe.prototype={constructor:fe,init:function(t,e,i,o,n,r){this.elem=t,this.prop=i,this.easing=n||O.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=o,this.unit=r||(O.cssNumber[i]?"":"px")},cur:function(){var t=fe.propHooks[this.prop];return t&&t.get?t.get(this):fe.propHooks._default.get(this)},run:function(t){var e,i=fe.propHooks[this.prop];return this.options.duration?this.pos=e=O.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):fe.propHooks._default.set(this),this}},fe.prototype.init.prototype=fe.prototype,fe.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=O.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){O.fx.step[t.prop]?O.fx.step[t.prop](t):1!==t.elem.nodeType||!O.cssHooks[t.prop]&&null==t.elem.style[ae(t.prop)]?t.elem[t.prop]=t.now:O.style(t.elem,t.prop,t.now+t.unit)}}},fe.propHooks.scrollTop=fe.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},O.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},O.fx=fe.prototype.init,O.fx.step={};var ge,ye,_e=/^(?:toggle|show|hide)$/,me=/queueHooks$/;function ve(){ye&&(!1===b.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(ve):i.setTimeout(ve,O.fx.interval),O.fx.tick())}function be(){return i.setTimeout((function(){ge=void 0})),ge=Date.now()}function Ce(t,e){var i,o=0,n={height:t};for(e=e?1:0;o<4;o+=2-e)i=mt[o],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function we(t,e,i){for(var o,n=(xe.tweeners[e]||[]).concat(xe.tweeners["*"]),r=0,s=n.length;r<s;r++)if(o=n[r].call(i,e,t))return o}function Se(t,e,i){var o,n,r,s,a,l,u,c,h="width"in e||"height"in e,p=this,d={},f=t.style,g=t.nodeType&&wt(t),y=ct.get(t,"fxshow");for(o in i.queue||(s=O._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,p.always((function(){p.always((function(){s.unqueued--,O.queue(t,"fx").length||s.empty.fire()}))}))),e)if(n=e[o],_e.test(n)){if(delete e[o],r=r||"toggle"===n,n===(g?"hide":"show")){if("show"!==n||!y||void 0===y[o])continue;g=!0}d[o]=y&&y[o]||O.style(t,o)}if(l=!O.isEmptyObject(e),l||!O.isEmptyObject(d))for(o in h&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],u=y&&y.display,null==u&&(u=ct.get(t,"display")),c=O.css(t,"display"),"none"===c&&(u?c=u:(Ot([t],!0),u=t.style.display||u,c=O.css(t,"display"),Ot([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===O.css(t,"float")&&(l||(p.done((function(){f.display=u})),null==u&&(c=f.display,u="none"===c?"":c)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",p.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,d)l||(y?"hidden"in y&&(g=y.hidden):y=ct.access(t,"fxshow",{display:u}),r&&(y.hidden=!g),g&&Ot([t],!0),p.done((function(){for(o in g||Ot([t]),ct.remove(t,"fxshow"),d)O.style(t,o,d[o])}))),l=we(g?y[o]:0,o,p),o in y||(y[o]=l.start,g&&(l.end=l.start,l.start=0))}function Ee(t,e){var i,o,n,r,s;for(i in t)if(o=at(i),n=e[o],r=t[i],Array.isArray(r)&&(n=r[1],r=t[i]=r[0]),i!==o&&(t[o]=r,delete t[i]),s=O.cssHooks[o],s&&"expand"in s)for(i in r=s.expand(r),delete t[o],r)i in t||(t[i]=r[i],e[i]=n);else e[o]=n}function xe(t,e,i){var o,n,r=0,s=xe.prefilters.length,a=O.Deferred().always((function(){delete l.elem})),l=function(){if(n)return!1;for(var e=ge||be(),i=Math.max(0,u.startTime+u.duration-e),o=i/u.duration||0,r=1-o,s=0,l=u.tweens.length;s<l;s++)u.tweens[s].run(r);return a.notifyWith(t,[u,r,i]),r<1&&l?i:(l||a.notifyWith(t,[u,1,0]),a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:O.extend({},e),opts:O.extend(!0,{specialEasing:{},easing:O.easing._default},i),originalProperties:e,originalOptions:i,startTime:ge||be(),duration:i.duration,tweens:[],createTween:function(e,i){var o=O.Tween(t,u.opts,e,i,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(o),o},stop:function(e){var i=0,o=e?u.tweens.length:0;if(n)return this;for(n=!0;i<o;i++)u.tweens[i].run(1);return e?(a.notifyWith(t,[u,1,0]),a.resolveWith(t,[u,e])):a.rejectWith(t,[u,e]),this}}),c=u.props;for(Ee(c,u.opts.specialEasing);r<s;r++)if(o=xe.prefilters[r].call(u,t,c,u.opts),o)return m(o.stop)&&(O._queueHooks(u.elem,u.opts.queue).stop=o.stop.bind(o)),o;return O.map(c,we,u),m(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),O.fx.timer(O.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}O.Animation=O.extend(xe,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return St(i.elem,t,_t.exec(e),i),i}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(q);for(var i,o=0,n=t.length;o<n;o++)i=t[o],xe.tweeners[i]=xe.tweeners[i]||[],xe.tweeners[i].unshift(e)},prefilters:[Se],prefilter:function(t,e){e?xe.prefilters.unshift(t):xe.prefilters.push(t)}}),O.speed=function(t,e,i){var o=t&&"object"===typeof t?O.extend({},t):{complete:i||!i&&e||m(t)&&t,duration:t,easing:i&&e||e&&!m(e)&&e};return O.fx.off?o.duration=0:"number"!==typeof o.duration&&(o.duration in O.fx.speeds?o.duration=O.fx.speeds[o.duration]:o.duration=O.fx.speeds._default),null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){m(o.old)&&o.old.call(this),o.queue&&O.dequeue(this,o.queue)},o},O.fn.extend({fadeTo:function(t,e,i,o){return this.filter(wt).css("opacity",0).show().end().animate({opacity:e},t,i,o)},animate:function(t,e,i,o){var n=O.isEmptyObject(t),r=O.speed(e,i,o),s=function(){var e=xe(this,O.extend({},t),r);(n||ct.get(this,"finish"))&&e.stop(!0)};return s.finish=s,n||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(t,e,i){var o=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!==typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,n=null!=t&&t+"queueHooks",r=O.timers,s=ct.get(this);if(n)s[n]&&s[n].stop&&o(s[n]);else for(n in s)s[n]&&s[n].stop&&me.test(n)&&o(s[n]);for(n=r.length;n--;)r[n].elem!==this||null!=t&&r[n].queue!==t||(r[n].anim.stop(i),e=!1,r.splice(n,1));!e&&i||O.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=ct.get(this),o=i[t+"queue"],n=i[t+"queueHooks"],r=O.timers,s=o?o.length:0;for(i.finish=!0,O.queue(this,t,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)o[e]&&o[e].finish&&o[e].finish.call(this);delete i.finish}))}}),O.each(["toggle","show","hide"],(function(t,e){var i=O.fn[e];O.fn[e]=function(t,o,n){return null==t||"boolean"===typeof t?i.apply(this,arguments):this.animate(Ce(e,!0),t,o,n)}})),O.each({slideDown:Ce("show"),slideUp:Ce("hide"),slideToggle:Ce("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){O.fn[t]=function(t,i,o){return this.animate(e,t,i,o)}})),O.timers=[],O.fx.tick=function(){var t,e=0,i=O.timers;for(ge=Date.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||O.fx.stop(),ge=void 0},O.fx.timer=function(t){O.timers.push(t),O.fx.start()},O.fx.interval=13,O.fx.start=function(){ye||(ye=!0,ve())},O.fx.stop=function(){ye=null},O.fx.speeds={slow:600,fast:200,_default:400},O.fn.delay=function(t,e){return t=O.fx&&O.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,o){var n=i.setTimeout(e,t);o.stop=function(){i.clearTimeout(n)}}))},function(){var t=b.createElement("input"),e=b.createElement("select"),i=e.appendChild(b.createElement("option"));t.type="checkbox",_.checkOn=""!==t.value,_.optSelected=i.selected,t=b.createElement("input"),t.value="t",t.type="radio",_.radioValue="t"===t.value}();var Oe,Re=O.expr.attrHandle;O.fn.extend({attr:function(t,e){return ot(this,O.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){O.removeAttr(this,t)}))}}),O.extend({attr:function(t,e,i){var o,n,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return"undefined"===typeof t.getAttribute?O.prop(t,e,i):(1===r&&O.isXMLDoc(t)||(n=O.attrHooks[e.toLowerCase()]||(O.expr.match.bool.test(e)?Oe:void 0)),void 0!==i?null===i?void O.removeAttr(t,e):n&&"set"in n&&void 0!==(o=n.set(t,i,e))?o:(t.setAttribute(e,i+""),i):n&&"get"in n&&null!==(o=n.get(t,e))?o:(o=O.find.attr(t,e),null==o?void 0:o))},attrHooks:{type:{set:function(t,e){if(!_.radioValue&&"radio"===e&&I(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,o=0,n=e&&e.match(q);if(n&&1===t.nodeType)while(i=n[o++])t.removeAttribute(i)}}),Oe={set:function(t,e,i){return!1===e?O.removeAttr(t,i):t.setAttribute(i,i),i}},O.each(O.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=Re[e]||O.find.attr;Re[e]=function(t,e,o){var n,r,s=e.toLowerCase();return o||(r=Re[s],Re[s]=n,n=null!=i(t,e,o)?s:null,Re[s]=r),n}}));var Ie=/^(?:input|select|textarea|button)$/i,Te=/^(?:a|area)$/i;function Pe(t){var e=t.match(q)||[];return e.join(" ")}function De(t){return t.getAttribute&&t.getAttribute("class")||""}function ke(t){return Array.isArray(t)?t:"string"===typeof t&&t.match(q)||[]}O.fn.extend({prop:function(t,e){return ot(this,O.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[O.propFix[t]||t]}))}}),O.extend({prop:function(t,e,i){var o,n,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&O.isXMLDoc(t)||(e=O.propFix[e]||e,n=O.propHooks[e]),void 0!==i?n&&"set"in n&&void 0!==(o=n.set(t,i,e))?o:t[e]=i:n&&"get"in n&&null!==(o=n.get(t,e))?o:t[e]},propHooks:{tabIndex:{get:function(t){var e=O.find.attr(t,"tabindex");return e?parseInt(e,10):Ie.test(t.nodeName)||Te.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),_.optSelected||(O.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),O.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){O.propFix[this.toLowerCase()]=this})),O.fn.extend({addClass:function(t){var e,i,o,n,r,s;return m(t)?this.each((function(e){O(this).addClass(t.call(this,e,De(this)))})):(e=ke(t),e.length?this.each((function(){if(o=De(this),i=1===this.nodeType&&" "+Pe(o)+" ",i){for(r=0;r<e.length;r++)n=e[r],i.indexOf(" "+n+" ")<0&&(i+=n+" ");s=Pe(i),o!==s&&this.setAttribute("class",s)}})):this)},removeClass:function(t){var e,i,o,n,r,s;return m(t)?this.each((function(e){O(this).removeClass(t.call(this,e,De(this)))})):arguments.length?(e=ke(t),e.length?this.each((function(){if(o=De(this),i=1===this.nodeType&&" "+Pe(o)+" ",i){for(r=0;r<e.length;r++){n=e[r];while(i.indexOf(" "+n+" ")>-1)i=i.replace(" "+n+" "," ")}s=Pe(i),o!==s&&this.setAttribute("class",s)}})):this):this.attr("class","")},toggleClass:function(t,e){var i,o,n,r,s=typeof t,a="string"===s||Array.isArray(t);return m(t)?this.each((function(i){O(this).toggleClass(t.call(this,i,De(this),e),e)})):"boolean"===typeof e&&a?e?this.addClass(t):this.removeClass(t):(i=ke(t),this.each((function(){if(a)for(r=O(this),n=0;n<i.length;n++)o=i[n],r.hasClass(o)?r.removeClass(o):r.addClass(o);else void 0!==t&&"boolean"!==s||(o=De(this),o&&ct.set(this,"__className__",o),this.setAttribute&&this.setAttribute("class",o||!1===t?"":ct.get(this,"__className__")||""))})))},hasClass:function(t){var e,i,o=0;e=" "+t+" ";while(i=this[o++])if(1===i.nodeType&&(" "+Pe(De(i))+" ").indexOf(e)>-1)return!0;return!1}});var Ae=/\r/g;O.fn.extend({val:function(t){var e,i,o,n=this[0];return arguments.length?(o=m(t),this.each((function(i){var n;1===this.nodeType&&(n=o?t.call(this,i,O(this).val()):t,null==n?n="":"number"===typeof n?n+="":Array.isArray(n)&&(n=O.map(n,(function(t){return null==t?"":t+""}))),e=O.valHooks[this.type]||O.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,n,"value")||(this.value=n))}))):n?(e=O.valHooks[n.type]||O.valHooks[n.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(n,"value"))?i:(i=n.value,"string"===typeof i?i.replace(Ae,""):null==i?"":i)):void 0}}),O.extend({valHooks:{option:{get:function(t){var e=O.find.attr(t,"value");return null!=e?e:Pe(O.text(t))}},select:{get:function(t){var e,i,o,n=t.options,r=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?r+1:n.length;for(o=r<0?l:s?r:0;o<l;o++)if(i=n[o],(i.selected||o===r)&&!i.disabled&&(!i.parentNode.disabled||!I(i.parentNode,"optgroup"))){if(e=O(i).val(),s)return e;a.push(e)}return a},set:function(t,e){var i,o,n=t.options,r=O.makeArray(e),s=n.length;while(s--)o=n[s],(o.selected=O.inArray(O.valHooks.option.get(o),r)>-1)&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),O.each(["radio","checkbox"],(function(){O.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=O.inArray(O(t).val(),e)>-1}},_.checkOn||(O.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Le=i.location,Me={guid:Date.now()},Fe=/\?/;O.parseXML=function(t){var e,o;if(!t||"string"!==typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(n){}return o=e&&e.getElementsByTagName("parsererror")[0],e&&!o||O.error("Invalid XML: "+(o?O.map(o.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Ne=/^(?:focusinfocus|focusoutblur)$/,Ve=function(t){t.stopPropagation()};O.extend(O.event,{trigger:function(t,e,o,n){var r,s,a,l,u,c,h,p,d=[o||b],g=f.call(t,"type")?t.type:t,y=f.call(t,"namespace")?t.namespace.split("."):[];if(s=p=a=o=o||b,3!==o.nodeType&&8!==o.nodeType&&!Ne.test(g+O.event.triggered)&&(g.indexOf(".")>-1&&(y=g.split("."),g=y.shift(),y.sort()),u=g.indexOf(":")<0&&"on"+g,t=t[O.expando]?t:new O.Event(g,"object"===typeof t&&t),t.isTrigger=n?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),e=null==e?[t]:O.makeArray(e,[t]),h=O.event.special[g]||{},n||!h.trigger||!1!==h.trigger.apply(o,e))){if(!n&&!h.noBubble&&!v(o)){for(l=h.delegateType||g,Ne.test(l+g)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(o.ownerDocument||b)&&d.push(a.defaultView||a.parentWindow||i)}r=0;while((s=d[r++])&&!t.isPropagationStopped())p=s,t.type=r>1?l:h.bindType||g,c=(ct.get(s,"events")||Object.create(null))[t.type]&&ct.get(s,"handle"),c&&c.apply(s,e),c=u&&s[u],c&&c.apply&&lt(s)&&(t.result=c.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,n||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(d.pop(),e)||!lt(o)||u&&m(o[g])&&!v(o)&&(a=o[u],a&&(o[u]=null),O.event.triggered=g,t.isPropagationStopped()&&p.addEventListener(g,Ve),o[g](),t.isPropagationStopped()&&p.removeEventListener(g,Ve),O.event.triggered=void 0,a&&(o[u]=a)),t.result}},simulate:function(t,e,i){var o=O.extend(new O.Event,i,{type:t,isSimulated:!0});O.event.trigger(o,null,e)}}),O.fn.extend({trigger:function(t,e){return this.each((function(){O.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return O.event.trigger(t,e,i,!0)}});var Be=/\[\]$/,Ge=/\r?\n/g,je=/^(?:submit|button|image|reset|file)$/i,He=/^(?:input|select|textarea|keygen)/i;function $e(t,e,i,o){var n;if(Array.isArray(e))O.each(e,(function(e,n){i||Be.test(t)?o(t,n):$e(t+"["+("object"===typeof n&&null!=n?e:"")+"]",n,i,o)}));else if(i||"object"!==S(e))o(t,e);else for(n in e)$e(t+"["+n+"]",e[n],i,o)}O.param=function(t,e){var i,o=[],n=function(t,e){var i=m(e)?e():e;o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!O.isPlainObject(t))O.each(t,(function(){n(this.name,this.value)}));else for(i in t)$e(i,t[i],e,n);return o.join("&")},O.fn.extend({serialize:function(){return O.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=O.prop(this,"elements");return t?O.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!O(this).is(":disabled")&&He.test(this.nodeName)&&!je.test(t)&&(this.checked||!Rt.test(t))})).map((function(t,e){var i=O(this).val();return null==i?null:Array.isArray(i)?O.map(i,(function(t){return{name:e.name,value:t.replace(Ge,"\r\n")}})):{name:e.name,value:i.replace(Ge,"\r\n")}})).get()}});var We=/%20/g,Ue=/#.*$/,ze=/([?&])_=[^&]*/,Ke=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ye=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qe=/^(?:GET|HEAD)$/,Xe=/^\/\//,Qe={},Je={},Ze="*/".concat("*"),ti=b.createElement("a");function ei(t){return function(e,i){"string"!==typeof e&&(i=e,e="*");var o,n=0,r=e.toLowerCase().match(q)||[];if(m(i))while(o=r[n++])"+"===o[0]?(o=o.slice(1)||"*",(t[o]=t[o]||[]).unshift(i)):(t[o]=t[o]||[]).push(i)}}function ii(t,e,i,o){var n={},r=t===Je;function s(a){var l;return n[a]=!0,O.each(t[a]||[],(function(t,a){var u=a(e,i,o);return"string"!==typeof u||r||n[u]?r?!(l=u):void 0:(e.dataTypes.unshift(u),s(u),!1)})),l}return s(e.dataTypes[0])||!n["*"]&&s("*")}function oi(t,e){var i,o,n=O.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((n[i]?t:o||(o={}))[i]=e[i]);return o&&O.extend(!0,t,o),t}function ni(t,e,i){var o,n,r,s,a=t.contents,l=t.dataTypes;while("*"===l[0])l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(n in a)if(a[n]&&a[n].test(o)){l.unshift(n);break}if(l[0]in i)r=l[0];else{for(n in i){if(!l[0]||t.converters[n+" "+l[0]]){r=n;break}s||(s=n)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),i[r]}function ri(t,e,i,o){var n,r,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];r=c.shift();while(r)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&o&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=c.shift(),r)if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=u[l+" "+r]||u["* "+r],!s)for(n in u)if(a=n.split(" "),a[1]===r&&(s=u[l+" "+a[0]]||u["* "+a[0]],s)){!0===s?s=u[n]:!0!==u[n]&&(r=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}ti.href=Le.href,O.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Le.href,type:"GET",isLocal:Ye.test(Le.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ze,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":O.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?oi(oi(t,O.ajaxSettings),e):oi(O.ajaxSettings,t)},ajaxPrefilter:ei(Qe),ajaxTransport:ei(Je),ajax:function(t,e){"object"===typeof t&&(e=t,t=void 0),e=e||{};var o,n,r,s,a,l,u,c,h,p,d=O.ajaxSetup({},e),f=d.context||d,g=d.context&&(f.nodeType||f.jquery)?O(f):O.event,y=O.Deferred(),_=O.Callbacks("once memory"),m=d.statusCode||{},v={},C={},w="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(u){if(!s){s={};while(e=Ke.exec(r))s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2])}e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?r:null},setRequestHeader:function(t,e){return null==u&&(t=C[t.toLowerCase()]=C[t.toLowerCase()]||t,v[t]=e),this},overrideMimeType:function(t){return null==u&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)S.always(t[S.status]);else for(e in t)m[e]=[m[e],t[e]];return this},abort:function(t){var e=t||w;return o&&o.abort(e),E(0,e),this}};if(y.promise(S),d.url=((t||d.url||Le.href)+"").replace(Xe,Le.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(q)||[""],null==d.crossDomain){l=b.createElement("a");try{l.href=d.url,l.href=l.href,d.crossDomain=ti.protocol+"//"+ti.host!==l.protocol+"//"+l.host}catch(x){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!==typeof d.data&&(d.data=O.param(d.data,d.traditional)),ii(Qe,d,e,S),u)return S;for(h in c=O.event&&d.global,c&&0===O.active++&&O.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!qe.test(d.type),n=d.url.replace(Ue,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(We,"+")):(p=d.url.slice(n.length),d.data&&(d.processData||"string"===typeof d.data)&&(n+=(Fe.test(n)?"&":"?")+d.data,delete d.data),!1===d.cache&&(n=n.replace(ze,"$1"),p=(Fe.test(n)?"&":"?")+"_="+Me.guid+++p),d.url=n+p),d.ifModified&&(O.lastModified[n]&&S.setRequestHeader("If-Modified-Since",O.lastModified[n]),O.etag[n]&&S.setRequestHeader("If-None-Match",O.etag[n])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&S.setRequestHeader("Content-Type",d.contentType),S.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ze+"; q=0.01":""):d.accepts["*"]),d.headers)S.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(f,S,d)||u))return S.abort();if(w="abort",_.add(d.complete),S.done(d.success),S.fail(d.error),o=ii(Je,d,e,S),o){if(S.readyState=1,c&&g.trigger("ajaxSend",[S,d]),u)return S;d.async&&d.timeout>0&&(a=i.setTimeout((function(){S.abort("timeout")}),d.timeout));try{u=!1,o.send(v,E)}catch(x){if(u)throw x;E(-1,x)}}else E(-1,"No Transport");function E(t,e,s,l){var h,p,v,b,C,w=e;u||(u=!0,a&&i.clearTimeout(a),o=void 0,r=l||"",S.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(b=ni(d,S,s)),!h&&O.inArray("script",d.dataTypes)>-1&&O.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),b=ri(d,b,S,h),h?(d.ifModified&&(C=S.getResponseHeader("Last-Modified"),C&&(O.lastModified[n]=C),C=S.getResponseHeader("etag"),C&&(O.etag[n]=C)),204===t||"HEAD"===d.type?w="nocontent":304===t?w="notmodified":(w=b.state,p=b.data,v=b.error,h=!v)):(v=w,!t&&w||(w="error",t<0&&(t=0))),S.status=t,S.statusText=(e||w)+"",h?y.resolveWith(f,[p,w,S]):y.rejectWith(f,[S,w,v]),S.statusCode(m),m=void 0,c&&g.trigger(h?"ajaxSuccess":"ajaxError",[S,d,h?p:v]),_.fireWith(f,[S,w]),c&&(g.trigger("ajaxComplete",[S,d]),--O.active||O.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,i){return O.get(t,e,i,"json")},getScript:function(t,e){return O.get(t,void 0,e,"script")}}),O.each(["get","post"],(function(t,e){O[e]=function(t,i,o,n){return m(i)&&(n=n||o,o=i,i=void 0),O.ajax(O.extend({url:t,type:e,dataType:n,data:i,success:o},O.isPlainObject(t)&&t))}})),O.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),O._evalUrl=function(t,e,i){return O.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){O.globalEval(t,e,i)}})},O.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=O(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){var t=this;while(t.firstElementChild)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return m(t)?this.each((function(e){O(this).wrapInner(t.call(this,e))})):this.each((function(){var e=O(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m(t);return this.each((function(i){O(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){O(this).replaceWith(this.childNodes)})),this}}),O.expr.pseudos.hidden=function(t){return!O.expr.pseudos.visible(t)},O.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},O.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var si={0:200,1223:204},ai=O.ajaxSettings.xhr();_.cors=!!ai&&"withCredentials"in ai,_.ajax=ai=!!ai,O.ajaxTransport((function(t){var e,o;if(_.cors||ai&&!t.crossDomain)return{send:function(n,r){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)a.setRequestHeader(s,n[s]);e=function(t){return function(){e&&(e=o=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!==typeof a.status?r(0,"error"):r(a.status,a.statusText):r(si[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!==typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),o=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=o:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){e&&o()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(l){if(e)throw l}},abort:function(){e&&e()}}})),O.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),O.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return O.globalEval(t),t}}}),O.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),O.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(o,n){e=O("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&n("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){i&&i()}}}));var li=[],ui=/(=)\?(?=&|$)|\?\?/;O.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=li.pop()||O.expando+"_"+Me.guid++;return this[t]=!0,t}}),O.ajaxPrefilter("json jsonp",(function(t,e,o){var n,r,s,a=!1!==t.jsonp&&(ui.test(t.url)?"url":"string"===typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ui.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(ui,"$1"+n):!1!==t.jsonp&&(t.url+=(Fe.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return s||O.error(n+" was not called"),s[0]},t.dataTypes[0]="json",r=i[n],i[n]=function(){s=arguments},o.always((function(){void 0===r?O(i).removeProp(n):i[n]=r,t[n]&&(t.jsonpCallback=e.jsonpCallback,li.push(n)),s&&m(r)&&r(s[0]),s=r=void 0})),"script"})),_.createHTMLDocument=function(){var t=b.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),O.parseHTML=function(t,e,i){return"string"!==typeof t?[]:("boolean"===typeof e&&(i=e,e=!1),e||(_.createHTMLDocument?(e=b.implementation.createHTMLDocument(""),o=e.createElement("base"),o.href=b.location.href,e.head.appendChild(o)):e=b),n=j.exec(t),r=!i&&[],n?[e.createElement(n[1])]:(n=Lt([t],e,r),r&&r.length&&O(r).remove(),O.merge([],n.childNodes)));var o,n,r},O.fn.load=function(t,e,i){var o,n,r,s=this,a=t.indexOf(" ");return a>-1&&(o=Pe(t.slice(a)),t=t.slice(0,a)),m(e)?(i=e,e=void 0):e&&"object"===typeof e&&(n="POST"),s.length>0&&O.ajax({url:t,type:n||"GET",dataType:"html",data:e}).done((function(t){r=arguments,s.html(o?O("<div>").append(O.parseHTML(t)).find(o):t)})).always(i&&function(t,e){s.each((function(){i.apply(this,r||[t.responseText,e,t])}))}),this},O.expr.pseudos.animated=function(t){return O.grep(O.timers,(function(e){return t===e.elem})).length},O.offset={setOffset:function(t,e,i){var o,n,r,s,a,l,u,c=O.css(t,"position"),h=O(t),p={};"static"===c&&(t.style.position="relative"),a=h.offset(),r=O.css(t,"top"),l=O.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1,u?(o=h.position(),s=o.top,n=o.left):(s=parseFloat(r)||0,n=parseFloat(l)||0),m(e)&&(e=e.call(t,i,O.extend({},a))),null!=e.top&&(p.top=e.top-a.top+s),null!=e.left&&(p.left=e.left-a.left+n),"using"in e?e.using.call(t,p):h.css(p)}},O.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){O.offset.setOffset(this,t,e)}));var e,i,o=this[0];return o?o.getClientRects().length?(e=o.getBoundingClientRect(),i=o.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,o=this[0],n={top:0,left:0};if("fixed"===O.css(o,"position"))e=o.getBoundingClientRect();else{e=this.offset(),i=o.ownerDocument,t=o.offsetParent||i.documentElement;while(t&&(t===i.body||t===i.documentElement)&&"static"===O.css(t,"position"))t=t.parentNode;t&&t!==o&&1===t.nodeType&&(n=O(t).offset(),n.top+=O.css(t,"borderTopWidth",!0),n.left+=O.css(t,"borderLeftWidth",!0))}return{top:e.top-n.top-O.css(o,"marginTop",!0),left:e.left-n.left-O.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){var t=this.offsetParent;while(t&&"static"===O.css(t,"position"))t=t.offsetParent;return t||vt}))}}),O.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;O.fn[t]=function(o){return ot(this,(function(t,o,n){var r;if(v(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===n)return r?r[e]:t[o];r?r.scrollTo(i?r.pageXOffset:n,i?n:r.pageYOffset):t[o]=n}),t,o,arguments.length)}})),O.each(["top","left"],(function(t,e){O.cssHooks[e]=ie(_.pixelPosition,(function(t,i){if(i)return i=ee(t,e),Xt.test(i)?O(t).position()[e]+"px":i}))})),O.each({Height:"height",Width:"width"},(function(t,e){O.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,o){O.fn[o]=function(n,r){var s=arguments.length&&(i||"boolean"!==typeof n),a=i||(!0===n||!0===r?"margin":"border");return ot(this,(function(e,i,n){var r;return v(e)?0===o.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?O.css(e,i,a):O.style(e,i,n,a)}),e,s?n:void 0,s)}}))})),O.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){O.fn[e]=function(t){return this.on(e,t)}})),O.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,o){return this.on(e,t,i,o)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),O.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){O.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}));var ci=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;O.proxy=function(t,e){var i,o,n;if("string"===typeof e&&(i=t[e],e=t,t=i),m(t))return o=l.call(arguments,2),n=function(){return t.apply(e||this,o.concat(l.call(arguments)))},n.guid=t.guid=t.guid||O.guid++,n},O.holdReady=function(t){t?O.readyWait++:O.ready(!0)},O.isArray=Array.isArray,O.parseJSON=JSON.parse,O.nodeName=I,O.isFunction=m,O.isWindow=v,O.camelCase=at,O.type=S,O.now=Date.now,O.isNumeric=function(t){var e=O.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},O.trim=function(t){return null==t?"":(t+"").replace(ci,"$1")},o=[],n=function(){return O}.apply(e,o),void 0===n||(t.exports=n);var hi=i.jQuery,pi=i.$;return O.noConflict=function(t){return i.$===O&&(i.$=pi),t&&i.jQuery===O&&(i.jQuery=hi),O},"undefined"===typeof r&&(i.jQuery=i.$=O),O}))},2989:function(t,e,i){i(560),i(8858),i(1318),i(3228),i(4224),i(1121),i(7133),function(t,i){i(e)}(0,(function(t){"use strict";var e={name:"RealGrid2",version:"2.7.2.1534",license:"enterprise",code:null},o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)};function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var r=function(){return r=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},r.apply(this,arguments)};function s(t,e,i,o){return new(i||(i=Promise))((function(n,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))}function a(t,e){var i,o,n,r,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(i=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(n=s.trys,!((n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function l(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var u,c,h,p,d,f,g,y,_,m="$_hash",v="$_view",b="$_row",C="$_idx",w="$_foc",S="$_lev";t.ValueType=void 0,(u=t.ValueType||(t.ValueType={})).TEXT="text",u.NUMBER="number",u.BOOLEAN="boolean",u.DATETIME="datetime",u.OBJECT="object",u.CHAR="char",u.UNUM="unum",u.INT="int",u.UINT="uint",u.DATE="date",t.SortDirection=void 0,(c=t.SortDirection||(t.SortDirection={})).ASCENDING="ascending",c.DESCENDING="descending",c.NONE="none",t.SortCase=void 0,(h=t.SortCase||(t.SortCase={})).SENSITIVE="sensitive",h.INSENSITIVE="insensitive",function(t){t.ROWS="rows",t.ITEMS="items"}(p||(p={})),t.SortMode=void 0,(d=t.SortMode||(t.SortMode={})).AUTO="auto",d.EXPLICIT="explicit",t.FilterMode=void 0,(f=t.FilterMode||(t.FilterMode={})).AUTO="auto",f.EXPLICIT="explicit",t.RowGroupAdornments=void 0,(g=t.RowGroupAdornments||(t.RowGroupAdornments={})).NONE="none",g.HEADER="header",g.FOOTER="footer",g.SUMMARY="summary",g.BOTH="both",t.ValidationMode=void 0,(y=t.ValidationMode||(t.ValidationMode={})).ALWAYS="always",y.UPDATE="update",y.INSERT="insert",t.ValidationLevel=void 0,(_=t.ValidationLevel||(t.ValidationLevel={})).ERROR="error",_.WARNING="warning",_.INFO="info",_.IGNORE="ignore";var E,x,O,R,I,T,P,D,k,A,L,M,F,N,V,B,G,j,H,$,W,U,z,K={error:1,warning:2,info:3,ignore:4},Y=function(t,e){return K[t]-K[e]};t.SummaryMode=void 0,(E=t.SummaryMode||(t.SummaryMode={})).NONE="none",E.AGGREGATE="aggregate",E.STATISTICAL="statistical",t.ColumnHeaderItemLocation=void 0,(x=t.ColumnHeaderItemLocation||(t.ColumnHeaderItemLocation={})).NONE="none",x.LEFT_EDGE="leftEdge",x.RIGHT_EDGE="rightEdge",x.TOP_EDGE="topEdge",x.BOTTOM_EDGE="bottomEdge",x.LEFT="left",x.RIGHT="right",x.TOP="top",x.BOTTOM="bottom",x.CENTER="center",function(t){t.NONE="none",t.HEAD="head",t.BODY="body",t.TAIL="tail"}(O||(O={})),t.GridFitStyle=void 0,(R=t.GridFitStyle||(t.GridFitStyle={})).NONE="none",R.EVEN="even",R.EVEN_FILL="evenFill",R.FILL="fill",t.RowMaskType=void 0,(I=t.RowMaskType||(t.RowMaskType={})).NONE="none",I.ROW="row",I.DATA="data",I.FILL="fill",I.CELL="cell",t.TextInputCase=void 0,(T=t.TextInputCase||(t.TextInputCase={})).NORMAL="normal",T.UPPER="upper",T.LOWER="lower",T.DEFAULT="default",t.DefaultShowDate=void 0,(P=t.DefaultShowDate||(t.DefaultShowDate={})).NORMAL="normal",P.TODAY="today",P.TODAY_WHEN_NULL="todayWhenNull",P.DEFAULT="default",P.DEFAULT_WHEN_NULL="defaultWhenNull",t.SortStyle=void 0,(D=t.SortStyle||(t.SortStyle={})).NONE="none",D.EXCLUSIVE="exclusive",D.INCLUSIVE="inclusive",D.REVERSE="reverse",t.MenuItemType=void 0,(k=t.MenuItemType||(t.MenuItemType={})).NORMAL="normal",k.CHECK="check",k.RADIO="radio",k.SEPARATOR="separator",t.HandleVisibility=void 0,(A=t.HandleVisibility||(t.HandleVisibility={})).VISIBLE="visible",A.HOVERED="hovered",A.ALWAYS="always",A.HIDDEN="hidden",t.CellButton=void 0,(L=t.CellButton||(t.CellButton={})).NONE="none",L.ACTION="action",L.POPUP="popup",t.ButtonVisibility=void 0,(M=t.ButtonVisibility||(t.ButtonVisibility={})).ALWAYS="always",M.DEFAULT="default",M.VISIBLE="visible",M.HIDDEN="hidden",M.ROWFOCUSED="rowfocused",t.IconLocation=void 0,(F=t.IconLocation||(t.IconLocation={})).LEFT="left",F.RIGHT="right",F.LEFT_EDGE="leftEdge",F.RIGHT_EDGE="rightEdge",F.TOP="top",F.BOTTOM="bottom",F.TOP_EDGE="topEdge",F.BOTTOM_EDGE="bottomEdge",F.CENTER="center",t.RefreshMode=void 0,(N=t.RefreshMode||(t.RefreshMode={})).ALL="all",N.VISIBLE_ONLY="visibleOnly",N.RECYCLE="recycle",t.ScrollOnEditing=void 0,(V=t.ScrollOnEditing||(t.ScrollOnEditing={})).CANCEL="cancel",V.COMMIT="commit",V.DEFAULT="default",t.ItemType=void 0,(B=t.ItemType||(t.ItemType={})).ROW="row",B.GROUP="group",B.FOOTER="footer",B.TREE="tree",t.SummaryType=void 0,(G=t.SummaryType||(t.SummaryType={})).COUNT="count",G.SUM="sum",G.MAX="max",G.MIN="min",G.AVG="avg",G.VAR="var",G.VARP="varp",G.STDEV="stdev",G.STDEVP="stdevp",G.DATACOUNT="datacount",G.DATAAVG="dataavg",t.ExpanderVisibility=void 0,(j=t.ExpanderVisibility||(t.ExpanderVisibility={})).ALWAYS="always",j.DEFAULT="default",j.NONE="none",t.ExitGridWhenTab=void 0,(H=t.ExitGridWhenTab||(t.ExitGridWhenTab={})).ROW="row",H.GRID="grid",H.NONE="none",t.GroupShowMode=void 0,($=t.GroupShowMode||(t.GroupShowMode={})).EXPAND="expand",$.COLLAPSE="collapse",$.ALWAYS="always",t.SyncGridHeight=void 0,(W=t.SyncGridHeight||(t.SyncGridHeight={})).NONE="none",W.OVER="over",W.ALWAYS="always",t.InlineFilterOperator=void 0,(U=t.InlineFilterOperator||(t.InlineFilterOperator={})).EQUAL="equal",U.NOT_EQUAL="notEqual",U.CONTAINS="contains",U.NOT_CONTAINS="notContains",U.STARTS_WITH="startsWith",U.ENDS_WITH="endsWith",U.RESET="reset",U.GREATER="greater",U.GREATER_EQUAL="greaterEqual",U.LOWER="lower",U.LOWER_EQUAL="lowerEqual",U.BETWEEN="between",U.EMPTY="empty",t.TreeExpanderIconStyle=void 0,(z=t.TreeExpanderIconStyle||(t.TreeExpanderIconStyle={})).TRIANGLE="triangle",z.SQUARE="square";var q=function(){function t(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=t,this.y=e,this.width=i,this.height=o}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},set:function(t){var e=t-this.x;this.x+=e,this.width-=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},set:function(t){var e=t-(this.x+this.width);this.width+=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},set:function(t){var e=t-this.y;this.y+=e,this.height-=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){var e=t-(this.y+this.height);this.height+=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.width||0===this.height},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.getInner=function(){return new t(0,0,this.width,this.height)},t.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},t.prototype.leftBy=function(t){return this.x+=t,this.width-=t,this},t.prototype.rightBy=function(t){return this.width+=t,this},t.prototype.topBy=function(t){return this.y+=t,this.height-=t,this},t.prototype.bottomBy=function(t){return this.height+=t,this},t.prototype.shrink=function(t,e){return this.width-=t,this.height-=e,this},t.prototype.expand=function(t,e){return this.width+=t,this.height+=e,this},t.prototype.contains=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},t.prototype.setEmpty=function(){return this.width=this.height=0,this},t.prototype.move=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e,this},t.prototype.set=function(t,e,i,o){return this.x=t,this.y=e,this.width=i,this.height=o,this},t.prototype.setWidth=function(t){return this.width=t,this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyHorz=function(t){return this.x=t.x,this.width=t.width,this},t.prototype.copyVert=function(t){return this.y=t.y,this.height=t.height,this},t.prototype.inflate=function(t,e,i,o){return void 0===t&&(t=0),void 0===e&&(e=void 0),void 0===i&&(i=void 0),void 0===o&&(o=void 0),e=void 0!==e?e:t,i=void 0!==i?i:t,o=void 0!==o?o:e,t&&(this.left=this.x-t),e&&(this.top=this.y-e),i&&(this.right=this.right+i),o&&(this.bottom=this.bottom+o),this},t.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},t.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t.width>>>=0,t.height>>>=0,t},t.prototype.union=function(t){var e=this.clone();return e.left=Math.min(this.x,t.x),e.right=Math.max(this.right,t.right),e.top=Math.min(this.y,t.y),e.bottom=Math.max(this.bottom,t.bottom),e},t.prototype.normalize=function(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this},t.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},t.Temp=new t,t}(),X="undefined"!=typeof window?window:{},Q="undefined"!=typeof navigator?navigator.userAgent:"",J="undefined"!=typeof navigator?navigator.platform:"",Z="undefined"!=typeof navigator?navigator.appVersion:"",tt=J.toUpperCase().indexOf("MAC")>=0,et=!!X.opera||Q.indexOf(" OPR/")>=0,it=!!X.whale,ot=!!X.chrome&&!et,nt=void 0!==X.InstallTrigger,rt=!!X.safari||!ot&&!et&&Q.indexOf("Safari")>=0,st=Q.toLowerCase().indexOf("edge/")>=0,at=/iPad|iPhone|iPod/.test(Q)&&!X.MSStream,lt=Q.toLowerCase().indexOf("edg/")>=0&&Q.toLowerCase().indexOf("chrome/")>=0,ut=function(){try{for(var t=3,e=document.createElement("div"),i=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",i[0];);return t>4?t:void 0}catch(t){return}}(),ct=void 0!==ut&&ut<=9,ht=void 0!==ut&&ut<=8,pt=!!Q.match(/Trident.*rv\:11\./),dt=-1!==Z.indexOf("MSIE 10"),ft=-1!==Z.indexOf("MSIE 9"),gt=pt||dt||ft,yt=(new Date).getTime(),_t=void 0,mt=void 0,vt=void 0,bt=void 0;function Ct(t){return t&&t.ownerDocument&&(t.ownerDocument.defaultView||t.ownerDocument.parentWindow)}function wt(t){return t&&t.ownerDocument}function St(t){return t.defaultView||t.parentWindow}var Et,xt=function(){function t(){}return t.stopEvent=function(t,e){void 0===e&&(e=!1),t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,e&&t.stopImmediatePropagation()},t.setDebugging=function(e,i,o){t.$$_debugging=i,t.$$_keyLog=o},t.isDebugging=function(){return t.$$_debugging},t.setSlotMode=function(e){t.$$_slotMode=e},t.isSlotMode=function(){return t.$$_slotMode},t.log=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t.isDebugging()&&console.log(e,i)},t.keyLog=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t.$$_keyLog&&console.log(e,i)},t.isArray=function(t){return Array.isArray(t)},t.isObject=function(t){return null!=t&&"object"==typeof t},t.makeArray=function(e,i){return void 0===i&&(i=!1),null!=e?t.isArray(e)?e:[e]:i?[]:void 0},t.isNumber=function(t){return"number"==typeof t},t.getNumber=function(t,e){return isNaN(parseFloat(t))?e:parseFloat(t)},t.getTimer=function(){return(new Date).getTime()-yt},t.isWhiteSpace=function(t){return!t||!t.trim()},t.pad=function(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-String(t).length+1).join(i)+t},t.pick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i,o=t.length,n=0;n<o;n++)if(null!=(i=t[n]))return i},t.included=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=e.length,n=0;n<o;n++)if(e[n]==t)return!0;return!1},t.valueIn=function(t,e){if("object"==typeof e)for(var i=Object.keys(e),o=0;o<i.length;o++)if(e[i[o]]===t)return!0;return!1},t.compareTextValue=function(t,e,i,o){if(t===e)return!0;var n=String(t),r=null==e?void 0:String(e);return!n&&!r||!(!n||!r)&&(i||(n=n.toLowerCase(),r=r.toLowerCase()),o?r.indexOf(n)>=0:n==r)},t.cast=function(t,e){return t instanceof e?t:null},t.toInt=function(t,e){var i=parseInt(t,e||10);return isNaN(i)?0:i},t.toFloat=function(t){var e=parseFloat(t);return isNaN(e)?0:e},t.hex=function(t,e,i){void 0===e&&(e=2),void 0===i&&(i="0"),e=Math.max(e||2,1);var o=t.toString(16);return i=i||"0",new Array(e-o.length+1).join(i)+o},t.deepCopy=function(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e);for(var i=t.isArray(e)?[]:{},o=0,n=Object.keys(e);o<n.length;o++){var r=n[o];e.hasOwnProperty(r)&&(i[r]=t.deepCopy(e[r]))}return i},t.extendObj=function(t,e){if(null==t||"object"!=typeof t||null==e||"object"!=typeof e)return e;for(var i=0,o=Object.keys(t);i<o.length;i++){var n=o[i];t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n])}return e},t.getBounds=function(t){var e=new q;return e.x=t.offsetLeft,e.y=t.offsetTop,e.width=t.offsetWidth,e.height=t.offsetHeight,e},t.toStr=function(t){return"number"==typeof t?isNaN(t)?"":String(t):null!=t?String(t):""},t.setBounds=function(t,e,i,o,n){var r=t.style;r.left=e+"px",r.top=i+"px",r.width=o+"px",r.height=n+"px"},t.getClientRect=function(t){var e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e},t.getChildIndex=function(t){if(t){var e=t.parentNode;if(e)for(var i=e.children,o=i.length;o--;)if(i[o]===t)return o}return-1},t.clearChildren=function(t){for(var e;e=t.lastChild;)t.removeChild(e)},t.clearElements=function(e){for(var i;i=e.lastChild;)t.clearElements(i),e.removeChild(i)},t.addChild=function(t,e){return!(!t||!e||e.parentNode===t)&&(t.appendChild(e),!0)},t.removeChild=function(t,e){return!(!t||!e||e.parentNode!==t)&&(t.removeChild(e),!0)},t.disableSelection=function(t){var e=t.style;e["-moz-user-select"]="-moz-none",e["-khtml-user-select"]="none",e["-webkit-user-select"]="none",e["-o-user-select"]="none",e["-ms-user-select"]="none",e["user-select"]="none"},t.setMobile=function(t){_t=t},t.setTablet=function(t){vt=t},t.isMobile=function(){return void 0!==_t?_t:(void 0===mt&&(mt=this.$_checkMobile()),mt)},t.isTablet=function(){return void 0!==vt?vt:(void 0===bt&&(bt=this.$_checkTablet()),bt)},t.$_checkTablet=function(){return t.isMobile()&&/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(Q.toLowerCase())},t.$_checkMobile=function(){var t=!1;return(Q.match(/Android/i)||Q.match(/webOS/i)||Q.match(/iPhone/i)||Q.match(/iPad/i)||Q.match(/iPod/i)||Q.match(/BlackBerry/i)||Q.match(/Windows Phone/i))&&(t=!0),t||(t="ontouchstart"in window&&Q.indexOf("Macintosh")>=0),t},t.getBrowserSize=function(t){var e=t?t.ownerDocument:document,i=e.defaultView;return{width:i.innerWidth||e.documentElement.clientWidth||e.body.clientWidth,height:i.innerHeight||e.documentElement.clientHeight||e.body.clientHeight}},t.move=function(t,e,i){t.style.left=e+"px",t.style.top=i+"px"},t.htmlEncode=function(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML},t.detach=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t),null},t.getSize=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}},t.getScrolled=function(t){var e=t.body,i=St(t),o=t.documentElement;return{sx:i.pageXOffset||o.scrollLeft||e.scrollLeft,sy:i.pageYOffset||o.scrollTop||e.scrollTop}},t.getOffset=function(t){var e=t.ownerDocument,i=e.defaultView,o=t.getBoundingClientRect(),n=e.body,r=e.documentElement,s=i.pageYOffset||r.scrollTop||n.scrollTop,a=i.pageXOffset||r.scrollLeft||n.scrollLeft,l=r.clientTop||n.clientTop||0,u=r.clientLeft||n.clientLeft||0,c=o.left+a-u,h=o.top+s-l;return{x:Math.round(c),y:Math.round(h)}},t.isAncestorOf=function(t,e,i){var o;if((e instanceof SVGElement||e.shadowRoot)&&i&&i.composedPath)for(var n=i.composedPath();n.length&&(o=n.shift())&&!(o instanceof HTMLElement););else o=e.parentElement;for(;o;){if(o==t)return!0;o=o.parentElement}return!1},t.getComposedPath=function(t){if(t.composedPath)return t.composedPath();for(var e=t.target,i=[];e;)i.push(e),e=e.parentElement;return i},t.equalNumbers=function(t,e){return isNaN(t)&&isNaN(e)||!isNaN(t)&&t==e},t.equalArrays=function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;var i=t.length;if(i!=e.length)return!1;for(var o=0;o<i;++o)if(t[o]!==e[o])return!1;return!0},t.equalObjects=function(t,e){return t==e||JSON.stringify(t)===JSON.stringify(e)},t.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},t.incMonth=function(e,i){var o=e.getDate();return e.setDate(1),e.setMonth(e.getMonth()+i),e.setDate(Math.min(o,t.month_days[t.isLeapYear(e.getFullYear())?1:0][e.getMonth()])),e},t.incYear=function(e,i){var o=e.getDate();return e.setDate(1),e.setFullYear(e.getFullYear()+i),e.setDate(Math.min(o,t.month_days[t.isLeapYear(e.getFullYear())?1:0][e.getMonth()])),e},t.setClassName=function(t,e){(e=e||"")!=t.className&&(t.className=e)},t.addClassName=function(t,e){if(e=e||"",t.classList)t.classList.add(e);else{var i=t.className.split(" ");i.indexOf(e)<0&&i.push(e),t.className=i.join(" ")}},t.removeClassName=function(t,e){if(t.classList)t.classList.remove(e);else{var i,o=t.className.split(" ");(i=o.indexOf(e))>=0&&o.splice(i,1),t.className=o.join(" ")}},t.setStyle=function(t,e){var i=e.style;for(var o in t)null!=t[o]?i[o]=t[o]:(i.removeProperty?i.removeProperty(o):i.removeAttribute&&i.removeAttribute(o),i[o]="")},t.getBoundingClientRect2=function(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.right,width:e.right-e.left,top:e.top,bottom:e.bottom,height:e.bottom-e.top}},t.getTextLength=function(t){for(var e=0,i=0,o=0;t&&(i=t.charCodeAt(o));o++)e+=i>>7?2:1;return e},t.isEmpty=function(t){return t&&Object.keys(t).length>0},t.isPassive=function(){if(null===t.$_supportPassive){t.$_supportPassive=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t.$_supportPassive=!0}}))}catch(e){t.log("passive not support")}}return t.$_supportPassive},t.hangulToChosungAll=function(e){for(var i="",o=0;o<e.length;o++){var n=e.charCodeAt(o)-44032;i+=n>-1&&n<11172?t.cho[Math.floor(n/588)]:e[o]}return i},t.hangulToChosung=function(e){var i={cho:e,org:e};if(/[-]/.test(e)){var o=t.cho,n=e.charCodeAt(0);n>=12593&&n<=12622&&(i.org=void 0),(n-=44032)>=0&&n<11172&&(i.cho=o[Math.floor(n/588)])}return i},t.addQuot=function(t,e){return t&&(t.indexOf("\n")>=0||t.indexOf("\r\n")>=0||'"'==t.charAt(0))&&(t='"'+(t=t.replace(/\"/g,'""'))+'"'),t},t.addQuatation=function(t,e,i,o){return null!=t&&((i||o)&&(i&&t&&(t=t.replace(/\n/g,i)),o&&t&&(t=t.replace(/\r/g,o))),(e||t.indexOf("\n")>=0||t.indexOf(",")>=0||t.indexOf('"')>=0)&&(t='"'+t.replace(/\"/g,'""')+'"')),null===t?"":t},t.isClickableTemplate=function(t,e){return Array.prototype.some.call(t.querySelectorAll("input, textarea, a, select, button, [tabindex]"),(function(t){return e===t}))},t.isFocusableTemplate=function(t,e){return Array.prototype.some.call(t.querySelectorAll("input, textarea, select"),(function(t){var i=t.type;return t===e&&"button"!==i&&"checkbox"!==i}))},t.objectToCssText=function(t){return"string"==typeof t?t:t?Object.keys(t).map((function(e){return"".concat(e.split(/(?=[A-Z])/).join("-").toLowerCase(),":").concat(t[e])})).join(";"):null},t.getLast=function(t){return t[t.length-1]},t.camelToHyphen=function(t,e,i){return void 0===i&&(i="-"),t?e?t.split(/(?=[A-Z])/).join(i).toUpperCase():t.split(/(?=[A-Z])/).join(i).toLowerCase():t},t.find=function(t,e){for(var i=0;i<t.length;i++)if(e.call(null,t[i],i,t))return t[i]},t.isInteractive=function(t){var e=Ct(t);return t instanceof(null==e?void 0:e.HTMLInputElement)&&"checkbox"===t.type||t instanceof(null==e?void 0:e.HTMLAnchorElement)},t.isIE=gt,t.isEdge=st,t.ieAll=gt||st,t.ieOld=ct,t.isMac=tt,t.isSafari=rt,t.isChrome=ot,t.isFirefox=nt,t.isOpera=et,t.ieLeg=ht,t.ieTen=dt,t.ieNine=ft,t.isiOS=at,t.isChromium=ot||lt||it||et,t.TextProp=t.ieAll?"innerText":"textContent",t.week_days=X.RG_CONST&&X.RG_CONST.WEEKDAYS?X.RG_CONST.WEEKDAYS:["","","","","","",""],t.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],t.cho=["","","","","","","","","","","","","","","","","","",""],t.colonreg=/;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/,t.$_INVISIBLE_EDIT_BOUNDS=new q(-1e4,-1e4,100,100),t.$$_debugging=!1,t.$$_keyLog=!1,t.$$_slotMode=!1,t.$_supportPassive=null,t}(),Ot=function(){function t(){}return t.encode=function(e){var i,o,n,r,s,a,l,u="",c=0,h=t.CHARACTERS;for(e=t.utf8_encode(e);c<e.length;)r=(i=e.charCodeAt(c++))>>2,s=(3&i)<<4|(o=e.charCodeAt(c++))>>4,a=(15&o)<<2|(n=e.charCodeAt(c++))>>6,l=63&n,isNaN(o)?a=l=64:isNaN(n)&&(l=64),u=u+h.charAt(r)+h.charAt(s)+h.charAt(a)+h.charAt(l);return u},t.decode=function(e){var i,o,n,r,s,a,l="",u=0,c=t.CHARACTERS;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)i=c.indexOf(e.charAt(u++))<<2|(r=c.indexOf(e.charAt(u++)))>>4,o=(15&r)<<4|(s=c.indexOf(e.charAt(u++)))>>2,n=(3&s)<<6|(a=c.indexOf(e.charAt(u++))),l+=String.fromCharCode(i),64!=s&&(l+=String.fromCharCode(o)),64!=a&&(l+=String.fromCharCode(n));return t.utf8_decode(l)},t.utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},t.utf8_decode=function(t){for(var e="",i=0,o=0,n=0,r=0,s=t.length;i<s;)(o=t.charCodeAt(i))<128?(e+=String.fromCharCode(o),i++):o>191&&o<224?(n=t.charCodeAt(i+1),e+=String.fromCharCode((31&o)<<6|63&n),i+=2):(n=t.charCodeAt(i+1),r=t.charCodeAt(i+2),e+=String.fromCharCode((15&o)<<12|(63&n)<<6|63&r),i+=3);return e},t.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t.btoa=function(e){for(var i,o,n,r,s=t.CHARACTERS,a="",l=0,u=(e=String(e)).length%3;l<e.length;){if((o=e.charCodeAt(l++))>255||(n=e.charCodeAt(l++))>255||(r=e.charCodeAt(l++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");i=o<<16|n<<8|r,a+=s.charAt(i>>18&63)+s.charAt(i>>12&63)+s.charAt(i>>6&63)+s.charAt(63&i)}return u?a.slice(0,u-3)+"===".substring(u):a},t}();t.RowState=void 0,(Et=t.RowState||(t.RowState={})).NONE="none",Et.CREATED="created",Et.UPDATED="updated",Et.DELETED="deleted",Et.CREATE_AND_DELETED="createAndDeleted";var Rt=function(e){return e==t.RowState.DELETED||e==t.RowState.CREATE_AND_DELETED},It=function(){function t(t){this.format=t}return Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))},enumerable:!1,configurable:!0}),t.prototype.toBool=function(t){return!!this.toBoolStrict(t)},t.prototype.toBoolEx=function(t){var e=this._sensitive?t:t.toLowerCase(),i=this.$_toBool(t);return null!=i?i:e?Boolean(e):void 0},t.prototype.toBoolStrict=function(t){return this.$_toBool(t)},t.prototype.toText=function(t){return t?this._trueText:this._falseText},t.prototype.$_toBool=function(t){if(this._values){var e=this._sensitive?t:t.toLowerCase();if(e in this._values)return this._values[e]}},t.prototype.parse=function(t){var e=this;if(this._values={},t){this._trueText=this._falseText=null;var i=t.split(/[;\:]/),o=this._sensitive="0"!=i[2],n=i[0]?o?i[0].split(","):i[0].toLowerCase().split(","):null,r=i[1]?o?i[1].split(","):i[1].toLowerCase().split(","):null;n&&n.forEach((function(t){e._values[t]=!1,e._falseText=e._falseText||t})),r&&r.forEach((function(t){e._values[t]=!0,e._trueText=e._trueText||t}))}else this._values[this._trueText="true"]=!0,this._values[this._falseText="false"]=!1},t.Default=new t("false,f,0:true,t,1:0"),t}(),Tt=function(){function t(t){this._format=null,this._baseYear=2e3,this._patterns=[],this._amText="AM",this._pmText="PM",t&&(this.format=t)}return Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){if(t!=this._format){if(!t)throw new Error("Invalid empty date format");this._format=t,this.parseFormat(t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t)},enumerable:!1,configurable:!0}),t.prototype.parse=function(e,i){try{for(var o=0,n=1,r=1,s=0,a=0,l=0,u=0,c=0,h=0,p=this._patterns.length,d=0,f=e.length,g=0;g<p&&d<f;g++){var y=this._patterns[g],_=y.c,m=y.len;switch(_){case"y":o=parseInt(e.substr(d,m));break;case"M":n=parseInt(e.substr(d,m));break;case"d":r=parseInt(e.substr(d,m));break;case"a":if(this._amText&&e.indexOf(this._amText,d)==d)c=12,m=this._amText.length;else if("am"===e.substr(d,2).toLocaleLowerCase())c=12,m=2;else if(this._pmText&&e.indexOf(this._pmText,d)==d)h=12,m=this._pmText.length;else{if("pm"!==e.substr(d,2).toLocaleLowerCase()){if(i)throw"Invalid date value: "+e;return null}h=12,m=2}break;case"H":case"h":s=parseInt(e.substr(d,m));break;case"m":a=parseInt(e.substr(d,m));break;case"s":l=parseInt(e.substr(d,m));break;case"S":u=parseInt(e.substr(d,m));break;case".":case"/":case"-":case":":case" ":if(t.DATE_SEPARATORS.indexOf(e.charAt(d))<0){if(i)throw"Invalid date value: ".concat(e,", invalid token[").concat(e.charAt(d),"]");return null}break;default:if(i)throw"Invalid date value: ".concat(e,", invalid pattern[").concat(e.charAt(d),"]");return null}d+=m}return o<100&&(o+=this._baseYear),c>0?12==s&&(s=0):h>0&&s<12&&(s+=12),new Date(o,n-1,r,s,a,l,u)}catch(t){if(i)throw t;return null}},t.prototype.parseFormat=function(t){var e=this,i=function(t){t&&!isNaN(parseInt(t))&&(e._baseYear=parseInt(t))},o=function(t){if(t){var i=t.split(",");i.length>0&&i[0]&&(e._amText=i[0]||e._amText),i.length>1&&i[1]&&(e._pmText=i[1]||e._pmText)}},n=t.split(";");if(n.length>2)i(n[1]),o(n[2]);else if(n.length>1){var r=n[1];isNaN(parseInt(r))?r&&o(r):i(r)}var s,a,l,u=n[0],c=u.length,h=0;for(this._patterns=[];h<c;)if(s=h,a=u.charAt(h),xt.isWhiteSpace(a)){for(h++;h<c&&xt.isWhiteSpace(u.charAt(h));)h++;this._patterns.push({c:" ",p:s,len:h-s})}else{switch(l=0,a){case"y":4!=(l=this.getPattern(u,h,a))&&2!=l&&this.throwInvalidFormat(u);break;case"M":case"d":case"H":case"h":case"m":case"s":2!=(l=this.getPattern(u,h,a))&&this.throwInvalidFormat(u);break;case"S":3!=(l=this.getPattern(u,h,a))&&this.throwInvalidFormat(u);break;case"a":case".":case"/":case"-":case":":1!=(l=this.getPattern(u,h,a))&&this.throwInvalidFormat(u);break;default:this.throwInvalidFormat(u)}l>0&&(this._patterns.push({c:a,p:h,len:l}),h+=l)}},t.prototype.throwInvalidFormat=function(t){throw new Error("Invalid date format: "+t)},t.prototype.throwInvalidValue=function(t){throw new Error("Invalid date format: "+t)},t.prototype.getPattern=function(t,e,i){for(var o=1;++e<t.length&&t.charAt(e)==i;)o++;return o},t.DATE_SEPARATORS="./-: ",t}(),Pt=function(){function t(t){this._format="",this._type=0,this._parser=new Tt(null),this.format=t}return t.initialize=function(){t.Default.amText="AM",t.Default.pmText="PM",t.Default.baseYear=2e3},t.getReader=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},t.getSimpleDateNull=function(t){if(t instanceof Date)return t;if("number"==typeof t)return new Date(t);if("string"!=typeof t)return null;var e=(t=8===t.length&&/^[0-9]*$/.test(t)?t.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"):t).split(/[.//-]/);if(3!=e.length)return null;var i=parseInt(e[0]),o=parseInt(e[1])-1,n=parseInt(e[2]);return i==(t=new Date(i,o,n)).getFullYear()&&o==t.getMonth()&&n==t.getDate()?t:null},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"amText",{get:function(){return this._parser.amText},set:function(t){this._parser.amText=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pmText",{get:function(){return this._parser.pmText},set:function(t){this._parser.pmText=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseYear",{get:function(){return this._parser.baseYear},set:function(t){this._parser.baseYear=t},enumerable:!1,configurable:!0}),t.prototype.toDate=function(t,e){if(!t)return null;var i=null;switch(this._type){case 0:i=this._parser.parse(t,e);break;case 2:var o=parseInt(t);i=new Date(o);break;default:i=new Date(t)}return i&&!isNaN(i.getTime())?i:null},t.prototype.parse=function(e){if(e){if(e.indexOf("T")>0||e.indexOf("Z")>0||/([+\-])(\d\d)?(:)?(\d\d)?$/.test(e))this._type=t.Formats.indexOf("iso");else{var i=e.toLowerCase();this._type=Math.max(0,t.Formats.indexOf(i))}0==this._type&&(this._parser.format=e)}},t.Formats=["custom","iso","timestamp","platform"],t.Default=new t("yyyy/MM/dd HH:mm:ss"),t.Formatters={},t}();Pt.initialize();var Dt=0,kt=function(){function t(t){this.$_disposed=!1,t||(this.$_hash=Dt++)}return t.prototype.dispose=function(){return this.$_disposed||this.$_disposing||(this.$_disposed=!0,this.$_disposing=!0,this._doDispose()),null},t.prototype._doDispose=function(){},Object.defineProperty(t.prototype,"disposing",{get:function(){return this.$_disposing},enumerable:!1,configurable:!0}),t.prototype.isMe=function(t){return t==this.$_hash},t.prototype.$_getters=function(t){for(var e=[],i=Object.getOwnPropertyNames(t),o=0,n=i.length;o<n;o++){var r=i[o],s=Object.getOwnPropertyDescriptor(t,r);s&&s.get&&e.push(r)}return e},t.prototype.doAssignSimple=function(t){return!1},t.prototype.assignFrom=function(e){var i=Object.getPrototypeOf(this);if(e instanceof t)for(var o=Object.getPrototypeOf(e),n={};o&&o.constructor!=t;){for(var r=this.$_getters(o),s=0,a=r.length;s<a;s++)if(!((h=r[s])in n))if(n[h]=null,p=Object.getOwnPropertyDescriptor(i,h))p.set&&(u=Object.getOwnPropertyDescriptor(o,h).get)&&p.set.call(this,u.call(e));else for(var l=Object.getPrototypeOf(i);l;){var u,c=Object.getOwnPropertyDescriptor(l,h);if(c)c.set&&(u=Object.getOwnPropertyDescriptor(o,h).get)&&c.set.call(this,u.call(e)),l=null;else l=Object.getPrototypeOf(l)}o=Object.getPrototypeOf(o)}else if(!this.doAssignSimple(e))for(var h in e){var p;if(p=Object.getOwnPropertyDescriptor(i,h))p.set&&p.set.call(this,e[h]);else for(l=Object.getPrototypeOf(i);l;){var d=Object.getOwnPropertyDescriptor(l,h);d?(d.set&&d.set.call(this,e[h]),l=null):l=Object.getPrototypeOf(l)}}},t.prototype.extend=function(t){for(var e in t)this.hasOwnProperty(e)&&(this[e]=t[e])},t.prototype.toProxy=function(e){void 0===e&&(e=!0);for(var i={},o=Object.getPrototypeOf(this),n=[];o&&o.constructor!=t;){for(var r=this.$_getters(o),s=0,a=r.length;s<a;s++){var l=r[s],u=Object.getOwnPropertyDescriptor(o,l);if(u){if(u.get&&u.set&&n.indexOf(l)<0){n.push(l);var c=u.get.call(this);(e||void 0!==c)&&(i[l]=c)}}else for(var h=Object.getPrototypeOf(o);h;){var p=Object.getOwnPropertyDescriptor(h,l);p?(p.get&&p.set&&n.indexOf(l)<0&&(n.push(l),c=p.get.call(this),(e||void 0!==c)&&(i[l]=p.get.call(this))),h=null):h=Object.getPrototypeOf(h)}}o=Object.getPrototypeOf(o)}return i},t}(),At=function(t){function e(e,i){var o=t.call(this,e)||this;return o.message=e,o.tokenPos=i,o}return n(e,t),e}(Error),Lt=function(t){function e(e){var i=t.call(this,e)||this;return i.message=e,i}return n(e,t),e}(Error),Mt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=[],o=0,n=t;o<n.length;o++)i[n[o]]=!0;return i},Ft=Mt(26,27),Nt=Mt(40,45,46,47,48,49,50,51,52,53,54,55,56,57,41,42,43,44),Vt=Mt(4,5,18,19),Bt=Mt(11,3,2,14,15,16,17),Gt=function(){function t(){this.IS_IDENT=[],this.IS_INTEGER=[],this.IS_NUMBER=[],this.IS_WHITE=[],this.IS_END=[],this.QUOTATION='"'.charCodeAt(0),this.SQUOTATION="'".charCodeAt(0),this.BACKSLASH="\\".charCodeAt(0),this.Keywords={str:20,num:21,bool:23,not:13,len:24,and:11,in:12,mod:15,or:18,div:14,shl:16,shr:17,xor:19,trim:25,is:26,like:46,ilike:48,match:50,imatch:52,likehan:54,ilikehan:55,defined:35,null:34,empty:36,nan:37,datestr:90,year:91,month:92,day:93,hour:94,rounddown:95},this._procs=null,this._source=null,this._len=0,this._tokenId=0,this._run=0,this._runAhead=0,this._nextRun=0,this._lineNo=0,this._linePos=0,this._tokenPos=0;for(var t=0;t<256;t++)this.IS_IDENT[t]=t=="_".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0),this.IS_INTEGER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="f".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="F".charCodeAt(0),this.IS_NUMBER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t==".".charCodeAt(0)||t=="e".charCodeAt(0)||t=="E".charCodeAt(0),this.IS_WHITE[t]=t>=1&&t<=9||11==t||t>=14&&t<=32,this.IS_END[t]=0==t;this.initProcs()}return t.prototype.clear=function(){this._source=null},t.prototype.next=function(){var t=this._source.charCodeAt(this._run);this._tokenPos=this._run,t<256?this._procs[t].call(this):this.identProc()},t.prototype.unkownProc=function(){this._tokenId=0,this._run++},t.prototype.symbolProc=function(){this._tokenId=80,this._run++},t.prototype.commaProc=function(){this._tokenId=32,this._run++},t.prototype.crProc=function(){this._tokenId=33,10==this._source.charCodeAt(this._run+1)?this._run+=2:this._run++,this._lineNo++,this._linePos=this._run},t.prototype.lfProc=function(){this._tokenId=33,this._run++,this._lineNo++,this._linePos=this._run},t.prototype.equalProc=function(){this._tokenId=40,this._run++},t.prototype.greaterProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=42,this._run+=2):(this._tokenId=41,this._run++)},t.prototype.lowerProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=44,this._run+=2):">"==this._source.charAt(this._run+1)?(this._tokenId=45,this._run+=2):(this._tokenId=43,this._run++)},t.prototype.nextIdent=function(){for(var t=this._run;t<this._len&&!this.IS_IDENT[this._source.charCodeAt(t)];)t++;for(var e=t;t<this._len&&this.IS_IDENT[this._source.charCodeAt(t)];)t++;return t>e?(this._nextRun=t,this._source.substr(e,t-e).toLowerCase()):null},t.prototype.identProc=function(){for(var t=this._run;this._run<this._len&&(this.IS_IDENT[this._source.charCodeAt(this._run)]||this._source.charCodeAt(this._run)>255);)this._run++;var e=this._source.substr(t,this._run-t).toLowerCase();if(this.Keywords.hasOwnProperty(e))switch(this._tokenId=this.Keywords[e],this._tokenId){case 13:if(e=this.nextIdent())switch(e){case"like":this._tokenId=47,this._run=this._nextRun;break;case"ilike":this._tokenId=49,this._run=this._nextRun;break;case"match":this._tokenId=51,this._run=this._nextRun;break;case"imatch":this._tokenId=53,this._run=this._nextRun;break;case"likehan":this._tokenId=56,this._run=this._nextRun;break;case"ilikehan":this._tokenId=57,this._run=this._nextRun}break;case 26:"not"==(e=this.nextIdent())&&(this._tokenId=27,this._run=this._nextRun)}else this._tokenId=10},t.prototype.integerProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_INTEGER[this._source.charCodeAt(this._run)];)this._run++},t.prototype.numberProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_NUMBER[this._source.charCodeAt(this._run)];){if("."==this._source.charAt(this._run)){if("."==this._source.charAt(this._run+1))break;this._tokenId=63}this._run++}},t.prototype.minusProc=function(){this._tokenId=4,this._run++},t.prototype.plusProc=function(){this._tokenId=5,this._run++},t.prototype.pointProc=function(){"."==this._source.charAt(this._run+1)?(this._tokenId=68,this._run+=2):(this._tokenId=65,this._run++)},t.prototype.roundOpenProc=function(){this._tokenId=66,this._run++},t.prototype.roundCloseProc=function(){this._tokenId=67,this._run++},t.prototype.slashProc=function(){this._tokenId=2,this._run++},t.prototype.spaceProc=function(){for(this._tokenId=71,this._run++;this._run<this._len&&this.IS_WHITE[this._source.charCodeAt(this._run)];)this._run++},t.prototype.bracketOpenProc=function(){this._tokenId=69,this._run++},t.prototype.bracketCloseProc=function(){this._tokenId=70,this._run++},t.prototype.starProc=function(){this._tokenId=3,this._run++},t.prototype.modProc=function(){this._tokenId=15,this._run++},t.prototype.stringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new At("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.QUOTATION);this._run++},t.prototype.smallStringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new At("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.SQUOTATION);this._run++},t.prototype.initProcs=function(){this._procs=[];for(var t=1;t<=255;t++)this._procs[t]=this.symbolProc;for(t=1;t<=32;t++)this._procs[t]=this.spaceProc;for(this._procs[10]=this.lfProc,this._procs[13]=this.crProc,this._procs["$".charCodeAt(0)]=this.integerProc,this._procs[this.QUOTATION]=this.stringProc,this._procs[this.SQUOTATION]=this.smallStringProc,t=0;t<=9;t++)this._procs["0".charCodeAt(0)+t]=this.numberProc;for(t="A".charCodeAt(0);t<="Z".charCodeAt(0);t++)this._procs[t]=this.identProc;for(t="a".charCodeAt(0);t<="z".charCodeAt(0);t++)this._procs[t]=this.identProc;this._procs["_".charCodeAt(0)]=this.identProc,this._procs["(".charCodeAt(0)]=this.roundOpenProc,this._procs[")".charCodeAt(0)]=this.roundCloseProc,this._procs["*".charCodeAt(0)]=this.starProc,this._procs["+".charCodeAt(0)]=this.plusProc,this._procs[",".charCodeAt(0)]=this.commaProc,this._procs["-".charCodeAt(0)]=this.minusProc,this._procs[".".charCodeAt(0)]=this.pointProc,this._procs["/".charCodeAt(0)]=this.slashProc,this._procs["%".charCodeAt(0)]=this.modProc,this._procs["<".charCodeAt(0)]=this.lowerProc,this._procs["=".charCodeAt(0)]=this.equalProc,this._procs[">".charCodeAt(0)]=this.greaterProc,this._procs["[".charCodeAt(0)]=this.bracketOpenProc,this._procs["]".charCodeAt(0)]=this.bracketCloseProc},Object.defineProperty(t.prototype,"tokenId",{get:function(){return this._tokenId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tokenLoc",{get:function(){return{x:this._tokenPos-this._linePos,y:this._lineNo}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tokenLen",{get:function(){return this._run-this._tokenPos},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"token",{get:function(){return this._source.substr(this._tokenPos,this.tokenLen)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSpace",{get:function(){return 71==this._tokenId},enumerable:!1,configurable:!0}),t.prototype.init=function(t){this._source=t,this._len=t.length,this._lineNo=0,this._linePos=0,this._tokenPos=0,this._runAhead=this._run=0,this._tokenId=0},t.prototype.charAhread=function(){for(this._runAhead=this._run;this._runAhead<this._len&&this._source.charCodeAt(this._runAhead)>0&&this._source.charCodeAt(this._runAhead)<=32;)this._runAhead++;return this._source.charCodeAt(this._runAhead)},t.prototype.nextId=function(t){do{this.next()}while(this._run<this._len&&this._tokenId!=t);return null},t.prototype.nextNoSpace=function(){if(this._run<this._len)do{this.next()}while(this._run<this._len&&this.isSpace);return null},t.prototype.isFirstInLine=function(){if(0==this._tokenPos)return!0;var t,e=this._tokenPos;for(e--;e>0&&this.IS_WHITE[this._source.charCodeAt(e)];)e--;return 0==e||10==(t=this._source.charCodeAt(e))||13==t},t}(),jt=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.isIdentifier=function(t){throw new Error("Token is not a valid Identifier: "+t)},e.prototype.evaluateIdentifier=function(t){throw new Error("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,e){throw new Error("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,e,i){throw new Error("Invalid identifier indexer: "+t)},e}(kt),Ht=function(){function t(){}return Object.defineProperty(t.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"asLiteral",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.prepareValue=function(){},t.prototype.getLiteral=function(){},t.prototype.isIdentifier=function(t){return!1},t.prototype.toString=function(){return String(this)},t}(),$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Ht);!function(t){function e(){return t.call(this)||this}n(e,t),e.prototype.evaluate=function(t){},e.prototype.toString=function(){return""},e.Default=new e}(Ht);var Wt,Ut=function(t){function e(){var e=t.call(this)||this;return e._operator=0,e}return n(e,t),e.prototype.evaluate=function(t){if(this._literal)return this._literal.value;if(!this._rightExpr)return this._leftExpr.evaluate(t);var e=this._leftExpr.evaluate(t),i=this._rightExpr.evaluate(t);switch(this._operator){case 40:return e==i;case 45:return e!=i;case 41:return e>i;case 42:return e>=i;case 43:return e<i;case 44:return e<=i;case 46:return this.calcLike(e,i,!1);case 47:return!this.calcLike(e,i,!1);case 48:return this.calcLike(e,i,!0);case 49:return!this.calcLike(e,i,!0);case 54:return this.calcLikeHan(e,i,!1);case 56:return!this.calcLikeHan(e,i,!1);case 55:return this.calcLikeHan(e,i,!0);case 57:return!this.calcLikeHan(e,i,!0);case 50:return this.calcMatch(e,i,!1);case 51:return!this.calcMatch(e,i,!1);case 52:return this.calcMatch(e,i,!0);case 53:return!this.calcMatch(e,i,!0);default:throw new Lt("Unknown operator: "+this._operator)}},e.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(this._rightExpr){var e=this._leftExpr.toString(),i=this._rightExpr.toString(),o=void 0;switch(this._operator){case 40:o="=";break;case 45:o="<>";break;case 41:o=">";break;case 42:o=">=";break;case 43:o="<";break;case 44:o="<=";break;case 46:o="like";break;case 47:o="not like";break;case 48:o="ilike";break;case 49:o="not ilike";break;case 50:o="match";break;case 51:o="not match";break;case 52:o="imatch";break;case 53:o="not imatch";break;case 54:o="likeHan";break;case 56:o="not likehan";break;case 55:o="ilikeHan";break;case 57:o="not ilikehan";break;case 32:o=",";break;default:o="<<ERROR>>"}t="("+e+" "+o+" "+i+")"}else t=this._leftExpr.toString();return t},e.prototype.isIdentifier=function(t){return this._leftExpr&&!this._rightExpr&&this._leftExpr.isIdentifier(t)},e.prototype.prepareValue=function(){this._leftExpr.prepareValue(),null==this._rightExpr?this._literal=this._leftExpr.getLiteral():this._rightExpr.prepareValue()},e.prototype.getLiteral=function(){return this._literal},e.prototype.calcLike=function(t,e,i){var o=String(t),n=String(e);if(o&&n){i&&(o=o.toLowerCase(),n=n.toLowerCase());var r=n.length;if(r>1){var s="%"==n.charAt(0),a="%"==n.charAt(r-1);return s&&a?(n=n.substr(1,r-2),o.indexOf(n,0)>=0):s?(n=n.substr(1,r-1),o.lastIndexOf(n)==o.length-n.length):a?(n=n.substr(0,r-1),0==o.indexOf(n,0)):o==n}return"%"!=n&&o==n}return!1},e.prototype.calcLikeHan=function(t,e,i){if(t&&e){t=String(t);var o=(e=String(e)).length,n="%"==e.charAt(0),r="%"==e.charAt(o-1);if(e=n&&r?e.substr(1,o-2):n?e.substr(1,o-1):r?e.substr(0,o-1):e,t.length<e.length)return;i&&(t=t.toLowerCase(),e=e.toLowerCase());var s=xt.hangulToChosungAll(t),a=xt.hangulToChosungAll(e),l=-1,u=void 0;if(n&&r){for(;(l=s.indexOf(a,l+1))>=0;){for(var c=0;c<a.length&&c+l<s.length;c++){var h=xt.hangulToChosung(t[c+l]);if((p=xt.hangulToChosung(e[c])).org&&p.org!==h.org||!p.cho||p.cho!==h.cho){u=!1;break}u=!0}if(u)return!0}return!1}if(n){if((l=s.lastIndexOf(a))===s.length-a.length){for(c=0;c<a.length;c++){if(h=xt.hangulToChosung(t[l+c]),(p=xt.hangulToChosung(e[c])).org&&p.org!==h.org||!p.cho||p.cho!==h.cho){u=!1;break}u=!0}if(u)return!0}return!1}if(r){if(0===s.indexOf(a)){for(c=0;c<a.length;c++){var p;if(h=xt.hangulToChosung(t[c]),(p=xt.hangulToChosung(e[c])).org&&p.org!==h.org||!p.cho||p.cho!==h.cho){u=!1;break}u=!0}if(u)return!0}return!1}return t==e}return!1},e.prototype.calcMatch=function(t,e,i){return new RegExp(e,"m"+(i?"i":"")).test(t)},e}(Ht),zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t){},e}(Ht),Kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.toString=function(){return"defined"},e}(zt),Yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.toString=function(){return"empty"},e}(zt),qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return NaN},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"null"},e}(zt),Xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.toString=function(){return"NaN"},e}(zt),Qt=function(t){function e(i,o,n){var r=t.call(this)||this;return r._leftExpr=i,r._operator=o,r._isNot=27==o,r._value=-1,n instanceof Kt?r._value=e.DEFINED:n instanceof qt?r._value=e.NULL:n instanceof Yt?r._value=e.EMPTY:n instanceof Xt&&(r._value=e.NAN),r}return n(e,t),e.prototype.prepareValue=function(){this._leftExpr.prepareValue(),this._literal=this._leftExpr.getLiteral()},e.prototype.getLiteral=function(){return null},e.prototype.evaluate=function(t){var i,o=this._literal?this._literal.value:this._leftExpr.evaluate(t);switch(this._value){case e.DEFINED:i=void 0!==o;break;case e.NULL:i=null==o;break;case e.EMPTY:i=null==o||0==String(o).length;break;case e.NAN:i=null===o||isNaN(o);break;default:return}return this._isNot?!i:i},e.prototype.toString=function(){var t="<<ERROR>>";switch(this._value){case e.DEFINED:t="defined";break;case e.NULL:t="null";break;case e.EMPTY:t="empty";break;case e.NAN:t="NaN"}return"("+(this._isNot?"is not ":"is ")+t+")"},e.DEFINED=0,e.NULL=1,e.EMPTY=2,e.NAN=3,e}(Ut),Jt=function(t){function e(e){var i=t.call(this)||this;return i._value=Number(e),i}return n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t){return this._value},e.prototype.toString=function(){return String(this._value)},e}($t),Zt=function(t){function e(e){var i=t.call(this)||this;return i._value=parseInt(e),i}return n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t){return this._value},e.prototype.toString=function(){return String(this._value)},e}($t),te=function(t){function e(e){var i=t.call(this)||this;i._value=e.substr(1,e.length-2);for(var o="",n=0,r=!1;n<i._value.length;)"\\"!=i._value[n]||r?(r=!1,o+=i._value[n++]):(r=!0,n++);return i._value=o,i}return n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t){return this._value},e.prototype.toString=function(){return"'"+this._value+"'"},e}($t),ee=function(t){function e(e){var i=t.call(this)||this;return i._idKey=-651212,i._literal=e,i}return n(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return this._literal},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t){return-651212==this._idKey&&(this._idKey=t.isIdentifier(this._literal)),t.evaluateIdentifier(this._idKey)},e.prototype.toString=function(){return this._literal},e}(Ht),ie=function(t){function e(e,i,o){var n=t.call(this)||this;return n._idKey=-1490313,n._intIndex=NaN,n._strIndex=null,n._ident=e,n._indexer=i,n._capital=o,n}return n(e,t),e.prototype.prepareValue=function(){var t=this._indexer.asLiteral;if(t||this._indexer instanceof Ut&&(this._indexer.prepareValue(),t=this._indexer.getLiteral()),t){var e=t.value;"string"==typeof e?this._strIndex=e:this._intIndex=parseInt(e),this._capital&&this._strIndex&&(this._strIndex=this._strIndex.toUpperCase())}},e.prototype.getLiteral=function(){return null},e.prototype.evaluate=function(t){if(-1490313==this._idKey&&(this._idKey=t.isIdentifier(this._ident)),this._strIndex)return t.evaluateIndexerS(this._idKey,this._strIndex,this._capital);if(isNaN(this._intIndex)){var e=this._indexer.evaluate(t);return"string"==typeof e?t.evaluateIndexerS(this._idKey,e,this._capital):t.evaluateIndexerI(this._idKey,e)}return t.evaluateIndexerI(this._idKey,this._intIndex)},e.prototype.toString=function(){return this._ident+"["+this._indexer.toString()+"]"},e}(Ut),oe=function(t){function e(e){var i=t.call(this)||this;return i._factor=e,i}return n(e,t),e.prototype.prepareValue=function(){this._literal=this._factor.asLiteral,!this._literal&&this._factor instanceof Ht&&(this._factor.prepareValue(),this._literal=this._factor.getLiteral())},e.prototype.getLiteral=function(){return null},e}(Ht),ne=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof $t?this._literal.value:this._factor.evaluate(t);return e?e.length:0},e.prototype.toString=function(){return"(len "+this._factor+")"},e}(oe),re=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof $t?this._literal.value:this._factor.evaluate(t);return e?e.trim():e},e.prototype.toString=function(){return"(trim "+this._factor+")"},e}(oe),se=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){return-(this._literal instanceof $t?this._literal.value:this._factor.evaluate(t))},e.prototype.toString=function(){return"-"+this._factor},e}(oe),ae=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){return this._literal instanceof $t?this._literal.value:this._factor.evaluate(t)},e.prototype.toString=function(){return"+"+this._factor},e}(oe),le=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){return!(this._literal instanceof $t?this._literal.value:this._factor.evaluate(t))},e.prototype.toString=function(){return"(not "+this._factor+")"},e}(oe),ue=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof $t?this._literal.value:this._factor.evaluate(t);return Boolean(e)},e.prototype.toString=function(){return"(bool "+this._factor+")"},e}(oe),ce=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof $t?this._literal.value:this._factor.evaluate(t);return Number(e)},e.prototype.toString=function(){return"(num "+this._factor+")"},e}(oe),he=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof $t?this._literal.value:this._factor.evaluate(t);return String(e)},e.prototype.toString=function(){return"(str "+this._factor+")"},e}(oe),pe=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof $t?this._literal.value:this._factor.evaluate(t);if(e instanceof Date){var i=xt.pad;e=i(e.getFullYear(),4)+i(e.getMonth()+1,2)+i(e.getDate(),2)}return String(e)},e.prototype.toString=function(){return"(datestr "+this._factor+")"},e}(oe),de=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof $t?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getFullYear():null},e.prototype.toString=function(){return"(year "+this._factor+")"},e}(oe),fe=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof $t?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getMonth()+1:null},e.prototype.toString=function(){return"(month "+this._factor+")"},e}(oe),ge=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof $t?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getDate():null},e.prototype.toString=function(){return"(day "+this._factor+")"},e}(oe),ye=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof $t?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getHours():null},e.prototype.toString=function(){return"(hour "+this._factor+")"},e}(oe),_e=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.evaluate=function(t){var e=this._factor,i=e.getLiteral();if(e.getLiteral())return i.value;if(e._rightExpr){var o=e._leftExpr.evaluate(t),n=e._rightExpr.evaluate(t);if(32===e._operator){var r=Math.pow(10,n);return Math.floor(o*r)/r}throw new Lt("Unknown operator: "+e._operator)}return e._leftExpr.evaluate(t)},e.prototype.toString=function(){return"(rounddown "+this._factor+")"},e}(oe),me=function(t){function e(){var e=t.call(this)||this;return e._factors=[],e._operators=[],e._literal=null,e}return n(e,t),e.prototype.addFactor=function(t){this._factors.push(t)},e.prototype.addOperator=function(t){this._operators.push(t)},e.prototype.isIdentifier=function(t){return 1==this._factors.length&&this._factors[0]instanceof ee&&this._factors[0].identifier==t},e.prototype.prepareValue=function(){for(var t=0,e=this._factors.length;t<e;t++)this._factors[t].prepareValue();if(0==this._operators.length){var i=this._factors[0];this._literal=i.asLiteral,this._literal||(this._literal=i.getLiteral())}},e.prototype.getLiteral=function(){return this._literal},e.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._factors.length,i=this._factors[0].evaluate(t),o=1;o<e;o++){var n=this._factors[o].evaluate(t);switch(this._operators[o-1]){case 11:i=i&&n;break;case 3:i*=n;break;case 2:i/=n;break;case 14:i=Math.floor(Math.floor(i)/Math.floor(n));break;case 15:i%=n;break;case 16:i<<=n;break;case 17:i>>=n}}return i},e.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._factors.length)t=this._factors[0].toString();else{t="("+this._factors[0].toString();for(var e=1;e<this._factors.length;e++){switch(this._operators[e-1]){case 11:t+=" and ";break;case 3:t+=" * ";break;case 2:case 14:t+=" / ";break;case 15:t+=" mod ";break;case 16:t+=" shl ";break;case 17:t+=" shr "}t+=this._factors[e].toString()}t+=")"}return t},e}(Ht),ve=function(t){function e(){var e=t.call(this)||this;return e._terms=[],e._operators=[],e._literal=null,e}return n(e,t),e.prototype.addTerm=function(t){this._terms.push(t)},e.prototype.addOperator=function(t){this._operators.push(t)},e.prototype.isIdentifier=function(t){return 1==this._terms.length&&this._terms[0].isIdentifier(t)},e.prototype.prepareValue=function(){for(var t=0,e=this._terms.length;t<e;t++)this._terms[t].prepareValue();0==this._operators.length&&(this._literal=this._terms[0].getLiteral())},e.prototype.getLiteral=function(){return this._literal},e.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._terms.length,i=this._terms[0].evaluate(t),o=1;o<e;o++){var n=this._terms[o].evaluate(t);switch(this._operators[o-1]){case 4:i-=n;break;case 5:i+=n;break;case 18:i=i||n;break;case 19:i^=n}}return i},e.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._terms.length)t=this._terms[0].toString();else{t="("+this._terms[0].toString();for(var e=1;e<this._terms.length;e++){switch(this._operators[e-1]){case 4:t+=" - ";break;case 5:t+=" + ";break;case 18:t+=" or ";break;case 19:t+=" xor ";break;default:t+=" <<ERROR>> "}t+=this._terms[e].toString()}t+=")"}return t},e}(Ht),be=function(){function t(){this._node=null,this._capitalIndexers=null,this._lexer=new Gt}return t.prototype.syntaxError=function(t,e){throw new At(t,e)},t.prototype.expected=function(t){if(t!=this._lexer.tokenId)throw new At("Token is not a expected kind ["+t+"]: "+this._lexer.tokenId,this._lexer.tokenLoc);this.nextToken()},t.prototype.nextToken=function(){this._lexer.nextNoSpace()},t.prototype.doExpression=function(){var t,e=null,i=this.doSimpleExpression();if(Ft[t=this._lexer.tokenId]){this.nextToken();var o=this.doSimpleExpression();o.prepareValue();var n=o.getLiteral();if(!(n instanceof zt))throw new At("is operator's operand must be defined, null or empty: "+this._lexer.tokenId,null);e=new Qt(i,t,n)}else(e=new Ut)._leftExpr=i,(Nt[this._lexer.tokenId]||32==this._lexer.tokenId)&&(e._operator=this._lexer.tokenId,this.nextToken(),e._rightExpr=this.doSimpleExpression());return e},t.prototype.doSimpleExpression=function(){var t=new ve;for(t.addTerm(this.doTerm());Vt[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addTerm(this.doTerm());return t},t.prototype.doTerm=function(){var t=new me;for(t.addFactor(this.doFactor());Bt[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addFactor(this.doFactor());return t},t.prototype.doFactor=function(){var t=this._lexer.tokenId;switch(t){case 61:return this.doCharString();case 66:return this.doRoundOpen();case 10:return this.doIdentifier();case 64:return this.doInteger();case 63:return this.doNumber();case 4:return this.doMinus();case 5:return this.doPlus();case 13:return this.doNot();case 35:return this.doDefined();case 34:return this.doNull();case 36:return this.doEmpty();case 37:return this.doNaN();case 23:return this.doToBool();case 21:return this.doToNumber();case 20:return this.doToString();case 24:return this.doLength();case 25:return this.doTrim();case 90:return this.doToDateString();case 91:return this.doToYear();case 92:return this.doToMonth();case 93:return this.doToDay();case 94:return this.doToHour();case 95:return this.doRoundDown()}throw new At("Unkown token: "+t,this._lexer.tokenLoc)},t.prototype.doCharString=function(){var t=this._lexer.token;return this.nextToken(),new te(t)},t.prototype.doRoundOpen=function(){this.nextToken();var t=this.doExpression();return this.expected(67),t},t.prototype.doIdentifier=function(){var t=this._lexer.token;if(this.nextToken(),69==this._lexer.tokenId){this.nextToken();var e=this.doExpression();return this.expected(70),new ie(t,e,this._capitalIndexers.indexOf(t)>=0)}return new ee(t)},t.prototype.doNumber=function(){var t=this._lexer.token;return this.nextToken(),new Jt(t)},t.prototype.doInteger=function(){var t=this._lexer.token;return this.nextToken(),new Zt(t)},t.prototype.doMinus=function(){return this.nextToken(),new se(this.doFactor())},t.prototype.doPlus=function(){return this.nextToken(),new ae(this.doFactor())},t.prototype.doNot=function(){return this.nextToken(),new le(this.doFactor())},t.prototype.doDefined=function(){return this.nextToken(),new Kt},t.prototype.doNull=function(){return this.nextToken(),new qt},t.prototype.doEmpty=function(){return this.nextToken(),new Yt},t.prototype.doNaN=function(){return this.nextToken(),new Xt},t.prototype.doToBool=function(){return this.nextToken(),new ue(this.doFactor())},t.prototype.doToNumber=function(){return this.nextToken(),new ce(this.doFactor())},t.prototype.doToString=function(){return this.nextToken(),new he(this.doFactor())},t.prototype.doLength=function(){return this.nextToken(),new ne(this.doFactor())},t.prototype.doTrim=function(){return this.nextToken(),new re(this.doFactor())},t.prototype.doToDateString=function(){return this.nextToken(),new pe(this.doFactor())},t.prototype.doToYear=function(){return this.nextToken(),new de(this.doFactor())},t.prototype.doToMonth=function(){return this.nextToken(),new fe(this.doFactor())},t.prototype.doToDay=function(){return this.nextToken(),new ge(this.doFactor())},t.prototype.doToHour=function(){return this.nextToken(),new ye(this.doFactor())},t.prototype.doRoundDown=function(){return this.nextToken(),new _e(this.doFactor())},t.prototype.parse=function(t,e){if(t){this._capitalIndexers=e||[],this._lexer.init(t),this.nextToken();var i=this.doExpression();return i&&i.prepareValue(),this._lexer.clear(),this._capitalIndexers=null,i}return null},t.prototype.evaluate=function(t,e,i){return this.parse(t,i).evaluate(e)},t.Default=new t,t}(),Ce=["value","values"],we=function(e){function i(i,o,n){void 0===o&&(o=t.ValueType.TEXT),void 0===n&&(n=0);var r=e.call(this)||this;return r._index=-1,r._dataType=t.ValueType.TEXT,r._subType=null,r._runType=t.ValueType.TEXT,r._length=0,r._subTypeEnabled=!0,r._required=!1,r._updatable=!0,r._ranged=!1,r._runSet=null,r._typeLock=!1,r._objectKey=null,r._objectCallback=null,i&&(r.fieldName=i),null!=o&&(o===t.ValueType.DATE&&(o=t.ValueType.DATETIME,r._subType=t.ValueType.DATE,r._subTypeEnabled=!0),r._dataType=o),r._length=n,r}return n(i,e),Object.defineProperty(i.prototype,"hash",{get:function(){return this._fieldName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){if(!(t=t&&t.trim()))throw new Error("Field name must be exists.");t!=this._orgFieldName&&(this._orgFieldName=t,this._orgAttrName="@"+t,this._fieldName=t.toUpperCase(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"orgFieldName",{get:function(){return this._orgFieldName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"orgAttrName",{get:function(){return this._orgAttrName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataType",{get:function(){return this._dataType},set:function(t){t!=this._dataType&&(this._dataType=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"runType",{get:function(){return this._runType},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"subType",{get:function(){return this._subType},set:function(t){(t=t||null)!=this._subType&&(this._subType=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){t!=this._subTypeEnabled&&(this._subTypeEnabled=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseField",{get:function(){return this._baseField},set:function(t){t!=this._orgBaseField&&(this._orgBaseField=t,this._baseField=t&&t.toUpperCase(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._length},set:function(t){(t=t||0)!=this._length&&(this._length=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"set",{get:function(){return this._set},set:function(t){t!==this._set&&(this._set=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=t,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(t){t!=this._defaultValue&&(this._defaultValue=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nullValue",{get:function(){return this._nullValue},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new It(t):null,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,t?(this._dateParser=new Pt(t),this._amText&&(this._dateParser.amText=this._amText),this._pmText&&(this._dateParser.pmText=this._pmText),this._baseYear&&(this._dateParser.baseYear=this._baseYear)):this._dateParser=null,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this._dateParser&&(this._dateParser.amText=t),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this._dateParser&&(this._dateParser.pmText=t),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t,this._dateParser&&(this._dateParser.baseYear=t),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueExpression",{get:function(){return this._valueExpression},set:function(t){t!=this._valueExpression&&(this._valueExpression=t,this._owner&&this._owner.updateField(this,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!=this._valueCallback&&(this._valueCallback=t,this._owner&&this._owner.updateField(this,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectKey",{get:function(){return this._objectKey},set:function(t){this._objectKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectCallback",{get:function(){return this._objectCallback},set:function(t){this._objectCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"calculated",{get:function(){return!!this._valueExpression||!!this._valueCallback},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"updatable",{get:function(){return!this._valueExpression&&!this._valueCallback&&this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t)},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(e){var i=null==e||""===e;return i||this._dataType!=t.ValueType.NUMBER||(i=isNaN(e)),i},i.prototype.equalValues=function(t,e){return this._equalValues(t,e)},i.prototype.sameValues=function(t,e){return this._sameValues(t,e)},i.prototype.readValue=function(t){return this._readValue(t)},i.prototype.getBool=function(t,e){return"boolean"==typeof e?e:this._boolParser?this._boolParser.toBool(e):t.toBool(e)},i.prototype.getDate=function(t,e){return e instanceof Date?new Date(e.getTime()):"number"==typeof e?new Date(e):this._dateParser?this._dateParser.toDate(e,!1):t.toDate(e,!1)},i.prototype.clone=function(){var t=new i(this.fieldName,this.dataType,this.length);return t._orgFieldName=this._orgFieldName,t._orgAttrName=this._orgAttrName,t._boolParser=this._boolParser,t._dateParser=this._dateParser,t._orgBaseField=this._orgBaseField,t._baseField=this._baseField,t._defaultValue=this._defaultValue,t._valueCallback=this._valueCallback,t._valueExpression=this._valueExpression,t},i.prototype.$_resetTypes=function(t){this.resetTypes(t)},i.prototype.assignFrom=function(t){"fieldName"in t&&(this.fieldName=t.fieldName),"subType"in t&&(this._subType=t.subType),"set"in t&&(this._set=t.set instanceof Array?t.set.slice():null),"defaultValue"in t&&(this._defaultValue=t.defaultValue),"baseField"in t&&(this.baseField=t.baseField),"booleanFormat"in t&&(this.booleanFormat=t.booleanFormat),"amText"in t&&(this._amText=t.amText),"pmText"in t&&(this._pmText=t.pmText),"baseYear"in t&&(this._baseYear=t.baseYear),"header"in t&&(this._header=t.header),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"objectKey"in t&&(this._objectKey=t.objectKey),"objectCallback"in t&&(this._objectCallback=t.objectCallback),"required"in t&&(this._required=t.required),"minimum"in t&&(this._minimum=t.minimum),"maximum"in t&&(this._maximum=t.maximum),"valueExpression"in t&&(this.valueExpression=t.valueExpression),"valueCallback"in t&&(this._valueCallback=t.valueCallback),"tag"in t&&(this._tag=t.tag)},i.prototype.$_setIndex=function(t){this._index=t},i.prototype.$_prepare=function(t){this._owner=t},i.prototype.changed=function(){},i.prototype.resetTypes=function(e){if(!this._typeLock){e&&(this._ownerBoolParser=e.boolParser,this._ownerDateParser=e.dateParser);var i=this._dataType,o=this._subType;if(this._runType=i,this._ranged=!1,(!this._owner||this._owner.subTypeEnabled)&&this._subTypeEnabled){if(o)switch(i){case t.ValueType.TEXT:o==t.ValueType.CHAR&&this._length>0&&(i=o);break;case t.ValueType.NUMBER:o!=t.ValueType.UNUM&&o!=t.ValueType.INT&&o!=t.ValueType.UINT||(i=o);break;case t.ValueType.DATETIME:o==t.ValueType.DATE&&(i=o)}if(this._runType=i,this._runSet=null,this._set&&this._set.length){if(this._runType==t.ValueType.DATETIME){this._runSet=[];for(var n=0;n<this._set.length;n++)(r=this.getDate(this._ownerDateParser,this._set[n]))&&this._runSet.push(r.getTime());this._runSet.length<1&&(this._runSet=null)}else if(this._runType==t.ValueType.DATE){for(this._runSet=[],n=0;n<this._set.length;n++){var r;if(r=this.getDate(this._ownerDateParser,this._set[n])){var s=new Date(r.getDate());this._runSet.push(s.setHours(0,0,0,0))}}this._runSet.length<1&&(this._runSet=null)}else this._runSet=this._set;this._ranged=!0}if(!this._ranged)switch(this._dataType){case t.ValueType.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case t.ValueType.DATETIME:case t.ValueType.DATE:this._runMin=this.getDate(this._ownerDateParser,this._minimum),this._runMax=this.getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(this._runType){case t.ValueType.TEXT:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readTextValue,this._nullValue=null;break;case t.ValueType.CHAR:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readCharValue,this._nullValue=null;break;case t.ValueType.NUMBER:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readNumberValue,this._nullValue=NaN;break;case t.ValueType.UNUM:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUnumValue,this._nullValue=NaN;break;case t.ValueType.INT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readIntValue,this._nullValue=NaN;break;case t.ValueType.UINT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUintValue,this._nullValue=NaN;break;case t.ValueType.DATETIME:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDatetimeValue,this._nullValue=null;break;case t.ValueType.DATE:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDateValue,this._nullValue=null;break;case t.ValueType.BOOLEAN:this._equalValues=this.equalBoolValues,this._sameValues=this.sameBoolValues,this._readValue=this.readBooleanValue,this._nullValue=!1;break;case t.ValueType.OBJECT:this._equalValues=this.equalObjectValues,this._sameValues=this.sameObjectValues,this._readValue=this.readObjectValues,this._nullValue=!1;break;default:this._equalValues=this.equalDummyValues,this._sameValues=this.sameDummyValues,this._readValue=this.readDummyValue,this._nullValue=void 0}}}},i.prototype.$_refreshFormats=function(t){this._owner=t,this._dateParser&&(this._dateParser.baseYear||(this._dateParser.baseYear=t.baseYear),this._dateParser.amText||(this._dateParser.amText=t.amText),this._dateParser.pmText||(this._dateParser.pmText=t.pmText)),this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser},i.prototype.equalDummyValues=function(t,e){return this.equalTextValues(t,e)},i.prototype.sameDummyValues=function(t,e){return null==t?null==e:null!=e&&t==e},i.prototype.equalTextValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},i.prototype.sameTextValues=function(t,e){return null==t||""==t?null==e||""==e:null!=e&&""!=e&&t==e},i.prototype.equalNumberValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(isNaN(t)?isNaN(e):!isNaN(e)&&t==e)},i.prototype.sameNumberValues=function(t,e){return isNaN(t)?isNaN(e):!isNaN(e)&&t==e},i.prototype.equalDateValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date))},i.prototype.sameDateValues=function(t,e){return t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date)},i.prototype.equalBoolValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},i.prototype.sameBoolValues=function(t,e){return this.equalBoolValues(t,e)},i.prototype.equalObjectValues=function(t,e){return void 0===t||void 0===e?void 0===t==(void 0===e):JSON.stringify(t)===JSON.stringify(e)},i.prototype.sameObjectValues=function(t,e){return null==t||null==e?null==t&&null==e:JSON.stringify(t)===JSON.stringify(e)},i.prototype.readDummyValue=function(t){return t},i.prototype.readTextValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},i.prototype.readCharValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return e&&(e=e.substr(0,this._length)),this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},i.prototype.readNumberValue=function(t){if(null!=t&&""!==t){var e=Number(t);if(this._ranged)if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));return e}},i.prototype.readUnumValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Number(t));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,e)}return e}},i.prototype.readIntValue=function(t){if(null!=t&&""!==t){var e=t>=0?Math.floor(t):Math.ceil(t);if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=e>=0?Math.floor(e):Math.ceil(e)}return e}},i.prototype.readUintValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Math.floor(Math.floor(t)));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,Math.floor(Math.floor(e)))}return e}},i.prototype.readDatetimeValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&this._ranged)if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},i.prototype.readDateValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&(e.setHours(0,0,0,0),this._ranged))if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},i.prototype.readBooleanValue=function(t){return void 0===t?t:null!==t&&this.getBool(this._ownerBoolParser,t)},i.prototype.readObjectValues=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw new Error("Invalid Object String "+e+"\r\n"+t)}else if(null!=t&&"object"!=typeof t)try{t=JSON.parse(t)}catch(e){xt.log("JSON.parse fail => ".concat(t))}return xt.deepCopy(t)},i.prototype.$_compareObject=function(t,e,i,o){var n=this._objectKey,r=this._objectCallback,s=r?r(this.orgFieldName,i,t):n&&t.hasOwnProperty(n)?t[n]:null,a=r?r(this.orgFieldName,o,e):n&&e.hasOwnProperty(n)?e[n]:null;return s>a?1:s<a?-1:0},i.prototype.$_calculateValue=function(t,e,i,o,n,r,s){return this._valueCallback?this._valueCallback(t.handler,i,o,r,s):this._valueExpression?(this._exprNode||(this._exprNode=be.Default.parse(this._valueExpression,Ce)),e.setValues(s,n),this._exprNode.evaluate(e)):void 0},i}(kt);t.RestoreMode=void 0,(Wt=t.RestoreMode||(t.RestoreMode={})).NONE="none",Wt.EXPLICIT="explicit",Wt.AUTO="auto";var Se=function(t){function e(){var e=t.call(this)||this;return e._values=null,e._fields=null,e._fieldCount=0,e}return n(e,t),e.prototype.setValues=function(t,e){this._values=t,this._fields=e,this._fieldCount=e?e.length:0},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){throw new Lt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(this._values){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new Lt("Data field index out of bounds:"+i);return this._values[i]}throw new Lt("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new Lt("Invalid identifier indexer: "+t);if(this._values&&this._fields){var n=this._fields.indexOf(i);if(n<0||n>=this._fieldCount)throw new Lt("Data field is not exists:"+i);return this._values[n]}},e.ID_VALUE=0,e.ID_VALUES=1,e.IDENTS={value:e.ID_VALUE,values:e.ID_VALUES},e}(jt),Ee=function(t){function e(){var e=t.call(this)||this;return e._listeners=[],e}return n(e,t),e.prototype._doDispose=function(){return this._listeners=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"listenerCount",{get:function(){return this._listeners.length},enumerable:!1,configurable:!0}),e.prototype.addListener=function(t,e){return null!=t&&this._listeners&&this._listeners.indexOf(t)<0&&(null!=e&&e>=0?this._listeners.splice(e,0,t):this._listeners.push(t)),this},e.prototype.removeListener=function(t){if(!this.disposing&&null!=t&&this._listeners){var e=this._listeners.indexOf(t);e>=0&&this._listeners.splice(e,1)}return this},e.prototype.clearListener=function(){this._listeners.length=0},e.prototype.fireEvent=function(t){var e=Array.prototype.slice.call(arguments,0);e[0]=this;for(var i=0,o=this._listeners.length;i<o;i++){var n=this._listeners[i],r=n[t];r&&r.apply(n,e)}},e.prototype.fireConfirmEvent=function(t){var e=Array.prototype.slice.call(arguments,0);e[0]=this;for(var i=0,o=this._listeners.length;i<o;i++){var n=this._listeners[i],r=n[t];if(r){var s=r.apply(n,e);if("boolean"==typeof s&&!s)return!1}}return!0},e.prototype.fireMessageEvent=function(t){var e=Array.prototype.slice.call(arguments,0);e[0]=this;for(var i=0,o=this._listeners.length;i<o;i++){var n=this._listeners[i],r=n[t];if(r){var s=r.apply(n,e);if("string"==typeof s&&s)return s}}return null},e.prototype.fireObjectEvent=function(t){var e=Array.prototype.slice.call(arguments,0);e[0]=this;for(var i=0,o=this._listeners.length;i<o;i++){var n=this._listeners[i],r=n[t];if(r){var s=r.apply(n,e);if(null!=s)return s}}return null},e}(kt),xe=["yy","yyyy","YY","YYYY","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","T","t","Z","z","+"],Oe=[".","/","-",":"],Re="A".charCodeAt(0),Ie="a".charCodeAt(0),Te="Y".charCodeAt(0),Pe="y".charCodeAt(0),De="M".charCodeAt(0),ke="m".charCodeAt(0),Ae="d".charCodeAt(0),Le="H".charCodeAt(0),Me="h".charCodeAt(0),Fe="S".charCodeAt(0),Ne="s".charCodeAt(0),Ve=function(t,e,i){void 0===i&&(i=0);var o=t.toString();return i&&o.length>=i?o.substr(0,i):(e=Math.max(o.length,e),("0000"+t.toString()).substr(-e))},Be=function(){function t(t){this.format=t}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t,"Default",{get:function(){return t.getFormatter(t.DEFAULT_FORMAT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(e){(e=e||t.DEFAULT_FORMAT)!=this._format&&(this._tokens=[],this.parse(e),this._format=e)},enumerable:!1,configurable:!0}),t.prototype.getText=function(t){if(!this._tokens)return"";var e=this._hasUTC,i=new Date(t);e||null==this._timeOff||(i=new Date(i.getTime()+60*i.getTimezoneOffset()*1e3+this._timeOff));for(var o=this._tokens,n="",r=e?i.getUTCHours():i.getHours(),s=0,a=o.length;s<a;s++){var l=o[s],u=l.length;switch(l.charCodeAt(0)){case Te:case Pe:n+=Ve((e?i.getUTCFullYear():i.getFullYear())%Math.pow(10,u),u);break;case De:n+=Ve((e?i.getUTCMonth():i.getMonth())+1,u);break;case Ae:n+=Ve(e?i.getUTCDate():i.getDate(),u);break;case Le:n+=Ve(r,u);break;case Me:n+=Ve(this._hasAmPm?0==r?12:r>12?r-12:r:r,u);break;case ke:n+=Ve(e?i.getUTCMinutes():i.getMinutes(),u);break;case Ne:n+=Ve(e?i.getUTCSeconds():i.getSeconds(),u);break;case Ie:case Re:n+=r<12?this._amText:this._pmText;break;case Fe:n+=Ve(e?i.getUTCMilliseconds():i.getMilliseconds(),u,u);break;default:n+=l}}if(!e&&null!=this._timeOff){var c=this._timeOff>=0?"+":"-",h=Math.abs(this._timeOff/6e4);n+=c+"".concat(Ve(Math.floor(h/60),2),":").concat(Ve(h%60,2))}return n},t.prototype.parseDateFormatTokens=function(t){var e=[];if(t){var i,o=t.trim(),n=0;if(i=o.match(/([+\-])(\d\d)?(:)?(\d\d)?$/)){var r=i[1];if(null==i[2])this._timeOff=60*-(new Date).getTimezoneOffset()*1e3;else{var s=parseInt(i[2]),a=parseInt(i[4]||"00");this._timeOff=60*(60*s+a)*1e3,"-"===r&&(this._timeOff=-this._timeOff)}o=o.substr(0,i.index)}for(var l=o.length;n<l;){var u=o.charAt(n);if(Oe.indexOf(u)>=0)e.push(u),n++;else{for(var c=n++;n<l&&o.charAt(n)==u;)n++;if(u=o.substring(c,n),xe.indexOf(u)<0&&/[a-zA-Z\+]/.test(u[0]))throw new Error("Invalid datetime write format: "+t);e.push(u)}if(n<l&&xt.isWhiteSpace(u=o.charAt(n)))for(e.push(u);n<l&&xt.isWhiteSpace(o.charAt(n));)n++}}return e},t.prototype.parse=function(e){if(this._amText="AM",this._pmText="PM",e){var i=e.split(";");this._format=i[0]||t.DEFAULT_FORMAT,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=this._tokens.indexOf("a")>=0||this._tokens.indexOf("A")>=0,this._hasUTC=this._tokens.indexOf("z")>0||this._tokens.indexOf("Z")>0;var o=void 0;if(i.length>2?o=i[2]:i.length>1&&i[1]&&(o=i[1]),o){var n=o.split(",");n.length>0&&n[0]&&(this._amText=n[0]||this._amText),n.length>1&&n[1]&&(this._pmText=n[1]||this._pmText)}}},t.DEFAULT_FORMAT="yyyy/MM/dd",t.Formatters={},t}(),Ge=function(){function t(t){this.$_parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),t.prototype.formatValue=function(t){return void 0===t?this._nullText:t?this._trueText:this._falseText},t.prototype.$_parse=function(t){if(this._falseText=this._trueText=null,t){var e=t.split(/[;\:]/);this._falseText=e[0],e.length>0&&(this._trueText=e[1]),e.length>1&&(this._nullText=e[2])}},t.Formatters={},t}(),je=".",He=",",$e=function(t){return xt.included(t,"c","f","C","F","a","A")},We=function(){function t(t){this._groupPos=0,this._replacement="$&,",this.parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t,"Default",{get:function(){return t.getFormatter(t.DEFAULT_FORMAT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"separator",{get:function(){return this._seperator},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"groupSep",{get:function(){return this._groupSep},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minDigits",{get:function(){return this._minDigits},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxDigits",{get:function(){return this._maxDigits},enumerable:!1,configurable:!0}),t.prototype.parse=function(t){this._minDigits=0,this._maxDigits=0,this._parse(t)},t.prototype.getText=function(t,e){void 0===e&&(e=!0);var i=Number(t);if(isNaN(i))return"";var o=this._minDigits,n=0;if(this._optDecimal){var r=(a=(""+i).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0)):0;o=Math.min(Math.max(r,this._minDigits),this._maxDigits)}if(this._round)switch(n=Math.pow(10,o),this._round){case"c":i=Math.ceil(n*i)/n;break;case"f":var s=i.toString().split(".");i=parseFloat(s.length>1?s[0]+"."+s[1].substr(0,o):s[0])}i="a"===this._round?Math.abs(i):i;var a,l=(i=Number(i.toPrecision(15))).toFixed(o);return!e&&(n=parseFloat(l))===Math.abs(parseFloat(l))&&0===n&&(l=Math.abs(i).toFixed(o)),this._seperator&&(l=l.replace(je,this._seperator)),this._reg?o?l.replace(this._regDecimal,this._replacement):l.replace(this._reg,this._replacement):l},t.prototype._parse=function(t){if(t&&(t=t.trim()),t){var e=je,i=He;if(t.indexOf(";")>-1){var o=t.split(";");t=o[0],o.length>1&&o[1]&&!$e(o[1])&&(e=o[1]),o.length>2&&o[2]&&!$e(o[2])&&(i=o[2]),this._round=o[3]||o[2]||o[1],this._round=$e(this._round)?this._round.toLowerCase():this._round}this._seperator=e==je?null:e,this._groupSep=i==He?null:i;var n=t.length,r=t.indexOf(je);if(this._optDecimal=t.indexOf("#",r)>0,r>=0){for(var s=r+1;s<n&&"0"==t.charAt(s);s++)this._minDigits++,this._maxDigits++;for(;s<n&&"#"==t.charAt(s);s++)this._maxDigits++;t=t.substr(0,r)}if(t){var a=t.length;t.charAt(a-1)==He&&(this._groupPos=3,t=t.substr(0,a-1))}if(t){var l=t.length,u=!0;for(s=l-1;s>=0;s--){var c=t.charAt(s);if("0"==c&&u);else if(0==this._groupPos&&c==He)this._groupPos=l-s-1;else{if("#"!=c)break;u=!1}}}this._groupPos>0&&(this._replacement="$&"+i,this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\"+e+"))","g"),this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\"+e+")","g"))}},t.DEFAULT_FORMAT="#,##0.0",t.Formatters={},t}(),Ue=function(t){function e(e){var i=t.call(this)||this;return i._datetimeWriter=null,i._booleanFormatter=null,i._numberFormatter=null,i.assignFrom(e),i}return n(e,t),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?Be.getFormatter(t):null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?Ge.getFormatter(t):null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?We.getFormatter(t):null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeCallback",{get:function(){return this._datetimeCallback},set:function(t){this._datetimeCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanCallback",{get:function(){return this._booleanCallback},set:function(t){this._booleanCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberCallback",{get:function(){return this._numberCallback},set:function(t){this._numberCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nullDateText",{get:function(){return this._nullDateText},set:function(t){this._nullDateText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nullText",{get:function(){return this._nullText},set:function(t){this._nullText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nanText",{get:function(){return this._nanText},set:function(t){this._nanText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowState",{get:function(){return this._rowState},set:function(t){this._rowState=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormatter",{get:function(){return this._booleanFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!1,configurable:!0}),e}(kt),ze=function(){function e(){}return e.prototype.compare=function(e,i,o){return e.dataType==t.ValueType.NUMBER?Number(i)-Number(o):i>o?1:i<o?-1:0},e}(),Ke=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e}(Error),Ye=function(t){function e(){return t.call(this,"Client is editing (call grid.commit() or grid.cancel() first)")||this}return n(e,t),e}(Error),qe=function(e){function i(){var i=e.call(this)||this;return i._subTypeEnabled=!0,i._undoable=!1,i._insertable=!0,i._updatable=!0,i._deletable=!0,i._softDeleting=!1,i._deleteCreated=!1,i._checkStates=!0,i._restoreMode=t.RestoreMode.NONE,i._strictRestore=!1,i._booleanFormat=null,i._datetimeFormat=null,i._baseYear=2e3,i._amText="AM",i._pmText="PM",i._alertClientError=!0,i._throwClientError=!1,i._commitBeforeDataEdit=!1,i._fields=[],i._calcFields=[],i._fieldNames=[],i._fieldMap={},i._defComparer=new ze,i._comparers=[],i._boolParser=It.Default,i._dateParser=Pt.Default,i._eventLock=0,i._resetLock=0,i._countLock=0,i._clients=[],i}return n(i,e),i.prototype._doDispose=function(){try{this.$_internalClearFields(),this._fieldMap=null}catch(t){xt.log("DataSource dispose catch error")}this._fields=this._calcFields=this._fieldNames=this._fieldMap=this._boolParser=this._dateParser=this._comparers=this._clients=this._defComparer=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){if(t!=this._subTypeEnabled){this._subTypeEnabled=t;for(var e=0,i=this._fields;e<i.length;e++)i[e].$_resetTypes()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"insertable",{get:function(){return this._insertable},set:function(t){this._insertable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"updatable",{get:function(){return this._updatable},set:function(t){this._updatable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletable",{get:function(){return this._deletable},set:function(t){this._deletable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"softDeleting",{get:function(){return this._softDeleting},set:function(t){this._softDeleting=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deleteCreated",{get:function(){return this._deleteCreated},set:function(t){this._deleteCreated=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkStates",{get:function(){return this._checkStates},set:function(t){t!=this._checkStates&&(this._checkStates=t,this._doCheckStatesChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"restoreMode",{get:function(){return this._restoreMode},set:function(t){if(t!=this._restoreMode){var e=this._restoreMode;this._restoreMode=t,this._doRestoreModeChanged(e,t)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strictRestore",{get:function(){return this._strictRestore},set:function(t){this._strictRestore=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new It(t):It.Default)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this.$_createDateReader())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){this._baseYear=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this.$_createDateReader())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this.$_createDateReader())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alertClientError",{get:function(){return this._alertClientError},set:function(t){this._alertClientError=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"throwClientError",{get:function(){return this._throwClientError},set:function(t){this._throwClientError=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeDataEdit",{get:function(){return this._commitBeforeDataEdit},set:function(t){this._commitBeforeDataEdit=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"calculateRuntime",{get:function(){return this._calculateRuntime||(this._calculateRuntime=new Se),this._calculateRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldCount",{get:function(){return this._fields.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boolParser",{get:function(){return this._boolParser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateParser",{get:function(){return this._dateParser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"eventLocked",{get:function(){return this._eventLock>0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valuesCallback",{get:function(){return this._valuesCallback},set:function(t){this._valuesCallback=t},enumerable:!1,configurable:!0}),i.prototype.registerClient=function(t){t&&this._clients.indexOf(t)<0&&this._clients.push(t)},i.prototype.unregisterClient=function(t){if(t){var e=this._clients.indexOf(t);e>=0&&this._clients.splice(e,1)}},i.prototype.cancelClients=function(){for(var t=0,e=this._clients;t<e.length;t++)e[t].cancelDataEditing()},i.prototype.commitClients=function(){for(var t=0,e=this._clients;t<e.length;t++)e[t].commitDataEditing()},i.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},i.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(this._resetLock>0?this._fireReset():this._fireRefresh(),this._countLock>0&&this._fireRowCountChanged()),this._resetLock=this._countLock=0)},i.prototype.addField=function(t,e,i){if(this._checkClientState()){var o;this.beginUpdate();try{(o=this.$_internalAddField(t))&&o.$_resetTypes(this)}finally{e&&this._doFieldsReset(),i&&this._reCalculateFields(),this.endUpdate()}return o}},i.prototype.updateField=function(t,e){var i=0,o=this._calcFields;if(t.calculated&&o.indexOf(t)<0){i=o.length;for(var n=0;n<o.length;n++)if(o[n].index>=t.index){i=n;break}o.splice(i,0,t)}else t.calculated||(i=o.indexOf(t))>=0&&o.splice(i,1);if(e&&t.calculated){this.beginUpdate();try{this._reCalculateFields(t)}finally{this.endUpdate(!0)}}},i.prototype.clearFields=function(){this._checkClientState()&&this._fields.length>0&&(this.$_internalClearFields(),this._doFieldsReset())},i.prototype.setFields=function(t){if(this._checkClientState()){this.beginUpdate();try{if(this.$_internalClearFields(),t)for(var e=0,i=t.length;e<i;e++){var o=this.$_internalAddField(t[e]);o&&o.$_resetTypes(this)}}finally{this.endUpdate(),this._doFieldsReset()}}},i.prototype.getField=function(t){return"string"==typeof t&&(t=this.getFieldIndex(t)),this._fields[t]},i.prototype.getFields=function(){return this._fields.slice()},i.prototype.fieldByName=function(t){if(t)for(var e=t.toUpperCase(),i=0,o=this._fields;i<o.length;i++){var n=o[i];if(n.fieldName==e)return n}return null},i.prototype.getFieldNames=function(){for(var t=[],e=0;e<this._fields.length;e++)t.push(this._fields[e].fieldName);return t},i.prototype.getOrgFieldNames=function(){for(var t=[],e=0;e<this._fields.length;e++)t.push(this._fields[e].orgFieldName);return t},i.prototype.getFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].fieldName},i.prototype.getOrgFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].orgFieldName},i.prototype.getFieldIndex=function(t){if("number"==typeof t)return t;if(t){var e=t.toUpperCase();if(e in this._fieldMap)return this._fieldMap[e]}return-1},i.prototype.getFieldIndexC=function(t){return t in this._fieldMap?this._fieldMap[t]:-1},i.prototype.getBaseField=function(t){return t>=0&&t<this._fields.length?this.getFieldIndex(this._fields[t].baseField):-1},i.prototype.getValueType=function(t){return this._fields[t].dataType},i.prototype.getDefaultValue=function(t){return this._fields[t].defaultValue()},i.prototype.objectToRow=function(t){var e=[],i=this._valuesCallback;if(i){var o=i.call(this,this.$_handler,t);if(o&&Array.isArray(o))return o.slice()}if(t)for(var n=0,r=this.fieldCount;n<r;n++){var s=this.getOrgFieldName(n);t.hasOwnProperty(s)&&(e[n]=t[s])}return e},i.prototype.canUpdateField=function(e,i){if(i>=0&&i<this._fields.length){if(!this._fields[i].updatable&&e>=0)try{var o=this.getRowState(e);return!o||o==t.RowState.CREATED||o==t.RowState.CREATE_AND_DELETED}catch(t){return!1}return!0}return!1},i.prototype.getDataComparer=function(t){return t>=0&&this._comparers[t]},i.prototype.setDataComparer=function(t,e){this._comparers[t]=e},i.prototype.canSummarize=function(t){return t>=0&&t<this.fieldCount},i.prototype.canAppendRow=function(){return!1},i.prototype._convertValues=function(t,e){var i="*"in e&&"*"==e["*"]?t:{};for(var o in e)i[e[o]]=t[o];return i},i.prototype.getClientsBusy=function(){var t={busy:!1,cnt:0,client:null};if(this.disposing)return t;for(var e=this._clients.length;e--;)this._clients[e].isDataEditing()&&(t.busy=!0,t.cnt++,t.client=this._clients[e]);return t},i.prototype._checkClientState=function(){if(this.getClientsBusy().busy){if(this._throwClientError)throw new Ye;return this._alertClientError&&alert((new Ye).message),!1}return!0},i.prototype._checkFieldIndex=function(t){if(t<0||t>=this._fields.length)throw new Ke("Invalid field index: "+t)},i.prototype.$_internalClearFields=function(){this._checkClientState();for(var t=0,e=this._fields;t<e.length;t++)e[t].$_setIndex(-1);this._fields.splice(0,this._fields.length),this._calcFields.splice(0,this._calcFields.length),this._fieldNames.splice(0,this._fieldNames.length),this._fieldMap={}},i.prototype.$_internalInsertField=function(t,e){this._checkClientState();var i=this._fields.length;if(t<0||t>i)throw xt.isDebugging(),new Ke("index is out of bounds:"+t);if(e){e.$_prepare(this),this._fields.splice(t,0,e),this._fieldNames.splice(t,0,e.fieldName),e.calculated&&this._calcFields.push(e),e.$_setIndex(t),this._fieldMap[e.fieldName]=t;for(var o=t+1;o<=i;o++)(e=this._fields[o]).$_setIndex(o),this._fieldMap[e.fieldName]=o;return t}return-1},i.prototype.$_addField=function(t,e,i,o){if(!t)throw new Ke("fieldName must be exists.");if(this.getFieldIndex(t)>=0)throw new Ke("fieldName is already exists: "+t);var n=new we(t,e,i);return o&&n.assignFrom(o),this.$_internalInsertField(this._fields.length,n),n},i.prototype.$_internalAddField=function(e){var i=null;return"string"==typeof e?i=this.$_addField(e,t.ValueType.TEXT,0):e instanceof we?(i=e.clone(),this.$_internalInsertField(this._fields.length,i)):e&&(i=this.$_addField(e.fieldName,e.dataType||t.ValueType.TEXT,e.length,e)),i},i.prototype._internalCalculateValues=function(t,e,i){var o=i?xt.makeArray(i):this._calcFields;if(o.length>0){for(var n=[],r=0;r<t.length;r++)n[r]=this.getField(r).readValue(t[r]);r=0;for(var s=o.length;r<s;r++){var a=o[r],l=this._fieldMap[a.fieldName];t[l]=n[l]=a.readValue(a.$_calculateValue(this,this.calculateRuntime,e,a.orgFieldName,this._fieldNames,this.getOrgFieldNames(),n))}}},i.prototype.refreshFieldFormats=function(){for(var t=0,e=this._fields;t<e.length;t++)e[t].$_refreshFormats(this)},i.prototype.refreshFieldFormat=function(t){t&&t.$_refreshFormats(this)},i.prototype._getRowValues=function(){return new Array(this.fieldCount)},i.prototype.$_createOutputRows=function(e,i,o){void 0===o&&(o=0);var n=this.fieldCount,r=e.length;i instanceof Ue||(i=new Ue(i));var s=i.nullDateText,a=i.nullText,l=i.nanText;try{for(var u=0;u<n;u++){var c=this.getField(u),h=c.dataType,p=c.orgFieldName,d=void 0,f=void 0,g=void 0,y=void 0,_=void 0,m=void 0;if(h==t.ValueType.DATETIME&&((d=i.datetimeCallback)||(y=i.datetimeWriter)||s))if(d)for(var v=0;v<r;v++)(w=e[v])[p]=d(this.handler,v+o,p,w[p]);else for(v=0;v<r;v++){var b=(w=e[v])[p];w[p]=b?y?y.getText(w[p]):b:s}else if(h==t.ValueType.BOOLEAN&&((f=i.booleanCallback)||(_=i.booleanFormatter)))if(f)for(v=0;v<r;v++)(w=e[v])[p]=f(this.handler,v+o,p,w[p]);else for(v=0;v<r;v++)(w=e[v])[p]=_.formatValue(w[p]);else if(h==t.ValueType.NUMBER&&((g=i.numberCallback)||(m=i.numberFormatter)||l))if(g)for(v=0;v<r;v++)(w=e[v])[p]=g(this.handler,v+o,p,w[p]);else for(v=0;v<r;v++){var C=(w=e[v])[p];w[p]=null==C||isNaN(C)?l:m?m.getText(C):C}else if(null!=a&&null!=a)for(v=0;v<r;v++){var w;C=(w=e[v])[p],w[p]=null==C||null==C?a:C}}}finally{i&&i.dispose()}},i.prototype.$_sortRows=function(t,e,i,o,n){do{var r=o,s=n,a=t[Math.floor((o+n)/2)];do{for(;r<=s&&!(i(e,a,t[r])<=0);)r++;for(;r<=s&&!(i(e,a,t[s])>=0);)s--;if(r<=s){if(r!=s){var l=t[r];t[r]=t[s],t[s]=l}r++,s--}}while(r<=s);o<s&&this.$_sortRows(t,e,i,o,s),o=r}while(o<n)},i.prototype.$_createDateReader=function(){this._datetimeFormat?(this._dateParser=new Pt(this._datetimeFormat),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=Pt.Default},i.prototype._doCheckStatesChanged=function(){},i.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent(i.COMMAND_STACK_CHANGED,t,e)},i.COMMAND_STACK_CHANGED="onDataSourceCommandStackChanged",i}(Ee),Xe=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.connect=function(t){},e.prototype.disconnect=function(){},e.prototype.clearRows=function(){},e.prototype.setRows=function(){},e.prototype.setRowCount=function(t){},e.prototype.insertRow=function(t){},e.prototype.insertRows=function(t,e){},e.prototype.removeRow=function(t){},e.prototype.removeRows=function(t){},e.prototype.updateRow=function(t){},e.prototype.updateRows=function(t,e){},e.prototype.updateRowList=function(t){},e.prototype.setValue=function(t,e){},e.prototype.moveRow=function(t,e){},e.prototype.moveRows=function(t,e,i){},e.prototype.moveRowList=function(t,e){},e.prototype.changeStates=function(t){},e}(kt),Qe=function(t){function e(e){var i=t.call(this)||this;return i._tags=[],i._owner=e,i}return n(e,t),e.prototype._doDispose=function(){this._owner=null,this._tags=null,t.prototype._doDispose.call(this)},e.prototype.add=function(t){null!=this._tags&&t&&this._tags.indexOf(t)<0&&(this._tags.push(t),t.connect(this._owner))},e.prototype.remove=function(t){if(null!=this._tags&&t){var e=this._tags.indexOf(t);e>=0&&(this._tags.splice(e,1),t.disconnect())}},e.prototype.clearRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++)e[t].clearRows()},e.prototype.setRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++)e[t].setRows()},e.prototype.setRowCount=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].setRowCount(t)},e.prototype.insertRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].insertRow(t)},e.prototype.insertRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].insertRows(t,e)},e.prototype.removeRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].removeRow(t)},e.prototype.removeRows=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].removeRows(t)},e.prototype.updateRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].updateRow(t)},e.prototype.updateRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].updateRows(t,e)},e.prototype.updateRowList=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].updateRowList(t)},e.prototype.setValue=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].setValue(t,e)},e.prototype.moveRow=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].moveRow(t,e)},e.prototype.moveRows=function(t,e,i){if(null!=this._tags)for(var o=0,n=this._tags;o<n.length;o++)n[o].moveRows(t,e,i)},e.prototype.moveRowList=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].moveRowList(t,e)},e}(kt),Je=function(){function t(t){this._active=!1,this._exprNode=null,this.criteria=t}return t.prototype.dispose=function(){this._exprNode=null},Object.defineProperty(t.prototype,"criteria",{get:function(){return this._criteria},set:function(e){e!=this._criteria&&(this._criteria=e,this._exprNode=e?be.Default.parse(e,t.CAPITAL_INDEXERS):null)},enumerable:!1,configurable:!0}),t.prototype.select=function(t,e,i){return!this._exprNode||(t.setRow(e,i),this._exprNode.evaluate(t))},t.CAPITAL_INDEXERS=["value","values","len"],t}(),Ze=function(){function t(e,i){this._filterMode=t.FILTER_AND,this._or=!1,this.load(e),i&&(this.filterMode=i)}return t.prototype.dispose=function(){return this._filters&&this._filters.forEach((function(t,e){t.dispose()})),this._filters=null,null},Object.defineProperty(t.prototype,"filterMode",{get:function(){return this._filterMode},set:function(e){var i=e?e.toLocaleLowerCase():e;i!=this._filterMode&&(this._filterMode=i,this._or=this._filterMode==t.FILTER_OR)},enumerable:!1,configurable:!0}),t.prototype.load=function(t){if(!t||t instanceof Array||(t=[t]),this._filters=[],t instanceof Array)for(var e=0,i=t.length;e<i;e++){var o=void 0,n=t[e];n&&("string"==typeof n?o=new Je(n):n.criteria&&(o=new Je(n.criteria))),o&&this._filters.push(o)}},t.prototype.prepare=function(t,e){t.prepare(e)},t.prototype.select=function(t,e,i){var o=this._filters,n=o.length;if(this._or){for(var r=0;r<n;r++)if(1==o[r].select(t,e,i))return!0;return!1}for(r=0;r<n;r++)if(0==o[r].select(t,e,i))return!1;return!0},t.FILTER_AND="and",t.FILTER_OR="or",t}(),ti=function(t){function e(){var e=t.call(this)||this;return e._ds=null,e._fieldCount=0,e._row=-1,e._values=null,e}return n(e,t),e.prototype._doDispose=function(){this._ds=null,t.prototype._doDispose.call(this)},e.prototype.prepare=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},e.prototype.setRow=function(t,e){this._row=t,this._values=e},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){if(t===e.ID_ROW)return this._row;throw new Lt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(i<0||i>=this._fieldCount)throw new Lt("Data field index out of bounds:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._values[i]}throw new Lt("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,o){switch(t){case e.ID_VALUE:case e.ID_VALUES:var n=this.getField(i,o);return this._values[n]}throw new Lt("Invalid identifier indexer: "+t)},e.prototype.getField=function(t,e){var i=e?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(i<0||i>=this._fieldCount)throw new Lt("Data field is not exits:"+t);return i},e.ID_ROW=0,e.ID_VALUE=1,e.ID_VALUES=2,e.IDENTS={row:e.ID_ROW,value:e.ID_VALUE,values:e.ID_VALUES},e}(jt),ei=function(t){function e(){var e=t.call(this)||this;return e._tags=new Qe(e),e._filterRuntime=new ti,e._commandListeners=[],e}return n(e,t),e.prototype._doDispose=function(){this._tags=this._tags.dispose(),this._filters=this._filters&&this._filters.dispose(),this._filterRuntime=this._filterRuntime.dispose(),this._commandListeners=null,this._fireDispose(),t.prototype._doDispose.call(this)},e.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterRuntime",{get:function(){return this._filterRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deletedCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tags",{get:function(){return this._tags},enumerable:!1,configurable:!0}),e.prototype.addTag=function(t){this._tags.add(t)},e.prototype.removeTag=function(t){this._tags.remove(t)},e.prototype.setFilterMode=function(t){this._filters&&t==this._filters.filterMode||(this._filters?this._filters.filterMode=t:this._filters=new Ze(null,t))},e.prototype.setFilters=function(t,e){!t||t instanceof Ze?(this._filters=t,this._filters&&e&&(this._filters.filterMode=e)):this._filters=new Ze(t,e)},e.prototype.getRowObject=function(t){if(t<0||t>=this.rowCount)throw new Ke("row is out of range: "+t);for(var e={},i=0,o=this.fieldCount;i<o;i++){var n=this.getOrgFieldName(i),r=this.getValue(t,i);e[n]=r}return e},e.prototype.compareValues=function(t,e,i){return 0},e.prototype.compareTexts=function(t,e,i,o){return 0},e.prototype.compareNumbers=function(t,e,i){return 0},e.prototype.compareBools=function(t,e,i){return 0},e.prototype.compareObjects=function(t,e,i){return 0},e.prototype.summarize=function(t,e){return!1},e.prototype.summarizeRange=function(t,e,i){return!1},e.prototype.copyRows=function(t,e,i,o){},Object.defineProperty(e.prototype,"hiddenCount",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.isHiddenRow=function(t){return!1},e.prototype.registerCommandListener=function(t){t&&this._commandListeners&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},e.prototype.unregisterCommandListener=function(t){var e=this._commandListeners?this._commandListeners.indexOf(t):-1;e>=0&&this._commandListeners.splice(e,1)},e.prototype.findRow=function(t,e,i){},e.prototype._doFieldsReset=function(){this._fireReset()},e.prototype._keepCommandStates=function(t){if(this._commandListeners.length>0)return this._commandListeners[0].getCommandStates(t)},e.prototype._yieldCommandStates=function(t,e){if(this._commandListeners.length>0)return this._commandListeners[0].setCommandStates(t,e)},e.prototype._fireDispose=function(){this._eventLock<=0&&this.fireEvent("onDataProviderDisposed")},e.prototype._fireReset=function(){this._eventLock<=0?this.fireEvent("onDataProviderReset"):this._resetLock++},e.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onDataProviderRefresh")},e.prototype._fireRowCountChanged=function(){this._eventLock<=0?this.fireEvent("onDataProviderRowCountChanged"):this._countLock++},e.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onDataProviderDataLoadComplated")},e.prototype.fireRowInserting=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowInserting",t,e)},e.prototype.fireRowInserted=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowInserted",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowsInserted=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsInserted",t,e),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowRemoving",t)},e.prototype.fireRowRemoved=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowRemoved",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowsRemoving",t)},e.prototype.fireRowsRemoved=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsRemoved",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowUpdating=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowUpdating",t,e)},e.prototype.fireRowUpdated=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowUpdated",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowsUpdated=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsUpdated",t,e),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowListUpdated=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowListUpdated",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowMoving",t,e)},e.prototype.fireRowMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowMoved",t,e)},e.prototype.fireRowsMoving=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowsMoving",t,e,i)},e.prototype.fireRowsMoved=function(t,e,i){this._eventLock<=0&&this.fireEvent("onDataProviderRowsMoved",t,e,i)},e.prototype.fireRowListMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowListMoving",t,e)},e.prototype.fireRowListMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowListMoved",t,e)},e.prototype.fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderValueChanging",t,e,i)},e.prototype.fireValueChanged=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderValueChanged",t,e),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderStateChanged",t)},e.prototype.fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderStatesChanged",t)},e.prototype.fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent("onDataProviderStatesCleared")},e.prototype.fireRestoreRows=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderRestoreRows",t)},e.prototype.fireRowHided=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowHided",t,e)},e}(qe),ii=function(t){function e(e){var i=t.call(this)||this;return i.fields=[],i.values=[],i.startIndex=0,i.wrap=!0,i.select=!0,i.allFields=!0,i.caseSensitive=!1,i.partialMatch=!1,i.compareCallback=null,i.reverse=!1,e&&i.extend(e),i}return n(e,t),e}(kt),oi=function(t){function e(e){var i=t.call(this)||this;return i.fields=null,i.value=null,i.startIndex=0,i.startFieldIndex=0,i.wrap=!0,i.select=!0,i.caseSensitive=!1,i.partialMatch=!1,i.columns=null,i.compareCallback=null,i.reverse=!1,e&&i.extend(e),i}return n(e,t),e}(kt);!function(t){function e(e){return t.call(this,e)||this}n(e,t)}(Error);var ni=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._doDispose=function(){},e.prototype.undo=function(){},e.prototype.redo=function(t){},e.prototype.execute=function(){return this.redo(!1)},e}(kt);!function(t){function e(){return t.call(this)||this}n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.undo=function(){},e.prototype.redo=function(t){},e.prototype.execute=function(){return this.redo(!1)}}(ni);var ri=function(t){function e(e){var i=t.call(this)||this;return i._commands=[],i._current=-1,i._undoing=!1,i._redoing=!1,i._owner=e,i}return n(e,t),e.prototype._doDispose=function(){this._owner=null,this._commands=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._commands.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canUndo",{get:function(){return this._current>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this._commands.length>this._current+1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return this._undoing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return this._redoing},enumerable:!1,configurable:!0}),e.prototype.undo=function(){if(this.canUndo){var t=this._commands[this._current];this._undoing=!0;try{t.undo()}finally{this._undoing=!1}this._current=this._current-1,this._changed()}},e.prototype.redo=function(t){var e;if(this.canRedo){var i=this._current+1,o=this._commands[i];this._redoing=!0;try{e=o.redo(!0)}finally{this._redoing=!1}this._current=i,this._changed()}return e},e.prototype.execute=function(t){if(t){var e=this._current++;this._commands[this._current]=t,this.$_shrink(this._current+1);var i=void 0;try{i=t.execute()}catch(t){throw this.$_shrink(e+1),this._current=e,t}return this._changed(),i}},e.prototype.flush=function(){var t=this._commands.length;if(t>0){for(;t--;)this._commands[t].dispose();this._commands=[],this._current=-1,this._changed()}},e.prototype._changed=function(){null!=this._owner&&this._owner.editCommandStackChanged(this,this.canUndo,this.canRedo)},e.prototype.$_shrink=function(t){if(t>=0&&t<this._commands.length){for(var e=this._commands.length-1;e>=t;e--)this._commands[e].dispose();this._commands.splice(t,this._commands.length-t)}},e}(Ee),si=function(t){function e(e){var i=t.call(this)||this;return i._ds=e,i}return n(e,t),e.prototype._doDispose=function(){this._ds=null,this._save=null,t.prototype._doDispose.call(this)},e.prototype.redo=function(t){return t?this._doRedo(this._ds,this._save):this._save=this._doRun(this._ds),this._save&&this._save.result},e.prototype.undo=function(){this._doUndo(this._ds,this._save)},e.prototype._setSoftDeleting=function(t,e){t._softDeleting=e},e.prototype._setDeleteCreated=function(t,e){t._deleteCreated=e},e.prototype._cloneRow=function(t){if(xt.isArray(t))return t.slice();if(t){var e={};for(var i in t)e[i]=t[i];return e}},e.prototype._cloneValues=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),t){var o=t.length,n=[];i<0&&(i=o),e=Math.max(0,e);for(var r=Math.min(o,e+i),s=e;s<r;s++){var a=t[s];if(xt.isArray(a))n.push(a.slice());else if(a){var l={};for(var u in a)l[u]=a[u];n.push(l)}}return n}return null},e}(ni),ai=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e}(si),li=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(ri),ui=function(t){function e(e,i,o,n){var r=t.call(this,e)||this;return r._row=i,r._field=o,r._value=n,r}return n(e,t),e.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_setValue(this._row,this._field,this._value))&&(this._newState=t.getRowState(this._row)),e},e.prototype._doRedo=function(t,e){t.$_setValue(this._row,this._field,this._value)},e.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireValueChanged(this._row,this._field)},e}(ai),ci=function(t){function e(e,i,o,n){var r=t.call(this,e)||this;return r._row=i,r._values=r._cloneRow(o),r._strict=n,r}return n(e,t),e.prototype._doDispose=function(){this._values=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_updateRow(this._row,this._values,this._strict))&&(this._newState=t.getRowState(this._row)),e},e.prototype._doRedo=function(t,e){t.$_updateRow(this._row,this._values,this._strict)},e.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireRowUpdated(this._row)},e}(ai),hi=function(t){function e(e,i,o){var n=t.call(this,e)||this;return n._row=i,xt.isArray(o)||(o=e.objectToRow(o)),n._values=o.slice(),n}return n(e,t),e.prototype._doRun=function(t){var e={};return e.result=t.$_insertRow(this._row,this._values),e},e.prototype._doRedo=function(t,e){t.$_insertRow(this._row,this._values)},e.prototype._doUndo=function(t,e){t.$_deleteRow(this._row)},e}(ai),pi=function(t){function e(e,i){var o=t.call(this,e)||this;return o._row=i,o}return n(e,t),e.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,e.row=t._keepRow(this._row),e.result=t.$_deleteRow(this._row),e},e.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_deleteRow(this._row)}finally{this._setSoftDeleting(t,i)}},e.prototype._doUndo=function(t,e){t.$_insertRow(this._row,e.row.values),t._yieldStates(this._row,e.row),t._yieldCommandStates(this._row,e.row.outer)},e}(ai),di=function(t){function e(e,i,o,n){var r=t.call(this,e)||this;return r._row=i,r._state=o,r._force=n,r}return n(e,t),e.prototype._doRun=function(t){var e={};return e.row=t._keepStates(this._row),t.$_setRowState(this._row,this._state,this._force),e},e.prototype._doRedo=function(t,e){t.$_setRowState(this._row,this._state,this._force)},e.prototype._doUndo=function(t,e){t._yieldState(this._row,e.row),e.row.state!=this._state&&t.fireRowStateChanged(this._row)},e}(ai),fi=function(t){function e(e,i,o){var n=t.call(this,e)||this;return n._row=i,n._state=o,n}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return e.state=t._keepState(this._row),t.$_changeRowState(this._row,this._state,!0,!0,!0),e},e.prototype._doRedo=function(t,e){t.$_changeRowState(this._row,this._state,!0,!0,!0)},e.prototype._doUndo=function(t,e){t._yieldState(this._row,e.state),e.state!=this._state&&t.fireRowStateChanged(this._row)},e}(ai),gi=function(e){function i(t,i,o){var n=e.call(this,t)||this;return n._deleteRows=i,n._rowEvents=o,n}return n(i,e),i.prototype._doRun=function(t){var e={rows:[]};e.orgValues=t._keepOrgValues();var i=t.$_clearRowStates(this._deleteRows,this._rowEvents,!0);return e.rows=i.rows,e.states=i.states,e.values=i.values,e},i.prototype._doRedo=function(t,e){t.$_clearRowStates(this._deleteRows,this._rowEvents,!1)},i.prototype._doUndo=function(e,i){var o=i.rows,n=i.values,r=i.states,s=[];if(n)for(var a=0;a<o.length;a++)e.$_internalInsertRow(a,n[a],i.row,!0);if(r)for(a=0;a<r.length;a++)r[a]&&(e._yieldState(a,r[a]),r[a]!==t.RowState.NONE&&s.push(a));e._yieldOrgValues(i.rows),(o.length>0||r.length>0)&&e._fireRefresh()},i}(ai),yi=function(t){function e(e,i,o,n,r,s,a){var l=t.call(this,e)||this;return l._row=i,l._values=l._cloneValues(o,n,r),l._start=0,l._count=l._values.length,l._rowEvents=s,l._strict=a,l}return n(e,t),e.prototype._doDispose=function(){this._values=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,e),e},e.prototype._doRedo=function(t,e){t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,n=e.states,r=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],n[s],r[s])}t._fireRefresh()}},e}(ai),_i=function(t){function e(e,i,o){var n=t.call(this,e)||this;return n._rows=i.slice(),n._rowEvents=o,n}return n(e,t),e.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,t.$_removeRows(this._rows,this._rowEvents,e),e},e.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_removeRows(this._rows,this._rowEvents,null)}finally{this._setSoftDeleting(t,i)}},e.prototype._doUndo=function(t,e){var i=e.rows,o=e.statedRows;if(!(i.length<1&&o.length<1)){for(var n=e.rowSaves,r=e.states,s=0;s<i.length;s++){var a=i[s],l=n[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l,!1)}for(s=0;s<o.length;s++)a=o[s],t._yieldState(a,r[s]);for(t._fireRefresh(),s=0;s<i.length;s++){a=i[s];var u=n[s];t._yieldCommandStates(a,u.outer)}}},e}(ai),mi=function(t){function e(e,i,o,n,r,s){var a=t.call(this,e)||this;return a._row=i,a._values=a._cloneValues(o,n,r),a._start=0,a._count=a._values.length,a._rowEvents=s,a}return n(e,t),e.prototype._doRun=function(t){return t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents),{}},e.prototype._doRedo=function(t,e){t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents)},e.prototype._doUndo=function(t,e){if(!this._rows){this._rows=[];for(var i=0;i<this._values.length;i++)this._rows.push(this._row+i)}var o=t.softDeleting;try{this._setSoftDeleting(t,!1),t.$_removeRows(this._rows,!1,null)}finally{this._setSoftDeleting(t,o)}},e}(ai);function vi(t,e){return t&&t.getAttribute(e)}var bi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.csvToArray=function(t,e,i,o,n,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),void 0===r&&(r=",");for(var s=[],a=[],l=e.length,u=0,c=[],h=!1,p=!1;u<l;){var d=e.charAt(u);'"'==d?h?p&&'"'==e.charAt(u+1)?(c.push(d),u++):p?(p=!1,!n&&c.push(d)):c.push(d):(h=p=!0,!n&&c.push(d)):p||d!=r&&"\r"!=d&&"\n"!=d?(h=!0,c.push(d)):(d==r?a.push(c.join("")):"\r"!=d&&"\n"!=d||(a.push(c.join("")),s.push(a),a=[],"\n"==e.charAt(u+1)&&u++),c=[],h=!1),u++}p&&c.splice(0,0,'"'),c.length>0&&a.push(c.join("")),a.length>0&&s.push(a),i>0&&(o<=0?s.splice(0,i):s=s.splice(i,o));for(var f=t.getFields(),g=f.length,y=g>0,_=0,m=s.length;_<m;_++){a=s[_],y&&a.length>g&&(a.length=g);for(var v=0;v<g;v++)a[v]=f[v].readValue(a[v])}return s},e.xmlToRow=function(t,e,i){for(var o=t.childNodes,n=e.length,r=new Array(n),s=0,a=o.length;s<a;s++){var l,u=o[s];if((l=i.indexOf(u.tagName))>=0){var c=u.nodeValue;null==c&&u.hasChildNodes()&&(c=xt.included(u.childNodes[0].nodeType,3,4)?u.childNodes[0].nodeValue:void 0),null!=c&&(r[l]=c)}}for(s=0;s<n;s++)if(void 0===r[s]){var h=vi(t,i[s]);null!=h&&(r[s]=h)}return r},e.xmlToArray=function(t,i,o,n){void 0===o&&(o=0),void 0===n&&(n=-1);var r=null,s=e.xmlToRow,a=i?i.length:0;if(a&&(o=Math.max(0,o),n<0&&(n=a),n=Math.min(a-o,n))){var l=t.getFields(),u=t.getOrgFieldNames();l.length,r=new Array(n);for(var c=0;c<n;c++){var h=s(i[c+o],l,u);r[c]=h}}return r},e}(kt),Ci=function(t){function e(e,i,o){var n=t.call(this,e)||this;return n._row=i,n._newRow=o,n}return n(e,t),e.prototype._doRun=function(t){t.$_moveRow(this._row,this._newRow)},e.prototype._doRedo=function(t,e){t.$_moveRow(this._row,this._newRow)},e.prototype._doUndo=function(t,e){t.$_moveRow(this._newRow,this._row)},e}(ai),wi=function(t){function e(e,i,o,n){var r=t.call(this,e)||this;return r._row=i,r._count=o,r._newRow=n,r}return n(e,t),e.prototype._doRun=function(t){t.$_moveRows(this._row,this._count,this._newRow)},e.prototype._doRedo=function(t,e){t.$_moveRows(this._row,this._count,this._newRow)},e.prototype._doUndo=function(t,e){t.$_moveRows(this._newRow,this._count,this._row)},e}(ai),Si=function(t){function e(e,i,o){var n=t.call(this,e)||this;n._rows=i,n._newRows=i.slice();for(var r=o-i[0],s=0;s<i.length;s++)n._newRows[s]+=r;return n}return n(e,t),e.prototype._doRun=function(t){var e={};return e.result=t.$_moveRowList(this._rows,this._newRows[0]),e},e.prototype._doRedo=function(t,e){return t.$_moveRowList(this._rows,this._newRows[0])},e.prototype._doUndo=function(t,e){return t.$_moveRowList(this._newRows,this._rows[0])},e}(ai),Ei=function(t){function e(e,i,o){var n=t.call(this,e)||this;return n._rowFields=xt.deepCopy(i),n._value=o,n}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_fillValue(this._rowFields,this._value,e),e},e.prototype._doRedo=function(t,e){t.$_fillValue(this._rowFields,this._value,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,n=e.states,r=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],n[s],r[s])}t._fireRefresh()}},e}(ai),xi=function(e){function i(i,o,n,r,s){void 0===n&&(n=!1),void 0===r&&(r=null),void 0===s&&(s=t.RowState.NONE);var a=e.call(this,i)||this;return a._newCount=o,a._oldCount=i.rowCount,a._fillDefaults=n,a._defaultValues=r,a._rowState=s,a}return n(i,e),i.prototype._doRun=function(t){var e={};return t.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,e),e},i.prototype._doRedo=function(t,e){t.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,null)},i.prototype._doUndo=function(t,e){if(this._oldCount<this._newCount)t.$_setRowCount(this._oldCount);else if(this._oldCount>this._newCount){var i=e.rows,o=e.statedRows;if(i.length<1&&o.length<1)return;for(var n=e.rowSaves,r=e.states,s=0;s<i.length;s++){var a=i[s],l=n[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l,!1)}for(s=0;s<o.length;s++)a=o[s],t._yieldState(a,r[s]);for(t._fireRefresh(),s=0;s<i.length;s++){a=i[s];var u=n[s];t._yieldCommandStates(a,u.outer)}}},i}(ai),Oi=function(t){function e(e,i,o,n){var r=t.call(this,e)||this;return r._values=xt.deepCopy(i),r._rowEvents=o,r._strict=n,r}return n(e,t),e.prototype._doDispose=function(){this._values=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_updateRows2(this._values,this._strict,this._rowEvents,e),e},e.prototype._doRedo=function(t,e){t.$_updateRows2(this._values,this._strict,this._rowEvents,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,n=e.states,r=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],n[s],r[s])}t._fireRefresh()}},e}(ai),Ri=function(e){function i(t,i){var o=e.call(this)||this;return o._points=[],o._nextPoint=0,o._values=[],o._rowIds=[],o._rowStates=[],o._orgValues=null,o._needRestore=!1,o._deletedCount=0,o._nextRowId=0,o._hiddenIds=[],o.$_handler=i,t&&(o.undoable=!0,o._commands=new li(o)),o}return n(i,e),i.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._values=this._rowIds=this._rowStates=this._points=this._orgValues=this._hiddenIds=[],e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"handler",{get:function(){return this.$_handler},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())},enumerable:!1,configurable:!0}),i.prototype.getDataRow=function(t){return this._rowIds.indexOf(t)},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._values.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletedCount",{get:function(){return this._deletedCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._commands&&this._commands.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands&&this._commands.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._commands&&this._commands.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._commands&&this._commands.redoing},enumerable:!1,configurable:!0}),i.prototype.getRowId=function(t){return this._rowIds[t]},i.prototype.$_internalInsertField=function(t,i){if((t=e.prototype.$_internalInsertField.call(this,t,i))>=0){for(var o=this._values.length,n=0;n<o;n++)(r=this._values[n])&&r.splice(t,0,void 0);if(this._orgValues)for(o=Math.min(o,this._orgValues.length),n=0;n<o;n++){var r;(r=this._orgValues[n])&&r.splice(t,0,void 0)}}return t},i.prototype.$_internalClearFields=function(){e.prototype.$_internalClearFields.call(this),this.$_clearRows()},i.prototype.setRowCount=function(e,i,o,n){void 0===i&&(i=!1),void 0===o&&(o=null),void 0===n&&(n=t.RowState.NONE),this.undoable?this._commands.execute(new xi(this,e,i,o,n)):this.$_setRowCount(e,i,o,n)},i.prototype.$_setRowCount=function(e,i,o,n,r){if(void 0===i&&(i=!1),void 0===o&&(o=null),void 0===n&&(n=t.RowState.NONE),void 0===r&&(r=null),this._checkClientState()){var s=this._values,a=s.length,l=Math.max(0,e);if(l!=a){var u=this._rowIds,c=this._rowStates;if(this.refreshFieldFormats(),r&&(r.rows=[],r.rowSaves=[],r.statedRows=[],r.states=[]),l>a&&(i||o)){var h=this.fieldCount,p=o;if(!p||p instanceof Array||(p=this.objectToRow(p)),p&&p.length<1&&(p=null),i||p)for(var d=p?Math.min(p.length,h):0,f=a;f<l;f++){var g=[];if(i)for(var y=0;y<h;y++){var _=this.getField(y);g[y]=void 0!==_.defaultValue?_.defaultValue:_.nullValue}if(d>0)for(y=0;y<d;y++){var m=p[y];void 0!==m&&(g[y]=this.getField(y).readValue(m))}s[f]=g}}else if(l>a)for(f=a;f<l;f++)s[f]=[];else if(l<a){if(r)for(f=l;f<a;f++){var v=f;r.statedRows.push(v),r.states.push(c[f]),r.rows.push(v),r.rowSaves.push(this._keepRow(v))}if(this._deletedCount>0)for(f=a-1;f>=l;f--)Rt(c[f])&&this._deletedCount--}for(n=this.checkStates&&n?n:t.RowState.NONE,s.length=u.length=c.length=l,this._orgValues&&this._orgValues.length>l&&(this._orgValues.length=l),f=a;f<l;f++)c[f]=n,u[f]=this._nextRowId++;for(f=this._hiddenIds.length-1;f>=0;f--)y=this._hiddenIds[f],u.indexOf(y)<0&&this._hiddenIds.splice(f,1);this.tags.setRowCount(l),this._fireRefresh(),this._fireRowCountChanged()}}},i.prototype.$_clearRows=function(){this._values.length=0,this._values=[],this._rowIds.length=0,this._rowIds=[],this._rowStates.length=0,this._rowStates=[],this._hiddenIds.length=0,this._hiddenIds=[],this._orgValues?(this._orgValues.length=0,this._orgValues=[]):this._orgValues=null,this._deletedCount=0,this.clearCommandStack(),this.tags.clearRows()},i.prototype.clearRows=function(){this._checkClientState()&&(this.$_clearRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated())},i.prototype.setRows=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i){this.refreshFieldFormats(),this.beginUpdate();try{this.$_clearRows();var o=this.checkStates,n=this.filters,r=this.filterRuntime,s=void 0;if(t&&(s=t.length)>0&&e<s)if(e=Math.max(0,e),i=i<0?s:Math.min(i,s-e),n){this._values.length=this._rowIds.length=this._rowStates.length=i,n.prepare(r,this);for(var a=s,l=0,u=0,c=e;c<a&&l<i;c++)(h=t[c])instanceof Array||(h=this.objectToRow(h)),n.select(r,u++,h)&&this.$_internalSetRow(l++,h,o);this._values.length=this._rowIds.length=this._rowStates.length=l}else if((a=Math.min(s,e+i))>e)for(this._values.length=this._rowIds.length=this._rowStates.length=a-e,l=0,c=e;c<a;c++){var h;(h=t[c])instanceof Array||(h=this.objectToRow(h)),this.$_internalSetRow(l++,h,o)}}finally{this.endUpdate(!1),this.clearCommandStack()}this.tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()}},i.prototype.setXmlRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i&&(t=bi.xmlToArray(this,t,e,i),this.setRows(t))},i.prototype.insertRows=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),this.undoable?this._commands.execute(new mi(this,t,e,i,o,n)):this.$_insertRows(t,e,i,o,n)},i.prototype.$_insertRows=function(t,e,i,o,n){if(this._checkClientState()&&e){var r=e.length;if(!(r<1)&&0!=(o=o<0?r:Math.min(r,o))){if(t<0||t>this._values.length)throw new Ke("row is out of bounds:"+t);this.refreshFieldFormats(),i=Math.max(0,i);var s=Math.min(r,i+o);if(n)for(var a=t,l=i;l<s;l++)(u=e[l])instanceof Array||(u=this.objectToRow(u)),this.fireRowInserting(a,u)&&(this.$_internalInsertRow(a,u,!0),this.fireRowInserted(a),this._fireRowCountChanged(),a++);else{for(a=t,l=i;l<s;l++,a++){var u;(u=e[l])instanceof Array||(u=this.objectToRow(u)),this.$_internalInsertRow(a,u,!1)}this.tags.insertRows(t,o=s-i),this.fireRowsInserted(t,o),this._fireRowCountChanged()}}}},i.prototype.appendRows=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===o&&(o=!1),this.insertRows(this.rowCount,t,e,i,o)},i.prototype.insertRowsFrom=function(t,e,i,o){for(var n=[],r=0,s=i;r<s.length;r++){var a=s[r];n.push(t.getRowObject(a))}if(e)for(var l=i.length-1;l>=0;l--)n[l]=this._convertValues(n[l],e);this.insertRows(o,n)},i.prototype.appendRowsFrom=function(t,e,i){this.insertRowsFrom(t,e,i,this.rowCount)},i.prototype.insertXmlRows=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),this._checkClientState()&&(e=bi.xmlToArray(this,e,i,o),this.insertRows(t,e,0,-1,n))},i.prototype.appendXmlRows=function(t,e,i,o){void 0===o&&(o=!1),this.insertXmlRows(this.rowCount,t,e,i,o)},i.prototype.fillValue=function(t,e){if(this.undoable)return this._commands.execute(new Ei(this,t,e));this.$_fillValue(t,e)},i.prototype.updateRows=function(t,e,i,o,n,r){if(void 0===r&&(r=!1),this.undoable)return this._commands.execute(new yi(this,t,e,i,o,r,n));this.$_updateRows(t,e,i,o,n,r)},i.prototype.updateRows2=function(t,e,i){if(this.undoable)return this._commands.execute(new Oi(this,t,i,e));this.$_updateRows2(t,e,i)},i.prototype.updateXmlRows=function(t,e,i,o,n){void 0===n&&(n=!1),this._checkClientState()&&(e=bi.xmlToArray(this,e,i,o),this.updateRows(t,e,0,-1,n))},i.prototype.getValue=function(t,e){this.$_checkRowIndex(t),this._checkFieldIndex(e);var i=this._values[t];return i?i[e]:void 0},i.prototype.setValue=function(t,e,i){return this.undoable?this._commands.execute(new ui(this,t,e,i)):this.$_setValue(t,e,i)},i.prototype.$_setValue=function(e,i,o){if(!this._checkClientState())return!1;this.$_checkRowIndex(e),this._checkFieldIndex(i);var n=this.getField(i),r=this._rowStates[e];if(!n)throw new Ke("Invalid field: "+i);if(!n.updatable&&(r==t.RowState.NONE||r==t.RowState.UPDATED))return!1;var s,a=this._values[e],l=n.readValue(o);if(a&&n.equalValues(l,a[i]))return!1;this.refreshFieldFormat(n);var u=this.checkStates&&(r==t.RowState.NONE||!r);return a||(this._values[e]=a=new Array(this.fieldCount)),u&&this._orgValues&&(s=a.concat()),a[i]=l,this._internalCalculateValues(a,e),u?(s&&(this._orgValues[e]=s),this.$_changeRowState(e,t.RowState.UPDATED,!0)):this._needRestore&&this.restoreState(e),this.tags.setValue(e,i),this.fireValueChanged(e,i),!0},i.prototype.updateRow=function(t,e,i){return this.undoable?this._commands.execute(new ci(this,t,e,i)):this.$_updateRow(t,e,i)},i.prototype.getRow=function(t){this.$_checkRowIndex(t);var e=this._values[t];return e?e.slice():[]},i.prototype.getRows=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1);var i=this._values.length,o=Math.max(0,t),n=e<0?i-1:Math.min(i-1,e);if(o>=i||n<o)return[];for(var r=n-o+1,s=new Array(r),a=0;a<r;a++)s[a]=this._values[a+o]?this._values[a+o].slice():[];return s},i.prototype.getRowObject=function(t,e){return this.$_checkRowIndex(t),this.$_getRowObject(t,e)},i.prototype.getRowObjects=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1);var o=this._values.length,n=Math.max(0,t),r=e<0?o-1:Math.min(o-1,e);if(n>=o||r<n)return[];for(var s=r-n+1,a=new Array(s),l=0;l<s;l++)a[l]=this.$_getRowObject(l+n,i);return a},i.prototype.getOutputObject=function(t,e){var i=this.getRowObject(e,null==t?void 0:t.rowState);return t&&this.$_createOutputRows([i],t,e),i},i.prototype.getOutputObjects=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var o=this.getRowObjects(e,i,null==t?void 0:t.rowState);return t&&this.$_createOutputRows(o,t,e),o},i.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkFieldIndex(t);var o=this._values.length;if(i=i<0?o-1:Math.min(o-1,i),(e=Math.max(0,e))>=o||i<e)return null;for(var n=new Array(i-e+1),r=e;r<=i;r++){var s=this._values[r];n[r-e]=s&&s[t]}return n},i.prototype.hasData=function(t){var e=this._values;return t>=0&&t<e.length&&void 0!==e[t]&&e[t].length>0},i.prototype.insertRow=function(t,e){return this.undoable?this._commands.execute(new hi(this,t,e)):this.$_insertRow(t,e)},i.prototype.$_insertRow=function(t,e,i){if(void 0===i&&(i=void 0),!this._checkClientState())return!1;if(t<0||t>this._values.length)throw new Ke("row is out of bounds:"+t);return this.refreshFieldFormats(),!(!e||!this.fireRowInserting(t,e))&&(xt.isArray(e)||(e=this.objectToRow(e)),this.$_internalInsertRow(t,e,!0),i&&this._yieldStates(t,i),this.fireRowInserted(t),this._fireRowCountChanged(),!0)},i.prototype.appendRow=function(t){var e=this.rowCount;return this.insertRow(e,t)?e:-1},i.prototype.removeRow=function(e){if(this.undoable){if(this.softDeleting&&this.checkStates)switch(this._rowStates[e]){case t.RowState.CREATED:if(!this.deleteCreated)return this._commands.execute(new fi(this,e,t.RowState.CREATE_AND_DELETED));break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:return;default:return this._commands.execute(new fi(this,e,t.RowState.DELETED))}return this._commands.execute(new pi(this,e))}return this.$_removeRow(e)},i.prototype.$_removeRow=function(e){if(!this._checkClientState())return!1;if(this.$_checkRowIndex(e),this.softDeleting&&this.checkStates){switch(this._rowStates[e]){case t.RowState.CREATED:this.deleteCreated?this.$_deleteRow(e):this.$_changeRowState(e,t.RowState.CREATE_AND_DELETED,!0,!0,!0);break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:break;default:this.$_changeRowState(e,t.RowState.DELETED,!0,!0,!0)}return!0}return this.$_deleteRow(e)},i.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new _i(this,t,e)):this.$_removeRows(t,e,null)},i.prototype.$_removeRows=function(e,i,o){if(this._checkClientState()){var n,r=this.deleteCreated;if(e&&!((n=e.length)<1)){if(e=e.slice(),o&&(o.rows=[],o.rowSaves=[],o.statedRows=[],o.states=[]),this.softDeleting&&this.checkStates){for(var s=i?null:[],a=n;a--;){var l=e[a],u=this._rowStates[l],c=!1;switch(this.$_checkRowIndex(l),u){case t.RowState.CREATED:r||(o&&(o.statedRows.push(l),o.states.push(u)),c=this.$_changeRowState(l,t.RowState.CREATE_AND_DELETED,i,!1,!0),e.splice(a,1));break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:e.splice(a,1);break;default:o&&(o.statedRows.push(l),o.states.push(u)),c=this.$_changeRowState(l,t.RowState.DELETED,i,!1,!0),e.splice(a,1)}s&&c&&s.push(l)}i||s&&s.length>0&&this.fireRowStatesChanged(s)}if((n=e.length)>0){if(n>1&&e.sort((function(t,e){return t-e})),o)for(a=0;a<n;a++)l=e[a],o.rows.push(l),o.rowSaves.push(this._keepRow(l));if(i)for(a=n;a--;)l=e[a],this.$_checkRowIndex(l),this.$_deleteRow(l);else if(this.fireRowsRemoving(e)){for(a=n;a--;)l=e[a],u=this._rowStates[l],this.$_checkRowIndex(l),this.$_internalRemoveRow(l),Rt(u)&&this._deletedCount--;this.tags.removeRows(e),this.fireRowsRemoved(e),this._fireRowCountChanged()}}}}},i.prototype.moveRow=function(t,e){if(t!=e)return this.undoable?this._commands.execute(new Ci(this,t,e)):void this.$_moveRow(t,e)},i.prototype.$_moveRow=function(t,e){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(e),this.fireRowMoving(t,e)&&(this.$_internalMoveRow(t,e),this.tags.moveRow(t,e),this.fireRowMoved(t,e)))},i.prototype.moveRows=function(t,e,i){if(!(e<1||t==i))return this.undoable?this._commands.execute(new wi(this,t,e,i)):void this.$_moveRows(t,e,i)},i.prototype.$_moveRows=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(i),this.fireRowsMoving(t,e,i)&&(this.$_internalMoveRows(t,e,i),this.tags.moveRows(t,e,i),this.fireRowsMoved(t,e,i)))},i.prototype.moveRowList=function(t,e){if(t&&!(t.length<1))return t=t.sort((function(t,e){return t-e})),this.undoable?this._commands.execute(new Si(this,t,e)):this.$_moveRowList(t,e)},i.prototype.$_moveRowList=function(t,e){if(this._checkClientState()){var i=t[0];return this.$_checkRowIndex(i),this.$_checkRowIndex(e),this.fireRowListMoving(t,e)?(this.$_internalMoveRowList(t,e),this.tags.moveRowList(t,e),this.fireRowListMoved(t,e),!0):void 0}},i.prototype.getRowState=function(e){return this.$_checkRowIndex(e),this._rowStates[e]||t.RowState.NONE},i.prototype.$_checkDeleted=function(t,e){Rt(e)?this._deletedCount++:Rt(t)&&!Rt(e)&&this._deletedCount--},i.prototype.setRowState=function(t,e,i){return this.undoable?this._commands.execute(new di(this,t,e,i)):this.$_setRowState(t,e,i)},i.prototype.$_setRowState=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this._orgValues?this.$_changeRowStateEx(t,e,!0,i,!1):this.$_changeRowState(t,e,!0,i))},i.prototype.setRowStates=function(t,e,i,o){var n;if(void 0===o&&(o=!1),this._checkClientState()&&t&&!((n=t.length)<1))if(o)for(var r=0;r<n;r++){var s=t[r];this.$_checkRowIndex(s),this.$_changeRowStateEx(s,e,!0,i,!1)}else{var a=[],l=this._rowStates;for(r=0;r<n;r++){var u=l[s=t[r]];this.$_checkRowIndex(s),e!=u&&(l[s]=e,a.push(s),this.$_checkDeleted(u,e),this._orgValues&&this.prepareOrgValues(s,u,e))}a.length>0&&this.fireRowStatesChanged(a)}},i.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new gi(this,t,e)):this.$_clearRowStates(t,e)},i.prototype.$_clearRowStates=function(e,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!1),this._checkClientState()){for(var n=[],r=o?[]:null,s=o?[]:null,a=this._rowStates.length;a--;){var l=this._rowStates[a];switch(r&&(r[a]=l),s&&(s[a]=null),l){case t.RowState.CREATE_AND_DELETED:case t.RowState.DELETED:if(e){if(n.push(a),s){var u=this._keepRow(a);u&&(s[a]=u.values)}i?this.$_deleteRow(a):(this.$_internalRemoveRow(a),this.tags.removeRow(a),this._deletedCount--)}else this.$_changeRowState(a,t.RowState.NONE,i),this._deletedCount--;break;default:this.$_changeRowState(a,t.RowState.NONE,i)}}return this.$_resetOrgValues(),i||(n.length>0&&(this.fireRowsRemoved(n),this._fireRowCountChanged()),this.fireRowStatesCleared()),o?{rows:n,states:r,values:s}:void 0}},i.prototype.$_restoreStates=function(t,e){this.fireRowStatesChanged(t)},i.prototype.getStateRows=function(t){var e=[];if(t)for(var i=0,o=this._rowStates.length;i<o;i++)this._rowStates[i]==t&&e.push(i);return e},i.prototype.getAllStateRows=function(){for(var e={},i=e[t.RowState.CREATED]=[],o=e[t.RowState.UPDATED]=[],n=e[t.RowState.DELETED]=[],r=e[t.RowState.CREATE_AND_DELETED]=[],s=0,a=this._rowStates.length;s<a;s++){var l=this._rowStates[s];l===t.RowState.CREATED?i.push(s):l===t.RowState.UPDATED?o.push(s):l===t.RowState.DELETED?n.push(s):l===t.RowState.CREATE_AND_DELETED&&r.push(s)}return e},i.prototype.getRowStateCount=function(t){var e=t?t.length:0,i=this._rowStates.length,o=0;if(e&&i)if(e>1)for(var n=0;n<i;n++){var r=this._rowStates[n];t.indexOf(r)>=0&&o++}else for(r=t[0],n=0;n<i;n++)this._rowStates[n]===r&&o++;return o},i.prototype.$_restoreState=function(e){if(this._rowStates[e]===t.RowState.UPDATED){var i=this._orgValues[e];if(i){for(var o=this._values[e],n=this.strictRestore,r=0,s=this.fieldCount;r<s;r++){var a=o.length>r?o[r]:void 0,l=i.length>r?i[r]:void 0,u=this.getField(r);if(n){if(!u.equalValues(a,l))return!1}else if(!u.sameValues(a,l))return!1}return this._rowStates[e]=t.RowState.NONE,!0}}return!1},i.prototype.restoreUpdatedStates=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var n=t[i];n>=0&&n<this._values.length&&this.$_restoreState(n)&&e.push(n)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreState(i)&&e.push(i);e.length>0&&this.fireRowStatesChanged(e)}},i.prototype.$_restoreUpdatedRow=function(e){if(this._rowStates[e]===t.RowState.UPDATED){var i=this._orgValues[e];if(i){for(var o=this._values[e],n=0,r=Math.min(i.length,this.fieldCount);n<r;n++)o[n]=i[n];return this._rowStates[e]=t.RowState.NONE,!0}}return!1},i.prototype.$_restoreRow=function(t,e,i,o){this._values[t]=e.slice(),this._rowStates[t]=i,this._orgValues&&(this._orgValues[t]=o&&o.slice())},i.prototype.restoreUpdatedRows=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var n=t[i];n>=0&&n<this._values.length&&this.$_restoreUpdatedRow(n)&&e.push(n)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreUpdatedRow(i)&&e.push(i);e.length>0&&(this.fireRestoreRows(e),this.fireRowStatesChanged(e))}},i.prototype._reCalculateFields=function(t){var e=this;this._values.forEach((function(i,o){e._internalCalculateValues(i,o,t)}))},i.prototype.getUpdatedCells=function(e){var i=this.restoreMode;if(!this._orgValues||i!=t.RestoreMode.AUTO&&i!=t.RestoreMode.EXPLICIT)return null;if(null==e&&(e=this.getStateRows(t.RowState.UPDATED)),null==e)return null;for(var o=[],n=0,r=e.length;n<r;n++){var s=e[n],a=s>=0&&this._orgValues&&s<this._orgValues.length?this._orgValues[s]:null;if(a){for(var l=this._values[s],u=this.strictRestore,c=[],h=0,p=this.fieldCount;h<p;h++){var d=l.length>h?l[h]:void 0,f=a.length>h?a[h]:void 0,g=this.getField(h);g.calculated||(u?g.equalValues(d,f)||c.push({fieldName:this.getOrgFieldName(h),oldValue:a[h],newValue:l[h]}):g.sameValues(d,f)||c.push({fieldName:this.getOrgFieldName(h),oldValue:a[h],newValue:l[h]}))}c.length>0&&o.push({__rowId:s,updatedCells:c})}}return o},i.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},i.prototype.findRow=function(t,e,i){if(void 0===i&&(i=0),t.length<1||e.length<t.length)return-1;for(var o=[],n=[],r=this._values,s=0,a=t.length;s<a;s++){var l=void 0;(l="string"==typeof t[s]?this.getFieldIndex(t[s]):Number(t[s]))>=0&&l<this.fieldCount&&o.indexOf(l)<0&&(o.push(l),n.push(e[s]))}var u=o.length;for(s=0;s<u;s++)o[s]=this.getField(o[s]);for(s=i,a=r.length;s<a;s++){var c=r[s],h=!0;for(l=0;l<u;l++)if(!o[l].equalValues(n[l],c[l])){h=!1;break}if(h)return s}return-1},i.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){var e=this._values,i=this.fieldCount,o=e?e.length:0;if(i>0&&o>0){for(var n=new Array(o),r=0;r<o;r++){var s=e[r]&&e[r].concat();n[r]=s}var a=t?this._rowStates.concat():null,l=this._nextPoint++;return this._points.push({id:l,data:n,states:a}),l}return-1}},i.prototype.rollback=function(t){if(this._checkClientState())for(var e=this._points.length-1;e>=0;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this.setRows(i.data);var o=i.states;o&&(this._rowStates=o.concat());break}}},i.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;i>=t;i--)e[i].data=null,e.pop()},i.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},i.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},i.prototype.canUpdateRow=function(e){return!(this._rowStates[e]===t.RowState.NONE&&!this.updatable)},i.prototype.canAppendRow=function(){return!0},i.prototype.canInsertRow=function(t){return!0},i.prototype.canDeleteRow=function(t){return!0},i.prototype.getDistinctValues=function(e,i,o){if(void 0===i&&(i=-1),void 0===o&&(o=t.SortDirection.ASCENDING),i=arguments.length>1?i:-1,this._checkFieldIndex(e),i<0&&(i=this._values.length),i>0){for(var n=this.getField(e).dataType,r=[],s=[],a=void 0,l=0,u=this.rowCount;l<u;l++)switch(a=this._values[l]?this._values[l][e]:void 0,n){case t.ValueType.NUMBER:null!=a&&isNaN(a)||r.indexOf(a)<0&&r.push(a);break;case t.ValueType.DATE:case t.ValueType.DATETIME:a?s.indexOf(a.getTime())<0&&(s.push(a.getTime()),r.push(a)):s.indexOf(void 0)<0&&(s.push(void 0),r.push(void 0));break;case t.ValueType.OBJECT:default:r.indexOf(a)<0&&r.push(a)}return o!==t.SortDirection.NONE&&(r=xt.included(n,t.ValueType.DATETIME,t.ValueType.DATE,t.ValueType.NUMBER)?r.sort((function(t,e){return t-e})):r.sort(),o===t.SortDirection.DESCENDING&&(r=r.reverse())),r.slice(0,i)}return null},i.prototype.compareValues=function(t,e,i,o){var n=this._values[e],r=this._values[i];if(n===r)return 0;var s=n?n[t]:null,a=r?r[t]:null;return null==s?null==a?0:-1:null==a||(s=o?String(s).toLowerCase():s)>(a=o?String(a).toLowerCase():a)?1:s<a?-1:0},i.prototype.compareTexts=function(t,e,i){return this.compareValues(t,e,i,!0)},i.prototype.compareNumbers=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=o?o[t]:NaN,s=n?n[t]:NaN;return isNaN(r)?isNaN(s)?0:-1:isNaN(s)||r>s?1:r<s?-1:0},i.prototype.compareDates=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=o?o[t]:null,s=n?n[t]:null;return r instanceof Date?s instanceof Date?r>s?1:r<s?-1:0:1:s instanceof Date?-1:0},i.prototype.compareBools=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=!!o&&Boolean(o[t]),s=!!n&&Boolean(n[t]);return r&&!s?1:!r&&s?-1:0},i.prototype.compareObjects=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=o?o[t]:null,s=n?n[t]:null;return r?s?this.getField(t).$_compareObject(r,s,e,i):1:s?-1:0},i.prototype.summarize=function(t,e){var i=this.rowCount;if(i<1)return!1;for(var o=[],n=0;n<i;n++)o.push(n);return this.summarizeRange(t,o,e)},i.prototype.summarizeRange=function(e,i,o){if(null==e||null==i)return!1;e.clear();var n=i.length;if(n<1)return!1;for(var r,s,a,l=this.getField(e.field).dataType===t.ValueType.NUMBER,u=0,c=e.field,h=0;h<n;){var p=i[h++];null==(_=(y=this._values[p])&&y[c])||l&&(!l||isNaN(_))||(l&&(r=u?r+_:_),(l||""!=_)&&u++,(null==s||_<s)&&(s=_),(null==a||_>a)&&(a=_))}if(e.count=n,u>0)if(e.sum=r,e.min=s,e.max=a,l&&(e.avg=r/n),e.dataCount=u,l&&(e.dataAvg=r/u),o&&l){for(var d=0,f=e.avg,g=0;g<n;g++){var y,_;p=i[g],null!=(_=(y=this._values[p])&&y[c])&&(d+=Math.pow(_-f,2))}e.varsp=d/n,e.vars=d/(n-1)}else e.varsp=NaN,e.vars=NaN;return!0},i.prototype._keepRow=function(t){var e={};return e.rowId=this._rowIds[t],e.values=this._values[t]&&this._values[t].slice(),e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e.outer=this._keepCommandStates(t),e},i.prototype._yieldRow=function(t,e,i){void 0===i&&(i=!0),this._rowIds[t]=e.rowId,this._values[t]=e.values&&e.values.slice(),this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice()),i&&this._yieldCommandStates(t,e.outer)},i.prototype._keepStates=function(t){var e={};return e.rowId=this._rowIds[t],e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e},i.prototype._yieldStates=function(t,e){this._rowIds[t]=e.rowId,this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice())},i.prototype._keepState=function(t){return this._rowStates[t]},i.prototype._yieldState=function(t,e){this._rowStates[t]=e},i.prototype._keepOrgValues=function(){var t=this._orgValues;if(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]&&t[i].slice());return e}return null},i.prototype._yieldOrgValues=function(t){if(this._orgValues)if(t){this._orgValues=[];for(var e=0;e<t.length;e++)this._orgValues.push(t[e]&&t[e].slice())}else this._orgValues=t},i.prototype.$_checkRowIndex=function(t){if(isNaN(t)||t<0||t>=this._values.length)throw xt.isDebugging(),new Ke("row is out of bounds: "+t)},i.prototype.$_resetOrgValues=function(){var e=this.restoreMode;this._orgValues=this.checkStates&&e!=t.RestoreMode.NONE?[]:null,this._needRestore=this._orgValues&&e==t.RestoreMode.AUTO},i.prototype.arrayToRow=function(t,e){for(var i=Math.min(t?t.length:0,this.fieldCount),o=new Array(i),n=0;n<i;n++)o[n]=this.getField(n).readValue(t[n]);return this._internalCalculateValues(o,e),o},i.prototype.$_internalSetRow=function(e,i,o){var n=this.arrayToRow(i,e);this._values[e]=n,this._rowIds[e]=this._nextRowId++,this.checkStates&&(this._rowStates[e]=t.RowState.NONE)},i.prototype.$_internalInsertRow=function(e,i,o){var n=this.arrayToRow(i,e),r=e==this._values.length;r?(this._values.push(n),this._rowIds.push(this._nextRowId++)):(this._values.splice(e,0,n),this._rowIds.splice(e,0,this._nextRowId++)),o&&this.tags.insertRow(e),r?this._rowStates.push(this.checkStates?t.RowState.CREATED:t.RowState.NONE):(this._rowStates.splice(e,0,this.checkStates?t.RowState.CREATED:t.RowState.NONE),this._orgValues&&this._orgValues.splice(e,0,void 0))},i.prototype.$_updateRow=function(t,e,i){if(this._checkClientState())return this.$_checkRowIndex(t),this.refreshFieldFormats(),!(!e||!this.fireRowUpdating(t,e))&&(this.$_internalUpdateRow(t,e,i,!0,!0),this.fireRowUpdated(t),!0)},i.prototype.$_updateRows=function(e,i,o,n,r,s,a){if(void 0===a&&(a=null),this._checkClientState()&&i){var l=i.length;if(!(l<1)&&0!=(n=n<0?l:Math.min(l,n))){o=Math.max(0,o),this.refreshFieldFormats();var u=this.rowCount,c=Math.min(l,o+n);if(!(c<=o))if(a&&(a.rows=[],a.values=[],a.states=[],a.orgValues=[]),s)for(var h=e,p=o;p<c&&h<u;p++,h++){var d=i[p];!this._values[h]&&(this._values[h]=new Array(this.fieldCount)),this.fireRowUpdating(h,d)&&(a&&(a.rows.push(h),a.values.push(this._values[h].slice()),a.states.push(this._rowStates[h]),a.orgValues.push(this._orgValues&&this._orgValues[h])),this.$_internalUpdateRow(h,d,r,!0,!0),this.fireRowUpdated(h))}else{var f=[];for(h=e,p=o;p<c&&h<u;p++,h++)this._rowStates[h]==t.RowState.NONE&&f.push(h),!this._values[h]&&(this._values[h]=new Array(this.fieldCount)),a&&(a.rows.push(h),a.values.push(this._values[h].slice()),a.states.push(this._rowStates[h]),a.orgValues.push(this._orgValues&&this._orgValues[h])),d=i[p],this.$_internalUpdateRow(h,d,r,!1,!1);f.length>0&&this.fireRowStatesChanged(f),this.tags.updateRows(e,n=c-o),this.fireRowsUpdated(e,n)}}}},i.prototype.$_updateRows2=function(e,i,o,n){var r=this;if(this._checkClientState()&&e)if(this.refreshFieldFormats(),n&&(n.rows=[],n.values=[],n.states=[],n.orgValues=[]),Object.keys(e).forEach((function(t){return r.$_checkRowIndex(parseInt(t))})),o)for(var s in e){var a=Number(s),l=e[s];!this._values[a]&&(this._values[a]=new Array(this.fieldCount)),this.fireRowUpdating(a,l)&&(n&&(n.rows.push(a),n.values.push(this._values[a].slice()),n.states.push(this._rowStates[a]),n.orgValues.push(this._orgValues&&this._orgValues[a])),this.$_internalUpdateRow(a,l,i,!0,!0),this.fireRowUpdated(a))}else{var u=[],c=[];for(var s in e)a=Number(s),this._rowStates[a]==t.RowState.NONE&&u.push(a),!this._values[a]&&(this._values[a]=new Array(this.fieldCount)),n&&(n.rows.push(a),n.values.push(this._values[a].slice()),n.states.push(this._rowStates[a]),n.orgValues.push(this._orgValues&&this._orgValues[a])),l=e[s],this.$_internalUpdateRow(a,l,i,!1,!1),c.push(a);u.length>0&&this.fireRowStatesChanged(u),this.tags.updateRowList(c),this.fireRowListUpdated(c)}},i.prototype.$_fillValue=function(e,i,o){if(void 0===o&&(o=null),this._checkClientState()&&Object.keys(e).length){this.refreshFieldFormats(),o&&(o.rows=[],o.values=[],o.states=[],o.orgValues=[]);var n=[],r=[];for(var s in e){r.push(+s),this._rowStates[s]==t.RowState.NONE&&n.push(+s),!this._values[s]&&(this._values[s]=new Array(this.fieldCount)),o&&(o.rows.push(s),o.values.push(this._values[s].slice()),o.states.push(this._rowStates[s]),o.orgValues.push(this._orgValues&&this._orgValues[s]));for(var a=this._values[s].slice(),l=0,u=e[s];l<u.length;l++)a[u[l]]=i;this.$_internalUpdateRow(+s,a,!1,!1,!1)}n.length>0&&this.fireRowStatesChanged(n),this.tags.updateRowList(r),this.fireRowListUpdated(r)}},i.prototype.$_internalUpdateRow=function(e,i,o,n,r){var s,a=this.getFields(),l=xt.isArray(i),u=Math.min(a.length,l?i.length:a.length),c=this._values[e],h=this._rowStates[e],p=this.checkStates&&(h==t.RowState.NONE||!h);c||(this._values[e]=c=new Array(this.fieldCount)),p&&this._orgValues&&(s=xt.deepCopy(c));for(var d=!1,f=0;f<u;f++){var g=a[f];if((g.updatable||h==t.RowState.CREATED||h==t.RowState.CREATE_AND_DELETED)&&(l||i.hasOwnProperty(g.orgFieldName))){var y=l?i[f]:i[g.orgFieldName];o&&void 0===y||(d=!this._needRestore||d||(o?!g.equalValues(c[f],g.readValue(y)):!g.sameValues(c[f],g.readValue(y))),c[f]=g.readValue(y))}}d&&this._internalCalculateValues(c,e),p&&d?(s&&(this._orgValues[e]=s),this.$_changeRowState(e,t.RowState.UPDATED,n)):this._needRestore&&this.restoreState(e),r&&this.tags.updateRow(e)},i.prototype.$_changeRowState=function(e,i,o,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!1),this.checkStates||n){var s=this._rowStates[e];if((i=i||t.RowState.NONE)!=s)return this._rowStates[e]=i,r&&(!Rt(s)&&Rt(i)?this._deletedCount++:Rt(s)&&!Rt(i)&&this._deletedCount--),o&&this.fireRowStateChanged(e),!0}return!1},i.prototype.restoreState=function(e){if(this._rowStates[e]===t.RowState.UPDATED){var i=this._orgValues[e];if(i){for(var o=this._values[e],n=this.strictRestore,r=0,s=this.fieldCount;r<s;r++){var a=o.length>r?o[r]:void 0,l=i.length>r?i[r]:void 0;if(n){if(!this.getField(r).equalValues(a,l))return!1}else if(!this.getField(r).sameValues(a,l))return!1}return this._rowStates[e]=t.RowState.NONE,!0}}return!1},i.prototype.prepareOrgValues=function(e,i,o){o==t.RowState.UPDATED?this._orgValues[e]=this._values[e]?this._values[e].concat():[]:i==t.RowState.UPDATED&&this._orgValues[e]&&(this._orgValues[e]=void 0)},i.prototype.$_changeRowStateEx=function(t,e,i,o,n){var r=this._rowStates[t];return!!this.$_changeRowState(t,e,!1,o,n)&&(this._orgValues&&this.prepareOrgValues(t,r,e),i&&this.fireRowStateChanged(t),!0)},i.prototype.$_getRowObject=function(t,e){var i={},o=this._values[t];if(o){for(var n=0;n<this.fieldCount;n++)i[this.getOrgFieldName(n)]=o[n];e&&(i.__rowState=this.getRowState(t))}return i},i.prototype.$_deleteRow=function(t){if(this.fireRowRemoving(t)){var e=this._rowStates[t];return this.$_internalRemoveRow(t),Rt(e)&&this._deletedCount--,this.tags.removeRow(t),this.fireRowRemoved(t),this._fireRowCountChanged(),!0}return!1},i.prototype.$_internalRemoveRow=function(t){var e=this._rowIds[t];this._hiddenIds.indexOf(e)>=0&&this._hiddenIds.splice(this._hiddenIds.indexOf(e),1),this._values.splice(t,1),this._rowIds.splice(t,1),this._orgValues&&this._orgValues.length>t&&this._orgValues.splice(t,1),this._rowStates.splice(t,1)},i.prototype.$_internalMoveRow=function(t,e){var i=this._values[t],o=this._rowIds[t],n=this._rowStates[t];this._values.splice(t,1),this._rowIds.splice(t,1),this._rowStates.splice(t,1),this._values.splice(e,0,i),this._rowIds.splice(e,0,o),this._rowStates.splice(e,0,n),this._orgValues&&(this._orgValues.length=Math.max(this._orgValues.length,e+1),i=this._orgValues[t],this._orgValues.splice(t,1),this._orgValues.splice(e,0,i))},i.prototype.$_internalMoveRows=function(t,e,i){for(var o=this._values.splice(t,e),n=this._rowIds.splice(t,e),r=this._rowStates.splice(t,e),s=0,a=o.length;s<a;s++)this._values.splice(i+s,0,o[s]),this._rowIds.splice(i+s,0,n[s]),this._rowStates.splice(i+s,0,r[s]);if(this._orgValues)for(this._orgValues.length=Math.max(this._orgValues.length,i+e+1),s=0,a=(o=this._orgValues.splice(t,e)).length;s<a;s++)this._orgValues.splice(i+s,0,o[s])},i.prototype.$_internalMoveRowList=function(t,e){for(var i=[],o=[],n=[],r=t.length-1;r>=0;r--){var s=t[r];i.push(this._values.splice(s,1)[0]),o.push(this._rowIds.splice(s,1)[0]),n.push(this._rowStates.splice(s,1)[0])}i=i.reverse(),o=o.reverse(),n=n.reverse(),r=0;for(var a=t.length;r<a;r++)this._values.splice(e+r,0,i[r]),this._rowIds.splice(e+r,0,o[r]),this._rowStates.splice(e+r,0,n[r]);if(this._orgValues){for(i=[],this._orgValues.length=Math.max(this._orgValues.length,e+t.length+1),r=t.length-1;r>=0;r--)i.push(this._orgValues.splice(t[r],1)[0]);for(i=i.reverse(),r=0,a=t.length;r<a;r++)this._orgValues.splice(e+r,0,i[r])}},i.prototype.$_searchDataRow=function(e,i,o,n,r){var s=this.rowCount;if(s<1)return-1;var a=Math.min(e.length,i.length);if(a<1)return-1;for(var l=o.allFields,u=o.caseSensitive,c=o.partialMatch,h=null,p=[],d=o.reverse,f=o.compareCallback||xt.compareTextValue,g=0;g<a;g++)p[g]=this.getField(e[g]).dataType;n=Math.max(0,n),r=Math.min(s-1,r);for(var y=n;d?y>=r:y<=r;d?y--:y++){var _=!0;for(g=0;g<a;g++){var m=this.getValue(y,e[g]),v=this.getOrgFieldName(e[g]);switch(p[g]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i[g]instanceof Date)_=f.call(this.$_handler,i[g],m,u,c,y,v);else{if(!h){var b=/[.]/.test(i[g])?"yyyy.MM.dd":/[/]/.test(i[g])?"yyyy/MM/dd":/[-]/.test(i[g])?"yyyy-MM-dd":"yyyyMMdd";h=new Be(b)}_=f.call(this.$_handler,i[g],m?h.getText(m):m,u,c,y,v)}break;default:_=f.call(this.$_handler,i[g],m,u,c,y,v)}if(_&&!l)return y;if(!_&&l)break}if(_)return y}return-1},i.prototype.searchDataRow=function(t){var e=-1;t instanceof ii||(t.reverse&&!t.hasOwnProperty("startIndex")&&(t.startIndex=this.rowCount-1),t=new ii(t));var i=t.fields,o=t.values,n=t.startIndex;if(i&&i.length>0&&o&&o.length>0){for(var r=i.length,s=[],a=0;a<r;a++){var l=parseFloat(i[a]);if(isNaN(l)){var u=this.getFieldIndex(i[a]);u>=0&&s.push(u)}else s.push(l)}if(s.length>0){r=this.rowCount;var c=t.reverse;n=c?Math.min(r,n):Math.max(0,n),(e=(c?n>-1:n<r)?this.$_searchDataRow(s,o,t,n,c?0:r-1):-1)<0&&t.wrap&&(c?n<r-1:n>0)&&(e=this.$_searchDataRow(s,o,t,c?r-1:0,c?n+1:n-1))}}return e},i.prototype.$_searchData=function(e,i,o,n,r,s){var a=this.rowCount;if(a<1)return null;for(var l=o.caseSensitive,u=o.partialMatch,c=this.fieldCount,h=e.length,p=o.reverse,d=null,f=[],g=0;g<c;g++)f[g]=this.getField(g).dataType;n=Math.max(0,n),r=Math.max(0,Math.min(a-1,r)),s=Math.max(p?-1:0,Math.min(s,h)),p?s<0&&(n--,s=h-1):s>=e.length&&(n++,s=0);for(var y=o.compareCallback||xt.compareTextValue,_=n;p?_>=r:_<=r;p?_--:_++)for(g=p?_<n?h-1:s:_>n?0:s;p?g>=0:g<h;p?g--:g++){var m=e[g];if(m>=0&&m<c){var v=this.getValue(_,m),b=!1,C=this.getOrgFieldName(m);switch(f[m]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i instanceof Date)b=y.call(this.$_handler,i,v,l,u,_,C);else{if(!d){var w=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd";d=new Be(w)}b=y.call(this.$_handler,i,v?d.getText(v):v,l,u,_,C)}break;default:b=y.call(this.$_handler,i,v,l,u,_,C)}if(b)return{dataRow:_,fieldIndex:m,searchFieldIndex:g,fieldName:C}}}return null},i.prototype.searchData=function(t){var e=this,i=t.value,o=this.rowCount,n=t.fields=xt.makeArray(t.fields);n&&n.length||(n=this.getOrgFieldNames());var r=[];if(!(n&&n.length>0&&null!=i))return null;n.forEach((function(t){r.push(e.getFieldIndex(t))})),t instanceof oi||(t.reverse&&(t.hasOwnProperty("startIndex")||(t.startIndex=o-1),t.hasOwnProperty("startFieldIndex")||(t.startFieldIndex=r.length-1)),t=new oi(t));var s=null,a=t.reverse,l=r.length,u=a?Math.min(o-1,t.startIndex):Math.max(0,t.startIndex),c=a?0:o-1,h=a?Math.min(l-1,t.startFieldIndex):Math.max(0,t.startFieldIndex),p=a?u<o-1||h<l-1:u>0||h>0;return!(s=(a?u>=0&&h>=0:u<o)?this.$_searchData(r,i,t,u,c,h):null)&&t.wrap&&p&&(s=this.$_searchData(r,i,t,a?o-1:0,u-1,a?h:0)),s&&(s.fieldName=this.getOrgFieldName(s.fieldIndex)),s},i.prototype.isDataChanged=function(e,i){if(this._rowStates[e]!==t.RowState.UPDATED||!this._orgValues)return!1;if(this.$_checkRowIndex(e),this._checkFieldIndex(i),this._orgValues[e]){var o=this._orgValues[e][i],n=this.getValue(e,i),r=this.getField(i);return r&&!r.sameValues(o,n)}return!1},i.prototype.$_hideRows=function(t,e){if(null!=t){for(var i=xt.isArray(t)?t:[t],o=[],n=this._hiddenIds.length,r=0,s=i.length;r<s;r++){var a=this.getRowId(i[r]);if(null!=a)if(o.push(a),e)this._hiddenIds.indexOf(a)<0&&this._hiddenIds.push(a);else{var l=this._hiddenIds.indexOf(a);l>=0&&this._hiddenIds.splice(l,1)}}this._hiddenIds.length!==n&&this.fireRowHided(o,e)}},i.prototype.hideRows=function(t){this.$_hideRows(t,!0)},i.prototype.showRows=function(t){this.$_hideRows(t,!1)},i.prototype.clearHiddenRows=function(){this._hiddenIds.length>0&&(this._hiddenIds=[],this.fireRowHided([],!1))},i.prototype.getHiddenRows=function(){for(var t=[],e=0,i=this._hiddenIds.length;e<i;e++){var o=this._rowIds.indexOf(this._hiddenIds[e]);o>=0&&t.push(o)}return t.sort((function(t,e){return t-e})),t},i.prototype.isHiddenRow=function(t){var e=this._rowIds[t];return this._hiddenIds.indexOf(e)>=0},Object.defineProperty(i.prototype,"hiddenCount",{get:function(){return this._hiddenIds.length},enumerable:!1,configurable:!0}),i.prototype.undo=function(){this.canUndo&&this._commands.undo()},i.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},i.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},i}(ei),Ii=function(t){function e(e){var i=t.call(this)||this;return i._tags=new Array,i._owner=e,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.add=function(t){if(t){var e=this._tags||(this._tags=[]);e.indexOf(t)<0&&e.push(t),t.connect(this._owner)}},e.prototype.remove=function(t){if(t&&this._tags){var e=this._tags.indexOf(t);e>=0&&(this._tags.splice(e,1),t.disconnect())}},e.prototype.clearRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].clearRows()},e.prototype.setRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].setRows()},e.prototype.addRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRow(t)},e.prototype.addRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRows(t)},e.prototype.removeRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRow(t)},e.prototype.removeRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRows(t)},e.prototype.updateRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRow(t)},e.prototype.updateRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRows(t)},e}(kt),Ti=function(){function t(){}return t.parse=function(t){return(new window.DOMParser).parseFromString(t,"text/xml")},t.toString=function(t){return(new window.XMLSerializer).serializeToString(t)},t.getNodeValue=function(t){return t.firstChild.nodeValue},t.getAttr=function(t,e){return t.getAttribute(e)},t.setAttr=function(t,e,i){t.setAttribute(e,i)},t.addChild=function(t,e,i){var o=t.createElement(i);return e.appendChild(o),o},t.addChildWithAttr=function(t,e,i,o,n){var r=t.createElement(i);return r.setAttribute(o,n),e.appendChild(r),r},t.addChildWithValue=function(t,e,i,o){var n=t.createElement(i);return n.nodeValue=o,e.appendChild(n),n},t.parseXml=function(t){var e=null;try{(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)}catch(o){if(e)throw o;e=(new window.DOMParser).parseFromString(t,"text/xml")}return e},t}();function Pi(t,e){var i=[];if(t){var o=t.childNodes;if(o)for(var n=0,r=o.length;n<r;n++){var s=o[n];s.tagName===e&&i.push(s)}}return i}var Di,ki=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.extractJson=function(t,e){var i=t;if(e=e&&e.trim())for(var o=e.split("."),n=0;n<o.length;n++){var r=o[n]&&o[n].trim();if(r){var s=r.indexOf("["),a=r.lastIndexOf("]");if(s>0&&a>s){var l=r.substring(0,s),u="$"!=l?i[l]:i;if(Array.isArray(u)){l=r.substring(s+1,a);var c=parseInt(l);i=c>=0&&c<u.length?u[c]:null}else i=null}else"$"!=r&&(i=i[r]);if(!i)break}}return Array.isArray(i)?i:null},e.extractXml=function(t,e){var i=null;if(e=e&&e.trim())for(var o=e.split("."),n=0;n<o.length;n++){var r=o[n]&&o[n].trim();if(r){var s=r.indexOf("["),a=r.lastIndexOf("]");if(s>0&&a>s){var l=r.substring(0,s);(i=Pi(i?i[0]:t,l))&&(l=r.substring(s+1,a),i=i[parseInt(l)])}else i=Pi(i?i[0]:t,r);if(!i)break}}return i},e}(kt);t.DataFillMode=void 0,(Di=t.DataFillMode||(t.DataFillMode={})).SET="set",Di.APPEND="append",Di.INSERT="insert",Di.UPDATE="update";var Ai,Li,Mi=function(e){function i(i){var o=e.call(this)||this;if(o.fillMode=t.DataFillMode.SET,o.fillPos=0,o.count=-1,o.rootArray=!0,o.rows="row",o.start=0,o.delimiter=",",o.quoted=!1,o.parentId=0,o.childrenField=null,o.treeField=null,o.iconField=null,o.needSorting=!1,o.noStates=!1,i){for(var n in i)null!=i[n]&&(o[n]=i[n]);o.parentId=i.parentId||i.parent,o.childrenField=i.childrenField||i.children,o.treeField=i.treeField||i.tree,o.iconField=i.iconField||i.icon,o.needSorting=i.needSorting||i.sorting}return o}return n(i,e),i}(kt),Fi=function(e){function i(t){var i=e.call(this)||this;return i._provider=t,i}return n(i,e),i.prototype._doDispose=function(){this._provider=null},i.prototype.load=function(t,e,i){var o=new Mi(i);if(this._checkEmpty(e,o))return 0;var n=this._provider.checkStates;o.noStates&&(this._provider.checkStates=!1);try{switch(t){case"json":return this._loadJson(e,o);case"xml":return this._loadXml(e,o);case"csv":return this._loadCsv(e,o)}}finally{this._provider.checkStates=n,this._provider.fireDataLoadComplated()}},i.prototype._loadJson=function(e,i){"string"==typeof e&&(e=JSON.parse(e));var o=null;if(i.rootArray&&(o=xt.isArray(e)?e:null),o||(o=ki.extractJson(e,i.rows)),o){var n=i.fillPos,r=i.start,s=i.count;switch(i.fillMode){case t.DataFillMode.APPEND:this._provider.appendRows(o,r,s);break;case t.DataFillMode.INSERT:this._provider.insertRows(n,o,r,s);break;case t.DataFillMode.UPDATE:this._provider.updateRows(n,o,r,s,!1);break;case t.DataFillMode.SET:default:this._provider.setRows(o,r,s)}return o.length}return this._fillEmpty(i),0},i.prototype._loadXml=function(e,i){if("string"==typeof e&&(e=Ti.parse(e)),e&&e.documentElement){var o=i.fillPos,n=i.start,r=i.count,s=i.rows,a=ki.extractXml(e.documentElement,s);switch(i.fillMode){case t.DataFillMode.APPEND:this._provider.appendXmlRows(a,n,r);break;case t.DataFillMode.INSERT:this._provider.insertXmlRows(o,a,n,r);break;case t.DataFillMode.UPDATE:this._provider.updateXmlRows(o,a,n,r);break;case t.DataFillMode.SET:default:this._provider.setXmlRows(a,n,r)}return a.length}return this._fillEmpty(i),0},i.prototype._loadCsv=function(e,i){var o=i.fillPos,n=i.start,r=i.count,s=i.quoted,a=i.delimiter,l=bi.csvToArray(this._provider,e,n,r,s,a);if(l&&(r=l.length)>0){switch(i.fillMode){case t.DataFillMode.APPEND:this._provider.appendRows(l,0,r);break;case t.DataFillMode.INSERT:this._provider.insertRows(o,l,0,r);break;case t.DataFillMode.UPDATE:this._provider.updateRows(o,l,0,r,!1);break;case t.DataFillMode.SET:default:this._provider.setRows(l,0,r)}return l.length}return this._fillEmpty(i),0},i.prototype._fillEmpty=function(e){e.fillMode===t.DataFillMode.SET&&this._provider.setRows(null)},i.prototype._checkEmpty=function(t,e){return!t&&(this._fillEmpty(e),!0)},i}(kt),Ni=function(t){function e(e,i){var o=t.call(this)||this;return o._rowCount=0,o._ds=e,o._rootRow=i,o}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"provider",{get:function(){return this._ds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rootRow",{get:function(){return this._rootRow},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"insertedRows",{get:function(){return this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"insertedCount",{get:function(){return this._rowCount},enumerable:!1,configurable:!0}),e.prototype._prepareLoad=function(t){this._rowCount=0,this._rows=[]},e.prototype._createRow=function(t,e,i){return this._ds.createRow(i,isNaN(i[e])?-1:i[e],i[t],!1)},e.prototype._createRow2=function(t,e,i){return this._ds.createRow(i,e,t,!1)},e.prototype._rowAdded=function(t,e){this._rowCount++,this._rows&&e.parent===t&&this._rows.push(e)},e.prototype._addRow=function(t,e,i,o,n){var r=this._createRow(i,o,n);return e._insertChild(e.count,r,!0,!0),this._rowAdded(t,r),r},e.prototype._addRow2=function(t,e,i,o,n){var r=this._createRow2(i,o,n);return e._insertChild(e.count,r,!0,!0),this._rowAdded(t,r),r},e}(kt),Vi=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype._loadData=function(t,e,i,o,n,r){if(this._prepareLoad(e),!t||t.length<1)return this._rowCount;for(var s=this.provider,a=t.length,l=[],u=new Array(t.length),c=0;c<a;c++)if(l[c]=c,Array.isArray(t[c])){if(Array.isArray(t[c]))for(var h=u[c]=new Array(s.fieldCount),p=0,d=s.fieldCount;p<d;p++)h[p]=t[c][p]}else u[c]=this.provider.objectToRow(t[c]);o&&this.$_sortRows(l,u,i,0,a-1),s.beginUpdate();try{this.$_buildTree(e||this.rootRow,l,u,i,n,r)}finally{s.endUpdate(!1)}return this.insertedCount},e.prototype.$_sortRows=function(t,e,i,o,n){function r(t,o){var n=e[t][i],r=e[o][i];return n==r?0:n<r?-1:1}do{var s=o,a=n,l=t[Math.floor((o+n)/2)];do{for(;!(r(l,t[s])<=0);)s++;for(;!(r(l,t[a])>=0);)a--;if(s<=a){if(s!=a){var u=t[s];t[s]=t[a],t[a]=u}s++,a--}}while(s<=a);o<a&&this.$_sortRows(t,e,i,o,a),o=s}while(o<n)},e.prototype.$_buildTree=function(t,e,i,o,n,r){function s(e,i,n,r){for(var s=r[o];i!=t;){var a=i.getValue(o);if(e.parentCallback){if(e.parentCallback(a,s))return i}else if(0==s.indexOf(a))return i;i=i.parent}return t}var a=e[0],l=this._createRow(n,r,i[a]),u=s(this,t,0,i[a]);if(u._insertChild(u.count,l,!0,!0),this._rowAdded(t,l),e.length>1)for(var c=e.length,h=l,p=1;p<c;p++)a=e[p],l=this._createRow(n,r,i[a]),(u=s(this,h,0,i[a]))._insertChild(u.count,l,!0,!0),this._rowAdded(t,l),h=l},e}(Ni),Bi=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype.load=function(t,e,i,o,n,r){return this._loadData(e,t,i,o,n,r)},e}(Vi),Gi=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype.load=function(t,e,i,o,n,r){var s=bi.csvToArray(this.provider,e);return this._loadData(s,t,i,o,n,r)},e}(Vi),ji=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype.load=function(t,e,i,o,n){if(this._prepareLoad(t),e){var r=ki.extractJson(e,i);if(r&&r.length>0){this.provider.beginUpdate();try{this.$_buildJsonTree(this.provider,t||this.rootRow,r,i,o,n)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},e.prototype.load2=function(t,e,i,o,n,r){if(this._prepareLoad(t),e){var s=ki.extractJson(e,i);if(s&&s.length>0){this.provider.beginUpdate();try{this.$_buildJsonTree2(this.provider,t||this.rootRow,s,o,n,r)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},e.prototype.$_buildJsonTree=function(t,e,i,o,n,r){var s=t.getOrgFieldNames();!function t(i,s,a,l){for(var u=l.length,c=0,h=a.length;c<h;c++){for(var p=a[c],d=new Array(u),f=0;f<u;f++){var g=l[f];p.hasOwnProperty(g)&&(d[f]=p[g])}var y=i._addRow(e,s,n,r,d);if(p.hasOwnProperty(o)){var _=p[o];Array.isArray(_)&&_.length>0&&t(i,y,_,l)}}}(this,e,i,s)},e.prototype.$_buildJsonTree2=function(t,e,i,o,n,r){var s=t.getOrgFieldNames();!function t(i,s,a,l){for(var u=l.length,c=0,h=a.length;c<h;c++){for(var p=a[c],d=new Array(u),f=0;f<u;f++){var g=l[f];p.hasOwnProperty(g)&&(d[f]=p[g])}var y=i._addRow2(e,s,p[n],isNaN(p[r])?-1:p[r],d);if(p.hasOwnProperty(o)){var _=p[o];Array.isArray(_)&&_.length>0&&t(i,y,_,l)}}}(this,e,i,s)},e}(Ni),Hi=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype.load=function(t,e,i,o,n){if(this._prepareLoad(t),e){var r="string"==typeof e?Ti.parseXml(e):e;if(r){var s=ki.extractXml(r.documentElement,i);if(s&&s.length>0){this.provider.beginUpdate();try{this.$_buildXmlTree(this.provider,t||this.rootRow,s,i,o,n)}finally{this.provider.endUpdate(!1)}}}}return this._rowCount},e.prototype.$_buildXmlTree=function(t,e,i,o,n,r){!function t(i,s,a,l,u){for(var c=0,h=a.length;c<h;c++){var p=a[c],d=bi.xmlToRow(p,l,u),f=i._addRow(e,s,n,r,d),g=ki.extractXml(p,o);g&&g.length>0&&t(i,f,g,l,u)}}(this,e,i,t.getFields(),t.getOrgFieldNames())},e}(Vi),$i=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e}(si),Wi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(ri),Ui=function(t){function e(e,i,o,n){var r=t.call(this,e)||this;return r._row=i,r._values=r._cloneRow(o),r._strict=n,r}return n(e,t),e.prototype._doRun=function(t){var e={};return e.row=this._row._keepRow(t),(e.result=this._row.$_update(t,this._values,this._strict,!1))&&(this._newState=this._row.rowState),e},e.prototype._doRedo=function(t,e){this._row.$_update(t,this._values,this._strict,!1)},e.prototype._doUndo=function(t,e){this._row._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(this._row,!1),t._rowUpdated(this._row)},e}($i),zi=function(e){function i(t){var i=e.call(this)||this;return i._children=null,i._descendantCount=0,i._rowId=t&&t._nextRowId++,i}return n(i,e),i.getRowIds=function(t){if(!t)return null;for(var e=[],i=0,o=t;i<o.length;i++){var n=o[i];e.push(n.rowId)}return e},i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"rowId",{get:function(){return this._rowId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"provider",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){var t=this.parent;return null!=t?t._children.indexOf(this):-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconIndex",{get:function(){return-1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._children?this._children.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"descendantCount",{get:function(){return this._descendantCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this._children?this._children.concat():null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"descendants",{get:function(){if(this._children){var t=[];return function t(e,i){for(var o=0,n=e.count;o<n;o++){var r=e.getChild(o);i.push(r),t(r,i)}}(this,t),t}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ancestors",{get:function(){var t=null,e=this.parent;if(e)for(t=[];e&&e.rowId>=0;)t.push(e),e=e.parent;return t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return t.RowState.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.getChild=function(t){if(t>=0){if(!this._children||t>=this._children.length)throw new RangeError("Index is invalid: "+t);return this._children[t]}throw new RangeError("Index is invalid: "+t)},i.prototype.getChildObjects=function(t,e,i,o,n,r){void 0===r&&(r=-1);var s=this._children;if(s){var a=[];e=e||"rows",i=i||"iconIndex";for(var l=0,u=s.length;l<u;l++){var c=s[l],h=c.getObject();o&&(h.__rowId=c._rowId),n&&(h.__rowState=c.rowState),t&&0!==r&&(h[e]=c.getChildObjects(t,e,i,o,n,r-1)),h[i]=c.iconIndex,a.push(h)}return a}return null},i.prototype.$_createTreeOutputRows=function(e,i,o){var n=[];!function t(e,i,o){for(var n=0,r=e.length;n<r;n++){var s=e[n];i.push(e[n]),o&&s[o]&&s[o].length&&t(s[o],i,o)}}(e,n,o);var r,s=this.provider,a=s.fieldCount,l=n.length;i instanceof Ue||(i=new Ue(i));for(var u=i.nullDateText,c=i.nullText,h=i.nanText,p=this.provider.handler,d=0;d<a;d++){var f=s.getField(d),g=f.orgFieldName,y=void 0,_=void 0;if(f.dataType==t.ValueType.DATETIME&&((y=i.datetimeCallback)||(_=i.datetimeWriter)||null!=u&&null!=u))if(y)for(var m=0;m<l;m++)(r=n[m])[g]=y(p,r._rowId,g,r[g]);else for(m=0;m<l;m++){var v=(r=n[m])[g];r[g]=v?_?_.getText(r[g]):v:u}else if(f.dataType==t.ValueType.BOOLEAN&&((y=i.booleanCallback)||(_=i.booleanFormatter)))if(y)for(m=0;m<l;m++)(r=n[m])[g]=y(p,r._rowId,g,r[g]);else for(m=0;m<l;m++)(r=n[m])[g]=_.formatValue(r[g]);else if(f.dataType==t.ValueType.NUMBER&&((y=i.numberCallback)||(_=i.numberFormatter)||null!=h&&null!=h))if(y)for(m=0;m<l;m++)(r=n[m])[g]=y(p,r._rowId,g,r[g]);else for(m=0;m<l;m++){var b=(r=n[m])[g];r[g]=null==b||isNaN(b)?h:_?_.getText(b):b}else if(null!=c&&null!=c)for(m=0;m<l;m++)b=(r=n[m])[g],r[g]=null==b||null==b?c:b}for(var C=0,w=n.length;C<w;C++)delete n[C]._rowId},i.prototype.getOutput=function(t,e){if(t){var i=this.getObject();return i&&(i[e||"iconIndex"]=this.iconIndex,i._rowId=this._rowId,t.rowState&&(i.__rowState=this.rowState),this.$_createTreeOutputRows([i],t)),i}return null},i.prototype.getChildOutputObjects=function(t,e,i,o){var n=this.getChildObjects(e,i,o,!0,null==t?void 0:t.rowState);return n&&t&&this.$_createTreeOutputRows(n,t,i),n},i.prototype.findById=function(t){if(this._children)for(var e=0,i=this._children.length;e<i;e++){var o=this._children[e];if(o.rowId==t)return o;if(o=o.findById(t))return o}return null},i.prototype.indexOf=function(t){return this._children?this._children.indexOf(t):-1},i.prototype.insertChild=function(t,e,i){return this._insertChild(t,e,!1,i)},i.prototype.addChild=function(t,e){return this._insertChild(this.count,t,!1,e)},i.prototype.insertChildren=function(t,e,i){return this._insertChildren(t,e,!1,i)},i.prototype.removeChild=function(t,e){return this._removeChild(t,!1,e)},i.prototype.clearChildren=function(){var t=this.provider;t&&!t._checkClientState()||this._removeChildren()},i.prototype.findChild=function(t,e){var i=this.provider;if(!i||!t||t.length<1||!e||e.length<t.length)return null;for(var o=[],n=[],r=0,s=t.length;r<s;r++){var a=void 0;(a="string"==typeof t[r]?i.getFieldIndex(t[r]):Number(t[r]))>=0&&a<i.fieldCount&&o.indexOf(a)<0&&(o.push(a),n.push(e[r]))}r=0;for(var l=o.length;r<l;r++)o[r]=i.getField(o[r]);return this.$_findChild(o,n)},i.prototype.isAncestorOf=function(t){if(t&&t!==this){for(var e=t.parent;e&&e!==this;)e=e.parent;return e===this}return!1},i.prototype.clearRowStates=function(e,i){var o=this.provider;if(o){var n=[],r=e?[]:null;this._collectStateRows(n,r);var s=n.length,a=r?r.length:0;if(0!=s||0!=a){if(i)for(var l=0,u=n.length;l<u;l++)n[l]._changeRowState(t.RowState.NONE,!0,!1);else s&&o.changeRowStates(n,t.RowState.NONE);a&&o.deleteRows(r)}}},i.prototype.toTreeString=function(){for(var t=this.rowId+"",e=new Array(this.level+1).join("  "),i=0;i<this.count;i++)t+="\n"+e+this.getChild(i).toTreeString();return t},i.prototype._checkFieldIndex=function(t){var e=this.provider.fieldCount;if(t<0||t>=e)throw new Ke("Field index is out of bounds: "+t)},i.prototype._descendantCountChanged=function(t){this._descendantCount+=t;var e=this.parent;e&&e._descendantCountChanged(t)},i.prototype._moveChild=function(t,e){if(t!=e){if(t<0||t>=this._children.length)throw new RangeError("index is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);var i=this._children[t];if(t>e)for(var o=t;o>e;o--)this._children[o]=this._children[o-1];else for(o=t;o<e;o++)this._children[o]=this._children[o+1];this._children[e]=i}},i.prototype._moveChildren=function(t,e){var i=t[0];if(i!=e){if(i<0||i>=this._children.length)throw new RangeError("index is out of range: "+t[0]);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);for(var o=this._children,n=[],r=t.length-1;r>=0;r--)n.push(o.splice(t[r],1)[0]);for(r=0;r<n.length;r++)o.splice(e,0,n[r])}},i.prototype._changeParent=function(t,e){if(e<0||e>t._children.length)throw new RangeError("index is out of range: "+e);var i=this.parent,o=this.index;i._children.splice(o,1),i._descendantCountChanged(-1-this.descendantCount),i._detach(this),t._children.splice(e,0,this),t._descendantCountChanged(1+this.descendantCount),t._attach(this)},i.prototype._insertChild=function(e,i,o,n){var r=this.provider;if(r&&!o){if(!r._checkClientState())return!1;r.refreshFieldFormats()}if(!i)throw new Error("child is null");if(this._children=this._children||[],e<0||e>this._children.length)throw new RangeError("Insert index is invalid: "+e);return!(!o&&!this._doChildAdding(e,i))&&(this._children.splice(e,0,i),this._descendantCountChanged(1+i.descendantCount),this._attach(i),n||i._changeRowState(t.RowState.CREATED,!0,!1),this._doChildAdded(e,i),!0)},i.prototype._insertChildren=function(e,i,o,n){var r=this.provider;if(r&&!o){if(!r._checkClientState())return!1;r.refreshFieldFormats()}if(this._children=this._children||[],e<0||e>this._children.length)throw new RangeError("Insert index is invalid: "+e);if(o||this._doRowsAdding(e,i)){for(var s=0,a=0;a<i.length;a++){var l=i[a];this._children.splice(e+a,0,l),this._attach(l),s+=l.descendantCount,n||l._changeRowState(t.RowState.CREATED,!0,!1)}return this._descendantCountChanged(s),this._doRowsAdded(e,i),!0}return!1},i.prototype._addChild=function(t,e,i){return this._insertChild(this.count,t,e,i)},i.prototype.$_removeChild=function(t,e,i){return!(!i&&!this._doChildRemoving(t))&&(this._children.splice(e,1),this._descendantCountChanged(-1-t.descendantCount),this._detach(t),this._doChildRemoved(t),!0)},i.prototype._removeChild=function(e,i,o){var n=this.provider;if(!n||i||n._checkClientState()){if(e&&this._children){var r=this._children.indexOf(e);if(!n.softDeleting||!n.checkStates)return this.$_removeChild(e,r,i);switch(e.rowState){case t.RowState.CREATED:if(n.deleteCreated)return this.$_removeChild(e,r,i);e._changeRowState(t.RowState.CREATE_AND_DELETED,!0,!1);break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:break;default:e._changeRowState(t.RowState.DELETED,!0,!1)}if(o&&e.count>0)for(var s=e.children,a=e.count;a--;)e._removeChild(s[a],i,o)}return!1}},i.prototype._removeChildren=function(){this._children&&this._children.length>0&&(this._children.splice(0,this._children.length),this._descendantCountChanged(-this._descendantCount),this._doCleared())},i.prototype._setChildren=function(t){this._children&&this._children.length>0&&this._children.splice(0,this._children.length);var e,i=-this._descendantCount;if(t&&(e=t.length)>0){this._children||(this._children=[]);for(var o=0;o<e;o++){var n=t[o];this._children.push(n),i+=1+n.descendantCount,this._attach(n)}}this._descendantCountChanged(i)},i.prototype.$_findChild=function(t,e){for(var i=t.length,o=this.count,n=0;n<o;n++){for(var r=this._children[n],s=!0,a=0;a<i;a++)if(!t[a].equalValues(e[a],r.getValue(t[a].index))){s=!1;break}if(s)return r;if(r=r.$_findChild(t,e))return r}return null},i.prototype._collectStateRows=function(e,i){for(var o=this.count;o--;){var n=this.getChild(o),r=n.rowState;!i||r!=t.RowState.DELETED&&r!=t.RowState.CREATE_AND_DELETED?(r!=t.RowState.NONE&&e.push(n),n._collectStateRows(e,i)):i.push(n)}},i.prototype._clearOrgValues=function(){for(var t=this.count;t--;)this.getChild(t)._clearOrgValues()},i.prototype._restoreState=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i)._restoreState(!0,e);return!1},i.prototype.$_restoreRow=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i).$_restoreRow(!0,e);return!1},i.prototype._doChildAdding=function(t,e){var i=this.provider;return!i||i._rowAdding(this,t,e)},i.prototype._doChildAdded=function(t,e){var i=this.provider;i&&i._rowAdded(e)},i.prototype._doRowsAdding=function(t,e){var i=this.provider;return!i||i._rowsAdding(this,t,e)},i.prototype._doRowsAdded=function(t,e){var i=this.provider;i&&i._rowsAdded(this,e)},i.prototype._doChildRemoving=function(t){var e=this.provider;return!e||e._rowRemoving(t)},i.prototype._doChildRemoved=function(t){var e=this.provider;e&&e._rowRemoved(t)},i.prototype._doCleared=function(){var t=this.provider;t&&t._rowCleared(this)},i}(kt),Ki=function(t){function e(e){var i=t.call(this,e)||this;return i._provider=e,i}return n(e,t),e.prototype._doDispose=function(){this._provider=null,t.prototype._doDispose.call(this)},e.prototype.set=function(t){for(var e=[],i=0;i<t.count;i++)e.push(t.getChild(i).copy());this._setChildren(e)},Object.defineProperty(e.prototype,"provider",{get:function(){return this._provider},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowId",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChildren",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.copy=function(){for(var t=new e(null),i=0,o=this.count;i<o;i++){var n=this.getChild(i).copy();t._addChild(n,!0,!0)}return t._provider=this._provider,t},e.prototype._changeRowState=function(t,e,i){return!1},e.prototype.getObject=function(){return null},e.prototype.getValue=function(t){},e.prototype.setValue=function(t,e,i){return!1},e.prototype._attach=function(t){t._parent=this},e.prototype._detach=function(t){t._parent===this&&(t._parent=null)},e.prototype.update=function(t,e){return!1},e.prototype.$_setHasChildren=function(t){},e.prototype.$_setIconIndex=function(t){},e.prototype._keepRow=function(t){},e.prototype._yieldRow=function(t,e){},e.prototype._keepStates=function(t){},e.prototype._yieldStates=function(t,e){},e}(zi),Yi=function(t){function e(){var e=t.call(this)||this;return e._nextRowId=0,e._commandListeners=[],e}return n(e,t),e.prototype._doDispose=function(){this._fireDispose(),t.prototype._doDispose.call(this)},e.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},e.prototype.registerCommandListener=function(t){t&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},e.prototype.unregisterCommandListener=function(t){var e=this._commandListeners.indexOf(t);e>=0&&this._commandListeners.splice(e,1)},e.prototype._keepCommandStates=function(t){if(this._commandListeners.length>0)return this._commandListeners[0].getCommandStates(t)},e.prototype._yieldCommandStates=function(t,e){if(this._commandListeners.length>0)return this._commandListeners[0].setCommandStates(t,e)},e.prototype._fireDispose=function(){this.fireEvent("onTreeDataProviderDisposed")},e}(qe),qi=function(t){function e(e,i,o){var n=t.call(this,e)||this;return n._rowFields=xt.deepCopy(i),n._value=o,n}return n(e,t),e.prototype._doRun=function(t){var e=t,i={};for(var o in this._rowFields){var n=e.rowById(+o)._keepRow(e);i[o]=n}return e.$_fillValue(this._rowFields,this._value),i},e.prototype._doRedo=function(t,e){t.$_fillValue(this._rowFields,this._value)},e.prototype._doUndo=function(t,e){var i=t;for(var o in this._rowFields)i.rowById(+o)._yieldRow(t,e[o]);t._fireRefresh()},e}($i),Xi=function(t){function e(e,i,o,n){var r=t.call(this,e)||this;return r._rows=i.slice(),r._values=r._cloneValues(o.slice()),r}return n(e,t),e.prototype._doRun=function(t){for(var e=t,i=[],o=0,n=this._rows;o<n.length;o++){var r=n[o]._keepRow(e);i.push(r)}return e.$_updateRows(this._rows,this._values,this._strict),i},e.prototype._doRedo=function(t,e){t.$_updateRows(this._rows,this._values,this._strict)},e.prototype._doUndo=function(t,e){for(var i=0;i<this._rows.length;i++)this._rows[i]._yieldRow(t,e[i]);t._fireRefresh()},e}($i),Qi=function(t){function e(e,i,o,n){var r=t.call(this,e)||this;return r._row=i,r._field=o,r._value=n instanceof Date?new Date(n):n,r}return n(e,t),e.prototype._doRun=function(t){var e={};return e.row=this._row._keepRow(t),(e.result=this._row.$_setValue(this._field,this._value,!1))&&(this._newState=this._row.rowState),e},e.prototype._doRedo=function(t,e){this._row.$_setValue(this._field,this._value,!1)},e.prototype._doUndo=function(t,e){this._row._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(this._row),t._valueChanged(this._row,this._field)},e}($i),Ji=function(e){function i(i,o){var n=e.call(this,i)||this;if(n._iconIndex=-1,n._hasChildren=!1,n._parent=null,n._values=null,n._orgValues=null,n._state=t.RowState.NONE,i&&o){var r=i.fieldCount;n._values=new Array(r);for(var s=0,a=Math.min(o.length,r);s<a;s++)n._values[s]=i.getField(s).readValue(o[s])}return n}return n(i,e),i.prototype._doDispose=function(){this._values=null,this._orgValues=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"provider",{get:function(){return this._parent&&this._parent.provider},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._parent?this._parent.indexOf(this):-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this._parent?this._parent.level+1:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return this._hasChildren},set:function(t){if(t!=this._hasChildren){this._hasChildren=t;var e=this.provider;e&&e._hasChildrenChanged(this)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconIndex",{get:function(){return this._iconIndex},set:function(t){if(isNaN(t)&&(t=-1),t!=this._iconIndex){this._iconIndex=t;var e=this.provider;e&&e._iconIndexChanged(this)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this._values&&this._values.slice()},enumerable:!1,configurable:!0}),i.prototype._attach=function(t){t._parent=this},i.prototype._detach=function(t){t._parent===this&&(t._parent=null)},i.prototype._changeRowState=function(e,i,o){var n=this.provider;if(n&&e!=this._state){var r=this._state;return this._state=e,e==t.RowState.UPDATED&&n._needOrgValues?this._orgValues=this._values.concat():r==t.RowState.UPDATED&&this._orgValues&&(this._orgValues=null),i&&n._stateChanged(this,o),!0}return!1},i.prototype.getValue=function(t){if(this.provider){if(this._checkFieldIndex(t),this._values)return this._values[t];throw new Error("Row data is not loaded")}},i.prototype.setValue=function(t,e,i){var o=this.provider;return!!o&&(o.undoable?o._commands.execute(new Qi(o,this,t,e)):this.$_setValue(t,e,i))},i.prototype.getObject=function(){var t=this.provider;if(t){for(var e=t.fieldCount,i={},o=0;o<e;o++)i[t.getOrgFieldName(o)]=this._values[o];return i}return null},i.prototype.copy=function(){var t=new i(null,null);t._rowId=this._rowId,t._iconIndex=this._iconIndex,t._hasChildren=this._hasChildren,t._state=this._state,t._values=this._values?this._values.concat():null;for(var e=0,o=this.count;e<o;e++){var n=this.getChild(e).copy();t._addChild(n,!0,!0)}return t},i.prototype.update=function(t,e){var i=this.provider;return!!i&&(i.undoable?i._commands.execute(new Ui(i,this,t,e)):this.$_update(i,t,e,!1))},i.prototype._keepRow=function(t){var e={};return e.values=this._values&&this._values.slice(),e.state=this._state,e.orgValues=this._orgValues&&this._orgValues.slice(),e.outer=t._keepCommandStates(this),e},i.prototype._yieldRow=function(t,e){this._values=e.values&&e.values.slice(),this._state=e.state,this._orgValues=e.orgValues&&e.orgValues.slice(),t._yieldCommandStates(this,e.outer)},i.prototype._keepStates=function(t){},i.prototype._yieldStates=function(t,e){},i.prototype._keepState=function(){return this._state},i.prototype._yieldState=function(t){this._state=t},i.prototype.$_setValue=function(e,i,o){var n=this.provider;if(n){if(!n._checkClientState())return;if(n.refreshFieldFormats(),this._checkFieldIndex(e),this._values){if(i!=this._values[e]){var r=null,s=n.getField(e),a=n.checkStates&&(this._state==t.RowState.NONE||!this._state);!o&&a&&n._needOrgValues&&(r=this._values.concat()),this._values[e]=s.readValue(i),n._internalCalculateValues(this._values,this.rowId),!o&&a?(n._needOrgValues&&(this._orgValues=r),this._state=t.RowState.UPDATED,n._stateChanged(this,!1)):n._needRestore&&this.$_restoreState(n),n._valueChanged(this,e)}return!0}throw new Error("Row data is not loaded")}},i.prototype.$_update=function(t,e,i,o){if(!o){if(!t._checkClientState())return;t.refreshFieldFormats()}return!(!e||!o&&!t._rowUpdating(this))&&(this.$_internalUpdate(e,i,!0),t._rowUpdated(this),!0)},i.prototype._clearOrgValues=function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),e.prototype._clearOrgValues.call(this)},i.prototype._restoreState=function(t,i){var o=this.$_restoreState(this.provider);return o&&i&&i.push(this),e.prototype._restoreState.call(this,t,i),o},i.prototype.$_restoreRow=function(i,o){var n=!1;if(this._state===t.RowState.UPDATED){var r=this._orgValues;if(r){for(var s=this._values,a=0,l=Math.min(r.length,this.provider.fieldCount);a<l;a++)s[a]=r[a];this._state=t.RowState.NONE,o&&o.push(this),n=!0}}return e.prototype.$_restoreRow.call(this,i,o),n},i.prototype.$_restoreState=function(e){if(this._state==t.RowState.UPDATED&&this._orgValues){for(var i=this._orgValues,o=this._values,n=this.provider,r=n.strictRestore,s=0,a=n.fieldCount;s<a;s++){var l=o.length>s?o[s]:void 0,u=i.length>s?i[s]:void 0;if(r){if(!n.getField(s).equalValues(l,u))return!1}else if(!n.getField(s).sameValues(l,u))return!1}return this._state=t.RowState.NONE,!0}return!1},i.prototype.$_getUpdatedCells=function(){var t=this._orgValues,e=this._values,i=this.provider,o=i.strictRestore,n=[];if(!t||t.length<=0)return null;for(var r=0,s=i.fieldCount;r<s;r++){var a=e.length>r?e[r]:void 0,l=t.length>r?t[r]:void 0,u=i.getField(r);u.calculated||(o?u.equalValues(a,l)||n.push({fieldName:i.getOrgFieldName(r),oldValue:t[r],newValue:e[r]}):u.sameValues(a,l)||n.push({fieldName:i.getOrgFieldName(r),oldValue:t[r],newValue:e[r]}))}return n},i.prototype.$_setHasChildren=function(t){this._hasChildren=t},i.prototype.$_setIconIndex=function(t){this._iconIndex=isNaN(t)?-1:t},i.prototype.$_internalUpdate=function(e,i,o){var n=!1,r=Array.isArray(e),s=this.provider;if(s){var a=Math.min(s.fieldCount,r?e.length:s.fieldCount),l=s.checkStates&&(this._state==t.RowState.NONE||!this._state),u=null;l&&s._needOrgValues&&(u=this._values.concat());for(var c=0;c<a;c++){var h=s.getField(c);if(r||e.hasOwnProperty(h.orgFieldName)){var p=r?e[c]:e[h.orgFieldName];i&&void 0===p||(n=!s._needRestore||n||(i?!h.equalValues(this._values[c],h.readValue(p)):!h.sameValues(this._values[c],h.readValue(p))),this._values[c]=s.getField(c).readValue(p))}}s._internalCalculateValues(this._values,this.rowId),l&&n?(u&&(this._orgValues=u),this._state=t.RowState.UPDATED,o&&s._stateChanged(this,!1)):s._needRestore&&this.$_restoreState(s)}},i}(zi),Zi=function(e){function i(t,i){var o=e.call(this)||this;return o._countDirty=!1,o._tagLock=!1,o._points=[],o._nextPoint=0,o._rowMap=[],o._needOrgValues=!1,o._needRestore=!1,o._checkParentProc=null,o._hiddenRows=[],o.$_handler=i,t&&(o._commands=new Wi(o)),o._rootRow=new Ki(o),o._tags=new Ii(o),o}return n(i,e),i.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._points=this._rowMap=this._hiddenRows=[],this._rootRow.clearChildren(),this._tags=this._tags&&this._tags.dispose(),e.prototype._doDispose.call(this),this._rootRow=null},Object.defineProperty(i.prototype,"rootRow",{get:function(){return this._rootRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parentCallback",{get:function(){return this._parentCallback},set:function(t){this._parentCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"needOrgValues",{get:function(){return this._needOrgValues},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"needRestore",{get:function(){return this._needRestore},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"handler",{get:function(){return this.$_handler},enumerable:!1,configurable:!0}),i.prototype.addTag=function(t){this._tags&&this._tags.add(t)},i.prototype.removeTag=function(t){this._tags&&this._tags.remove(t)},i.prototype.setRows=function(t,e,i,o,n){if(!this._checkClientState())return-1;var r=0,s=this.getFieldIndex(e);if(s>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var a=new Bi(this,this._rootRow);a.parentCallback=this._parentCallback,r=a.load(null,t,s,i,this.getFieldIndex(o),this.getFieldIndex(n)),this._checkSum(r),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),r},i.prototype.setCsvRows=function(t,e,i,o,n){if(!this._checkClientState())return-1;var r=0,s=this.getFieldIndex(e);if(s>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var a=new Gi(this,this._rootRow);a.parentCallback=this._parentCallback,r=a.load(null,t,s,i,this.getFieldIndex(o),this.getFieldIndex(n)),this._checkSum(r),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),r},i.prototype.setXmlRows=function(t,e,i,o){if(!this._checkClientState())return-1;var n=0;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),n=new Hi(this,this._rootRow).load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o)),this._checkSum(n),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),n},i.prototype.setJsonRows=function(t,e,i,o){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var n=new ji(this,this._rootRow);this._rowCount=n.load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o)),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},i.prototype.setJsonRows2=function(t,e,i,o,n){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var r=new ji(this,this._rootRow);this._rowCount=r.load2(null,t,e,i,o,n),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},i.prototype.appendDataRows=function(t,e,i,o,n,r){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(i);if(a>=0){var l=new Bi(this,this._rootRow);l.parentCallback=this._parentCallback,this.beginUpdate();try{this.refreshFieldFormats(),s=l.load(t,e,a,o,this.getFieldIndex(n),this.getFieldIndex(r))}finally{if(this.endUpdate(!1),s>0){var u=l.insertedRows;u&&(s=u.length)>0&&this._rowsAdded(t,u)}}}return s},i.prototype.appendCsvRows=function(t,e,i,o,n,r){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(i);if(a>=0){this.beginUpdate();try{this.refreshFieldFormats();var l=new Gi(this,this._rootRow);l.parentCallback=this._parentCallback,s=l.load(t,e,a,o,this.getFieldIndex(n),this.getFieldIndex(r))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),s},i.prototype.appendXmlRows=function(t,e,i,o,n){if(!this._checkClientState())return-1;var r=0;if(e){var s=new Hi(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),r=s.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(n))}finally{if(this.endUpdate(!1),r>0){var a=s.insertedRows;a&&(r=a.length)>0&&this._rowsAdded(t,a)}}}return this._fireRowCountChanged(),r},i.prototype.appendJsonRows=function(t,e,i,o,n){if(!this._checkClientState())return-1;var r=0;if(e){var s=new ji(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),r=s.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(n))}finally{if(this.endUpdate(!1),r>0){var a=s.insertedRows;a&&(r=a.length)>0&&this._rowsAdded(t,a)}}}return this._fireRowCountChanged(),r},i.prototype.setIconIndex=function(t,e){return t.iconIndex!=e&&(t.$_setIconIndex(e),!0)},i.prototype.setHasChildren=function(t,e){return e!=t.hasChildren&&(t.$_setHasChildren(e),!0)},i.prototype.getChildCount=function(t){return(t||this._rootRow).count},i.prototype.getRows=function(t){return(t||this._rootRow).children},i.prototype.getDescendantCount=function(t){return(t||this._rootRow).descendantCount},i.prototype.getDescendants=function(t,e){e=arguments.length>1?e:0;var i=t||this._rootRow;if(e<=0)return i.descendants;if(e>i.level){var o=[];return function t(e,i,o){for(var n=0,r=e.count;n<r;n++){var s;i.push(s=e.getChild(n)),o>s.level&&t(s,i,o)}}(i,o,e),o}return null},i.prototype.getChild=function(t,e){return(t||this._rootRow).getChild(e)},i.prototype.hasData=function(t){return null!=this.rowById(t)},i.prototype.rowById=function(t){var e=this._rowMap[t];return e&&e.rowId===t||(e=this._findRowById(t))&&(this._rowMap[t]=e),e},i.prototype.getDataRow=function(t){var e=this._rowMap[t];return null==e&&(e=this._findRowById(t)),null!=e?t:-1},i.prototype.rowsByIds=function(t,e){if(t){for(var i=[],o=0,n=t;o<n.length;o++){var r=n[o],s=this.rowById(r);(s||e)&&i.push(s)}return i}return null},i.prototype.createRow=function(t,e,i,o){void 0===o&&(o=!0);var n=null;if(o&&this.refreshFieldFormats(),Array.isArray(t))n=new Ji(this,t);else if(t){var r=new Array(this.fieldCount);for(var s in t){var a=this.getFieldIndex(s);a>=0&&(r[a]=t[s])}n=new Ji(this,r)}return n&&(this._internalCalculateValues(n._values,n.rowId),n._iconIndex=e,n._hasChildren=i),n},i.prototype.clearRows=function(){this._checkClientState()&&(this._clearRows(),this.clearCommandStack(),this._eventLock<=0&&(this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()))},i.prototype.removeRows=function(e,i){for(var o=[],n=e.length;n--;)(l=this.rowById(e[n]))&&o.push(l);function r(t,e){for(var i=e;i>=0;i--)if(o[i].isAncestorOf(t))return!1;return!0}if(this._checkClientState()&&o&&!(o.length<1)){o.sort((function(t,e){return t.level-e.level}));var s=o;for(n=o.length;n--;)o[n].level>1&&!r(o[n],n-1)&&o.splice(n,1);if(o.length<1||!this._rowsRemoving(o))return!1;if(this.softDeleting&&this.checkStates){var a=[];for(n=o.length-1;n>=0;n--){var l,u=!1;switch((l=o[n]).rowState){case t.RowState.CREATED:this.deleteCreated||(u=l._changeRowState(t.RowState.CREATE_AND_DELETED,!1,!1),o.splice(n,1));break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:o.splice(n,1);break;default:u=l._changeRowState(t.RowState.DELETED,!0,!1),o.splice(n,1)}if(u&&a.push(l),i&&l.count>0)for(var c=l.count;c--;)l.removeChild(l.children[c],i)}a.length>0&&this._fireRowStatesChanged(a)}return this.deleteRows(s),!0}},i.prototype.changeRowIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t.parent,o=i.children.length,n=t.index,r=Math.min(Math.max(n+e,0),o-1);return 0!=(e=r-n)&&!!this._fireRowSiblingMoving(t,e)&&(i._moveChild(n,r),this._fireRowSiblingMoved(t,e),!0)},i.prototype.changeRowsIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t[0].parent,o=i.children.length,n=t[0].index,r=Math.min(Math.max(n+e,0),o-1);if(0==(e=r-n))return!1;for(var s=[],a=0,l=t;a<l.length;a++){var u=l[a];s.push(u.index)}return!!this._fireRowsSiblingMoving(t,e)&&(i._moveChildren(s,r),this._fireRowsSiblingMoved(t,e),!0)},i.prototype.changeRowParent=function(t,e,i){if(t===e)throw new Error("Parent must not be self.");if(t.isAncestorOf(e))throw new Error("Can`t move to child of a descendant.");var o=t.parent;if(o===e&&i==t.index)return!1;if(!this._checkClientState())return!1;e._children||(e._children=[]);var n=e._children.length;return i=Math.min(Math.max(i,0),n),!!this._fireRowParentChanging(t,e,i)&&(t._changeParent(e,i),e instanceof Ki||this.setHasChildren(e,!0),o instanceof Ki||0!=o.count||this.setHasChildren(o,!1),this._fireRowParentChanged(t,e,i),!0)},i.prototype.moveRows=function(t,e){return this.changeRowsIndex(t,e.index-t[0].index)},i.prototype.toTreeString=function(){return this._rootRow.toTreeString()},i.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},i.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(this._resetLock>0?this._fireReset():this._fireRefresh(),this._countDirty&&this._fireRowCountChanged()),this._resetLock=0,this._countDirty=!1)},i.prototype.$_extractTreeRowIds=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null},i.prototype.$_searchDataRow=function(e,i,o,n,r,s){var a=e.length;if(a<1)return-1;var l=Math.min(i.length,o.length);if(l<1)return-1;for(var u=n.allFields,c=n.caseSensitive,h=n.partialMatch,p=null,d=[],f=n.compareCallback||xt.compareTextValue,g=n.reverse,y=0;y<l;y++)d[y]=this.getField(i[y]).dataType;r=Math.max(0,r),s=Math.min(a-1,s);for(var _=r;g?_>=s:_<=s;g?_--:_++){var m=!0;if(m)for(y=0;y<l;y++){var v=this.rowById(e[_]).getValue(i[y]),b=this.getOrgFieldName(i[y]);switch(d[y]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(o[y]instanceof Date)m=f.call(this.$_handler,o[y],v,c,h,e[_],b);else{if(!p){var C=/[.]/.test(o[y])?"yyyy.MM.dd":/[/]/.test(o[y])?"yyyy/MM/dd":/[-]/.test(o[y])?"yyyy-MM-dd":"yyyyMMdd";p=new Be(C)}m=f.call(this.$_handler,o[y],v?p.getText(v):v,c,h,e[_],b)}break;default:m=f.call(this.$_handler,o[y],v,c,h,e[_],b)}if(m&&!u)return e[_];if(!m&&u)break}if(m)return e[_]}return-1},i.prototype.searchDataRow=function(t,e){var i;if(void 0===e&&(e=null),null!=e){var o=this.rowById(e);if(!o)return-1;i=this.$_extractTreeRowIds(o.descendants)}else i=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(i)||i.length<=0)return-1;t instanceof ii||(t.reverse&&!t.hasOwnProperty("startIndex")&&(t.startIndex=i.length-1),t=new ii(t));var n=t.reverse,r=i.length,s=Math.max(0,i.indexOf(t.startIndex)),a=t.fields,l=t.values,u=-1;if(a&&a.length>0&&l&&l.length>0){for(var c=a.length,h=[],p=0;p<c;p++){var d=a[p];if(xt.isNumber(d))h.push(d);else{var f=this.getFieldIndex(a[p]);f>=0&&h.push(f)}}h.length>0&&(u=(n?s>0:s<r)?this.$_searchDataRow(i,h,l,t,s,n?0:r-1):-1)<0&&t.wrap&&(n?s<r-1:s>0)&&(u=this.$_searchDataRow(i,h,l,t,n?r-1:0,n?s+1:s-1))}return u},i.prototype.$_searchData=function(e,i,o,n,r,s,a){var l=this.rowCount;if(l<1)return null;for(var u=n&&n.caseSensitive,c=n&&n.partialMatch,h=this.fieldCount,p=i.length,d=null,f=[],g=n.reverse,y=n.compareCallback||xt.compareTextValue,_=0;_<h;_++)f[_]=this.getField(_).dataType;r=Math.max(0,r),s=Math.min(l-1,s),a=Math.max(0,a),n.reverse?a<0&&(r--,a=i.length-1):a>=i.length&&(r++,a=0);for(var m=r;g?m>=s:m<=s;g?m--:m++)for(_=g?m<r?p-1:a:m>r?0:a;g?_>=0:_<p;g?_--:_++){var v=!1,b=i[_],C=this.getOrgFieldName(i[_]);if(b>=0&&b<h){var w=this.rowById(e[m]).getValue(b);switch(f[b]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(o instanceof Date)v=y.call(this.$_handler,o,w,u,c,e[m],C);else{if(!d){var S=/[.]/.test(o)?"yyyy.MM.dd":/[/]/.test(o)?"yyyy/MM/dd":/[-]/.test(o)?"yyyy-MM-dd":"yyyyMMdd";d=new Be(S)}v=y.call(this.$_handler,o,w?d.getText(w):w,u,c,e[m],C)}break;default:v=y.call(this.$_handler,o,w,u,c,e[m],C)}if(v)return{dataRow:e[m],fieldIndex:b,searchFieldIndex:_,fieldName:C}}}return null},i.prototype.searchData=function(t,e){var i,o=this;if(void 0===e&&(e=-1),e>=0){var n=this.rowById(e);if(!n)return null;i=this.$_extractTreeRowIds(n.descendants)}else i=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(i)||i.length<=0)return null;var r=i.length,s=null,a=xt.makeArray(t.fields)||this.getOrgFieldNames();a&&a.length||(a=this.getOrgFieldNames());var l=[];a.forEach((function(t){return l.push(o.getFieldIndex(t))})),t instanceof oi||(t.reverse&&(t.hasOwnProperty("startIndex")||(t.startIndex=r-1),t.hasOwnProperty("startFieldIndex")||(t.startFieldIndex=l.length-1)),t=new oi(t));var u=t.reverse,c=l.length,h=t.value,p=i.indexOf(t.startIndex)<0?u?r-1:0:i.indexOf(t.startIndex),d=u?0:r-1,f=Math.max(0,Math.min(c-1,t.startFieldIndex)),g=u?p>=0&&f>0:p<r&&f<c,y=u?p<r-1||f<c-1:p>0||f>0;return null!=h&&l.length>0&&!(s=g?this.$_searchData(i,l,h,t,p,d,f):null)&&t.wrap&&y&&(s=this.$_searchData(i,l,h,t,u?r-1:0,p-1,u?f:0)),s},i.prototype.$_hideDataRows=function(t,e){if(null!=t){for(var i=xt.isArray(t)?t:[t],o=this._hiddenRows.length,n=[],r=0,s=i.length;r<s;r++){var a=i[r];if(null!=this._findRowById(a))if(n.push(a),e)this._hiddenRows.indexOf(a)<0&&this._hiddenRows.push(a);else{var l=this._hiddenRows.indexOf(a);l>=0&&this._hiddenRows.splice(l,1)}}this._hiddenRows.length!==o&&this._fireRowsHiddenChanged(n,e)}},i.prototype.hideRows=function(t){this.$_hideDataRows(t,!0)},i.prototype.showRows=function(t){this.$_hideDataRows(t,!1)},i.prototype.clearHiddenRows=function(){if(this._hiddenRows.length>0){var t=this._hiddenRows.concat();this._hiddenRows=[],this._fireRowsHiddenChanged(t,!1)}},i.prototype.getHiddenRows=function(){var t=this._hiddenRows.concat();return t.sort((function(t,e){return t-e})),t},i.prototype.isHiddenRow=function(t){return!!this.rowById(t)&&this._hiddenRows.indexOf(t)>=0},Object.defineProperty(i.prototype,"hiddenCount",{get:function(){return this._hiddenRows.length},enumerable:!1,configurable:!0}),i.prototype.summarize=function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount;if(i<1)return!1;if(t.count=i,t.sum=0,t.min=null,t.max=null,t.dataCount=0,this.$_summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,e){var o=this.$_summarizeVars(this._rootRow,t);t.varsp=o/t.count,t.vars=o/(t.count-1)}return!0},i.prototype.summarizeRange=function(e,i,o){if(null==e||null==i)return!1;e.clear();var n=i.length;if(n<1)return!1;for(var r=0,s=e.field,a=this.getField(s).dataType===t.ValueType.NUMBER,l=null,u=null,c=null,h=0;h<n;)null==(g=i[h++].getValue(s))||a&&(!a||isNaN(g))||(a&&(l=r?l+g:g),(a||""!=g)&&r++,(null==u||g<u)&&(u=g),(null==c||g>c)&&(c=g));if(e.count=n,r>0&&(l=null!=l?l:a?NaN:null,u=null!=u?u:a?NaN:null,c=null!=c?c:a?NaN:null,e.sum=l,e.min=u,e.max=c,e.avg=l/n,e.dataCount=r,e.dataAvg=0===e.dataCount?NaN:e.sum/e.dataCount,o))if(n>1){for(var p=0,d=e.avg,f=0;f<n;f++){var g=i[f].getValue(s);isNaN(g)||(p+=Math.pow(g-d,2))}e.varsp=p/n,e.vars=p/(n-1)}else e.varsp=0,e.vars=0;return!0},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rootRow.descendantCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._commands&&this._commands.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands&&this._commands.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._commands&&this._commands.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._commands&&this._commands.redoing},enumerable:!1,configurable:!0}),i.prototype.getRow=function(t){return this.rowById(t).values},i.prototype.deleteRows=function(t){if(this._checkClientState()&&t&&t.length>0){var e=this._softDeleting;this.beginUpdate();try{this._softDeleting=!1,this._tagLock=!0;try{for(var i=t.length-1;i>=0;i--){var o=t[i],n=o&&o.parent;n&&n._removeChild(o,!0,!1)}}finally{this._tagLock=!1}}finally{this._softDeleting=e,this.endUpdate(!1)}this._rowsRemoved(t)}},i.prototype.equalValues=function(t,e,i){if(e!==i){var o=this._fields[t],n=e.getValue(t),r=i.getValue(t);return o.equalValues(n,r)}return!0},i.prototype.sameValues=function(t,e,i,o){if(e!==i){var n=this._fields[t],r=e.getValue(t),s=i.getValue(t);return o?String(r).toLowerCase()==String(s).toLowerCase():n.sameValues(r,s)}return!0},i.prototype.equalTexts=function(t,e,i){return this.sameValues(t,e,i,!0)},i.prototype.compareValues=function(t,e,i,o){if(e!==i){var n=e.getValue(t),r=i.getValue(t);return null==n?null==r?0:-1:null==r||(n=o?String(n).toLowerCase():n)>(r=o?String(r).toLowerCase():r)?1:n<r?-1:0}return 0},i.prototype.compareTexts=function(t,e,i){return this.compareValues(t,e,i,!0)},i.prototype.compareNumbers=function(t,e,i){if(e!==i){var o=e.getValue(t),n=i.getValue(t);return isNaN(o)?isNaN(n)?0:-1:isNaN(n)||o>n?1:o<n?-1:0}return 0},i.prototype.compareBools=function(t,e,i){if(e!==i){var o=e.getValue(t),n=i.getValue(t);return o&&!n?1:!o&&n?-1:0}return 0},i.prototype.compareDates=function(t,e,i){if(e!==i){var o=e.getValue(t),n=i.getValue(t);return o instanceof Date?n instanceof Date?o>n?1:o<n?-1:0:1:n instanceof Date?-1:0}return 0},i.prototype.compareObjects=function(t,e,i){var o=e.values,n=i.values;if(o===n)return 0;var r=o?o[t]:null,s=n?n[t]:null;return r?s?this.getField(t).$_compareObject(r,s,e.rowId,i.rowId):1:s?-1:0},i.prototype.getDistinctValues=function(e,i,o){if(void 0===i&&(i=-1),void 0===o&&(o=t.SortDirection.ASCENDING),this._checkFieldIndex(e),i<0&&(i=this.getDescendantCount(this._rootRow)),i>0){for(var n=this.getDescendants(this._rootRow,0),r=this.getField(e).dataType,s=[],a=[],l=void 0,u=0,c=n.length;u<c;u++)switch(l=n[u].values[e],r){case t.ValueType.NUMBER:null!=l&&isNaN(l)||s.indexOf(l)<0&&s.push(l);break;case t.ValueType.DATE:case t.ValueType.DATETIME:l?a.indexOf(l.getTime())<0&&(a.push(l.getTime()),s.push(l)):(a.push(l),s.push(l));break;case t.ValueType.OBJECT:default:s.indexOf(l)<0&&s.push(l)}return o!==t.SortDirection.NONE&&(s=xt.included(r,t.ValueType.DATETIME,t.ValueType.DATE)?s.sort((function(t,e){return t-e})):s.sort(),o===t.SortDirection.DESCENDING&&(s=s.reverse())),s.slice(0,i)}return null},i.prototype._doFieldsReset=function(){this._clearRows(),this._fireReset()},i.prototype.refreshClients=function(){this._fireRefreshClient()},i.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){if(this.fieldCount>0&&this._rootRow.count>0){var e=this._rootRow.copy(),i=this._nextPoint++;return t||e.clearRowStates(!1,!1),this._points.push({id:i,nextRowId:this._nextRowId,data:e}),i}return-1}},i.prototype.rollback=function(t){if(void 0===t&&(t=0),this._checkClientState())for(var e=this._points.length-1;e>=0;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this._rowMap=[],this._rootRow.set(i.data),this._nextRowId=i.nextRowId,this.$_prepareMap(),this._fireRefresh();break}}},i.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;i>=t;i--)e[i].data=null,e.pop()},i.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},i.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},i.prototype._doCheckStatesChanged=function(){this.$_resetOrgValues()},i.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},i.prototype._hasChildrenChanged=function(t){this._fireHasChildrenChanged(t)},i.prototype._iconIndexChanged=function(t){this._fireIconIndexChanged(t)},i.prototype._stateChanged=function(t,e){this._fireRowStateChanged(t,e)},i.prototype._statesChanged=function(t){this._fireRowStatesChanged(t)},i.prototype._valueChanged=function(t,e){this._fireValueChanged(t,e)},i.prototype._rowAdding=function(t,e,i){return this._fireRowAdding(t,e,i)},i.prototype._rowAdded=function(t){this._tagLock||this._tags.addRow(t),this._eventLock<=0&&(this._fireRowAdded(t),this._fireRowCountChanged())},i.prototype._rowsAdding=function(t,e,i){return this._fireRowsAdding(t,e,i)},i.prototype._rowsAdded=function(t,e){this._tagLock||this._tags.addRows(e),this._eventLock<=0&&(this._fireRowsAdded(t,e),this._fireRowCountChanged())},i.prototype._rowRemoving=function(t){return this._fireRowRemoving(t)},i.prototype._rowRemoved=function(t){this._tagLock||this._tags.removeRow(t),this._eventLock<=0&&(this._fireRowRemoved(t),this._fireRowCountChanged()),this.$_removeMap(t)},i.prototype._rowsRemoving=function(t){return this._fireRowsRemoving(t)},i.prototype._rowsRemoved=function(t){this._tagLock||this._tags.removeRows(t),this._eventLock<=0&&(this._fireRowsRemoved(t),this._fireRowCountChanged()),this.$_removeMap(t)},i.prototype._rowCleared=function(t){if(t){var e=t.children;this._tags.removeRows(e),this._eventLock<=0&&(this._fireRowsRemoved(e),this._fireRowCountChanged())}},i.prototype._rowUpdating=function(t){return this._fireRowUpdating(t)},i.prototype._rowUpdated=function(t){this._tags.updateRow(t),this._eventLock<=0&&this._fireRowUpdated(t)},i.prototype._rowsUpdating=function(t){return this._fireRowsUpdating(t)},i.prototype._rowsUpdated=function(t){this._tags.updateRows(t),this._eventLock<=0&&this._fireRowsUpdated(t)},i.prototype.getRowId=function(t){return t},i.prototype.getValue=function(t,e){var i=this.rowById(t);if(i)return i.getValue(e)},i.prototype.setValue=function(t,e,i){var o=this.rowById(t);if(o)return o.setValue(e,i,!1)},i.prototype.getRowObject=function(t){var e=this.rowById(t),i=this.fieldCount,o={},n=e._values;if(n)for(var r=0;r<i;r++)o[this.getOrgFieldName(r)]=n[r];return o},i.prototype.getRowState=function(e){var i=this.rowById(e);return i?i.rowState:t.RowState.NONE},i.prototype.setRowState=function(t,e,i){var o=this.rowById(t);if(o&&(this.checkStates||i)){var n=o.rowState;e!=n&&o._changeRowState(e,!0,!!Rt(n)||void 0)}},i.prototype.changeRowStates=function(t,e){for(var i=t.length,o=[],n=0;n<i;n++){var r=t[n];r._changeRowState(e,!1,!1)&&o.push(r)}o.length>0&&this._fireRowStatesChanged(o)},i.prototype.clearRowStates=function(t,e){this._checkClientState()&&this._rootRow.clearRowStates(t,e)},i.prototype.$_collectStateRows=function(t,e,i){for(var o=0,n=t.count;o<n;o++){var r=t.getChild(o);r.rowState==e&&i.push(r.rowId),this.$_collectStateRows(r,e,i)}},i.prototype.getStateRows=function(t){var e=[];return this.$_collectStateRows(this._rootRow,t,e),e},i.prototype.$_collectAllStateRows=function(e,i){for(var o=0,n=e.count;o<n;o++){var r=e.getChild(o);switch(r.rowState){case t.RowState.CREATED:case t.RowState.UPDATED:case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:i[r.rowState].push(r.rowId)}this.$_collectAllStateRows(r,i)}},i.prototype.getAllStateRows=function(){var e={};return e[t.RowState.CREATED]=[],e[t.RowState.UPDATED]=[],e[t.RowState.DELETED]=[],e[t.RowState.CREATE_AND_DELETED]=[],this.$_collectAllStateRows(this._rootRow,e),e},i.prototype.setRowStates=function(t,e,i,o){if(this._checkClientState()){for(var n=o?null:[],r=0,s=t.length;r<s;r++){var a=this.rowById(t[r]);a&&(this.checkStates||i)&&a._changeRowState(e,o,!1)&&!o&&n.push(a)}!o&&n.length>0&&this._fireRowStatesChanged(n)}},i.prototype.$_getRowStateCount=function(t,e){for(var i=0,o=0,n=t.count;o<n;o++){var r=t.getChild(o);e.indexOf(r.rowState)>=0&&i++,i+=this.$_getRowStateCount(r,e)}return i},i.prototype.getRowStateCount=function(t){return this.$_getRowStateCount(this._rootRow,t)},i.prototype.restoreUpdatedStates=function(t){this.restoreUpdatedRows(t)},i.prototype.restoreUpdatedRows=function(t){if(this._checkClientState()){var e=[];if(null==t)this._rootRow.$_restoreRow(!0,e);else for(var i=t.length;i--;){var o=this.rowById(t[i]);o&&o.$_restoreRow(!1,e)}1==e.length?this._fireRowStateChanged(e[0],!1):e.length>1&&this._fireRowStatesChanged(e)}},i.prototype._reCalculateFields=function(t){var e=this;this.getDescendants(this._rootRow,-1).forEach((function(i){e._internalCalculateValues(i._values,i.rowId,t)}))},i.prototype.getUpdatedCells=function(e){var i=this.restoreMode;if(i!=t.RestoreMode.AUTO&&i!=t.RestoreMode.EXPLICIT)return null;if(null==e)e=this.getStateRows(t.RowState.UPDATED);else if(!Array.isArray(e)){if("number"!=typeof e)return null;e=[e]}if(!Array.isArray(e))return null;for(var o=[],n=0,r=e.length;n<r;n++){var s=this.rowById(e[n]);if(s){var a=s.$_getUpdatedCells();a&&a.length>0&&o.push({__rowId:s.rowId,updatedCells:a})}}return o},i.prototype.canUpdateRow=function(t){return!0},i.prototype.canInsertRow=function(t){return!0},i.prototype.canDeleteRow=function(t){return!0},i.prototype.isDataChanged=function(e,i){if(e<0)return!1;var o=this.rowById(e);!o&&xt.isDebugging();var n=o._orgValues;if(o.rowState!==t.RowState.UPDATED||!n)return!1;if(n){var r=n[i],s=o._values[i],a=this._fields[i];return a&&!a.sameValues(r,s)}return!1},i.prototype.$_createFrom=function(t,e){var i=t.getObject();e&&(i=this._convertValues(i,e));for(var o=this.objectToRow(i),n=new Ji(this,o),r=0;r<t.count;r++){var s=this.$_createFrom(t.getChild(r),e);n.addChild(s,!1)}return n},i.prototype.$_insertRowsFrom=function(t,e,i,o){for(var n=[],r=0,s=t.rowsByIds(i,!1);r<s.length;r++){var a=s[r];n.push(this.$_createFrom(a,e))}var l=o>=0?this.rowById(o):null,u=l?l.parent:this.rootRow;if(o>=0){var c=u.indexOf(l);u.insertChildren(c,n,!1)}else u.insertChildren(u.count,n,!1)},i.prototype.insertChildNode=function(t,e,i,o,n,r){var s=xt.getNumber(i[n],-1),a=i[o],l=this.createRow(i,s,a&&a.length>0);if(e>=0?t.insertChild(e,l,r):t.addChild(l,r),a)for(var u=0;u<a.length;u++)this.insertChildNode(l,-1,a[u],o,n,r);return l?l.rowId:-1},i.prototype.insertRowsFrom=function(t,e,i,o){this.$_insertRowsFrom(t,e,i,o)},i.prototype.appendRowsFrom=function(t,e,i){this.$_insertRowsFrom(t,e,i,-1)},i.prototype.fillValue=function(t,e){Object.keys(t).length&&(this.undoable?this._commands.execute(new qi(this,t,e)):this.$_fillValue(t,e))},i.prototype.updateRows=function(t,e,i){if(t&&0!=t.length){for(var o=[],n=0;n<t.length;n++){var r=this.rowById(t[n]);r?o.push(r):e.splice(n,1)}this.undoable?this._commands.execute(new Xi(this,o,e,i)):this.$_updateRows(o,e,i)}},i.prototype._findRowById=function(t){return this._rootRow.findById(t)},i.prototype._checkSum=function(t){if(t!=this.rowCount)throw new Error("Invalid row count: "+t+" <> "+this.rowCount)},i.prototype._clearRows=function(){this._rootRow._removeChildren(),this._rowMap=[],this._rootRow&&this._rootRow.descendantCount>0||(this._nextRowId=1),this._tags.clearRows(),this._checkSum(0)},i.prototype.$_prepareMap=function(){var t=this;!function e(i){var o=i.children;o&&o.forEach((function(i){t._rowMap[i.rowId]=i,e(i)}))}(this._rootRow)},i.prototype.$_removeMap=function(t){var e=this;(t=xt.makeArray(t,!0)).forEach((function(t){e._rowMap[t.rowId]=void 0,e.$_removeMap(t.children),t.dispose()}))},i.prototype.$_fillValue=function(e,i){if(this._checkClientState()){var o=Object.keys(e);if(o&&o.length){this.refreshFieldFormats();var n=[],r=[];for(var s in e){var a=this.rowById(+s);r.push(a),a.rowState==t.RowState.NONE&&n.push(a);for(var l=a.values,u=e[s],c=0;c<u.length;c++)l[u[c]]=i;a.$_internalUpdate(l,!1,!1)}n.length>0&&this._fireRowStatesChanged(n),this._tags.updateRows(r),this._fireRowsUpdated(r)}}},i.prototype.$_updateRows=function(e,i,o){if(this._checkClientState()&&e&&i){var n=Math.min(e.length,i.length);if(!(n<1)){this.refreshFieldFormats();for(var r=[],s=0;s<n;s++){var a=e[s];a.rowState==t.RowState.NONE&&r.push(a),a.$_internalUpdate(i[s],o,!1)}r.length>0&&this._fireRowStatesChanged(r),this._tags.updateRows(e),this._fireRowsUpdated(e)}}},i.prototype.findRow=function(t,e){return t&&t.length>0&&e&&e.length>=t.length?this._rootRow.findChild(t,e):null},i.prototype.$_resetOrgValues=function(){this._needOrgValues=this.checkStates&&this.restoreMode!=t.RestoreMode.NONE,this._needRestore=this._needOrgValues&&this.restoreMode==t.RestoreMode.AUTO,this._rootRow._clearOrgValues()},i.prototype.$_summarizeChildren=function(e,i){for(var o=i.field,n=e.count,r=this.getField(i.field).dataType===t.ValueType.NUMBER,s=0;s<n;s++){var a=e.getChild(s),l=a.getValue(o);null==l||r&&(!r||isNaN(l))||(r&&(i.sum=i.dataCount?i.sum+l:l),(r||""!=l)&&i.dataCount++,(null==i.min||l<i.min)&&(i.min=l),(null==i.max||l>i.max)&&(i.max=l)),this.$_summarizeChildren(a,i)}},i.prototype.$_summarizeVars=function(t,e){for(var i=e.field,o=e.avg,n=t.count,r=0,s=0;s<n;s++){var a=t.getChild(s),l=a.getValue(i);isNaN(l)||(r+=Math.pow(l-o,2)),r+=this.$_summarizeVars(a,e)}return r},i.prototype._fireDisposed=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderDisposed")},i.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderReset")},i.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRefresh")},i.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRefreshClient")},i.prototype._fireCleared=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderCleared")},i.prototype._fireRowCountChanged=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowCountChanged",this.rowCount)},i.prototype._fireRowAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowAdding",t,e,i)},i.prototype._fireRowAdded=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowAdded",t)},i.prototype._fireRowsAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsAdding",t,e,i)},i.prototype._fireRowsAdded=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsAdded",t,e)},i.prototype._fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowRemoving",t)},i.prototype._fireRowRemoved=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowRemoved",t)},i.prototype._fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsRemoving",t)},i.prototype._fireRowsRemoved=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsRemoved",t)},i.prototype._fireRowUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowUpdating",t)},i.prototype._fireRowUpdated=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowUpdated",t)},i.prototype._fireRowsUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsUpdating",t)},i.prototype._fireRowsUpdated=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsUpdated",t)},i.prototype._fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderValueChanging",t,e,i)},i.prototype._fireValueChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderValueChanged",t,e)},i.prototype._fireIconIndexChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderIconIndexChanged",t)},i.prototype._fireHasChildrenChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderHasChildrenChanged",t)},i.prototype._fireRowStateChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowStateChanged",t,e)},i.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowStatesChanged",t)},i.prototype._fireRowSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowSiblingMoving",t,e)},i.prototype._fireRowSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowSiblingMoved",t,e)},i.prototype._fireRowsSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsSiblingMoving",t,e)},i.prototype._fireRowsSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsSiblingMoved",t,e)},i.prototype._fireRowParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowParentChanging",t,e,i)},i.prototype._fireRowParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowParentChanged",t,e,i)},i.prototype._fireRowsParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsParentChanging",t,e,i)},i.prototype._fireRowsParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsParentChanged",t,e,i)},i.prototype._fireRowsHiddenChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsHideChanged",t,e)},i.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderDataLoadComplated")},i.prototype.undo=function(){this.canUndo&&this._commands.undo()},i.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},i.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},i}(Yi),to=function(e){function i(t){var i=e.call(this)||this;return i._ds=t,i}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.load=function(t,e,i){var o=new Mi(i);if(this.$_checkEmpty(e,o))return 0;switch(this.$_prepareLoad(o),t=t&&t.toLowerCase()){case"json":return this.$_loadJson(e,o);case"xml":return this.$_loadXml(e,o);case"csv":return this.$_loadCsv(e,o)}return 0},i.prototype.$_loadJson=function(e,i){if("string"==typeof e&&(e=JSON.parse(e)),e){var o=i.childrenField,n=i.iconField;if(i.fillMode==t.DataFillMode.APPEND){var r=this._ds.rowById(i.parentId);return this._ds.appendJsonRows(r,e,i.rows,o,n)}return this._ds.setJsonRows(e,i.rows,o,n)}return 0},i.prototype.$_loadXml=function(e,i){if("string"==typeof e&&(e=Ti.parseXml(e)),e&&e.documentElement){var o=i.childrenField,n=i.iconField;if(i.fillMode==t.DataFillMode.APPEND){var r=this._ds.rowById(i.parentId);return this._ds.appendXmlRows(r,e,i.rows,o,n)}return this._ds.setXmlRows(e,i.rows,o,n)}return 0},i.prototype.$_loadCsv=function(e,i){var o=i.start,n=i.count,r=i.quoted,s=i.delimiter,a=bi.csvToArray(this._ds,e,o,n,r,s);if(a&&(n=a.length)>0){var l=i.treeField,u=i.childrenField,c=i.iconField,h=i.needSorting;if(i.fillMode==t.DataFillMode.APPEND){var p=this._ds.rowById(i.parentId);this._ds.appendDataRows(p,a,l,h,u,c)}else this._ds.setRows(a,l,h,u,c);return a.length}return 0},i.prototype.$_fillEmpty=function(e){e.fillMode===t.DataFillMode.SET&&this._ds.setRows(null,null,!1,null,null)},i.prototype.$_checkEmpty=function(t,e){return!t&&(this.$_fillEmpty(e),!0)},i.prototype.$_prepareLoad=function(t){},i}(kt);t.ExportType=void 0,(Ai=t.ExportType||(t.ExportType={})).EXCEL="excel",Ai.CSV="csv",t.ExportTarget=void 0,(Li=t.ExportTarget||(t.ExportTarget={})).LOCAL="local",Li.REMOTE="remote",Li.STREAM="stream";var eo,io=function(t){function e(e){var i=t.call(this,e)||this;return i.datetimeCallback=null,i.numberCallback=null,i.booleanCallback=null,i.objectCallback=null,i.textCallback=null,i.start=0,i.count=-1,i.replaceCrText=null,i.replaceLfText=null,i.seperator=null,i.assignFrom(e),i.extend(e),i}return n(e,t),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t)},enumerable:!1,configurable:!0}),e}(function(e){function i(i){var o=e.call(this)||this;return o._type=t.ExportType.EXCEL,o._target=t.ExportTarget.LOCAL,o.url=void 0,o.done=null,o.showProgress=!1,o.progressMessage="Exporting...",o.prepareProgress=10,o.progressCallback=null,o.params=null,o.assignFrom(i),o.extend(i),o}return n(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(e){e&&xt.valueIn(e,t.ExportType)&&(this._type=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(e){e&&xt.valueIn(e,t.ExportTarget)&&(this._target=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zip",{get:function(){return this._zip},set:function(t){this._zip=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fileName",{get:function(){if(this._fileName){if(this._fileName.indexOf(".")<0){var e=this.type===t.ExportType.CSV?".csv":".xlsx";return this._fileName+e}return this._fileName}return this.type===t.ExportType.CSV?"realgrid.csv":"realgrid.xlsx"},set:function(t){t!=this._fileName&&(this._fileName=t?t.trim():null)},enumerable:!1,configurable:!0}),i}(kt)),oo=function(){function t(){}return t.prototype.dispose=function(){return null},t.prototype.saveLocal=function(t,e,i){var o=St(i),n=e instanceof Blob?e:new Blob([e],{type:"text/csv charset=UTF-8"});if(o.navigator.msSaveOrOpenBlob)o.navigator.msSaveOrOpenBlob(n,t);else if(o.navigator.msSaveOrOpenBlob)o.navigator.msSaveOrOpenBlob(n,t);else{var r=i.createElement("a");i.body.appendChild(r);var s=window.URL.createObjectURL(n);r.href=s,r.download=t,r.click(),setTimeout((function(){i.body.removeChild(r)}),100)}},t.prototype.saveServer=function(t,e,i,o,n){var r='<form name="tempForm" action="'+i+'" method="post">';if(r+='<input type="hidden" name="fileName" value = "'+t+'"/>',r+='<input type="hidden" name="data" value = "'+e+'"/>',r+='<input id="submitBtn" type="submit"/>',n)for(var s in n)r+='<input type="hidden" name="'+s+'" value = "'+n[s]+'"/>';r+="</form>";var a=o.createElement("div");a.innerHTML=r,o.body.appendChild(a),o.getElementById("submitBtn").click(),setTimeout((function(){o.body.removeChild(a)}),100)},t}(),no=function(e){function i(t){var i=e.call(this,t)||this;return i.exportFields=null,i.hideFields=null,i.includeFieldNames=!1,i.extend(t),i}return n(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return t.ExportType.CSV},enumerable:!1,configurable:!0}),i}(io),ro=function(e){function i(){return e.call(this)||this}return n(i,e),i.prototype.dispose=function(){return e.prototype.dispose.call(this),null},i.prototype.export=function(t,e){this._dataSource=t,this._exportOptions=e instanceof no?e:new no(e),this._exportFields=this.$_prepareFields(t,e.exportFields,e.hideFields),this._rows=[],t instanceof Zi?this.$_buildTreeBook((function(){this.save()})):t instanceof Ri&&this.$_buildBook((function(){this.save()}))},i.prototype.$_prepareFields=function(t,e,i){var o=t.getFields();return e?e.map((function(e){return t.fieldByName(e)})).filter((function(t){return t})):i?o.filter((function(t){return i.indexOf(t.orgFieldName)<0})):o},i.prototype.addQuatation=function(e,i){return xt.addQuatation(e,i===t.ValueType.TEXT,this._exportOptions.replaceLfText,this._exportOptions.replaceCrText)},i.prototype.$_buildFieldName=function(){return this._exportFields.map((function(t){return t.orgFieldName})).join(this._exportOptions.seperator||",")},i.prototype.$_buildBook=function(e){var i=this._exportOptions,o=this._dataSource.rowCount,n=Math.max(0,i.start),r=-1==i.count?o:Math.min(Math.max(i.count,0),o),s=Math.min(o,n+r);i.includeFieldNames&&this._rows.push(this.$_buildFieldName());for(var a=n;a<s;a++)this._rows.push(this.$_buildItem(a));if(i.target===t.ExportTarget.STREAM){var l=this._rows.join("\n");i.done&&"function"==typeof i.done&&i.done(l)}else i.done&&"function"==typeof i.done&&i.done(),e.call(this)},i.prototype.$_buildTreeBook=function(e){for(var i=this._exportOptions,o=this._dataSource.getDescendants(null,0),n=0;n<o.length;n++)this._rows.push(this.$_buildItem(o[n]));if(i.target===t.ExportTarget.STREAM){var r=this._rows.join("\n");i.done&&"function"==typeof i.done&&i.done(r)}else i.done&&"function"==typeof i.done&&i.done(),e.call(this)},i.prototype.$_buildItem=function(e){var i,o,n,r=this._dataSource,s=this._exportFields;r instanceof Zi?(o=e?e.values:[],n=e.rowId):(o=r.getRow(e),n=e);for(var a,l,u=[],c=s.length,h=this._exportOptions,p=h.seperator,d=0;d<c;d++){if(l=void 0,i=s[d])switch(a=o[i.index],i.dataType){case t.ValueType.NUMBER:l=isNaN(a)||null==a?"":h.numberCallback?null!=(l=h.numberCallback(n,i.orgFieldName,a,r.$_handler))?String(l):l:h.numberFormat?We.getFormatter(h.numberFormat).getText(a):String(a);break;case t.ValueType.BOOLEAN:null!=a&&(h.booleanCallback?a=null!=(a=h.booleanCallback(n,i.orgFieldName,a,r.$_handler))?String(a):a:h.booleanFormat&&(a=Ge.getFormatter(h.booleanFormat).formatValue(a)),l=String(a));break;case t.ValueType.DATE:case t.ValueType.DATETIME:a&&(l=h.datetimeCallback?(a=h.datetimeCallback(n,i.orgFieldName,a,r.$_handler))instanceof Date?Be.Default.getText(a):a:h.datetimeFormat?Be.getFormatter(h.datetimeFormat).getText(a):Be.Default.getText(a));break;case t.ValueType.OBJECT:a&&(l="object"==typeof(a=h.objectCallback?h.objectCallback(n,i.orgFieldName,a,r.$_handler):a)?JSON.stringify(a):String(a));break;default:l=null!=(a=h.textCallback?h.textCallback(n,i.orgFieldName,a,r.$_handler):a)?String(a):""}u[u.length]=this.addQuatation(l,i&&i.dataType)}return u.join(p||",")},i.prototype.save=function(){var e=this._exportOptions,i=e.fileName,o="\ufeff"+this._rows.join("\n");e.target==t.ExportTarget.LOCAL?this.saveLocal(i,o,document):this.saveServer(i,Ot.encode(o),e.url,document,e.params)},i}(oo),so=function(){function t(){}return t.getFieldIndex=function(t,e){return"string"==typeof e?t.getFieldIndex(e):e},t.fillData=function(t,e,i,o){var n=new Fi(t);try{n.load(e,i,o)}finally{n.dispose()}},t.fillTreeData=function(t,e,i,o){var n=new to(t);try{n.load(e,i,o)}finally{n.dispose()}},t.extractTreeRows=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null},t}(),ao=function(){},lo=function(){function e(t){this._dp=this._createProvider(t),this._listener=this._createListener(this._dp)}return e.prototype.dispose=function(){return this._dp.dispose(),this._dp=null},Object.defineProperty(e.prototype,"subTypeEnabled",{get:function(){return this._dp.subTypeEnabled},set:function(t){this._dp.subTypeEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"undoable",{get:function(){return this._dp.undoable},set:function(t){this._dp.undoable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"insertable",{get:function(){return this._dp.insertable},set:function(t){this._dp.insertable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updatable",{get:function(){return this._dp.updatable},set:function(t){this._dp.updatable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deletable",{get:function(){return this._dp.deletable},set:function(t){this._dp.deletable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"softDeleting",{get:function(){return this._dp.softDeleting},set:function(t){this._dp.softDeleting=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deleteCreated",{get:function(){return this._dp.deleteCreated},set:function(t){this._dp.deleteCreated=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkStates",{get:function(){return this._dp.checkStates},set:function(t){this._dp.checkStates=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"restoreMode",{get:function(){return this._dp.restoreMode},set:function(t){this._dp.restoreMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strictRestore",{get:function(){return this._dp.strictRestore},set:function(t){this._dp.strictRestore=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._dp.booleanFormat},set:function(t){this._dp.booleanFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._dp.datetimeFormat},set:function(t){this._dp.datetimeFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseYear",{get:function(){return this._dp.baseYear},set:function(t){this._dp.baseYear=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amText",{get:function(){return this._dp.amText},set:function(t){this._dp.amText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pmText",{get:function(){return this._dp.pmText},set:function(t){this._dp.pmText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeDataEdit",{get:function(){return this._dp.commitBeforeDataEdit},set:function(t){this._dp.commitBeforeDataEdit=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valuesCallback",{get:function(){return this._dp.valuesCallback},set:function(t){this._dp.valuesCallback=t},enumerable:!1,configurable:!0}),e.prototype.getOptions=function(){var t=this._dp;return{subTypeEnabled:t.subTypeEnabled,undoable:t.undoable,insertable:t.insertable,updatable:t.updatable,deletable:t.deletable,softDeleting:t.softDeleting,deleteCreated:t.deleteCreated,checkStates:t.checkStates,restoreMode:t.restoreMode.toString(),strictRestore:t.strictRestore,booleanFormat:t.booleanFormat,datetimeFormat:t.datetimeFormat,baseYear:t.baseYear,amText:t.amText,pmText:t.pmText,commitBeforeDataEdit:t.commitBeforeDataEdit}},e.prototype.setOptions=function(t){this._dp.assignFrom(t)},e.prototype.beginUpdate=function(){this._dp.beginUpdate()},e.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._dp.endUpdate(t)},e.prototype.getFields=function(){return this._dp.getFields()},e.prototype.setFields=function(t){xt.isArray(t)&&this._dp.setFields(t)},e.prototype.addField=function(t,e,i){return this._dp.addField(t,e,i)},e.prototype.getFieldCount=function(){return this._dp.fieldCount},e.prototype.fieldByName=function(t){return this._dp.fieldByName(t)},e.prototype.getFieldNames=function(){return this._dp.getFieldNames()},e.prototype.getOrgFieldNames=function(){return this._dp.getOrgFieldNames()},e.prototype.getFieldName=function(t){return this._dp.getFieldName(t)},e.prototype.getOrgFieldName=function(t){return this._dp.getOrgFieldName(t)},e.prototype.getFieldIndex=function(t){return this._dp.getFieldIndex(t)},e.prototype.hasData=function(t){return this._dp.hasData(t)},e.prototype.getValues=function(t){return this._dp.getRow(t)},e.prototype.checkRowStates=function(t){this._dp.checkStates=t},e.prototype.getRowState=function(t){return this._dp.getRowState(t)},e.prototype.getStateRows=function(e){return void 0===e&&(e=t.RowState.NONE),this._dp.getStateRows(e)},e.prototype.getAllStateRows=function(){return this._dp.getAllStateRows()},e.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this._dp.clearRowStates(t,e)},e.prototype.setRowState=function(e,i,o){void 0===i&&(i=t.RowState.NONE),void 0===o&&(o=!1),this._dp.setRowState(e,i,o)},e.prototype.setRowStates=function(e,i,o,n){void 0===i&&(i=t.RowState.NONE),void 0===o&&(o=!1),void 0===n&&(n=!1),this._dp.setRowStates(e,i,o,n)},e.prototype.getRowStateCount=function(e){if(!e)return 0;var i=[];if("*"==e||"all"==e)i.push(t.RowState.CREATED,t.RowState.UPDATED,t.RowState.DELETED,t.RowState.CREATE_AND_DELETED);else for(var o=Array.isArray(e)?e:[e],n=0,r=o.length;n<r;n++)i.push(o[n]);return i.length>0?this._dp.getRowStateCount(i):void 0},e.prototype.restoreUpdatedStates=function(t){return this._dp.restoreUpdatedStates(t)},e.prototype.restoreUpdatedRows=function(t){return this._dp.restoreUpdatedRows(xt.makeArray(t))},e.prototype.getUpdatedCells=function(t){return this._dp.getUpdatedCells(t)},e.prototype.getDistinctValues=function(e,i,o){void 0===i&&(i=-1),void 0===o&&(o=t.SortDirection.ASCENDING);var n=o||t.SortDirection.ASCENDING,r="string"==typeof e?this._dp.getFieldIndex(e):e;return this._dp.getDistinctValues(r,i,n)},e.prototype.savePoint=function(t){return void 0===t&&(t=!0),this._dp.savePoint(t)},e.prototype.rollback=function(t){void 0===t&&(t=0),this._dp.rollback(t)},e.prototype.clearSavePoints=function(){this._dp.clearSavePoints()},e.prototype.getSavePoints=function(){return this._dp.getSavePoints()},e.prototype.setDataComparer=function(t,e){var i="string"==typeof t?this._dp.getFieldIndex(t):t;this._dp.setDataComparer(i,e)},e.prototype.exportToCsv=function(t){(new ro).export(this._dp,t)},e.prototype.destroy=function(){return this.dispose()},e.prototype.undo=function(){this._dp.undo()},e.prototype.redo=function(){this._dp.redo()},e.prototype.clearCommandStack=function(){this._dp.clearCommandStack()},e.prototype.getProvider=function(){return this._dp},e}(),uo=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRowCountChanged=null,t.onRowUpdating=null,t.onRowUpdated=null,t.onRowsUpdated=null,t.onRowListUpdated=null,t.onRowInserting=null,t.onRowInserted=null,t.onRowsInserted=null,t.onRowDeleting=null,t.onRowDeleted=null,t.onRowsDeleted=null,t.onRowMoving=null,t.onRowMoved=null,t.onRowsMoving=null,t.onRowsMoved=null,t.onRowListMoving=null,t.onRowListMoved=null,t.onValueChanged=null,t.onDataChanged=null,t.onRowStateChanged=null,t.onRowStatesChanged=null,t.onRowStatesCleared=null,t.onRestoreRows=null,t}return n(i,e),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._dp.rowCount},set:function(t){this._dp.setRowCount(t)},enumerable:!1,configurable:!0}),i.prototype.getRowCount=function(){return this._dp.rowCount},i.prototype.setRowCount=function(e,i,o,n){return void 0===i&&(i=!1),void 0===o&&(o=null),void 0===n&&(n=t.RowState.NONE),this._dp.setRowCount(e,i,o,n)},i.prototype.setFilterMode=function(t){void 0===t&&(t="and"),this._dp.setFilterMode(t)},i.prototype.setFilters=function(t,e){void 0===e&&(e="and"),this._dp.setFilters(t,e)},i.prototype.fillJsonData=function(t,e){var i=e instanceof Mi?e:new Mi(e);so.fillData(this._dp,"json",t,i)},i.prototype.fillXmlData=function(t,e){var i=e instanceof Mi?e:new Mi(e);so.fillData(this._dp,"xml",t,i)},i.prototype.fillCsvData=function(t,e){var i=e instanceof Mi?e:new Mi(e);so.fillData(this._dp,"csv",t,i)},i.prototype.setRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._dp.setRows(t,e,i)},i.prototype.addRows=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===o&&(o=!1),this._dp.appendRows(t,e,i,o)},i.prototype.insertRows=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),this._dp.insertRows(t,e,i,o,n)},i.prototype.updateRows=function(t,e,i,o,n,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),void 0===r&&(r=!1),this._dp.updateRows(t,e,i,o,n,r)},i.prototype.updateRowsByDataRow=function(t,e,i){this._dp.updateRows2(t,e,i)},i.prototype.clearRows=function(){this._dp.clearRows()},i.prototype.updateRow=function(t,e,i){this._dp.updateRow(t,e,i)},i.prototype.hideRows=function(t){this._dp.hideRows(t)},i.prototype.showHiddenRows=function(t){this._dp.showRows(t)},i.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},i.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},i.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},i.prototype.addRow=function(t){return this._dp.appendRow(t)},i.prototype.insertRow=function(t,e){return this._dp.insertRow(t,e)},i.prototype.removeRow=function(t){this._dp.removeRow(t)},i.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this._dp.removeRows(t,e)},i.prototype.moveRow=function(t,e){this._dp.moveRow(t,e)},i.prototype.moveRows=function(t,e,i){this._dp.moveRows(t,e,i)},i.prototype.getValue=function(t,e){var i=so.getFieldIndex(this._dp,e);return this._dp.getValue(t,i)},i.prototype.setValue=function(t,e,i){var o=so.getFieldIndex(this._dp,e);this._dp.setValue(t,o,i)},i.prototype.getRows=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=-1),this._dp.getRows(t,e)},i.prototype.getJsonRow=function(t,e){return this._dp.getRowObject(t,e)},i.prototype.getJsonRows=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),this._dp.getRowObjects(t,e,i)},i.prototype.getOutputRow=function(t,e){return this._dp.getOutputObject(t,e)},i.prototype.getOutputRows=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=-1),this._dp.getOutputObjects(t,e,i)},i.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var o=so.getFieldIndex(this._dp,t);return this._dp.getFieldValues(o,e,i)},i.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t):-1},i.prototype.searchData=function(t){return t?this._dp.searchData(t):null},i.prototype._createProvider=function(t){return new Ri(t,this)},i.prototype._createListener=function(t){return new ho(this,t)},i}(lo),co=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this,e)||this;return i.onRowCountChanged=null,i.onRowAdding=null,i.onRowAdded=null,i.onRowsAdded=null,i.onRowDeleting=null,i.onRowDeleted=null,i.onRowsDeleted=null,i.onRowUpdating=null,i.onRowUpdated=null,i.onRowsUpdating=null,i.onRowsUpdated=null,i.onValueChanged=null,i.onDataChanged=null,i.onRowStateChanged=null,i.onRowStatesChanged=null,i.onRowSiblingMoving=null,i.onRowSiblingMoved=null,i.onRowsSiblingMoving=null,i.onRowsSiblingMoved=null,i.onRowParentChanging=null,i.onRowParentChanged=null,i}return n(e,t),e.prototype.getRowCount=function(){return this._dp.rowCount},e.prototype.setRows=function(t,e,i,o,n){void 0===i&&(i=!1),this._dp.setRows(t,e,i,o,n)},e.prototype.setCsvRows=function(t,e,i,o,n){this._dp.setCsvRows(t,e,i,o,n)},e.prototype.setXmlRows=function(t,e,i,o){this._dp.setXmlRows(t,e,i,o)},e.prototype.setObjectRows=function(t,e,i,o){this._dp.setJsonRows(t,e,i,o)},e.prototype.setNestedRows=function(t,e,i,o,n){this._dp.setJsonRows2(t,e,i,o,n)},e.prototype.fillJsonData=function(t,e){var i=new Mi(e);try{so.fillTreeData(this._dp,"json",t,i)}finally{i.dispose(),i=null}},e.prototype.fillXmlData=function(t,e){var i=new Mi(e);try{so.fillTreeData(this._dp,"xml",t,i)}finally{i.dispose(),i=null}},e.prototype.fillCsvData=function(t,e){var i=new Mi(e);try{so.fillTreeData(this._dp,"csv",t,i)}finally{i.dispose(),i=null}},e.prototype.getIconIndex=function(t){return this._dp.rowById(t).iconIndex},e.prototype.setIconIndex=function(t,e){this._dp.rowById(t).iconIndex=e},e.prototype.getParent=function(t){var e=this._dp.rowById(t);return e&&e.parent?e.parent.rowId:-1},e.prototype.getLevel=function(t){return this._dp.rowById(t).level},e.prototype.getChildCount=function(t){var e=this._dp;if(null==t||-1==t)return e.getChildCount(null);var i=e.rowById(t);return i&&i.children?i.children.length:0},e.prototype.getChildren=function(t){var e,i=this._dp;return e=null==t||-1==t?i.getRows(null):i.rowById(t).children,so.extractTreeRows(e)},e.prototype.getDescendantCount=function(t){var e=this._dp;return null==t||-1==t?e.getDescendantCount(null):e.rowById(t).descendantCount},e.prototype.getDescendants=function(t,e){void 0===e&&(e=-1);var i=null,o=this._dp;null!=t&&-1!=t&&(i=o.rowById(t));var n=o.getDescendants(i,e);return so.extractTreeRows(n)},e.prototype.getAncestors=function(t){var e=this._dp.rowById(t);return e&&e.ancestors?so.extractTreeRows(e.ancestors):null},e.prototype.getJsonRow=function(t,e,i,o,n,r){void 0===o&&(o="rows"),void 0===n&&(n="iconIndex"),void 0===r&&(r=-1);var s=this._dp,a=null==t||t<0?s.rootRow:s.rowById(t);if(a){var l=a.getObject()||{};return e&&(l.__rowState=a.rowState),i&&0!==r&&(l[o]=a.getChildObjects(i,o,n,!1,e,r-1)),l}return null},e.prototype.getJsonRows=function(t,e,i,o,n){void 0===e&&(e=!1),void 0===i&&(i="rows"),void 0===o&&(o="iconIndex");var r=this._dp,s=null==t||t<=-1?r.rootRow:r.rowById(t);return s?s.getChildObjects(e,i,o,!0,n):null},e.prototype.getOutputRow=function(t,e,i){void 0===i&&(i="iconIndex");var o,n=new Ue(t);try{var r=this._dp,s=null==e||e<0?r.rootRow:r.rowById(e);o=s?s.getOutput(n,i):null}finally{n.dispose()}return o},e.prototype.getOutputRows=function(t,e,i,o,n){void 0===i&&(i=!1),void 0===o&&(o="rows"),void 0===n&&(n="iconIndex");var r,s=new Ue(t);try{var a=this._dp,l=null==e||e<=-1?a.rootRow:a.rowById(e);r=l?l.getChildOutputObjects(s,i,o,n):null}finally{s.dispose()}return r},e.prototype.addChildRow=function(t,e,i,o){void 0===i&&(i=-1),void 0===o&&(o=!1);var n=this._dp,r=n.rowById(t)||n.rootRow,s=n.createRow(e,i,o);return r.addChild(s,!1)?s.rowId:-1},e.prototype.insertChildRow=function(t,e,i,o,n){void 0===o&&(o=-1),void 0===n&&(n=!1);var r=this._dp,s=r.rowById(t)||r.rootRow,a=r.createRow(i,o,n);return s.insertChild(e,a,!1)?a.rowId:-1},e.prototype.insertChildNode=function(t,e,i,o,n,r){void 0===o&&(o="rows"),void 0===n&&(n="iconField"),void 0===r&&(r=!1);var s=this._dp,a=null==t||t<0?s.rootRow:s.rowById(t);if(a)return s.insertChildNode(a,e,i,o,n,r)},e.prototype.updateRow=function(t,e,i){var o=this._dp.rowById(t);return!!o&&o.update(e,i)},e.prototype.updateRows=function(t,e,i){this._dp.updateRows(t,e,i)},e.prototype.removeRow=function(t,e){var i=this._dp.rowById(t);return!(!i||!i.parent)&&i.parent.removeChild(i,e)},e.prototype.removeRows=function(t,e){return!!(t&&t.length>0)&&this._dp.removeRows(t,e)},e.prototype.clearRows=function(){this._dp.clearRows()},e.prototype.hideRows=function(t){this._dp.hideRows(t)},e.prototype.showHiddenRows=function(t){this._dp.showRows(t)},e.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},e.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},e.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},e.prototype.getValue=function(t,e){var i=this._dp,o=i.rowById(t),n=so.getFieldIndex(i,e);return o?o.getValue(n):null},e.prototype.setValue=function(t,e,i){var o=this._dp,n=o.rowById(t),r=so.getFieldIndex(o,e);n&&n.setValue(r,i,!1)},e.prototype.moveRowSibling=function(t,e){var i=this._dp,o=i.rowById(t);return!!o&&i.changeRowIndex(o,e)},e.prototype.changeRowParent=function(t,e,i){var o=this._dp,n=o.rowById(t),r=e<0?o.rootRow:o.rowById(e);return!(!n||!r)&&o.changeRowParent(n,r,i)},e.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t,t.parentId):-1},e.prototype.searchData=function(t){return t?this._dp.searchData(t,t.parentId):null},e.prototype._createProvider=function(t){return new Zi(t,this)},e.prototype._createListener=function(t){return new po(this,t)},e}(lo),ho=function(t){function e(e,i){var o=t.call(this)||this;return o._del=e,o._provider=i,o._provider.addListener(o),o}return n(e,t),e.prototype.dispose=function(){return this._del=null,this._provider.removeListener(this),this._provider=null},e.prototype.onDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):xt.log("onRowCountChanged: "+t.rowCount)},e.prototype.onDataProviderRowUpdating=function(t,e,i){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e):(xt.log("onRowUpdating: "+e),!0)},e.prototype.onDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e):xt.log("onRowUpdated: "+e)},e.prototype.onDataProviderRowsUpdated=function(t,e,i){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,e,i):xt.log("onRowsUpdated: "+e+", "+i)},e.prototype.onDataProviderRowListUpdated=function(t,e){this._del.onRowListUpdated?this._del.onRowListUpdated(this._del,e):xt.log("onRowListUpdated: "+e)},e.prototype.onDataProviderRowInserting=function(t,e,i){return this._del.onRowInserting?this._del.onRowInserting(this._del,e,i):(xt.log("onRowInserting: "+e),!0)},e.prototype.onDataProviderRowInserted=function(t,e){this._del.onRowInserted?this._del.onRowInserted(this._del,e):xt.log("onRowInserted: "+e)},e.prototype.onDataProviderRowsInserted=function(t,e,i){this._del.onRowsInserted?this._del.onRowsInserted(this._del,e,i):xt.log("onRowsInserted: "+e+", "+i)},e.prototype.onDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e):(xt.log("onRowDeleting: "+e),!0)},e.prototype.onDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e):xt.log("onRowDeleted: "+e)},e.prototype.onDataProviderRowsRemoving=function(t,e){return!0},e.prototype.onDataProviderRowsRemoved=function(t,e){this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,e):xt.log("onRowsDeleted: ",e)},e.prototype.onDataProviderRowMoving=function(t,e,i){return this._del.onRowMoving?this._del.onRowMoving(this._del,e,i):(xt.log("onRowMoving: "+e+", "+i),!0)},e.prototype.onDataProviderRowMoved=function(t,e,i){this._del.onRowMoved?this._del.onRowMoved(this._del,e,i):xt.log("onRowMoved: "+e+", "+i)},e.prototype.onDataProviderRowsMoving=function(t,e,i,o){return this._del.onRowsMoving?this._del.onRowsMoving(this._del,e,i,o):(xt.log("onRowsMoving: "+e+", "+i+", "+o),!0)},e.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._del.onRowsMoved?this._del.onRowsMoved(this._del,e,i,o):xt.log("onRowsMoved: "+e+", "+i+", "+o)},e.prototype.onDataProviderRowListMoving=function(t,e,i){return this._del.onRowListMoving?this._del.onRowListMoving(this._del,e,i):(xt.log("onRowListMoving: ",e,", ",i),!0)},e.prototype.onDataProviderRowListMoved=function(t,e,i){this._del.onRowListMoved?this._del.onRowListMoved(this._del,e,i):xt.log("onRowListMoved: ",e,i)},e.prototype.onDataProviderValueChanged=function(t,e,i){this._del.onValueChanged?this._del.onValueChanged(this._del,e,i):xt.log("onValueChanged:"+e+", "+i)},e.prototype.onDataProviderDataChanged=function(t){this._del.onDataChanged?this._del.onDataChanged(this._del):xt.log("onDataChanged")},e.prototype.onDataProviderStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e):xt.log("onRowStateChanged: "+e)},e.prototype.onDataProviderStatesChanged=function(t,e){this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,e):xt.log("onRowStatesChanged",e)},e.prototype.onDataProviderStatesCleared=function(t){this._del.onRowStatesCleared?this._del.onRowStatesCleared(this._del):xt.log("onRowStatesCleared")},e.prototype.onDataProviderRestoreRows=function(t,e){this._del.onRestoreRows?this._del.onRestoreRows(this._del,e):xt.log("onRestoreRows",e)},e}(ao),po=function(t){function e(e,i){var o=t.call(this)||this;return o._del=e,o._provider=i,o._provider.addListener(o),o}return n(e,t),e.prototype.dispose=function(){return this._del=null,this._provider.removeListener(this),this._provider=null},e.prototype.onTreeDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):xt.log("onRowCountChanged: "+t.rowCount)},e.prototype.onTreeDataProviderRowAdding=function(t,e,i,o){return this._del.onRowAdding?this._del.onRowAdding(this._del,e.rowId,i,o._values):(xt.log("onRowAdding: "+e.rowId+", "+i,o._values),!0)},e.prototype.onTreeDataProviderRowAdded=function(t,e){this._del.onRowAdded?this._del.onRowAdded(this._del,e.rowId):xt.log("onRowAdded: "+e.rowId)},e.prototype.onTreeDataProviderRowsAdded=function(t,e,i){var o=so.extractTreeRows(i);this._del.onRowsAdded?this._del.onRowsAdded(this._del,e.rowId,o):xt.log("onRowsAdded: "+e.rowId,o)},e.prototype.onTreeDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e.rowId):(xt.log("onRowDeleting: "+e.rowId),!0)},e.prototype.onTreeDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e.rowId):xt.log("onRowDeleted: "+e.rowId)},e.prototype.onTreeDataProviderRowsRemoved=function(t,e){var i=so.extractTreeRows(e);this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,i):xt.log("onRowsDeleted: ",i)},e.prototype.onTreeDataProviderRowUpdating=function(t,e){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e.rowId):(xt.log("onRowUpdating:"+e.rowId),!0)},e.prototype.onTreeDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e.rowId):xt.log("onRowUpdated: "+e.rowId)},e.prototype.onTreeDataProviderRowsUpdating=function(t,e){return this._del.onRowsUpdating?this._del.onRowsUpdating(this._del,zi.getRowIds(e)):(xt.log("onRowUpdating:"+e.length),!0)},e.prototype.onTreeDataProviderRowsUpdated=function(t,e){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,zi.getRowIds(e)):xt.log("onRowsUpdated: "+e.length)},e.prototype.onTreeDataProviderValueChanged=function(t,e,i){this._del.onValueChanged?this._del.onValueChanged(this._del,e.rowId,i):xt.log("onValueChanged: "+e.rowId+", "+i)},e.prototype.onTreeDataProviderRowStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e.rowId):xt.log("onRowStateChanged: "+e.rowId)},e.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var i=so.extractTreeRows(e);this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,i):xt.log("onRowStatesChanged: ",i)},e.prototype.onTreeDataProviderRowSiblingMoving=function(t,e,i){return this._del.onRowSiblingMoving?this._del.onRowSiblingMoving(this._del,e.rowId,i):(xt.log("onRowSiblingMoveing: "+e.rowId+", "+i),!0)},e.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){this._del.onRowSiblingMoved?this._del.onRowSiblingMoved(this._del,e.rowId,i):xt.log("onSiblingMoved: "+e.rowId+", "+i)},e.prototype.onTreeDataProviderRowsSiblingMoving=function(t,e,i){return this._del.onRowsSiblingMoving?this._del.onRowsSiblingMoving(this._del,zi.getRowIds(e),i):(xt.log("onRowSiblingMoveing: ",e,i),!0)},e.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){this._del.onRowsSiblingMoved?this._del.onRowsSiblingMoved(this._del,zi.getRowIds(e),i):xt.log("onSiblingMoved: ",e,i)},e.prototype.onTreeDataProviderRowParentChanging=function(t,e,i,o){if(this._del.onRowParentChanging)return this._del.onRowParentChanging(this._del,e.rowId,i.rowId,o);xt.log("onRowParentChanging: "+e.rowId+", "+i.rowId+", "+o)},e.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,o){this._del.onRowParentChanged?this._del.onRowParentChanged(this._del,e.rowId,i.rowId,o):xt.log("onRowParentChanged: "+e.rowId+", "+i.rowId+", "+o)},e}(ao),fo=function(){function t(t){this.field=t,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN,this.varsp=NaN,this.dataCount=0,this.dataAvg=NaN}return t.prototype.clear=function(){this.count=this.dataCount=0,this.sum=this.dataAvg=this.max=this.min=this.avg=this.vars=this.varsp=NaN},t}(),go=65536,yo=131072,_o=196608,mo=4294705152;t.ItemState=void 0,(eo=t.ItemState||(t.ItemState={})).NORMAL="normal",eo.FOCUSED="focused",eo.UPDATING="updating",eo.INSERTING="inserting",eo.APPENDING="appending",eo.DUMMY="dummy";var vo=function(e){return e==t.ItemState.UPDATING||e==t.ItemState.INSERTING||e==t.ItemState.APPENDING},bo=function(e){return e==t.ItemState.INSERTING||e==t.ItemState.APPENDING},Co=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.readOnly=this.editable=this.style=void 0,this},t.prototype.assign=function(t){"string"==typeof t?this.styleName=t:(null!=t.readOnly&&(this.readOnly=t.readOnly),null!=t.editable&&(this.editable=t.editable),null!=t.styleName&&(this.styleName=t.styleName.trim()),null!=t.style&&(this.style=t.style),null!=t.exportStyleName&&(this.exportStyleName=t.exportStyleName))},t}(),wo=function(){function e(){this._id=e.$$_grid_item_id++,this._index=-1}return e.prototype.dispose=function(){this._parent=null},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentIndex",{get:function(){return this._parent?this._parent._index:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this._parent;t&&t.level>1;)t=t._parent;return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childIndex",{get:function(){return this._parent?this._parent.indexOf(this):-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._parent?this._parent.level+1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isData",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDataRow",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._parent&&this._index>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayLevel",{get:function(){return this.level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"provider",{get:function(){return this._parent&&this._parent.provider},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._parent&&this._parent.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataRow",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataId",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataRowId",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowState",{get:function(){var e=this.dataRow;if(e>=0){var i=this.dataSource;return i?i.getRowState(e):t.RowState.NONE}return t.RowState.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemState",{get:function(){return t.ItemState.NORMAL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){var t=0!=(1&this._getExtents());return this.provider.getItemChecked(this,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkable",{get:function(){return 0==(4&this._getExtents())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return 0!=(8&this._getExtents())},set:function(t){this._setExtents(t?8|this._getExtents():-9&this._getExtents())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"merged",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=this._getExtents();return t&_o?(t&mo)>>>18:NaN},enumerable:!1,configurable:!0}),e.prototype.$_setHeight=function(t,e){var i=this._getExtents();if(t=Math.round(t),isNaN(t)){if(i&_o)return this._setExtents(-196609&i),!0}else{if(t!=(i&mo)>>>18)return t=Math.max(0,Math.min(53247,t))<<18,i=e?-196609&i|yo:-196609&i|go,this._setExtents(262143&i|t),!0;if(e){if(0==(i&yo))return i=-196609&i|yo,this._setExtents(i),!0}else if(0==(i&go))return i=-196609&i|go,this._setExtents(i),!0}},e.prototype.$_clearHeight=function(t){t?this._setExtents(-196609&this._getExtents()):this._setExtents(-65537&this._getExtents()),this.heights=null,0==this.index&&xt.log("HEIGHT",this.height)},Object.defineProperty(e.prototype,"heights",{get:function(){return this._heights},set:function(t){this._heights=t},enumerable:!1,configurable:!0}),e.prototype.getShadowRow=function(){return this.dataRow},e.prototype.getHeight=function(t){return this._heights[t]},e.prototype.setChecked=function(t,e){var i=this.provider;i&&i.checkItem(this,t,void 0,e)},e.prototype.setCheckable=function(t){var e=this.provider;e&&e.setCheckable(this,t)},e.prototype.getAncestor=function(t){if(t<this.level){for(var e=this._parent;e.level>t;)e=e._parent;return e}return this instanceof Eo?this:null},e.prototype.getVisibleAncestor=function(){var t=this._parent;do{if(t.visible)return t;t=t._parent}while(t)},e.prototype.getAncestors=function(){var t=null,e=this._parent;if(e){t=[];do{t.push(e),e=e._parent}while(e)}return t},e.prototype.isDescendantOf=function(t){if(t){for(var e=this._parent;e&&e!=t;)e=e._parent;return e===t}return!1},e.prototype.getData=function(t){var e=this.dataSource;t=e.getFieldIndex(t);var i=this.getShadowRow();return e&&i>=0?e.getValue(i,t):void 0},e.prototype.setData=function(t,e){var i=this.dataSource;t=i.getFieldIndex(t),i&&i.setValue(this.dataRow,t,e)},e.prototype.getRowData=function(){var t=this.dataRow;if(t>=0){var e=this.dataSource;if(e)return e.getRow(t)}return null},e.prototype.getRowObject=function(){var t=this.dataRow;if(t>=0){var e=this.dataSource;if(e)return e.getRowObject(t)}return null},e.prototype.isChanged=function(t){var e=this.dataSource;return e?e.isDataChanged(this.dataRow,t):void 0},e.prototype.canEdit=function(){return!1},e.prototype._setIndex=function(t){this._index=t},e.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||this._setExtents(t?1|this._getExtents():-2&this._getExtents())},e.prototype._setCheckable=function(t){this._setExtents(t?-5&this._getExtents():4|this._getExtents())},e.PARENT="_parent",e.$$_grid_item_id=0,e}(),So=function(e){function i(t){var i=e.call(this)||this;return i._displayLevel=-1,i._extents=0,i._dataRow=t,i}return n(i,e),Object.defineProperty(i.prototype,"dataRowId",{get:function(){return this._dataRowId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!1,configurable:!0}),i.prototype.setEditable=function(t,e){this._editable=t,this._readOnly=e},i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(i.prototype,"isData",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isDataRow",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){return this._dataRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayLevel",{get:function(){return this._displayLevel>=0?this._displayLevel:this.level},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.ROW},enumerable:!1,configurable:!0}),i.prototype.canEdit=function(){return!0},i.prototype.getShadowRow=function(){return this._dataRow},i.prototype.$_setDisplayLevel=function(t){this._displayLevel=t},i}(wo),Eo=function(e){function i(){var t=e.call(this)||this;return t._children=[],t._expanded=!1,t._descendantCount=0,t._summaries=null,t._rows=null,t}return n(i,e),i.prototype.dispose=function(){this._children=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"expanded",{get:function(){return this._expanded},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsed",{get:function(){return!this.expanded},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._children.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this._children.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"allFooterCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return!this._rows&&this.$_collectRows(this,this._rows=[]),this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this._children.length>0?this._children[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){var t=this._children.length;return t>0?this._children[t-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstItem",{get:function(){if(this._children.length>0){var t=this._children[0];return t instanceof i?t.firstItem:t}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstDataItem",{get:function(){if(this._children.length>0)for(var t=0,e=this._children.length;t<e;t++){if(this._children[t]instanceof i)return this._children[t].firstDataItem;if(this._children[t]instanceof So)return this._children[t]}return null},enumerable:!1,configurable:!0}),i.prototype.getFirstVisibleItem=function(t){return this},i.prototype.getLastItem=function(t){var e;if(this._children.length>0){for(var o=this._children.length;o&&(e=this._children[o-1],t&&e instanceof Oo);o--);return e instanceof i?e.getLastItem(t):e}return null},Object.defineProperty(i.prototype,"lastDataItem",{get:function(){var t=this._children.length;if(t>0)for(;t>0;t--){var e=this._children[t-1];if(e instanceof i)return e.lastDataItem;if(e instanceof So)return e}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"descendantCount",{get:function(){return this._descendantCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsable",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype.getItem=function(t){if(t<0||t>=this._children.length)throw new RangeError("index is invalid: "+t);return this._children[t]},i.prototype.getRows=function(){var t=[];return this.$_collectRows(this,t),t},i.prototype.getFooterIndex=function(t){return 0},i.prototype.itemOfRow=function(t){for(var e=this._children.length;e--;)if(this._children[e].dataRow==t)return this._children[e];return null},i.prototype.indexOf=function(t){for(var e=this._children.length-1;e>=0;e--)if(this._children[e]==t)return e;return-1},i.prototype.isDescendant=function(t){if(t&&t!==this){for(var e=t._parent;e&&e!==this;)e=e._parent;return e===this}return!1},i.prototype.getDescendants=function(t){if((!t||this._expanded)&&this._children&&this._children.length>0){var e=[];return function e(o,n){for(var r=o.count,s=0;s<r;s++){var a=o.getItem(s);n.push(a),a instanceof i&&(!t||a.expanded)&&e(a,n)}}(this,e),e}return null},i.prototype.clear=function(){this._summaries=null,this._children.length=0,this._descendantCount=0},i.prototype.insert=function(t,e){this._addChild(e,t)},i.prototype.add=function(t){this._addChild(t,-1)},i.prototype.addAll=function(t){var e,i=this,o=t.map((function(t){return t[wo.PARENT]=i,t}));(e=this._children).push.apply(e,o)},i.prototype.remove=function(t){var e=this.indexOf(t);e>=0&&(this._children.splice(e,1),t instanceof wo&&(t[wo.PARENT]=null))},i.prototype.setItem=function(t,e){if(t&&e&&t!==e){var i=this._removeChild(t);this._insertChild(i,e),e._index=t.index}},i.prototype.setExpanded=function(t,e,i){(t!=this._expanded||i)&&(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},i.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e instanceof fo?e.count:e?e.length:this._descendantCount},i.prototype.getDataCount=function(t){var e=this.$_getSummary(t);if(e instanceof fo)return e.dataCount;if(e){var i=this.dataSource,o=e.length,n=0;if(o>0){for(var r=0;r<o;r++){var s=i.getValue(e[r],t);null!=s&&""!==s&&n++}return n}}return 0},i.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);if(e instanceof fo)return e.dataAvg;if(e){for(var i=this.dataSource,o=e.length,n=0,r=0,s=0;s<o;s++){var a=i.getValue(e[s],t);isNaN(a)||(n+=a,r++)}return r>0&&!isNaN(n)?n/r:NaN}return NaN},i.prototype.getSum=function(t){var e=this.$_getSummary(t);if(e instanceof fo)return e.sum;if(e){for(var i=this.dataSource,o=e.length,n=void 0,r=0;r<o;r++){var s=i.getValue(e[r],t);isNaN(s)||(n=(isNaN(n)?0:n)+s)}return n}return NaN},i.prototype.getMax=function(e){var i=this.$_getSummary(e),o=this.dataSource,n=o.getField(e).dataType===t.ValueType.NUMBER;if(i instanceof fo)return i.max;if(i){for(var r=i.length,s=void 0,a=0,l=null;a<r;)null!=(s=o.getValue(i[a++],e))&&(!n||!isNaN(s))&&(l=null==l||s>l?s:l);return l}return n?NaN:null},i.prototype.getMin=function(e){var i=this.$_getSummary(e),o=this.dataSource,n=o.getField(e).dataType===t.ValueType.NUMBER;if(i instanceof fo)return i.min;if(i){for(var r=i.length,s=void 0,a=0,l=null;a<r;)null!=(s=o.getValue(i[a++],e))&&(!n||!isNaN(s))&&(l=null==l||s<l?s:l);return l}return n?NaN:null},i.prototype.getAvg=function(t){var e=this.$_getSummary(t);if(e instanceof fo)return e.avg;if(e){var i=this.getSum(t);if(!isNaN(i))return i/e.length}return NaN},i.prototype.getVar=function(e,i){void 0===i&&(i=0);var o=this.$_getSummary(e);if(o instanceof fo)return 0===i?o.varsp:o.vars;if(o&&this.provider.summaryMode==t.SummaryMode.STATISTICAL){var n=this.dataSource,r=o.length;if(r>1){for(var s=0,a=0;a<r;a++)s+=n.getValue(o[a],e);var l=s/r;for(s=0,a=0;a<r;a++)s+=Math.pow(n.getValue(o[a],e)-l,2);return s/(r-i)}if(1==r)return 0}return NaN},i.prototype.getStdev=function(e,i){void 0===i&&(i=0);var o=this.$_getSummary(e);if(o instanceof fo)return 0==i?Math.sqrt(o.varsp):Math.sqrt(o.vars);if(o&&this.provider.summaryMode==t.SummaryMode.STATISTICAL){var n=this.dataSource,r=o.length;if("string"==typeof e&&(e=n.getFieldIndex(e)),r>1){for(var s=0,a=0;a<r;a++)s+=n.getValue(o[a],e);var l=s/r;for(s=0,a=0;a<r;a++)s+=Math.pow(n.getValue(o[a],e)-l,2);return Math.sqrt(s/(r-i))}if(1==r)return 0}return NaN},i.prototype.getStdevp=function(t){return this.getStdev(t,1)},Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype._setExpanded=function(t){this._expanded=t},i.prototype._incDescendants=function(t){void 0===t&&(t=1),this._descendantCount+=t},i.prototype._insertChild=function(t,e){this._children.splice(t,0,e),e instanceof wo&&(e[wo.PARENT]=this)},i.prototype._addChild=function(t,e){t&&this.indexOf(t)<0&&(e<0?this._children.push(t):this._children.splice(e,0,t),t[wo.PARENT]=this)},i.prototype._addChildren=function(t){var e;if(t&&(e=t.length)>0)for(var i=0;i<e;i++){var o=t[i];o&&this.indexOf(o)<0&&(o[wo.PARENT]=this,this._children.push(o))}},i.prototype._removeChild=function(t){var e=this.indexOf(t);return e>=0&&(this._children.splice(e,1),t instanceof wo&&(t[wo.PARENT]=null)),e},i.prototype._exchangeItems=function(t,e){if(t<0||t>=this._children.length)throw new RangeError("index1 is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("index2 is out of range: "+e);if(t!==e){var i=this._children[t];this._children[t]=this._children[e],this._children[e]=i}},i.prototype._moveChild=function(t,e){var i=this._children.length;if(t<0||t>=i)throw new RangeError("index is out of range: "+t);var o=Math.min(Math.max(t+e,0),i-1),n=this._children[t];if(e<0)for(var r=t;r>o;r--)this._children[r]=this._children[r-1];else for(r=t;r<o;r++)this._children[r]=this._children[r+1];this._children[o]=n},i.prototype.$_collectRows=function(t,e){for(var o=t.count,n=0;n<o;n++){var r=t.getItem(n);r instanceof i?this.$_collectRows(r,e):r.isDataRow&&e.push(r.dataRow)}},i.prototype.$_getSummary=function(t){var e=this.dataSource;if(!(e instanceof ei))return null;null==this._summaries&&(this._summaries={}),"string"==typeof t&&(t=e.getFieldIndex(t));var i=this._summaries?this._summaries[t]:null;return i||e.canSummarize(t)&&(i=this.$_summarize(t,e))&&(this._summaries[t]=i),i},i.prototype.$_summarize=function(e,i){var o=this.provider.summaryMode;if(o!=t.SummaryMode.NONE){if(null==this._rows&&(this._rows=[],this.$_collectRows(this,this._rows)),this._rows.length>3&&i.canSummarize(e)){var n=new fo(e);return i.summarizeRange(n,this._rows,o==t.SummaryMode.STATISTICAL),n}return this._rows}return null},i.prototype._saveExpanded=function(){this._setExtents(this.expanded?16|this._getExtents():-17&this._getExtents())},i.prototype._restoreExpanded=function(t){if(void 0===t&&(t=!1),this._setExpanded(0!=(16&this._getExtents())),t)for(var e=this.count-1;e>=0;e--){var o=this.getItem(e);o instanceof i&&o._restoreExpanded(!0)}},i}(wo),xo=function(e){function i(t){var i=e.call(this)||this;return i._footers=0,i._extents=0,i._allFooters=[],i._groupField=t,i}return n(i,e),i.prototype.dispose=function(){this._allFooters=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"groupField",{get:function(){return this._groupField},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupValue",{get:function(){return this._groupValue},set:function(t){this._groupValue=t},enumerable:!1,configurable:!0}),i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(i.prototype,"footer",{get:function(){return this._footer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerCount",{get:function(){return this._footers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"allFooterCount",{get:function(){return this._allFooters.length},enumerable:!1,configurable:!0}),i.prototype.getHiddenFooterCount=function(){for(var t=0,e=0;e<this.children.length;e++)this.children[e].hiddenFooter&&t++;return t},i.prototype.getFooter=function(t){return t=this.indexOf(this._footer)+t,this._children[t]},i.prototype.getFooterIndex=function(t){return t.$_footerIndex},i.prototype.isFooter=function(t){if(t===this._footer)return!0;if(this._footers>1)for(var e=this._children,i=e.length-1;i>=0;i--){if(e[i]===t)return!0;if(e[i]===this._footer)break}return!1},i.prototype._addChild=function(t,i){t instanceof Oo?(this._allFooters.push(t),t[wo.PARENT]=this,t.hiddenFooter||(e.prototype._addChild.call(this,t,i),this._footer=this._footer||t,this._footers++)):e.prototype._addChild.call(this,t,i)},i.prototype.getFirstVisibleItem=function(t){if(this.visible)return this;for(var e=0,i=this.children.length;e<i;e++){var o=this.children[e];if(t&&this.footer&&this.footer.visible)return this.footer;if(o instanceof Eo){var n=o.getFirstVisibleItem(t);if(n)return n}else if(o.visible)return o}return null},i}(Eo),Oo=function(e){function i(){var t=e.call(this)||this;return t.$_footerIndex=0,t._hiddenFooter=!1,t._extents=0,t}return n(i,e),Object.defineProperty(i.prototype,"footerIndex",{get:function(){return this.$_footerIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vindex",{get:function(){return this.$_vindex>-1?this.$_vindex:this.$_footerIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hiddenFooter",{get:function(){return this._hiddenFooter},set:function(t){this._hiddenFooter=t},enumerable:!1,configurable:!0}),i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isData",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayLevel",{get:function(){return this.level},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.FOOTER},enumerable:!1,configurable:!0}),i}(wo),Ro=function(t){function e(e){var i=t.call(this,-1)||this;return i._provider=e,i}return n(e,t),Object.defineProperty(e.prototype,"provider",{get:function(){return this._provider},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._provider.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expandable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collapsable",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(xo),Io=function(e){function i(t){var i=e.call(this)||this;return i._hideDeleted=!1,i._eventLock=0,i._rowHeighted=!1,i._explicitHeighted=!1,i._indexing=t,i._rootItem=i._createRootItem(),i}return n(i,e),i.prototype._doDispose=function(){return this._rootItem.dispose(),null},Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._hideDeletedChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return t.SummaryMode.AGGREGATE},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return t.SortMode.AUTO},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.setFixed=function(t,e,i,o){},i.prototype.attachItem=function(t){t._parent=this._rootItem},i.prototype.getItemsByIndices=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var n=this.getItem(t[i]);n&&e.push(n)}return e},i.prototype.getIndexOfRow=function(t,e){var i=this.getItemOfRow(t,e);return i?i.index:-1},i.prototype.getIndicesOfRows=function(t,e){var i=[],o=t?t.length:0;if(o)for(var n=0;n<o;n++){var r=this.getItemOfRow(t[n],e);i.push(r?r.index:-1)}return i},i.prototype.getItemsByRows=function(t,e){void 0===e&&(e=!1);for(var i=[],o=t?t.length:0,n=0;n<o;n++){var r=this.getItemOfRow(t[n],e);r&&i.push(r)}return i},i.prototype.exchange=function(t,e){},i.prototype.setCheckable=function(t,e){t&&e!=t.checkable&&(t._setCheckable(e),this._fireCheckableChanged(t))},i.prototype.setGroupCheckable=function(t){},i.prototype.checkItem=function(t,e,i,o){if(t){var n=t.checked;i?(this._clearChecked(),e&&this._setChecked(t,!0),e!=n&&o&&this._fireItemChecked(t),this._fireRefreshClient()):e!=n&&(this._setChecked(t,e),o?this._fireItemChecked(t):this._fireRefreshClient()),this._fireItemCheckChanged([t],e)}},i.prototype.checkItems=function(t,e,i){if(t&&t.length>0){for(var o=0,n=t.length;o<n;o++){var r=t[o];r instanceof wo&&this._setChecked(r,e)}i?1===t.length?this._fireItemChecked(t[0]):this._fireItemsChecked(t,e):this._fireRefreshClient()}this._fireItemCheckChanged(t,e)},i.prototype.checkAll=function(t,e,i,o,n){var r=this.itemCount;if(i)for(var s=0;s<r;s++){var a=this.getItem(s);a.checkable&&this._setChecked(a,t)}else for(s=0;s<r;s++)this._setChecked(this.getItem(s),t);o?this._fireItemAllChecked(t):this._fireRefreshClient(),this._fireItemCheckChanged(null,t)},i.prototype._setCheckItem=function(t,e){t._setChecked(e)},i.prototype._clearDisplayLevels=function(){},i.prototype.canUpdate=function(e,i){if(e){var o=this.dataSource;if(!o)return!1;var n=e.dataRow;if(!o.canUpdateField(n,i))return!1;var r=e.itemState,s=bo(r)||r===t.ItemState.DUMMY;return(n>=0||s)&&(s||o.canUpdateRow(n))}return!1},i.prototype.canAppend=function(){var t=this.dataSource;return t&&t.canAppendRow()},i.prototype.canInsert=function(t){if(t){var e=t.dataRow,i=this.dataSource;return i&&i.canInsertRow(e)}return!1},i.prototype.canDelete=function(t){if(t){var e=t.dataRow,i=this.dataSource;return e>=0&&i&&i.canDeleteRow(e)}return!1},i.prototype.appendDummy=function(){},i.prototype.cancelDummy=function(){},i.prototype.findItem=function(t,e,i,o,n){return-1},i.prototype.findCell=function(t,e,i,o,n,r){return null},i.prototype.getNumber=function(t){return NaN},i.prototype.getSum=function(t){return NaN},i.prototype.getMax=function(t){return NaN},i.prototype.getMin=function(t){return NaN},i.prototype.getAvg=function(t){return NaN},i.prototype.getVar=function(t){return NaN},i.prototype.getVarp=function(t){return NaN},i.prototype.getStdev=function(t){return NaN},i.prototype.getStdevp=function(t){return NaN},i.prototype.getDataCount=function(t){return NaN},i.prototype.getDataAvg=function(t){return NaN},Object.defineProperty(i.prototype,"isIndexing",{get:function(){return this._indexing},enumerable:!1,configurable:!0}),i.prototype.setRowHeight=function(t,e,i){t.$_setHeight(e,i)&&(isNaN(e)||(i?this._explicitHeighted=!0:this._rowHeighted=!0))},i.prototype.clearRowHeights=function(t){if(t||this._rowHeighted){for(var e=!1,i=this.itemCount-1;i>=0;i--){var o=this.getItem(i);isNaN(o.height)&&!o.heights||(o.$_clearHeight(t),o.heights=null,e=!0)}return this._rowHeighted=!1,t&&(this._explicitHeighted=!1),e}},i.prototype.isRowHeighted=function(t){return void 0===t&&(t=!0),this._rowHeighted||t&&this._explicitHeighted},i.prototype.setCheckFieldIndex=function(t){this._checkFieldIndex=t},i.prototype.getItemChecked=function(t,e){return this._checkFieldIndex>-1?this.dataSource.getField(this._checkFieldIndex).readBooleanValue(t.getData(this._checkFieldIndex)):e},i.prototype.setItemChecked=function(t,e){if(this._checkFieldIndex>-1){var i=this.dataSource.getField(this._checkFieldIndex),o=i.readBooleanValue(t.getData(this._checkFieldIndex));return!!o!=e&&(o=(i._boolParser||i._ownerBoolParser).toText(e),t.setData(this._checkFieldIndex,o)),!0}return!1},Object.defineProperty(i.prototype,"rootItem",{get:function(){return this._rootItem},enumerable:!1,configurable:!0}),i.prototype._createRootItem=function(){return new Ro(this)},i.prototype._hideDeletedChanged=function(){},i.prototype.$_canFire=function(){return this._eventLock<=0},i.prototype._setChecked=function(t,e){t._setChecked(e)},i.prototype._clearChecked=function(){for(var t=0,e=this.itemCount;t<e;t++)this._setChecked(this.getItem(t),!1)},i.prototype._resetItemIndicies=function(t){if(this._indexing)for(var e=t,i=this.itemCount;e<i;e++)this.getItem(e)._index=e},i.prototype._setExpanded=function(t,e){t._setExpanded(e)},i.prototype._resetItemIndex=function(t){var e=this.getItem(t);e&&(e._index=t)},i.prototype._incDescendents=function(t,e){t._descendantCount+=e,t.parent&&this._incDescendents(t.parent,e)},i.prototype._copyExtents=function(t,e){t instanceof wo&&e instanceof wo&&e._setExtents(t._getExtents())},i.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent("onItemProviderReset")},i.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRefresh")},i.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRefreshClient")},i.prototype._fireItemInserted=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemInserted",t)},i.prototype._fireItemDeleted=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemDeleted",t)},i.prototype._fireItemUpdated=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemUpdated",t)},i.prototype._fireCheckableChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderCheckableChanged",t)},i.prototype._fireItemChecked=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemChecked",t)},i.prototype._fireItemsChecked=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderItemsChecked",t,e)},i.prototype._fireItemAllChecked=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemAllChecked",t)},i.prototype._fireItemCheckChanged=function(t,e){this.fireEvent("onItemProviderItemCheckChanged",t,e)},i.prototype._fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderRowStateChanged",t)},i.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderRowStatesChanged",t)},i.prototype._fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRowStatesCleared")},i.prototype._fireSort=function(t,e,i){this._eventLock<=0&&this.fireEvent("onItemProviderSort",t,e,i)},i.prototype._fireSorted=function(){this._eventLock<=0&&this.fireEvent("onItemProviderSorted")},i.prototype._fireFiltered=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderFiltered",t,e)},i.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderCommandStackChanged",t,e)},i.prototype._fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onItemProviderDataLoadComplated")},i.prototype.canGrouping=function(t){return!1},i}(Ee),To=function(t){function e(e,i){var o=t.call(this,i)||this;return o._initialize(),o.source=e,o}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=t,this._source&&(this._populateItems(),this._source.addListener(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._source&&this._source.dataSource},set:function(t){this._source&&(this._source.dataSource=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._source?this._source.rowCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixedCount",{get:function(){return this._source?this._source.fixedCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxItemCount",{get:function(){return this._source?this._source.maxItemCount:0},set:function(t){this._source&&(this._source.maxItemCount=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sorted",{get:function(){return this._source&&this._source.sorted},enumerable:!1,configurable:!0}),e.prototype.setFixed=function(t,e,i,o){this._source&&this._source.setFixed(t,e,i,o)},e.prototype.getIndexOfRow=function(t){return this._source?this._source.getIndexOfRow(t,!1):-1},e.prototype.getItemOfRow=function(t,e){return this._source?this._source.getItemOfRow(t,e):null},e.prototype._refreshItems=function(){this._source&&this._source._refreshItems()},e.prototype._clearDisplayLevels=function(){this._source&&this._source._clearDisplayLevels()},e.prototype._initialize=function(){},e.prototype._clearItems=function(){},e.prototype._populateItems=function(){this._resetItemIndicies(0)},e.prototype.onItemProviderReset=function(t){this._populateItems(),this._fireReset()},e.prototype.onItemProviderRefresh=function(t){this._populateItems(),this._fireRefresh()},e.prototype.onItemProviderRefreshClient=function(t){this._fireRefreshClient()},e.prototype.onItemProviderItemInserted=function(t,e){this._resetItemIndicies(0),this._fireItemInserted(e)},e.prototype.onItemProviderItemDeleted=function(t,e){this._resetItemIndicies(0),this._fireItemDeleted(e)},e.prototype.onItemProviderItemUpdated=function(t,e){this._resetItemIndicies(0),this._fireItemUpdated(e)},e.prototype.onItemProviderCheckableChanged=function(t,e){this._fireCheckableChanged(e)},e.prototype.onItemProviderItemChecked=function(t,e){this._fireItemChecked(e)},e.prototype.onItemProviderItemsChecked=function(t,e,i){this._fireItemsChecked(e,i)},e.prototype.onItemProviderItemAllChecked=function(t,e){this._fireItemAllChecked(e)},e.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._fireItemCheckChanged(e,i)},e.prototype.onItemProviderRowStateChanged=function(t,e){this._fireRowStateChanged(e)},e.prototype.onItemProviderRowStatesChanged=function(t,e){this._fireRowStatesChanged(e)},e.prototype.onItemProviderRowStatesCleared=function(t){this._fireRowStatesCleared()},e.prototype.onItemProviderFiltered=function(t,e,i){},e.prototype.onItemProviderSort=function(t,e,i){},e.prototype.onItemProviderSorted=function(t){},e.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},e.prototype.onItemProviderDataLoadComplated=function(t){this._fireDataLoadComplated()},e}(Io),Po=function(t){function e(e,i,o,n,r){var s=t.call(this,n)||this;return s._started=!1,s._checkDiff=!1,s._strictDiff=!1,s._target=i,e.attachItem(s),s._setIndex(o),s._state=r,s.$_setDisplayLevel(i?i.displayLevel:0),s}return n(e,t),Object.defineProperty(e.prototype,"values",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.beginEdit=function(t,e){this.$_clearHeight(!0)},e.prototype.setValue=function(t,e){},Object.defineProperty(e.prototype,"resizable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemState",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.getData=function(t){return null},e.prototype.setData=function(t,e){},e.prototype.getRowData=function(){return null},e.prototype.getRowObject=function(){return null},e.prototype._clearDisplayLevels=function(){},e}(So),Do=function(t){function e(e,i,o,n,r){var s=t.call(this,n)||this;return s._values=[],s._changeValues=[],s._started=!1,s._checkDiff=!1,s._strictDiff=!1,s._invalidFields=[],s._target=i,e.attachItem(s),s._setIndex(o),s._state=r,s.$_setDisplayLevel(i?i.displayLevel:0),s._invalidFields=[],s}return n(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.provider,i=this.dataSource,o=i.fieldCount;if(t instanceof Array){o=Math.min(o,t.length);for(var n=0;n<o;n++){var r=i.getField(n),s=this._values[n],a=r.readValue(t[n]);this._values[n]=a,this._started&&!r.equalValues(s,a)&&e._editItemCellUpdated(this,n,s,a)}}else if(t)for(n=0;n<o;n++){var l=i.getOrgFieldName(n);t.hasOwnProperty(l)&&(r=i.getField(n),s=this._values[n],a=r.readValue(t[l]),this._values[n]=a,this._started&&!r.equalValues(s,a)&&e._editItemCellUpdated(this,n,s,a))}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"invalidFields",{get:function(){return this._invalidFields},enumerable:!1,configurable:!0}),e.prototype.beginEdit=function(t,e){bo(this._state)&&this.$_clearHeight(!0),this._started=!0,this._checkDiff=t,this._strictDiff=e},e.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new Ke("field index is out of bounds: "+t);var o=i.getField(t),n=this._values[t];e=o.readValue(e),this._values[t]=e,this._started&&!o.equalValues(n,e)&&this.provider._editItemCellUpdated(this,t,n,e),this.$_clearHeight(!1)},Object.defineProperty(e.prototype,"resizable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemState",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._target?this._target.level:1},enumerable:!1,configurable:!0}),e.prototype.getData=function(t){if((t=this.dataSource.getFieldIndex(t))<0&&t>=this.dataSource.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},e.prototype.setData=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),n=this._values[t],r=!this._checkDiff;e=o.readValue(e),r||(r=this._strictDiff?!o.equalValues(n,e):!o.sameValues(n,e)),r&&(this._values[t]=e,this._changeValues[t]=!0,this.provider._editItemCellUpdated(this,t,n,e),this.provider._editItemCellEdited(this,t)),this.$_clearHeight(!1)},e.prototype.getRowData=function(){return this._values.concat()},e.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++)e[t.getOrgFieldName(i)]=this._values[i];return e}return null},e.prototype.isEdited=function(t){return this._changeValues[t]},e.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||this._setExtents(t?1|this._getExtents():-2&this._getExtents())},e.prototype._clearDisplayLevels=function(){},e}(So),ko=function(e){function i(i,o){var n=e.call(this,i,o)||this;return n._checkDiff=!1,n._checkCellDiff=!1,n._strictDiff=!1,n._undoable=!1,n._cancelWhenLastUndo=!1,n._orgItem=null,n._editingItem=null,n._dummyEditItem=null,n._editingState=t.ItemState.NORMAL,n._insertMode=0,n._modified=!1,n._commiting=!1,n._saveDs=null,n._commands=new ri(n),i&&(n._saveDs=i.dataSource)&&n._saveDs.registerClient(n),n}return n(i,e),i.prototype._doDispose=function(){this._saveDs=null,e.prototype._doDispose.call(this)},i.prototype.isDataEditing=function(){return this.isEditing()},i.prototype.cancelDataEditing=function(){this.isEditing()&&this.fireCancelRequest()},i.prototype.commitDataEditing=function(){this.isEditing()&&this.fireCommitRequest()},i.prototype.editCommandStackChanged=function(t,e,i){var o=this._saveDs;o?this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo):this._fireCommandStackChanged(e,i)},Object.defineProperty(i.prototype,"isCheckDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isCheckCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isStrictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editingItem",{get:function(){return this._commiting||this.isEditing()?this._editingItem:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isUpdating",{get:function(){return this._editingState==t.ItemState.UPDATING},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isInserting",{get:function(){return this._editingState==t.ItemState.INSERTING},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isAppending",{get:function(){return this._editingState==t.ItemState.APPENDING},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable&&this._saveDs&&this._saveDs.undoable},set:function(t){t!=this._undoable&&(this._undoable=t,this._commands.flush(),this._saveDs.undoable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._commands.canUndo||this._saveDs&&this._saveDs.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands.canRedo||this._saveDs&&this._saveDs.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._commands.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._commands.redoing},enumerable:!1,configurable:!0}),i.prototype.isEditing=function(t){return vo(this._editingState)&&(!t||t===this._editingItem)},i.prototype.isEdited=function(t){return vo(this._editingState)&&(!t||t===this._editingItem)&&this._modified},i.prototype.setDiffs=function(t,e,i){this._checkDiff=t,this._checkCellDiff=e,this._strictDiff=i},i.prototype.edit=function(t){if(this.isEditing())return!0;if(t)try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}return!1},i.prototype.editData=function(t,e,i){var o;if(t&&(o=this.dataSource)&&e>=0&&e<o.fieldCount){if(!this.isEditing())try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}this._editingItem.setData(e,i)}return!1},i.prototype.appendDummy=function(){if(!this.isEditing())try{this._beginAppendDummy()}catch(t){this.cancelDummy()}},i.prototype.append=function(t){if(!this.isEditing())try{return this._beginAppend(t),!0}catch(t){throw this.cancel(),t}return!1},i.prototype.insert=function(t,e,i,o){if(!this.isEditing())try{return this._beginInsert(t,e,i,o),!0}catch(t){throw this.cancel(),t}return!1},i.prototype.cancelDummy=function(){this._dummyEditItem&&this._cancelDummyEdit()},i.prototype.cancel=function(){this.isEditing()&&this._cancelEdit()},i.prototype.commit=function(e){if(this.isEditing()){this._commiting=!0;try{var i=this.dataSource;if(i){if(this._editingState==t.ItemState.UPDATING&&this.isCheckDiff){for(var o=this._editingItem.values,n=o.length,r=this.isStrictDiff,s=!1,a=0;a<n;a++)if(r){if(!i.getField(a).equalValues(this._orgItem.getData(a),o[a])){s=!0;break}}else if(!i.getField(a).sameValues(this._orgItem.getData(a),o[a])){s=!0;break}if(!s)return this._cancelEdit(),!0}return this._commitEdit(e)}}finally{this._commiting=!1}}return!0},i.prototype.execute=function(t){t&&(this.undoable?this._commands.execute(t):t.execute())},i.prototype.undo=function(){this.isEditing()?(this._commands.undo(),!this._commands.canUndo&&this._cancelWhenLastUndo&&this.cancel()):this._saveDs&&this._saveDs.undo()},i.prototype.redo=function(){this.isEditing()?this._commands.redo():this._saveDs&&this._saveDs.redo()},i.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._commands.flush(),t&&this._saveDs&&this._saveDs.clearCommandStack()},i.prototype.revert=function(t){},i.prototype.revertAll=function(t){},i.prototype._checkEditing=function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},i.prototype._checkNotEditing=function(){if(this.isEditing())throw new Error("itemProvider is already editing")},i.prototype._beginUpdate=function(e){if(!e)throw new Error("item is null");this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginUpdate(e),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._orgItem=e,this._editingState=t.ItemState.UPDATING,this._commands.flush(),this.fireUpdateStarted(this._editingItem))},i.prototype._doBeginUpdate=function(t){return null},i.prototype._beginAppendDummy=function(){this._dummyEditItem=this._doBeginAppendDummy()},i.prototype._doBeginAppendDummy=function(){return null},i.prototype._beginAppend=function(e){this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginAppend(e),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=t.ItemState.APPENDING,this._commands.flush(),this.fireAppendStarted(this._editingItem))},i.prototype._doBeginAppend=function(t){return null},i.prototype._beginInsert=function(e,i,o,n){void 0===o&&(o=!1),void 0===n&&(n=!1),this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginInsert(e,i,o,n),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=t.ItemState.INSERTING,this._resetItemIndicies(0),this._commands.flush(),this.fireInsertStarted(this._editingItem))},i.prototype._doBeginInsert=function(t,e,i,o){return null},i.prototype._updateEditingRow=function(t){return!1},i.prototype._insertEditingRow=function(t){return!1},i.prototype._cancelDummyEdit=function(){this._dummyEditItem=null,this._doCancelDummyEdit()},i.prototype._cancelEdit=function(){this._checkEditing();var e=this._editingState;try{this._editingState=t.ItemState.NORMAL,this._doCancelEdit(e,this._orgItem)}catch(t){throw this._editingState=e,t}this._modified=!1,this._commands.flush(),this.fireCanceled()},i.prototype._doCancelDummyEdit=function(){},i.prototype._doCancelEdit=function(e,i){e==t.ItemState.INSERTING&&this._resetItemIndicies(0)},i.prototype._commitEdit=function(e){if(this._checkEditing(),!this.dataSource)throw new Error("data provier is null");try{this.fireItemCommitting(this._editingItem)}catch(t){alert(t.message)}var i=this._editingState,o=!1;if(this.isUpdating)try{this._editingState=t.ItemState.NORMAL,o=this._doCompleteUpdate(this._orgItem,e)}catch(t){throw this._editingState=i,t}else try{this._editingState=t.ItemState.NORMAL,o=this._doCompleteInsert(i==t.ItemState.APPENDING)}catch(t){throw this._editingState=i,t}return o?(this._modified=!1,this._doCommitEdit(i,this._orgItem),this._commands.flush(),this.fireCommitted(this._editingItem)):this._editingState=i,o},i.prototype._doCommitEdit=function(t,e){return!1},i.prototype._editItemCellEdited=function(t,e){t&&this.isEditing(t)&&(this._modified=!0,this.fireItemCellEdited(t,e))},i.prototype._editItemCellUpdated=function(t,e,i,o){this.isEditing(t)&&(this._modified=!0,this.fireItemCellUpdated(t,e,i,o))},i.prototype.$_editingItem=function(){return this._editingItem},i.prototype.$_dummyItem=function(){return this._dummyEditItem},i.prototype.fireUpdateStarted=function(t){this.$_canFire()&&this.fireEvent(i.UPDATE_STARTED,t)},i.prototype.fireAppendStarted=function(t){this.$_canFire()&&this.fireEvent(i.APPEND_STARTED,t)},i.prototype.fireInsertStarted=function(t){this.$_canFire()&&this.fireEvent(i.INSERT_STARTED,t)},i.prototype.fireItemCellEdited=function(t,e){this.$_canFire()&&this.fireEvent(i.CELL_EDITED,t,e)},i.prototype.fireItemCellUpdated=function(t,e,o,n){this.$_canFire()&&this.fireEvent(i.CELL_UPDATED,t,e,o,n)},i.prototype.fireItemCommitting=function(t){this.$_canFire()&&this.fireEvent(i.COMMITTING,t)},i.prototype.fireCommitted=function(t){this.$_canFire()&&this.fireEvent(i.COMMITTED,t)},i.prototype.fireCanceled=function(){this.$_canFire()&&this.fireEvent(i.CANCELED)},i.prototype.fireCommitRequest=function(){this.$_canFire()&&this.fireEvent(i.COMMIT_REQUEST)},i.prototype.fireCancelRequest=function(){this.$_canFire()&&this.fireEvent(i.CANCEL_REQUEST)},i.prototype.onItemProviderReset=function(t){e.prototype.onItemProviderReset.call(this,t);var i=this.dataSource;i!=this._saveDs&&(this._saveDs&&this._saveDs.unregisterClient(this),this._saveDs=i,this._saveDs&&this._saveDs.registerClient(this))},i.prototype.onItemProviderRefresh=function(t){e.prototype.onItemProviderRefresh.call(this,t)},i.prototype.onItemProviderRefreshClient=function(t){e.prototype.onItemProviderRefreshClient.call(this,t)},i.prototype.onItemProviderItemInserted=function(t,i){e.prototype.onItemProviderItemInserted.call(this,t,i)},i.prototype.onItemProviderItemDeleted=function(t,i){e.prototype.onItemProviderItemDeleted.call(this,t,i)},i.prototype.onItemProviderItemUpdated=function(t,i){e.prototype.onItemProviderItemUpdated.call(this,t,i)},i.prototype.onItemProviderCommandStackChanged=function(t,e,i){var o=this._commands;this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo)},i.UPDATE_STARTED="onItemEditUpdateStarted",i.APPEND_STARTED="onItemEditAppendStarted",i.INSERT_STARTED="onItemEditInsertStarted",i.CELL_EDITED="onItemEditCellEdited",i.CELL_UPDATED="onItemEditCellUpdated",i.COMMITTING="onItemEditCommitting",i.COMMITTED="onItemEditCommitted",i.CANCELED="onItemEditCanceled",i.COMMIT_REQUEST="onItemEditCommitRequest",i.CANCEL_REQUEST="onItemEditCancelRequest",i}(To),Ao=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o._insertRow=-1,o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"itemCount",{get:function(){var t=this.source.itemCount;return t+=this.isInserting||this.isAppending?1:0,t+(this.$_dummyItem()?1:0)},enumerable:!1,configurable:!0}),i.prototype.getItem=function(t,e){var i=this.source;if(e)return i.getItem(t,e);var o,n=this.$_editingItem(),r=this.$_dummyItem();return this.isEditing()&&n.index==t?n:(this.isInserting?o=t>n.index?i.getItem(t-1):i.getItem(t):t<i.itemCount&&(o=i.getItem(t)),o||(r&&t==this.itemCount-1?r:null))},i.prototype.getItems=function(t,e){return this.source.getItems(t,e)},i.prototype._doBeginUpdate=function(e){return this._createEditItem(e,t.ItemState.UPDATING,null,!1,!1)},i.prototype._doBeginAppendDummy=function(){return this.$_dummyItem()||this._createDummyEditItem()},i.prototype._doBeginAppend=function(e){return this._createEditItem(null,t.ItemState.APPENDING,e,!1,!1)},i.prototype._doBeginInsert=function(e,i,o,n){return this._createEditItem(e,t.ItemState.INSERTING,i,o,n)},i.prototype._doCompleteUpdate=function(t,e){var i=this.dataSource;if(i instanceof ei){var o=this.$_editingItem();return this._copyExtents(o,t),e||i.updateRow(o.dataRow,o.values,!1)}return!1},i.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=!1;if(e){var o=this.$_editingItem(),n=t?e.rowCount:Math.max(0,this._insertRow),r=o.values;if(i=e.insertRow(n,r,o._index2)){var s=this.getItemOfRow(n,!0);s&&(o._setCheckable(s.checkable),this._copyExtents(o,s),o.heights&&(s.heights=o.heights.slice()))}}return i},i.prototype.remove=function(t,e){var i=this.dataSource;if(t&&!this.isEditing(t)&&i){var o=t.dataRow;o>=0&&i.removeRow(o,e)}},i.prototype.revert=function(e){if(e instanceof wo||(e=this.getItem(e)),e){var i=this.dataSource;if(i){var o=e.dataRow,n=i.getRowState(o);n==t.RowState.DELETED?i.setRowState(o,t.RowState.NONE,!1):n==t.RowState.CREATE_AND_DELETED&&i.setRowState(o,t.RowState.CREATED,!1)}}},i.prototype.revertAll=function(e){if(e&&0!=e.length){var i=this.dataSource;if(i)for(var o=e.length;o--;){var n=this.getItem(e[o]);if(n){var r=n.dataRow,s=i.getRowState(r);s==t.RowState.DELETED?i.setRowState(r,t.RowState.NONE,!1):s==t.RowState.CREATE_AND_DELETED&&i.setRowState(r,t.RowState.CREATED,!1)}}}},i.prototype.getRemovableRows=function(t){if(!t||0==t.length)return null;for(var e=[],i=0,o=t.length;i<o;i++){var n=this.getItem(t[i]).dataRow;n>=0&&e.push(n)}return e},i.prototype.removeRows=function(t,e){t&&(t.length>1?this.dataSource.removeRows(t,!1,e):this.dataSource.removeRow(t[0],e))},i.prototype.updateRows2=function(t){this.dataSource.updateRows2(t,!1,!1)},i.prototype._createDummyEditItem=function(){return new Po(this,null,this.itemCount,-1,t.ItemState.DUMMY)},i.prototype._createEditItem=function(e,i,o,n,r){var s=this.dataSource;if(!s)return null;var a=null,l=s.fieldCount;switch(i){case t.ItemState.UPDATING:a=new Do(this,e,e.index,e.dataRow,i);for(var u=0;u<l;u++)a.setValue(u,e.getData(u));this._copyExtents(e,a),e.heights&&(a._heights=e.heights.slice());break;case t.ItemState.INSERTING:case t.ItemState.APPENDING:var c=this._rs,h=i==t.ItemState.INSERTING&&e?n?e.index+1:e.index:this.itemCount;if(a=new Do(this,e,h,-1,i),i==t.ItemState.INSERTING){var p=e.dataRow,d=e;if(p<=-1){for(var f=this.source._visibleItems;(d=f.getNext(d))&&!(d instanceof So););this._insertRow=d?d.dataRow:s.rowCount}else this._insertRow=n?Math.min(s.rowCount,p+1):p;if(e instanceof So&&n&&c){var g=c._pubItems.indexOf(d);g++>=0&&g<=c._pubItems.length&&(a._index2=g)}}if(o)for(u=0;u<l;u++)o.length>u&&a.setValue(u,o[u])}return a},i}(ko);!function(t){function e(e,i){var o=t.call(this,e)||this;return o.message=e,o.tokenPos=i,o}n(e,t)}(Error);var Lo,Mo=function(){function t(t){this.literal=t}return t.prototype.evaluate=function(t){return this.literal},t}(),Fo=function(){function t(t,e){void 0===e&&(e=-1),this.ident=t,this.idKey=e}return t.prototype.evaluate=function(t){return this.idKey<0&&(this.idKey=t.isIdentifier(this.ident)),t.evaluateIdentifier(this.idKey)},t}(),No=function(){function t(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!1),this.ident=t,this.idKey=e,this.capital=i}return t.prototype.evaluate=function(t){var e=this.ident,i=e.indexOf("["),o=e.indexOf("]");if(i<o){var n=e.substr(0,i).trim(),r=e.substring(i+1,o).replace(/['|"]/g,"").trim();return this.idKey<0&&(this.idKey=t.isIdentifier(n)),t.evaluateIndexerS(this.idKey,r,this.capital)}},t}(),Vo=function(){function t(t,e){void 0===e&&(e=!1),this._silentError=!1,this._tokens=[],this._source=t,this._silentError=e,t&&this._parse(t)}return Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source=t,this._parse(t))},enumerable:!1,configurable:!0}),t.prototype.evaluate=function(t){try{for(var e=this._tokens,i="",o=0,n=e.length;o<n;o++)i+=e[o].evaluate(t)||"";return i}catch(t){if(!this._silentError)throw new t}return null},t.prototype._parse=function(t){if(this._tokens=[],t)for(var e,i=t.length,o=0;o<i;){var n=t.indexOf("${",o);if(n>=0){var r=t.indexOf("}",n+2);if(r>=0){if(n>o){var s=t.substring(o,n);e=new Mo(s),this._tokens.push(e)}if(u=t.substring(n+2,r).trim()){var a,l=void 0;e=(a=u.indexOf("["))&&(l=u.indexOf("]"))&&a<l?new No(u):new Fo(u),this._tokens.push(e)}o=r+1}else n=-1}if(n<0){var u=t.substr(o,i);e=new Mo(u),this._tokens.push(e);break}}},t}();!function(t){t.ACTIVE="active",t.UNACTIVE="unactive",t.INDETERMINATE="indeterminate"}(Lo||(Lo={}));var Bo,Go=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._visible=!0,i._level=0,i._category=null,i.criteria=e,i}return n(e,t),e.prototype._doDispose=function(){this._criteria=null,this._category=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this.criteriaChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t,this.callbackChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this.changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(t){this._description=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(t){t!=this._active&&(this._active=t,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this._category},set:function(t){this._category=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._text||this._name},e.prototype.changed=function(){this.fireEvent(e.CHANGED)},e.prototype.criteriaChanged=function(){},e.prototype.callbackChanged=function(){},e.CHANGED="onColumnFilterChanged",e}(Ee),jo=function(t){function e(){var e=t.call(this,null)||this;return e._childs=[],e}return n(e,t),Object.defineProperty(e.prototype,"active",{get:function(){for(var t=this._childs.length;t--;)if(!this._childs[t].active)return!1;return!0},set:function(t){for(var e=this._childs.length;e--;)this._childs[e].active=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._childs.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeState",{get:function(){for(var t=void 0,e=0,i=this._childs.length;e<i;e++){if(null!=t&&this._childs[e].active!=t)return Lo.INDETERMINATE;t=this._childs[e].active}return t?Lo.ACTIVE:Lo.UNACTIVE},enumerable:!1,configurable:!0}),e.prototype._doDispose=function(){this.clear(),t.prototype._doDispose.call(this)},e.prototype.clear=function(){this._childs=[]},e.prototype.add=function(t,e,i,o,n){var r=new Go(o);return r.name=e,r.text=i,r.active=n,this.addChild(r),t.add(r),r},e.prototype.addChild=function(t){t.level=this.level+1,t.category=this,this._childs.push(t)},e.prototype.getChild=function(t){return this._childs[t]},e}(Go),Ho=function(){function t(t){this._model=t,this.parse()}return t.prototype._doDispose=function(){this._exprNode=null,this._model=null},Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),t.prototype.prepare=function(t,e){t.setDataSource(e)},t.prototype.select=function(t,e,i,o){var n=this._model.callback;return n?n.call(this,t._ds.handler,i.dataRow,e.level+1,o,this._model,i.getData(o)):!this._exprNode||(t.setData(i,o,this._model),this._exprNode.evaluate(t))},t.prototype.criteriaChanged=function(){this.parse()},t.prototype.parse=function(){this._model.callback||(this._model.criteria?this._exprNode=be.Default.parse(this._model.criteria,null):this._exprNode=null)},t}(),$o=function(t){function e(e){var i=t.call(this)||this;return i._items=[],i._names={},i._updating=!1,i._nextId=1,i._owner=e,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeCount",{get:function(){for(var t=0,e=0,i=this._items;e<i.length;e++)i[e].active&&t++;return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){for(var t=0,e=this._items;t<e.length;t++)if(e[t].visible)return!0;return!1},enumerable:!1,configurable:!0}),e.prototype.getOwner=function(){return this._owner},e.prototype.getItem=function(t){return this._items[t]},e.prototype.indexOf=function(t){for(var e=this._items.length-1;e>=0;e--)if(this._items[e].name==t)return e;return-1},e.prototype.getActiveItems=function(t){for(var e=[],i=this._items.length-1;i>=0;i--)this._items[i].active==t&&e.push(this._items[i]);return e},e.prototype.assignFrom=function(t){if(t!==this){var e=this.clear(!1);if(t)for(var i=t instanceof Array?t:[t],o=i.length,n=0;n<o;n++)if((t=i[n])&&t.name){this.$_checkName(t.name);var r=new Go(null);r.assignFrom(t),this._items.push(r),this._names[t.name]=r,r.addListener(this)}(e||this.count>0)&&this.changed(null)}},e.prototype.clear=function(t){void 0===t&&(t=!0);var e=this._items.length;if(e>0){for(var i=0;i<e;i++)this._items[i].removeListener(this);return this._items.length=0,this._names={},t&&this.changed(null),!0}return!1},e.prototype.add=function(t,e){void 0===e&&(e=!0);var i=xt.cast(t,Go);i?this._items.indexOf(i)<0&&i.name&&this.$_checkName(i.name):t&&t.name&&(this.$_checkName(t.name),(i=new Go(null)).assignFrom(t)),i&&(this._items.push(i),i._owner=this,this._names[i.name]=i,i.addListener(this),e&&this.changed(null))},e.prototype.addAll=function(t,e){if(t instanceof Array||!t||(t=[t]),t&&t.length>0){for(var i=0,o=t.length,n=0;n<o;n++){var r=xt.cast(t[n],Go);if(r?this._items.indexOf(r)<0&&r.name&&(e||this.$_checkName(r.name)):t[n]&&t[n].name&&(e||this.$_checkName(t[n].name),(r=new Go(null)).assignFrom(t[n])),r){var s=this.indexOf(r.name);s>=0?(this._items[s]&&this._items[s].removeListener(this),this._items[s]=r):this._items.push(r),r.addListener(this),this._names[r.name]=r,i++}}i>0&&this.changed(null)}},e.prototype.removeItems=function(t){if(t){for(var e=0,i=t.length-1;i>=0;i--){var o=this.indexOf(t[i]);if(o>=0){var n=this._items[o];this._items.splice(o,1),delete this._names[n.name],n.removeListener(this),e++}}e>0&&this.changed(null)}},e.prototype.$_activateItems=function(t,e,i){var o=!1;this._updating=!0;try{t.forEach((function(t){t.active!=e&&(t._active=e,o=!0)}))}finally{this._updating=!1}i&&o&&this.changed(null)},e.prototype.activateItems=function(t,e,i){var o=this;if(void 0===i&&(i=!0),t){var n=t.filter((function(t){return t&&o._names[t]})).map((function(t){return o._names[t]}));this.$_activateItems(n,e,i)}},e.prototype.activateAll=function(t,e){this.$_activateItems(this._items,t,e)},e.prototype.$_hideFilters=function(t,e){t.forEach((function(t){t&&(t.visible=!e)}))},e.prototype.hideFilters=function(t,e){var i=this;t&&this.$_hideFilters(t.filter((function(t){return i._names[t]})).map((function(t){return i._names[t]})),e)},e.prototype.hideAllFilters=function(t){this.$_hideFilters(this._items,t)},e.prototype.$_toggleItems=function(t){var e=!1;this._updating=!0;try{t.forEach((function(t){t._active=!t.active,e=!0}))}finally{this._updating=!1}e&&this.changed(null)},e.prototype.toggleItems=function(t){var e=this;t&&this.$_toggleItems(t.filter((function(t){return e._names[t]})).map((function(t){return e._names[t]})))},e.prototype.toggleAll=function(){this.$_toggleItems(this._items)},e.prototype.changed=function(t){this._updating||this.fireEvent(Go.CHANGED,t)},e.prototype.$_checkName=function(t){if(this._names.hasOwnProperty(t))throw new Error("Column filter already existes: "+t)},e.prototype.onColumnFilterChanged=function(t){this.changed(t)},e.prototype.onColumnFilterSelectorChanged=function(){this.changed(null)},e.prototype.onColumnFilterUserAdd=function(t,e,i){},e}(Ee),Wo=function(e){function i(){var t=e.call(this)||this;return t._field=-1,t._fieldCount=0,t}return n(i,e),i.prototype._doDispose=function(){this._item=this._ds=null,e.prototype._doDispose.call(this)},i.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=this._ds?this._ds.fieldCount:0},i.prototype.setData=function(t,e,i){this._item=t,this._field=e,this._model=i},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.$_getLookupText=function(t){var e=t._owner._owner;if(e.lookupDisplay){var i=e.lookupSource;if(i){for(var o=e.lookupKeyFieldIds,n=o.length,r=[],s=0;s<n;s++)r.push(this._item.getData(o[s]));return i.lookup(r,e.valueSeparator)}var a=e.labelFieldIndex;return a>=0?this._item.getData(a):e.getLookupLabel(this._item.getData(e.fieldName))}return""},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_VALUE:return this._item.getData(this._field);case i.ID_TEXT:return this.$_getLookupText(this._model);case i.ID_STATE:switch(this._item.rowState){case t.RowState.CREATED:return"c";case t.RowState.UPDATED:return"u";case t.RowState.DELETED:return"d";case t.RowState.CREATE_AND_DELETED:return"x"}return;case i.ID_CHANGED_CELL:var o=this._item.dataRow,n=this._field;return n>=0&&this._item.rowState==t.RowState.UPDATED&&this._ds.isDataChanged(o,n);case i.ID_FIELD:return this._field}throw new Lt("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t==i.ID_VALUE||t==i.ID_VALUES){if(e<0||e>=this._fieldCount)throw new Lt("Data field index out of bounds:"+e);return this._item.getData(e)}throw new Lt("Invalid identifier indexer: "+t)}},i.prototype.evaluateIndexerS=function(t,e,o){if(t!=i.ID_VALUE&&t!=i.ID_VALUES)throw new Lt("Invalid identifier indexer: "+t);if(this._ds){var n=o?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(n<0||n>=this._fieldCount)throw new Lt("Data field is not exists:"+e);return this._item.getData(n)}},i.ID_VALUE=0,i.ID_FIELD=1,i.ID_VALUES=2,i.ID_STATE=3,i.ID_CHANGED_CELL=4,i.ID_TEXT=5,i.IDENTS={value:i.ID_VALUE,field:i.ID_FIELD,values:i.ID_VALUES,state:i.ID_STATE,changedcell:i.ID_CHANGED_CELL,text:i.ID_TEXT},i}(jt),Uo=function(t){function e(e){var i=t.call(this)||this;return i._dirty=!1,i._grid=e,i}return n(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this._dirty},set:function(t){t!==this._dirty&&(this._dirty=t,this.invalidate())},enumerable:!1,configurable:!0}),e.prototype.clean=function(){this._dirty&&(this._dirty=!1)},e.prototype.invalidate=function(){this._grid&&this._grid.invalidate()},e.prototype.refreshOwner=function(){this._grid&&this._grid.refreshView()},e.prototype._changed=function(){this._doChanged(),this._dirty||(this._dirty=!0,this.refreshOwner())},e.prototype._doChanged=function(){},e}(Ee),zo=function(t){function e(e){var i=t.call(this,e)||this;return i._visible=!0,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._visibleChanged())},enumerable:!1,configurable:!0}),e.prototype._doChanged=function(){this._grid&&this._grid._visualObjectChanged(this)},e.prototype._visibleChanged=function(){this._changed()},e}(Uo),Ko=function(e){function i(){var t=e.call(this)||this;return t._item=null,t._group=null,t._dataSource=null,t._fieldCount=0,t}return n(i,e),i.prototype._doDispose=function(){this._item=null,this._group=null,this._dataSource=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"index",{get:function(){return this._item.index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),i.prototype.setDataSource=function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount:0},i.prototype.setItem=function(t){this._item=t,this._group=xt.cast(t,Eo)},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_CHECKED:return this._item.checked;case i.ID_STATE:switch(this._item.rowState){case t.RowState.CREATED:return"c";case t.RowState.UPDATED:return"u";case t.RowState.DELETED:return"d";case t.RowState.CREATE_AND_DELETED:return"x"}return;case i.ID_COUNT:return this._group?this._group.count:0;case i.ID_DCOUNT:return this._group?this._group.descendantCount:0}throw new Lt("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t==i.ID_VALUE||t==i.ID_VALUES){if(e<0||e>=this._fieldCount)throw new Lt("Data field index out of bounds:"+e);return this._item.getData(e)}throw new Lt("Invalid identifier indexer: "+t)}},i.prototype.evaluateIndexerS=function(t,e,o){if(t!=i.ID_VALUE&&t!=i.ID_VALUES)throw new Lt("Invalid identifier indexer: "+t);if(this._dataSource){var n=o?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(n<0||n>=this._fieldCount)throw new Lt("Data field is not exists:"+e);return this._item.getData(n)}},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.ID_STATE=5,i.ID_COUNT=6,i.ID_DCOUNT=7,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES,state:i.ID_STATE,count:i.ID_COUNT,dcount:i.ID_DCOUNT},i}(jt),Yo=function(t){function e(){var e=t.call(this)||this;return e._fieldCount=0,e}return n(e,t),e.prototype._doDispose=function(){this._cell=null,this._item=null,this._ds=null,this._grid=null,t.prototype._doDispose.call(this)},e.prototype.setDataArguments=function(t,e,i){this._ds=t,this._fieldCount=t?t.fieldCount:0,this._cell=e,this._item=i,this._grid=e&&e.index.column.grid},e.prototype.setItem=function(t){this._item=t},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){var i;switch(t){case e.ID_VALUE:return this._item.getData(this._cell.index.dataField);case e.ID_BASE:return(i=this._cell.index.dataColumn.baseIndex)>=0?this._item.getData(i):void 0;case e.ID_PREV_VALUES:var o=this._cell.index.column,n=this._grid.getDataColumns();i=n.indexOf(o);var r=[];if(n.length||i<0)return;for(var s=0,a=Math.min(i,n.length);s<a;s++)r.push(this._item.getData(n[s].dataIndex));return r.join("`")}throw new Lt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new Lt("Data field index out of bounds:"+i);return this._item.getData(i)}throw new Lt("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new Lt("Invalid identifier indexer: "+t);if(this._ds){var n=o?this._ds.getFieldIndexC(i):this._ds.getFieldIndex(i);if(n<0||n>=this._fieldCount)throw new Lt("Data field is not exists:"+i);return this._item.getData(n)}},e.ID_VALUE=0,e.ID_VALUES=1,e.ID_BASE=2,e.ID_PREV_VALUES=3,e.IDENTS={value:e.ID_VALUE,values:e.ID_VALUES,base:e.ID_BASE,prevvalues:e.ID_PREV_VALUES},e}(jt),qo=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.setGrid=function(t){this._grid=t},e.prototype.setGroup=function(t){this._group=t},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){var i,o,n=this._group;switch(t){case e.ID_GROUP_FIELD:return(i=n.dataSource.getField(n.groupField))?i.fieldName:"";case e.ID_FIELD_HEADER:return(i=n.dataSource.getField(n.groupField))?i.header:"";case e.ID_GROUP_COLUMN:return(o=this._grid?this._grid.columnByField(n.groupField):null)?o.displayText:n.dataSource.getFieldName(n.groupField);case e.ID_COLUMN_HEADER:return(o=this._grid?this._grid.columnByField(n.groupField):null)?o.header.text||o.displayText:n.dataSource.getFieldName(n.groupField);case e.ID_COLUMN_FOOTER:return(o=this._grid?this._grid.columnByField(n.groupField):null)?o.footer.text||o.displayText:n.dataSource.getFieldName(n.groupField);case e.ID_GROUP_VALUE:return n?n.groupValue:void 0;case e.ID_ROW_COUNT:return n.descendantCount}throw new Lt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){switch(t){case e.ID_SUM:case e.ID_MAX:case e.ID_MIN:case e.ID_AVG:case e.ID_DATA_COUNT:case e.ID_DATA_AVG:if(isNaN(i)||i<0)return;var o=void 0;switch(t){case e.ID_SUM:o=this._group.getSum(i);break;case e.ID_MAX:o=this._group.getMax(i);break;case e.ID_MIN:o=this._group.getMin(i);break;case e.ID_AVG:o=this._group.getAvg(i);break;case e.ID_DATA_COUNT:o=this._group.getDataCount(i);break;case e.ID_DATA_AVG:o=this._group.getDataAvg(i)}return isNaN(o)?"":String(o)}throw new Lt("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,e,i){var o=this._group.dataSource,n=e?o?o.getFieldIndex(e):-1:this._group.groupField;return this.evaluateIndexerI(t,n)},e.ID_GROUP_FIELD=0,e.ID_FIELD_HEADER=1,e.ID_GROUP_COLUMN=2,e.ID_COLUMN_HEADER=3,e.ID_COLUMN_FOOTER=4,e.ID_GROUP_VALUE=5,e.ID_ROW_COUNT=6,e.ID_SUM=7,e.ID_MAX=8,e.ID_MIN=9,e.ID_AVG=10,e.ID_DATA_COUNT=11,e.ID_DATA_AVG=12,e.IDENTS={groupfield:e.ID_GROUP_FIELD,fieldheader:e.ID_FIELD_HEADER,groupcolumn:e.ID_GROUP_COLUMN,columnheader:e.ID_COLUMN_HEADER,columnfooter:e.ID_COLUMN_FOOTER,groupvalue:e.ID_GROUP_VALUE,rowcount:e.ID_ROW_COUNT,sum:e.ID_SUM,max:e.ID_MAX,min:e.ID_MIN,avg:e.ID_AVG,datacount:e.ID_DATA_COUNT,dataavg:e.ID_DATA_AVG},e}(jt),Xo=function(t){function e(e){var i=t.call(this)||this;return i._index=new hs,i._name=e,i}return n(e,t),e.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._index.item},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueColumn",{get:function(){return this._index.valueColumn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataColumn",{get:function(){return this._index.dataColumn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t){this._index.assignFrom(t)},e.prototype.setIndex2=function(t,e,i){this._index._grid=t,this._index.set(e,i)},e.prototype.setLayout=function(t){this._index.layout=t},e.ERROR="<<ERROR>>",e}(kt),Qo=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,i)||this;return o._model=e,o}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){this._model=t},enumerable:!1,configurable:!0}),e}(Xo),Jo=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getBlankState=function(){return O.NONE},e.prototype.isValueChanged=function(){return!1},e}(Xo),Zo=function(e){function i(t){return void 0===t&&(t=null),e.call(this,t||"dataCell")||this}return n(i,e),i.getText=function(t,e){var o=e.dataIndex>=0?t.getData(e.dataIndex):void 0;return i._getText(t,e,o)},i._getText=function(e,i,o){var n,r=i;if(r.lookupDisplay){var s=r.lookupSource;if(s){for(var a=r.lookupKeyFieldIds,l=a.length,u=[],c=0;c<l;c++)u.push(e.getData(a[c]));n=void 0!==(n=s.lookup(u,r.valueSeparator))?n:null!=r.textOfInvalid?r.textOfInvalid:o}else{var h=r.labelFieldIndex;n=h>=0?e.getData(h):r.getLookupLabel(o)}}else{var p,d=void 0;n=o,r.valueType==t.ValueType.NUMBER&&null!=(p=r.nanText)&&isNaN(n)?n=p:(d=r.displayCallback)?n=d(r.grid.handler,ps.tempItem(r.grid,e,i).proxy(),n):null!=n&&"object"==typeof n&&(n=JSON.stringify(n))}return null==n?"":String(n)},i._getDisplayText=function(e,o,n,r,s){var a,l=e.formatOptions,u=s.textFormatter||void 0===n.textFormat&&l.textFormatter,c=s.numberFormatter||void 0===n.numberFormat&&l.numberFormatter,h=s.booleanFormatter||void 0===n.booleanFormat&&l.boolFormatter,p=s.datetimeWriter||void 0===n.datetimeFormat&&l.datetimeWriter;if(n){switch(n.valueType){case t.ValueType.TEXT:a=r&&u?u.getText(r):i._getText(o,n,r);break;case t.ValueType.NUMBER:var d=Number(r);a=isNaN(d)||null==d?n.nanText:0==d&&null!=n.zeroText?n.zeroText:c?c.getText(d,n.displayMinusZero):i._getText(o,n,r);break;case t.ValueType.DATETIME:a=r instanceof Date&&p?p.getText(r):i._getText(o,n,r);break;case t.ValueType.BOOLEAN:a=h?h.formatValue(r):i._getText(o,n,r);break;case t.ValueType.OBJECT:var f=n.getField(),g=o.dataRow,y=n.objectKey||f.objectKey,_=n.objectCallback||f.objectCallback;if(r){var m=_&&"function"==typeof _?_(f.orgFieldName,g,r):y?r[y]:i._getText(o,n,r);switch(typeof m){case"string":a=i._getText(o,n,m);break;case"number":a=c?c.getText(m,n.displayMinusZero):String(m);break;case"boolean":a=h?h.formatValue(m):String(m);break;default:a=m instanceof Date&&p?p.getText(m):m?String(m):""}}break;default:a=i._getText(o,n,r)}if(a){var v=s.prefix;v&&(a=v+a),(v=s.suffix)&&(a+=v)}}return a},i.equalBlankRuntime=function(){return this._equalBlankRuntime||(this._equalBlankRuntime=new Yo),this._equalBlankRuntime},i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.getValue=function(){var t=this.dataColumn.dataIndex;if(t>=0)return this.item.getData(t)},i.prototype.getDisplayText=function(t,e){return i._getDisplayText(t,this.index.item,this.index.dataColumn,this.getValue(),e)},Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),i.prototype.getBlankState=function(){var t=function(t,e){return t instanceof Date&&e instanceof Date?+t==+e:t==e},e=function(t){return u?(c.setItem(t),u.evaluate(c)):t.getData(a.dataIndex)},o=function(i,o,r){if(i>=o&&i<r){var s=e(l),a=i===o?null:h.getItem(i-1),u=i===r-1?null:h.getItem(i+1);if(n=a instanceof So&&t(s,e(a))?O.BODY:O.HEAD,!(u instanceof So&&t(s,e(u))))switch(n){case O.BODY:n=O.TAIL;break;case O.HEAD:n=O.NONE}}return n},n=O.NONE,r=this.index,s=r.layout,a=this.dataColumn,l=this.item,u=s.equalBlankNode,c=u&&i.equalBlankRuntime(),h=s.grid,p=h.fixedOptions.rowCount,d=h.layoutManager.topIndex,f=h.fixedOptions.blankRows;if(s&&s.blanked&&s.dataRoot&&l.dataRow>=0){var g=r.itemIndex;return u&&c&&c.setDataArguments(l.dataSource,this,l),n=g<p&&f?o(g,0,p):o(g,p+d,h.itemCount)}return n},i.prototype.isValueChanged=function(){var t=this.dataColumn.dataIndex;return t>=0&&this.item.isChanged(t)},i}(Jo),tn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.setItem=function(t){this.$_item=t},Object.defineProperty(e.prototype,"item",{get:function(){return this.$_item},enumerable:!1,configurable:!0}),e}(Zo),en=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e||"literalCell")||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.getDisplayText=function(t){return this.text},e}(Jo),on=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e||"seriesCell")||this}return n(e,t),e.getText=function(t,e){return void 0===e&&(e=","),t?t.join(e):""},e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getDisplayText=function(t,e){var i=this.value;return i?i.join(e||","):""},Object.defineProperty(e.prototype,"getText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var t=this.index.column;if(t instanceof $r){var e=t.fields,i=e?e.length:0;if(i>0){for(var o=this.item,n=new Array(i),r=0;r<i;r++)e[r]>=0&&(n[r]=o.getData(e[r]));return n}}return[]},enumerable:!1,configurable:!0}),e}(Jo),nn=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e||"mergedDataCell")||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getValue=function(){var e=this.index,i=e.item;return i instanceof So?t.prototype.getValue.call(this):(i=(i instanceof Eo?i:i.parent).firstItem).getData(e.dataField)},Object.defineProperty(e.prototype,"text",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e}(Zo),rn=function(t){function e(){var e=t.call(this)||this;return e.minBarWidth=1,e.maxBarWidth=0,e.barWidth=0,e}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRender=function(t,e,i){var o=this._getBarLength();if(!(o<1)){var n=this.barWidth;n<=0&&(n=Math.floor(e.width/o),n=Math.max(this.minBarWidth,n),this.maxBarWidth>0&&(n=Math.min(this.maxBarWidth,n))),o*=n,e.x+=(e.width-o)/2,e.x=Math.floor(e.x),this._drawBars(t,this.barStyle,i,e.x,e.y,n,e.height)}},e}(function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){if(t!=this._value){this._value=t;try{this._error=null,this._parse(t)}catch(t){this._error=t}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){this._doRender(t,e,!1)},e.prototype.renders=function(t,e){this._doRender(t,e,!0)},e}(kt)),sn=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],an=[103,104,105],ln=[251658240,15728640,983040,61440,3840,240,15],un=function(t){function e(){var e=t.call(this)||this;return e.quietZoneWidth=10,e}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._parse=function(t){this._weights=[];var e=t?t.length:0;if(!(e<1)){var i=this.$_detectType(t),o=an[i],n=sn[o],r=o;if(this._weights.push(n),2==i)for(var s=0;s<e;s+=2){var a=t.substr(s,2);o=parseInt(a),o=this.$_convert(i,o),n=sn[o],this._weights.push(n),r+=o*(Math.floor(s/2)+1)}else for(s=0;s<e;s++)o=t.charCodeAt(s),o=this.$_convert(i,o),n=sn[o],this._weights.push(n),r+=o*(s+1);r%=103,this._weights.push(sn[r]),this._weights.push(sn[106])}},e.prototype._getBarLength=function(){return this.quietZoneWidth+11*(this._weights.length-1)+13+this.quietZoneWidth},e.prototype._drawBars=function(t,e,i,o,n,r,s){o+=10*r;for(var a,l=this._weights.length-1,u=0;u<l;u++){a=this._weights[u];for(var c=0;c<6;c++){var h=(a&ln[c+1])>>4*(5-c);h*=r,c%2==0&&(i?t.sbounds(e,o+"",n+"%",h+"",s+"%"):t.bounds(e,o,n,h,s)),o+=h}}for(a=this._weights[l],c=0;c<7;c++)h=(a&ln[c])>>4*(6-c),h*=r,c%2==0&&(i?t.sbounds(e,o+"",n+"%",h+"",s+"%"):t.bounds(e,o,n,h,s)),o+=h},e.prototype.$_convert=function(t,e){switch(t){case 0:if(e>=0&&e<32)return e+64;if(e>=32&&e<96)return e-32;break;case 1:if(e>=32&&e<128)return e-32;break;case 2:if(e>=0&&e<=99)return e}throw new Error("Invalid code128 charactor: "+e)},e.prototype.$_detectType=function(t){return t.length%2==0&&/^\d+$/.test(t)?2:/[a-z]/.test(t)?1:0},e}(rn),cn={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},hn=function(t){function e(){var e=t.call(this)||this;return e._wideWidth=3,e}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._parse=function(t){if(this._codes=[],t){var e=t.length;this._codes.push(cn["*"]);for(var i=0;i<e;i++){var o=t.charAt(i),n=cn[o];if(!n)throw new Error("Invalid Code39 character: "+o);this._codes.push(n)}this._codes.push(cn["*"])}},e.prototype._getBarLength=function(){var t=this._codes.length;return t*(3*this._wideWidth+6)+(t-1)},e.prototype._drawBars=function(t,e,i,o,n,r,s){var a=this._codes.length;if(a>2)for(var l=0;l<a;l++){for(var u=this._codes[l],c=0;c<9;c++){var h="n"==u.charAt(c)?1:this._wideWidth;h*=r,c%2==0&&(i?t.sbounds(e,o+"",n+"%",h+"",s+"%"):t.bounds(e,o,n,h,s)),o+=h}l<a-1&&(o+=r)}},e}(rn),pn="http://www.w3.org/2000/svg",dn=0,fn=function(t){function e(e,i){var o=t.call(this)||this;return o._transforms=[],o._defs=e,o._element=i,o}return n(e,t),e.prototype._doDispose=function(){this.clear(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"doc",{get:function(){return wt(this._element)||document},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){return this._defs=t,this._element=e,this},e.prototype.clear=function(){this._defs=null,this._element=null,this._transforms=null},e.prototype.save=function(){this._transforms.push(this._trans),this._trans=""},e.prototype.restore=function(){this._trans=this._transforms.pop()},e.prototype.translate=function(t,e){this._trans+="translate("+t+","+e+")"},e.prototype.rotate=function(t){this._trans+="rotate("+180*t/Math.PI+")"},e.prototype.rotateAt=function(t,e,i){this._trans+="rotate("+180*t/Math.PI+","+e+",)"},e.prototype.scale=function(t,e){this._trans+="scale("+t+","+e+")"},e.prototype.clipRect=function(t){this.clip(t.x,t.y,t.width,t.height)},e.prototype.clip=function(t,e,i,o){var n=this.doc,r=dn++,s=n.createElementNS(pn,"clipPath");s.setAttributeNS(null,"id","clip"+r);var a=n.createElementNS(pn,"rect");a.x.baseVal.value=t,a.y.baseVal.value=e,a.width.baseVal.value=i,a.height.baseVal.value=o,s.appendChild(a),this._defs.appendChild(s)},e.prototype.sline=function(t,e,i,o,n){var r=this.doc.createElementNS(pn,"line");this._element.appendChild(r),r.x1.baseVal.valueAsString=e,r.y1.baseVal.valueAsString=i,r.x2.baseVal.valueAsString=o,r.y2.baseVal.valueAsString=n,t&&r.setAttribute("class",t)},e.prototype.polygon=function(t,e){if(!(null==e||e.length<4)){var i=this.doc.createElementNS(pn,"polygon");this._element.appendChild(i);var o=[];o.push(e[0]+","+e[1]);for(var n=2;n<e.length;n+=2)o.push(e[n]+","+e[n+1]);this._trans&&i.setAttributeNS(null,"transform",this._trans),i.setAttributeNS(null,"points",o.join(" ")),t&&i.setAttribute("class",t)}},e.prototype.bounds=function(t,e,i,o,n){var r=this.doc.createElementNS(pn,"rect");this._element.appendChild(r),r.x.baseVal.value=e,r.y.baseVal.value=n<0?i+n:i,r.width.baseVal.value=o,r.height.baseVal.value=Math.abs(n),t&&r.setAttribute("class",t)},e.prototype.pbounds=function(t,e,i,o,n){var r=this.doc.createElementNS(pn,"rect");this._element.appendChild(r),r.x.baseVal.valueAsString=e+"%",r.y.baseVal.valueAsString=(n<0?i+n:i)+"%",r.width.baseVal.valueAsString=o+"%",r.height.baseVal.valueAsString=Math.abs(n)+"%",t&&r.setAttribute("class",t)},e.prototype.sbounds=function(t,e,i,o,n){var r=this.doc.createElementNS(pn,"rect");this._element.appendChild(r),r.x.baseVal.valueAsString=e,r.y.baseVal.valueAsString=i,r.width.baseVal.valueAsString=o,r.height.baseVal.valueAsString=n,t&&r.setAttribute("class",t)},e.prototype.scircle=function(t,e,i,o){var n=this.doc.createElementNS(pn,"circle");this._element.appendChild(n),n.cx.baseVal.valueAsString=e,n.cy.baseVal.valueAsString=i,n.r.baseVal.valueAsString=o,t&&n.setAttribute("class",t)},e.prototype.ellipse=function(t,e,i,o,n){var r=this.doc.createElementNS(pn,"ellipse"),s=o/2,a=n/2;this._element.appendChild(r),r.cx.baseVal.value=e+s,r.cy.baseVal.value=i+a,r.rx.baseVal.value=s,r.ry.baseVal.value=a,t&&r.setAttribute("class",t)},e}(kt),gn=function(t){function e(e){var i=t.call(this)||this,o=wt(e),n=i._element=o.createElementNS(pn,"svg"),r=n.style,s=i._defs=o.createElementNS(pn,"defs");return n.appendChild(s),r.background="",r.border="none",r.pointerEvents="none",e.appendChild(n),i._renderer=new fn(i._defs),i}return n(e,t),e.createSVG=function(t){var e=wt(t),i=e.createElementNS(pn,"svg"),o=i.style,n=e.createElementNS(pn,"defs");i.appendChild(n),o.background="",o.border="none",o.pointerEvents="none";var r=e.createElementNS(pn,"g");return i.appendChild(r),t.appendChild(i),i},e.renderSVG=function(t,e,i){var o=e.lastElementChild,n=this._renderer.init(e.firstChild,o);o.textContent="",i.call(t,e,n,e.clientWidth,e.clientHeight),n.clear()},e.renderSVG2=function(t,e,i){var o=wt(e);e.childElementCount>1&&e.removeChild(e.lastElementChild);var n=o.createElementNS(pn,"g"),r=this._renderer.init(e.firstChild,n);e.appendChild(n),i.call(t,e,r),r.clear()},e.prototype._doDispose=function(){this._renderer=this._renderer.dispose(),this._element.parentElement&&this._element.parentElement.removeChild(this._element),this._element=this._defs=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),e.prototype.render=function(t){this._clear(),t?t.call(this,this._renderer,this._element.clientWidth,this._element.clientHeight):this._doRender(this._renderer,this._element.clientWidth,this._element.clientHeight)},e.prototype._clear=function(){this._element.childElementCount>1&&this._element.removeChild(this._element.lastElementChild);var t=wt(this._element).createElementNS(pn,"g");this._element.appendChild(t),this._renderer._element=t},e.prototype._doRender=function(t,e,i){},e._renderer=new fn,e}(kt),yn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.draw=function(t,e,i){this._doDraw(t,e,i)},e}(kt),_n={rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]},mn={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},vn=function(t){function e(e){var i=t.call(this)||this;return i._shape=e,i}return n(e,t),Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},set:function(t){this._shape=t?"inverted_triangle"===t?e.INVERTED_TRIANLGE:t.toLowerCase():null},enumerable:!1,configurable:!0}),e.prototype._doDraw=function(t,e,i){var o=this._shape;if(_n.hasOwnProperty(o)){if(u=_n[o]){for(var n=0,r=0,s=0,a=(u=u.slice()).length/2;s<a;s++)u[2*s]=n+u[2*s]*e,u[2*s+1]=r+u[2*s+1]*i;u.push(u[0],u[1]),t.polygon(null,u)}}else if(mn.hasOwnProperty(o)){var l=mn[o];if(l){var u;for(n=0,r=0,s=0,a=(u=l[0].slice()).length/2;s<a;s++)u[2*s]=n+u[2*s]*e,u[2*s+1]=r+u[2*s+1]*i;for(u.push(u[0],u[1]),t.polygon(null,u),s=0,a=(u=(u=l[1]).slice()).length/2;s<a;s++)u[2*s]=n+u[2*s]*e,u[2*s+1]=r+u[2*s+1]*i;u.push(u[0],u[1]),t.polygon(null,u)}}},e.RECTANGLE="rectangle",e.TRIANLGE="triangle",e.INVERTED_TRIANLGE="itriangle",e.DIAMOND="diamond",e.UP_ARROW="uparrow",e.DOWN_ARROW="downarrow",e.LEFT_ARROW="leftarrow",e.RIGHT_ARROW="rightarrow",e.PLUS="plus",e.MINUS="minus",e.EQUAL="equal",e.STAR="star",e}(yn),bn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._doDraw=function(t,e,i){t.ellipse(null,0,0,e,i)},e}(yn),Cn=function(){function e(){}return e.layoutFlex=function(e,i,o,n,r,s){var a=s===t.IconLocation.CENTER,l=xt.included(s,t.IconLocation.LEFT,t.IconLocation.LEFT_EDGE),u=xt.included(s,t.IconLocation.RIGHT,t.IconLocation.RIGHT_EDGE),c=xt.included(s,t.IconLocation.TOP,t.IconLocation.TOP_EDGE),h=xt.included(s,t.IconLocation.BOTTOM,t.IconLocation.BOTTOM_EDGE),p=xt.included(s,t.IconLocation.LEFT_EDGE,t.IconLocation.RIGHT_EDGE,t.IconLocation.TOP_EDGE,t.IconLocation.BOTTOM_EDGE),d=e.style,f=a||l||u?"row":"column";f+=u||h?"-reverse":"",d.flexDirection=f,d.justifyContent=p?"start":"center",d.alignItems="center",(d=i.style).paddingTop=c&&p?r+"px":"",d.paddingBottom=h&&p?r+"px":"",(d=o.style).display=a?"none":"",d.paddingLeft=l?n+"px":"",d.paddingRight=u?n+"px":"",d.paddingTop=c?n+"px":"",d.paddingBottom=h?n+"px":"",d.flexGrow=p?"1":""},e.clearFlex=function(t){var e=t.style;e.removeProperty("display"),e.removeProperty("flex-direction"),e.removeProperty("justify-content"),e.removeProperty("align-items"),e.removeProperty("flex-grow")},e}(),wn=function(){this.commit=!0,this.value=void 0},Sn=function(t){function e(){var e=t.call(this)||this;return e._refreshFocusChanged=!1,e._clickOnlyFocusedCell=!0,e._textProp=xt.TextProp,e._inited=!1,e._dirty=!1,e._className="",e._itemClickable=!1,e}return n(e,t),e.getRendererStyle=function(t){var e=t.firstElementChild;if(e){if(e.classList){if(e.classList.length>1)return e.classList[1]}else{var i=e.className&&e.className.split(" ");if(i&&i.length>1)return i[1]}return e.className}},e.prototype._doDispose=function(){this._dom=null,this._index=null,t.prototype._doDispose.call(this)},e.prototype.clearAndDispose=function(){return this.clearContent(),this.dispose()},e.prototype.initContent=function(t,e,i){this._inited?this._index.assign(t):(this._dom=e,this._index=t.clone(),e.className=this._className=i,e&&(e[xt.TextProp]=""),this._doInitContent(e),this._inited=!0)},e.prototype.initFormContent=function(t,e){this._inited||(this._dom=t,t.className=this._className=e,this._doInitContent(t),this._inited=!0)},e.prototype.clearContent=function(){this._inited?(this._dom.className=this._className="",this._inited=!1):this._dom[this._textProp]="",this._doClearContent(this._dom)},e.prototype.checkClassName=function(t){return t!=this._className},e.prototype.initOptions=function(){this._doInitOptions()},Object.defineProperty(e.prototype,"grid",{get:function(){return this._index&&this._index.grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return"rg-renderer"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ariaLabelCallback",{get:function(){return this._ariaLabelCallback},set:function(t){this._ariaLabelCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshFocusChanged",{get:function(){return this._refreshFocusChanged},set:function(t){this._refreshFocusChanged=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickOnlyFocusedCell",{get:function(){return this._clickOnlyFocusedCell},set:function(t){this._clickOnlyFocusedCell=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemClickable",{get:function(){return this._itemClickable},enumerable:!1,configurable:!0}),e.prototype.renderCell=function(t,e,i){if(t.accessibility){var o=this._ariaLabelCallback||t.body.ariaLabelCallback,n=o&&o.call(this,t.handler,e);n?i.cell.setAttribute("aria-label",n):i.cell.removeAttribute("aria-label")}this._doRenderCell(t,e,i,i.width-i.errorWidth-i.buttonWidth-i.editWidth-1,i.height-1)},e.prototype.getTooltip=function(t,e){var i=e.grid,o=i.body,n=e.column,r=o.getCellAt(t.item,n,!1),s=r&&this._makeText(i,r,t);return s||void 0},e.prototype.canShowInnerFocus=function(){return!1},e.prototype.canEdit=function(){return!1},e.prototype.canEditClickAt=function(t){return!1},e.prototype.preventDefaultEditClick=function(t){t.preventDefault()},e.prototype.editClick=function(t,e){var i=new wn;if(this._doEditClick(t,e,i))return i},e.prototype._doEditClick=function(t,e,i){return!1},e.prototype.preventDefaultClick=function(t){t.preventDefault()},e.prototype.canClick=function(t){return!1},e.prototype.canClickSpaceKey=function(t){return!1},e.prototype.click=function(t,e,i){return this._doClick(t,e,i)},e.prototype.itemClick=function(){this._doItemClick()},e.prototype._doItemClick=function(){},e.prototype._doClick=function(t,e,i){},e.prototype.canEditKey=function(t){return!1},e.prototype.editKey=function(t,e){var i=new wn;if(this._doEditKey(t,e,i))return i},e.prototype._doEditKey=function(t,e,i){return!1},e.prototype.moveClickElement=function(t,e){},e.prototype._doInitContent=function(t){},e.prototype._doClearContent=function(t){t&&(t[this._textProp]="")},e.prototype._doRenderCell=function(t,e,i,o,n){},e.prototype._changed=function(){this._dirty=!0},e.prototype._getValue=function(t,e,i){var o=e.item.dataRow;if(o>=0){var n=t.dataSource.getFieldIndex(i);if(n>=0)return t.dataSource.getValue(o,n)}},e.prototype._makeText=function(t,e,i){return e.getDisplayText(t,i)||e.dataColumn.placeHolder||""},e.prototype._clearHeight=function(){this._dom.style.height=""},e.prototype._setHeight=function(t){this._dom.style.height=t>=0?t+"px":""},e.prototype._isEmpty=function(t){return null==t||""==t||"number"==typeof t&&isNaN(t)},e.prototype._doInitOptions=function(){},e}(kt),En=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),e.prototype._doRenderCell=function(t,e,i,o,n){if(e instanceof Jo)if(e.index.itemIndex!==t.layoutManager.topIndex)switch(e.getBlankState()){case O.BODY:case O.TAIL:this.$_setText(e.dataColumn.equalBlankText);break;default:this.$_setText(this._makeText(t,e,i))}else this.$_setText(this._makeText(t,e,i))},e.prototype.$_setText=function(t){this._dom[this._textProp]=t||""},e.TYPE="text",e.Default=new e,e}(Sn);t.BarOrigin=void 0,(Bo=t.BarOrigin||(t.BarOrigin={})).DEFAULT="default",Bo.LEFT="left",Bo.RIGHT="right",Bo.TOP="top",Bo.BOTTOM="bottom";var xn,On=function(e){function i(){var o=e.call(this)||this;return o._barStyle=i.BAR_STYLE,o._rightBarStyle=i.BAR_RIGHT_STYLE,o._topBarStyle=i.BAR_TOP_STYLE,o._bottomBarStyle=i.BAR_BOTTOM_STYLE,o._minimum=0,o._maximum=100,o._barWidth="80%",o._showLabel=!0,o._origin=t.BarOrigin.LEFT,o._absoluteValue=!1,o._percentShapeWidth=80,o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightBarStyle",{get:function(){return this._rightBarStyle},set:function(t){t!=this._rightBarStyle&&(this._rightBarStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topBarStyle",{get:function(){return this._topBarStyle},set:function(t){t!=this._topBarStyle&&(this._topBarStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottomBarStyle",{get:function(){return this._bottomBarStyle},set:function(t){t!=this._bottomBarStyle&&(this._bottomBarStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showLabel",{get:function(){return this._showLabel},set:function(t){t!=this._showLabel&&(this._showLabel=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){t!=this._barWidth&&(this._barWidth=t,"string"==typeof t&&"%"==t.charAt(t.length-1)?this._percentShapeWidth=parseFloat(t.substring(0,t.length-1)):this._percentShapeWidth=NaN,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(t){var e,i,o=wt(t);t[this._textProp]="",(e=this._div=o.createElement("div")).style.position="relative",t.appendChild(e);var n=(i=this._span=o.createElement("span")).style;n.display="inline-block",n.position="absolute",n.top="50%",n.right="50%",n.msTransform=i.style.transform="translate(50%, -50%)",t.appendChild(i)},i.prototype._doRenderCell=function(e,o,n,r,s){var a=this._div,l=a.style,u=this._absoluteValue?Math.abs(o.value):o.value,c=Math.max(0,Math.min(1,(u-this._minimum)/(this._maximum-this._minimum)));switch(isNaN(c)&&(c=0),this._origin){case t.BarOrigin.RIGHT:this.$_renderBar(t.BarOrigin.RIGHT,l,c),a.className=this.rightBarStyle||i.BAR_RIGHT_STYLE;break;case t.BarOrigin.TOP:this.$_renderBar(t.BarOrigin.TOP,l,c),a.className=this.topBarStyle||i.BAR_TOP_STYLE;break;case t.BarOrigin.BOTTOM:this.$_renderBar(t.BarOrigin.BOTTOM,l,c),a.className=this.bottomBarStyle||i.BAR_BOTTOM_STYLE;break;case t.BarOrigin.LEFT:default:this.$_renderBar(t.BarOrigin.LEFT,l,c),a.className=this.barStyle||i.BAR_STYLE}this.$_setText(this._showLabel?this._makeText(e,o,n):"")},i.prototype.$_renderBar=function(e,i,o){if(i.removeProperty("transform"),i.removeProperty("ms-transform"),e===t.BarOrigin.LEFT||e===t.BarOrigin.RIGHT)if(i.left=e===t.BarOrigin.LEFT?"0px":100*(1-o)+"%",i.width=100*o+"%",isNaN(this._percentShapeWidth)){var n=this._barWidth;i.top="50%",i.msTransform=i.transform="translate(0%,-50%)",i.height=n+"px"}else i.top=(100-this._percentShapeWidth)/2+"%",i.height=this._percentShapeWidth+"%";else if(i.top=e===t.BarOrigin.TOP?"0px":100*(1-o)+"%",i.height=100*o+"%",isNaN(this._percentShapeWidth)){var r=this._barWidth;i.left="50%",i.msTransform=i.transform="translate(-50%,0%)",i.width=r+"px"}else i.left=(100-this._percentShapeWidth)/2+"%",i.width=this._percentShapeWidth+"%"},i.prototype.$_setText=function(t){this._span[this._textProp]=t||""},i.TYPE="bar",i.STYLE="rg-bar-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BAR_STYLE="rg-bar-renderer-bar",i.BAR_RIGHT_STYLE="rg-bar-renderer-bar-right",i.BAR_TOP_STYLE="rg-bar-renderer-bar-top",i.BAR_BOTTOM_STYLE="rg-bar-renderer-bar-bottom",i}(Sn),Rn=function(t){function e(){var e=t.call(this)||this;return e._spaceKey=!1,e._enterKey=!1,e._itemClickable=!0,e}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"imageMap",{get:function(){return this._imageMap},set:function(t){t!==this._imageMap&&(this._imageMap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageCallback",{get:function(){return this._imageCallback},set:function(t){t!==this._imageCallback&&(this._imageCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageField",{get:function(){return this._imageField},set:function(t){t!=this._imageField&&(this._imageField=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imageHeight},set:function(t){t!=this._imageHeight&&(this._imageHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._img=wt(t).createElement("img");e.style.verticalAlign="middle",t.appendChild(e)},e.prototype._doRenderCell=function(t,e,i,o,n){var r=this._img,s=this.$_getImageUrl(t,e);if(s){r.src=s;var a=this.$_getTitle(t,e);r.alt=a||"",isNaN(this._imageHeight)?r.style.height="":r.style.height=this._imageHeight+"px"}else r.removeAttribute("src"),r.alt=""},e.prototype.canClick=function(t){return t.target===this._img},e.prototype._doClick=function(t,e,i){if(e.target===this._img||"keydown"===e.type)return{type:this.type,value:t.value}},e.prototype._doItemClick=function(){this._img.click()},e.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},e.prototype._doInitOptions=function(){this._imageMap=this._imageCallback=this._imageField=this._titleField=this._titleCallback=this._imageHeight=void 0},e.prototype.$_getImageUrl=function(t,e){var i="",o=this._imageCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._imageMap&&(i=this._imageMap[e.value]),!i&&this._imageField&&(i=this._getValue(t,e,this._imageField)),i||""},e.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},e.TYPE="image",e.STYLE="rg-image-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Sn),In=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=t.call(this)||this;return o._itemGap=4,o._verticalEdgePad=2,o._textVisible=!0,o._reversed=!1,o._splitted=!1,o._imgFixed=!1,o._imgMiddle=!1,o._imgCenter=!1,o._imgHeight=16,o._imgWidth=16,o._imgLeft=0,o._imgRight=0,o._imgTop=0,o._imgBottom=0,o._spanVis=void 0,o._spanPadRight=0,o._spanPadLeft=0,o._spanCenter=!1,o._spanText="",o._imgWidth=e,o._imgHeight=i,o}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalEdgePad",{get:function(){return this._verticalEdgePad},set:function(t){t!=this._verticalEdgePad&&(this._verticalEdgePad=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textVisible",{get:function(){return this._textVisible},set:function(t){t!=this._textVisible&&(this._textVisible=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype._doClearContent=function(e){t.prototype._doClearContent.call(this,e),this._reset()},e.prototype._reset=function(){this._oldLocation=void 0,this._imgHeight=this._imgWidth=this._imgLeft=this._imgRight=this._imgTop=this._imgBottom=this._spanPadRight=this._spanPadLeft=NaN,this._imgFixed=this._imgMiddle=this._imgCenter=this._spanVis=this._spanCenter=this._spanText=void 0,this._dom&&(this._dom[xt.TextProp]="")},e.prototype.$_setImgFixed=function(t,e,i){(e!=this._imgFixed||i)&&(this._imgFixed=e,t.style.position=e?"absolute":"")},e.prototype.$_setImgMiddle=function(t,e,i){(e!=this._imgMiddle||i)&&(this._imgMiddle=e,t.style.verticalAlign=e?"middle":"")},e.prototype.$_setImgCenter=function(t,e,i){(e!=this._imgCenter||i)&&(this._imgCenter=e,t.style.textAlign=e?"center":"")},e.prototype.$_setImgWidth=function(t,e,i){((e=isNaN(e)?0:e)!=this._imgWidth||i)&&(this._imgWidth=e,t.style.width=e>0?e+"px":"")},e.prototype.$_setImgHeight=function(t,e,i){((e=isNaN(e)?0:e)!=this._imgHeight||i)&&(this._imgHeight=e,t.style.height=e>0?e+"px":"")},e.prototype.$_setImgBounds=function(t,e,i,o,n,r){(e!=this._imgTop||r)&&(this._imgTop=e,t.style.top=e>0?e+"px":""),(i!=this._imgLeft||r)&&(this._imgLeft=i,t.style.left=i>0?i+"px":""),(o!=this._imgBottom||r)&&(this._imgBottom=o,t.style.bottom=o>0?o+"px":""),(n!=this._imgRight||r)&&(this._imgRight=n,t.style.right=n>0?n+"px":"")},e.prototype.$_clearImgBounds=function(t,e){(this._imgTop>0||e)&&(this._imgTop=0,t.style.top=""),(this._imgLeft>0||e)&&(this._imgLeft=0,t.style.left=""),(this._imgBottom>0||e)&&(this._imgBottom=0,t.style.bottom=""),(this._imgRight>0||e)&&(this._imgRight=0,t.style.right="")},e.prototype.$_setSpanVis=function(t){t!=this._spanVis&&(this._spanVis=t,this._span.style.display=t?"":"none",this.grid.accessibility&&(t?this._span.removeAttribute("aria-hidden"):this._span.setAttribute("aria-hidden","true")))},e.prototype.$_setSpanPadLeft=function(t){t!=this._spanPadLeft&&(this._spanPadLeft=t,this._span.style.paddingLeft=t>0?t+"px":"")},e.prototype.$_setSpanPadRight=function(t){t!=this._spanPadRight&&(this._spanPadRight=t,this._span.style.paddingRight=t>0?t+"px":"")},e.prototype.$_setSpanCenter=function(t,e){if(void 0===e&&(e=0),t!=this._spanCenter){var i=this._span.style;this._spanCenter=t,t?(i.left="50%",i.top=50+e+"%",i.transform="translate(-50%, -50%)",i.position="absolute"):(i.left="",i.top="",i.transform="",i.position="")}},e.prototype.$_setSpanText=function(t){if(t!=this._spanText){this._spanText=t;var e=this._textVisible?this._spanText:void 0;this._span[this._textProp]=e}},e.prototype.$_layoutLeft=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(this._itemGap),this.$_setSpanPadRight(0)},e.prototype.$_layoutRight=function(t,e,i,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(4)},e.prototype.$_layoutTop=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!1,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutBottom=function(t,e,i,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!1,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutLeftEdge=function(t,e,i,o,n){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,n),this.$_setImgMiddle(e,!0,n),this.$_setImgCenter(e,!1,n),this.$_setImgBounds(e,0,2,0,0,n),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0),i.style.marginLeft=isNaN(o)?"":o+"px"},e.prototype.$_layoutRightEdge=function(t,e,i,o,n){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,n),this.$_setImgMiddle(e,!0,n),this.$_setImgCenter(e,!1,n),this.$_setImgBounds(e,0,0,0,2,n),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(o)},e.prototype.$_layoutTopEdge=function(t,e,i,o,n,r,s,a){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!1,a),this.$_setImgBounds(e,2,(o-r)/2,0,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,s*((n-s)/n)),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutBottomEdge=function(t,e,i,o,n,r,s,a){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!0,a),this.$_setImgBounds(e,0,(o-r)/2,2,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,(n-s)/n*-s),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutCenter=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!0,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!1),this.$_setSpanCenter(!0),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e}(Sn),Tn=function(e){function i(){var i=e.call(this)||this;return i._iconWidth=NaN,i._iconHeight=NaN,i._iconLocation=t.IconLocation.LEFT,i._spaceKey=!1,i._enterKey=!1,i._imgSrc="",i._itemClickable=!0,i}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"iconMap",{get:function(){return this._iconMap},set:function(t){t!==this._iconMap&&(this._iconMap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!==this._iconCallback&&(this._iconCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){this._titleCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconUrl",{get:function(){return this._iconUrl},set:function(t){this._iconUrl=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconField",{get:function(){return this._iconField},set:function(t){t!=this._iconField&&(this._iconField=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconLocation",{get:function(){return this._iconLocation},set:function(t){t!=this._iconLocation&&(this._oldLocation=this._iconLocation,this._iconLocation=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconWidth",{get:function(){return this._iconWidth},set:function(t){t!=this._iconWidth&&(this._iconWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(t){t!=this._iconHeight&&(this._iconHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME+" rg-icon-"+this.$_getStyleName().toLowerCase()},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(t){var e=wt(t),i=this._img=e.createElement("img");i.alt="",t.appendChild(i);var o=this._span=e.createElement("span");t.appendChild(o),this._br=e.createElement("br")},i.prototype._reset=function(){e.prototype._reset.call(this),this._imgSrc=this._splitted=this._reversed=void 0},i.prototype._doInitOptions=function(){this._iconMap=this._iconCallback=this._titleCallback=this._iconUrl=this._iconField=void 0,this._iconWidth=this._iconHeight=NaN,this._iconLocation=t.IconLocation.LEFT},i.prototype._doRenderCell=function(e,i,o,n,r){var s=this._img,a=this._span;if(this.$_setImgWidth(s,this._iconWidth,!1),this.$_setImgHeight(s,this._iconHeight,!1),this.$_setImgSrc(this.$_getIconUrl(e,i),this.$_getTitle(e,i)),this.$_setSpanText(this._makeText(e,i,o)),this._oldLocation!=this._iconLocation){switch(this._iconLocation){case t.IconLocation.LEFT:this.$_layoutLeft(this._dom,s,a,!1);break;case t.IconLocation.RIGHT:this.$_layoutRight(this._dom,s,a,!1);break;case t.IconLocation.TOP:this.$_layoutTop(this._dom,s,a,!1);break;case t.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,s,a,!1);break;case t.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,s,a,this._iconWidth,!1);break;case t.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,s,a,this._iconWidth,!1);break;case t.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,s,a,n,r,this._iconWidth,this._iconHeight,!1);break;case t.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,s,a,n,r,this._iconWidth,this._iconHeight,!1);break;case t.IconLocation.CENTER:this.$_layoutCenter(this._dom,s,a,!1);break;default:this.$_layoutLeft(this._dom,s,a,!1)}this._oldLocation=this._iconLocation}this._iconLocation==t.IconLocation.TOP_EDGE||this._iconLocation==t.IconLocation.BOTTOM_EDGE?this._setHeight(r):this._clearHeight()},i.prototype.canClick=function(t){return t.target===this._img},i.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},i.prototype._doClick=function(t,e,i){var o={};if(e.target===this._img||"keydown"===e.type)return o.type=this.type,o.value=t.value,o},i.prototype._doItemClick=function(){this._img.click()},i.prototype.$_getIconUrl=function(t,e){var i=void 0,o=this._iconCallback;return o&&(i=o.call(this,t.handler,e)),void 0===i&&this._iconMap&&(i=this._iconMap[e.value]),void 0===i&&this._iconField&&(i=this._getValue(t,e,this._iconField)),void 0===i&&(i=this._iconUrl),i||""},i.prototype.$_getTitle=function(t,e){var i,o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),i||""},i.prototype.$_setImgSrc=function(t,e){t==this._imgSrc&&e===this._img.alt||(this._imgSrc=t,t?(this._img.src=t,this._img.alt=e):(this._img.removeAttribute("src"),this._img.alt=""))},i.prototype.$_getStyleName=function(){return String(this._iconLocation)||String(t.IconLocation.LEFT)},i.prototype.preventDefaultClick=function(t){t.target===this._img&&(t.preventDefault(),t.stopImmediatePropagation())},i.TYPE="icon",i.STYLE="rg-icon-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(In),Pn=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return n(i,e),i.prototype._doInitContent=function(t){e.prototype._doInitContent.call(this,t),t.style.setProperty("display","flex","important")},i.prototype._doClearContent=function(t){e.prototype._doClearContent.call(this,t),Cn.clearFlex(t)},i.prototype.$_layoutLeft=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT)},i.prototype.$_layoutRight=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP)},i.prototype.$_layoutBottom=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.CENTER)},i}(Tn),Dn=function(e){function i(){var o=e.call(this,16,16)||this;return o._strictValue=!1,o._threeStates=!1,o._checkLocation=t.IconLocation.CENTER,o._useImages=!1,o._checkedStyle=i.CHECKED_STYLE,o._uncheckedStyle=i.UNCHECKED_STYLE,o._intermediateStyle=i.INTERMEDIATE_STYLE,o._editable=!0,o._spaceKey=!0,o._showInnerFocus=!1,o._oldUsed=!1,o._useChanged=!1,o._values={},o.refreshFocusChanged=!0,o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"getCheckedCallback",{get:function(){return this._getCheckedCallback},set:function(t){t!==this._getCheckedCallback&&(this._getCheckedCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"setCheckedCallback",{get:function(){return this._setCheckedCallback},set:function(t){t!==this._setCheckedCallback&&(this._setCheckedCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trueValues",{get:function(){return this._trueValues},set:function(t){t!==this._trueValues&&(this._trueValues=t,this.$_resetValues(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"falseValues",{get:function(){return this._falseValues},set:function(t){t!==this._falseValues&&(this._falseValues=t,this.$_resetValues(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strictValue",{get:function(){return this._strictValue},set:function(t){t!=this._strictValue&&(this._strictValue=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"threeStates",{get:function(){return this._threeStates},set:function(t){t!=this._threeStates&&(this._threeStates=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useImages",{get:function(){return this._useImages},set:function(t){t!=this._useImages&&(this._useImages=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(t){this._editable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){this._showInnerFocus=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clickOnlyFocusedCell",{get:function(){return!this.grid.editOptions.commitByCell||this._clickOnlyFocusedCell},set:function(t){this._clickOnlyFocusedCell=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnlySetDisabled",{get:function(){return this._readOnlySetDisabled},set:function(t){t!=this._readOnlySetDisabled&&(this._readOnlySetDisabled=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype.canEdit=function(){var t=this.grid.editOptions;if(t.columnEditableFirst){if(!(null!=this.editable?this.editable:t.editable))return!1}else if(!t.editable||!this.editable)return!1;return this._editable},i.prototype.canShowInnerFocus=function(){return this._showInnerFocus&&this._editable},i.prototype._doInitContent=function(t){var e=wt(t),i=this._check=e.createElement("input");i.type="checkbox",i.tabIndex=-1,i.style.display="inline-block";var o=this._span=e.createElement("span");t.appendChild(i),t.appendChild(o);var n=this._image=e.createElement("span");n.className=this._checkedStyle,n.style.display="inline-block",this._br=e.createElement("br")},i.prototype._reset=function(){e.prototype._reset.call(this),this._splitted=this._reversed=void 0,this._oldUsed=!1},i.prototype._doRenderCell=function(e,o,n,r,s){var a=this._check,l=this._image,u=this._span,c=this._dom,h=a;this._imgWidth=e.container.measureCheckWidth(),this._imgHeight=e.container.measureCheckHeight();var p=this.$_getChecked(e,o.value,o.index,this._getCheckedCallback),d=a.id="".concat(i.FOR_ID,"-").concat(o.dataColumn.$_hash,"-").concat(o.item.index);if(u.setAttribute("for",d),a.checked=p,a.indeterminate=this._threeStates&&void 0===p,a.disabled=this._readOnlySetDisabled&&!this.canEdit(),this._useChanged=this._useImages!==this._oldUsed,this._useChanged&&(this._oldUsed?(c.removeChild(l),this._check.style.display="inline-block"):(c.insertBefore(l,this._check),this._check.style.display="none")),this._oldUsed=this._useImages,this._useImages&&(l.className=p?this._checkedStyle:void 0===p&&this.threeStates?this._intermediateStyle:this._uncheckedStyle,this._readOnlySetDisabled&&!this.canEdit()&&(l.className+=" disabled"),h=l),n.merged&&this.canEdit()&&!xt.included(this.checkLocation,t.IconLocation.TOP_EDGE,t.IconLocation.BOTTOM_EDGE)&&n.focused||c.style.removeProperty("top"),this.$_setSpanText(this._makeText(e,o,n)),this._oldLocation!=this._checkLocation){switch(this._checkLocation){case t.IconLocation.LEFT:this.$_layoutLeft(c,h,u);break;case t.IconLocation.RIGHT:this.$_layoutRight(c,h,u);break;case t.IconLocation.TOP:this.$_layoutTop(c,h,u);break;case t.IconLocation.BOTTOM:this.$_layoutBottom(c,h,u);break;case t.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(c,h,u);break;case t.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(c,h,u);break;case t.IconLocation.TOP_EDGE:this.$_layoutTopEdge(c,h,u,r,s);break;case t.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(c,h,u,r,s);break;case t.IconLocation.CENTER:this.$_layoutCenter(c,h,u);break;default:this.$_layoutLeft(c,h,u)}this._oldLocation=this._checkLocation}this._checkLocation==t.IconLocation.TOP_EDGE||this._checkLocation==t.IconLocation.BOTTOM_EDGE?this._setHeight(s):this._clearHeight()},i.prototype.canEditClickAt=function(t){return this.preventDefaultEditClick(t),t.target===this._check||t.target===this._image},i.prototype.preventDefaultEditClick=function(t){t.target===this._check&&t.preventDefault()},i.prototype._doEditClick=function(t,e,i){if(e.target===this._check||e.target===this._image)return this.$_edit(t,i),!0},i.prototype.canEditKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},i.prototype._doEditKey=function(t,e,i){return this.$_edit(t,i),!0},i.prototype._doItemClick=function(){this._check.click()},i.prototype.moveClickElement=function(e,i){var o=this._dom;i||!this.canEdit()||xt.included(t.IconLocation.TOP_EDGE,t.IconLocation.BOTTOM_EDGE)||(o.style.top=e+"px")},i.prototype.$_resetValues=function(){var t;if(this._values={},this._falseValues)if(t=this._falseValues.split(",")){var e=void 0;this._falseValue=(e=t.length)>0?t[0]:void 0;for(var i=0;i<e;i++)this._values[t[i]]=!1}else this._falseValue=void 0;if(this._trueValues)if(t=this._trueValues.split(","))for(e=void 0,this._trueValue=(e=t.length)>0?t[0]:void 0,i=0;i<e;i++)this._values[t[i]]=!0;else this._trueValue=void 0},i.prototype.$_getChecked=function(e,i,o,n){if(n)return n(e.handler,o.itemIndex,o.dataColumn,i);var r=o.dataColumn;if(r&&r.valueType===t.ValueType.OBJECT){var s=r.getField(),a=r.objectKey||s.objectKey;i=null==i?void 0:i[a]}if("boolean"==typeof i)return i;var l=String(i);return this._values.hasOwnProperty(l)?this._values[l]:this._threeStates&&(this._strictValue||""==i||null==i)?void 0:Boolean(i)},i.prototype.$_edit=function(e,i){var o,n=e.grid,r=e.dataColumn,s=e.value,a=this.$_getChecked(n,e.value,e,this._getCheckedCallback);o=!a&&(void 0===a||!this._threeStates||void 0);var l=this._setCheckedCallback;if(l?o=l(n.handler,e.itemIndex,e.dataColumn,s,o):void 0!==this._trueValue&&o?o=this._trueValue:void 0!==this._falseValue&&!1===o&&(o=this._falseValue),r&&r.valueType===t.ValueType.OBJECT){var u=r.getField(),c=s||{};c[r.objectKey||u.objectKey]=o,i.value=c}else i.value=o},i.prototype.$_layoutLeft=function(t,i,o){var n=this._useImages,r=n?this._image:i;e.prototype.$_layoutLeft.call(this,t,r,o,n)},i.prototype.$_layoutRight=function(t,i,o){var n=this._useImages,r=n?this._image:i;e.prototype.$_layoutRight.call(this,t,r,o,n)},i.prototype.$_layoutTop=function(t,i,o){var n=this._useImages,r=n?this._image:i;e.prototype.$_layoutTop.call(this,t,r,o,n)},i.prototype.$_layoutBottom=function(t,i,o){var n=this._useImages,r=n?this._image:i;e.prototype.$_layoutBottom.call(this,t,r,o,n)},i.prototype.$_layoutLeftEdge=function(t,i,o){var n=this._useImages,r=n?this._image:i;e.prototype.$_layoutLeftEdge.call(this,t,r,o,this._imgWidth,n)},i.prototype.$_layoutRightEdge=function(t,i,o){var n=this._useImages,r=n?this._image:i;e.prototype.$_layoutRightEdge.call(this,t,r,o,this._imgWidth,n)},i.prototype.$_layoutTopEdge=function(t,i,o,n,r){var s=this._useImages,a=s?this._image:i;e.prototype.$_layoutTopEdge.call(this,t,a,o,n,r,this._imgWidth,this._imgHeight,s)},i.prototype.$_layoutBottomEdge=function(t,i,o,n,r){var s=this._useImages,a=s?this._image:i;e.prototype.$_layoutBottomEdge.call(this,t,a,o,n,r,this._imgWidth,this._imgHeight,s)},i.prototype.$_layoutCenter=function(t,i,o){var n=this._useImages,r=n?this._image:i;e.prototype.$_layoutCenter.call(this,t,r,o,n)},i.prototype.$_setImageMiddle=function(t,e,i){(e!=this._imgMiddle||i)&&(this._imgMiddle=e)},i.prototype.$_getStyleName=function(){return String(this._checkLocation)||String(t.IconLocation.LEFT)},i.TYPE="check",i.STYLE="rg-check-renderer",i.FOR_ID="$$-check-cell-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.CHECKED_STYLE="rg-check-renderer-checked",i.UNCHECKED_STYLE="rg-check-renderer-unchecked",i.INTERMEDIATE_STYLE="rg-check-renderer-intermediate",i}(In),kn=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return n(i,e),i.prototype._doInitContent=function(t){e.prototype._doInitContent.call(this,t),t.style.setProperty("display","flex","important")},i.prototype._doClearContent=function(t){e.prototype._doClearContent.call(this,t),Cn.clearFlex(t)},i.prototype.$_layoutLeft=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT)},i.prototype.$_layoutRight=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP)},i.prototype.$_layoutBottom=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(e,i,o,n,r){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(e,i,o,n,r){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.CENTER)},i}(Dn),An=function(t){function e(){var i=t.call(this)||this;return i._buttonStyle=e.BUTTON_STYLE,i._hideWhenEmpty=!0,i._spaceKey=!0,i._enterKey=!1,i._itemClickable=!0,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"buttonStyle",{get:function(){return this._buttonStyle},set:function(t){t!=this._buttonStyle&&(this._buttonStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hideWhenEmpty",{get:function(){return this._hideWhenEmpty},set:function(t){t!=this._hideWhenEmpty&&(this._hideWhenEmpty=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._button=wt(t).createElement("button");e.type="button",e.tabIndex=-1,e.style.display="inline-block",t.appendChild(e)},e.prototype._doRenderCell=function(t,e,i,o,n){var r=this._button;r[this._textProp]=this._makeText(t,e,i),r.setAttribute("class",this._buttonStyle),r.style.visibility=this._hideWhenEmpty&&this._isEmpty(e.value)?"hidden":""},e.prototype.canClick=function(t){return t.target===this._button},e.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},e.prototype._doClick=function(t,e,i){if(e.target===this._button||"keydown"===e.type)return{type:this.type,value:t.value}},e.prototype._doItemClick=function(){this._button.click()},e.TYPE="button",e.STYLE="rg-button-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BUTTON_STYLE="rg-button-renderer-button",e}(Sn),Ln=function(t){function e(){var e=t.call(this)||this;return e._spaceKey=!0,e._enterKey=!1,e._itemClickable=!0,e}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"baseUrl",{get:function(){return this._baseUrl},set:function(t){t!=this._baseUrl&&(this._baseUrl=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linkField",{get:function(){return this._linkField},set:function(t){t!=this._linkField&&(this._linkField=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"urlCallback",{get:function(){return this._urlCallback},set:function(t){t!==this._urlCallback&&(this._urlCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classCallback",{get:function(){return this._classCallback},set:function(t){this._classCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._anchor=wt(t).createElement("a");e.tabIndex=-1,t.appendChild(e)},e.prototype._doInitOptions=function(){this._baseUrl=this._linkField=this._urlCallback=this._titleField=this._titleCallback=this._url=this._classCallback=void 0},e.prototype._doRenderCell=function(t,e,i,o,n){var r=this._anchor;r[this._textProp]=this._makeText(t,e,i),this._url="","#"===this._baseUrl?(r.removeAttribute("target"),r.href="#"):(this._url=this.$_getUrl(t,e),this._url&&(r.target=null==this.target?"_blank":this.target,r.href=this._url));var s=this.$_getTitle(t,e);s?r.title=s:delete r.title;var a=this.$_getStyle(t,e);a?r.className=a:r.removeAttribute("class")},e.prototype.preventDefaultClick=function(t){t.target===this._anchor&&(t.preventDefault(),t.stopImmediatePropagation())},e.prototype.canClick=function(t){return t.target===this._anchor},e.prototype._doClick=function(t,e,i){if(e.target===this._anchor||"keydown"===e.type)return{type:this.type,url:this._url,value:t.value}},e.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},e.prototype._doItemClick=function(){this._anchor.click()},e.prototype.$_getUrl=function(t,e){var i="",o=this._urlCallback;return o&&(i=o.call(this,t.handler,e)),i||(i=this._linkField?this._getValue(t,e,this._linkField):e.value,this._baseUrl&&(i=this._baseUrl+i)),i||""},e.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},e.prototype.$_getStyle=function(t,e){var i="",o=this._classCallback;return o&&(i=o.call(this,t.handler,e)),i||""},e.TYPE="link",e.STYLE="rg-link-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Sn),Mn=function(e){function i(){var o=e.call(this)||this;return o._shapeStyle=i.SHAPE_STYLE,o._shape=vn.STAR,o._shapeWidth=16,o._shapeHeight=16,o._shapeLocation=t.IconLocation.LEFT,o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"shapeStyle",{get:function(){return this._shapeStyle},set:function(t){t!=this._shapeStyle&&(this._shapeStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shape",{get:function(){return this._shape},set:function(t){t!=this._shape&&(this._shape=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeMap",{get:function(){return this._shapeMap},set:function(t){t!==this._shapeMap&&(this._shapeMap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeCallback",{get:function(){return this._shapeCallback},set:function(t){t!=this._shapeCallback&&(this._shapeCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeWidth",{get:function(){return this._shapeWidth},set:function(t){this._shapeWidth!==t&&(this._shapeWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeHeight",{get:function(){return this._shapeHeight},set:function(t){this._shapeHeight!==t&&(this._shapeHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeLocation",{get:function(){return this._shapeLocation},set:function(t){t!=this._shapeLocation&&(this._oldLocation=this._shapeLocation,this._shapeLocation=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(t){var e=wt(t),i=(this._svg=gn.createSVG(t)).style,o=isNaN(this._shapeWidth)||this._shapeWidth<=0?16:this._shapeWidth,n=isNaN(this._shapeHeight)||this._shapeHeight<=0?16:this._shapeHeight;i.display="inline-block",i.width=o+"px",i.height=n+"px";var r=this._span=e.createElement("span");t.appendChild(r),this._br=e.createElement("br")},i.prototype._reset=function(){e.prototype._reset.call(this),this._splitted=this._reversed=void 0},i.prototype._doRenderCell=function(e,i,o,n,r){var s=this._svg,a=this._span;if(this._runShape=this.$_getShape(e,i),s.setAttribute("class",this._shapeStyle),gn.renderSVG(e,s,this.$_render.bind(this)),this.$_setSpanText(this._makeText(e,i,o)),this._oldLocation!=this._shapeLocation){switch(this._shapeLocation){case t.IconLocation.LEFT:this.$_layoutLeft(this._dom,s,a,!1);break;case t.IconLocation.RIGHT:this.$_layoutRight(this._dom,s,a,!1);break;case t.IconLocation.TOP:this.$_layoutTop(this._dom,s,a,!1);break;case t.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,s,a,!1);break;case t.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,s,a,this._shapeWidth,!1);break;case t.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,s,a,this._shapeWidth,!1);break;case t.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,s,a,n,r,this._shapeWidth,this._shapeHeight,!1);break;case t.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,s,a,n,r,this._shapeWidth,this._shapeHeight,!1);break;case t.IconLocation.CENTER:this.$_layoutCenter(this._dom,s,a,!1);break;default:this.$_layoutLeft(this._dom,s,a,!1)}this._oldLocation=this._shapeLocation}this._shapeLocation==t.IconLocation.TOP_EDGE||this._shapeLocation==t.IconLocation.BOTTOM_EDGE?this._setHeight(r):this._clearHeight()},i.prototype.$_getShape=function(t,e){var i=void 0,o=this._shapeCallback;return o&&(i=o.call(this,t.handler,e)),null==i&&this._shapeMap&&(i=this._shapeMap[e.value]),null==i&&(i=this._shape),i},i.prototype.$_getDrawing=function(t){var e;return t&&("ellipse"==(t=t.toLowerCase())?e=this._ellipse?this._ellipse:this._ellipse=new bn:(e=this._polygon?this._polygon:this._polygon=new vn(t),this._polygon.shape=t)),e},i.prototype.$_render=function(t,e,i,o){if(this._runShape){var n=this.$_getDrawing(this._runShape);n&&n.draw(e,i,o)}},i.TYPE="shape",i.STYLE="rg-shape-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.SHAPE_STYLE="rg-shape-renderer-shape",i}(In),Fn=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return n(i,e),i.prototype._doInitContent=function(t){t.style.setProperty("display","flex","important"),e.prototype._doInitContent.call(this,t)},i.prototype._doClearContent=function(t){e.prototype._doClearContent.call(this,t),Cn.clearFlex(t)},i.prototype.$_layoutLeft=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT)},i.prototype.$_layoutRight=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP)},i.prototype.$_layoutBottom=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(e,i,o,n,r){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(e,i,o,n,r){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(e,i,o){Cn.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.CENTER)},i}(Mn),Nn=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._inactiveStyle=e.INACTIVE_STYLE,i._barCount=10,i._minimum=NaN,i._maximum=NaN,i._startRate=50,i._endRate=100,i._absoluteValue=!1,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inactiveStyle",{get:function(){return this._inactiveStyle},set:function(t){t!=this._inactiveStyle&&(this._inactiveStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"barCount",{get:function(){return this._barCount},set:function(t){(t=Math.max(2,t))!=this._barCount&&(this._barCount=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startRate",{get:function(){return this._startRate},set:function(t){!isNaN(t)&&t>=0&&t<=100&&t!==this._startRate&&(this._startRate=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endRate",{get:function(){return this._endRate},set:function(t){!isNaN(t)&&t>=0&&t<=100&&t!==this._endRate&&(this._endRate=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._div=wt(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=gn.createSVG(e)).style;i.position="absolute",i.left="0px",i.width="100%",i.top=(100-Math.max(this._startRate,this._endRate))/2+"%",i.height=Math.max(this._startRate,this._endRate)+"%"},e.prototype._doRenderCell=function(t,e,i,o,n){var r=this._svg;this._value=parseFloat(e.value),r.setAttribute("class",this._barStyle),gn.renderSVG2(t,r,this.$_render.bind(this))},e.prototype.$_render=function(t,e){var i=this.absoluteValue?Math.abs(this._value):this._value;isNaN(this._minimum)||isNaN(this._maximum)||(i=this._barCount*(i-this._minimum)/(this._maximum-this._minimum));for(var o=100/Math.max(this._startRate,this._endRate),n=(100-2*(this._barCount+1))/this._barCount,r=0,s=this._startRate*o,a=(this._endRate-this._startRate)/(this._barCount-1),l=0;l<this._barCount;l++){var u=l<i?null:this._inactiveStyle;e.sbounds(u,r+"%",100-s+"%",n+"%",s+"%"),r+=n+2,s+=a}},e.TYPE="signalbar",e.STYLE="rg-signalbar-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-signalbar-renderer-bar",e.INACTIVE_STYLE="rg-signalbar-renderer-inactive",e}(Sn),Vn=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._barcode=new hn,i.$_render=function(t,e,i,o){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new q(0,0,i,100)))}.bind(i),i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._div=wt(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=gn.createSVG(e)).style;i.position="absolute",i.left="0px",i.top="0px",i.width="100%",i.height="100%"},e.prototype._doRenderCell=function(t,e,i,o,n){var r=this._svg;this._value=null==e.value?"":String(e.value),this._value&&(this._value=this._value.toUpperCase()),r.setAttribute("class",this._barStyle),gn.renderSVG(t,r,this.$_render)},e.TYPE="code39",e.STYLE="rg-code39-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-code39-renderer-bar",e}(Sn),Bn=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._barcode=new un,i.$_render=function(t,e,i,o){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new q(0,0,i,100)))}.bind(i),i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._div=wt(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=gn.createSVG(e)).style;i.position="absolute",i.left="0px",i.top="0px",i.width="100%",i.height="100%"},e.prototype._doRenderCell=function(t,e,i,o,n){var r=this._svg;this._value=null==e.value?"":String(e.value),r.setAttribute("class",this._barStyle),gn.renderSVG(t,r,this.$_render)},e.TYPE="code128",e.STYLE="rg-code128-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-code128-renderer-bar",e}(Sn),Gn=/\$\{[^{}]*\}/g,jn=function(){function t(){this._template="",this._tokens=[]}return Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(t){this._template=t,this.$_parse(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pattern",{set:function(t){this._pattern=t},enumerable:!1,configurable:!0}),t.prototype.realize=function(t,e,i,o){for(var n="",r=0,s=this._tokens;r<s.length;r++){var a=s[r];"string"==typeof a?n+=a||"":1==a.type?n+=e.value||"":2==a.type?n+=e.item.getData(t.dataSource.getFieldIndex(a.field))||"":4===a.type?n+=(e instanceof Zo?e.getDisplayText(t,i):e.value)||"":n+=o?o.call(this,t.handler,e,a.field)||"":a.field}return n},t.prototype.realizeHeader=function(t,e,i){for(var o,n="",r=0,s=this._tokens;r<s.length;r++){var a=s[r];"string"==typeof a?n+=a:1==a.type?n+=t.displayText:null!=(o=t.getValue(a.field))?n+=String(o):n+=e?e.call(this,i.handler,t,a.field)+""||"":a.field}return n},t.prototype.realizeSummary=function(t,e,i,o){for(var n,r=this._tokens,s="",a=t.column,l=a.grid,u=0,c=r;u<c.length;u++){var h=c[u];"string"==typeof h?s+=h:1==h.type?s+=e.getDisplayText(i)||"":null!=(n=t.getValue(h.field))?s+=String(n):s+=o?(n=o.call(this,l.handler,a,t.summaryIndex,t,h.field))||"":h.field}return s},t.prototype.realizeGroupSummary=function(t,e,i,o){for(var n,r=this._tokens,s="",a=t.column,l=a.grid,u=0,c=r;u<c.length;u++){var h=c[u];"string"==typeof h?s+=h:1==h.type?s+=e.getDisplayText(i)||"":null!=(n=t.getValue(h.field))?s+=String(n):s+=o?(n=o.call(this,l.handler,a,t.summaryIndex,e.index.item.parent,h.field))||"":h.field}return s},t.prototype.$_parse=function(t){var e=this._tokens=[];if(t){for(var i,o=t.length,n=this._pattern||Gn,r=0;i=n.exec(t);){var s=i[0],a=i.index;a>r&&(e.push(t.substring(r,a)),r=a);var l=s.substring(2,s.length-1),u={type:"value"===l?1:"text"===l?4:0==l.indexOf("value:")?2:3,field:l};2==u.type&&(u.field=u.field.substring(6)),e.push(u),r+=s.length}r<o&&e.push(t.substring(r,o))}},t}(),Hn=function(t){function e(){var e=t.call(this)||this;return e._output=void 0,e._inputFocusable=!1,e._html="",e._parser=new jn,e.template="<span>${value}</span>",e._itemClickable=!0,e}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"template",{get:function(){return this._parser.template},set:function(t){t!=this._parser.template&&(this._parser.template=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pattern",{set:function(t){t!=this._pattern&&(t instanceof RegExp?this._pattern=t:this._pattern=t?new RegExp(t):void 0,this._parser.pattern=this._pattern,this._parser.template=this.template)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},set:function(t){this._output=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"callback",{get:function(){return this._callback},set:function(t){t!==this._callback&&(this._callback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)},enumerable:!1,configurable:!0}),e.prototype.clearAndAssignFrom=function(e){this.valueCallback=void 0,this.callback=void 0,this.pattern=void 0,this.template="",t.prototype.assignFrom.call(this,e)},Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),e.prototype._doClearContent=function(e){t.prototype._doClearContent.call(this,e),this._html=null},e.prototype.canClick=function(t){var e=Ct(this._dom),i=t.target;return!(i instanceof e.HTMLTableCellElement&&i.className.indexOf("rg-")>=0||this._dom===i)},e.prototype.click=function(t,e,i){return this._doClick(t,e,i||e.target)},e.prototype._doRenderCell=function(t,e,i,o,n){var r=this._callback;r?this.$_setHtml(r.call(this,t.handler,e,o,n)):this.$_setHtml(this._parser.realize(t,e,i,this._valueCallback))},e.prototype._doClick=function(t,e,i){return{type:this.type,target:e.target,value:t.value}},e.prototype.$_setHtml=function(t){t!=this._html&&(this._html=t,this._dom.innerHTML=t)},e.TYPE="html",e}(Sn),$n=function(e){function i(){var t=e.call(this)||this;return t.$_userComparer=function(t,e,i){if(this._labelComparer)return this._labelComparer(t,e._rowId,i.rowId)},t}return n(i,e),i.prototype.run=function(e,i,o,n,r,s,a){this._rs=e.provider;var l=this._ds=this._rs.dataSource;this._parent=e,this._field=i;var u=this._ds.getField(i);if(this._labelComparer=this._ds._comparers[i]||this._rs._labelComparer[i],this._labelComparer)this._comparer=this.$_userComparer;else switch(u.dataType){case t.ValueType.NUMBER:case t.ValueType.DATETIME:this._comparer=l.compareNumbers;break;case t.ValueType.BOOLEAN:this._comparer=l.compareBools;break;case t.ValueType.OBJECT:this._comparer=l.compareObjects.bind(l);break;default:this._comparer=n?l.compareTexts.bind(l):l.compareValues.bind(l)}this.$_sort(r,s,o,a)},i.prototype.$_sort=function(e,i,o,n){do{var r=this._parent,s=this._field,a=e,l=i,u=Math.floor((e+i)/2),c=r.getItem(u).dataRow,h=r.getItem(u).row;do{if(o==t.SortDirection.ASCENDING){for(;a<=l;){if(0==(p=this._comparer(this._field,h,r.getItem(a).row))&&n&&(p=c-r.getItem(a).dataRow),p<=0)break;a++}for(;a<=l;){if(0==(p=this._comparer(s,h,r.getItem(l).row))&&n&&(p=c-r.getItem(l).dataRow),p>=0)break;l--}}else{for(;a<=l;){if(0==(p=this._comparer(s,h,r.getItem(a).row))&&n&&(p=c-r.getItem(a).dataRow),p>=0)break;a++}for(;a<=l;){var p;if(0==(p=this._comparer(s,h,r.getItem(l).row))&&n&&(p=c-r.getItem(l).dataRow),p<=0)break;l--}}a<=l&&(a!=l&&r._exchangeItems(a,l),a++,l--)}while(a<=l);e<l&&this.$_sort(e,l,o,n),e=a}while(e<i)},i}(kt),Wn=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.getShadowRow=function(){var t=this.parent.firstDataItem;return t?t.dataRow:-1},e}(Oo),Un=function(t){function e(e,i){var o=t.call(this,i)||this;return o._level=0,o._level=e,o}return n(e,t),Object.defineProperty(e.prototype,"groupLevel",{get:function(){return this._level},enumerable:!1,configurable:!0}),e.prototype.getShadowRow=function(){var t=this.firstDataItem;return t?t.dataRow:-1},Object.defineProperty(e.prototype,"merged",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(xo),zn=function(e){function i(t){var i=e.call(this)||this;return i._fixedCount=0,i._items=[],i._list=[],i._rowCount=NaN,i._rs=t,i}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"provider",{get:function(){return this._rs},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){if(isNaN(this._rowCount)){for(var t=this._items,e=0,i=t.length-1;i>=0;i--)t[i]instanceof So&&e++;this._rowCount=e}return this._rowCount},enumerable:!1,configurable:!0}),i.prototype.getItem=function(t){return this._items[t]},i.prototype.clear=function(t){void 0===t&&(t=null);for(var e=this._rs,i=0,o=(t=t||this._items).length;i<o;i++){var n=t[i];n._parent=e._rootItem,n._index=-1,n instanceof xo&&n._children&&this.clear(n._children)}t.length=0,this.$_changed()},i.prototype.expand=function(t,e,i,o){return this.$_expandItem(t,e,i,o),this.$_changed(),!0},i.prototype.collapse=function(e,i){var o,n,r=this._rs,s=this._items;if(e._expanded=!1,r.mergeMode){if((l=e.index)>=0?(s.splice(l,1),e._index=-1):(l=this.$_firstIndex(e,r.expandedAdornments==t.RowGroupAdornments.SUMMARY,!0))<0&&(l=e.firstItem.index),l>=0)for(;l<s.length;){if(!(u=s[l]).isDescendantOf(e))break;s.splice(l,1),u._index=-1,i&&(u instanceof Eo||u instanceof Wn)&&(c=u instanceof Eo?u:u instanceof Wn&&u.parent._expanded?u.parent:null)&&(c._expanded=!1)}switch(o=e.footerCount,r.collapsedAdornments){case t.RowGroupAdornments.BOTH:e._index=l,s.splice(l++,0,e);for(var a=0;a<o;a++)s.splice(l+a,0,n=e.getFooter(a)),n._index=l+a;break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:if(o=e.footerCount)for(a=0;a<o;a++)s.splice(l+a,0,n=e.getFooter(a)),n._index=l+a;else if(o=e.allFooterCount)for(a=0;a<o;a++)s.splice(l+a,0,n=e._allFooters[a]),n._index=l+a;break;case t.RowGroupAdornments.HEADER:default:e._index=l,s.splice(l,0,e)}}else{var l;for((l=e.index)>=0?(s.splice(l,1),e._index=-1):(l=this.$_firstIndex(e,r.expandedAdornments==t.RowGroupAdornments.SUMMARY,!1))<0&&(l=e.firstItem.index);l<s.length;){var u,c;if(!(u=s[l]).isDescendantOf(e))break;s.splice(l,1),u._index=-1,i&&(u instanceof Eo||u instanceof Oo)&&(c=u instanceof Eo?u:u instanceof Oo&&u.parent._expanded?u.parent:null)&&(c._expanded=!1)}switch(r.collapsedAdornments){case t.RowGroupAdornments.BOTH:for(e._index=l,s.splice(l++,0,e),o=e.footerCount,a=0;a<o;a++)(n=e.getFooter(a))._index=l+a,s.splice(l+a,0,n);break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:if(o=e.footerCount)for(a=0;a<o;a++)(n=e.getFooter(a))._index=l+a,s.splice(l+a,0,n);else for(a=0;a<e.allFooterCount;a++)(n=e._allFooters[a])._index=l+a,s.splice(l+a,0,n);break;case t.RowGroupAdornments.HEADER:default:e._index=l,s.splice(l,0,e)}}return this.$_changed(),!0},i.prototype.getNext=function(t){return null!=t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},i.prototype.getPrior=function(t){return null!=t&&t.visible&&t.index>0?this._items[t.index-1]:null},i.prototype.$_changed=function(){this._rowCount=NaN},i.prototype.$_collectChildren=function(e,i,o,n,r){var s,a=this._rs,l=a.expandedAdornments,u=a.collapsedAdornments;if(n&&e&&e._setExpanded(!0),a.mergeMode){var c=void 0;if(!(e instanceof Ro))if(l==t.RowGroupAdornments.HEADER||l==t.RowGroupAdornments.BOTH)i.push(e);else if(l==t.RowGroupAdornments.SUMMARY)for(var h=0,p=e.footerCount;h<p;h++)c=e.getFooter(h),i.push(c);for(var d=0,f=e.count;d<f;d++)if((_=e.getItem(d))instanceof Eo){var g=_;if(o&&(!r||g.level<=r)||g.expanded)this.$_collectChildren(g,i,o,n,r);else{var y=g.footerCount;switch(u){case t.RowGroupAdornments.BOTH:for(i.push(g),h=0;h<y;h++)c=g.getFooter(h),i.push(c);break;case t.RowGroupAdornments.SUMMARY:case t.RowGroupAdornments.FOOTER:if(y)for(h=0;h<y;h++)c=g.getFooter(h),i.push(c);else for(h=0;h<g.allFooterCount;h++)c=g._allFooters[h],i.push(c);break;case t.RowGroupAdornments.HEADER:default:i.push(g)}}}else e.isFooter(_)||i.push(_);if(!(e instanceof Ro)&&e.footer&&(l==t.RowGroupAdornments.FOOTER||l==t.RowGroupAdornments.BOTH))for(d=0,f=e.footerCount;d<f;d++)i.push(e.getFooter(d))}else{if(!(e instanceof Ro))if(l==t.RowGroupAdornments.SUMMARY)if(c=e.footer,y=e.footerCount,c)for(h=e.indexOf(c),i.push(c),d=1;d<y;d++)c=e.getItem(h+d),i.push(c);else for(y=e.allFooterCount,d=0;d<y;d++)c=e._allFooters[d],i.push(c);else((s=l)==t.RowGroupAdornments.BOTH||s==t.RowGroupAdornments.HEADER)&&i.push(e);for(d=0,f=e.count;d<f;d++){var _;if((_=e.getItem(d))instanceof Eo)if(g=_,c=void 0,y=void 0,o&&(!r||g.level<=r)||g.expanded)this.$_collectChildren(g,i,o,n,r);else switch(u){case t.RowGroupAdornments.HEADER:i.push(g);break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:if(c=g.footer){if(y=g.footerCount,i.push(c),y>1){h=g.indexOf(c);for(var m=1;m<y;m++)c=g.getItem(h+m),i.push(c)}}else for(y=g.allFooterCount,m=0;m<y;m++)c=g._allFooters[m],i.push(c);break;case t.RowGroupAdornments.NONE:break;case t.RowGroupAdornments.BOTH:default:if(i.push(g),(c=g.footer)&&(y=g.footerCount,i.push(c),y>1))for(h=g.indexOf(c),m=1;m<y;m++)c=g.getItem(h+m),i.push(c)}else _ instanceof Oo||i.push(_)}if(!(e instanceof Ro)&&function(e){return e==t.RowGroupAdornments.BOTH||e==t.RowGroupAdornments.FOOTER}(l)&&(c=e.footer)&&(y=e.footerCount,i.push(c),y>1))for(h=e.indexOf(c),d=1;d<y;d++)c=e.getItem(h+d),i.push(c)}},i.prototype.$_expandItem=function(e,i,o,n){var r;if(e instanceof Ro)r=this._fixedCount;else if(this._rs.mergeMode){switch(this._rs.collapsedAdornments){case t.RowGroupAdornments.BOTH:r=e.index,this._items.splice(r,1+e.footerCount);break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:var s=e.footer;s?(r=s.index,this._items.splice(r,e.footerCount)):e.allFooterCount>0&&(r=e._allFooters[0].index,this._items.splice(r,e.allFooterCount));break;case t.RowGroupAdornments.HEADER:default:r=e.index,this._items.splice(r,1)}o&&(e._index=-1)}else{switch(this._rs.collapsedAdornments){case t.RowGroupAdornments.BOTH:r=e.index,this._items.splice(r,1+e.footerCount);break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:e.footerCount>0?(r=e.footer.index,this._items.splice(r,e.footerCount)):e.allFooterCount>0&&(r=e._allFooters[0].index,this._items.splice(r,e.allFooterCount));break;case t.RowGroupAdornments.HEADER:default:r=e.index,this._items.splice(r,1)}o&&(e._index=-1)}this._list.splice(0,this._list.length),this.$_collectChildren(e,this._list,i,o,n);for(var a=this._list.length,l=0;l<a;l++)this._items.splice(r+l,0,this._list[l])},i.prototype.$_firstIndex=function(t,e,i){var o=t.index;if(o>=0)return o;for(var n=this._items,r=0,s=n.length;r<s;r++){var a=n[r];if(t.isDescendant(a))return a.index}return-1},i.prototype.$_clearAndInit=function(t,e){if(this.clear(),t){this._fixedCount=Math.min(e,t.itemCount);for(var i=0;i<this._fixedCount;i++)this._items.push(t.getItem(i))}else this._fixedCount=0},i.prototype.$_resetIndices=function(t){void 0===t&&(t=0);for(var e=t,i=this._items.length;e<i;e++)this._items[e]._index=e},i}(kt),Kn=function(t,e){this.startIndex=t,this.endIndex=e,this.level=0,this.children=[]},Yn=function(e){function i(i,o){var n=e.call(this,i,o)||this;return n._expandedAdornments=t.RowGroupAdornments.BOTH,n._collapsedAdornments=t.RowGroupAdornments.HEADER,n._indentVisible=!0,n._expandWhenGrouping=!1,n._mergeMode=!1,n._summaryMode=t.SummaryMode.AGGREGATE,n._groupSorting=!0,n._grouped=!1,n._checkable=!0,n}return n(i,e),i.prototype._doDispose=function(){this._callbackOnwer=null,this._visibleItems=this._visibleItems.dispose(),e.prototype._doDispose.call(this)},i.prototype.groupfFooterCounterChanged=function(t){this.$_footerCounterChanged()},i.prototype.$_footerCounterChanged=function(){this._populateItems(),this._fireRefresh()},Object.defineProperty(i.prototype,"footerCounter",{get:function(){return this._footerCounter},set:function(t){t!=this._footerCounter&&(t&&t.setCounterAware(null),this._footerCounter=t,t&&t.setCounterAware(this),this.$_footerCounterChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!1,configurable:!0}),i.prototype.resetAdornments=function(t,e,i){(i||e.expandedAdornments!=this._expandedAdornments||e.collapsedAdornments!=this._collapsedAdornments||e.indentVisible!=this._indentVisible)&&(this._expandedAdornments=e.expandedAdornments,this._collapsedAdornments=e.collapsedAdornments,this._callbackOnwer=t,this._footerCallback=e.createFooterCallback,this._valueForGroupCallback=e.valueForGroupCallback,this._indentVisible=e.indentVisible,this.grouped&&(this._populateItems(),this._fireRefresh()))},Object.defineProperty(i.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){this._expandWhenGrouping=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeMode",{get:function(){return this._mergeMode},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this._populateItems(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"grouped",{get:function(){return this._grouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupCount",{get:function(){return this._groupFields?this._groupFields.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSorting",{get:function(){return this._groupSorting},set:function(t){this._groupSorting!=t&&(this._groupSorting=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleRowCount",{get:function(){return this._visibleItems.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"indentVisible",{get:function(){return this._indentVisible},enumerable:!1,configurable:!0}),i.prototype.canGrouping=function(t){return this.fireGrouping(t)},i.prototype.groupBy=function(t){this.groupByMode(t,this._mergeMode)},i.prototype.groupByMode=function(t,e){this._mergeMode=null!=e?e:this._mergeMode,this._groupFields=t?t.concat():null,e||this._clearDisplayLevels(),this._populateItems();try{this._fireRefresh()}finally{this.fireGrouped(t)}},i.prototype.isGroupedField=function(t){if(this._groupFields)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return!0;return!1},i.prototype.getGroupLevel=function(t){if(this._groupFields&&t>=0)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return e+1;return 0},Object.defineProperty(i.prototype,"groupedFields",{get:function(){return this._groupFields?this._groupFields.concat():null},enumerable:!1,configurable:!0}),i.prototype.expand=function(t,e,i,o){if(t&&(!t.expanded||i)&&this.fireExpand(t)&&(t.expanded&&this._visibleItems.collapse(t,!1),this._visibleItems.expand(t,e,!0,o))){this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireExpanded(t)}}},i.prototype.$_collapseChild=function(t,e,i){for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);r instanceof xo&&(r._expanded=!1,this.$_collapseChild(r,e,i))}},i.prototype.collapse=function(t,e,i,o){if(t&&t.expanded){if(this.fireCollapse(t)&&this._visibleItems.collapse(t,e)){t.index>=0&&this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireCollapsed(t,o)}}}else t&&e&&i&&this.$_collapseChild(t,e,i)},i.prototype.collapseAll=function(t){for(var e=0;e<this._rootItem.count;e++){var i=this._rootItem.getItem(e);i instanceof Eo&&this.collapse(i,t,!0,null)}},i.prototype.expandAll=function(t,e){for(var i=0;i<this._rootItem.count;i++){var o=this._rootItem.getItem(i);o instanceof Eo&&this.expand(o,t,!0,e)}},i.prototype.findItem=function(e,i,o,n,r){var s=this.dataSource;if(!s)return-1;var a=this.itemCount;if(a<1)return-1;var l=Math.min(e.length,i.length);if(l<1)return-1;var u=!o||o.allFields,c=o&&o.caseSensitive,h=o&&o.partialMatch,p=null,d=[],f=o.reverse;n=Math.max(0,n),r=Math.min(a-1,r);for(var g=0;g<l;g++)d[g]=s.getField(e[g]).dataType;var y=o.compareCallback;y="function"==typeof y?y:xt.compareTextValue;for(var _=n;f?_>=r:_<=r;f?_--:_++){var m=this.$_getItem(_),v=m.dataRow,b=v>=0;if(b)for(g=0;g<l;g++){var C=m.getData(e[g]),w=s.getOrgFieldName(e[g]);switch(d[g]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i[g]instanceof Date)b=y.call(s.handler,i[g],C,c,h,v,w);else{if(!p){var S=/[.]/.test(i[g])?"yyyy.MM.dd":/[/]/.test(i[g])?"yyyy/MM/dd":/[-]/.test(i[g])?"yyyy-MM-dd":"yyyyMMdd";p=new Be(S)}b=y.call(s.handler,i[g],C?p.getText(C):C,c,h,v,w)}break;default:b=y.call(s.handler,i[g],C,c,h,v,w)}if(b&&!u)return _;if(!b&&u)break}if(b)return _}return-1},i.prototype.findCell=function(e,i,o,n,r,s){var a=this.dataSource;if(!a)return null;var l=this.itemCount;if(l<1)return null;var u=o.caseSensitive,c=o.partialMatch,h=this.dataSource.fieldCount,p=e.length,d=o.reverse,f=null,g=[],y=o.compareCallback;y="function"==typeof y?y:xt.compareTextValue;for(var _=0;_<h;_++)g[_]=a.getField(_).dataType;n=Math.max(0,n),r=Math.min(l-1,r),s=Math.max(d?-1:0,Math.min(s,p-1)),d?s<0&&(s=e.length-1,n--):s>=e.length&&(n++,s=0);for(var m=n;d?m>=r:m<=r;d?m--:m++){var v=this.$_getItem(m),b=v.dataRow;if(b>=0)for(_=d?m<n?p-1:s:m>n?0:s;d?_>=0:_<p;d?_--:_++){var C=e[_];if(C>=0&&C<h){var w=v.getData(C),S=a.getOrgFieldName(C),E=!1;switch(g[C]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i instanceof Date)E=y.call(a.handler,i,w,u,c,b,S);else{if(!f){var x=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd";f=new Be(x)}E=y.call(a.handler,i,w?f.getText(w):w,u,c,b,S)}break;default:E=y.call(a.handler,i,w,u,c,b,S)}if(E)return{itemIndex:m,fieldIndex:C,searchFieldIndex:_}}}}return null},i.prototype.getGroupItem=function(t){return function e(i){for(var o=0,n=i.children.length;o<n;o++){var r=i.children[o];if(r.id===t)return r;if(r instanceof xo){var s=e(r);if(s)return s}}}(this._rootItem)},Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._grouped?this._visibleItems.count:this.source.itemCount},enumerable:!1,configurable:!0}),i.prototype.getItem=function(t,e){return this.grouped&&!e?t>=0&&t<this._visibleItems.count?this._visibleItems.getItem(t):null:this.source.getItem(t,e)},i.prototype.getItems=function(t,e){if(this.grouped){for(var i=this._visibleItems,o=[],n=Math.min(i.count,t+e-1),r=t;r<n;r++){var s=i.getItem(r);o.push(s)}return o}return this.source.getItems(t,e)},i.prototype.getAllItems=function(){if(this.grouped){var t=new zn(this);return t.expand(this.rootItem,!0,!1,0),t.items}return this.source?this.source.getAllItems():null},i.prototype.getIndexOfRow=function(t){if(this.grouped){for(var e=this._visibleItems,i=0,o=e.count;i<o;i++)if(e.getItem(i).dataRow==t)return i;return-1}return this.source.getIndexOfRow(t,!1)},i.prototype.getItemOfRow=function(t,e){if(this.grouped){for(var i=this._visibleItems,o=0,n=i.count;o<n;o++){var r=i.getItem(o);if(r.dataRow==t)return r}return null}return this.source.getItemOfRow(t,e)},i.prototype._initialize=function(){e.prototype._initialize.call(this),this._visibleItems=new zn(this)},i.prototype._clearItems=function(){this._visibleItems.clear(),this.rootItem.clear()},i.prototype._populateItems=function(){this.$_populateItems(!1)},i.prototype._resetItemIndicies=function(t){this.isIndexing&&this.grouped?this._visibleItems.$_resetIndices(t):e.prototype._resetItemIndicies.call(this,t)},i.prototype._clearChecked=function(){this.grouped?this.$_checkChildren(this.rootItem,!1,!1,!1):e.prototype._clearChecked.call(this),this._editItem&&this._editItem._setChecked(!1)},i.prototype.$_groupCheckable=function(t,e){for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);(n instanceof Eo||n instanceof Oo)&&n.setCheckable(e),n instanceof Eo&&this.$_groupCheckable(n,e)}},i.prototype.setGroupCheckable=function(t){t!=this._checkable&&(this._checkable=t,this.$_groupCheckable(this.rootItem,t))},i.prototype.checkAll=function(t,i,o,n,r){if(this._editItem&&(o?this._editItem.checkable&&this._editItem._setChecked(t):this._editItem._setChecked(t)),i||!this.grouped)e.prototype.checkAll.call(this,t,i,o,n,r);else{var s=this._visibleItems.fixedCount;if(s>0)if(o)for(var a=s;a--;){var l=this.getItem(a);l.checkable&&l._setChecked(t)}else for(a=s;a--;)this.getItem(a)._setChecked(t);var u=this.source._checkFieldIndex>-1;u&&this.dataSource.beginUpdate();try{this.$_checkChildren(this.rootItem,t,o,r)}finally{u&&this.dataSource.endUpdate(!1)}this._fireItemCheckChanged(null,t),n?this._fireItemAllChecked(t):this._fireRefreshClient()}},i.prototype.getItemChecked=function(t,e){return this.source.getItemChecked(t,e)},i.prototype.setItemChecked=function(t,e){return this.source.setItemChecked(t,e)},i.prototype.getFirstRow=function(){for(var t=0,e=this._visibleItems.count;t<e;t++){var i=this._visibleItems.getItem(t);if(i instanceof So)return i}},i.prototype.getLastRow=function(){for(var t=this._visibleItems.count-1;t>=0;t--){var e=this._visibleItems.getItem(t);if(e instanceof So)return e}},i.prototype.getPrevRow=function(t){if(t){t.visible||(t=t.getVisibleAncestor());for(var e=t.index-1;e>=0;e--)if((t=this._visibleItems.getItem(e))instanceof So)return t}return this.getFirstRow()},i.prototype.getNextRow=function(t){if(t){t.visible||(t=t.getVisibleAncestor());for(var e=t.index+1,i=this._visibleItems.count;e<i;e++)if((t=this._visibleItems.getItem(e))instanceof So)return t}return this.getLastRow()},i.prototype.$_saveExpand=function(t,e){for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);if(n instanceof xo||n instanceof Un){var r=n.firstItem._dataRowId,s=this.dataSource.getDataRow(r),a=n._groupField;s>=0&&a>=0&&(e[r]={expanded:n._expanded,children:[]},this.$_saveExpand(n,e[r].children))}}},i.prototype.$_restoreExpand=function(t,e){for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);if(n instanceof xo||n instanceof Un){var r=n.firstItem._dataRowId,s=this.dataSource.getDataRow(r),a=n._groupField;s>=0&&a>=0&&e[r]&&(n._setExpanded(e[r].expanded),this.$_restoreExpand(n,e[r].children))}}},i.prototype.$_populateItems=function(t){var e={},i=this.source.itemCount,o=this._rootItem;if(t&&i>0&&o&&this.$_saveExpand(o,e),this._clearItems(),this.source){if(this._groupFields){for(var n=this.dataSource.fieldCount,r=this._groupFields.length-1;r>=0;r--)this._groupFields[r]>=n&&this._groupFields.splice(r,1);this._grouped=this._groupFields.length>0}else this._grouped=!1;this._grouped&&i>0&&(this.$_buildGroupItems(i),t&&this.$_restoreExpand(o,e),this.$_resetVisibleItems())}},i.prototype.$_checkChildren=function(t,e,i,o){for(var n=0,r=t.count;n<r;n++){var s=t.getItem(n);s&&(i?(o||s.isDataRow)&&s.checkable&&s._setChecked(e):s._setChecked(e)),s instanceof Eo&&this.$_checkChildren(s,e,i,o)}},i.prototype.$_getItem=function(t){return this._grouped?this._visibleItems.getItem(t):this.source.getItem(t)},i.prototype.$_resetVisibleItems=function(){this._visibleItems.$_clearAndInit(this.source,this.fixedCount),this.source&&this.source.itemCount>this._visibleItems.fixedCount&&this._visibleItems.expand(this.rootItem,!1,!1,0),this._resetItemIndicies(0)},i.prototype.$_buildGroupItems=function(t){if(t>this.fixedCount){var e=new Kn(this.fixedCount,t-1);this.$_buildGroups(e,this.source,this._groupFields),this.$_buildItems(this.rootItem,e,this._groupFields),this.mergeMode&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this.rootItem))}},i.prototype.$_resetDisplayLevels=function(t){for(var e=0,i=t.count;e<i;e++){var o=xt.cast(t.getItem(e),Eo);if(o){var n=xt.cast(o.firstItem,So);n&&n._displayLevel<0&&(n._displayLevel=o.level),this.$_resetDisplayLevels(o)}}},i.prototype.$_buildGroups=function(t,e,i){if(!(i.length<=t.level)){var o=t.startIndex,n=t.endIndex;if(!(n<o)){var r=t.level+1,s=i[t.level],a=this.dataSource.getField(s),l=new Kn(o,o);l.level=r,t.children.push(l);var u=!this.mergeMode&&this._valueForGroupCallback,c=e.getItem(o),h=c.getData(s);h=u?u.call(this._callbackOnwer,this._callbackOnwer,c.dataRow,a.orgFieldName,h):h;for(var p=o+1;p<=n;p++){var d=(c=e.getItem(p)).getData(s);d=u?u.call(this._callbackOnwer,this._callbackOnwer,c.dataRow,a.orgFieldName,d):d,a.equalValues(d,h)||(l&&(l.endIndex=p-1,l.groupValue=h),(l=new Kn(p,p)).level=r,t.children.push(l)),h=d}l&&(l.endIndex=n,l.groupValue=h),p=0;for(var f=t.children.length;p<f;p++)this.$_buildGroups(t.children[p],e,i)}}},i.prototype.$_buildItems=function(t,e,i){var o,n=this.mergeMode,r=e.children.length;if(r>0){o=e.level;for(var s=i[e.level],a=0;a<r;a++){var l=n?new Un(o,s):new xo(s);l._setExpanded(this.expandWhenGrouping),t.add(l),l._setCheckable(this._checkable),l.groupValue=e.children[a].groupValue,this.$_buildItems(l,e.children[a],i)}}else{var u=e.endIndex-e.startIndex+1,c=this.source.getItems(e.startIndex,u);t.addAll(c),this._incDescendents(t,u)}if((o=t.level)>0){var h=this._callbackOnwer,p=this._footerCallback;if(this._footerCounter)for(var d=0,f=(a=0,this._footerCounter.getGroupFooterCount(t));a<f;a++){var g=!(!p||p(h,t,a));(y=n?new Wn:new Oo).$_footerIndex=a,y.$_vindex=g?-1:d++,y.hiddenFooter=g,t.add(y),y.setCheckable(this._checkable)}else if(p||p(h,t,0)){var y=n?new Wn:new Oo;t.add(y)}}},i.prototype.$_setEditItem=function(t){this._editItem=t},i.prototype.$_setDummyEditItem=function(t){this._dummyEditItem=t},i.prototype.fireGrouping=function(t){return this.fireConfirmEvent(i.GROUPING,t)},i.prototype.fireGrouped=function(t){this.fireEvent(i.GROUPED)},i.prototype.fireExpand=function(t){return this.fireConfirmEvent(i.EXPAND,t)},i.prototype.fireExpanded=function(t){this.fireEvent(i.EXPANDED,t)},i.prototype.fireCollapse=function(t){return this.fireConfirmEvent(i.COLLAPSE,t)},i.prototype.fireCollapsed=function(t,e){this.fireEvent(i.COLLAPSED,t,e)},i.prototype.onItemProviderRefresh=function(t){this._grouped&&(this.$_populateItems(!0),this._fireRefresh())},i.GROUPING="onGroupedItemProviderGrouping",i.GROUPED="onGroupedItemProviderGrouped",i.EXPAND="onGroupedItemProviderExpand",i.EXPANDED="onGroupedItemProviderExpanded",i.COLLAPSE="onGroupedItemProviderCollapse",i.COLLAPSED="onGroupedItemProviderCollapsed",i}(To),qn=function(t){function e(e){var i=t.call(this)||this;return i._styleMap={},i._owner=e,i}return n(e,t),e.prototype._doDispose=function(){this._styleMap=null,t.prototype._doDispose.call(this)},e.prototype.addCellStyle=function(t,e,i){return(this._styleMap[t]||(this._styleMap[t]={}))[e]=i,!0},e.prototype.getCellStyle=function(t,e){var i=this._styleMap[t];return i&&i[e]},e.prototype.removeCellStyle=function(t,e){if(null==t)this._styleMap={};else{var i=this._styleMap[t];i&&(e?delete i[e]:delete this._styleMap[t])}return!0},e.prototype.connect=function(t){this._styleMap={}},e.prototype.disconnect=function(){this._styleMap={}},e.prototype.clearRows=function(){this._styleMap={}},e.prototype.setRows=function(){this._styleMap={}},e.prototype.removeRow=function(t){var e=this._owner.getItemOfRow(t,!0);e&&delete this._styleMap[e.dataRowId]},e.prototype.removeRows=function(t){var e=this;t.forEach((function(t){var i=e._owner.getItemOfRow(t,!0);i&&delete e._styleMap[i.dataRowId]}))},e}(Xe),Xn=function(t){function e(){return t.call(this)||this}return n(e,t),e}(Ko),Qn=function(t){function e(e,i,o){var n=t.call(this)||this;return n._runtime=new Xn,n._owner=e,n._exprNode=be.Default.parse(i,["value","values"]),n._runtime=new Xn,n._callback=o,n}return n(e,t),e.clearCheckables=function(t){for(var e=t.itemCount;e--;)t.getItem(e)._setCheckable(!0)},e.prototype.connect=function(t){this._runtime.setDataSource(t)},e.prototype.disconnect=function(){},e.prototype.clearRows=function(){e.clearCheckables(this._owner)},e.prototype.setRows=function(){for(var t=this._owner._rows,e=t.length;e--;){var i=t[e];this.$_setCheckable(i)}},e.prototype.insertRow=function(t){var e=this._owner.getItemOfRow(t,!0);this.$_setCheckable(e)},e.prototype.insertRows=function(t,e){for(var i=0;i<e;i++){var o=this._owner.getItemOfRow(t+i,!0);o instanceof wo&&this.$_setCheckable(o)}},e.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t,!0);this.$_setCheckable(e)},e.prototype.updateRows=function(t,e){for(var i=0;i<e;i++){var o=this._owner.getItemOfRow(t+i,!0);o instanceof wo&&this.$_setCheckable(o)}},e.prototype.updateRowList=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],n=this._owner.getItemOfRow(o,!0);n instanceof wo&&this.$_setCheckable(n)}},e.prototype.changeStates=function(t){if(t)for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e],!0);i instanceof wo&&this.$_setCheckable(i)}},e.prototype.$_setCheckable=function(t){var e,i=this._callback;i?e=i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),e=this._exprNode.evaluate(this._runtime)),t._setCheckable(e)},e}(Xe),Jn=function(e){function i(i){var o=e.call(this,i)||this;return o._sortMode=t.SortMode.AUTO,o._filterMode=t.FilterMode.AUTO,o._filterOr=!1,o._checkableExpression=null,o._rows=[],o._filteredItems=[],o._pageItems=[],o._sortedItems=[],o._pubItems=o._rows,o._items=o._rows,o._distinctRows=[],o._rowCount=0,o._fixedCount=0,o._fixedSorting=!1,o._maxItemCount=0,o._itemCount=0,o._pubCount=0,o._filtered=!1,o._filtering=!1,o._filters=[],o._filterRuntime=new Wo,o._filterLock=0,o._fixedFiltering=!1,o._sorted=!1,o._sortFields=[],o._sortDirections=[],o._sortCases=[],o._labelComparer={},o._paging=!1,o._pagingSource=p.ROWS,o._pageSize=10,o._pageCount=-1,o._pageStartIndex=-1,o._currPage=0,o._pageStart=0,o._summaryMode=t.SummaryMode.AGGREGATE,o._summaryMap=null,o._checkableTag=null,o._cellStyleMapTag=new qn(o),o}return n(i,e),i.prototype._doDispose=function(){function t(t){for(var e=0,i=t.length;e<i;e++)t[e]&&t[e].dispose();t.length=0}this.dataSource=null,t(this._rows),t(this._filteredItems),t(this._pageItems),t(this._sortedItems),t(this._pubItems),t(this._items),t(this._distinctRows),this._filterRuntime&&this._filterRuntime.dispose(),this._filterRuntime=null,this._sortFields.length=0,this._labelComparer=null,this._summaryMap=null,this._checkableTag=null,e.prototype._doDispose.call(this)},i.prototype.getCommandStates=function(t){var e=this._rows[t];return e&&e._getExtents()},i.prototype.setCommandStates=function(t,e){var i=this._rows[t];null!=e&&i&&i._setExtents(e)},Object.defineProperty(i.prototype,"isFilterOr",{get:function(){return this._filterOr},set:function(t){t!=this._filterOr&&(this._filterOr=t,this.$_buildItems(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isSorted",{get:function(){return this._sorted},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isPaging",{get:function(){return this._paging},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageStartIndex",{get:function(){return this._pageStart},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._sortMode},set:function(t){this._sortMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterMode",{get:function(){return this._filterMode},set:function(t){this._filterMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new Qn(this,t),this._dataSource&&this._checkableTag.connect(this._dataSource)))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{set:function(t){this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new Qn(this,null,t),this._dataSource&&this._checkableTag.connect(this._dataSource))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}},enumerable:!1,configurable:!0}),i.prototype.getFieldDomain=function(t){for(var e=this._rows.length,i=[],o=void 0,n=0;n<e;n++){var r=this._dataSource.getValue(n,t);r!=o&&i.indexOf(r)<0&&i.push(r),o=r}return i},i.prototype.beginFilter=function(){this._filterLock++},i.prototype.endFilter=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),0==this._filterLock&&t&&this.applyFilters(!0,e,i))},i.prototype.hasFilter=function(t){var e=this._filters[t];return e&&e.length>0},i.prototype.addFilter=function(t,e){if(e&&e.criteria,t>=0){var i=this._filters[t];if(i||(i=[],this._filters[t]=i),e.criteria||e.callback){var o=new Ho(e);return i.push(o),this.applyFilters(),o}}},i.prototype.clearAllFilters=function(){this._filtered&&(this._filters=[],this.applyFilters())},i.prototype.hasFilters=function(){for(var t=this._filters.length,e=0;e<t;e++){var i=this._filters[e];if(i&&i.length>0)return!0}return!1},i.prototype.applyFilters=function(t,e,i){if(void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),!(this._filterLock>0)){this.$_buildItems();try{t&&this._fireRefresh()}finally{this._fireFiltered(e,i)}}},i.prototype.orderBy=function(e,i,o,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=!0),this._fireSort(e,i,o),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var r=e?e.length:0,s=i?i.length:0,a=o?o.length:0,l=0;l<s;l++)i[l]=i[l]==t.SortDirection.ASCENDING||i[l]==t.SortDirection.DESCENDING?i[l]:t.SortDirection.ASCENDING;for(l=0;l<r;l++)this._sortFields.push(e[l]),s>l?this._sortDirections.push(i[l]):s>0?this._sortDirections.push(i[s-1]):this._sortDirections.push(t.SortDirection.ASCENDING),a>l?this._sortCases.push(o[l]):a>0?this._sortCases.push(o[a-1]):this._sortCases.push(t.SortCase.SENSITIVE);this._sorted=this.$_checkSorted(),this.$_buildItems();try{n&&this._fireRefresh()}finally{this._fireSorted()}},i.prototype.getSortFields=function(){return this._sortFields.slice()},i.prototype.getSortDirections=function(){return this._sortDirections.slice()},i.prototype.getSortCases=function(){return this._sortCases.concat()},i.prototype.setPaging=function(t,e,i,o){void 0===e&&(e=10),void 0===i&&(i=-1),void 0===o&&(o=null),e=Math.max(e,1),i=Math.max(i,-1),t==this._paging&&e==this._pageSize&&i==this._pageCount&&o==this._pagingSource||(this._currPage=0,this._paging=t,this._pagingSource=o,this._pageSize=e,this._pageCount=i,this.$_buildItems(),this._fireRefresh())},Object.defineProperty(i.prototype,"page",{get:function(){return this._paging?this._currPage:-1},enumerable:!1,configurable:!0}),i.prototype.setPage=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),this._paging&&(t=Math.max(0,Math.min(this.pageCount-1,t)),e=Math.max(-1,e),t==this._currPage&&e==this._pageStartIndex||(this._currPage=t,this._pageStartIndex=e,this.$_buildPage(),this._fireRefresh()))},Object.defineProperty(i.prototype,"pageCount",{get:function(){if(this._paging){if(this._pageCount>=0)return this._pageCount;var t=this.$_getPageItems();return Math.floor((t.length+this._pageSize-1)/this._pageSize)}return 0},set:function(t){this._paging&&(t=Math.max(-1,t))!=this._pageCount&&(this._pageCount=t,this.$_buildPage(),this._fireRefresh())},enumerable:!1,configurable:!0}),i.prototype.getPageOfDataRow=function(t){if(this._paging){if(t<0||t>=this._dataSource.rowCount)return-1;var e=this.$_getPageItems();if(!e||!e.length)return-1;for(var i=0;i<e.length;i++)if(e[i].dataRow===t)return Math.floor(i/this._pageSize);return-1}return 0},i.prototype.getCheckedRows=function(t){for(var e=t?this._dataSource.rowCount:this.itemCount,i=[],o=0;o<e;o++){var n=t?this._rows[o]:this._pubItems[o];n.checked&&i.push(n.dataRow)}return i},i.prototype.resetCheckables=function(){for(var t=this._rows.length;t--;)this._rows[t]._setCheckable(!0);this._fireRefresh()},i.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():Qn.clearCheckables(this),this._fireRefresh()},i.prototype.setCheckFieldIndex=function(t){e.prototype.setCheckFieldIndex.call(this,t)},i.prototype.getJsonRows=function(){return this._pubItems.map((function(t){return t.getRowObject()}))},i.prototype.addCellStyle=function(t,e,i){return this._cellStyleMapTag.addCellStyle(t,e,i)},i.prototype.removeCellStyle=function(t,e){return this._cellStyleMapTag.removeCellStyle(t,e)},i.prototype.getUserCellStyle=function(t,e){return this._cellStyleMapTag.getCellStyle(t,e)},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._dataSource},set:function(t){if(t!==this._dataSource){this.$_clearRows(!0);var e=this._dataSource;e&&(this._checkableTag&&this._checkableTag.disconnect(),this._cellStyleMapTag.disconnect(),e.disposing||(e.removeTag(this._cellStyleMapTag),e.removeListener(this),e.unregisterCommandListener(this))),(e=this._dataSource=t)&&(this._checkableTag&&this._checkableTag.connect(e),this._cellStyleMapTag.connect(e),e.addTag(this._cellStyleMapTag),this.$_buildRows(),e.addListener(this),e.registerCommandListener(this)),this.disposing||(this.$_resetSummary(),this._fireReset())}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._pubCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._pubCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemLength",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return this._maxItemCount},set:function(t){(t=Math.max(0,t))!=this._maxItemCount&&(this._maxItemCount=t,this._refreshItems())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._sorted},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return!this.sorted},enumerable:!1,configurable:!0}),i.prototype._hideDeletedChanged=function(){this.$_buildItems(),this._fireRefresh()},i.prototype.getItem=function(t){return t<0||t>=this._pubCount?null:this._pubItems[t]},i.prototype.getItems=function(t,e){return this._pubItems.slice(t,t+e)},i.prototype.getIndexOfRow=function(t){if(t>=0&&t<this._rows.length){var e=this._rows[t];return e&&this._pubItems.indexOf(e)>=0?e.index:-1}return-1},i.prototype.getItemOfRow=function(t,e){if(t>=0&&t<this._rows.length){var i=this._rows[t];return i.index>=0||e?i:null}return null},i.prototype._refreshItems=function(){var t={};this.$_saveExtents(t),this.$_clearRows(!1),this.$_buildRows(t),this._fireRefresh()},i.prototype.setFixed=function(t,e,i,o){t=Math.max(0,t),(o||t!=this._fixedCount||e!=this._fixedSorting||i!=this._filtering)&&(this._fixedCount=t,this._fixedSorting=e,this._fixedFiltering=i,this.$_buildItems(),this._fireRefresh())},i.prototype.exchange=function(t,e){if(t!=e&&!this._sorted&&!this._filtered){if(t<0||t>=this._rows.length)throw new Error("index1 is out of bounds: "+t);if(e<0||e>=this._rows.length)throw new Error("index2 is out of bounds: "+t);var i=this._rows[t];this._rows[t]=this._rows[e],this._rows[e]=i}},i.prototype.clearDisplayLevels=function(){for(var t=this._rows,e=t.length,i=0;i<e;i++)t[i]._displayLevel=-1},i.prototype.getAllItems=function(){return this._pubItems.slice()},i.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e?e.count:this.itemCount},i.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},i.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},i.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},i.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},i.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},i.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},i.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},i.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},i.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},i.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},i.prototype.canGrouping=function(t){return this.fireGrouping(t)},i.prototype.$_saveExtents=function(t){for(var e=0,i=this._rows.length;e<i;e++){var o=this._rows[e];o.dataRowId>=0&&(t[o.dataRowId]={exts:o._extents,heights:o.heights&&o.heights.slice()})}},i.prototype.$_clearRows=function(t){t&&this.clearRowHeights(!0),this._rows.length=0,this._filteredItems.length=0,this._filtered=!1,this._sorted=!1,this._sortedItems.length=0,this._pubItems=this._rows,this.$_clearDistincts()},i.prototype.$_clearIndicies=function(){for(var t=this._rows.length;t--;)this._rows[t]._index=-1},i.prototype.$_clearDistincts=function(){for(var t=this._distinctRows.length;t--;)this._distinctRows[t]=null;this._distinctRows.length=0},i.prototype.$_buildRows=function(t){void 0===t&&(t=null);var e=this._dataSource;if(e){this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),this._rowCount=e.rowCount,!this._filtered&&!this._paging&&this.maxItemCount>0&&(this._rowCount=Math.min(this._rowCount,this.maxItemCount)),this._rows=new Array(this._rowCount);for(var i=0,o=this._rowCount;i<o;i++){var n=this._rows[i]=this.$_createRow(i);if(t&&t.hasOwnProperty(n.dataId)){var r=t[n.dataId];n._extents=r.exts,n.heights=r.heights&&r.heights.slice()}}this.$_buildItems(),this._checkableTag&&this._checkableTag.setRows(),0==this._rowCount&&this.clearRowHeights(!0)}},i.prototype.$_resetCounts=function(){this._filtered?this._pubCount=this._itemCount=this._items.length:this._pubCount=this._itemCount=this._rowCount=this._rows.length},i.prototype.$_buildItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.maxItemCount>0?this.maxItemCount:this._rows.length;if(this._rowCount=this._rows.length,this._pubItems=this._items=this._rows,this._pubCount=this._itemCount=this._rows.length,this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),(this._filtered||this._paging)&&this.$_clearIndicies(),this._filtered){if(this._filteredItems.length=0,this.hideDeleted||this._dataSource.hiddenCount>0)for(var o=0;o<this._rowCount;o++){var n=this._rows[o],r=this._dataSource.getRowState(this._rows[o].dataRow),s=this._dataSource.isHiddenRow(this._rows[o].dataRow);this.hideDeleted&&Rt(r)||s?n._index=-1:n._index=0}else for(o=0;o<this._rowCount;o++)this._rows[o]._index=0;var a=this.fixedCount,l=a>0&&!this._fixedFiltering,u=this._rows.length;if(!t){o=0;for(var c=this._filters.length;o<c;o++)if(y=this._filters[o])for(var h=0;h<y.length;h++)y[h].prepare(this._filterRuntime,this._dataSource)}this._paging||(u=Math.min(u,i));var p=0;for(o=0;o<this._rowCount&&p<u;o++)if((n=this._rows[o]).index>=0)if(t||l&&p<a)this._filteredItems.push(n),p++;else{var d=!this._filterOr,f=0,g=0;for(c=this._filters.length;g<c;g++){var y;if((y=this._filters[g])&&f++,this._filterOr){if(y&&this.$_select(y,n,g)){d=!0;break}}else if(y&&!this.$_select(y,n,g)){d=!1;break}}d||0===f?(this._filteredItems.push(n),p++):n._index=-1}this._pubItems=this._items=this._filteredItems,this._pubCount=this._itemCount=this._items.length}else this._filteredItems.length=0;if(this._sorted){if(e){var _=this._sortedItems;for(o=_.length;o--;)_[o].index<0&&_.splice(o,1)}else this.$_sortRows();this._pubItems=this._sortedItems}else this._sortedItems.length=0;this._paging&&this.$_buildPageItems(),this.$_clearSummary(),this._resetItemIndicies(0)},i.prototype.$_buildPageItems=function(){var t=this.$_getPageItems();this._pageItems.length=0;for(var e=this._pageStart=this._pageStartIndex>=0?this._pageStartIndex:this._currPage*this._pageSize,i=t.length,o=this.maxItemCount>0?this.maxItemCount:i,n=Math.min(this._pageSize,o);e<i&&n>0;e++,n--)this._pageItems.push(t[e]);this._pubItems=this._pageItems,this._pubCount=this._pubItems.length},i.prototype.$_buildPage=function(){this.$_clearIndicies(),this.$_buildPageItems(),this._resetItemIndicies(0)},i.prototype.$_compareFuncs=function(e,i){for(var o={},n=this._dataSource,r=0,s=e.length;r<s;r++){var a=n.getField(e[r]);if(a){var l=n.getDataComparer(a.index)||this._labelComparer[a.index],u=i[r]==t.SortCase.INSENSITIVE;if(!l)switch(a.dataType){case t.ValueType.DATETIME:case t.ValueType.NUMBER:l=n.compareNumbers.bind(n);break;case t.ValueType.BOOLEAN:l=n.compareBools.bind(n);break;case t.ValueType.OBJECT:l=n.compareObjects.bind(n);break;default:l=u?n.compareTexts.bind(n):n.compareValues.bind(n)}l&&(o[e[r]]=l)}}return o},i.prototype.$_sortRows=function(e){var i=this;void 0===e&&(e=null);var o=e||this._items.slice(),n=[];this._fixedCount>0&&!this._fixedSorting&&(n=o.splice(0,this._fixedCount));var r=this.$_compareFuncs(this._sortFields,this._sortCases);o.sort((function(e,o){for(var n,s,a,l=0,u=0,c=i._sortFields.length;u<c&&(s=i._sortDirections[u],a=i._sortFields.length==u+1,!(n=r[i._sortFields[u]])||0===(l=n(i._sortFields[u],e.dataRow,o.dataRow)));u++);return 0===(l*=s===t.SortDirection.DESCENDING?-1:1)&&a?s===t.SortDirection.DESCENDING?o.dataRow-e.dataRow:e.dataRow-o.dataRow:l})),this._sortedItems=n.concat(o)},i.prototype.$_createRow=function(t){var e=new So(t);return this.attachItem(e),e._dataRowId=e.dataId,e},i.prototype.$_createAllRow=function(){for(var t=0;t<this._rowCount;t++)this._rows[t]||(this._rows[t]=this.$_createRow(t))},i.prototype.$_resetSummary=function(){this._summaryMap=[]},i.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length-1;t>=0;t--)this._summaryMap[t]&&this._summaryMap[t].clear()},i.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this._dataSource;i&&i.canSummarize(t)&&(e=new fo(t),this._summaryMap[t]=e)}return e&&0==e.count&&this.itemCount>0&&this.$_summarize(e),e},i.prototype.$_summarize=function(e){var i=this._dataSource;if(i)if(this._filtered){for(var o=this._items.length,n=new Array(o),r=0;r<o;r++)n[r]=this._items[r].dataRow;i.summarizeRange(e,n,this._summaryMode==t.SummaryMode.STATISTICAL)}else i.summarize(e,this._summaryMode==t.SummaryMode.STATISTICAL)},i.prototype.$_needSort=function(){return this._sorted&&this._sortMode==t.SortMode.AUTO},i.prototype.$_needFilter=function(){return this._filtered&&this._filterMode==t.FilterMode.AUTO},i.prototype.$_checkFiltered=function(){if(this._dataSource)return this._filters.length=this._dataSource.fieldCount,this.hasFilters()||this.hideDeleted&&this._dataSource.deletedCount>0||this._dataSource.hiddenCount>0},i.prototype.$_select=function(t,e,i){for(var o=0,n=t.length;o<n;o++)if(t[o].select(this._filterRuntime,e.parent,e,i))return!0},i.prototype.$_checkSorted=function(){for(var t=this._sortFields.length-1;t>=0;t--)this._sortFields[t]>this._dataSource.fieldCount&&(this._sortFields.splice(t,1),this._sortDirections.splice(t,1),this._sortCases.splice(t,1));return this._sortFields&&this._sortFields.length>0},i.prototype.$_getPageItems=function(){return this._sorted?this._sortedItems:this._filtered?this._filteredItems:this._items},i.prototype.fireGrouping=function(t){return this.fireConfirmEvent(Yn.GROUPING,t)},i.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},i.prototype.onDataProviderDisposed=function(t){this._checkableTag&&this._checkableTag.disconnect(),this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset(),this.dataSource=null},i.prototype.onDataProviderReset=function(t){this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset()},i.prototype.onDataProviderRefresh=function(t){this._refreshItems()},i.prototype.onDataProviderRefreshClient=function(t){this._fireRefreshClient()},i.prototype.onDataProviderRowCountChanged=function(t,e){this._fireRefreshClient()},i.prototype.onDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},i.prototype.onDataProviderRowInserted=function(t,e,i){var o=this._rows,n=e<o.length?o[e]:null,r=this.$_createRow(e);o.splice(e,0,r);for(var s=e,a=o.length;s<a;s++)o[s]._dataRow=s;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var l=this._filteredItems;e=null!=i?i:Math.max(0,n?l.indexOf(n):l.length),l.splice(e,0,r)}this._sorted&&(l=this._sortedItems,e=null!=i?i:Math.max(0,n?l.indexOf(n):l.length),l.splice(e,0,r)),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(this._sorted?0:e)}this._checkableTag&&this._checkableTag.insertRow(e),this._fireItemInserted(r),this._fireRefresh()},i.prototype.onDataProviderRowsInserted=function(t,e,i,o){if(!(i<0)){for(var n,r=this._rows,s=e<r.length?r[e]:null,a=[],l=0;l<i;l++)a.push(n=this.$_createRow(e+l)),r.splice(e+l,0,n);var u=r.length;for(l=e;l<u;l++)r[l]._dataRow=l;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var c=this._filteredItems;for(e=null!=o?o:Math.max(0,s?c.indexOf(s):c.length),l=0;l<a.length;l++)c.splice(e+l,0,a[l])}if(this._sorted)for(c=this._sortedItems,e=null!=o?o:Math.max(0,s?c.indexOf(s):c.length),l=0;l<a.length;l++)c.splice(e+l,0,a[l]);this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(e)}this._checkableTag&&this._checkableTag.insertRows(e,i),this._fireRefresh()}},i.prototype.$_silentRemoveRow=function(t){var e,i;this._filtered&&(i=(e=this._filteredItems).indexOf(t))>=0&&e.splice(i,1),this._sorted&&(i=(e=this._sortedItems).indexOf(t))>=0&&e.splice(i,1),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},i.prototype.onDataProviderRowRemoved=function(t,e){var i=this._rows,o=i[e];i.splice(e,1);for(var n=i.length-1;n>=e;n--)i[n]._dataRow=n;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRow(o),0==i.length&&this.clearRowHeights(!0),this._fireItemDeleted(o),this._fireRefresh()},i.prototype.onDataProviderRowsRemoving=function(t,e){return!0},i.prototype.$_silentRemoveRows=function(t){if(this._filtered)for(var e=this._filteredItems,i=0;i<t.length;i++){var o=t[i];(n=e.indexOf(o))>=0&&e.splice(n,1)}if(this._sorted)for(e=this._sortedItems,i=0;i<t.length;i++){var n;o=t[i],(n=e.indexOf(o))>=0&&e.splice(n,1)}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},i.prototype.onDataProviderRowsRemoved=function(t,e){if(e&&!(e.length<1)){e.length>1&&e.sort((function(t,e){return t-e}));for(var i=this._rows,o=e[0],n=[],r=e.length-1;r>=0;r--)n.push(i[e[r]]),i.splice(e[r],1);for(r=this._rows.length-1;r>=o;r--)i[r]._dataRow=r;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRows(n),0==e.length&&this.clearRowHeights(!0),this._fireRefresh()}},i.prototype.onDataProviderRowUpdating=function(t,e,i){return!0},i.prototype.onDataProviderRowUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e]),this._fireRefresh()},i.prototype.onDataProviderRowsUpdated=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRows(e,i),this._fireRefresh()},i.prototype.onDataProviderRowListUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRowList(e),this._fireRefresh()},i.prototype.onDataProviderValueChanging=function(t,e,i,o){return!0},i.prototype.onDataProviderValueChanged=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e]),this._fireRefresh()},i.prototype.onDataProviderRowMoving=function(t,e,i){return!0},i.prototype.onDataProviderRowMoved=function(t,e,i){var o=this._rows,n=o.splice(e,1);o.splice(i,0,n[0]);for(var r=o.length,s=e=Math.min(e,i);s<r;s++)o[s]._dataRow=s;(this._sorted||this._paging||this.hideDeleted)&&(this.$_buildItems(),this._resetItemIndicies(0)),this._fireRefresh()},i.prototype.onDataProviderRowsMoving=function(t,e,i,o){return!0},i.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._refreshItems()},i.prototype.onDataProviderRowListMoving=function(t,e,i){return!0},i.prototype.onDataProviderRowListMoved=function(t,e,i){this._refreshItems()},i.prototype.onDataProviderStateChanged=function(t,e){if(this.hideDeleted){var i=this._rows[e];Rt(i.rowState)&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):this.$_silentRemoveRow(i),this._fireRefresh())}this._checkableTag&&this._checkableTag.updateRow(e),this._fireRowStateChanged(this._rows[e])},i.prototype.onDataProviderRowHided=function(t,e,i){if(this._filtered=this.$_checkFiltered(),i){if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else if(this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0))this.$_buildItems(!0,!0);else{var o=this.getItemsByRows(e);this.$_silentRemoveRows(o)}this._fireRefresh()}else this._refreshItems()},i.prototype.onDataProviderStatesChanged=function(t,e){if(this.hideDeleted){for(var i=!1,o=0,n=e.length;o<n;o++){var r=e[o],s=this._rows[r];if(Rt(s.rowState)){i=!0;break}}if(i){if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else if(this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0))this.$_buildItems(!0,!0);else{var a=this.getItemsByRows(e);this.$_silentRemoveRows(a)}this._fireRefresh()}}this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e))},i.prototype.onDataProviderRestoreRows=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e)),this._fireRefresh()},i.prototype.onDataProviderStatesCleared=function(t){this._pubCount!=t.rowCount&&this._refreshItems(),this._fireRowStatesCleared()},i}(Io),Zn=function(t){function e(e,i,o){var n=t.call(this)||this;return n._owner=e,n._exprNode=be.Default.parse(i,["value","values"]),n._runtime=new Xn,n._callback=o,n}return n(e,t),e.clearCheckables=function(t){for(var e=function(t){if(t){t.setCheckable(!0);for(var i=t.count;i--;){var o=t.getItem(i);o instanceof or&&e(o)}}},i=t.itemCount;i--;){var o=t.getItem(i);o instanceof or&&e(o)}},e.prototype.connect=function(t){this._runtime.setDataSource(t)},e.prototype.disconnect=function(){},e.prototype.clearRows=function(){e.clearCheckables(this._owner)},e.prototype.setRows=function(){for(var t=this._owner.itemCount;t--;){var e=this._owner.getItem(t);e instanceof or&&this.$_setCheckable(e,!0)}},e.prototype.addRow=function(t,e){void 0===e&&(e=!0);var i=this._owner.getItemOfRow(t.rowId);i instanceof or&&this.$_setCheckable(i,e)},e.prototype.addRows=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof or&&this.$_setCheckable(i,!0)}},e.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t.rowId);e instanceof or&&this.$_setCheckable(e,!1)},e.prototype.updateRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],n=this._owner.getItemOfRow(o.rowId);n instanceof or&&this.$_setCheckable(n,!1)}},e.prototype.changeStates=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof or&&this.$_setCheckable(i,!1)}},e.prototype.$_setCheckable=function(t,e){if(t){var i=this._callback,o=void 0;if(i?o=i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),o=this._exprNode.evaluate(this._runtime)),t.setCheckable(o),e)for(var n=t.count;n--;){var r=t.getItem(n);r instanceof or&&this.$_setCheckable(r,!0)}}},e}(kt),tr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._extents={},e}return n(e,t),e.prototype.connect=function(t){this._extents={}},e.prototype.disconnect=function(){this._extents={}},e.prototype.clearRows=function(){this._extents={}},e.prototype.setRows=function(){},e.prototype.addRow=function(t){this._extents[t.rowId]=0;for(var e=t.count-1;e>=0;e--)this.addRow(t.getChild(e))},e.prototype.addRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.addRow(o)}},e.prototype.removeRow=function(t){delete this._extents[t.rowId];for(var e=t.count-1;e>=0;e--)this.removeRow(t.getChild(e))},e.prototype.removeRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.removeRow(o)}},e.prototype.updateRow=function(t){},e.prototype.updateRows=function(t){},e.prototype.getExtents=function(t){var e=this._extents[t.rowId];return void 0===e?this._extents[t.rowId]=0:e},e.prototype.setExtents=function(t,e){this._extents[t.rowId]=e},e}(kt),er=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._styleMap={},e}return n(e,t),e.prototype.connect=function(t){this._styleMap={}},e.prototype.disconnect=function(){this._styleMap={}},e.prototype.clearRows=function(){this._styleMap={}},e.prototype.setRows=function(){this._styleMap={}},e.prototype.addRow=function(t){},e.prototype.addRows=function(t){},e.prototype.removeRow=function(t){delete this._styleMap[t.rowId]},e.prototype.removeRows=function(t){var e=this;t.forEach((function(t){return delete e._styleMap[t.rowId]}))},e.prototype.updateRow=function(t){},e.prototype.updateRows=function(t){},e.prototype.addCellStyle=function(t,e,i){return(this._styleMap[t]||(this._styleMap[t]={}))[e]=i,!0},e.prototype.getCellStyle=function(t,e){var i=this._styleMap[t];return i&&i[e]},e.prototype.removeCellStyle=function(t,e){if(null==t)this._styleMap={};else{var i=this._styleMap[t];i&&(i[e]&&delete i[e],Object.keys(i).length||this._styleMap[t])}return!0},e}(kt),ir=function(t){function e(){var e=t.call(this)||this;return e._extents=0,e}return n(e,t),e.prototype._getExtents=function(){return this._extents},e.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){},enumerable:!1,configurable:!0}),e}(wo),or=function(e){function i(t){var i=e.call(this)||this;return i._iconHeight=0,i._dataRow=t,i}return n(i,e),i.getTemp=function(t,e){return i.$_tempItem._dataRow=t,i.$_tempItem[wo.PARENT]=e,i.$_tempItem},i.prototype.dispose=function(){this._dataRow=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(t){this._iconHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"row",{get:function(){return this._dataRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowId",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconIndex",{get:function(){return this._dataRow?this._dataRow.iconIndex:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return this.count>0||this._dataRow&&this._dataRow.hasChildren},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rootItem",{get:function(){for(var t=this;t.level>1;)t=t.parent;return t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return t.SummaryMode.AGGREGATE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!1,configurable:!0}),i.prototype.setEditable=function(t,e){this._editable=t,this._readOnly=e},i.prototype._getExtents=function(){var t=this.provider;return t?t._extents.getExtents(this):0},i.prototype._setExtents=function(t){var e;null===(e=this.provider)||void 0===e||e._extents.setExtents(this,t)},Object.defineProperty(i.prototype,"isData",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isDataRow",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footer",{get:function(){return this._footer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerCount",{get:function(){return this._footer?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!1,configurable:!0}),i.prototype.getShadowRow=function(){return this._dataRow?this._dataRow.rowId:-1},Object.defineProperty(i.prototype,"dataId",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"descendantCount",{get:function(){return this._dataRow.descendantCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._dataRow.rowState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!this.hasChildren},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.TREE},enumerable:!1,configurable:!0}),i.prototype.getFooter=function(t){return this._footer},i.prototype.isFooter=function(t){return t===this._footer},i.prototype.canEdit=function(){return!0},i.prototype.createFooter=function(){this._footer||(this._footer=new ir)},i.prototype.setExpanded=function(t,e,i){(t!=this.expanded||i)&&(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},i.prototype.getData=function(t){return t=this.dataSource?this.dataSource.getFieldIndex(t):t,this._dataRow.getValue(t)},i.prototype.setData=function(t,e){t=this.dataSource?this.dataSource.getFieldIndex(t):t,this._dataRow.setValue(t,e,!1)},i.prototype.setItem=function(t,i){e.prototype.setItem.call(this,t,i),i._addChildren(t.children),t.clear()},i.prototype.exchange=function(t,e){this._exchangeItems(t,e)},i.prototype.moveChild=function(t,e){var i=t+e,o=this._children,n=o[t];if(e<0)for(var r=t;r>i;r--)o[r]=o[r-1];else for(r=t;r<i;r++)o[r]=o[r+1];o[i]=n},i.prototype.moveChildren=function(t,e,i){for(var o=this._children,n=o.splice(t,e),r=t+i,s=0;s<e;s++)o.splice(r+s,0,n[s])},i.prototype.changeParent=function(t,e){this.parent.remove(this),t&&t.insert(e,this)},i.prototype.getRowData=function(){return this._dataRow&&this._dataRow._values.concat()},i.$_tempItem=new i(null),i}(Eo),nr=function(t){function e(e){var i=t.call(this,null)||this;return i._rs=e,i}return n(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"provider",{get:function(){return this._rs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setExpanded=function(t,e,i){},Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._rs.dataSource},enumerable:!1,configurable:!0}),e}(or),rr=function(t){function e(e){var i=t.call(this)||this;return i._fixedCount=0,i._items=new Array,i._list=new Array,i._rs=e,i}return n(e,t),Object.defineProperty(e.prototype,"provider",{get:function(){return this._rs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!1,configurable:!0}),e.prototype.getItem=function(t){return this._items[t]},e.prototype.setItem=function(t,e){this._items[t]=e},e.prototype.indexOf=function(t){return this._items.indexOf(t)},e.prototype.clear=function(){this._items.length=0},e.prototype.expand=function(t,e,i){void 0===i&&(i=0),t&&this.$_expandItem(t,e,i)},e.prototype.collapse=function(t){if(t)for(var e=this._rs,i=this._items,o=t.index+1;o<i.length&&i[o].level>t.level;){if(i[o]==t.footer){e.footerWhenCollapsed||(i[o]._index=-1,i.splice(o,1));break}i[o]._index=-1,i.splice(o,1)}},e.prototype.getNext=function(t){return t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},e.prototype.getPrior=function(t){return t&&t.visible&&t.index>0?this._items[t.index-1]:null},e.prototype.insert=function(t,e){this._items.splice(e,0,t)},e.prototype.remove=function(t){var e=this._items,i=e.indexOf(t);if(i>=0&&(e.splice(i,1),t.expanded))for(;i<e.length&&t.isDescendant(e[i]);)e.splice(i,1)},e.prototype.$_collectChildren=function(t,e,i,o){for(var n=0,r=t.count;n<r;n++){var s=t.getItem(n);s&&(e.push(s),(i&&s.level<o||s.expanded)&&this.$_collectChildren(s,e,i,o))}t.footer&&e.push(t.footer)},e.prototype.$_expandItem=function(t,e,i){var o,n=this._items,r=this._list;if(o=t instanceof nr?this._fixedCount:t.index+1,i=Math.max(0,i),r.length=0,this.$_collectChildren(t,r,e,i>0?t.level+i:1e6),e){for(var s=o,a=n.length;s<a&&!(n[s].level<=t.level);s++);n.splice(o,s-o)}for(s=0,a=r.length;s<a;s++)n.splice(o+s,0,r[s])},e.prototype._clearAndInit=function(t){this.clear(),this._fixedCount=Math.min(t,this._rs.itemCount);for(var e=0;e<this._fixedCount;e++)this._items.push(this._rs.getItem(e))},e}(kt),sr=function(e){function i(){var i=e.call(this,null)||this;return i._sortMode=t.SortMode.AUTO,i._expandWhenGrouping=!0,i._footerWhenExpanded=!0,i._footerWhenCollapsed=!0,i._labelComparer={},i._summaryMode=t.SummaryMode.AGGREGATE,i._groupSummaryMode=t.SummaryMode.AGGREGATE,i._checkableExpression=null,i._checkableCallback=null,i._extents=new tr,i._filters={},i._filterRuntime=new Wo,i._filtered=!1,i._sorter=new $n,i._sortFields=[],i._sortDirections=[],i._sortCases=[],i._visibleItems=new rr(i),i._itemMap=[],i._itemCount=0,i._summaryMap=null,i._filterLock=0,i._includeParentItem=!0,i._cellStyleMap=new er,i}return n(i,e),i.prototype._doDispose=function(){this._filters=null,this._filterRuntime=null,this._sorter=null,this._sortFields=null,this._sortDirections=null,this._sortCases=null,this._visibleItems=null,this._itemMap=null,this._summaryMap=null,this._checkableExpression=null,this._checkableCallback=null,this._checkableTag=null,this._labelComparer=null;var t=this.dataSource;t&&!t.disposing&&(t.removeTag(this._extents),t.removeTag(this._cellStyleMap),t.removeListener(this),t.unregisterCommandListener(this)),e.prototype._doDispose.call(this)},i.prototype.getCommandStates=function(t){var e=this._itemMap[t.rowId];return e&&e._getExtents()},i.prototype.setCommandStates=function(t,e){var i=t&&this._itemMap[t.rowId];null!=e&&i&&i._setExtents(e)},Object.defineProperty(i.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerWhenExpanded",{get:function(){return this._footerWhenExpanded},set:function(t){t!=this._footerWhenExpanded&&(this._footerWhenExpanded=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerWhenCollapsed",{get:function(){return this._footerWhenCollapsed},set:function(t){t!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{get:function(){return this._groupSummaryMode},set:function(t){t!=this._groupSummaryMode&&(this._groupSummaryMode=t,this.$_resetGroupSummary(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._saveAndRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new Zn(this,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){t!=this._checkableCallback&&(this._checkableCallback=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new Zn(this,null,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._sortMode},set:function(t){t!=this._sortMode&&(this._sortMode=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){this._includeParentItem=t},enumerable:!1,configurable:!0}),i.prototype.$_needSort=function(){return this._sortFields&&this._sortFields.length>0&&this._sortMode==t.SortMode.AUTO},i.prototype.insertItem=function(t,e,i,o){var n=this._visibleItems;t.collapsed&&n.expand(t,!1);var r=n.indexOf(t.getItem(i));if(o){t.insert(i+1,e);for(var s=n.count,a=t.level+1;++r<s&&!(n.getItem(r).level<=a););n.insert(e,r)}else t.insert(i,e),n.insert(e,r)},i.prototype.appendItem=function(t,e){var i,o=this._visibleItems;t.collapsed&&o.expand(t,!1),i=t.count>0?o.indexOf(t.getItem(t.count-1)):o.indexOf(t);for(var n=o.count,r=t.level;++i<n&&!(o.getItem(i).level<=r););t.add(e),o.insert(e,i)},i.prototype.removeItem=function(t){this._visibleItems.remove(t),t.parent.remove(t)},i.prototype.$_calcLevel=function(t,e,i){var o,n,r=t.count,s=e;for(o=0;o<r;o++)(n=t.getItem(o))&&(s=Math.max(s,e+1),i&&!n.expanded||(s=Math.max(s,this.$_calcLevel(n,e+1,i))));return s},i.prototype.getLevels=function(t){return this.$_calcLevel(this._rootItem,0,t)},i.prototype.$_setExpanded=function(t,e,i){if(this._setExpanded(t,!0),this.dataSource.setHasChildren(t.row,!1),e)for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);r instanceof or&&(r.expanded||r.level<i)&&this.$_setExpanded(r,!0,i)}},i.prototype._expandItem=function(t,e,i,o,n){if(t&&(e||!t.expanded)){if(n&&!this._fireExpanding(t))return;this._visibleItems.collapse(t),this._visibleItems.expand(t,i,o),this._resetItemIndicies(t===this._rootItem?0:t.index),this.$_setExpanded(t,i,o>0?t.level+o:1e6);try{this._fireRefresh()}finally{n&&this._fireExpanded(t)}}},i.prototype.expand=function(t,e,i,o){void 0===o&&(o=0),this._expandItem(t,i,e,o,!0)},i.prototype.expandAll=function(t){this._expandItem(this._rootItem,!0,!0,t>0?t+1:0,!0)},i.prototype.$_setCollapsed=function(t,e){if(this._setExpanded(t,!1),e)for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);n instanceof or&&this.$_setCollapsed(n,!0)}},i.prototype._collapseItem=function(t,e,i,o){if(t&&(e||t.expanded)){if(o&&!this._fireCollapsing(t))return;this._visibleItems.collapse(t),this.$_setCollapsed(t,i),t==this._rootItem&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(t===this._rootItem?0:t.index);try{this._fireRefresh()}finally{o&&this._fireCollapsed(t)}}},i.prototype.collapse=function(t,e,i){this._collapseItem(t,i,e,!0)},i.prototype.collapseAll=function(){this._collapseItem(this._rootItem,!0,!0,!0)},i.prototype.$_saveExpanded=function(t){t._saveExpanded();for(var e=0,i=t.count;e<i;e++)this.$_saveExpanded(t.getItem(e))},i.prototype.orderBy=function(e,i,o,n){void 0===n&&(n=!0),this._fireSort(e,i,o),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var r=e?e.length:0,s=i?i.length:0,a=o?o.length:0,l=0;l<r;l++)this._sortFields.push(e[l]),s>l?this._sortDirections.push(i[l]):s>0?this._sortDirections.push(i[s-1]):this._sortDirections.push(t.SortDirection.ASCENDING),a>l?this._sortCases.push(o[l]):a>0?this._sortCases.push(o[a-1]):this._sortCases.push(t.SortCase.SENSITIVE);try{this._saveAndRefresh(!0,n),n&&this._fireRefresh()}finally{this._fireSorted()}},i.prototype.getSortFields=function(){return this._sortFields.concat()},i.prototype.getSortDirections=function(){return this._sortDirections.concat()},i.prototype.getSortCases=function(){return this._sortCases.concat()},i.prototype.beginFiltering=function(){this._filterLock++},i.prototype.$_prepareFiltering=function(t,e){for(var i=e._dataRow.count,o=e.rowId,n=o<=-1||this.$_selectItem(e.parent,e),r=0;r<i;r++){var s=new or(e._dataRow._children[r]);s[wo.PARENT]=e,s&&!this.dataSource.isHiddenRow(s.rowId)&&(n=this.$_prepareFiltering(t,s)||n)}return t[o]=n},i.prototype.endFiltering=function(t,e,i){var o={};t&&this._includeParentItem&&(o={},this.$_prepareFilters(),this.$_prepareFiltering(o,this._rootItem)),this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),t&&0==this._filterLock&&this.applyFilters(e,i,o))},i.prototype.hasFilter=function(t){var e=this._filters[t];return!!e&&e.length>0},i.prototype.addFilter=function(t,e){var i=this._filters[t];i||(i=[],this._filters[t]=i);var o=new Ho(e);return i.push(o),o},i.prototype.clearAllFilters=function(){this._filtered&&(this._filters={},this.applyFilters(null,null))},i.prototype.hasFilters=function(){for(var t in this._filters){var e=this._filters[t];if(e&&e.length>0)return!0}return!1},i.prototype.$_prepareFilters=function(){var t=this.dataSource,e=t.fieldCount;for(var i in this._filters)Number(i)>=e&&(this._filters[i]=null);if(this._filtered=this.hasFilters())for(var o in this._filters){var n=this._filters[o];if(n)for(var r=n.length;r--;)n[r].prepare(this._filterRuntime,t)}},i.prototype.applyFilters=function(t,e,i){if(i||this.$_prepareFilters(),0==this._filterLock){this.$_saveExpanded(this._rootItem),this.$_clearItems(),this.$_buildTree(!0,i);try{this._fireRefresh()}finally{this._fireFiltered(t,e)}}},i.prototype.getItemByRow=function(t){return t?this._itemMap[t.rowId]:null},i.prototype.getCheckedRows=function(){var t=[];return function t(e,i){if(e instanceof or)for(var o=0,n=e.count;o<n;o++){var r=e.getItem(o),s=void 0;r.checked&&(s=r.row)&&i.push(s),t(r,i)}}(this._rootItem,t),t},i.prototype.getCheckedRowIds=function(){var t=[];return function t(e,i){if(e instanceof or)for(var o=0,n=e.count;o<n;o++){var r=e.getItem(o),s=void 0;r.checked&&(s=r.dataRow)>=0&&i.push(s),t(r,i)}}(this._rootItem,t),t},i.prototype.resetCheckables=function(){this._checkableTag&&(this._checkableTag.clearRows(),this._fireRefresh())},i.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():Zn.clearCheckables(this),this._fireRefresh()},i.prototype.$_checkChildren=function(t,e,i){for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);r&&(i?r.checkable&&this._setCheckItem(r,e):this._setCheckItem(r,e)),r instanceof or&&this.$_checkChildren(r,e,i)}},i.prototype._clearChecked=function(){this.$_checkChildren(this._rootItem,!1,!1)},i.prototype.checkAll=function(t,i,o,n){i?e.prototype.checkAll.call(this,t,i,o,n,!1):(this.$_checkChildren(this._rootItem,t,o),n?this._fireItemAllChecked(t):this._fireRefreshClient())},i.prototype.addCellStyle=function(t,e,i){return this._cellStyleMap.addCellStyle(t,e,i)},i.prototype.removeCellStyle=function(t,e){return this._cellStyleMap.removeCellStyle(t,e)},i.prototype.getUserCellStyle=function(t,e){return this._cellStyleMap.getCellStyle(t,e)},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._ds},set:function(t){if(t!==this._ds){this.$_clearItems(),this.$_resetSummary();var e=this._ds;e&&!e.disposing&&(e.removeTag(this._extents),e.removeTag(this._cellStyleMap),e.removeListener(this),e.unregisterCommandListener(this)),(e=this._ds=t)&&(this.$_buildTree(),e.addTag(this._extents),e.addTag(this._cellStyleMap),e.addListener(this,0),e.registerCommandListener(this)),this._fireReset()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._visibleItems.count},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._itemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._sortFields&&this._sortFields.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return!this.sorted},enumerable:!1,configurable:!0}),i.prototype._createRootItem=function(){var t=new nr(this);return this._setExpanded(t,!0),t},i.prototype.getItem=function(t){return t>=0&&t<this._visibleItems.count?this._visibleItems.getItem(t):null},i.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},i.prototype.getItemOfRow=function(t,e){return this._itemMap[t]},i.prototype.$_collectItems=function(t,e){for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);n instanceof or&&(e.push(n),this.$_collectItems(n,e))}},i.prototype.getAllItems=function(){var t=[];return this.$_collectItems(this._rootItem,t),t},i.prototype.getJsonRows=function(){return this.getAllItems().map((function(t){var e=t.getRowObject();return e.__level=t.level,e}))},i.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e?e.count:this.itemCount},i.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},i.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},i.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},i.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},i.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},i.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},i.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},i.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},i.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},i.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},i.prototype.findItem=function(e,i,o,n,r){var s=this.dataSource;if(!s)return-1;if(this.itemCount<1)return-1;var a=Math.min(e.length,i.length);if(a<1)return-1;var l=o.allFields,u=o.caseSensitive,c=o.partialMatch,h=null,p=[],d=o.reverse,f=o.compareCallback;f="function"==typeof f?f:xt.compareTextValue;for(var g=0;g<a;g++)p[g]=s.getField(e[g]).dataType;n=Math.max(0,n),r=Math.min(this._visibleItems.count-1,r);for(var y=n;d?y>=r:y<=r;d?y--:y++){var _=this._visibleItems.getItem(y),m=_.dataRow,v=_.dataRow>=0;if(v)for(g=0;g<a;g++){var b=_.getData(e[g]),C=s.getOrgFieldName(e[g]);switch(p[g]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i[g]instanceof Date)v=f.call(s.handler,i[g],b,u,c,m,C);else{if(!h){var w=/[.]/.test(i[g])?"yyyy.MM.dd":/[/]/.test(i[g])?"yyyy/MM/dd":/[-]/.test(i[g])?"yyyy-MM-dd":"yyyyMMdd";h=new Be(w)}v=f.call(s.handler,i[g],b?h.getText(b):b,u,c,m,C)}break;default:v=f.call(s.handler,i[g],b,u,c,m,C)}if(v&&!l)return y;if(!v&&l)break}if(v)return y}return-1},i.prototype.findCell=function(e,i,o,n,r,s){var a=this.dataSource;if(!a)return null;if(this.itemCount<1)return null;for(var l=o.reverse,u=o.caseSensitive,c=o.partialMatch,h=a.fieldCount,p=e.length,d=null,f=[],g=0;g<h;g++)f[g]=a.getField(g).dataType;n=Math.max(0,n),r=Math.min(this._visibleItems.count-1,r),s=Math.max(l?-1:0,Math.min(s,p-1)),l?s<0&&(s=e.length-1,n--):s>=e.length&&(n++,s=0);var y=o.compareCallback;y="function"==typeof y?y:xt.compareTextValue;for(var _=n;l?_>=r:_<=r;l?_--:_++){var m=this._visibleItems.getItem(_),v=m.dataRow,b=!1;if(m.dataRow>=0)for(g=l?_<n?p-1:s:_>n?0:s;l?g>=0:g<p;l?g--:g++){var C=e[g],w=a.getOrgFieldName(C);if(C>=0&&C<h){var S=m.getData(C);switch(f[C]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i instanceof Date)b=y.call(a.handler,i,S,u,c,v,w);else{if(!d){var E=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd";d=new Be(E)}b=y.call(a.handler,i,S?d.getText(S):S,u,c,v,w)}break;default:b=y.call(a.handler,i,S,u,c,v,w)}if(b)return{itemIndex:_,fieldIndex:C,searchFieldIndex:g}}}}return null},i.prototype.$_internalAddItem=function(t,e,i){var o=or.getTemp(e,t),n=this.dataSource;if(!(this.hideDeleted&&Rt(o.rowState)||n.isHiddenRow(e.rowId)))return o&&(null!=i?i:this.$_selectItem(t,o))?(o=new or(e),t.insert(e.index,o),this._itemCount++,this._itemMap[e.rowId]=o,o):void 0},i.prototype.$_internalRemoveItem=function(t){t&&(t.parent.remove(t),this._itemCount--,this._itemMap[t.row.rowId]=void 0)},i.prototype.$_internalRowStateChanged=function(t,e){if(void 0===e&&(e=!0),t)if(this.hideDeleted&&Rt(t.rowState)){var i=t.parent;this.$_internalRemoveItem(t),this.$_clearSummary(),i.expanded&&i.visible&&(this._visibleItems.remove(t),e=!0),e&&this._fireRefresh()}else this._fireItemChanged(t)},i.prototype.$_selectField=function(t,e,i,o){for(var n=0,r=t.length;n<r;n++){var s=t[n];if(!(s.model instanceof jo)&&s.select(this._filterRuntime,e,i,o))return!0}return!1},i.prototype.$_selectItem=function(t,e){if(!e)return!1;for(var i in this._filters){var o=this._filters[i];if(o&&!this.$_selectField(o,t,e,Number(i)))return!1}return!!e},i.prototype._setItem=function(t,e){this._visibleItems.setItem(t.index,e),this._resetItemIndex(t.index)},i.prototype.$_resetVisibleItems=function(){this._visibleItems._clearAndInit(this.fixedCount),this._visibleItems.expand(this._rootItem,!1),this._setExpanded(this._rootItem,!0),this._resetItemIndicies(0)},i.prototype.$_clearItems=function(){this._visibleItems.clear(),this._rootItem.clear(),this._itemMap=[],this._itemCount=0},i.prototype.$_buildItems=function(t,e,i){void 0===e&&(e=!1);for(var o=t.row,n=o.count,r=0;r<n;r++){var s=o.getChild(r),a=this.$_internalAddItem(t,s,i?i[s.rowId]:null);a&&(e&&a._restoreExpanded(),s.count>0&&this.$_buildItems(a,e,i))}},i.prototype.$_sortItem=function(t){var e=t.count;e>1&&this.$_sort(t,0,0,e-1);for(var i=0;i<e;i++){var o=t.getItem(i);o instanceof or&&this.$_sortItem(o)}},i.prototype.$_sort=function(e,i,o,n){var r,s=this._sortFields[i],a=this._sortDirections[i],l=this.dataSource,u=this._sortCases[i]==t.SortCase.INSENSITIVE;if(this._sorter.run(e,s,a,u,o,n,i+1==this._sortFields.length),r=l.getField(s).dataType==t.ValueType.TEXT&&u?l.equalTexts.bind(l):l.equalValues.bind(l),i+1<this._sortFields.length){for(var c=o,h=c;c<n;)c++,r(s,e.getItem(c).row,e.getItem(c-1).row)||(this.$_sort(e,i+1,h,c-1),h=c);h<n&&this.$_sort(e,i+1,h,n)}},i.prototype.$_buildTree=function(t,e){void 0===t&&(t=!1);var i=this.dataSource;this._rootItem._dataRow=i.rootRow,this._itemMap[this._rootItem._dataRow.rowId]=this._rootItem,this.$_buildItems(this._rootItem,t,e),this.$_clearSummary();for(var o=i.fieldCount,n=this._sortFields,r=this._sortDirections,s=this._sortCases,a=n.length;a--;)(n[a]<0||n[a]>=o)&&(n.splice(a,1),r.splice(a,1),s.splice(a,1));this.sorted&&this._rootItem.count>0&&this.$_sortItem(this._rootItem),this.$_resetVisibleItems(),this._checkableTag&&this._checkableTag.setRows()},i.prototype.$_resetSummary=function(){this._summaryMap=[]},i.prototype.$_resetGroupSummary=function(){},i.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length;t--;)this._summaryMap[t]&&this._summaryMap[t].clear()},i.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this.dataSource;i&&i.canSummarize(t)&&(e=new fo(t),this._summaryMap[t]=e)}return e&&0==e.count&&this.itemCount>0&&this.$_summarize(e),e},i.prototype.$_summarize=function(e){var i=this.dataSource;if(i)if(this._filtered||this.hideDeleted||i.hiddenCount>0){for(var o=this._rootItem.getDescendants(!1),n=o.length,r=[],s=0;s<n;s++){var a=o[s];a instanceof or&&!i.isHiddenRow(a.rowId)&&r.push(a.row)}e.count=r.length,i.summarizeRange(e,r,this.summaryMode==t.SummaryMode.STATISTICAL)}else e.count=i.rowCount,i.summarize(e,this.summaryMode==t.SummaryMode.STATISTICAL)},i.prototype._fireItemChanged=function(t){this._eventLock<=0&&this.fireEvent(i.ITEM_CHANGED,t)},i.prototype._fireExpanding=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(i.EXPANDING,t)},i.prototype._fireExpanded=function(t){this._eventLock<=0&&this.fireEvent(i.EXPANDED,t)},i.prototype._fireCollapsing=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(i.COLLAPSING,t)},i.prototype._fireCollapsed=function(t){this._eventLock<=0&&this.fireEvent(i.COLLAPSED,t)},i.prototype._fireParentChanging=function(t,e,o){return!(this._eventLock<=0)||this.fireConfirmEvent(i.PARENT_CHANGING,t,e,o)},i.prototype._fireParentChanged=function(t,e,o){this._eventLock<=0&&this.fireEvent(i.PARENT_CHANGED,t,e,o)},i.prototype._refreshItems=function(){this.$_clearItems(),this.$_buildTree(),this._fireRefresh()},i.prototype._saveAndRefresh=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),t&&this.$_saveExpanded(this._rootItem);var i={};this.hasFilters()&&function t(e,i){i[e.dataId]=!0,e.children.length>0&&e.children.forEach((function(e){t(e,i)}))}(this._rootItem,i),this.$_clearItems(),this.$_buildTree(t,i),e&&this._fireRefresh()},i.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},i.prototype.onTreeDataProviderDisposed=function(t){this.disposing||(this.$_clearItems(),this.$_resetSummary(),this._fireReset(),this.dataSource=null)},i.prototype.onTreeDataProviderReset=function(t){this.$_clearItems(),this.$_resetSummary(),this.$_buildTree(),this._fireReset()},i.prototype.onTreeDataProviderRefresh=function(t){this._refreshItems()},i.prototype.onTreeDataProviderRefreshClient=function(t){this._fireRefreshClient()},i.prototype.onDataProvderCleared=function(t){this._refreshItems()},i.prototype.onTreeDataProviderRowCountChanged=function(t,e){},i.prototype.onTreeDataProviderRowAdding=function(t,e,i){return!0},i.prototype.onTreeDataProviderRowAdded=function(t,e){var i=this._itemMap[e.parent.rowId];if(i){var o=this.$_internalAddItem(i,e,!0);o?(this.$_buildItems(o),this.$_clearSummary(),i.expanded?this._expandItem(i,!0,!1,0,!1):this._fireItemChanged(i)):this.$_resetVisibleItems()}this._checkableTag&&(this._checkableTag.addRow(e,!1),e.parent.level>0&&this._checkableTag.addRow(e.parent,!1)),this.$_needSort()&&this._saveAndRefresh()},i.prototype.onTreeDataProviderRowsAdded=function(t,e,i){var o,n=this._itemMap[e.rowId];if(n&&i&&(o=i.length)>0){for(var r=0;r<o;r++){var s=i[r],a=this.$_internalAddItem(n,s,!0);a&&this.$_buildItems(a)}this.$_clearSummary(),n.expanded?this._expandItem(n,!0,!1,0,!1):this._fireItemChanged(n),this._checkableTag&&(this._checkableTag.addRows(i),e.level>0&&this._checkableTag.addRow(e))}this.$_needSort()&&this._saveAndRefresh()},i.prototype.onTreeDataProviderRowRemoving=function(t,e){return!0},i.prototype.onTreeDataProviderRowRemoved=function(t,e){var i=this._itemMap[e.rowId];if(i){var o=i.parent;this.$_internalRemoveItem(i),this.$_clearSummary(),o.expanded&&o.visible&&(this._visibleItems.remove(i),this._fireRefresh())}},i.prototype.onTreeDataProviderRowsRemoving=function(t,e){return!0},i.prototype.onTreeDataProviderRowsRemoved=function(t,e){for(var i=e.length,o=!1,n=0;n<i;n++){var r=e[n],s=this._itemMap[r.rowId];if(s){var a=s.parent;this.$_internalRemoveItem(s),a.expanded&&a.visible&&(this._visibleItems.remove(s),o=!0)}}this.$_clearSummary(),o&&this._fireRefresh()},i.prototype.onTreeDataProviderRowUpdating=function(t,e){return!0},i.prototype.onTreeDataProviderRowUpdated=function(t,e){if(this.$_needSort())this._saveAndRefresh();else{var i=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(i),this._fireRefresh()}this._checkableTag&&this._checkableTag.updateRow(e)},i.prototype.onTreeDataProviderRowsUpdating=function(t,e){return!0},i.prototype.onTreeDataProviderRowsUpdated=function(t,e){this.$_needSort()?this._saveAndRefresh():(this.$_clearSummary(),this._fireRefresh()),this._checkableTag&&this._checkableTag.updateRows(e)},i.prototype.onTreeDataProviderValueChanging=function(t,e,i){return!0},i.prototype.onTreeDataProviderValueChanged=function(t,e,i){if(this.$_needSort())this._saveAndRefresh();else{var o=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(o),this._fireRefresh()}this._checkableTag&&this._checkableTag.updateRow(e)},i.prototype.onTreeDataProviderIconIndexChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.visible&&this._fireItemChanged(i)},i.prototype.onTreeDataProviderHasChildrenChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.visible&&this._fireItemChanged(i)},i.prototype.onTreeDataProviderRowStateChanged=function(t,e,i){var o=this._itemMap[e.rowId];this.$_internalRowStateChanged(o,i),this._checkableTag&&this._checkableTag.updateRow(e),!o&&i&&this._saveAndRefresh()},i.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var i=e.length,o=!1;if(1==i){var n=e[0];o=!(l=this._itemMap[n.rowId]),this.$_internalRowStateChanged(l),this._checkableTag&&this._checkableTag.updateRow(n),o&&this._saveAndRefresh()}else if(i>0){var r=!1;if(this.hideDeleted)for(var s=0,a=e.length;s<a;s++){var l=this._itemMap[e[s].rowId];if(o=o||!l,l&&Rt(l.rowState)){var u=l.parent;this.$_internalRemoveItem(l),u.expanded&&u.visible&&this._visibleItems.remove(l),r=!0}}this._checkableTag&&this._checkableTag.changeStates(e),r&&this.$_clearSummary(),o?this._saveAndRefresh():this._fireRefresh()}},i.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){if(!this.$_needSort()){var o=this._itemMap[e.rowId];o&&(o.parent.moveChild(o.childIndex,i),this.$_resetVisibleItems(),this._fireRefresh())}},i.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){if(!this.$_needSort()){var o=this._itemMap[e[0].rowId];o&&(o.parent.moveChildren(o.childIndex,e.length,i),this.$_resetVisibleItems(),this._fireRefresh())}},i.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,o){var n=this._itemMap[e.rowId];if(n){var r=this._itemMap[i.rowId];this.$_needSort()&&(o=r?r.count():0),n.changeParent(r,o),this.$_resetVisibleItems(),this._fireRefresh()}},i.prototype.onTreeDataProviderRowsParentChanged=function(t,e,i,o){var n=this._itemMap[e[0].rowId];if(n){var r=this._itemMap[i.rowId];this.$_needSort()&&(o=r?r.count():0);for(var s=0;s<e.length;s++){var a=e[s];(n=this._itemMap[a.rowId]).changeParent(r,o+s)}this.$_resetVisibleItems(),this._fireRefresh()}},i.prototype.onTreeDataProviderRowsHideChanged=function(t,e,i){if(i){for(var o=!1,n=0,r=e.length;n<r;n++){var s=e[n],a=this._itemMap[s];if(a){var l=a.parent;this.$_internalRemoveItem(a),l.expanded&&l.visible&&this._visibleItems.remove(a),o=!0}}o&&this.$_clearSummary(),this._fireRefresh()}else this._saveAndRefresh()},i.prototype.onTreeDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},i.ITEM_CHANGED="onTreeItemProviderItemChanged",i.EXPANDING="onTreeItemProviderExpanding",i.EXPANDED="onTreeItemProviderExpanded",i.COLLAPSING="onTreeItemProviderCollapsing",i.COLLAPSED="onTreeItemProviderCollapsed",i.PARENT_CHANGING="onTreeItemProviderParentChanging",i.PARENT_CHANGED="onTreeItemProviderParentChanged",i}(Io),ar=function(t){function e(e){var i=t.call(this)||this;return i._rs=e,i}return n(e,t),e.prototype.getCount=function(t){return this._rs.getNumber(t)},e.prototype.getSum=function(t){return this._rs.getSum(t)},e.prototype.getMax=function(t){return this._rs.getMax(t)},e.prototype.getMin=function(t){return this._rs.getMin(t)},e.prototype.getAvg=function(t){return this._rs.getAvg(t)},e.prototype.getVar=function(t){return this._rs.getVar(t)},e.prototype.getVarp=function(t){return this._rs.getVarp(t)},e.prototype.getStdev=function(t){return this._rs.getStdev(t)},e.prototype.getStdevp=function(t){return this._rs.getStdevp(t)},e.prototype.getDataCount=function(t){return this._rs.getDataCount(t)},e.prototype.getDataAvg=function(t){return this._rs.getDataAvg(t)},e}(kt),lr=function(e){function i(t,i,o){var n=e.call(this,i&&i.row)||this;return n._values=[],n._changeValues=[],n._started=!1,n._checkDiff=!1,n._strictDiff=!1,n._invalidFields=[],n._rs=t,n._target=i,n._state=o,n}return n(i,e),i.prototype.dispose=function(){this._values=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.dataSource,i=e.fieldCount;if(t){i=Math.min(i,t.length);for(var o=0;o<i;o++){var n=e.getField(o),r=this._values[o],s=n.readValue(t[o]);this._values[o]=s,this._started&&parent&&!n.equalValues(r,s)&&this._rs._editItemCellUpdated(this,o,r,s)}}else this._values=[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"invalidFields",{get:function(){return this._invalidFields},enumerable:!1,configurable:!0}),i.prototype.beginEdit=function(t,e){this._started=!0,this._checkDiff=t,this._strictDiff=e},i.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),n=this._values[t];e=o.readValue(e),this._values[t]=e,this._started&&this.parent&&!o.equalValues(n,e)&&this._rs._editItemCellUpdated(this,t,n,e)},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._rs.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemState",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._target?this._target.rowState:t.RowState.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanded",{get:function(){return!!this._target&&this._target.expanded},enumerable:!1,configurable:!0}),i.prototype.getData=function(t){return t=this.dataSource.getFieldIndex(t),this._values[t]},i.prototype.setData=function(t,e){var i=this.dataSource;if((t=i.getFieldIndex(t))<0||t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),n=this._values[t];e=o.readValue(e);var r=!this._checkDiff;r||(r=this._strictDiff?!o.equalValues(n,e):!o.sameValues(n,e)),r&&(this._values[t]=e,this._changeValues[t]=!0,this.parent&&(this._rs._editItemCellUpdated(this,t,n,e),this._rs._editItemCellEdited(this,t)))},i.prototype.getRowData=function(){return this._values.concat()},i.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++)e[t.getOrgFieldName(i)]=this._values[i];return e}return null},i.prototype.isEdited=function(t){return this._changeValues[t]},Object.defineProperty(i.prototype,"provider",{get:function(){return this._rs&&this._rs.source},enumerable:!1,configurable:!0}),i}(or),ur=function(e){function i(t){var i=e.call(this,null,t)||this;return i._observers=[],i._appending=!1,i._insertAfter=!1,i._insertIndex=-1,i._rs=new sr,i.source=i._rs,i._summarizer=new ar(i._rs),i}return n(i,e),i.prototype._doDispose=function(){this._rs=this._rs&&this._rs.dispose(),this._summarizer=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._summarizer},enumerable:!1,configurable:!0}),i.prototype.getLevels=function(t){return this._rs.getLevels(t)},i.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},i.prototype.orderBy=function(t,e,i){this._rs.orderBy(t,e,i)},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},Object.defineProperty(i.prototype,"labelComparer",{get:function(){return this._rs.labelComparer},set:function(t){this._rs.labelComparer=t},enumerable:!1,configurable:!0}),i.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},i.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},i.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},i.prototype.beginFiltering=function(){this._rs.beginFiltering()},i.prototype.endFiltering=function(t,e){this._rs.endFiltering(!0,t,e)},Object.defineProperty(i.prototype,"includeParentItem",{set:function(t){this._rs.includeParentItem=t},enumerable:!1,configurable:!0}),i.prototype.expand=function(t,e,i,o){this._rs.expand(t,e,i,o)},i.prototype.collapse=function(t,e){this._rs.collapse(t,e)},i.prototype.expandAll=function(t){this._rs.expandAll(t)},i.prototype.collapseAll=function(){this._rs.collapseAll()},i.prototype.getCheckedRows=function(){return this._rs.getCheckedRows()},i.prototype.getCheckedRowIds=function(){return this._rs.getCheckedRowIds()},Object.defineProperty(i.prototype,"checkableExpression",{set:function(t){this._rs.checkableExpression=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{set:function(t){this._rs.checkableCallback=t},enumerable:!1,configurable:!0}),i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getAllItems=function(){return this._rs.getAllItems()},i.prototype.getItem=function(t){return this._rs.getItem(t)},i.prototype.getItemOfRow=function(t){return this._rs.getItemOfRow(t)},i.prototype.findItem=function(t,e,i,o,n){return this._rs.findItem(t,e,i,o,n)},i.prototype.findCell=function(t,e,i,o,n,r){return this._rs.findCell(t,e,i,o,n,r)},i.prototype.checkItem=function(t,e,i,o){this._rs.checkItem(t,e,i,o)},i.prototype.checkAll=function(t,e,i,o){this._rs.checkAll(t,e,i,o)},i.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{set:function(t){this._rs.groupSummaryMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._rs.itemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rs.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._rs.sorted},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._rs.movable},enumerable:!1,configurable:!0}),i.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},i.prototype.canAppend=function(){return!1},i.prototype.canInsert=function(t){return!!t},i.prototype.canDelete=function(t){return!!t},i.prototype.$_replaceItem=function(t,e){t.parent.setItem(t,e),this._rs._setItem(t,e)},i.prototype._doBeginUpdate=function(e){return this._editingItem=this._editItem=this._createEditItem(e,t.ItemState.UPDATING,null),this.$_replaceItem(e,this._editItem),this._editItem},i.prototype._doBeginAppend=function(e){return this._editingItem=this._editItem=this._createEditItem(null,t.ItemState.APPENDING,e),this._editItem},i.prototype._doBeginInsert=function(e,i,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=!1),n)this._appending=!0,e.setExpanded(!0,!1,!1),this._editingItem=this._editItem=this._createEditItem(null,t.ItemState.INSERTING,i),this._rs.appendItem(e,this._editItem);else{var r=e.parent;this._appending=!1,this._insertAfter=o,this._insertIndex=r.indexOf(e),this._editingItem=this._editItem=this._createEditItem(e,t.ItemState.INSERTING,i),this._rs.insertItem(r,this._editItem,this._insertIndex,this._insertAfter)}return this._editItem},i.prototype._doCompleteUpdate=function(t){var e=!1;if(this.dataSource){this.$_replaceItem(this._editItem,t);var i=this._editItem.row;try{e=i.update(this._editItem.values,!1)}catch(e){throw this.$_replaceItem(t,this._editItem),e}e||this.$_replaceItem(t,this._editItem)}return e},i.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=this._editItem,o=!1;if(e){var n=i.parent,r=n.row,s=e.createRow(i.values,-1,!1),a=i.parent.indexOf(i);this._rs.removeItem(i);try{o=this.isAppending?r.addChild(s,!1):r.insertChild(a,s,!1)}catch(t){throw this._appending?this._rs.appendItem(n,i):this._rs.insertItem(n,i,this._insertIndex,this._insertAfter),t}if(o){var l=n.itemOfRow(s.rowId);i.setCheckable(l.checkable),this._copyExtents(i,l),i.heights&&(l.heights=i.heights.slice())}else this._appending?this._rs.appendItem(n,i):this._rs.insertItem(n,i,this._insertIndex,this._insertAfter)}return o},i.prototype._doCancelEdit=function(i,o){i==t.ItemState.UPDATING?(this.$_replaceItem(this._editItem,o),this._copyExtents(this._editItem,o)):i==t.ItemState.INSERTING&&this._editItem.parent&&this._rs.removeItem(this._editItem),e.prototype._doCancelEdit.call(this,i,o)},i.prototype._doCommitEdit=function(i,o){return i==t.ItemState.UPDATING||t.ItemState.INSERTING,e.prototype._doCommitEdit.call(this,i,o)},i.prototype.remove=function(t,e){if(t){var i=t.row;i&&i.parent.removeChild(i,e)}},i.prototype.getRemovableRows=function(t){if(t.length>0){for(var e=[],i=0,o=t.length;i<o;i++){var n=this._rs.getItem(t[i]);e.push(n.dataId)}return e}},i.prototype.removeRows=function(t,e){t&&this.dataSource.removeRows(t,e)},i.prototype.updateRows2=function(t){},i.prototype.setDataSource=function(t){this._rs.dataSource=t},Object.defineProperty(i.prototype,"rootItem",{get:function(){return this._rs._rootItem},enumerable:!1,configurable:!0}),i.prototype._createEditItem=function(e,i,o){this._editingItem=null;var n=this.dataSource;if(!n)return null;var r,s=n.fieldCount;switch(i){case t.ItemState.UPDATING:r=this._editingItem=new lr(this,e,i);for(var a=0;a<s;a++)r.setValue(a,e.getData(a));this._copyExtents(e,r),e.heights&&(r.heights=e.heights.slice());break;case t.ItemState.INSERTING:case t.ItemState.APPENDING:if((r=this._editingItem=new lr(this,null,i))._setExtents(0),o)for(a=0;a<s;a++)o.length>a&&r.setValue(a,o[a])}return this._editingItem},i.prototype.addCellStyle=function(t,e,i){return this._rs.addCellStyle(t,e,i)},i.prototype.removeCellStyle=function(t,e){return this._rs.removeCellStyle(t,e)},i.prototype.getUserCellStyle=function(t,e){return this._rs.getUserCellStyle(t,e)},i.prototype.onItemProviderFilterAdd=function(t,e,i){},i.prototype.onItemProviderFilterRemove=function(t,e,i){},i.prototype.onItemProviderFilterClear=function(t,e){},i.prototype.onItemProviderFilterClearAll=function(t){},i.prototype.onItemProviderFiltered=function(t,e,i){this._fireFiltered(e,i)},i.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},i.prototype.onItemProviderSorted=function(t){this._fireSorted()},i.prototype.onTreeItemProviderItemChanged=function(t,e){this._eventLock<=0&&this.fireEvent(sr.ITEM_CHANGED,e)},i.prototype.onTreeItemProviderExpanding=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(sr.EXPANDING,e)},i.prototype.onTreeItemProviderExpanded=function(t,e){this._eventLock<=0&&this.fireEvent(sr.EXPANDED,e)},i.prototype.onTreeItemProviderCollapsing=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(sr.COLLAPSING,e)},i.prototype.onTreeItemProviderCollapsed=function(t,e){this._eventLock<=0&&this.fireEvent(sr.COLLAPSED,e)},i}(ko),cr=function(t){function e(i){var o=t.call(this,i)||this;return Object.setPrototypeOf(o,e.prototype),o}return n(e,t),e}(Error),hr=function(t){function e(i,o,n,r){var s=t.call(this,o)||this;return Object.setPrototypeOf(s,e.prototype),s.level=i,s.column=n,s.userMessage=r,s}return n(e,t),e.prototype.toString=function(){return"Validation failed["+this.level.toUpperCase()+"]: "+this.message},e}(cr),pr=function(e){function i(i){var o=e.call(this)||this;return o._active=!0,o._mode=t.ValidationMode.ALWAYS,o._level=t.ValidationLevel.ERROR,o._name=i,o}return n(i,e),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?be.Default.parse(t,i.CAPITAL_INDEXERS):null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"description",{get:function(){return this._description},set:function(t){this._description=t},enumerable:!1,configurable:!0}),i.prototype.validate=function(t){if(this._exprNode&&!this._exprNode.evaluate(t)){var e=this._message||this._description||this._name||this._criteria;throw new hr(this._level,e,null,this._message)}},i.prototype.doAssignSimple=function(t){if("string"==typeof t)return this.criteria=t,!0},i.CAPITAL_INDEXERS=["value","values"],i}(kt),dr=function(e){function i(t){var i=e.call(this)||this;return i._items=[],i._isColumn=t,i}return n(i,e),i.prototype._doDispose=function(){this._items=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},set:function(t){this.assignFrom(t)},enumerable:!1,configurable:!0}),i.prototype.clear=function(){this._items=[]},i.prototype.addAll=function(t){if(t&&t.length>0)for(var e=0,i=t.length;e<i;e++)this._items.push(t[e])},i.prototype.validate=function(e,i,o,n){for(var r=0;r<this._items.length;r++){var s=this._items[r];if(s.active&&(s.mode==e||s.mode==t.ValidationMode.ALWAYS))try{s.validate(i)}catch(t){if(!(o=o&&!this._isColumn)||Y(s.level,n)<0)throw t instanceof hr?(t.level=s.level,t):new hr(s.level,t)}}},i.prototype.assignFrom=function(t){if(t!==this&&(this.clear(),t)){xt.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var o=new pr;o.assignFrom(t[e]),this._items.push(o)}}},i}(kt),fr=function(t){function e(){var e=t.call(this)||this;return e._item=null,e._dataSource=null,e._fieldCount=0,e}return n(e,t),e.prototype._doDispose=function(){this._item=null,this._dataSource=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t,this._dataSource=this._item.dataSource,this._fieldCount=this._dataSource?this._dataSource.fieldCount:0},enumerable:!1,configurable:!0}),e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_ROW:return this._item.index;case e.ID_DATAROW:return this._item.dataRow;case e.ID_CHECKED:return this._item.checked}throw new Lt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(i<0||i>=this._fieldCount)throw new Lt("Data field index out of bounds:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._item.getData(i)}throw new Lt("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,o){var n=o?this._dataSource.getFieldIndexC(i):this._dataSource.getFieldIndex(i);if(n<0||n>=this._fieldCount)throw new Lt("Data field is not exists:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._item.getData(n)}throw new Lt("Invalid identifier indexer: "+t)},e.ID_ROW=0,e.ID_DATAROW=1,e.ID_CHECKED=2,e.ID_VALUE=3,e.ID_VALUES=4,e.IDENTS={row:e.ID_ROW,datarow:e.ID_DATAROW,checked:e.ID_CHECKED,value:e.ID_VALUE,values:e.ID_VALUES},e}(jt),gr=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._doDispose=function(){this._index=null,this._dataSource=null,t.prototype._doDispose.call(this)},e.prototype.setIndex=function(t){this._index=t,this._value=this._index.item.getData(this._index.dataColumn.dataIndex),this._dataSource=this._index.item.dataSource},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._value;case e.ID_ROW:return this._index.itemIndex;case e.ID_DATAROW:return this._index.item.dataRow;case e.ID_INDEX:return this._index.column.index;case e.ID_FIELD:return this._index.dataColumn.dataIndex;case e.ID_CHECKED:var i=this._index.item;return!!i&&i.checked;case e.ID_TAG:return this._index.column.tag;case e.ID_BASE:var o=this._index.dataColumn.baseIndex;return o>=0?this._index.item.getData(o):void 0}throw new Lt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){var o=this._dataSource.fieldCount;if(i<0||i>=o)throw new Lt("Data field index out of bounds:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._index.item.getData(i)}throw new Lt("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,o){var n=o?this._dataSource.getFieldIndexC(i):this._dataSource.getFieldIndex(i),r=this._dataSource.fieldCount;if(n<0||n>=r)throw new Lt("Data field is not exists:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._index.item.getData(n)}throw new Lt("Invalid identifier indexer: "+t)},e.ID_VALUE=0,e.ID_ROW=1,e.ID_DATAROW=2,e.ID_INDEX=3,e.ID_FIELD=4,e.ID_CHECKED=5,e.ID_TAG=6,e.ID_BASE=7,e.ID_VALUES=8,e.IDENTS={value:e.ID_VALUE,row:e.ID_ROW,datarow:e.ID_DATAROW,index:e.ID_INDEX,field:e.ID_FIELD,checked:e.ID_CHECKED,tag:e.ID_TAG,base:e.ID_BASE,values:e.ID_VALUES},e}(jt),yr=function(e){function i(t){var i=e.call(this)||this;return i._cellList={},i._owner=t,i}return n(i,e),Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellList",{get:function(){return this._cellList},enumerable:!1,configurable:!0}),i.prototype.validateCell=function(t,e,i){this.$_validateCell(t,e,!0,this._owner.editOptions.commitLevel,i)},i.prototype.validateRow=function(e,i,o,n){var r=this._owner.editOptions.commitLevel;if(!o)for(var s=this._owner.getDataColumns(),a=0,l=s.length;a<l;a++){var u=s[a],c=hs.temp(this._owner,e.index,u);try{this.$_validateCell(c,i,!0,r,n)}catch(t){if(!(t instanceof hr))throw t;if(Y(t.level,r)<0)throw t;!n&&this.addInvalidateCell(c,t)}}var h=this._owner.validations;if(h&&h.count>0){var p=this._owner.rowValidationRuntime;p.item=e,h.validate(i?t.ValidationMode.INSERT:t.ValidationMode.UPDATE,p,!0,r)}this.owner._fireValidateRow(e,i,e.getRowObject())},i.prototype.clearInvalidCells=function(t){this.$_clearInvalidateList(t)},i.prototype.clearInvalidCell=function(t){this.$_clearInvalidateCell(t)},i.prototype.getError=function(t){return t.item?(this._cellList[vo(t.item.itemState)?-1:t.dataId]||{})[t.dataField]:null},i.prototype.cloneError=function(t,e){var i=this._cellList;i[t]&&(i[e]=JSON.parse(JSON.stringify(i[t])))},i.prototype.addInvalidateCell=function(t,e){this.$_addInvalidateCell(t,e)},i.prototype.getInvalidCells=function(t){var e,i=[],o=this._cellList;if(null!=t){var n=this._owner.dataSource.getRowId(t);if(null==n)return null;(e={})[n]=this._cellList[n],o=e}for(var r in o){var s=o[r];for(var a in s){var l=s[a];i.push(xt.deepCopy(l))}}return i.length>0?i:null},i.prototype.validateCells=function(e,i,o){var n=this._owner,r=n.getDataColumns(),s=[];if(e=xt.makeArray(e))for(var a=0,l=e.length;a<l;a++)(c=n.getItem(e[a]))&&c.isDataRow&&(delete this._cellList[c.dataId],s.push(c));else{if(i)for(a=0,l=n.itemCount;a<l;a++)(c=n.getItem(a))&&c.isDataRow&&(delete this._cellList[c.dataId],s.push(c));else s=!n.isTree()&&n.paged&&o?n.itemSource.getPagingAllItems():n.getAllItems();this._cellList={}}a=0;for(var u=s.length;a<u;a++){var c;if((c=s[a]).isDataRow){var h=0;for(l=r.length;h<l;h++){var p=r[h],d=ps.tempItem(n,c,p);try{this.$_validateCell(d,!1,!1,t.ValidationLevel.IGNORE,!1)}catch(t){xt.log("validateCells valiation fail add")}}}}return n.refreshView(),this.getInvalidCells()},i.prototype.clearInvalidateList=function(){this.$_clearInvalidateList()},i.prototype.checkRowIds=function(){var t=this.owner.dataSource;for(var e in this._cellList){var i=parseInt(e);-1!==i&&t.getDataRow(i)<0&&delete this._cellList[i]}},i.prototype.$_validateCell=function(e,i,o,n,r){var s=e.dataColumn;if(s){var a=this.owner.editOptions.validateOnlyEditColumn,l=!0;if((e.item instanceof Do||e.item instanceof lr)&&(l=e.item.isEdited(s.dataIndex)),!a||l||s.required)try{var u=e.item.getData(s.dataIndex);if(s.required){var c=s.grid,h=c&&c.dataSource&&c.dataSource.getField(s.dataIndex);if(h&&h.isEmpty(u)){var p=s.requiredMessage||"Value is required: "+s.fieldName;throw new hr(s.requiredLevel||t.ValidationLevel.ERROR,p,s,s.requiredMessage)}}var d=s.validations;if(d&&d.count>0){var f=this._owner.columnValidationRuntime;f.setIndex(e),d.validate(i?t.ValidationMode.INSERT:t.ValidationMode.UPDATE,f,o,n)}this.owner._fireValidateCell(e,i,e.item.getData(e.dataField)),!r&&this.$_clearInvalidateCell(e)}catch(t){throw t instanceof hr&&(t.column=s,!r&&this.$_addInvalidateCell(e,t)),t}}},i.prototype.$_addInvalidateCell=function(t,e){var i=vo(t.item.itemState)?-1:t.dataId,o=t.dataColumn&&t.dataColumn.dataIndex;if(!(null==i||o<=-1)){var n=this._cellList;(n[i]=n[i]||{})[o]={dataRow:t.dataRow,message:e.message,userMessage:e.userMessage,level:e.level,column:t.dataColumn.name,fieldName:t.dataColumn.fieldName}}},i.prototype.$_clearInvalidateCell=function(t){var e=vo(t.item.itemState)?-1:t.dataId,i=t.dataField,o=this._cellList[e];o&&o[i]&&delete o[i]},i.prototype.$_clearInvalidateList=function(t){null!=t?delete this._cellList[t]:this._cellList={},this._owner.refreshView()},i}(kt),_r=/(.*)/,mr="$1",vr=function(){function t(t){this._pattern=_r,this._replace=mr,this.$_parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),t.prototype.getText=function(t){return t&&t.replace(this._pattern,this._replace)},t.prototype.$_parse=function(t){if(t){var e=t.trim().split(xt.colonreg);if(e.length>1){var i=e[0].trim(),o=e[1].trim();i&&o&&('"'==i.charAt(0)&&(i=i.substr(1,i.length-2)),i&&('"'==o.charAt(0)&&(o=i.substr(1,o.length-2)),o&&(this._pattern=new RegExp(i,e[2]||""),this._replace=o)))}}},t.Formatters={},t}(),br=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._changed=function(){},e.INIT_COUNT=200,e}(kt),Cr=function(t){function e(){var e=t.call(this)||this;return e._level=0,e._mergeMode=!1,e}return n(e,t),e.getDefault=function(t,i){var o=e.$_default;return o._level=t,o._mergeMode=i,o},e.prototype.parseInit=function(t,e,i,o,n){var r=t.itemCount;(o=Math.min(r-i,o))<1||(this._mergeMode?this.$_parseMerged(t,e,i,o,n):this.$_parseNormal(t,e,i,o,n))},e.prototype.parseBounds=function(t,e,i,o,n){if(!(t.itemCount<1)){for(i=Math.max(0,i);i>=0&&n[i]<=0;){var r=t.getItem(i);if(r==this.$_getAncestor(r,this._level))break;i--}for(;i<=o&&n[i]>0;)i++;i<=o&&(this._mergeMode?this.$_parseMergedBounds(t,e,i,o,n):this.$_parseNormalBounds(t,e,i,o,n))}},e.prototype.$_getAncestor=function(t,e){var i=xt.cast(t,Eo);for(i||(i=t.parent);i.level>e;)i=i.parent;return i},e.prototype.$_parseNormal=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1)){var s=t.fixedCount,a=t.getItem(i),l=a,u=i,c=u+1;for(n[u]=u+1;c<r;)a=t.getItem(c),(c==s||a.level!=l.level||a.constructor!==l.constructor||a instanceof Oo||a instanceof xo)&&(u=c),n[c]=u+1,c++,l=a}},e.prototype.$_parseMerged=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1))for(var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,u=n[l]=l+1;u<r;){s=t.getItem(u);var c=this.$_getAncestor(s,this._level);if(c!=a){if(u>=o)break;a=c,l=u}n[u]=l+1,u++}},e.prototype.$_parseNormalBounds=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1)){var s=t.fixedCount,a=t.getItem(i),l=a,u=i,c=u+1;for(n[u]=u+1;c<r;)a=t.getItem(c),c!=s&&a.level==l.level&&a.constructor===l.constructor||(u=c),n[c]=u+1,c++,l=a}},e.prototype.$_parseMergedBounds=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1)){var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,u=l+1;for(n[l]=l+1;u<r;){s=t.getItem(u);var c=this.$_getAncestor(s,this._level);if(c!=a){if(u>o)break;a=c,l=u}n[u]=l+1,u++}}},e.$_default=new e,e}(br),wr=function(e){function i(){var t=e.call(this)||this;return t._item=null,t._field=-1,t._ds=null,t._fieldCount=0,t._grid=null,t._layout=null,t}return n(i,e),i.getObjectText=function(t,e,i,o){var n=e.objectKey||e.objectCallback,r=n?e.objectKey:i.objectKey,s=n?e.objectCallback:i.objectCallback;return s&&"function"==typeof s?s(i.orgFieldName,t.dataRow,o):r&&o.hasOwnProperty(r)?o[r]:JSON.stringify(o)},i.prototype._doDispose=function(){this._item=null,this._ds=null,this._grid=null,this._layout=null,e.prototype._doDispose.call(this)},i.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},i.prototype.setLayout=function(t){this._layout=t,this._column=t.firstColumn,this._grid=t.grid},i.prototype.setCell=function(t){this._item=t.item,this._field=t.dataField},i.prototype.setItem=function(t,e){this._item=t,this._field=e},i.prototype.clear=function(){this._item=null,this._field=null,this._layout=null,this._column=null,this._grid=null,this._ds=null},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(e){if(this._item){var o=void 0;switch(e){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_CHECKED:return this._item.checked;case i.ID_GROUP:return this._item.parent;case i.ID_VALUE:var n=this._ds.getField(this._field);return null!=(o=this._item.getData(this._field))&&n.dataType===t.ValueType.OBJECT?i.getObjectText(this._item,this._column,n,o):o;case i.ID_PREV_VALUES:var r=this._grid.getDataColumns(),s=r.indexOf(this._column);if(!r.length||s<1)return"";for(var a=[],l=0,u=Math.min(s,r.length);l<u;l++)null!=(o=this._item.getData(r[l].dataIndex))&&this._ds.getField(r[l].dataIndex).dataType===t.ValueType.OBJECT?a.push(i.getObjectText(this._item,r[l],r[l].getField(),o)):a.push(o);return a.join("`")}throw new Lt("Invalid identifier key: "+e)}},i.prototype.evaluateIndexerI=function(e,o){if(this._item){if(e==i.ID_VALUE||e==i.ID_VALUES){if(o<0||o>=this._fieldCount)throw new Lt("Data field index out of bounds:"+o);var n=this._item.getData(o);if(null!=n&&this._ds.getField(o).dataType===t.ValueType.OBJECT){var r=this._column.grid.columnByField(o);return i.getObjectText(this._item,r,r.getField(),n)}return n}throw new Lt("Invalid identifier indexer: "+e)}},i.prototype.evaluateIndexerS=function(e,o,n){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new Lt("Invalid identifier indexer: "+e);if(this._ds){var r=n?this._ds.getFieldIndexC(o):this._ds.getFieldIndex(o);if(r<0||r>=this._fieldCount)throw new Lt("Data field is not exists:"+o);var s=this._item.getData(r);if(null!=s&&this._ds.getField(r).dataType===t.ValueType.OBJECT){var a=this._column.grid.columnByField(r);return i.getObjectText(this._item,a,a.getField(),s)}return s}},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.ID_GROUP=5,i.ID_PREV_VALUES=6,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES,group:i.ID_GROUP,prevvalues:i.ID_PREV_VALUES},i}(jt),Sr={},Er=function(e){function i(t){var o=e.call(this)||this;return o._runtime=i.$_runtime=i.$_runtime||new wr,o.criteria=t,o}return n(i,e),i.createRule=function(t){var e="string"==typeof t?t:t&&t.criteria;return e?new i(e):null},i.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?be.Default.parse(t,null):null,this._changed())},enumerable:!1,configurable:!0}),i.prototype.parseInit=function(e,i,o,n,r){var s=this._layout.isBreakMergeOnEmpty(),a=e.fixedCount,l=e.itemCount,u=e.dataSource.rowCount;if(!((n=Math.min(l-o,n))<1||u<=0)){this._runtime.setDataSource(e.dataSource),this._runtime.setLayout(this._layout);for(var c=null,h=o;h<l&&(c=e.getItem(h),!this.$_isRow(c,!1));)r[h]=h+1,h++;if(!(h>=l)){var p,d=this._exprNode.isIdentifier("value")&&this._layout.getDataColumn().valueType!==t.ValueType.OBJECT,f=o=h;if(r[f]=f+1,!(c.dataRow>=u))for(d?p=c.getData(i):(this._runtime.setItem(c,i),p=this._exprNode.evaluate(this._runtime)),h=o+1;h<l;h++)if(c=e.getItem(h),this.$_isRow(c,!1)){if(c.dataRow>=u)break;var g=void 0;if(d?g=c.getData(i):(this._runtime.setItem(c,i),g=this._exprNode.evaluate(this._runtime)),h==a||null==g&&s||(g instanceof Date&&p instanceof Date?+g!=+p:g!=p)){if(h>=n)break;f=h,p=g}r[h]=f+1}else{if(h>=n)break;p=Sr,f=h,r[h]=f+1}}}},i.prototype.parseBounds=function(e,i,o,n,r){var s=this._layout.isBreakMergeOnEmpty(),a=!1,l=e.itemCount;if(!(l<1)){var u=e.fixedCount,c=this._exprNode.isIdentifier("value")&&this._layout.getDataColumn().valueType!==t.ValueType.OBJECT,h=Sr,p=Math.max(0,o),d=p,f=-1;if(this._runtime.setDataSource(e.dataSource),this._runtime.setLayout(this._layout),p>0&&r[p]<=0){var g=e.getItem(p);if(this.$_isRow(g,a)){var y=void 0;for(c?y=e.getItem(p).getData(i):(this._runtime.setItem(g,i),y=this._exprNode.evaluate(this._runtime)),p--;p>=0&&(g=e.getItem(p),this.$_isRow(g,a))&&(c?h=g.getData(i):(this._runtime.setItem(g,i),h=this._exprNode.evaluate(this._runtime)),!(p==u||null==h&&s||(h instanceof Date&&y instanceof Date?+h!=+y:h!=y)));)p--;for(var _=d-1;_>p;_--)r[_]=p+2;d-1>p&&(f=p+1)}else{for(r[p]=p+1,_=d-1;_>p;_--)r[_]=p+2;for(d-1>p+1&&(f=p+2),p--;p>=0&&r[p]<=0&&!this.$_isRow(e.getItem(p),a);)r[p]=p+1,p--}}for(p=Math.max(0,o);p<=n&&r[p]>0;)p++;for(;p<=n&&!this.$_isRow(e.getItem(p),a);)r[p]=p+1,p++;if(p<n){for(d=p,g=e.getItem(p),y=void 0,c?y=g.getData(i):(this._runtime.setItem(g,i),y=this._exprNode.evaluate(this._runtime)),p++;p<l;)if(g=e.getItem(p),this.$_isRow(g,a)){if(c?h=g.getData(i):(this._runtime.setItem(g,i),h=this._exprNode.evaluate(this._runtime)),p==u||void 0===h&&s||(h instanceof Date&&y instanceof Date?+h!=+y:h!=y)){var m=d;for(f>=0&&(m=f,f=-1),_=d;_<p;_++)r[_]=m+1;if(p>=n)break;y=h,d=p}else r[p]=d+1;p++}else{for(m=d,f>=0&&(m=f,f=-1),_=d;_<p;_++)r[_]=m+1;for(r[p]=p+1,p++;p<l&&!this.$_isRow(e.getItem(p),a);)r[p]=p+1,p++;if(d=p,p>=n)break}if(p==l&&(h instanceof Date&&y instanceof Date?+h==+y:h==y))for(m=f>=0?f:d,_=d;_<p;_++)r[_]=m+1}}},i.prototype.$_isRow=function(t,e){var i=t instanceof So&&!(t instanceof Po);if(i&&!e){var o=t.parent;i=o.expanded||o.firstItem!==t}return i},i.$_runtime=null,i}(br),xr=function(t){function e(){return t.call(this)||this}return n(e,t),Object.defineProperty(e.prototype,"head",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return-1},enumerable:!1,configurable:!0}),e}(kt),Or=function(t){function e(e){var i=t.call(this)||this;return i._group=null,i._column=e.c1._columnObj,i._head=e.top,i._tail=e.bottom,i}return n(e,t),e.borrow=function(t){var i=e.$_rooms.pop();return i?(i._head=t.top,i._tail=t.bottom):i=new e(t),i},e.returnTo=function(t){if(t){var i=e.$_rooms;i.indexOf(t)<0&&i.push(t)}},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"head",{get:function(){return this._head},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return this._group},set:function(t){this._group=t},enumerable:!1,configurable:!0}),e.prototype.getHead=function(t){return t?t.set(this._head,this._column):t=this._column.grid.getIndex(this._head,this._column),t},e.prototype.getTail=function(t){return t?t.set(this._tail,this._column):t=this._column.grid.getIndex(this._tail,this._column),t},e.prototype.isHead=function(t){return t.column==this._column&&t.itemIndex==this._head},e.prototype.isTail=function(t){return t.column==this._column&&t.itemIndex==this._tail},e.prototype.contains=function(t){return t.column==this._column&&t.itemIndex>=this._head&&t.itemIndex<=this._tail},e.$_rooms=new Array,e.$_roomCount=0,e}(xr),Rr=-1,Ir=65535,Tr=function(t){function e(e){var i=t.call(this)||this;return i._flags=null,i._fixedRooms=[],i._rooms=[],i._inited=!1,i._fixedCells=[],i._cells=[],i._nextId=0,i._layout=e,e._merges=i,i}return n(e,t),e.prototype._doDispose=function(){this._layout=null,this._rooms=this._fixedRooms=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._rooms.length},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},e.prototype.initialize=function(t){if(!this._inited){var e=this._layout.grid,i=e.rowGroup,o=e.itemSource,n=this._layout.firstColumn,r=e.getGroupLevel(n.dataIndex),s=e.isGroupedColumn(n)&&n.mergeGrouped?Cr.getDefault(r,i.mergeMode):this._layout.$_mergeRuleObj();if(s){for(var a=this._flags=new Array(o.itemCount),l=e.fixedOptions.mergeRows?0:o.fixedCount,u=o.itemCount;u--;)a[u]=0;s._layout=this._layout,s.parseInit(o,n.dataIndex,l,t,a)}this._inited=!0}},e.prototype.refreshRooms=function(t,e,i){if(this._nextId=0,this._inited&&this._flags&&!(e<t)){var o=this._layout.grid,n=this._layout.firstColumn;if(o&&n){var r=this._rooms,s=o.layoutManager.fixedItemCount,a=o.itemSource,l=o.getGroupLevel(n.dataIndex),u=l>0&&n.mergeGrouped?Cr.getDefault(l,o.rowGroup.mergeMode):this._layout.$_mergeRuleObj(),c=o.displayOptions.editItemMerging,h=0;if(this._fixedRooms.length=0,this._rooms.length=0,u&&(u._layout=this._layout,u.parseBounds(a,n.dataIndex,t,e,this._flags)),i)for(;h<s;)if(d=this.$_checkFixedMerge(a,n,h,s)){if(l<1){var p=new Or(d);this._fixedRooms.push(p)}h=d.r2+1}else h+=1;for(h=t;h<=e;){var d;if(d=this.$_checkMerge(a,n,h,0==r.length,s)){var f;if(l<1)(f=a.getItem(d.r2))instanceof Un||f instanceof Wn||(p=new Or(d),this._rooms.push(p));else if((f=c?a.source.getItem(d.top):a.getItem(d.top)).level>=l){for(var g=f instanceof Eo?f:f.parent;g.level>l;)g=g.parent;(p=new Or(d)).group=g,r.push(p)}h=d.r2+1}else h+=1}}}},e.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},e.prototype.getRooms=function(){return this._rooms.slice()},e.prototype.scroll=function(t){},e.prototype.getRoom=function(t){for(var e=t.rowFixed?this._fixedRooms:this._rooms,i=e.length-1;i>=0;i--)if(e[i].contains(t))return e[i];return null},e.prototype.prepareCells=function(t,e){if(t>0){for(var i=this._fixedCells,o=0;o<i.length;o++)i[o]=Rr;for(;i.length<t;)i.push(Rr)}var n=this._cells;for(o=0;o<n.length;o++)n[o]=Rr;for(;n.length<e;)n.push(Rr)},e.prototype.refreshCells=function(t,e){for(var i=this.getFixedRooms(),o=i.length-1;o>=0;o--){var n=i[o];this.addFixedCells(n.head,n.tail-n.head+1)}for(o=(i=this.getRooms()).length-1;o>=0;o--){n=i[o];var r=Math.max(0,n.head-e-t),s=n.tail-e-t;this.addCells(r,s-r+1)}},e.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,o=this._nextId++,n=t+1;n<t+e;n++)i[n]=o+Ir;return i[t]=o,o},e.prototype.addCells=function(t,e){for(var i=this._cells,o=this._nextId++,n=t+1;n<t+e;n++)i[n]=o+Ir;return i[t]=o,o},e.prototype.isMerged=function(t,e){return t<e?this._fixedCells[t]>Rr:this._cells[t-e]>Rr},e.prototype.isMergeRoot=function(t,e){return t<e?this._fixedCells[t]>Rr&&this._fixedCells[t]<Ir:(t-=e,this._cells[t]>Rr&&this._cells[t]<Ir)},e.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=Ir:this._cells[t-e]>=Ir},e.prototype.getMerged=function(t,e){var i,o=1;if(t<e)for(var n=(i=this._fixedCells)[t],r=t+1;r<i.length&&i[r]-Ir==n;r++,o++);else for(t-=e,n=(i=this._cells)[t],r=t+1;r<i.length&&i[r]-Ir==n;r++,o++);return o},e.prototype.getMerged2=function(t,e,i,o){for(var n=this._cells,r=n[i],s=t.itemSource,a=s.getItem(e++),l=a.isData?o:1,u=i+1;u<n.length&&n[u]-Ir==r;u++)l+=(a=s.getItem(e++)).isData?o:1;return l},e.prototype.$_checkFixedMerge=function(t,e,i,o){if(o>0){var n=e.grid,r=n.displayOptions,s=e.mergeEdit&&n.editOptions.commitByCell||r.editItemMerging,a=i,l=this._flags[a],u=t.getItem(a);if(l<=0||vo(u.itemState)&&!s)return null;for(;a&&!(this._flags[a-1]<l||vo(t.getItem(a-1).itemState));)a--;for(var c=i+1;c<=o;){var h=vo(t.getItem(c).itemState);if(c==o||this._flags[c]>l||h&&!s)return c>a+1||h?gs.createRange(a,e.layout,c-1,e.layout):null;c++}}return null},e.prototype.$_checkMerge=function(t,e,i,o,n){if(i>=0){var r=e.grid,s=r.displayOptions,a=e.mergeEdit&&r.editOptions.commitByCell&&r.isEditing()&&r.isItemEditing()||s.editItemMerging,l=i,u=this._flags[l],c=t.getItem(l);if(u<=0||vo(c.itemState)&&!a)return null;if(o)for(;l>n&&!(this._flags[l-1]<u||vo(t.getItem(l-1).itemState));)l--;for(var h=t.itemCount,p=i+1;p<h;){var d=vo(t.getItem(p).itemState);if(this._flags[p]>u||this._flags[p]<=0||d&&!a){if(p>l+1)return gs.createRange(l,e.layout,p-1,e.layout);var f=e instanceof Hr?e.groupLevel:-1;return(c=t.getItem(l))instanceof Un&&c.collapsed||c instanceof Wn&&c.parent.level==f&&(p==i+1||c.parent.collapsed)||(c instanceof Un||c instanceof Wn)&&c.parent.level>f?gs.createRange(l,e.layout,p-1,e.layout):null}p++}if(p>l)return p>l+1?gs.createRange(l,e.layout,p-1,e.layout):(f=e instanceof Hr?e.groupLevel:-1,(c=t.getItem(l))instanceof Un&&c.collapsed||c instanceof Wn&&c.parent.level==f&&(p==i+1||c.parent.collapsed)||(c instanceof Un||c instanceof Wn)&&c.parent.level>f?gs.createRange(l,e.layout,p-1,e.layout):null)}return null},e.MERGE_ROOMS="mergeRooms",e}(kt),Pr=function(t){function e(e){var i=t.call(this,null)||this;return i._column=e,i}return n(e,t),e.prototype._doDispose=function(){this._column=null,this._template=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new jn),this._template.template=t):this._template=void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?xt.extendObj(t,this._values={}):this._values=void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"popupMenuName",{get:function(){if(this._popupMenuName)return this._popupMenuName;if(this._popupMenu){this._popupMenuName="$$_column_popup_menu"+this.$_hash;var t=this.column.grid;return t&&t.addPopupMenu(this._popupMenuName,this._popupMenu,!0),t&&this._popupMenuName}return null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype.getValue=function(t){return this._values&&this._values[t]},e.prototype.setValue=function(t,e){this._values||(this._values={}),this._values[t]!=e&&(this._values[t]=e,this._changed())},e}(Uo),Dr=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.exportStyleName=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=void 0,this},t.prototype.assign=function(t){if("string"==typeof t)this.styleName=t;else if(t)for(var e=0,i=Object.keys(t);e<i.length;e++){var o=i[e];this[o]=xt.deepCopy(t[o])}return this},t}(),kr=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"summaryIndex",{get:function(){var t=this.$_owner;return t?t.getIndex(this):-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.summaryIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expression",{get:function(){return this._expression},set:function(t){t&&(t=t.trim()),t!=this._expression&&(this._expression=t,this._exprNode=t?be.Default.parse(t):void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?We.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?Be.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?Ge.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?vr.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t,e){if(this._exprNode)return this._exprNode.evaluate(t)},e.prototype.realizeSummary=function(t,e){var i=this._template;return i?i.realizeSummary(this,t,e,this._templateCallback):void 0},e.prototype.realizeGroupSummary=function(t,e){var i=this._template;return i?i.realizeGroupSummary(this,t,e,this._templateCallback):void 0},e.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.expression=t,!0)},e.prototype._doChanged=function(){},e}(Pr),Ar=function(t){function e(e,i){var o=t.call(this)||this;return o._items=[],o._column=e,o._type=i,o._items.push(o.$_createSummary()),o}return n(e,t),e.prototype._doDispose=function(){this._column=null,this._items&&this._items.forEach((function(t){t.dispose()})),this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return t>=0&&t<this.column.grid.getSummaryCount(this._type)&&!this._items[t]&&(this._items[t]=this.$_createSummary()),this._items[t]},e.prototype.getIndex=function(t){return this._items.indexOf(t)},e.prototype.assignFrom=function(t){var e=t&&t.items?xt.makeArray(t.items,!0):xt.makeArray(t,!0),i=this._items;if(xt.isArray(e)){for(var o=Math.max(e.length,1),n=0;n<o;n++)i[n]||(i[n]=this.$_createSummary()),i[n].assignFrom(e[n]);this._items.length=o}},e}(kt),Lr=function(t){function e(e){var i=t.call(this,e.column)||this;return i.$_owner=e,i}return n(e,t),e.prototype._doChanged=function(){this.column._headerSummaryChanged()},e}(kr),Mr=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype.$_createSummary=function(){return new Lr(this)},e}(Ar),Fr=function(e){function i(i){var o=e.call(this,i)||this;return o._checkLocation=t.ColumnHeaderItemLocation.NONE,o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){t!=this._tooltip&&(this._tooltip=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){var t=this.column,e=this._text;if(!e&&t instanceof Hr){var i=t.getField();e=i?i.header||i.orgFieldName:t.fieldName}return e||(e=t.name),e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName!==t&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){t!=this._exportStyleName&&(this._exportStyleName=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t,this._changed()},enumerable:!1,configurable:!0}),i.prototype.realizeTemplate=function(){var t=this._template;return t?t.realizeHeader(this,this.templateCallback,this.column.grid):void 0},i.prototype._doChanged=function(){this.column&&this.column._headerChanged()},i.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},i}(Pr),Nr=function(t){function e(e){var i=t.call(this,e.column)||this;return i.$_owner=e,i}return n(e,t),e.prototype._doChanged=function(){this.column._footerChanged()},e}(kr),Vr=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype.$_createSummary=function(){return new Nr(this)},e}(Ar),Br=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.exportStyleName=this.renderer=this.editable=this.editor=this.readOnly=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=this.edgeMark=this.style=this.excelFormat=this.cellProtectProps=void 0,this},t.prototype.assign=function(t){if("string"==typeof t)this.styleName=t;else if(t)if(t instanceof Gr)for(var e=0,i=Object.keys(this);e<i.length;e++)(r=i[e])in t&&(this[r]=xt.deepCopy(t[r]));else for(var o=0,n=Object.keys(t);o<n.length;o++){var r;"readonly"===(r=n[o]).toLowerCase()?this.readOnly=t[r]:this.hasOwnProperty(r)&&(this[r]=xt.deepCopy(t[r]))}return this},t.prototype.toFormatter=function(t){var e;return t||(t={textFormatter:void 0,numberFormatter:void 0,datetimeWriter:void 0,booleanFormatter:void 0,prefix:void 0,suffix:void 0}),(e=this.textFormat)&&(t.textFormatter&&t.textFormatter.format==e||(t.textFormatter=vr.getFormatter(e))),(e=this.numberFormat)&&(t.numberFormatter&&t.numberFormatter.format==e||(t.numberFormatter=We.getFormatter(e))),(e=this.datetimeFormat)&&(t.datetimeWriter&&t.datetimeWriter.format==e||(t.datetimeWriter=Be.getFormatter(e))),(e=this.booleanFormat)&&(t.booleanFormatter&&t.booleanFormatter.format==e||(t.booleanFormatter=Ge.getFormatter(e))),(e=this.prefix)&&(t.prefix&&t.prefix==e||(t.prefix=e)),(e=this.suffix)&&(t.suffix&&t.suffix==e||(t.suffix=e)),t},t}(),Gr=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,i._resizable=!0,i._movable=!0,i._checked=!1,i._fillWidth=NaN,i._dirty=!1,i._index=-1,i._states={},i._header=new Fr(i),i._footers=new Vr(i,"footer"),i._headerSummaries=new Mr(i,"summary"),i._groupFooters=new Vr(i,"groupFooter"),e&&i.assignFrom(e),i}return n(e,t),e.prototype._doDispose=function(){this._layout=null,this.$_owner=null,this._header=this._header&&this._header.dispose(),this._footers=this._footers&&this._footers.dispose(),this._headerSummaries=this._headerSummaries&&this._headerSummaries.dispose(),this._groupFooters=this._groupFooters&&this._groupFooters.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype._layoutChanged=function(){this._changed(),this._layout&&this._layout._changed()},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._layout&&this._layoutChanged(),this._propChanged("visible",this._visible,!this._visible))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return(null==this._width||isNaN(this._width))&&this.grid?this._width=this.grid.displayOptions.defaultColumnWidth:this._width},set:function(t){if(t=Math.max(0,t),!isNaN(t)&&t!=this._width){var e=this._width;this._width=t,this._layoutChanged(),this._propChanged("width",this._width,e)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillWidth",{get:function(){return this._fillWidth},set:function(t){t=Math.max(0,t),isNaN(t)||t==this._fillWidth||(this._fillWidth=t,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){t!=this._checked&&(this._checked=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._header},enumerable:!1,configurable:!0}),e.prototype.setHeader=function(t){this._header.assignFrom(t)},Object.defineProperty(e.prototype,"footers",{get:function(){return this._footers},enumerable:!1,configurable:!0}),e.prototype.setFooters=function(t){this._footers.assignFrom(t),this._changed()},Object.defineProperty(e.prototype,"footer",{get:function(){return this._footers.get(0)},enumerable:!1,configurable:!0}),e.prototype.setFooter=function(t){this.setFooters(t)},Object.defineProperty(e.prototype,"headerSummaries",{get:function(){return this._headerSummaries},enumerable:!1,configurable:!0}),e.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t),this._changed()},Object.defineProperty(e.prototype,"headerSummary",{get:function(){return this._headerSummaries.get(0)},enumerable:!1,configurable:!0}),e.prototype.setHeaderSummary=function(t){this.setHeaderSummaries(t)},Object.defineProperty(e.prototype,"groupFooters",{get:function(){return this._groupFooters},enumerable:!1,configurable:!0}),e.prototype.setGroupFooters=function(t){this._groupFooters.assignFrom(t),this._changed()},Object.defineProperty(e.prototype,"groupFooter",{get:function(){return this._groupFooters.get(0)},enumerable:!1,configurable:!0}),e.prototype.setGroupFooter=function(t){this.setGroupFooters(t)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._layout?this._layout.grid:this.$_owner?this.$_owner.owner:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayText",{get:function(){return this._header.text||this._name||"col_"+this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayWidth",{get:function(){return this._layout?this._layout.domWidth:this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayIndex",{get:function(){return this._layout?this._layout.vindex:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataRoot",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),e.prototype.clean=function(){this._dirty=!1},e.prototype.isWritable=function(){return!1},e.prototype.stateFor=function(t){return this._states[t]},e.prototype.setState=function(t,e){this._states[t]=e},e.prototype.getFooter=function(t){return this._footers.get(t)},e.prototype.getHeaderSummary=function(t){return this._headerSummaries.get(t)},e.prototype.assignFrom=function(e){t.prototype.assignFrom.call(this,e),this._header.assignFrom(e.header),this._footers.assignFrom(e.footers||e.footer),this._headerSummaries.assignFrom(e.summaries||e.summary||e.headerSummaries||e.headerSummary),this._groupFooters.assignFrom(e.groupFooters||e.groupFooter)},e.prototype.toString=function(){return this.displayText},e.prototype._prepareLayout=function(t,e){},e.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateColumn(this)}},e.prototype._propChanged=function(t,e,i){var o=this.grid;o&&o._fireColumnPropertyChanged(this,t,e,i)},e.prototype.$_setIndex=function(t){this._index=t},e.prototype._headerChanged=function(){this._changed()},e.prototype._headerSummaryChanged=function(){this._changed()},e.prototype._footerChanged=function(){this._changed()},e.prototype._resetIndices=function(t){},e.prototype.$_layoutIndexChanged=function(t,e){this._propChanged("displayIndex",e,t)},e.prototype.$_layoutWidthChanged=function(t,e){this._propChanged("displayWidth",e,t)},e}(kt),jr=function(e){function i(i){var o=e.call(this,i)||this;return o._blankWhenCopy=!1,o._blankWhenExport=!1,o._ignoreDefaultDynamicStyles=!1,o._textInputCase=t.TextInputCase.NORMAL,o._button=t.CellButton.NONE,o._buttonVisibility=t.ButtonVisibility.DEFAULT,o._editButtonVisibility=t.ButtonVisibility.DEFAULT,o._displayMinusZero=!0,o}return n(i,e),i.prototype._doDispose=function(){this._popupMenu=null,this._popupMenuName=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!==this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?We.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayMinusZero",{get:function(){return this._displayMinusZero},set:function(t){this._displayMinusZero!=t&&(this._displayMinusZero=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!==this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?Be.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!==this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?Ge.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){t!==this._textFormat&&(this._textFormat=t,this._textFormatter=t?vr.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blankWhenCopy",{get:function(){return this._blankWhenCopy},set:function(t){t!=this._blankWhenCopy&&(this._blankWhenCopy=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blankWhenExport",{get:function(){return this._blankWhenExport},set:function(t){t!=this._blankWhenExport&&(this._blankWhenExport=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ignoreDefaultDynamicStyles",{get:function(){return this._ignoreDefaultDynamicStyles},set:function(t){t!=this._ignoreDefaultDynamicStyles&&(this._ignoreDefaultDynamicStyles=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textInputCase",{get:function(){return this._textInputCase},set:function(t){t!=this._textInputCase&&(this._textInputCase=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){t!=this._exportStyleName&&(this._exportStyleName=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"renderer",{get:function(){return this._renderer},set:function(t){this._renderer=t,this.grid&&this._layout&&this.grid.$_rendererChanged(this._layout),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editor",{get:function(){return this._editor},set:function(t){this._editor=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"button",{get:function(){return this._button},set:function(t){t!=this._button&&(this._button=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(t){t!=this._buttonVisibility&&(this._buttonVisibility=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonVisibleCallback",{get:function(){return this._buttonVisibleCallback},set:function(t){this._buttonVisibleCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(t){t!=this._editButtonVisibility&&(this._editButtonVisibility=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu?(this._popupMenuName="$$_column_popup_menu"+this.$_hash,this.grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this.grid&&this._popupMenuName):null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())},enumerable:!1,configurable:!0}),i.prototype.getCellStyle=function(t){return this._styleCallback&&this._styleCallback(this.grid.handler,t)},i.prototype.affix=function(t){return this._prefix&&(t=this._prefix+t),this._suffix&&(t+=this._suffix),t},i.prototype._prepareLayout=function(t,i){e.prototype._prepareLayout.call(this,t,i)},i}(Gr),Hr=function(e){function i(i){var o=e.call(this)||this;return o._fieldIndex=-1,o._readOnly=!1,o._valueSeparator=",",o._breakMergeOnEmpty=!1,o._equalBlank=!1,o._equalBlankText="",o._values=null,o._labels=null,o._lookupDisplay=!1,o._lookupSource=null,o._lookupKeyFields=null,o._lookupKeyFieldIds=null,o._mergeGrouped=!1,o._sortable=!0,o._sortOrder=-1,o._sortByLabel=!1,o._filterable=!0,o._filterIconVisible=!0,o._autoFilter=!1,o._filterSelectorWidth=0,o._lookupData=null,o._required=!1,o._requiredLevel=t.ValidationLevel.ERROR,o._validations=new dr(!0),o._groupable=!0,o._dataIndex=-1,o._baseIndex=-1,o._valueType=t.ValueType.TEXT,o._groupLevel=-1,o._labelFieldIndex=-1,o._filters=new $o(o),o._filters.addListener(o),o._autoFilters=new $o(o),o._autoFilters.addListener(o),o._inlineFilters=new $o(o),o._inlineFilters.addListener(o),i&&o.assignFrom(i),o}return n(i,e),i.prototype._doDispose=function(){this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._filters=this._filters&&this._filters.dispose(),this._autoFilters=this._autoFilters&&this._autoFilters.dispose(),this._inlineFilters=this._inlineFilters&&this._inlineFilters.dispose(),this.validations=this._validations&&this._validations.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"fieldIndex",{get:function(){return this._fieldIndex},set:function(t){(t=Math.max(-1,t))!=this._fieldIndex&&(this._fieldIndex=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nanText",{get:function(){return this._nanText},set:function(t){t!=this._nanText&&(this._nanText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zeroText",{get:function(){return this._zeroText},set:function(t){t!=this._zeroText&&(this._zeroText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(t){this._defaultValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){if(t!=this._mergeRule){this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?Er.createRule(t):null;var e=this.grid;e&&this.layout&&e._columnMergeRuleChanged(this.layout)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){if(t!=this._breakMergeOnEmpty){this._breakMergeOnEmpty=t;var e=this.grid;e&&this.layout&&e._columnMergeRuleChanged(this.layout)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!=this._equalBlank&&(this._equalBlank=t,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!=this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?be.Default.parse(t,null):void 0,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankText",{get:function(){return this._equalBlankText},set:function(t){t!=this._equalBlankText&&(this._equalBlankText=t,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankLine",{get:function(){return this._equalBlankLine},set:function(t){t!=this._equalBlankLine&&(this._equalBlankLine=t,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeEdit",{get:function(){return!!this._mergeEdit},set:function(t){t!=this._mergeEdit&&(this._mergeEdit=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"excelFormat",{get:function(){return this._excelFormat},set:function(t){t!=this._excelFormat&&(this._excelFormat=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"excelFormulaStatement",{get:function(){return this._excelFormulaStatement},set:function(t){t!=this._excelFormulaStatement&&(this._excelFormulaStatement=t,t?this._excelFormulaExprStatement?this._excelFormulaExprStatement.source=t:this._excelFormulaExprStatement=new Vo(t):this._excelFormulaExprStatement=null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"excelFormulaExprStatement",{get:function(){return this._excelFormulaExprStatement},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataIndex",{get:function(){return this._dataIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseIndex",{get:function(){return this._baseIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueType",{get:function(){return this._valueType},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupLevel",{get:function(){return this._groupLevel},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this._values},set:function(t){t!=this._values&&(this._values=t?t.map((function(t,e){return null!=t?String(t):t})):[],this._lookupMap=null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labels",{get:function(){return this._labels},set:function(t){t!=this._labels&&(this._labels=t&&t.slice(),this._lookupMap=null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay!=t&&(this._lookupDisplay=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupSource",{get:function(){return this._lookupSource},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupSourceId",{get:function(){return this._lookupSourceId},set:function(t){this._lookupSourceId!=t&&(this._lookupSourceId=t,this._changed(),this.grid&&this.$_resetLookup(this.grid))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupKeyFields",{get:function(){return this._lookupKeyFields},set:function(t){t!=this._lookupKeyFields&&(this._lookupKeyFields=xt.makeArray(t,!0).slice(),this._changed(),this.grid&&this.$_resetLookup(this.grid))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupKeyFieldIds",{get:function(){return this._lookupKeyFieldIds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelField",{get:function(){return this._labelField},set:function(t){this._labelField!=t&&(this._labelField=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textOfInvalid",{get:function(){return this._textOfInvalid},set:function(t){this._textOfInvalid!=t&&(this._textOfInvalid=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!==this._placeHolder&&(this._placeHolder=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"placeHolderStyleName",{get:function(){return this._placeHolderStyleName},set:function(t){t!==this._placeHolderStyleName&&(this._placeHolderStyleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelFieldIndex",{get:function(){return this._labelFieldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayCallback",{get:function(){return this._displayCallback},set:function(t){this._displayCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeGrouped",{get:function(){return this._mergeGrouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortable",{get:function(){return this._sortable},set:function(t){t!=this._sortable&&(this._sortable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortOrder",{get:function(){return this._sortOrder},set:function(t){this._sortOrder=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortDirection",{get:function(){return this._sortDirection},set:function(t){this._sortDirection=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortByLabel",{get:function(){return this._sortByLabel},set:function(t){this._sortByLabel!==t&&(this._sortByLabel=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterable",{get:function(){return this._filterable},set:function(t){t!=this._filterable&&(this._filterable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterIconVisible",{get:function(){return this._filterIconVisible},set:function(t){this._filterIconVisible!=t&&(this._filterIconVisible=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoFilter",{get:function(){return this._autoFilter},set:function(t){t!==this._autoFilter&&(this._autoFilter=t,!t&&this._autoFilters&&this._autoFilters.count>0&&this._autoFilters.clear(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filters",{get:function(){return this._filters},set:function(t){t instanceof $o||this.setFilters(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoFilters",{get:function(){return this._autoFilters},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInlineFilter",{get:function(){return this._showInlineFilter},set:function(t){t!==this._showInlineFilter&&(this._showInlineFilter=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterSelectorWidth",{get:function(){return this._filterSelectorWidth},set:function(t){this._filterSelectorWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requiredMessage",{get:function(){return this._requiredMessage},set:function(t){t!=this._requiredMessage&&(this._requiredMessage=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requiredLevel",{get:function(){return this._requiredLevel},set:function(t){t!=this._requiredLevel&&(this._requiredLevel=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupable",{get:function(){return this._groupable},set:function(t){this._groupable!=t&&(this._groupable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectKey",{get:function(){return this._objectKey},set:function(t){t!=this._objectKey&&(this._objectKey=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectCallback",{get:function(){return this._objectCallback},set:function(t){this._objectCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this.header.text||this.fieldName||this.name||"col_"+this.index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupData",{get:function(){return this._lookupData},set:function(t){if(t!==this._lookupData){var e=void 0,i=void 0,o=void 0,n=void 0,r={};if(this._lookupData=xt.deepCopy(t),t){xt.isArray(t)?r.list=t:r=t,this._labels=[],this._values=[],this._lookupMap=null,e=r.hasOwnProperty("value")?r.value:"value",i=r.hasOwnProperty("label")?r.label:"label";for(var s=0,a=r.list.length;s<a;s++)null!=(n=null!=(o=r.list[s])[e]?o[e]:o.code)&&this._values.push(null!=o[e]?o[e]:o.code),null!=n&&this._labels.push(null!=o[i]?o[i]:null!=o.text?o.text:n)}else this._labels=null,this._values=null,this._lookupMap=null;this._changed()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellProtectProps",{get:function(){return this._cellProtectProps},set:function(t){this._cellProtectProps=t},enumerable:!1,configurable:!0}),i.prototype.getField=function(){var t=this._dataIndex;if(t>=0){var e=this.grid.dataSource;if(e)return e.getField(t)}return null},i.prototype.getLookupLabel=function(t){if(!this._lookupMap){var e=this._values,i=this._labels;if(e&&e.length>0){this._lookupMap={};for(var o=0;o<e.length;o++)i&&i.length>o?this._lookupMap[e[o]]=i[o]:this._lookupMap[e[o]]=e[o]}}var n;if("string"==typeof t&&t&&this._valueSeparator){for(var r=t.split(this._valueSeparator),s=[],a=(o=0,r.length);o<a;o++)s.push(this._lookupMap&&this._lookupMap[r[o]]?this._lookupMap[r[o]]:r[o]);if(s.length<=0)return"";n=s.join(this._valueSeparator)}else n=this._lookupMap?this._lookupMap[t]:void 0;return n||(null!=this.textOfInvalid?this.textOfInvalid:t)},i.prototype.getLookupIndex=function(t){if(this._values&&this._values.length>0)for(var e=0,i=this._values.length;e<i;e++)if(this._values[e]==t)return e;return-1},i.prototype.getLookupIndices=function(t){var e=[];if(t&&this._values&&this._values.length>0)for(var i=xt.isArray(t)?t:String(t).split(this._valueSeparator),o=0,n=i.length;o<n;o++)this._values.indexOf(i[o])>=0&&e.push(this._values.indexOf(i[o]));return e},i.prototype.getLookupValue=function(t){if(this._values&&this._values.length>0)return this._values[t]},i.prototype.getLookupValues=function(t){var e=[];if(this._values&&this._values.length>0)for(var i=0,o=t.length;i<o;i++)t[i]>=0&&t[i]<this._values.length&&e.push(this._values[t[i]]);return e},i.prototype.getSourceValue=function(t){var e=this._values,i=this._labels;if(i&&e){var o=i.indexOf(t);if(o>=0&&e.length>o)return e[o];if((o=e.indexOf(t))>=0)return e[o]}},i.prototype.getSourceValues=function(t){var e=this._values,i=this._labels;if(i&&e){for(var o=void 0,n=[],r=this._valueSeparator,s=0,a=(t=xt.isArray(t)?t:r&&t?String(t).split(r):xt.makeArray(t)).length;s<a;s++)(o=i.indexOf(t[s]))>=0&&e.length>o?n.push(e[o]):n.push(t[s]);if(n.length>0&&r)return n.join(r);if(n.length>0)return n.join()}},Object.defineProperty(i.prototype,"$_filters",{get:function(){return this._autoFilter?this._autoFilters:this._filters},enumerable:!1,configurable:!0}),i.prototype.clearFilters=function(){this.setFilters(null)},i.prototype.addFilters=function(t,e){if(t){var i=this.grid;i&&!i.canFiltering()||this._filters.addAll(xt.makeArray(t),e)}},i.prototype.removeFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this._filters.removeItems(xt.makeArray(t))}},i.prototype.activateFilters=function(t,e){if(t){var i=this.grid;i&&!i.canFiltering()||this.$_filters.activateItems(xt.makeArray(t),e)}},i.prototype.activateAllFilters=function(t,e){void 0===e&&(e=!0);var i=this.grid;i&&!i.canFiltering()||this.$_filters.activateAll(t,e)},i.prototype.hideColumnFilters=function(t,e){this.$_filters.hideFilters(xt.makeArray(t),e)},i.prototype.hideAllColumnFilters=function(t){this.$_filters.hideAllFilters(t)},i.prototype.toggleFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this.$_filters.toggleItems(xt.makeArray(t))}},i.prototype.toggleAllFilters=function(){var t=this.grid;t&&!t.canFiltering()||this.$_filters.toggleAll()},i.prototype.getFilter=function(t){var e=this.$_filters,i=e.indexOf(t);return e.getItem(i)},i.prototype.getActiveFilters=function(t){return this.$_filters.getActiveItems(t)},Object.defineProperty(i.prototype,"hasFilters",{get:function(){return this._autoFilter||this._filters.count>0},enumerable:!1,configurable:!0}),i.prototype.isFiltered=function(){return this.$_filters.activeCount>0||this._inlineFilters.activeCount>0},i.prototype.setFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this._filters.assignFrom(t)},i.prototype.autoFilterRefresh=function(t){var e=this.grid,i=null==e?void 0:e.dataSource;if(e&&i&&this._autoFilter){var o=e.filterSelector._manager;o&&o.buildItems(this,i,!0,t)}},i.prototype.setInlineFilter=function(t,e){var i=this._inlineFilters,o=i.getItem(0);o||(i.add({name:"inlineFilter"},!1),o=i.getItem(0)),o.criteria!=t&&(void 0===t?(o.criteria=void 0,e?o.active=!1:o._active=!1):(o._active=!1,o.criteria=t,o.active=!!o.criteria))},i.prototype.onColumnFilterChanged=function(t,e){var i=this.grid;i&&i.columnFilterChanged(t,e)},i.prototype._prepareLayout=function(t,i){e.prototype._prepareLayout.call(this,t,i)},i.prototype._resetIndices=function(t){this._dataIndex=-1,this._baseIndex=-1;var e=t.dataSource;e&&(this._fieldName?this._dataIndex=e.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,this._dataIndex>=0&&(this._baseIndex=e.getBaseField(this._dataIndex),this._valueType=e.getValueType(this._dataIndex)),this._labelFieldIndex=e.getFieldIndex(this._labelField),this.$_resetLookup(t))},i.prototype.isWritable=function(){var t=this.grid.editOptions;return(t.columnEditableFirst?null!=this._editable?this._editable:t.editable:t.editable&&!1!==this._editable)&&!this._readOnly},i.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t)},i.prototype.$_setMergeGrouped=function(t){this._mergeGrouped=t},i.prototype.$_setGroupLevel=function(t){this._groupLevel=t},i.prototype.$_resetLookup=function(t){if(this._lookupKeyFields&&this._lookupKeyFields.length>0&&this._lookupSourceId){for(var e=this._lookupKeyFields.length,i=this._lookupKeyFieldIds=new Array(e),o=0;o<e;o++)i[o]=t.dataSource.getFieldIndex(this._lookupKeyFields[o]);this._lookupSource=t.lookupProvider.getSource(this._lookupSourceId)}else this._lookupSource=null,this._lookupKeyFieldIds=[]},i.prototype._changed=function(){e.prototype._changed.call(this)},i.CAPITAL_INDEXERS=["value","values"],i}(jr),$r=function(t){function e(e){var i=t.call(this)||this;return i._fieldArray=i._fieldArray||[],i._fields=i._fields||[],e&&i.assignFrom(e),i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"fieldNames",{get:function(){return this._fieldNames},set:function(t){t!=this._fieldNames&&(this._fieldNames=t,this._fieldArray=t?t.split(","):[],this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this._fields},enumerable:!1,configurable:!0}),e.prototype._resetIndices=function(t){this._fields=[];var e=t.dataSource;if(e)for(var i=0,o=this._fieldArray.length;i<o;i++){var n=this._fieldArray[i],r=n.split("..");if(r.length>1){var s=e.getFieldIndex(r[0]),a=e.getFieldIndex(r[1]);if(s>=0&&a>=0)for(var l=Math.min(s,a),u=Math.max(s,a),c=l;c<=u;c++)this._fields.push(c)}else(c=e.getFieldIndex(n))>=0&&this._fields.push(c)}},e}(jr),Wr=function(){function t(){this._layouts={}}return t.prototype._doDispose=function(){this._layouts=null},t.prototype.find=function(t){return this._layouts[t]},t.prototype.clear=function(){this._layouts={}},t.prototype.load=function(t){if(t=xt.makeArray(t),this._layouts={},t)for(var e=0,i=t.length;e<i;e++){var o=t[e];o.name&&!this._layouts[o.name]&&(this._layouts[o.name]=o.items)}},t}();t.CellLayoutType=void 0,(xn=t.CellLayoutType||(t.CellLayoutType={})).GROUP="group",xn.COLUMN="column",xn.PROXY="proxy";var Ur,zr=function(e){function i(){var t=e.call(this)||this;return t._visible=!0,t._width=NaN,t._fillWidth=NaN,t._index=-1,t._vindex=-1,t._row=0,t._col=0,t._hrow=0,t._hcol=0,t._cspan=1,t._hspan=1,t._dspan=1,t._clen=1,t._hlen=1,t._dlen=1,t._cellWidth=0,t._fitWidth=NaN,t._defColSpan=1,t._header=t._createHeader(),t._header&&(t._header._layout=t),t}return n(i,e),i.compareLoc=function(t,e){if(null==t||null==e)return 0;if(null==t)return-1;if(null==e)return 1;var i=t.root.vindex,o=e.root.vindex;return i==o&&(t.group===e.group?(i=t.vindex,o=e.vindex):(i=t.dataRoot.vindex,o=e.dataRoot.vindex)),i-o},i.getSource=function(t){return t instanceof Kr?t.source:t},i.prototype._doDispose=function(){this._header=this._header&&this._header.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){if(this.$_grid)return this.$_grid;var t=this.root;return t&&t._parent.grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isNull",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isProxy",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed(),this._propChanged("visible",this._visible,!this._visible))},enumerable:!1,configurable:!0}),i.prototype.$_isVisible=function(t){return this._visible},Object.defineProperty(i.prototype,"header",{get:function(){return this._header},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"owner",{get:function(){return this._parent&&this._parent.owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return this._parent instanceof ss?null:this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){if(!this._root)for(var t=this;t;){if(t._parent instanceof ss)return this._root=t;t=t._parent}return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isRoot",{get:function(){return this.root===this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRoot",{get:function(){if(!this._dataRoot){var t=this.group;if(t)do{this._dataRoot=t,t=t.group}while(t);else this._dataRoot=this}return this._dataRoot},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vindex",{get:function(){return this._vindex},set:function(t){var e=this._vindex;if(this._parent&&this._parent.$_changeChildVIndex(this,t),this._vindex!=e){this._propChanged("displayIndex",this._vindex,e);var i=this.firstColumn;i&&this instanceof Yr&&i.$_layoutIndexChanged(e,this._vindex)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"row",{get:function(){return this._row},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"col",{get:function(){return this._col},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hrow",{get:function(){return this._hrow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hcol",{get:function(){return this._hcol},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._getWidth(this._width)},set:function(t){t=Math.max(0,t),this.grid&&(t=Math.max(t,this.grid.displayOptions.minCellWidth)),t!=this._width&&(this._width=t,this._parent&&this._parent._childWidthChanged(this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillWidth",{get:function(){return this._getFillWidth(this._fillWidth)},set:function(t){(t=Math.max(0,t))!=this._fillWidth&&(this._fillWidth=t,this._parent&&this._parent._childFillWidthChanged(this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupShowMode",{get:function(){return this._groupShowMode},set:function(t){t!=this._groupShowMode&&(this._groupShowMode=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"domWidth",{get:function(){if(this.grid&&this.grid.layoutManager.isColumnFitted){var t=this.grid,e=t.layoutManager,i=t.fixedOptions.colCount,o=e.cellCount,n=this.$_fixed?e._fixedCellPoints:this.$_rfixed?e._rightCellPoints:this.grid.layoutManager._cellPoints,r=this.$_fixed?this._col:this.$_rfixed?this._col-(o-i):this._col-i;return n[r+(this instanceof Zr?this._clen:this._defColSpan)]-n[r]}return this.cellWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"distance",{get:function(){return this._col},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cspan",{get:function(){return this._cspan},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hspan",{get:function(){return this._hspan},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hlen",{get:function(){return this._hlen},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"merged",{get:function(){return this._merged},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isFixed",{get:function(){return this.$_fixed||this.$_rfixed},enumerable:!1,configurable:!0}),i.prototype.load=function(e){"string"!=typeof e&&(void 0!==e.width&&(this.width=e.width),void 0!==e.header&&this._header.assignFrom(e.header),void 0!==e.fillWidth&&(this.fillWidth=e.fillWidth),this.groupShowMode=xt.valueIn(e.groupShowMode,t.GroupShowMode)?e.groupShowMode:t.GroupShowMode.ALWAYS,void 0!==e.visible&&(this.visible=e.visible))},i.prototype.isColumn=function(t){return!1},i.prototype.cleanColumns=function(){},i.prototype.findLayout=function(t){return null},i.prototype.getHeaderSpan=function(){return 1},i.prototype.getSummarySpan=function(t){return 1},i.prototype.getFooterSpan=function(t){return 1},i.prototype.getDataSpan=function(){return 1},i.prototype.getGroupFooterSpan=function(t,e){return 1},i.prototype.getDataColumn=function(){return null},i.prototype.getFooterUserSpan=function(t){return null},i.prototype.getSummaryUserSpan=function(t){return null},i.prototype._createHeader=function(){return null},i.prototype._headerChanged=function(){this._changed()},i.prototype._prepareLayout=function(t,e,i){this.$_grid=t,this.$_fixed=e,this.$_rfixed=i,this._merged=!1},i.prototype._detach=function(){this._parent=void 0,this._index=-1,this._vindex=-1,this._row=-1,this._col=-1,this._cspan=1,this._hspan=1,this._dspan=1,this._clen=1,this._hlen=1,this._dlen=1,this._root=void 0,this._dataRoot=void 0},i.prototype._getWidth=function(t){return t},i.prototype._getFillWidth=function(t){return t},i.prototype.changeCellWidth=function(t,e,i){var o=this.owner,n=o&&o.grid,r=n&&n._loading,s=i?this.cellWidth:this.domWidth,a=this.domWidth,l=this.grid.displayOptions.minCellWidth;if(isNaN(s)&&r&&i)this.width=t;else{var u=t-s;if(e&&!i&&(u*=this.cellWidth/(isNaN(this._fitWidth)?this.cellWidth:this._fitWidth)),u=Math.round(u))if(this.grid._columnsDirty&&this.owner.$_refresh(this.grid._columns,l),o&&o.isShowing(this)){if(o){var c=this._col,h=void 0;h=this instanceof Zr?this._clen:this._defColSpan,o.$_changeCellWidths(c,h,u,l);var p=o._cellWidths;if(p&&p.length)for(var d=o._dataCells,f=0;f<d.length;f++)for(var g=d[f],y=0;y<h;y++)g[c+y]._cellWidth=p[c+y];o.$_calcGroupWidths()}setTimeout(function(){if(this.domWidth!=a){var t=this.firstColumn;this._propChanged("displayWidth",this.domWidth,a),t&&this instanceof Yr&&t.$_layoutWidthChanged(a,this.domWidth)}}.bind(this),50)}else{if(this instanceof Zr||this._defColSpan>1)return;this._cellWidth=t}}},i.prototype._setFitWidth=function(t){this._fitWidth=t},i.prototype._clearFitWidth=function(){this._fitWidth=NaN},i.prototype._changed=function(){this._parent&&this._parent._changed()},i.prototype.$_setMerged=function(t){this._merged=t},i.prototype._propChanged=function(t,e,i){var o=this.grid;o&&o._fireLayoutPropertyChanged(this,t,e,i)},i}(kt),Kr=function(e){function i(i,o){var n=e.call(this)||this;return n._type=t.CellLayoutType.PROXY,n._source=i,n._index=o,n}return n(i,e),Object.defineProperty(i.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isProxy",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._source.visible},enumerable:!1,configurable:!0}),i.prototype.$_isVisible=function(t){return this._source.$_isVisible(t)},Object.defineProperty(i.prototype,"cols",{get:function(){return this._source.cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return this._source.headerRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._source.rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){return this._source.root},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstColumn",{get:function(){return this._source.firstColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastColumn",{get:function(){return this._source.lastColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boundColumn",{get:function(){return this._source.boundColumn},enumerable:!1,configurable:!0}),i.prototype.load=function(t){},i.prototype._isResizable=function(){return!1},i.prototype._isMovable=function(){return!1},i.prototype.clearMergeGrouped=function(){},i}(zr),Yr=function(e){function i(i){var o=e.call(this)||this;return o._cellSpan=1,o._cellWidths=[],o._cols=1,o._rows=1,o._blanked=!1,o._type=t.CellLayoutType.COLUMN,o._column=i,o._columnObj=i instanceof jr?i:null,o}return n(i,e),i.prototype._doDispose=function(){this._column=this._columnObj=null,this._merges=this._merges&&this._merges.dispose(),this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._equalBlankNode=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"column",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellWidth",{get:function(){if(this.owner.isShowing(this)){var t=this.owner.getCellWidths(this._col,this._defColSpan);return isNaN(t)&&(t=this.width),t||this._cellWidth}return this._cellWidths&&this._cellWidths.reduce((function(t,e){return t+e}),0)||this._cellWidth},set:function(t){if(!this.owner._loading){var e=!!this.grid&&this.grid.layoutManager.isColumnFitted;t=Math.max(this.grid.displayOptions.minCellWidth,t),this.changeCellWidth(t,e,!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"merges",{get:function(){return this._merges},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){if(t!==this._mergeRule){this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?Er.createRule(t):void 0===t?void 0:null;var e=this.grid;e&&e._columnMergeRuleChanged(this)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){if(t!==this._breakMergeOnEmpty){this._breakMergeOnEmpty=t;var e=this.grid;e&&e._columnMergeRuleChanged(this)}},enumerable:!1,configurable:!0}),i.prototype.isBreakMergeOnEmpty=function(){return void 0===this._breakMergeOnEmpty?this._columnObj instanceof Hr&&this._columnObj.breakMergeOnEmpty:this._breakMergeOnEmpty},Object.defineProperty(i.prototype,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!==this._equalBlank&&(this._equalBlank=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankNode",{get:function(){return this._blankNodeRun},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blanked",{get:function(){return this._blanked},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!==this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?be.Default.parse(t,null):void 0===t?void 0:null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellSpan",{get:function(){return this._cellSpan},set:function(t){(t=Math.max(1,t))!=this._cellSpan&&(this._cellSpan=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerSpan",{get:function(){return this._headerSpan},set:function(t){t!=this._headerSpan&&(void 0!==t&&(t=Math.max(1,t)),this._headerSpan=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarySpan",{get:function(){return this._summarySpans?this._summarySpans[0]:void 0},set:function(t){this._summarySpans=this._summarySpans||[],t!=this._summarySpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._summarySpans[0]=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarySpans",{get:function(){return this._summarySpans&&this._summarySpans.slice()},set:function(t){t!==this._summarySpans&&(this._summarySpans=t&&t.slice(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerSpan",{get:function(){return this._footerSpans&&this._footerSpans[0]},set:function(t){this._footerSpans=this._footerSpans||[],t!=this._footerSpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._footerSpans[0]=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerSpans",{get:function(){return this._footerSpans&&this._footerSpans.slice()},set:function(t){t!==this._footerSpans&&(this._footerSpans=t&&t.slice(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataSpan",{get:function(){return this._dataSpan},set:function(t){t!=this._dataSpan&&(void 0!==t&&(t=Math.max(1,t)),this._dataSpan=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterSpan",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans[0]},set:function(t){this._groupFooterSpans=this._groupFooterSpans||[],t!=this._groupFooterSpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._groupFooterSpans[0]=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterSpans",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans.slice()},set:function(t){t!==this._groupFooterSpans&&(this._groupFooterSpans=t&&t.slice(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spanCallback",{get:function(){return this._spanCallback},set:function(t){t!=this._spanCallback&&(this._spanCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarySpanCallback",{get:function(){return this._summarySpanCallback},set:function(t){t!=this._summarySpanCallback&&(this._summarySpanCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerSpanCallback",{get:function(){return this._footerSpanCallback},set:function(t){t!=this._footerSpanCallback&&(this._footerSpanCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterSpanCallback",{get:function(){return this._groupFooterSpanCallback},set:function(t){t!=this._groupFooterSpanCallback&&(this._groupFooterSpanCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerUserSpans",{get:function(){return this._footerUserSpans},set:function(t){this._footerUserSpans=xt.makeArray(t,!0).slice(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryUserSpans",{get:function(){return this._summaryUserSpans},set:function(t){this._summaryUserSpans=xt.makeArray(t,!0).slice(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterUserSpans",{get:function(){return this._groupFooterUserSpans},set:function(t){this._groupFooterUserSpans=xt.makeArray(t,!0).slice(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterUserSpanCallback",{get:function(){return this._groupFooterUserSpanCallback},set:function(t){t!=this._groupFooterUserSpanCallback&&(this._groupFooterUserSpanCallback=t,this._changed())},enumerable:!1,configurable:!0}),i.prototype.canMerge=function(){if(null!=this._mergeRuleObj)return!0;if(this._columnObj instanceof Hr){if(this._columnObj.mergeGrouped)return!0;if(void 0===this._mergeRuleObj)return null!=this._columnObj._mergeRuleObj}},Object.defineProperty(i.prototype,"isNull",{get:function(){return!this._columnObj},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._rows},set:function(t){this._rows=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstColumn",{get:function(){return this._columnObj},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastColumn",{get:function(){if(this._columnObj)return this._columnObj;for(var t=this.parent.visibles,e=t.indexOf(this);e-- >0;){var o=t[e];if(o instanceof i&&o.lastColumn)return o.lastColumn}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boundColumn",{get:function(){return this._columnObj},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this._header&&this._header.text||this._columnObj&&this._columnObj.displayText||this.toString()},enumerable:!1,configurable:!0}),i.prototype.getHeaderSpan=function(){return void 0===this._headerSpan?this._cellSpan:this._headerSpan},i.prototype.getSummarySpan=function(t){var e,i=this._summarySpanCallback,o=this._summarySpans;return i?void 0===(e=i(this.grid.handler,this,t))&&o&&o.length>t&&(e=o[t]):o&&o.length>t&&(e=o[t]),void 0===e?this._cellSpan:e},i.prototype.getFooterSpan=function(t){var e,i=this._footerSpanCallback,o=this._footerSpans;return i?void 0===(e=i(this.grid.handler,this,t))&&o&&o.length>t&&(e=o[t]):o&&o.length>t&&(e=o[t]),void 0===e?this._cellSpan:e},i.prototype.getFooterUserSpan=function(t){return this._footerUserSpans&&this._footerUserSpans[t]},i.prototype.getSummaryUserSpan=function(t){return this._summaryUserSpans&&this._summaryUserSpans[t]},i.prototype.getGroupFooterUserSpan=function(t,e){var i,o=this._groupFooterUserSpanCallback;return o&&(i=o(this.grid.handler,this,t,t.index,e)),i||this._groupFooterUserSpans&&this._groupFooterUserSpans[e]},i.prototype.getGroupFooterSpan=function(t,e){var i,o=this._groupFooterSpanCallback,n=this._groupFooterSpans;return o?void 0===(i=o(this.grid.handler,this,t,e))&&n&&n.length>e&&(i=n[e]):n&&n.length>e&&(i=n[e]),void 0===i?this._cellSpan:i},i.prototype.getDataSpan=function(){return void 0===this._dataSpan?this._cellSpan:this._dataSpan},i.prototype.getDataColumn=function(){return this._columnObj},i.prototype._createHeader=function(){return new Qr(this)},i.prototype._isResizable=function(){return!this._columnObj||this._columnObj.resizable},i.prototype._isMovable=function(){for(var t=!0,e=this.parent;e;)t=t&&e.childColumnMovable,e=e.parent;return t&&(!this._columnObj||this._columnObj.movable)},i.prototype.isColumn=function(t){return this._columnObj===t},i.prototype.findLayout=function(t){return t&&this._columnObj===t?this:null},i.prototype.load=function(t){if(this.assignFrom(t),e.prototype.load.call(this,t),!this._columnObj&&"string"==typeof this._column){var i=this.owner&&this.owner.grid;this._columnObj=i?i.columnByName(this._column):null}},i.prototype.cleanColumns=function(){this._columnObj&&this._columnObj.clean()},i.prototype.$_isVisible=function(t){return t?this._visible:this._visible&&(!this._columnObj||this._columnObj.visible)},i.prototype._getWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.width:NaN:t},i.prototype._getFillWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.fillWidth:NaN:t},i.prototype._prepareLayout=function(i,o,n){if(e.prototype._prepareLayout.call(this,i,o,n),this._columnObj){this._columnObj._prepareLayout(i,this);var r=this.parent.direction===t.ColumnLayoutDirection.VERTICAL?this.cellSpan+this._dspan-1:this._dspan;(this._blanked=r===this.owner.dataRows)&&(this._blankNodeRun=this._equalBlankNode,this._blanked=this._equalBlank||null!=this._blankNodeRun,this._blanked||(void 0===this._equalBlankNode&&(this._blanked=null!=(this._blankNodeRun=this._columnObj._equalBlankNode)),this._blanked||void 0!==this._equalBlank||(this._blanked=this._columnObj._equalBlank)))}},i.prototype.toString=function(){return"string"==typeof this._column?this._column:e.prototype.toString.call(this)},i.prototype.clearMergeGrouped=function(){this.firstColumn instanceof Hr&&this.firstColumn.$_setMergeGrouped(!1)},i.prototype.$_bindColumn=function(t,e,i){if(void 0===i&&(i=!1),this._columnObj||(this._columnObj=e.columnByName(this._column)),this._columnObj){var o=this._columnObj.$_hash;if(t[o])throw new Error("Column is already contained in layouts: "+(this._columnObj.name||this._columnObj.displayText));i||(this._columnObj._layout=this),!i&&(this._columnObj._layout=this),t[o]=this}},i.prototype.$_mergeRuleObj=function(){return this._mergeRuleObj?this._mergeRuleObj:void 0===this._mergeRuleObj&&this._columnObj instanceof Hr?this._columnObj._mergeRuleObj:null},i}(zr);t.ColumnLayoutDirection=void 0,(Ur=t.ColumnLayoutDirection||(t.ColumnLayoutDirection={})).VERTICAL="vertical",Ur.HORIZONTAL="horizontal";var qr,Xr,Qr=function(t){function e(e){var i=t.call(this)||this;return i._layout=e,i}return n(e,t),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this.layout.firstColumn.header.styleName},set:function(t){this.layout.firstColumn.header.styleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this.layout.firstColumn.header.exportStyleName},set:function(t){this.layout.firstColumn.header.exportStyleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype.isVisible=function(){return!0},e.prototype.getDisplayText=function(){return this._text},e.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},e.prototype._changed=function(){this._layout&&this._layout._headerChanged()},e}(kt),Jr=function(t){function e(e){var i=t.call(this,e)||this;return i._visible=!0,i._showTooltip=void 0,i}return n(e,t),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new jn),this._template.template=t):this._template=void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?xt.extendObj(t,this._values={}):this._values=void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!==this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){t!==this._tooltip&&(this._tooltip=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!==this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return Math.max(1,this._rows||1)},set:function(t){t!==this._rows&&(this._rows=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t,this._changed()},enumerable:!1,configurable:!0}),e.prototype.realizeTemplate=function(){var t=this._template;return t?t.realizeHeader(this,null,this._layout.grid):void 0},e.prototype.getValue=function(t){return this._values&&this._values[t]},e.prototype.doAssignSimple=function(e){return!t.prototype.doAssignSimple.call(this,e)&&"boolean"==typeof e&&(this.visible=e,!0)},e.prototype.isVisible=function(){return this._visible},e.prototype.getDisplayText=function(){return this.text||this.layout.name},Object.defineProperty(e.prototype,"displayText",{get:function(){return this.getDisplayText()},enumerable:!1,configurable:!0}),e}(Qr),Zr=function(e){function i(i,o){var n=e.call(this)||this;return n._direction=t.ColumnLayoutDirection.HORIZONTAL,n._items=[],n._resizable=!0,n._movable=!0,n._hideChildHeaders=!1,n._childColumnMovable=!0,n._visibles=[],n._cols=0,n._rows=0,n._headerRows=0,n._expandedLayouts=[],n._collapsedLayouts=[],n._type=t.CellLayoutType.GROUP,n._name=i,n._direction=o==t.ColumnLayoutDirection.VERTICAL?t.ColumnLayoutDirection.VERTICAL:t.ColumnLayoutDirection.HORIZONTAL,n}return n(i,e),i.getNext=function(t){var e=t&&t.parent;return e?((t=e.nextOf(t))||(t=i.getNext(e)),t):null},i.getPrev=function(t){var e=t&&t.parent;return e?((t=e.prevOf(t))||(t=i.getPrev(e)),t):null},i.isTop=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&e.visibleCount>1&&t.vindex>0)return!1;e=(t=e).parent}return!0},i.isBottom=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&e.visibleCount>1&&t.vindex<e.visibleCount-1)return!1;e=(t=e).parent}return!0},i.isLeft=function(t){for(var e=t&&t.parent;e;){if(!e.vertical&&e.visibleCount>1&&t.vindex>0)return!1;e=(t=e).parent}return!0},i.isRight=function(t){return i.isBottom(t)},i.prototype._doDispose=function(){this._items.forEach((function(t){t&&t.dispose()})),this._visibles=this._items=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(e){e!=t.ColumnLayoutDirection.VERTICAL&&(e=t.ColumnLayoutDirection.HORIZONTAL),e!=this._direction&&(this._direction=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vertical",{get:function(){return this._direction==t.ColumnLayoutDirection.VERTICAL},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"horizontal",{get:function(){return this._direction!=t.ColumnLayoutDirection.VERTICAL},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return this._resizable},set:function(t){this._resizable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._movable},set:function(t){this._movable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideChildHeaders",{get:function(){return this._hideChildHeaders},set:function(t){t!=this._hideChildHeaders&&(this._hideChildHeaders=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childColumnMovable",{get:function(){return this._childColumnMovable},set:function(t){this._childColumnMovable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},set:function(t){this._items=t?t.slice():[];for(var e=0,i=this._items;e<i.length;e++)i[e]._parent=this;this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibles",{get:function(){return this._visibles.slice()},enumerable:!1,configurable:!0}),i.prototype.$_isVisible=function(t){return this.visible&&this._visibles.length>0},Object.defineProperty(i.prototype,"expandable",{get:function(){return this._expandable},set:function(t){t!=this._expandable&&(this._expandable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&this.owner.expandLayout(this,t)},enumerable:!1,configurable:!0}),i.prototype.indexOf=function(t){for(var e=0;e<this._items.length;e++)if(this._items[e]===t)return e;return-1},i.prototype.getItem=function(t){return this._items[t]},i.prototype.getVisible=function(t){return this._visibles[t]},i.prototype.addLayout=function(e,o){if(!this.owner.isDefault()){var n,r,s,a=this.grid,l=this.owner;if(a&&a._checkEditing(),"string"==typeof e?s=l.layoutByName(e):e instanceof jr?s=l.layoutByColumn(e):e&&"string"==typeof e.column&&(s=l.layoutByName(e.column)),s)throw new Error("addLayout fail - Column or Group is already contained in layouts: "+s.firstColumn.name);if("string"==typeof e||e instanceof jr)n="string"==typeof e&&u(a,e),r=new Yr(e);else if(e)if("string"==typeof e.column)n=u(a,e.column),r=new Yr(e.column);else if((e.type===t.CellLayoutType.GROUP||e.items)&&e.name){if(l.layoutByName(e.name))throw new Error("addLayout fail - group is already contained in layouts: "+e.name);r=new i(e.name,e.direction)}return r?("object"==typeof e&&r.load(e),this.addItem(r,o),(r instanceof Yr&&n||r instanceof i&&r._items.length)&&this.owner._root&&this.owner._root.resetColumns(a._columns),r):void 0}function u(t,e){var i=t.columnByName(e);if(!i)throw new Error("not exists column ".concat(e));return i}},i.prototype.removeLayout=function(t){if(!this.owner.isDefault()){var e=this.grid;e&&e._checkEditing(),"string"==typeof t?t=this.layoutByName(t):t instanceof jr&&(t=t.layout),t instanceof zr&&t.parent.removeItem(t,!0)}},i.prototype.addItem=function(t,e){void 0===e&&(e=this._items.length),null!=t&&e>=0&&e<=this._items.length&&(this._items.splice(e,0,t),t._parent=this,this._changed())},i.prototype.clear=function(t){void 0===t&&(t=!0);for(var e=0,o=this._items;e<o.length;e++){var n=o[e];t&&n instanceof i&&n.clear(),n._detach()}this._items=[],this._visibles=[],this._cols=0,this._rows=0,this._headerRows=0},i.prototype.removeItem=function(t,e){var i=this.indexOf(t);if(i>=0){if(t instanceof Yr&&t.cellSpan>1)for(var o=t.cellSpan-1;o--;){var n=this._items.splice(i+o,1)[0];n&&(n._detach(),e&&n.dispose())}this._items.splice(i,1),t._detach(),e&&t.dispose(),this._changed()}},i.prototype.layoutByName=function(t){if(t)for(var e=0,o=this._items;e<o.length;e++){var n=o[e];if(n instanceof Yr&&n.firstColumn.name===t)return n;if(n instanceof i){if(n.name===t)return n;var r=n.layoutByName(t);if(r)return r}}return null},i.prototype.nextOf=function(t){try{var e=this.$_checkVisible(t);if(e<this.visibleCount-1)return ts(this,e+1)}catch(t){xt.log("nextOf fail")}return null},i.prototype.prevOf=function(t){try{var e=this.$_checkVisible(t);if(e>0)return es(this,e-1)}catch(t){xt.log("prevOf fail")}return null},i.prototype.isExpandable=function(){return this.expandable&&this._expandedLayouts.length>0&&this._collapsedLayouts.length>0},i.prototype.expandAll=function(t,e){this.expandable&&(this.expanded=t),this._items.forEach((function(o){o instanceof i&&o.expandAll(t,e)}))},i.prototype._clearFitWidth=function(){e.prototype._clearFitWidth.call(this);for(var t=0,i=this._visibles;t<i.length;t++)i[t]._clearFitWidth()},Object.defineProperty(i.prototype,"cellWidth",{get:function(){return this.owner.getCellWidths(this._col,this._clen)},set:function(t){var e=!!this.grid&&this.grid.layoutManager.isColumnFitted;this.changeCellWidth(t,e,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return this._headerRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this._visibles.length>0?this._visibles[0].first:this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){var t=this._visibles?this._visibles.length:0;return t>0?this._visibles[t-1].last:this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstColumn",{get:function(){return this._visibles&&this._visibles.length>0?this._visibles[0].firstColumn:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastColumn",{get:function(){for(var t=this._visibles?this._visibles.length-1:-1;t>=0;t--){var e=this._visibles[t].lastColumn;if(e)return e}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boundColumn",{get:function(){return this.firstColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this._header&&this._header.text||this._name},enumerable:!1,configurable:!0}),i.prototype._createHeader=function(){return new Jr(this)},i.prototype.load=function(t){this.clear(),void 0!==t.hideChildHeaders&&(this.hideChildHeaders=t.hideChildHeaders),this.expandable=t.expandable,this._expanded=null==t.expanded||t.expanded,void 0!==t.resizable&&(this.resizable=t.resizable),void 0!==t.childColumnMovable&&(this.childColumnMovable=t.childColumnMovable),void 0!==t.movable&&(this.movable=t.movable),null==t.rows||isNaN(t.rows)||(this._rows=t.rows),t.items&&this._loadItems(t.items),e.prototype.load.call(this,t)},i.prototype.findLayout=function(t){for(var e=0,i=this._items;e<i.length;e++){var o=i[e].findLayout(t);if(o)return o}return null},i.prototype.cleanColumns=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).cleanColumns()},i.prototype._isResizable=function(){return this._resizable},i.prototype._isMovable=function(){for(var t=this._movable,e=this.parent;e;)t=t&&e.childColumnMovable,e=e.parent;return t},i.prototype._setFitWidth=function(t){if(e.prototype._setFitWidth.call(this,t),this.vertical)for(var i=0,o=this._visibles;i<o.length;i++)if((c=o[i])instanceof Yr){var n=c._cellWidth/this.cellWidth*t;c._setFitWidth(n)}else c._setFitWidth(t);else{for(var r=0,s=0,a=this._visibles;s<a.length;s++)r+=(c=a[s])._cellWidth;for(var l=0,u=this._visibles;l<u.length;l++){var c;n=(c=u[l])._cellWidth/r*t,c._setFitWidth(n)}}},i.prototype._prepareLayout=function(t,i,o){e.prototype._prepareLayout.call(this,t,i,o);for(var n=0,r=this._visibles;n<r.length;n++)r[n]._prepareLayout(t,i,o)},i.prototype.toString=function(){return this._name||e.prototype.toString.call(this)},i.prototype.clearMergeGrouped=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).clearMergeGrouped()},i.prototype._loadItems=function(e){for(var o,n=0,r=0,s=e;r<s.length;r++){var a=s[r],l=void 0;n++,"string"==typeof a?o=l=new Yr(a):"number"==typeof a?(l=new Kr(o,n))._width=a:a&&(a.type===t.CellLayoutType.GROUP||a.items?l=new i(a.name,a.direction):"string"==typeof a.column?o=l=new Yr(a.column):a instanceof jr&&(o=l=new Yr(a))),l&&(l._parent=this,l.load(a),this._items.push(l))}},i.prototype.$_bindColumns=function(t,e,o){for(var n=0,r=this._items;n<r.length;n++){var s=r[n];s._root=null,s instanceof i?s.$_bindColumns(t,e,o):!s.isProxy&&s.$_bindColumn(t,e,o)}},i.prototype.$_parseExpandLayouts=function(e){var o=this;this._expandedLayouts.length=this._collapsedLayouts.length=0,this.items.forEach((function(n,r){if(!n.isProxy){switch(n.groupShowMode){case t.GroupShowMode.EXPAND:o._expandedLayouts.push(n);break;case t.GroupShowMode.COLLAPSE:o._collapsedLayouts.push(n);break;default:o._expandedLayouts.push(n),o._collapsedLayouts.push(n)}n instanceof i&&n.$_parseExpandLayouts(e)}}))},i.prototype.$_parseHeaderCells=function(e,o,n){var r=this._direction===t.ColumnLayoutDirection.HORIZONTAL,s=0,a=this._header.isVisible()?this._header.rows:0;if(a&&this._hideChildHeaders)return this._cspan=this._clen=this._cols,void(this._hlen=this._headerRows);for(var l=0,u=this._visibles;l<u.length;l++){var c=u[l],h=!c.isProxy&&c.header.isVisible()?c.header.rows:c.isProxy&&!r?1:0;if(c._hrow=o,c._hcol=n,c._hspan=h,c._hlen=h,c instanceof i)if(h>0&&(e[o][n]=c),c.$_parseHeaderCells(e,o+h,n),h>0){for(var p=0;p<h;p++)for(var d=0===p?1:0;d<c.cols;d++)e[o+p][n+d]=new Kr(c,d);r?n+=c.cols:o+=c.headerRows}else r?n+=c.cols:o+=c.headerRows;else if(e[o][n]=c,r){for(p=1;p<this.headerRows-a;p++)e[o+p][n]=new Kr(c,p),c._hspan++;c._hlen=c._hspan,n+=c.cols}else{for(p=1;p<this.cols;p++)e[o][n+p]=new Kr(c,p);o+=c.rows}r?s=Math.max(c._hlen,s):s+=c._hlen}this._hlen=r?s+a:Math.max(1,s+a)},i.prototype.$_fillHorz=function(t,e,i,o,n,r,s){for(var a=o+r,l=n,u=l+i-1,c=0,h=e-r;c<h;c++)for(var p=u;p>=l;p--){var d=t[a+c][p];if(null!=d){d=zr.getSource(d);for(var f=p+1;f<=u;f++){var g=t[a+c][f]=new Kr(d,f-l);s?(g._hrow=a+c,g._hcol=f):(g._row=a+c,g._col=f,g._parent=d.group,d.row===g.row&&(d._cspan++,d instanceof Yr&&d._clen++))}break}}},i.prototype.$_fillVert=function(t,e,i,o,n,r,s){for(var a=o+r,l=o+e-1,u=n+i-1,c=n;c<=u;c++)for(var h=l;h>=a;h--){var p=t[h][c];if(null!=p){p=zr.getSource(p);for(var d=h+1;d<=l;d++){var f=t[d][c]=new Kr(p,d-a);s?(f._hrow=d,f._hcol=c,p.hcol===f.hcol&&(p._hspan++,p instanceof Yr&&p._hlen++)):(f._row=d,f._col=c,p.col===f.col&&(p._dspan++,p instanceof Yr&&p._dlen++),f._parent=p.group)}break}}},i.prototype.$_adjustHeaderCells=function(e){var o=this._header.isVisible()?this._header.rows:0;if(o&&this._hideChildHeaders){this._hspan=this._hlen;for(var n=0,r=0;r<this._hlen;r++)for(var s=0;s<this._clen;s++)if(r||s){var a=this._hrow+r,l=this._hcol+s,u=e[a][l]=new Kr(this,n++);u._hrow=a,u._hcol=l}}else if(this._direction===t.ColumnLayoutDirection.VERTICAL){for(var c=this._clen,h=0,p=this._visibles;h<p.length;h++)(g=p[h])instanceof i&&(g._clen=this._clen,g.$_adjustHeaderCells(e));this.$_fillVert(e,this._hlen,c,this._hrow,this._hcol,o,!0),this.$_fillHorz(e,this._hlen,c,this._hrow,this._hcol,o,!0)}else{for(var d=0,f=this._visibles;d<f.length;d++){var g;(g=f[d])instanceof i&&(g._hlen=this._hlen-o,g.$_adjustHeaderCells(e))}this.$_fillVert(e,this._hlen,this._cols,this._hrow,this._hcol,o,!0),this.$_fillHorz(e,this._hlen,this._cols,this._hrow,this._hcol,o,!0)}},i.prototype.$_parseDataCells=function(e,o,n){for(var r,s=this._direction!=t.ColumnLayoutDirection.VERTICAL,a=0,l=0,u=0,c=this._visibles;u<c.length;u++){var h=c[u];if(h._row=o,h._col=n,h._dspan=1,h._dlen=1,h._cspan=1,h._clen=1,h instanceof i){if(h.$_parseDataCells(e,o,n),s)n+=h.cols;else if(o+=h.rows,2==this.rows){for(var p=1/0,d=0,f=0,g=this.visibles;f<g.length;f++){var y=g[f];p=Math.min(p,y.cols),d=Math.max(d,y.cols),y.ignoreCalcWidth=!1}if(1===p&&d>1)for(var _=0,m=this.visibles;_<m.length;_++)(y=m[_]).ignoreCalcWidth=1===y.cols}}else if(e[o][n]=h,s){for(var v=1;v<this.rows;v++)e[o+v][n]=r=new Kr(h,v),h._dspan++,r._col=n,r._row=o+v,r._parent=this;h._dlen=h._dspan,n+=h.cols}else{for(v=1;v<this.cols;v++)e[o][n+v]=r=new Kr(h,v),h._cspan++,r._col=n+v,r._row=o,r._parent=this;h._clen=h._cspan,o+=h.rows}s?(l+=h._clen,a=Math.max(h._dlen,a)):(l=Math.max(h._clen,l),a+=h._dlen)}s?(l=Math.max(1,l),this._dlen=a):this._dlen=Math.max(1,a),this._cspan=this._clen=l},i.prototype.$_adjustDataCells=function(e){if(this._direction===t.ColumnLayoutDirection.VERTICAL){for(var o=0,n=this._visibles;o<n.length;o++)(a=n[o])instanceof i&&(a._cspan=a._clen=this._clen,a.$_adjustDataCells(e));this.$_fillVert(e,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(e,this._dlen,this._clen,this._row,this._col,0,!1)}else{for(var r=0,s=this._visibles;r<s.length;r++){var a;(a=s[r])instanceof i&&(a._dlen=this._dlen,a.$_adjustDataCells(e))}this.$_fillVert(e,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(e,this._dlen,this._clen,this._row,this._col,0,!1)}},i.prototype.$_calcSpans=function(){var e=this._header.isVisible();if(this._direction==t.ColumnLayoutDirection.HORIZONTAL){for(var o=0,n=1,r=1,s=0,a=this._visibles;s<a.length;s++)(p=a[s])instanceof i&&p.$_calcSpans(),o+=p.cols,n=Math.max(n,p.headerRows),r=Math.max(r,p.rows);this._rows=r,this._cols=o,e&&this._hideChildHeaders?this._headerRows=this._header.rows:this._headerRows=n+(e?this._header.rows:0)}else{this._cols=1,this._headerRows=e?this._header.rows:0,this._rows=0;for(var l=0,u=this._visibles;l<u.length;l++)(p=u[l])instanceof i&&p.$_calcSpans(),this._headerRows+=p.headerRows,this._rows+=p.rows,this._cols=Math.max(p.cols,this._cols);for(var c=0,h=this._visibles;c<h.length;c++){var p;(p=h[c])instanceof i&&(p._cols=this._cols)}e&&this._hideChildHeaders&&(this._headerRows=this._header.rows)}},i.prototype.$_resetVisibles=function(e){var o=0,n=0,r=this.visibles;this._visibles=[];for(var s=0,a=this._items;s<a.length;s++){var l=a[s];l._index=o++,l instanceof i&&l.$_resetVisibles(e);var u=l.$_isVisible(e);u&&this.expandable&&(u=this._expanded?this._expandedLayouts.indexOf(l)>=0:this._collapsedLayouts.indexOf(l)>=0),u&&(this._visibles.push(l),l._vindex=n++)}if(!e&&r.length!=this._visibles.length&&this.direction===t.ColumnLayoutDirection.HORIZONTAL)for(var c=this;c;)c._cellWidth=NaN,c.width=NaN,c=c.parent;this.$_calcSpans()},i.prototype.$_getLeaf=function(t,e){for(var o=0,n=this._visibles;o<n.length;o++){var r=n[o];if(r instanceof i){var s=r.row,a=s+r.rows;if(t>=s&&t<a){var l=r.col,u=l+r.cols;if(e>=l&&e<u)return this.$_getLeaf(t-s,e-l)}}else if(r.row===t&&r.col===e)return r}return null},i.prototype.$_collectCellWidths=function(t){for(var e=[],o=0,n=this._visibles;o<n.length;o++){var r=n[o],s=r._cellWidth||r.width;if(r instanceof Yr&&(isNaN(s)||0==s)&&(s=t),r instanceof i){var a=r.$_collectCellWidths(t);isNaN(s)&&(s=a),r._cellWidth=s}else r._cellWidth=s;e.push(s)}var l=this.width;return isNaN(l)&&(l=this.vertical?Math.max.apply(null,e):e.reduce((function(t,e){return t+e}),0)),l},i.prototype.$_calcCellWidths=function(t,e,i){if(!i){for(var o=e.slice(),n=0;n<o.length;n++)o[n]=0;var r=this.owner._moveColumn,s=t.slice();if(r){var a=s.splice(r.first.row,1);s.splice(0,0,a[0])}for(var l=0;l<s.length;l++)for(var u=s[l],c=0;c<u.length;c++){var h=u[c];r?e[c]=e[c]||h._cellWidth:(!h.isProxy||h._cellWidth>0&&!h.ignoreCalcWidth)&&(e[c]+=h._cellWidth,o[c]++)}for(n=0;n<e.length;n++)e[n]=Math.round(e[n]/Math.max(o[n],1))}for(l=0;l<t.length;l++)for(u=t[l],c=0;c<u.length;c++){var p=u[c];if(p._cellWidth=e[c],p instanceof Yr){var d=p._cellWidths=[];for(n=0;n<p.cspan;n++)d[n]=e[c+n]||0}}},i.prototype._childIndexChanged=function(t){this.parent&&this.parent._childIndexChanged(t)},i.prototype._childWidthChanged=function(t){this.parent&&this.parent._childWidthChanged(t)},i.prototype._childFillWidthChanged=function(t){this.parent&&this.parent._childFillWidthChanged(t)},i.prototype.$_checkVisible=function(t){var e;if(!t||(e=t.vindex)<0||t!==this.getVisible(e))throw new Error("Column is not a visible group member");return e},i.prototype.$_collectHorzColumns=function(t,e,o){if(this.horizontal)for(var n=e;n<=o;n++){var r=this._visibles[n];r instanceof i?r.$_collectHorzColumns(t,0,r.visibleCount-1):r instanceof Yr&&t.push(r._columnObj)}},i.prototype.$_changeChildVIndex=function(t,e){t&&e!=t.vindex&&e>=0&&e<this._visibles.length&&this.$_changeChildIndex(t,this._visibles[e].index)},i.prototype.$_changeChildIndex=function(t,e){if(t){var i=t.index;if(i!=e&&e>=0&&e<this._items.length){e=e<=i?e:e+(this._items[e].getHeaderSpan()-1)-(t.getHeaderSpan()-1);for(var o=this._items.splice(i,t.getHeaderSpan()),n=0;n<o.length;n++)this._items.splice(e+n,0,o[n]);this.$_resetVisibles(),this._childIndexChanged(t)}}},i}(zr),ts=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var n=t.getVisible(i);if(n instanceof Yr)return n;if(n instanceof Zr&&(n=zr.getSource(n.first))instanceof Yr)return n}return null},es=function(t,e){for(var i=e;i>=0;i--){var o=t.getVisible(i);if(o instanceof Yr)return o;if(o instanceof Zr&&(o=zr.getSource(o.last))instanceof Yr)return o}return null},is=function(t,e,i){for(var o=i?t.visibleCount:t.count,n=0;n<o;n++){var r=i?t.getVisible(n):t.getItem(n);if(r instanceof Yr){var s=r._columnObj;s&&e.push(s)}else r instanceof Zr&&is(r,e,i)}},os=function(t,e,i){for(var o=i?t.visibleCount:t.count,n=0;n<o;n++){var r=i?t.getVisible(n):t.getItem(n);r instanceof Yr?e.push(r):r instanceof Zr&&os(r,e,i)}},ns=function(t,e,i,o,n){for(var r=o?t.visibleCount:t.count,s=0;s<r;s++){var a=o?t.getVisible(s):t.getItem(s);if(a instanceof Yr&&!n){var l=a._columnObj;l&&e.push(l.name)}else a instanceof Zr&&((!i||n)&&e.push(a.name),ns(a,e,i,o,n))}},rs=function(t,e,i){for(var o=i?t.visibleCount:t.count,n=0;n<o;n++){var r=i?t.getVisible(n):t.getItem(n);if(r instanceof Yr){var s=r._columnObj;s instanceof Hr&&e.push(s)}else r instanceof Zr&&rs(r,e,i)}},ss=function(t){function e(e){var i=t.call(this,"$_root_$",null)||this;return i._owner=e,i.header._visible=!1,i}return n(e,t),Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expandable",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.resetColumns=function(t){this.items.length>0&&(this.$_bindColumns({},t,!1),this.$_resetVisibles(!1))},Object.defineProperty(e.prototype,"grid",{get:function(){return this._owner.grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype._changed=function(){this._owner&&this._owner._changed()},e.prototype._childIndexChanged=function(t){this._owner._itemIndexChanged(t)},e.prototype._childWidthChanged=function(t){this._owner._itemWidthChanged(t)},e.prototype._childFillWidthChanged=function(t){this._owner._itemFillWidthChanged(t)},e.prototype._setColumns=function(t){var e=this._items;e.length=0;for(var i=0,o=t.count;i<o;i++){var n=new Yr(t.getColumn(i));e.push(n),n._parent=this}this.resetColumns(t)},e}(Zr),as=function(t){function e(e){var i=t.call(this)||this;return i._cellWidths=[],i._grid=e,i._root=new ss(i),i}return n(e,t),e.prototype._doDispose=function(){this._grid=null,this._root=this._root.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._root.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleCount",{get:function(){return this._root.visibleCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerRows",{get:function(){return this._root._hlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataRows",{get:function(){return this._root._dlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this._root.first},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._root.last},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstColumn",{get:function(){return this._root.firstColumn},enumerable:!1,configurable:!0}),e.prototype.load=function(t){return this.$_clear(),this._loading=!0,this._root._loadItems(t),this._changed(),this._loading=!1,this},e.prototype.resetColumns=function(t){this._root.resetColumns(t)},e.prototype.cleanColumns=function(){this._root.cleanColumns()},e.prototype.invalidate=function(){this._changed()},e.prototype.invalidateIndices=function(t){this.grid.displayOptions.remergeWhenColumnMoved&&this.grid._populateMerges(),this.grid.clearAddSelection(),this._moveColumn=t,this._changed()},e.prototype.invalidateSize=function(){this._resized||(this._resized=!0,this.grid.invalidateCellLayouts())},e.prototype.getVisible=function(t){return this._root.getVisible(t)},e.prototype.addLayout=function(t,e){return this._root.addLayout(t,e)},e.prototype.removeLayout=function(t){this._root.removeLayout(t)},e.prototype.expandLayout=function(t,e){this.fireExpanding(t,e)&&(t._expanded=e,this._root.$_resetVisibles(),this._changed(),this.fireExpanded(t,e))},e.prototype.setColumns=function(t){this._root._setColumns(t),this._changed()},e.prototype.layoutByColumn=function(t){return t&&this._root.findLayout(t)},e.prototype.layoutByName=function(t){return t&&this._root.layoutByName(t)},e.prototype.getHeaderCellPos=function(t){for(var e=0;e<this._headerCells.length;e++)for(var i=this._headerCells[e],o=0;o<i.length;o++)if(i[o]instanceof Yr&&i[o]._columnObj===t)return{row:e,col:o}},e.prototype.getDataCellPos=function(t){for(var e=0;e<this._dataCells.length;e++)for(var i=this._dataCells[e],o=0;o<i.length;o++)if(i[o]instanceof Yr&&i[o]._columnObj===t)return{row:e,col:o}},e.prototype.getDataColumns=function(t){void 0===t&&(t=!0);var e=[];return rs(this._root,e,t),e},e.prototype.collectColumns=function(t,e,i){var o=[];return is(this._root,o,e),o},e.prototype.collectLayouts=function(t){var e=[];return os(this._root,e,!0),e},e.prototype.collectColumnNames=function(t,e,i,o){var n=[],r=this._root;return o?"string"==typeof o?r=function t(e,i){for(var n=0,r=e.count;n<r;n++){var s=e.getItem(n);if(s instanceof Zr)return s.name===o?s:t(s)}}(r):o instanceof Zr&&(r=o):r=this._root,r?(ns(r,n,t,e,i),n):null},e.prototype.collectDataColumns=function(t,e){t=t.source,e=e.source;var i=Math.min(t.col,e.col),o=Math.max(t.col+t._defColSpan,e.col+e._defColSpan)-1,n=[];rs(this._root,n,!0);for(var r=n.length-1;r>=0;r--){var s=n[r].layout.col;(s<i||s>o)&&n.splice(r,1)}return n},e.prototype.getHorzColumns=function(t,e){void 0===t&&(t=0);var i=null==e?t+this._root.visibleCount-1:t+e-1,o=[];return this._root.$_collectHorzColumns(o,t,i),o},e.prototype.getHomeOf=function(t){return t=zr.getSource(t),t=this._dataCells[t?t.row:0][0],zr.getSource(t)},e.prototype.getEndOf=function(t){t=zr.getSource(t);var e=this._dataCells,i=t?t.row:e.length-1;return t=e[i][e[i].length-1],zr.getSource(t)},e.prototype.getTopOf=function(t){return t=this._dataCells[0][t.col],zr.getSource(t)},e.prototype.getBottomOf=function(t,e){var i=this._dataCells;return t=i[i.length-1][t.col],e?t:zr.getSource(t)},e.prototype.getLowerOf=function(t){t=zr.getSource(t);var e=this._dataCells,i=t.row,o=t.col,n=0;return i+t.rows<e.length?t=e[i+t.rows][o]:(n=1,t=e[0][o]),{dy:n,layout:zr.getSource(t)}},e.prototype.getUpperOf=function(t){t=zr.getSource(t);var e=this._dataCells,i=t.row,o=t.col,n=0;return i>0?t=e[i-1][o]:(n=-1,t=e[e.length-1][o]),{dy:n,layout:zr.getSource(t)}},e.prototype.getRightOf=function(t){var e=this._dataCells[t.row],i=t.col;return i+t.cols<e.length?(t=e[i+t.cspan],zr.getSource(t)):null},e.prototype.getLeftOf=function(t){t=zr.getSource(t);var e=this._dataCells[t.row],i=t.col;return i>0?(t=e[i-1],zr.getSource(t)):null},e.prototype.getCellWidths=function(t,e){for(var i=0,o=0;o<e;o++)i+=this._cellWidths[o+t];return i},e.prototype.getLayout=function(t,e,i,o,n,r){function s(a){var l,u;if(a instanceof Yr){var c=a.firstColumn;if(c)return h=(h=c.visible&&a.visible||i)&&n.indexOf(c.name)<0||o.indexOf(c.name)>=0,(p=a.toProxy(!1)).visible=t?h:a.visible,p.width=(t&&e?a._fitWidth:a._cellWidth)||a.width,p.column=c.name,p}else{if(a.isProxy)return(t&&e?a._fitWidth:a._cellWidth)||a.width;if(a instanceof Zr){var h,p;u=a._items,l=[],h=(h=a.visible||i)&&n.indexOf(a.name)<0||o.indexOf(a.name)>=0;for(var d=0,f=u.length;d<f;d++)l.push(s.call(this,u[d]));if((p=a.toProxy(!1)).name=a.name,p.items=l,p.visible=t?h:a.visible,p.header=a.header&&a.header.toProxy(!1),t&&p.expandable)switch(r){case"current":break;case"expand":p.expanded=!0;break;case"collapse":p.expanded=!1;break;default:p.expandable=!1}return delete p.width,p}}}void 0===o&&(o=[]),void 0===n&&(n=[]),e=e&&!!this.grid.layoutManager.isColumnFitted;for(var a=this._root._items,l=[],u=0,c=a.length;u<c;u++)l.push(s.call(this,a[u]));return l},e.prototype.expandAll=function(t,e){this._root.expandAll(t,e)},e.prototype.isShowing=function(t){for(var e=t;e&&e.parent;){if(e.parent.visibles.indexOf(e)<0)return!1;e=e.parent}return!0},e.prototype.isDefault=function(){return!1},e.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateCellLayouts()}},e.prototype.$_clear=function(){this._headerCells=[],this._dataCells=[]},e.prototype.$_refresh=function(t,e){this._dirty?(this._root.$_bindColumns({},t),this._root.$_parseExpandLayouts(),this._root.$_resetVisibles(),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e),this._dirty=!1):this._resized&&this.$_calculateCellWidths(this._root,e),this._resized=!1,this._moveColumn=null},e.prototype.$_refresh2=function(t,e){this._root.$_bindColumns({},t,!0),this._root.$_parseExpandLayouts(),this._root.$_resetVisibles(!0),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e)},e.prototype.$_prepareMerges=function(t){for(var e=this.collectColumns(!0,!0,!1),i=0,o=e.length;i<o;i++){var n=e[i],r=this.layoutByColumn(n);if(r&&r.canMerge()){var s=r.merges;s||(s=new Tr(r)),s.clear(),s.initialize(10),s.refreshRooms(0,t.itemCount-1,!0)}}},e.prototype.$_prepareLayout=function(t,e,i){for(var o=0,n=this._root.visibleCount;o<n;o++)this._root.getVisible(o)._prepareLayout(t,o<e,o>=n-i)},e.prototype.$_parseCells=function(t,e){var i=t._visibles;this.$_parseHeaderCells(i),this.$_parseDataCells(i)},e.prototype.$_parseHeaderCells=function(t){for(var e=this._headerCells=[],i=0,o=0,n=t;o<n.length;o++){var r=n[o];i=Math.max(i,r.headerRows)}for(var s=0;s<i;s++)e.push([]);this._root.$_parseHeaderCells(e,0,0),this._root.$_adjustHeaderCells(e)},e.prototype.$_parseDataCells=function(t){for(var e=this._dataCells=[],i=0,o=0,n=t;o<n.length;o++){var r=n[o];i=Math.max(i,r.rows)}for(var s=0;s<i;s++)e.push([]);this._root.$_parseDataCells(e,0,0),this._root.$_adjustDataCells(e);for(var a=0,l=e;a<l.length;a++)for(var u=l[a],c=0;c<u.length;){var h=u[c];if(h._defColSpan=1,h.isNull)c++;else for(;++c<u.length;){var p=u[c];if(!(!p||p.isProxy&&p.source===h||p.isNull&&p.group===h.group))break;h._defColSpan++}}},e.prototype.$_calculateCellWidths=function(t,e){if(this._dirty){(!this._cellWidths||this._cellWidths.length<=0||!this._moveColumn)&&t.$_collectCellWidths(e);for(var i=this._cellWidths=[],o=0,n=t.cols;o<n;o++)i.push(0);t.$_calcCellWidths(this._dataCells,i,!1)}else this._resized&&t.$_calcCellWidths(this._dataCells,this._cellWidths,!0)},e.prototype.$_clearFitWidths=function(){this._root._clearFitWidth()},e.prototype._columnsChanged=function(t){},e.prototype._columnChanged=function(t){},e.prototype._itemIndexChanged=function(t){this.invalidateIndices(t)},e.prototype._itemWidthChanged=function(t){this.invalidateSize()},e.prototype._itemFillWidthChanged=function(t){this.grid.layoutManager.isColumnFitted&&this.invalidateSize()},e.prototype._clearMergeGrouped=function(){this._root.clearMergeGrouped()},e.prototype.$_changeCellWidths=function(t,e,i,o){for(var n=this._cellWidths,r=[],s=0,a=0;a<e;a++)s+=n[t+a],r.push(s);var l=i/s;for(a=0;a<e-1;a++)r[a]=Math.round(r[a]*l);for(r[e-1]=i,a=e-1;a>0;a--)n[t+a]=Math.max(n[t+a]+r[a]-r[a-1],o);n[t]=Math.max(n[t]+r[0],o),this.invalidateSize()},e.prototype.$_calcGroupWidths=function(){var t=this._cellWidths;!function e(i){for(var o=0,n=0;n<i._clen;n++)o+=t[i.col+n];i._width=i._cellWidth=o;for(var r=0,s=i.visibles;r<s.length;r++){var a=s[r];a instanceof Zr&&e(a)}}(this._root)},e.prototype.fireExpanding=function(t,i){return this.fireConfirmEvent(i?e.LAYOUT_EXPANDING:e.LAYOUT_COLLAPSING,t)},e.prototype.fireExpanded=function(t,i){this.fireEvent(i?e.LAYOUT_EXPANDED:e.LAYOUT_COLLAPSED,t)},e.LAYOUT_EXPANDING="onLayoutExpanding",e.LAYOUT_COLLAPSING="onLayoutCollapsing",e.LAYOUT_EXPANDED="onLayoutExpanded",e.LAYOUT_COLLAPSED="onLayoutCollapsed",e}(Ee),ls=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._columnsChanged=function(e){this.setColumns(e),t.prototype._columnsChanged.call(this,e)},e.prototype.addLayout=function(t){return null},e.prototype.removeLayout=function(t){},e.prototype.isDefault=function(){return!0},e}(as);t.VerticalMoveStep=void 0,(qr=t.VerticalMoveStep||(t.VerticalMoveStep={})).ROW="row",qr.CELL="cell",t.FocusMoveStep=void 0,(Xr=t.FocusMoveStep||(t.FocusMoveStep={})).GROUP="group",Xr.CELL="cell";var us,cs,hs=function(e){function i(t,i,o){void 0===i&&(i=-1);var n=e.call(this,!0)||this;return n._itemIndex=-1,n._grid=t,n._itemIndex=i,n._layout=o instanceof Gr?o.layout:o,n}return n(i,e),i.temp=function(t,e,o){return void 0===e&&(e=0),i.$_temp||(i.$_temp=new i),i.$_temp._grid=t,i.$_temp._itemIndex=e,i.$_temp._layout=o instanceof zr?o:o&&o.layout,i.$_temp},i.areEquals=function(t,e){return t==e||t&&e&&t._grid===e._grid&&t._itemIndex===e._itemIndex&&t._layout===e._layout},i.equalsTo=function(t,e,i){return t&&t._itemIndex===e&&t.layout===i},i.clearTemp=function(){i.$_temp&&(i.$_temp=i.$_temp.dispose())},i.compareHorz=function(t,e){if(t&&e)return t.layout.distance-e.layout.distance},i.prototype._doDispose=function(){this._grid=null,this._layout=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},set:function(t){this._itemIndex=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"column",{get:function(){return this._layout&&this._layout.firstColumn},set:function(t){"string"==typeof t&&(t=this.grid&&this.grid.columnByName(t)),this._layout=t&&t.layout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataColumn",{get:function(){var t=this.column;return t instanceof Hr?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueColumn",{get:function(){var t=this.column;return t instanceof jr?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataField",{get:function(){var t=this.dataColumn;return t instanceof Hr?t.dataIndex:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"item",{get:function(){return this._grid&&this._grid.getItem(this._itemIndex)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){var t=this.item;return t?t.dataRow:-1},set:function(t){if(this._grid){var e=this._grid.getItemOfRow(t,!1);e&&(this.itemIndex=e.index)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this.dataColumn&&this.dataColumn.fieldName},set:function(t){if(this._grid){var e=this._grid.columnByField(t);e&&(this.column=e)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldIndex",{get:function(){return this.dataColumn&&this.dataColumn.fieldIndex},set:function(t){if(this._grid){var e=this._grid.columnByField(t);e&&(this.column=e)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataId",{get:function(){var t=this.item;return t?t.dataId:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var t=this.column;if(t instanceof Hr){var e=t.dataIndex;if(e<0)throw new Error("Not exists data field: "+t.fieldName);var i=this.item;if(!i)throw new Error("Invalid item index: "+this._itemIndex);return i.getData(e)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixed",{get:function(){var t=this._layout;if(this._grid&&t&&t.visible){var e=this._grid.layoutManager,i=t.root.vindex;return i<e.fixedLayoutCount||i>=e.rightFirstLayout||this._itemIndex>=0&&this._itemIndex<e.fixedItemCount}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowFixed",{get:function(){if(this._grid){var t=this._grid.layoutManager;return this._itemIndex>=0&&this._itemIndex<t.fixedItemCount}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"colFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex<t.fixedLayoutCount}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex>=t.rightFirstLayout}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isTop",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isTopCell(this):Zr.isTop(this._layout))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isBottom",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isBottomCell(this):Zr.isBottom(this._layout))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLeft",{get:function(){if(this._layout){var t=this._layout.group;return t?0==t.vindex&&Zr.isLeft(this._layout):0==this._layout.vindex}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isRight",{get:function(){if(this._layout){var t=this._layout.group;return t?0==t.vindex&&Zr.isRight(this._layout):this._layout.vindex==this._grid.visibleLayoutCount-1}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isFirst",{get:function(){return!!(this._layout&&this._grid&&this._grid.visibleLayoutCount>0)&&zr.getSource(this._grid.activeCellLayout.first)===this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isEditableFirst",{get:function(){var t=this._grid;if(t&&this._layout){var e=t.collectColumns(!0,!0,!0),o=e.indexOf(this._layout.firstColumn);if(o>=0){for(var n=o;n--;){var r=e[n];if(r instanceof $r)return!1;var s=i.temp(t,this.itemIndex,r);if(t.getWritableAt(s))return!1}return!0}}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isEditableLast",{get:function(){var t=this._grid;if(t&&this._layout)for(var e=t.collectColumns(!0,!0,!0),o=e.indexOf(this._layout.firstColumn)+1,n=e.length;o<n;o++){var r=e[o];if(r instanceof $r)return!1;var s=i.temp(t,this.itemIndex,r);if(t.getWritableAt(s))return!1}return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLast",{get:function(){return!!(this._layout&&this._grid&&this._grid.visibleLayoutCount>0)&&zr.getSource(this._grid.activeCellLayout.last)===this._layout},enumerable:!1,configurable:!0}),i.prototype.set=function(t,e,i){return void 0!==i&&(this._grid=i),this._itemIndex=t,this._layout=e instanceof Gr?e.layout:e,this},i.prototype.assign=function(t){return t?(t.grid&&(this._grid=t._grid),this._itemIndex=t._itemIndex,this._layout=t._layout):(this._itemIndex=-1,this._layout=null),this},i.prototype.reset=function(){return this._itemIndex=-1,this._layout=null,this},i.prototype.clone=function(){return new i(this._grid,this._itemIndex,this._layout)},i.prototype.proxy=function(){return{itemIndex:isNaN(this._itemIndex)?-1:this._itemIndex,column:this.column?this.column.name:null,dataRow:this.dataRow,fieldIndex:this.dataColumn?this.column.dataIndex:-1,fieldName:this.dataColumn?this.column.fieldName:null}},i.prototype.normalize=function(t){return t&&(this._grid=t,this._layout||(this._layout=t.getFirstLayout()),this._itemIndex=Math.max(0,Math.min(this._itemIndex,t.itemCount-1))),this},i.prototype.incRow=function(t){this._grid&&(this._itemIndex=Math.max(0,Math.min(this._grid.itemCount-1,this._itemIndex+t)))},i.prototype.first=function(){this._grid&&(this._itemIndex=0)},i.prototype.last=function(){this._grid&&(this._itemIndex=this._grid.itemCount-1)},i.prototype.right=function(){if(this.grid.editOptions.focusMoveStep!==t.FocusMoveStep.GROUP){var e=this._grid&&this.$_gridLayout().getRightOf(this._layout);e&&(this._layout=e)}else this.next()},i.prototype.left=function(){if(this.grid.editOptions.focusMoveStep!==t.FocusMoveStep.GROUP){var e=this._grid&&this.$_gridLayout().getLeftOf(this._layout);e&&(this._layout=e)}else this.prev()},i.prototype.next=function(){if(this.grid.editOptions.focusMoveStep!==t.FocusMoveStep.GROUP){var e=ds(this._grid,this._layout);if(e)return this._layout=e,!0}else{var i=this.layout.root.vindex;i<this.grid.activeCellLayout.visibleCount-1&&(this._layout=this.grid.activeCellLayout.getVisible(i+1).first)}},i.prototype.prev=function(){if(this.grid.editOptions.focusMoveStep!==t.FocusMoveStep.GROUP){var e=fs(this._grid,this._layout);if(e)return this._layout=e,!0}else{var i=this.layout.root.vindex;i>0&&(this._layout=this.grid.activeCellLayout.getVisible(i-1).first)}},i.prototype.home=function(){this._layout=this._grid&&this.$_gridLayout().getHomeOf(this._layout)},i.prototype.end=function(){this._layout=this._grid&&this.$_gridLayout().getEndOf(this._layout)},i.prototype.firstCell=function(){this._layout=this._grid&&zr.getSource(this.grid.activeCellLayout.first)},i.prototype.lastCell=function(){this._layout=this.grid&&zr.getSource(this.grid.activeCellLayout.last)},i.prototype.down=function(e,i,o){if(void 0===e&&(e=t.VerticalMoveStep.ROW),this._grid)return this.itemIndex<this._grid.itemCount-1&&this.grid.editOptions.focusMoveStep===t.FocusMoveStep.GROUP?(this.incRow(1),void(this.layout=this.layout.root.first)):void(e==t.VerticalMoveStep.ROW&&!i||this.isBottom||o?this._itemIndex<this._grid.itemCount-1&&(e==t.VerticalMoveStep.CELL&&(this._layout=this.$_gridLayout().getTopOf(this._layout)),this.incRow(1)):this._grid.spanned?this._layout=this._grid.$_getLowerOfCell(this):this._layout=this.$_gridLayout().getLowerOf(this._layout).layout)},i.prototype.up=function(e,i,o){if(void 0===e&&(e=t.VerticalMoveStep.ROW),this._grid){if(this.itemIndex>0&&this.grid.editOptions.focusMoveStep===t.FocusMoveStep.GROUP)return this.incRow(-1),void(this.layout=this.layout.root.first);if(e==t.VerticalMoveStep.ROW&&!i||this.isTop||o){if(this._itemIndex>0){if(e==t.VerticalMoveStep.CELL)if(this._grid.spanned){var n=this._grid.$_getUpperOfCell(this);this._layout=n||this.$_gridLayout().getBottomOf(this._layout)}else this._layout=this.$_gridLayout().getBottomOf(this._layout);this.incRow(-1)}}else this._grid.spanned?this._layout=this._grid.$_getUpperOfCell(this):this._layout=this.$_gridLayout().getUpperOf(this._layout).layout}},i.prototype.getValue=function(){if(this._grid){var t=this.dataColumn,e=this._grid.getItem(this._itemIndex);return t&&e&&e.getData(t.dataIndex)}},i.prototype.assignFrom=function(t){t instanceof i?(this._grid=t._grid,this._layout=t._layout,this._itemIndex=t._itemIndex):e.prototype.assignFrom.call(this,t)},i.prototype.toString=function(){return"("+this._itemIndex+", "+this.column+")"},i.prototype.$_gridLayout=function(){return this._grid._activeCellLayout},i.prototype.$_isSpanned=function(){return this._grid&&this._grid.spanned},i}(kt),ps=function(t){function e(e,i,o){var n=t.call(this,e,i&&i.index,o)||this;return n._item=i,n}return n(e,t),e.tempItem=function(t,i,o){return e.$_itemTemp||(e.$_itemTemp=new e),e.$_itemTemp._grid=t,e.$_itemTemp._item=i,e.$_itemTemp._itemIndex=i.index,e.$_itemTemp._layout=o instanceof zr?o:o&&o.layout,e.$_itemTemp},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),e}(hs),ds=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=Zr.getNext(e);if(o)return o;for(var n=(e.group?e.root.vindex:e.vindex)+1,r=i.layoutCount;n<r;n++){if((o=i.getLayout(n))instanceof Yr)return o;if(o instanceof Zr&&(o=zr.getSource(o.first)))return o}},fs=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=Zr.getPrev(e);if(o)return o;for(var n=(e.group?e.root.vindex:e.vindex)-1;n>=0;n--){if((o=i.getLayout(n))instanceof Yr)return o;if(o instanceof Zr&&(o=zr.getSource(o.last)))return o}},gs=function(t){function e(){var e=t.call(this)||this;return e._row1=0,e._row2=0,e}return n(e,t),e.$_setRange=function(t,e,i,o,n){return t._row1=e<=o?e:o,t._row2=e<=o?o:e,t._col1=i.col<=n.col?i:n,t._col2=i.col<=n.col?n:i,t},e.create=function(t,i){if(i&&t!==i)return e.$_setRange(new e,t.itemIndex,t.layout,i.itemIndex,i.layout);var o=new e;return o._row1=o._row2=t.itemIndex,o._col1=o._col2=t.layout,o},e.temp=function(t,i){var o=e.$_TEMP;return i&&t!==i?e.$_setRange(o,t.itemIndex,t.layout,i.itemIndex,i.layout):(o._row1=o._row2=t.itemIndex,o._col1=o._col2=t.layout,o)},e.createRange=function(t,i,o,n){return e.$_setRange(new e,t,i,o,n)},Object.defineProperty(e.prototype,"empty",{get:function(){return this._row2<this._row1||!this._col2&&!this._col2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r1",{get:function(){return this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"c1",{get:function(){return this._col1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r2",{get:function(){return this._row2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"c2",{get:function(){return this._col2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstCell",{get:function(){var t=new hs;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row<=this._col2.row?this._col1:this._col2:t.layout=this._col1.col<=this._col2.col?this._col1:this._col2,t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastCell",{get:function(){var t=new hs;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row>=this._col2.row?this._col1:this._col2:t.layout=this._col1.col>=this._col2.col?this._col1:this._col2,t},enumerable:!1,configurable:!0}),e.prototype.contains=function(t,e){if(e){var i=e.col;return t>=this._row1&&t<=this._row2&&i>=this._col1.col&&i<=this._col2.col}return!1},e.prototype.normalize=function(){if(this._row1>this._row2){var t=this._row1;this._row1=this._row2,this._row2=t}if(this._col1.col<=this._col2.col){if(this._col1.row>this._col2.row){var e=this._col1;this._col1=this._col2,this._col2=e}}else e=this._col1,this._col1=this._col2,this._col2=e;return this},e.prototype.normalizeData=function(){return this.normalize(),this},e.prototype.intersectsWith=function(t){return!1},e.NULL=new e,e.$_TEMP=new e,e}(kt),ys=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_COUNT:return this._getCount();case e.ID_SUM:return this._getSum();case e.ID_MAX:return this._getMax();case e.ID_MIN:return this._getMin();case e.ID_AVG:return this._getAvg();case e.ID_VAR:return this._getVar();case e.ID_VARP:return this._getVarp();case e.ID_STDEV:return this._getStdev();case e.ID_STDEVP:return this._getStdevp();case e.ID_DATA_COUNT:return this._getDataCount();case e.ID_DATA_AVG:return this._getDataAvg()}throw new Lt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,e){throw new Lt("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,e,i){throw new Lt("Invalid identifier indexer: "+t)},e.ID_COUNT=0,e.ID_SUM=1,e.ID_MAX=2,e.ID_MIN=3,e.ID_AVG=4,e.ID_VAR=5,e.ID_VARP=6,e.ID_STDEV=7,e.ID_STDEVP=8,e.ID_DATA_COUNT=9,e.ID_DATA_AVG=10,e.IDENTS={count:e.ID_COUNT,sum:e.ID_SUM,max:e.ID_MAX,min:e.ID_MIN,avg:e.ID_AVG,var:e.ID_VAR,varp:e.ID_VARP,stdev:e.ID_STDEV,stdevp:e.ID_STDEVP,datacount:e.ID_DATA_COUNT,dataavg:e.ID_DATA_AVG},e}(jt),_s=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._doDispose=function(){this._grid=null,this._ds=null,this._column=null,this._summarizer=null,t.prototype._doDispose.call(this)},e.prototype.setColumn=function(t,e){this._column=t,this._grid=t.grid,this._ds=this._grid.dataSource,this._fieldCount=this._ds.fieldCount,this._summarizer=e},e.prototype.isIdentifier=function(e){return e=e.toLowerCase(),ys.IDENTS.hasOwnProperty(e)?ys.IDENTS[e]:t.prototype.isIdentifier.call(this,e)},e.prototype.evaluateIndexerI=function(t,e){if(this._summarizer){if(e<0||e>=this._fieldCount)throw new Lt("Data field index out of bounds: "+e);switch(t){case ys.ID_SUM:return this._summarizer.getSum(e);case ys.ID_COUNT:return this._summarizer.getCount(e);case ys.ID_MAX:return this._summarizer.getMax(e);case ys.ID_MIN:return this._summarizer.getMin(e);case ys.ID_AVG:return this._summarizer.getAvg(e);case ys.ID_VAR:return this._summarizer.getVar(e);case ys.ID_VARP:return this._summarizer.getVarp(e);case ys.ID_STDEV:return this._summarizer.getStdev(e);case ys.ID_STDEVP:return this._summarizer.getStdevp(e);case ys.ID_DATA_COUNT:return this._summarizer.getDataCount(e);case ys.ID_DATA_AVG:return this._summarizer.getDataAvg(e)}throw new Lt("Invalid identifier indexer: "+t)}switch(t){case ys.ID_SUM:case ys.ID_COUNT:return 0;case ys.ID_MAX:case ys.ID_MIN:case ys.ID_AVG:case ys.ID_VAR:case ys.ID_VARP:case ys.ID_STDEV:case ys.ID_STDEVP:return NaN}},e.prototype.evaluateIndexerS=function(t,e,i){if(this._summarizer&&this._ds){var o=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new Lt("Data field index out of bounds: "+o);switch(t){case ys.ID_SUM:return this._summarizer.getSum(o);case ys.ID_COUNT:return this._summarizer.getCount(o);case ys.ID_MAX:return this._summarizer.getMax(o);case ys.ID_MIN:return this._summarizer.getMin(o);case ys.ID_AVG:return this._summarizer.getAvg(o);case ys.ID_VAR:return this._summarizer.getVar(o);case ys.ID_VARP:return this._summarizer.getVarp(o);case ys.ID_STDEV:return this._summarizer.getStdev(o);case ys.ID_STDEVP:return this._summarizer.getStdevp(o)}throw new Lt("Invalid identifier indexer: "+t)}switch(t){case ys.ID_SUM:case ys.ID_COUNT:return 0;case ys.ID_MAX:case ys.ID_MIN:case ys.ID_AVG:case ys.ID_VAR:case ys.ID_VARP:case ys.ID_STDEV:case ys.ID_STDEVP:return NaN}},e.prototype._getCount=function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex):0},e.prototype._getSum=function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex):0},e.prototype._getMax=function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex):NaN},e.prototype._getMin=function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex):NaN},e.prototype._getAvg=function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex):NaN},e.prototype._getVar=function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex):NaN},e.prototype._getVarp=function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex):NaN},e.prototype._getStdev=function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex):NaN},e.prototype._getStdevp=function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex):NaN},e.prototype._getDataCount=function(){return this._summarizer?this._summarizer.getDataCount(this._column.dataIndex):NaN},e.prototype._getDataAvg=function(){return this._summarizer?this._summarizer.getDataAvg(this._column.dataIndex):NaN},e}(ys),ms=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),e.prototype.setItem=function(t){this._item=t},e.prototype._getCount=function(){return this._item.getNumber(this._column.dataIndex)},e.prototype._getSum=function(){return this._item.getSum(this._column.dataIndex)},e.prototype._getMax=function(){return this._item.getMax(this._column.dataIndex)},e.prototype._getMin=function(){return this._item.getMin(this._column.dataIndex)},e.prototype._getAvg=function(){return this._item.getAvg(this._column.dataIndex)},e.prototype._getVar=function(){return this._item.getVar(this._column.dataIndex,1)},e.prototype._getVarp=function(){return this._item.getVar(this._column.dataIndex,0)},e.prototype._getStdev=function(){return this._item.getStdev(this._column.dataIndex,1)},e.prototype._getStdevp=function(){return this._item.getStdev(this._column.dataIndex,0)},e.prototype._getDataCount=function(){return this._item.getDataCount(this._column.dataIndex)},e.prototype._getDataAvg=function(){return this._item.getDataAvg(this._column.dataIndex)},e}(_s),vs=function(t){function e(e){var i=t.call(this)||this;return i._columns=[],i._orgColumns=[],i._nameMap={},i._owner=e,i}return n(e,t),e.prototype._doDispose=function(){this._clearColumn(),this._columns=null,this._owner=null,this._nameMap=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._columns.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns.slice()},enumerable:!1,configurable:!0}),e.prototype.getColumn=function(t){return this._columns[t]},e.prototype.setColumns=function(t){if(this._columns.length=0,this._nameMap={},t)for(var e=0,i=t;e<i.length;e++){var o=i[e],n=this._addColumn(o);if(!n)throw new Error("column is undefined");n.$_owner=this}this._orgColumns=this._columns.slice()},e.prototype.add=function(t,e){var i=this._addColumn(t,void 0===e?-1:e);return null!=i&&(i.$_owner=this),i},e.prototype.remove=function(t){return!!this._removeColumn(t)},e.prototype.resetIndices=function(){if(this._owner)for(var t=0,e=this._columns.length;t<e;t++){var i=this._columns[t];i.$_setIndex(t),i._resetIndices(this._owner)}},e.prototype.resetSortStates=function(){if(this._owner)for(var t=this._owner.getSortDirections(),e=this._owner.getSortFields(),i=0,o=this._columns.length;i<o;i++){var n=this._columns[i];n instanceof Hr&&(n.sortOrder=e.indexOf(n.dataIndex),n.sortDirection=t[n.sortOrder])}},e.prototype.columnByName=function(t){return this._nameMap[t]},e.prototype.columnByField=function(t){if(t>=0)for(var e=0,i=this.count;e<i;e++){var o=this.getColumn(e);if(o instanceof Hr&&o.dataIndex==t)return o}return null},e.prototype.columnsByField=function(t){var e=[];if(t>=0)for(var i=0,o=this.count;i<o;i++){var n=this.getColumn(i);n instanceof Hr&&n.dataIndex==t&&e.push(n)}return e},e.prototype.columnByTag=function(t){if(t)for(var e=0,i=this.count;e<i;e++){var o=this.getColumn(e),n=o.tag;if(xt.isArray(t)&&xt.equalArrays(t,n)||t instanceof Date&&n instanceof Date&&t.getTime()===n.getTime()||"object"==typeof t&&"object"==typeof n&&xt.equalObjects(t,n)||n===t)return o}return null},e.prototype.columnsByTag=function(t){if(t){for(var e=[],i=0,o=this.count;i<o;i++){var n=this.getColumn(i),r=n.tag;(xt.isArray(t)&&xt.equalArrays(t,r)||t instanceof Date&&r instanceof Date&&t.getTime()===r.getTime()||"object"==typeof t&&"object"==typeof r&&xt.equalObjects(t,r)||r===t)&&e.push(n)}return e.length?e:null}return null},e.prototype.restoreColumns=function(){this._restoreColumn()},e.prototype._addColumn=function(t,e){void 0===e&&(e=-1);var i=this._columns;if(!t||t instanceof Gr||("string"==typeof t&&(t={fieldName:t}),t=Rh.createColumn(t)),t instanceof Gr){if(i.indexOf(t)>=0)throw new Error("column is already contained");e<0?i.push(t):i.splice(e,0,t);var o=t.name;if(!o||this._nameMap[o])if(o=t instanceof Hr?t.fieldName:t instanceof $r?"series":"column",this._nameMap[o]){for(var n=0;n<1e3;n++)if(!this._nameMap[o+n]){t.name=o+=n;break}}else t.name=o;return o&&(this._nameMap[o]=t),t}return null},e.prototype._removeColumn=function(t){var e=this._columns.indexOf(t);return e>=0&&(this._columns.splice(e,1),t.$_owner=void 0,delete this._nameMap[t.name],!0)},e.prototype._restoreColumn=function(){this._columns=this._orgColumns.slice()},e.prototype._clearColumn=function(){for(var t=0,e=this._columns;t<e.length;t++)e[t].dispose()},e}(kt),bs=function(e){function i(){var i=e.call(this,"headerCell")||this;return i._itemOffset=2,i._itemGap=2,i._checkLocation=t.ColumnHeaderItemLocation.NONE,i._checked=!1,i}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"template",{get:function(){return this._template},set:function(t){this._template=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){this._itemOffset=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){this._itemGap=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){this._checkLocation=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){this._tooltip=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){this._edgeMark=t},enumerable:!1,configurable:!0}),i}(Xo),Cs=function(e){function i(i){var o=e.call(this,i)||this;return o._minRowHeight=21,o._minHeight=23,o._height=0,o._resizable=!1,o._itemOffset=2,o._itemGap=2,o._showSelection=!1,o._showTooltip=!1,o._sortWidth=16,o._sortHeight=16,o._filterWidth=16,o._filterHeight=16,o._popupWidth=16,o._popupHeight=16,o._expanderWidth=16,o._expanderHeight=16,o._checkWidth=16,o._checkHeight=16,o._showPopupMenu=t.HandleVisibility.VISIBLE,o._cell=new bs,o.visible=!0,o}return n(i,e),i.prototype._doDispose=function(){this._cell=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!=this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayHeight",{get:function(){return this._grid.headerView.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"heights",{get:function(){return this._heights&&this._heights.slice()},set:function(t){if(t!=this._heights){t=xt.makeArray(t,!0),this._heights=t&&t.slice();for(var e=0;e<this._heights.length;e++)this._heights[e]=Math.max(this._minRowHeight,isNaN(this._heights[e])?this._minRowHeight:this._heights[e]);this._changed()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortWidth",{get:function(){return this._sortWidth},set:function(t){t!=this._sortWidth&&(this._sortWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortHeight",{get:function(){return this._sortHeight},set:function(t){t!=this._sortHeight&&(this._sortHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterWidth",{get:function(){return this._filterWidth},set:function(t){t!=this._filterWidth&&(this._filterWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterHeight",{get:function(){return this._filterHeight},set:function(t){t!=this._filterHeight&&(this._filterHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupWidth",{get:function(){return this._popupWidth},set:function(t){t!=this._popupWidth&&(this._popupWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupHeight",{get:function(){return this._popupHeight},set:function(t){t!=this._popupHeight&&(this._popupHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderWidth",{get:function(){return this._expanderWidth},set:function(t){t!=this._expanderWidth&&(this._popupWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderHeight",{get:function(){return this._expanderHeight},set:function(t){t!=this._expanderHeight&&(this._popupHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showPopupMenu",{get:function(){return this._showPopupMenu},set:function(t){t!=this._showPopupMenu&&(this._showPopupMenu=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkWidth",{get:function(){return this._checkWidth},set:function(t){t!=this._checkWidth&&(this._checkWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkHeight",{get:function(){return this._checkHeight},set:function(t){t!=this._checkHeight&&(this._checkHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!1,configurable:!0}),i.prototype.setCalcHeights=function(t){this._calcHeights=t.slice()},i.prototype.getCalcHeights=function(){return this._calcHeights},i.prototype.getCell=function(t){var e=this._cell;e.setLayout(t);var i=t instanceof Zr?t.header:t.firstColumn.header;if(i&&(e.text=i.displayText,e.template=i.realizeTemplate(),e.showTooltip=i.showTooltip,e.tooltip=i.tooltip,e.edgeMark=i.edgeMark,i instanceof Fr)){var o=t.firstColumn,n=void 0;e.index.set(-1,t.firstColumn),e.itemOffset=void 0===(n=i.itemOffset)?this._itemOffset:n,e.itemGap=void 0===(n=i.itemGap)?this._itemGap:n,e.checkLocation=i.checkLocation,e.checked=o.checked}return e},i.prototype.getStyleName=function(){return this._styleName},i.prototype._doChanged=function(){e.prototype._doChanged.call(this),this._grid&&this._grid.invalidatePosition()},i}(zo),ws=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._doDispose=function(){this._cell=null,t.prototype._doDispose.call(this)},e.prototype.setCell=function(t){this._cell=t},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._cell.value;case e.ID_FIELD:return this._cell.index.dataField;case e.ID_LEVEL:return this._cell.level}throw new Lt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,e){},e.prototype.evaluateIndexerS=function(t,e,i){},e.ID_VALUE=0,e.ID_FIELD=1,e.ID_LEVEL=2,e.IDENTS={value:e.ID_VALUE,field:e.ID_FIELD,level:e.ID_LEVEL},e}(jt),Ss=function(e){function i(t){var i=e.call(this,t)||this;return i._childIndex=0,i._error=null,i._errorDetail=null,i}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"errorDetail",{get:function(){return this._errorDetail},enumerable:!1,configurable:!0}),i.prototype.calculate=function(){var e=this.valueColumn,i=e&&e.grid,o=this._getSummary(e,this._childIndex);if(this._value=NaN,this._error=null,i&&o&&i.itemSource.summaryMode!=t.SummaryMode.NONE){o._value=void 0;var n=o.expression,r=void 0;try{if(n&&i.dataCount>0&&e instanceof Hr&&e.dataIndex>=0){var s=i.columnSummaryRuntime;s.setColumn(e,i.summarizer),r=o.evaluate(s,this._childIndex)}var a=o.valueCallback;a&&(r=a(i.handler,e,this._childIndex,o,r)),o._value=this._value=r}catch(t){this._error=t,this._errorDetail=t,o._value=void 0}}},Object.defineProperty(i.prototype,"text",{get:function(){if(this._error)return Xo.ERROR},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),i.prototype.getDisplayText=function(t){var e,i=this._value,o=this.valueColumn,n="";if(void 0!==i&&o)if("string"==typeof i)n=i+"";else if("boolean"==typeof i)n=String(i);else if(i instanceof Date){var r=t.datetimeWriter;n=r?r.getText(this._value):String(i)}else if("number"!=typeof i||isNaN(i))null==i&&(n="");else{var s=t.numberFormatter;n=s?s.getText(i):String(i)}if(n){var a=t.prefix;a&&(n=a+n),(a=t.suffix)&&(n+=a)}return!n&&o&&(n=null===(e=this._getSummary(o,this._childIndex))||void 0===e?void 0:e.text),n},i.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._childIndex)},i.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._childIndex);return e?e.realizeSummary(this,t):void 0},i}(Xo),Es=function(t){function e(){return t.call(this,"footerCell")||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"footerIndex",{get:function(){return this._childIndex},set:function(t){t!=this._childIndex&&(this._childIndex=t)},enumerable:!1,configurable:!0}),e.prototype._getSummary=function(t,e){return t&&t.footers.get(e)},e}(Ss),xs=function(t){function e(e){var i=t.call(this,e)||this;return i._minHeight=23,i._height=0,i._heights=[],i._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},i._childIndex=0,i._displayIndex=0,i._runtime=new ws,i._cell=i._createCell(),i.visible=!0,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayIndex",{get:function(){return this._displayIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){(t=Math.max(0,t))!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"heights",{get:function(){return this._heights},set:function(t){this._heights=t.slice(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())},enumerable:!1,configurable:!0}),e.prototype.getCell=function(t){var e=this._cell,i=t.firstColumn;return e.index.set(-1,i),e._childIndex=this._childIndex,e.calculate(),e},e.prototype.getCellStyle=function(t,e,i){void 0===i&&(i=!0);var o,n=t.getSummary(),r=this._cellStyleCallback;r&&(o=r(this._grid.handler,t),e.assign(o)),n&&(r=n.styleCallback)&&(o=r(this._grid.handler,t),e.assign(o));var s=e.styleName||n&&n.styleName||"";return i&&(e.styleName=this.getCellStyleName()+" "+s),e},e.prototype.getCellFormatters=function(t,e){return e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},e.prototype._visibleChanged=function(){t.prototype._visibleChanged.call(this),this.$_owner&&this.$_owner.$_visibleChanged(this)},e.prototype._doChanged=function(){t.prototype._doChanged.call(this),this.$_owner&&this.$_owner._doChanged()},e}(zo),Os=function(t){function e(e){return t.call(this,e)||this}return n(e,t),Object.defineProperty(e.prototype,"footerIndex",{get:function(){return this._childIndex},enumerable:!1,configurable:!0}),e.prototype.getCellStyleName=function(){return e.CELL_CSS},e.prototype._createCell=function(){return new Es},e.CELL_CSS="rg-footer-cell",e}(xs),Rs=function(t){function e(e){var i=t.call(this,e)||this;i._items=[],i._visibles=[];var o=i._createSummary(e);return o.$_owner=i,i._items.push(o),i._visibles.push(i._items[0]),i}return n(e,t),e.prototype._doDispose=function(){for(var e=0,i=this._items;e<i.length;e++)i[e].dispose();this._items=null,this._visibles=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"canShow",{get:function(){return this.visible&&this._visibles.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){for(var t=this._dirty,e=0,i=this._visibles;e<i.length;e++){var o=i[e];t=t||o.dirty}return t},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return this._items[t]},e.prototype.getVisible=function(t){return this._visibles[t]},e.prototype.isVisible=function(){return this.visible&&this.visibleCount>0},e.prototype.assignFrom=function(e){var i;if(t.prototype.assignFrom.call(this,e),e&&e.items?i=xt.makeArray(e.items):xt.isArray(e)&&(i=e),i){for(var o=this._items,n=i.length;o.length>n;)o.pop().dispose();o.length=n;for(var r=0,s=i.length;r<s;r++){var a=i[r];a&&(o[r]||(o[r]=this._createSummary()),o[r].assignFrom(a),o[r].$_owner=this)}this.$_resetVisibles()}},e.prototype.clean=function(){for(var e=0,i=this._items;e<i.length;e++)i[e].clean();t.prototype.clean.call(this)},e.prototype.toProxy=function(){for(var e=t.prototype.toProxy.call(this),i=[],o=0;o<this._items.length;o++)i.push(this._items[o].toProxy());return i.length>0&&(e.items=i.slice()),e},e.prototype.$_visibleChanged=function(t){this.$_resetVisibles()},e.prototype.$_resetVisibles=function(){this._visibles.length=0;for(var t=0,e=0;t<this._items.length;t++){var i=this._items[t];i._childIndex=t,i.visible&&(this._visibles.push(i),i._displayIndex=e++)}this._changed()},e.prototype._doChanged=function(){t.prototype._doChanged.call(this),this._grid&&this._grid.invalidatePosition()},e}(zo),Is=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._createSummary=function(t){return new Os(t||this._grid)},e}(Rs),Ts=function(t){function e(e){var i=t.call(this,e)||this;return i._displayOrder=0,i._headText=null,i._footText=null,i._sumText=null,i._headCell=i._createHeadCell(),i._footCell=i._createFootCell(),i._sumCell=i._createSumCell(),i._filterCell=i._createFilterCell(),i.visible=!0,i}return n(e,t),Object.defineProperty(e.prototype,"displayOrder",{get:function(){return this._displayOrder},set:function(t){t!=this._displayOrder&&(this._displayOrder=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headText",{get:function(){return this._headText},set:function(t){t!=this._headText&&(this._headText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footText",{get:function(){return this._footText},set:function(t){t!=this._footText&&(this._footText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sumText",{get:function(){return this._sumText},set:function(t){t!=this._sumText&&(this._sumText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu&&this._grid?(this._popupMenuName=this.getHeadStyleName()+"_menu",this._grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visChanged",{get:function(){return this._visChanged},set:function(t){this._visChanged=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype.getHeadCell=function(){return this._headCell},e.prototype.getFootCell=function(){return this._footCell},e.prototype.getSumCell=function(){return this._sumCell},e.prototype.getFilterCell=function(){return this._filterCell},e.prototype._createHeadCell=function(){return new Qo(this)},e.prototype._createFootCell=function(){return new Qo(this)},e.prototype._createSumCell=function(){return new Qo(this)},e.prototype._createFilterCell=function(){return new Qo(this)},e.prototype._visibleChanged=function(){t.prototype._visibleChanged.call(this),this._visChanged=!0},e}(zo);t.IndicatorValue=void 0,(us=t.IndicatorValue||(t.IndicatorValue={})).NONE="none",us.INDEX="index",us.REVERSE="reverse",us.ROW="row",t.StateMark=void 0,(cs=t.StateMark||(t.StateMark={})).IMAGE="image",cs.TEXT="text",cs.NONE="none";var Ps,Ds,ks,As=function(e){function i(i){var o=e.call(this,"indicatorCell")||this;return o._itemState=t.ItemState.NORMAL,o._indicator=i,o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"indicator",{get:function(){return this._indicator},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemState",{get:function(){return this._itemState},set:function(t){t!=this._itemState&&(this._itemState=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){var e,i=this._indicator,o=i.owner,n=this.index,r=n.item,s="",a=o.indicatorReverse(i.displayValue);if(r&&r.itemState==t.ItemState.NORMAL)switch(i.displayValue){case t.IndicatorValue.INDEX:case t.IndicatorValue.REVERSE:(e=o.getIndicatorIndex(r,a))>=0&&(e+=i.indexOffset,!i.zeroBase&&e++,s=String(e));break;case t.IndicatorValue.ROW:r.isDataRow&&(e=n.dataRow,e+=i.rowOffset,i.zeroBase||e++,s=String(e))}return s},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),i}(Xo),Ls=function(e){function i(i){var o=e.call(this,i)||this;return o._displayValue=t.IndicatorValue.INDEX,o._zeroBase=!1,o._indexOffset=0,o._rowOffset=0,o._minWidth=32,o._maxWidth=0,o._width=0,o._selectable=!0,o._mark=t.StateMark.IMAGE,o._showFocus=!0,o._showSelection=!0,o._displayWidth=0,o._cell=new As(o),o.headText="No.",o.footText="",o.sumText="",o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"displayValue",{get:function(){return this._displayValue},set:function(t){t!=this._displayValue&&(this._displayValue=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zeroBase",{get:function(){return this._zeroBase},set:function(t){t!=this._zeroBase&&(this._zeroBase=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"indexOffset",{get:function(){return this._indexOffset},set:function(t){t!=this._indexOffset&&(this._indexOffset=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowOffset",{get:function(){return this._rowOffset},set:function(t){t!=this._rowOffset&&(this._rowOffset=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayWidth",{get:function(){return this._displayWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectable",{get:function(){return this._selectable},set:function(t){t!=this._selectable&&(this._selectable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showFocus",{get:function(){return this._showFocus},set:function(t){t!=this._showFocus&&(this._showFocus=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())},enumerable:!1,configurable:!0}),i.prototype.getCellType=function(){return"indicator"},Object.defineProperty(i.prototype,"staticOrder",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.getCell=function(e){var i=this._cell;if(i.setIndex(e),e.item){var o=e.item.itemState;o==t.ItemState.NORMAL&&this._grid.focusedIndex.itemIndex==e.itemIndex&&(o=t.ItemState.FOCUSED),i.itemState=o}return i},i.prototype.getHeadStyleName=function(){return"rg-rowindicator-head"},i.prototype.getFootStyleName=function(){return"rg-rowindicator-foot"},i.prototype.getSumStyleName=function(){return"rg-rowindicator-sum"},i.prototype.getFilterStyleName=function(){return"rg-rowindicator-filter"},i}(Ts),Ms=function(t){function e(e){var i=t.call(this,"stateBarCell")||this;return i._bar=e,i}return n(e,t),e.prototype._doDispose=function(){this._bar=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return this._bar._stateTexts[this.item.rowState]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),e}(Xo),Fs=function(e){function i(i){var o=e.call(this,i)||this;return o._width=20,o._mark=t.StateMark.IMAGE,o._stateTexts={},o._errorVisible=!1,o._stateTexts[t.RowState.CREATED]="C",o._stateTexts[t.RowState.UPDATED]="U",o._stateTexts[t.RowState.DELETED]="D",o._stateTexts[t.RowState.CREATE_AND_DELETED]="X",o._cell=new Ms(o),o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stateTexts",{get:function(){return r({},this._stateTexts)},set:function(t){if(t!=this._stateTexts){for(var e in t)this._stateTexts.hasOwnProperty(e)&&(this._stateTexts[e]=t[e]);this._changed()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"errorVisible",{get:function(){return this._errorVisible},set:function(t){t!=this._errorVisible&&(this._errorVisible=t,this._changed())},enumerable:!1,configurable:!0}),i.prototype.getCellType=function(){return"state"},Object.defineProperty(i.prototype,"staticOrder",{get:function(){return 1e3},enumerable:!1,configurable:!0}),i.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e},i.prototype.getHeadStyleName=function(){return"rg-statebar-head"},i.prototype.getFootStyleName=function(){return"rg-statebar-foot"},i.prototype.getSumStyleName=function(){return"rg-statebar-sum"},i.prototype.getFilterStyleName=function(){return"rg-statebar-filter"},i}(Ts),Ns=function(t){function e(){return t.call(this,"checkBarCell")||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"getText",{get:function(){return String(this.index.dataRow)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.item.checked},enumerable:!1,configurable:!0}),e}(Xo),Vs=function(e){function i(i){var o=e.call(this,i)||this;return o._width=20,o._exclusive=!1,o._showAll=!0,o._showGroup=!0,o._visibleOnly=!1,o._checkableOnly=!0,o._syncHeadCheck=!1,o._useImages=!1,o._checkLocation=t.ColumnHeaderItemLocation.TOP,o._itemGap=5,o._fieldIndex=-1,o._breakMergeOnEmpty=!1,o._cell=new Ns,o._merged=!1,o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exclusive",{get:function(){return this._exclusive},set:function(t){t!=this._exclusive&&(this._exclusive=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showAll",{get:function(){return this._showAll},set:function(t){t!=this._showAll&&(this._showAll=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showGroup",{get:function(){return this._showGroup},set:function(t){t!=this._showGroup&&(this._showGroup=t,this._grid.itemSource.setGroupCheckable(t),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleOnly",{get:function(){return this._visibleOnly},set:function(t){t!=this._visibleOnly&&(this._visibleOnly=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableOnly",{get:function(){return this._checkableOnly},set:function(t){t!=this._checkableOnly&&(this._checkableOnly=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._grid.itemSource.checkableExpression=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){this._checkableCallback=t,this._grid.itemSource.checkableCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"syncHeadCheck",{get:function(){return this._syncHeadCheck},set:function(t){t!=this._syncHeadCheck&&(this._syncHeadCheck=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._fieldIndex=this._grid.dataSource.getFieldIndex(t),this._grid.setCheckFieldIndex(this._fieldIndex),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldIndex",{get:function(){return this._fieldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useImages",{get:function(){return this._useImages},set:function(t){this._useImages!==t&&(this._useImages=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){t!=this._mergeRule&&(this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?Hs.createRule(t):null,this._changed(),this.owner._columnMergeRuleChanged(null))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){t!=this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusMove",{get:function(){return!!this._focusMove},set:function(t){this._focusMove=t},enumerable:!1,configurable:!0}),i.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e._exclusive=this._exclusive,e},i.prototype.getHeadStyleName=function(){return"rg-checkbar-head"},i.prototype.getFootStyleName=function(){return"rg-checkbar-foot"},i.prototype.getSumStyleName=function(){return"rg-checkbar-sum"},i.prototype.getFilterStyleName=function(){return"rg-checkbar-filter"},i.prototype.canMerge=function(){return null!=this._mergeRuleObj},i.prototype.getCellType=function(){return"check"},Object.defineProperty(i.prototype,"staticOrder",{get:function(){return 2e3},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"merges",{get:function(){return this._merges},enumerable:!1,configurable:!0}),i.prototype._doChanged=function(){this._grid&&(this._grid._itemCheckChanged=this._syncHeadCheck)},Object.defineProperty(i.prototype,"merged",{get:function(){return this._merged},enumerable:!1,configurable:!0}),i}(Ts),Bs=function(t){function e(){var e=t.call(this)||this;return e._row1=0,e._row2=0,e}return n(e,t),e.$_setRange=function(t,e,i){return t._row1=e<=i?e:i,t._row2=e<=i?i:e,t},e.create=function(t,i){if(i&&t!==i)return e.$_setRange(new e,t.itemIndex,i.itemIndex);var o=new e;return o._row1=o._row2=t.itemIndex,o},e.temp=function(t,i){var o=e.$_TEMP;return i&&t!==i?e.$_setRange(o,t.itemIndex,i.itemIndex):(o._row1=o._row2=t.itemIndex,o)},e.createRange=function(t,i){return e.$_setRange(new e,t,i)},Object.defineProperty(e.prototype,"empty",{get:function(){return this._row2<this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r1",{get:function(){return this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r2",{get:function(){return this._row2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstCell",{get:function(){var t=new hs;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastCell",{get:function(){var t=new hs;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,t},enumerable:!1,configurable:!0}),e.prototype.contains=function(t){return t>=this._row1&&t<=this._row2},e.prototype.intersectsWith=function(t){return!1},e.NULL=new e,e.$_TEMP=new e,e}(kt),Gs=function(t){function e(){var e=t.call(this)||this;return e._item=null,e._ds=null,e._fieldCount=0,e}return n(e,t),e.prototype._doDispose=function(){this._item=null,this._ds=null,t.prototype._doDispose.call(this)},e.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},e.prototype.setCell=function(t){this._item=t.item},e.prototype.setItem=function(t){this._item=t},e.prototype.clear=function(){this._item=null,this._ds=null},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){if(this._item){switch(t){case e.ID_ROW:return this._item.index;case e.ID_DATAROW:return this._item.dataRow;case e.ID_GROUP:return this._item.parent}throw new Lt("Invalid identifier key: "+t)}},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new Lt("Data field index out of bounds:"+i);return this._item.getData(i)}throw new Lt("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new Lt("Invalid identifier indexer: "+t);if(this._ds){var n=o?this._ds.getFieldIndexC(i):this._ds.getFieldIndex(i);if(n<0||n>=this._fieldCount)throw new Lt("Data field is not exists:"+i);return this._item.getData(n)}},e.ID_ROW=0,e.ID_DATAROW=1,e.ID_CHECKED=2,e.ID_VALUE=3,e.ID_VALUES=4,e.ID_GROUP=5,e.ID_PREV_VALUES=6,e.IDENTS={row:e.ID_ROW,datarow:e.ID_DATAROW,checked:e.ID_CHECKED,value:e.ID_VALUE,values:e.ID_VALUES,group:e.ID_GROUP,prevvalues:e.ID_PREV_VALUES},e}(jt),js={},Hs=function(t){function e(i){var o=t.call(this)||this;return o._runtime=e.$_runtime=e.$_runtime||new Gs,o.criteria=i,o}return n(e,t),e.createRule=function(t){var i="string"==typeof t?t:t&&t.criteria;return i?new e(i):null},e.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?be.Default.parse(t,null):null,this._changed())},enumerable:!1,configurable:!0}),e.prototype.parseInit=function(t,e,i,o,n){var r=this._checkBar.breakMergeOnEmpty,s=t.fixedCount,a=t.itemCount,l=t.dataSource.rowCount;if(!((o=Math.min(a-i,o))<1||l<=0)){this._runtime.setDataSource(t.dataSource);for(var u=null;i<a&&(u=t.getItem(i),!this.$_isRow(u,!1));)n[i]=i+1,i++;if(!(i>=a)){this._runtime.setItem(u);var c=this._exprNode.evaluate(this._runtime),h=u.checked,p=i;if(n[p]=p+1,!(u.dataRow>=l)){this._runtime.setItem(u);for(var d=i+1;d<a;d++)if(u=t.getItem(d),this.$_isRow(u,!1)){if(u.dataRow>=l)break;this._runtime.setItem(u);var f=this._exprNode.evaluate(this._runtime),g=u.checked;if(d==s||void 0===f&&r||(f instanceof Date&&c instanceof Date?+f!=+c:f!=c)||g!=h){if(d>=o)break;p=d,c=f,h=g}n[d]=p+1}else{if(d>=o)break;c=js,p=d,n[d]=p+1}}}}},e.prototype.parseBounds=function(t,e,i,o,n){var r=this._checkBar.breakMergeOnEmpty,s=!1,a=t.itemCount;if(!(a<1)){var l,u,c,h=t.fixedCount,p=js,d=Math.max(0,i),f=d,g=-1;if(this._runtime.setDataSource(t.dataSource),d>0&&n[d]<=0){var y=t.getItem(d);if(this.$_isRow(y,s)){for(this._runtime.setItem(y),u=this._exprNode.evaluate(this._runtime),c=y.checked,d--;d>=0&&(y=t.getItem(d),this.$_isRow(y,s))&&(this._runtime.setItem(y),p=this._exprNode.evaluate(this._runtime),l=y.checked,!(d==h||void 0===p&&r||(p instanceof Date&&u instanceof Date?+p!=+u:p!=u)||c!=l));)d--;for(var _=f-1;_>d;_--)n[_]=d+2;f-1>d&&(g=d+1)}else{for(n[d]=d+1,_=f-1;_>d;_--)n[_]=d+2;for(f-1>d+1&&(g=d+2),d--;d>=0&&n[d]<=0&&!this.$_isRow(t.getItem(d),s);)n[d]=d+1,d--}}for(d=Math.max(0,i);d<=o&&n[d]>0;)d++;for(;d<=o&&!this.$_isRow(t.getItem(d),s);)n[d]=d+1,d++;if(d<o){for(f=d,y=t.getItem(d),this._runtime.setItem(y),u=this._exprNode.evaluate(this._runtime),c=y.checked,d++;d<a;)if(y=t.getItem(d),this.$_isRow(y,s)){if(this._runtime.setItem(y),p=this._exprNode.evaluate(this._runtime),l=y.checked,d==h||void 0===p&&r||(p instanceof Date&&u instanceof Date?+p!=+u:p!=u)||c!=l){var m=f;for(g>=0&&(m=g,g=-1),_=f;_<d;_++)n[_]=m+1;if(d>=o)break;u=p,c=l,f=d}else n[d]=f+1;d++}else{for(m=f,g>=0&&(m=g,g=-1),_=f;_<d;_++)n[_]=m+1;for(n[d]=d+1,d++;d<a&&!this.$_isRow(t.getItem(d),s);)n[d]=d+1,d++;if(f=d,d>=o)break}if(d==a&&(p instanceof Date&&u instanceof Date?+p==+u:p==u)||c!=l)for(m=g>=0?g:f,_=f;_<d;_++)n[_]=m+1}}},e.prototype.$_isRow=function(t,e){var i=t instanceof So&&!(t instanceof Po);if(i&&!e){var o=t.parent;i=o.expanded||o.firstItem!==t}return i},e.$_runtime=null,e}(br),$s=function(t){function e(e,i){var o=t.call(this)||this;return o._checkBar=i,o._head=e.top,o._tail=e.bottom,o}return n(e,t),e.borrow=function(t,i){var o=e.$_rooms.pop();return o?(o._head=t.top,o._tail=t.bottom):o=new e(t,i),o},e.returnTo=function(t){if(t){var i=e.$_rooms;i.indexOf(t)<0&&i.push(t)}},Object.defineProperty(e.prototype,"head",{get:function(){return this._head},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._checkBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.getHead=function(t){return t?t.set(this._head,null):t=new hs(this._checkBar.owner,this._head,null),t},e.prototype.getTail=function(t){return t?t.set(this._tail,null):t=new hs(this._checkBar.owner,this._tail,null),t},e.prototype.isHead=function(t){return t.itemIndex==this._head},e.prototype.isTail=function(t){return t.itemIndex==this._tail},e.prototype.contains=function(t){return t.itemIndex>=this._head&&t.itemIndex<=this._tail},e.$_rooms=new Array,e}(xr),Ws=-1,Us=65535,zs=function(t){function e(e){var i=t.call(this)||this;return i._flags=null,i._fixedRooms=[],i._rooms=[],i._inited=!1,i._fixedCells=[],i._cells=[],i._nextId=0,i._checkBar=e,e._merges=i,i}return n(e,t),e.prototype._doDispose=function(){this._checkBar=null,this._rooms=this._fixedRooms=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._rooms.length},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},e.prototype.initialize=function(t){if(!this._inited){var e=this._checkBar.owner,i=e.itemSource,o=this._checkBar._mergeRuleObj;if(o){for(var n=this._flags=new Array(i.itemCount),r=e.fixedOptions.mergeRows?0:i.fixedCount,s=i.itemCount;s--;)n[s]=0;o._checkBar=this._checkBar,o.parseInit(i,-1,r,t,n)}this._inited=!0}},e.prototype.refreshRooms=function(t,e,i){if(this._nextId=0,this._inited&&this._flags&&!(e<t)){var o=this._checkBar.owner;if(o){var n=this._rooms,r=o.layoutManager.fixedItemCount,s=o.itemSource,a=this._checkBar._mergeRuleObj,l=0;if(this._fixedRooms.length=0,this._rooms.length=0,a&&(a._checkBar=this._checkBar,a.parseBounds(s,-1,t,e,this._flags)),i)for(;l<r;)if(c=this.$_checkFixedMerge(s,l,r)){var u=new $s(c,this._checkBar);this._fixedRooms.push(u),l=c.r2+1}else l+=1;for(l=t;l<=e;){var c;if(null!=(c=this.$_checkMerge(s,l,0==n.length,r))){var h=s.getItem(c.r2);h instanceof Un||h instanceof Wn||(u=new $s(c,this._checkBar),this._rooms.push(u)),l=c.r2+1}else l+=1}}}},e.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},e.prototype.getRooms=function(){return this._rooms.slice()},e.prototype.scroll=function(t){},e.prototype.getRoom=function(t){for(var e=t.rowFixed?this._fixedRooms:this._rooms,i=e.length-1;i>=0;i--)if(e[i].contains(t))return e[i];return null},e.prototype.prepareCells=function(t,e){if(t>0){for(var i=this._fixedCells,o=0;o<i.length;o++)i[o]=Ws;for(;i.length<t;)i.push(Ws)}var n=this._cells;for(o=0;o<n.length;o++)n[o]=Ws;for(;n.length<e;)n.push(Ws)},e.prototype.refreshCells=function(t,e){for(var i=this.getFixedRooms(),o=i.length-1;o>=0;o--){var n=i[o];this.addFixedCells(n.head,n.tail-n.head+1)}for(o=(i=this.getRooms()).length-1;o>=0;o--){n=i[o];var r=Math.max(0,n.head-e-t),s=n.tail-e-t;this.addCells(r,s-r+1)}},e.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,o=this._nextId++,n=t+1;n<t+e;n++)i[n]=o+Us;return i[t]=o,o},e.prototype.addCells=function(t,e){for(var i=this._cells,o=this._nextId++,n=t+1;n<t+e;n++)i[n]=o+Us;return i[t]=o,o},e.prototype.isMerged=function(t,e){return t<e?this._fixedCells[t]>Ws:this._cells[t-e]>Ws},e.prototype.isMergeRoot=function(t,e){return t<e?this._fixedCells[t]>Ws&&this._fixedCells[t]<Us:(t-=e,this._cells[t]>Ws&&this._cells[t]<Us)},e.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=Us:this._cells[t-e]>=Us},e.prototype.getMerged=function(t,e){var i,o=1;if(t<e)for(var n=(i=this._fixedCells)[t],r=t+1;r<i.length&&i[r]-Us==n;r++,o++);else for(t-=e,n=(i=this._cells)[t],r=t+1;r<i.length&&i[r]-Us==n;r++,o++);return o},e.prototype.getMerged2=function(t,e,i,o){for(var n=this._cells,r=n[i],s=t.itemSource,a=s.getItem(e++),l=a.isData?o:1,u=i+1;u<n.length&&n[u]-Us==r;u++)l+=(a=s.getItem(e++)).isData?o:1;return l},e.prototype.$_checkFixedMerge=function(t,e,i){if(i>0){var o=e,n=this._flags[o];if(n<=0)return null;for(var r=e+1;r<=i;){if(r==i||this._flags[r]>n)return r>o+1?Bs.createRange(o,r-1):null;r++}}return null},e.prototype.$_checkMerge=function(t,e,i,o){if(e>=0){var n=e,r=this._flags[n];if(t.getItem(n),r<=0)return null;if(i)for(;n>o&&!(this._flags[n-1]<r);)n--;for(var s=t.itemCount,a=e+1;a<s;){if(this._flags[a]>r||this._flags[a]<=0)return a>n+1?Bs.createRange(n,a-1):t.getItem(n).isDataRow?null:Bs.createRange(n,a-1);a++}if(a>n)return a>n+1?Bs.createRange(n,a-1):t.getItem(n).isDataRow?null:Bs.createRange(n,a-1)}return null},e.MERGE_ROOMS="mergeRooms",e}(kt),Ks=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.empty=function(){return new t},t.create=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),new t(e,i)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.x||0===this.y},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y},t.prototype.setEmpty=function(){return this.x=this.y=0,this},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t},t.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+"}"},t}(),Ys=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this)||this;o._x=0,o._y=0,o._width=0,o._height=0,o._visible=!0,o._mouseEnabled=!0,o._elements=null,o._dirty=!0,o._className="",o._name=i;var n=o._dom=o._createDom(e);return n&&o._initDom(n),o}return n(e,t),e.prototype._doDispose=function(){if(this._dom&&(this._removeEventListeners(this._dom),xt.detach(this._dom),this._dom=null),this._elements){for(var e=0,i=this._elements;e<i.length;e++)i[e].dispose();this._elements.length=0}this._parent=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._parent&&this._parent.container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childCount",{get:function(){return this._elements?this._elements.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSingleton",{get:function(){return this._parent&&1==this._parent.childCount&&this._parent._elements[0]===this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){t!=this._x&&(this._x=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){t!=this._y&&(this._y=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){(t=Math.max(0,t))!=this._width&&(this._width=t,this.sizeChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this.sizeChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._x+this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._y+this._height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return new Ks(this._x,this._y)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return new q(this._x,this._y,this._width,this._height)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientRect",{get:function(){return new q(0,0,this._width,this._height)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getCssDisplay():"none"),this.invalidate(!0),this._visibleChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(t){this._mouseEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLayer",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseX",{get:function(){var t=this.container;if(t){for(var e=t._currentX,i=this;i&&void 0!==i;)e-=i._x,i=i._parent;return e}return NaN},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){var t=this.container;if(t){for(var e=t._currentY,i=this;i&&void 0!==i;)e-=i._y,i=i._parent;return e}return NaN},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return wt(this._dom)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._dom&&this._dom.style},enumerable:!1,configurable:!0}),e.prototype.isDom=function(t){return t===this._dom},e.prototype.canHover=function(){return!0},e.prototype.getChildren=function(){return this._elements&&this._elements.concat()},e.prototype.getChild=function(t){return this._elements[t]},e.prototype.indexOf=function(t){return this._elements?this._elements.indexOf(t):-1},e.prototype.contains=function(t){return this._elements&&this._elements.indexOf(t)>=0},e.prototype.getAncestor=function(t){for(var e=this._parent;e;){if(e instanceof t)return e;e=e._parent}return null},e.prototype.addChild=function(t){return this.insertChild(-1,t)},e.prototype.insertChild=function(t,e){if(e&&!this.contains(e)){var i=this._elements||[],o=e._dom;if(t<0||t>=i.length)this._dom&&o&&this._dom.appendChild(o),i.push(e);else{if(o){var n=this._elements[t]._dom;this._dom&&n&&this._dom.insertBefore(o,n)}i.splice(t,0,e)}return this._elements=i,e._parent=this,e.$_attached(this),this.invalidate(),!0}return!1},e.prototype.removeChild=function(t){if(t&&this._elements){var e=this._elements.indexOf(t);if(e>=0)return this.removeChildAt(e)===t}return!1},e.prototype.removeChildAt=function(t){if(t>=0&&t<this.childCount){var e=this._elements[t];return this._elements.splice(t,1),this._dom&&e._dom&&this._dom.removeChild(e._dom),e._parent=null,e._dirty=!1,e.$_detached(this),this.invalidate(),e}return null},e.prototype.removeLast=function(){return this._elements&&this._elements.length>0?this.removeChildAt(this._elements.length-1):null},e.prototype.clear=function(){var t=this._elements;if((t?t.length:0)>0){for(var e=0,i=t;e<i.length;e++){var o=i[e];o._parent=null,o.$_detached(this)}if(this._elements=[],this._dom)for(;this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild);return this.invalidate(),!0}return!1},e.prototype.hideAll=function(){if(this._elements)for(var t=0,e=this._elements;t<e.length;t++)e[t].visible=!1},e.prototype.invalidate=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t||!this._dirty){this._dirty=!0;var i=this.container;i&&i.invalidateElement(this)}if(e&&this._elements)for(var o=0,n=this._elements;o<n.length;o++)n[o].invalidate(t,!0)},e.prototype.validate=function(){this._dirty=!1},e.prototype.invalidateLayout=function(){var t=this.container;t&&t.invalidateLayout()},e.prototype.getBounds=function(t){return void 0===t&&(t=null),t?t.set(this._x,this._y,this._width,this._height):new q(this._x,this._y,this._width,this._height)},e.prototype.getClientRect=function(t){return void 0===t&&(t=null),t?t.set(0,0,this._width,this._height):new q(0,0,this._width,this._height)},e.prototype.containsInBounds=function(t,e){return t>=this._x&&t<this._x+this._width&&e>=this._y&&e<this._y+this._height},e.prototype.containsInClient=function(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height},e.prototype.parentToElement=function(t,e,i){for(var o=this;o&&o!=t;)e-=o._x,i-=o._y,o=o._parent;return new Ks(e,i)},e.prototype.translateBy=function(t,e){void 0===e&&(e=null);var i=t;for(e||(e=new q(0,0,this._width,this._height));i&&i!==this;)e.x-=i._x,e.y-=i._y,i=i._parent;return e},e.prototype.topBy=function(t,e){for(var i=this._y+e,o=this._parent;o&&o!==t;)i+=o._y,o=o._parent;return i},e.prototype.boundsBy=function(t,e){void 0===e&&(e=null);var i=this._x,o=this._y,n=this._parent;for(e&&(i+=e.x,o+=e.y);n&&n!==t;)i+=n._x,o+=n._y,n=n._parent;return e?new q(i,o,e.width,e.height):new q(i,o,this._width,this._height)},e.prototype.boundsByContainer=function(t){void 0===t&&(t=null);var e=this._x,i=this._y;t&&(e+=t.x,i+=t.y);for(var o=this._parent;o&&void 0!==o._x;)e+=o._x,i+=o._y,o=o._parent;return t?new q(e,i,t.width,t.height):new q(e,i,this._width,this._height)},e.prototype.pointByContainer=function(t,e){for(var i=this._parent;i&&void 0!==i._x;)t+=i._x,e+=i._y,i=i._parent;return new Ks(t+this._x,e+this._y)},e.prototype.containerToElement=function(t,e){for(var i=this;i;)t-=i._x,e-=i._y,i=i._parent;return new Ks(t,e)},e.prototype.boundsByScreen=function(t){return void 0===t&&(t=null),t=this.boundsByContainer(t),this.container.toScreen(t)},e.prototype.hitTest=function(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height},e.prototype.findChildAt=function(t,e,i){var o=this._elements,n=o?o.length:0;if(n>0)for(var r=n-1;r>=0;r--){var s=o[r];if(s.visible){var a=t-s._x,l=e-s._y;if((i||s._mouseEnabled)&&(s.isLayer||s.hitTest(a,l))){var u=s.findChildAt(a,l,i);if(u)return u;if(!s.isLayer&&s._mouseEnabled)return s}}}return null},e.prototype.move=function(t,e){t==this._x&&e==this._y||(this._x=t,this._y=e,this.invalidate())},e.prototype.resize=function(t,e){t==this._width&&e==this._height||(this._width=t,this._height=e,this.invalidate())},e.prototype.setBounds=function(t,e,i,o){t==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.sizeChanged())},e.prototype.setBoundsI=function(t,e,i,o){e>>=0,i>>=0,o>>=0,(t>>=0)==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.sizeChanged())},e.prototype.setRect=function(t){t.x==this._x&&t.y==this._y&&t.width==this._width&&t.height==this._height||(this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height,this.sizeChanged())},e.prototype.setRectI=function(t){var e=t.x>>0,i=t.y>>0,o=t.width>>0,n=t.height>>0;e==this._x&&i==this._y&&o==this._width&&n==this._height||(this._x=e,this._y=i,this._width=o,this._height=n,this.sizeChanged())},e.prototype.draw=function(){this._dirty&&this._dom&&(this._beforeDraw(this._dom),this._doDraw(this._dom),this._dirty=!1)},e.prototype.resetSize=function(){this._dom&&this._setSizeStyle(this._dom.style)},e.prototype.getHtml=function(){return this._dom&&this._dom.outerHTML},e.prototype.setImportantStyle=function(t,e){this._dom.style.setProperty(t,e,"important")},e.prototype._createDom=function(t){return t.createElement("div")},e.prototype._initDom=function(t){var e=t.style;e.position="absolute",e.boxSizing="border-box",this._addEventListeners(t)},e.prototype._addEventListeners=function(t){},e.prototype._removeEventListeners=function(t){},e.prototype.$_attached=function(t){this._doAttached(t)},e.prototype._doAttached=function(t){},e.prototype.$_detached=function(t){this._doDetached(t)},e.prototype._doDetached=function(t){},e.prototype._setSizeStyle=function(t){t.width=this._width+"px",t.height=this._height+"px"},e.prototype._getCssDisplay=function(){return"block"},e.prototype.resetStyleName=function(){this._setClassName(this._dom)},e.prototype._setClassName=function(t){var e=this._getCssSelector();e!=this._className&&(this._className=e,(t||this._dom).className=e||"")},e.prototype.applyBounds=function(){var t=this._dom.style;t.left=this._x+"px",t.top=this._y+"px",this._setSizeStyle(t)},e.prototype._beforeDraw=function(t){this._setClassName(t);var e=t.style;e.left=this._x+"px",e.top=this._y+"px",this._setSizeStyle(e)},e.prototype._hoverChanged=function(){},e.prototype._visibleChanged=function(){},e.prototype.sizeChanged=function(){this.invalidate(),this._doSizeChanged()},e.prototype._doSizeChanged=function(){},e}(Ee),qs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"isLayer",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){},e.prototype._doDraw=function(t){},e}(Ys),Xs=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this,e)||this;return o._active=i,o}return n(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),e}(qs);t.SelectionMode=void 0,(Ps=t.SelectionMode||(t.SelectionMode={})).NONE="none",Ps.SINGLE="single",Ps.EXTENDED="extended",t.SelectionStyle=void 0,(Ds=t.SelectionStyle||(t.SelectionStyle={})).BLOCK="block",Ds.GROUP="group",Ds.ROWS="rows",Ds.COLUMNS="columns",Ds.SINGLE_ROW="singleRow",Ds.SINGLE_COLUMN="singleColumn",Ds.SINGLE="single",Ds.NONE="none",t.SelectionDisplay=void 0,(ks=t.SelectionDisplay||(t.SelectionDisplay={})).CELL="cell",ks.CELL_AND_BORDER="cellAndBorder",ks.MASK="mask";var Qs,Js,Zs,ta=function(e){return e==t.SelectionStyle.SINGLE_ROW||e==t.SelectionStyle.SINGLE_COLUMN||e==t.SelectionStyle.SINGLE},ea=function(e){var i=e&&e.style;return i==t.SelectionStyle.ROWS||i==t.SelectionStyle.SINGLE_ROW},ia=function(t){function e(e,i){var o=t.call(this)||this;return o._manager=e,o._runStyle=i,o}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._manager&&this._manager.grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"runStyle",{get:function(){return this._runStyle},enumerable:!1,configurable:!0}),e.prototype.setValues=function(t){var e=this.grid.dataSource,i=this._getRows(),o=this.grid,n={};if(i&&i.rows&&i.rows.length>0&&i.fields&&i.fields.length>0){for(var r=0;r<i.rows.length;r++){for(var s=[],a=0;a<i.fields.length;a++)o.getWritable(o.getItemIndexOfRow(i.rows[r]),o.columnByField(i.fields[a]))&&s.push(i.fields[a]);s.length&&(n[i.rows[r]]=s.slice())}e.fillValue(n,t)}},e.prototype.inflate=function(t,e){switch(t){case"left":this._inflateLeft(e);break;case"right":this._inflateRight(e);break;case"top":this._inflateTop(e);break;case"bottom":this._inflateBottom(e)}},e.prototype.getItems=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),n=o.top,r=o.bottom,s=n;s<=r;s++){var a=e.getItem(s);a&&(!t||a.dataRow>=0)&&i.push(a)}return i},e.prototype.getItemIndices=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),n=o.top,r=o.bottom,s=n;s<=r;s++){var a=e.getItem(s);a&&(!t||a.dataRow>=0)&&i.push(a.index)}return i},e.prototype.getRows=function(){for(var t=this.grid,e=[],i=this.getBounds(),o=i.top,n=i.bottom,r=o;r<=n;r++){var s=t.getItem(r);if(s&&s.dataRow>=0){var a=s.dataRow;a>=0&&e.push(a)}}return e},e.prototype._resized=function(){this._manager&&this._manager.$_itemResized(this)},e.prototype.toProxy=function(){var t=this.grid,e=this.getBounds(),i=t.getItem(e.r1),o=t.getItem(e.r2);return{style:this.style,startItem:e.r1,startRow:i?i.dataRow:-1,startColumn:e.c1.firstColumn.name,endItem:e.r2,endRow:o?o.dataRow:-1,endColumn:e.c2.lastColumn.name,startLayout:e.c1,endLayout:e.c2}},Object.defineProperty(e.prototype,"startItem",{get:function(){return this.getBounds().r1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startRow",{get:function(){var t=this.grid.getItem(this.getBounds().r1);return t?t.dataRow:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startColumn",{get:function(){return this.getBounds().c1.firstColumn.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endItem",{get:function(){return this.getBounds().r2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endRow",{get:function(){var t=this.grid.getItem(this.getBounds().r2);return t?t.dataRow:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endColumn",{get:function(){return this.getBounds().c2.firstColumn.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startLayout",{get:function(){return this.getBounds().c1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endLayout",{get:function(){return this.getBounds().c2},enumerable:!1,configurable:!0}),e}(kt),oa=function(e){function i(t){var i=e.call(this)||this;return i._items=[],i._locked=!1,i._grid=t,i}return n(i,e),i.prototype._doDispose=function(){this._grid=null,this._items=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exclusiveMode",{get:function(){return this._grid.displayOptions.selectionMode!==t.SelectionMode.EXTENDED},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return 1==this._items.length&&this._items[0].single},enumerable:!1,configurable:!0}),i.prototype.lock=function(){this._locked=!0},i.prototype.unlock=function(){this._locked=!1},i.prototype.getItem=function(t){return this._items[t]},i.prototype.getItems=function(){return this._items.slice()},i.prototype.lastItem=function(){return this._items[this._items.length-1]},i.prototype.add=function(e,i,o){if(this._locked)return null;if(o==t.SelectionStyle.NONE)return this.clear(),null;this.exclusiveMode&&this.clear();var n=null;switch(o){case t.SelectionStyle.COLUMNS:n=new sa(this,o,e.layout,i.layout);break;case t.SelectionStyle.SINGLE_COLUMN:n=new sa(this,o,e.layout,e.layout);break;case t.SelectionStyle.ROWS:n=new ra(this,o,e.itemIndex,i.itemIndex);break;case t.SelectionStyle.SINGLE_ROW:n=new ra(this,o,e.itemIndex,e.itemIndex);break;case t.SelectionStyle.BLOCK:n=new na(this,o,e,i);break;case t.SelectionStyle.GROUP:(e=e.clone()).layout=e.layout.root.first,(i=i.clone()).layout=i.layout.root.last.source,n=new na(this,o,e,i);break;case t.SelectionStyle.SINGLE:n=new na(this,o,e,e)}return n&&this.$_addItem(n)},i.prototype.remove=function(t){if(!this._locked){var e=this._items.indexOf(t);e>=0&&(this._items.splice(e,1),this.fireEvent(i.REMOVED,t),this._changed())}},i.prototype.clear=function(){this._locked||this._items.length>0&&(this._items.length=0,this.fireEvent(i.CLEARED))},i.prototype.selectBlock=function(e,i){i&&this.clear(),this.containsCell(e)||this.$_addItem(new na(this,t.SelectionStyle.BLOCK,e,e))},i.prototype.selectRow=function(e,i){i&&this.clear(),this.containsItem(e,ra)||this.$_addItem(new ra(this,t.SelectionStyle.ROWS,e,e))},i.prototype.containsItem=function(t,e){for(var i=0,o=this._items.length;i<o;i++){var n=this._items[i];if((!e||n instanceof e)&&n.containsItem(t))return!0}return!1},i.prototype.containsLayout=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].containsLayout(t))return!0;return!1},i.prototype.containsCell=function(t){return this.contains(t.itemIndex,t.layout)},i.prototype.contains=function(t,e){for(var i=0,o=this._items.length;i<o;i++)if(this._items[i].contains(t,e))return!0;return!1},i.prototype.normalize=function(){},i.prototype.canResize=function(t){return t&&!ta(t._runStyle)},i.prototype._changed=function(t){this.fireEvent(i.CHANGED,t)},i.prototype.$_addItem=function(t){if(!t)throw new Error("item is null");return this._items.indexOf(t)<0&&(this._items.push(t),this.fireEvent(i.ADDED,t),this._changed(t)),t},i.prototype.$_itemResized=function(t){this.fireEvent(i.RESIZED,t),this._changed(t)},i.prototype.$_ended=function(t){this.fireEvent(i.ENDED,t)},i.CHANGED="onSelectionChanged",i.ADDED="onSelectionAdded",i.REMOVED="onSelectionRemoved",i.CLEARED="onSelectionCleared",i.RESIZED="onSelectionResized",i.ENDED="onSelectionEnded",i}(Ee),na=function(e){function i(t,i,o,n){var r=e.call(this,t,i)||this;return r._startIndex=o.clone(),r._endIndex=n.clone(),xt.isDebugging()&&r._startIndex.layout,xt.isDebugging()&&r._endIndex.layout,r}return n(i,e),Object.defineProperty(i.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endIndex",{get:function(){return this._endIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._runStyle||t.SelectionStyle.BLOCK},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return hs.areEquals(this._startIndex,this._endIndex)},enumerable:!1,configurable:!0}),i.prototype.getBounds=function(){var e=this.grid;this._startIndex.normalize(e),this._endIndex.normalize(e);var i=this._startIndex.clone(),o=this._endIndex.clone();if(this._runStyle===t.SelectionStyle.GROUP&&(i.layout.root.vindex>o.layout.root.vindex&&(i=this._endIndex.clone(),o=this._startIndex.clone()),i.layout=i.layout.root.first,o.layout=o.layout.root.last),hs.areEquals(i,o))return gs.create(i);var n=e.activeCellLayout._dataCells,r=i.layout,s=o.layout,a=void 0,l=void 0;return r.col<=s.col?(a=n[0][r.col],l=n[n.length-1][s.col]):(a=n[0][s.col],l=n[n.length-1][r.col]),gs.createRange(i.itemIndex,a,o.itemIndex,l)},i.prototype.containsItem=function(t){var e=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),i=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex);return t>=e&&t<=i},i.prototype.containsLayout=function(t){if(!t)return!1;if(this.single)return this._startIndex.layout===t;var e=t.distance,i=this._startIndex.layout.distance,o=this._endIndex.layout.distance;return i<o?e>=i&&e<=o:e>=o&&e<=i},i.prototype.contains=function(t,e){return this.getBounds().contains(t,e)},i.prototype.resizeTo=function(t){var e=this.grid,i=e.displayOptions;e.isValid(t)&&!hs.areEquals(t,this._endIndex)&&(i.selectAtSingleRow&&(t.itemIndex=this.startItem),this._endIndex.assign(t),this._resized())},i.prototype.moveRow=function(t){this._startIndex.itemIndex+=t,this._endIndex.itemIndex+=t},i.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},i.prototype.mergeWith=function(t){},i.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e,i=this.grid,o=this.getBounds(),n=this.single?[o.c1.boundColumn]:i.collectDataColumns(o.c1,o.c2);if(!n||(e=n.length)<1)return null;for(var r=o.r1,s=o.r2,a=[],l=r;l<=s;l++){var u=i.getItem(l);if(u&&u.isDataRow){var c={};c.__rowId=u.dataRow;for(var h=0;h<e;h++){var p=n[h];c[p.fieldName]=u.getData(p.dataIndex)}if(a.push(c),t>0&&a.length==t)break}}return a},i.prototype._inflateLeft=function(t){this._startIndex.layout.distance<=this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},i.prototype._inflateRight=function(t){this._startIndex.layout.distance>this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},i.prototype._inflateTop=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex<=this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},i.prototype._inflateBottom=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex>this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},i.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(e&&!(e.length<1)){for(var i=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),o=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),n=[],r=[],s=i;s<=o;s++)n.push(t.getItem(s).dataRow);for(var a=0,l=e;a<l.length;a++){var u=l[a];r.push(u.dataIndex)}return{rows:n,fields:r}}},i.prototype.toString=function(){return this._startIndex+" ~ "+this._endIndex},i}(ia),ra=function(e){function i(t,i,o,n){var r=e.call(this,t,i)||this;return r._startRow=o,r._endRow=n,r}return n(i,e),Object.defineProperty(i.prototype,"startRow",{get:function(){return this._startRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endRow",{get:function(){return this._endRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topRow",{get:function(){return Math.min(this._startRow,this._endRow)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottomRow",{get:function(){return Math.max(this._startRow,this._endRow)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._runStyle||t.SelectionStyle.ROWS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.getBounds=function(){var t=this.grid,e=t.itemCount;return this._startRow=Math.max(0,Math.min(e-1,this._startRow)),this._endRow=Math.max(0,Math.min(e-1,this._endRow)),this._startRow<=this._endRow?gs.createRange(this._startRow,t.activeCellLayout.first,this._endRow,t.activeCellLayout.last):gs.createRange(this._endRow,t.activeCellLayout.first,this._startRow,t.activeCellLayout.last)},i.prototype.contains=function(t,e){return this.containsItem(t)},i.prototype.containsItem=function(t){return t>=this.topRow&&t<=this.bottomRow},i.prototype.containsLayout=function(t){return!0},i.prototype.resizeTo=function(t){var e=Math.max(0,t.itemIndex);e!=this._endRow&&(this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},i.prototype.moveRow=function(t){this._startRow+=t,this._endRow+=t},i.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},i.prototype.mergeWith=function(t){},i.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(e.getVisibleLayout(0),e.getVisibleLayout(e.visibleLayoutCount-1));if(!i)return null;var o=i.length;if(o<1)return null;for(var n=Math.max(0,Math.min(this._startRow,this._endRow)),r=Math.min(e.itemCount-1,Math.max(this._startRow,this._endRow)),s=[],a=n;a<=r;a++){var l=e.getItem(a);if(l&&l.isDataRow){var u={};u.__rowId=l.dataRow;for(var c=0;c<o;c++){var h=i[c];u[h.fieldName]=l.getData(h.dataIndex)}if(s.push(u),t>0&&s.length==t)break}}return s},i.prototype._inflateLeft=function(t){},i.prototype._inflateRight=function(t){},i.prototype._inflateTop=function(t){var e=t.itemIndex;e!=this.topRow&&(this._startRow<=this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},i.prototype._inflateBottom=function(t){var e=t.itemIndex;e!=this.bottomRow&&(this._startRow>this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},i.prototype._getRows=function(){var t=this.grid,e=t.activeCellLayout,i=t.collectDataColumns(e.first,e.last);if(i&&!(i.length<1)){for(var o=Math.max(0,Math.min(this._startRow,this._endRow)),n=Math.min(t.itemCount-1,Math.max(this._startRow,this._endRow)),r=[],s=[],a=o;a<=n;a++)r.push(t.getItem(a).dataRow);for(var l=0,u=i;l<u.length;l++){var c=u[l];s.push(c.dataIndex)}return{rows:r,fields:s}}},i}(ia),sa=function(e){function i(t,i,o,n){var r=e.call(this,t,i)||this;return r._startLayout=o,r._endLayout=n,r}return n(i,e),Object.defineProperty(i.prototype,"startLayout",{get:function(){return this._startLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endLayout",{get:function(){return this._endLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftLayout",{get:function(){return this._startLayout.col<=this._endLayout.col?this._startLayout:this._endLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightLayout",{get:function(){return this._startLayout.col>this._endLayout.col?this._startLayout:this._endLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._runStyle||t.SelectionStyle.COLUMNS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.getBounds=function(){var t=this.grid.activeCellLayout,e=this._startLayout,i=this._endLayout;if(e.col>i.col){var o=e;e=i,i=o}e=t.getTopOf(e),i=t.getBottomOf(i,!0);var n=this.grid.itemCount-1;return gs.createRange(0,e,n,i)},i.prototype.contains=function(t,e){return this.containsLayout(e)},i.prototype.containsItem=function(t){return!0},i.prototype.containsLayout=function(t){return t.col>=this.leftLayout.col&&t.col<=this.rightLayout.col},i.prototype.resizeTo=function(t){t.layout!==this._endLayout&&(this._endLayout=t.layout,this._resized())},i.prototype.moveRow=function(t){},i.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},i.prototype.mergeWith=function(t){},i.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(this._startLayout,this._endLayout);if(!i)return null;for(var o=e.itemCount,n=[],r=0;r<o;r++){var s=e.getItem(r);if(s&&s.isDataRow){var a={};a.__rowId=s.dataRow;for(var l=0,u=i.length;l<u;l++)a[i[l].fieldName]=s.getData(i[l].dataIndex);if(n.push(a),t>0&&n.length==t)break}}return n},i.prototype._inflateLeft=function(t){var e=t.layout;e!==this.leftLayout&&(this._startLayout.distance<=this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},i.prototype._inflateRight=function(t){var e=t.layout;e!==this.rightLayout&&(this._startLayout.distance>this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},i.prototype._inflateTop=function(t){},i.prototype._inflateBottom=function(t){},i.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startLayout,this._endLayout);if(e){for(var i=t.itemCount,o=[],n=[],r=0;r<i;r++)o.push(t.getItem(r).dataRow);for(var s=0,a=e;s<a.length;s++){var l=a[s];n.push(l.dataIndex)}return{rows:o,fields:n}}},i}(ia),aa=function(t){function e(e){return t.call(this,e,"selectionView")||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-selection"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(qs),la=function(t){function e(e){var i=t.call(this,e,"selectionMask")||this;return i._toped=!1,i._bottomed=!1,i._lefted=!1,i._righted=!1,i._view=new aa(e),i.addChild(i._view),i}return n(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),e.prototype.prepare=function(){this._toped=this._bottomed=this._lefted=this._righted=!1},e.prototype.updateElement=function(){var t=0,e=0,i=this.width,o=this.height;this._lefted&&(t-=10,i+=10),this._righted&&(i+=10),this._toped&&(e-=10,o+=10),this._bottomed&&(o+=10),this._view.setBounds(t,e,i,o)},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},e}(qs),ua=function(t){function e(e,i){var o=t.call(this,e.doc,i)||this;return o._pool=[],o._views={},o._rangeRect=new q,o._grid=e,o}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new la(this.doc),this._views[e]=i),i._item=t,this.addChild(i),i},e.prototype.removeView=function(t){var e=t.$_hash,i=this._views[e];i&&(this.removeChild(i),this._pool.push(i),delete this._views[e])},e.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e),this._pool.push(e)}this._views={}},e.prototype.layout=function(){var t=this._grid.layoutManager,e=new q,i=Object.keys(this._views);for(var o in this._views){var n=this._views[o],r=n.item,s=!1;if((1!==i.length||!r.single||!hs.areEquals(r._startIndex,this._grid.focusedIndex))&&(n.prepare(),r instanceof ra?(s=this.$_getSelectionRowsRect(t,r,n,e),n._lefted=!0,n._righted=!0):r instanceof sa?(s=this.$_getSelectionColumnsRect(t,r,n,e),n._toped=!0,n._bottomed=!0):s=this.$_getSelectionRangeRect(t,r,n,e),s)){var a=t.contentBounds.y+t.footerBounds.y;e.bottom>a&&(n._bottomed=!0,e.bottom=a)}n.visible=s,n.visible&&(n.setRectI(e),n.updateElement(),n.invalidate())}},e.prototype.$_getSelectionRowsRect=function(t,e,i,o){var n,r,s=this._grid,a=e.getBounds(),l=a.r1,u=a.r2,c=t.itemCount,h=t.fixedItemCount,p=s.topIndex;if(h>0){if(l>=p+h+c||u<0||l>=h&&u<p+h)return!1;var d=t.fixedHeight+s.fixedOptions.rowBarHeight;l<h?n=t.getTableItemBounds(Math.max(0,l)):((n=t.getTableItemBounds(Math.max(0,l-p))).y<d&&(i._toped=!0),n.y=Math.max(n.y,d)),u<h?r=t.getTableItemBounds(u):l<=h&&u<h+p?r=t.getTableItemBounds(Math.min(h+p,h)-1):u>=p?(r=t.getTableItemBounds(Math.min(t.itemCount+h-1,u-p))).y=Math.max(r.y,d):r=n}else{if(!(c>0))return!1;if(l>=p+c||u<p)return!1;d=l-p,n=t.getTableItemBounds(Math.max(0,d)),r=t.getTableItemBounds(Math.min(c-1,u-p)),d<0&&(i._toped=!0)}return o.copy(n.union(r)),o.offset(t.fixedContentBounds.x,t.contentBounds.y+t.bodyBounds.y),o.right=t.rightLayoutCount>0?t.rightContentBounds.right:t.contentBounds.right,!0},e.prototype.$_getSelectionColumnsRect=function(t,e,i,o,n){var r=this._grid,s=e.getBounds(),a=t.fixedLayoutCount,l=t.rightLayoutCount;t.rightFirstLayout;var u=s.c1.col,c=s.c2.col;r.fixedOptions.colBarWidth;var h=t.getDataRect(s.c1),p=t.getDataRect(s.c2);if(o.left=Math.min(h.x,p.x),o.right=Math.max(h.right,p.right),o.y=t.contentBounds.y+t.headerBounds.bottom+t.summaryBounds.height,o.height=Math.min(t.dataBounds.height,t.footerBounds.y),n&&n.copy(o),u>=a){var d=t.fixedContentBounds.right;o.x<d&&(i._lefted=!0,o.left=Math.max(o.left,d)),o.right<d&&(i._righted=!0,o.width=0)}if(l>0){var f=t.rightFirstLayout,g=t.rightContentBounds;o.left>g.left?o.width=0:c<f&&o.right>=t.rightContentBounds.left&&(o.right=Math.min(o.right,t.rightContentBounds.x),i._righted=!0)}return!0},e.prototype.$_getSelectionRangeRect=function(t,e,i,o,n){var r=this._rangeRect;return!!this.$_getSelectionRowsRect(t,e,i,r)&&(o.y=r.y,o.bottom=r.bottom,this.$_getSelectionColumnsRect(t,e,i,r,n),o.x=r.x,o.right=r.right,n&&(n.y=o.y,n.height=o.height),!0)},e}(qs),ca=function(){function t(e){this._format=e,this._reader=Pt.getReader(e),this._writer=Be.getFormatter(e),t.validateDateFormat(e)}return t.getConverter=function(e){var i=t.Formatters;if(i[e])return i[e];var o=new t(e);return i[e]=o},t.validateDateFormat=function(t){if(t=t&&t.trim()){var e=t.indexOf("a")>=0||t.indexOf("A")>=0;if(e&&t.indexOf("H")>=0)throw"Invalid datetime read format - 'H' 'a'    : "+t;if(t.indexOf("h")>=0&&!e)throw"Invalid datetime read format - 'h'  'a'   : "+t}},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),t.prototype.getDate=function(t){return this._reader.toDate(t,!0)},t.prototype.getDateNull=function(t){try{return this.getDate(t)}catch(e){return xt.log("getDateNull Fail string => ".concat(t)),null}},t.prototype.getText=function(t){return this._writer.getText(t)},t.DEFAULT_FORMAT="yyyy/MM/dd",t.Formatters={},t.Default=t.getConverter(t.DEFAULT_FORMAT),t}(),ha=xt.isSafari?1:0,pa=function(e){function i(o,n){var r=e.call(this)||this;if(r._textCase=t.TextInputCase.DEFAULT,r._readOnly=!1,r._textReadOnly=!1,r._allowEmpty=!1,r._isMobile=xt.isMobile(),r._isTablet=xt.isTablet(),r._started=!1,r._dateConverter=ca.Default,r._boolConverter=It.Default,r._cellBounds=new q,r._checkHangeul=!1,r._composing=!1,r._grid=o,r._options=o.editorOptions,r._parentElement=n,r._editor=r._createEditor(n),r._editor.className=i.EDITOR_CSS+r._getInputSelector(),r._container&&(r._container.className=i.CONTAINER_CSS),r._editor.$_owner=r,r._editIndex=o.getIndex(),r._editor){var s=o.container;s.$_addListener(r._editor,"focus",function(t){this._grid.$_setEditFocused(!0,t)}.bind(r),!1),s.$_addListener(r._editor,"focusin",function(t){this._grid.$_setEditFocused(!0,t)}.bind(r),!1),s.$_addListener(r._editor,"blur",function(t){this._grid.$_setEditFocused(!1,t)}.bind(r),!1),s.$_addListener(r._editor,"focusout",function(t){this._grid.$_setEditFocused(!1,t)}.bind(r),!1)}return r.setVisible(!1,!0),r.$_setEditorId(r._editor),r}return n(i,e),i.copyProc=function(t,e){if(!t.isDisabled()&&!t.editing){var i=t._grid.copyToClipboard(e,null);return null!=i&&(e.clipboardData?e.clipboardData.setData("text/plain",i):window.clipboardData.setData("Text",i)),e.preventDefault()}},i.getEditorType=function(t){return"string"==typeof t?t:t?t.type:"line"},i.getEditorType2=function(t,e){return"string"==typeof t?t:t&&t.type?t.type:"string"==typeof e?e:e&&e.type?e.type:"line"},i.prototype._doDispose=function(){this.unprepare(),this._editor=xt.detach(this._editor),this._container=xt.detach(this._container),this._container=null,this._grid=null,this._controller=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"native",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasList",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"emptyValue",{get:function(){return this._emptyValue},set:function(t){t!=this._emptyValue&&(this._emptyValue=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._dateConverter=t?ca.getConverter(t):ca.Default)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"todayChar",{get:function(){return this._todayChar},set:function(t){t!=this._todayChar&&(this._todayChar=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nowChar",{get:function(){return this._nowChar},set:function(t){t!=this._nowChar&&(this._nowChar=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,t?(this._saveBoolConverter||(this._saveBoolConverter=new It(t)),this._saveBoolConverter.format=t,this._boolConverter=this._saveBoolConverter):this._boolConverter=It.Default)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editor",{get:function(){return this._editor},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return parseInt(this._container.style.width)>ha&&parseInt(this._container.style.height)>ha},enumerable:!1,configurable:!0}),i.prototype.setVisible=function(t,e){void 0===e&&(e=!1);var i=e?!t:this.visible;if(!t&&(this._container.style.width=ha+"px",this._container.style.height=ha+"px",xt.isMobile())){var o=this._grid;if(o){var n=o.container._containerDom,r=wt(this._container);this._editor===r.activeElement&&n&&n.focus({preventScroll:!0})}else this._editor.blur()}t!=i&&this._doVisibleChanged(t)},i.prototype._doVisibleChanged=function(t){this.setEditorZIndex(t)},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){var e=Ct(this._container);this._editor instanceof e.HTMLInputElement&&(this._editor.readOnly=this._readOnly=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textReadOnly",{get:function(){return this._textReadOnly},enumerable:!1,configurable:!0}),i.prototype._setTextReadOnly=function(t){t!=this._textReadOnly&&(this._textReadOnly=t,this._changed())},Object.defineProperty(i.prototype,"allowEmpty",{get:function(){return this._allowEmpty},enumerable:!1,configurable:!0}),i.prototype._setAllowEmpty=function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())},Object.defineProperty(i.prototype,"editing",{get:function(){return this._started},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editIndex",{get:function(){return this._editIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._editor.value},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.hasButton=function(t,e){return!1},i.prototype.applyOptions=function(t){t&&this.assignFrom(t)},i.prototype.setEditIndex=function(t){this._editIndex.assign(t)},i.prototype.setController=function(t){this._controller=t},i.prototype.prepare=function(){!this.native&&this._editor&&this._editor.removeAttribute("type")},i.prototype.unprepare=function(){},i.prototype.beginEdit=function(t,e){this._started||(this._started=this._doBeginEdit())&&(t&&this.clear(),e&&this.selectAll())},i.prototype.endEdit=function(){this._started&&(this._doEndEdit(),this._started=!1)},i.prototype.isEdited=function(){return!1},i.prototype.isDisabled=function(){return!this._grid||this._grid.container.disabled},i.prototype.caretToLast=function(){},i.prototype.commit=function(){this._doCommit()},i.prototype.setReadOnly=function(t){this._editor.readOnly=this._readOnly=t},i.prototype.getEditValue=function(t,e){},i.prototype.setEditValue=function(t){this._oldValue=t},i.prototype.setCellEditValue=function(t,e){!this.readOnly&&this._requestStart(e)&&(this.setEditValue(t),this._doChanged())},i.prototype.getEditText=function(){return""},i.prototype.selectAll=function(t){void 0===t&&(t=!1),this._grid.$_editFocused&&(!t&&xt.isMobile()||this._selectAll())},i.prototype.clear=function(){var t=Ct(this._container);this._editor instanceof t.HTMLInputElement&&(this._editor.value="")},i.prototype.setFocus=function(){var t=!xt.isMobile();!this._grid.handler._draggable&&(!this._isMobile||!this.hasList)&&this._editor.focus({preventScroll:t})},i.prototype.setEditorTitle=function(t){},i.prototype.setBounds=function(t,e,i,o,n){},i.prototype.setCellBounds=function(t,e,i,o){this._cellBounds.set(t,e,i,o)},i.prototype.closeList=function(t){},i.prototype.dropDownList=function(t){},i.prototype.buttonClicked=function(t,e){},i.prototype.buttonDown=function(t,e){},i.prototype.buttonUp=function(t,e){},i.prototype.setButtonStyle=function(t,e,i,o,n){return!1},i.prototype.initOptions=function(){this._emptyValue=void 0,this.booleanFormat=null,this._todayChar=null,this._nowChar=null,this.datetimeFormat=null,this._textCase=t.TextInputCase.DEFAULT,this._checkHangeul=!1},i.prototype.$_setEditorId=function(t){},i.prototype._changed=function(){},i.prototype.$_setController=function(t){this._controller=t},i.prototype._editField=function(){return this._grid.dataSource?this._grid.dataSource.getField(this._editIndex.dataField):null},i.prototype._isDateEditor=function(){return!1},i.prototype._requestStart=function(t){return this._started?this._started:(this.selectAll(),this._controller.onEditorStart(this))},i.prototype._valToStr=function(e){var i=this.editIndex,o="";try{if(void 0!==e||this._mask){var n=i.grid.dataSource.getField(i.dataField);if(n)switch(n.dataType){case t.ValueType.DATETIME:e&&(o=this._dateConverter.getText(e)),this._mask&&(o=this._mask.writeBuffer(o));break;case t.ValueType.BOOLEAN:o=this._boolConverter.toText(e);break;case t.ValueType.NUMBER:isNaN(e)||(o=xt.toStr(e));break;case t.ValueType.OBJECT:var r=i.column._objectKey||n.objectKey;e&&(o=r?e[r]:null!=e&&"object"==typeof e?JSON.stringify(e):"");break;default:o=this._mask?this._mask.writeBuffer(e):e}else o=e}}catch(t){o=e}return null==o?"":o},i.prototype._strToVal=function(e){e=xt.toStr(e);var i=this._editIndex,o=i.dataColumn&&this._textCase==t.TextInputCase.DEFAULT?i.dataColumn.textInputCase:this._textCase;try{var n=i.grid.dataSource.getField(i.dataField);if(n){var r=n.dataType;if(r==t.ValueType.DATETIME||e&&this._isDateEditor()&&r==t.ValueType.TEXT){var s=r==t.ValueType.DATETIME,a=null;return e&&e==this._nowChar&&(a=new Date),!a&&e&&e==this._todayChar&&(a=new Date).setHours(0,0,0,0),a||(this._mask&&(e=this._mask.getStripValue()),a=this._dateConverter.getDate(e)),s?!a||isNaN(a.getFullYear())?void 0:a:a?this._dateConverter.getText(a):void 0}if(r==t.ValueType.BOOLEAN)return this._boolConverter.toBoolEx(e);if(r==t.ValueType.NUMBER)return parseFloat(e);r==t.ValueType.TEXT&&this._mask&&(e=this._mask.getStripValue())}return o===t.TextInputCase.UPPER?e?e.toLocaleUpperCase():e:o===t.TextInputCase.LOWER&&e?e.toLocaleLowerCase():e}catch(t){return}},i.prototype._dispatchKeyDown=function(t){return this._controller,this._controller.onEditorKeyDown(this,t)},i.prototype._dispatchKeyPress=function(t){return this._controller,this._controller.onEditorKeyPress(this,t)},i.prototype._dispatchKeyUp=function(t){return this._controller,this._controller.onEditorKeyUp(this,t)},i.prototype._dispatchChange=function(){this._controller.onEditorChange(this)},i.prototype._dispatchSearch=function(t){this._controller.onEditorSearch(this,t)},i.prototype._dispatchSearchCellButtonClick=function(t){return this._controller.onSearchCellButtonClick(this,t)},i.prototype._dispatchCommit=function(){this._controller.onEditorCommit(this)},i.prototype._sendToParent=function(t,e,i){void 0===e&&(e=void 0);try{var o=xt.isMac&&t.metaKey||!xt.isMac&&t.ctrlKey;if(2==e){if(this._dispatchKeyPress(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0}else if(3==e){if(this._dispatchKeyUp(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;try{var n=this._controller._grid,r=n.editOptions;if(r.maxLengthToNextCell){var s=r.skipReadOnly,a=n.activeTool,l=this.maxLength,u=this.editIndex.clone(),c=xt.included(t.keyCode,38,33,40,34,113,9,13);if(!this._checkHangeul&&!c&&!o&&!t.altKey&&n&&n.isEditing(u)&&l>0&&!this._composing&&t.keyCode>47){var h=this._mask?this._mask.getStripValue():this._editor.value;if(this instanceof Sa&&this.maxLengthExceptComma){var p=this.getEditValue();isNaN(p)&&null!=p||(h=String(p))}if(h&&h.length>=l)return n.getBodyViewAt(u).spanRight(n.layoutManager,u),u.right(),s&&a._checkReadOnly(u)&&(a._skipReadOnly(u,1)||(u=this.editIndex.clone())),hs.areEquals(u,this.editIndex)||a.setFocused(u,!0,!0),!0}}}catch(t){if(t instanceof hr)throw t;return!0}}else if(this._dispatchKeyDown(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;return!1}finally{}},i.prototype._commitListValue=function(t){this._editIndex&&this._grid._editorStarted(this,this._editIndex)&&this._grid.setCellValue(this._editIndex,t);var e=this._grid;if(e){var i=e.container._containerDom,o=wt(i);this._editor==o.activeElement&&i&&i.focus()}else this._editor.blur()},i.Unselected={},i.InvalidFormat={},i.EDITOR_CSS="rg-editor ",i.CONTAINER_CSS="rg-editor-container",i}(Ee),da=function(){return{9:/[0-9 ]/,0:/[\d]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/}},fa=function(){function t(t,e){this._includedFormat=!1,this._showInvalidFormatMessage=!0,this._overwrite=!1,this._allowEmpty=!1,this._restrictNull=!1,this._definitions=da(),this._tests=null,this._defBuffer=[],this._editor=t,e&&this.setOptions(e)}return t.prototype.dispose=function(){return this._definitions=null,this._tests=null,this._editor._editor&&(this._editor._editor.onclick=null),this._editor=null,null},Object.defineProperty(t.prototype,"includedFormat",{get:function(){return this._includedFormat},set:function(t){t!=this._includedFormat&&(this._includedFormat=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!=this._placeHolder&&(this._placeHolder=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editMask",{get:function(){return this._editMask},set:function(t){t!=this._editMask&&(this._editMask=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definitions",{get:function(){return this._definitions},set:function(t){t!=this._definitions&&(this._definitions=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){t!=this._invalidFormatMessage&&(this._invalidFormatMessage=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){t!=this._showInvalidFormatMessage&&(this._showInvalidFormatMessage=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"overWrite",{get:function(){return this._overwrite},set:function(t){t!=this._overwrite&&(this._overwrite=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"restrictNull",{get:function(){return this._restrictNull},set:function(t){t!=this._restrictNull&&(this._restrictNull=t,this._changed())},enumerable:!1,configurable:!0}),t.prototype.clickHandler=function(t){this.restrictNull&&this._moveCaret()},t.prototype.clearBuffer=function(t,e){t=arguments.length>0?t:0,e=arguments.length>1?e:this._tests.length;for(var i=t;i<e;i++)this._buffer[i]=this.$_getPlaceHolder(i),this._defBuffer[i]=""},t.prototype.writeBuffer=function(t,e){if(void 0===e&&(e=!1),t){e&&this.clearBuffer();for(var i=0,o=0,n=this._tests.length;i<n;i++)if(this._tests[i]&&this._tests[i]instanceof RegExp)for(var r=void 0;r=t[o++];)if(this._tests[i].test(r)){this._buffer[i]=r,this._defBuffer[i]=r;break}}return this._buffer&&this._buffer.join("")},t.prototype.getStripValue=function(){var t=[],e=[];if(""==this._defBuffer.join(""))return null;if(this.includedFormat)for(var i=0,o=this._buffer.length;i<o;i++){var n=this._buffer[i];!this._tests[i]||this._tests[i].test(n)?t.push(n):n==this.$_getPlaceHolder(i)&&this._tests[i].test(" ")&&t.push(" ")}else for(i=0,o=this._buffer.length;i<o;i++)this._tests[i]&&this._tests[i]instanceof RegExp&&this._tests[i].test(this._buffer[i])&&(e.length>0&&(t=t.concat(e),e=[]),t.push(this._buffer[i]));return t.join("")},t.prototype.setOptions=function(t){if("string"==typeof t)this.$_parseMask(t);else if(t.definitions&&this.$_parseDefinitions(t.definitions),t.placeHolder&&(this._placeHolder=t.placeHolder),t.editMask&&this.$_parseMask(t.editMask),null!=t.includedFormat&&(this._includedFormat=t.includedFormat),t.invalidFormatMessage&&(this._invalidFormatMessage=t.invalidFormatMessage),null!=t.allowEmpty&&(this._allowEmpty=t.allowEmpty),null!=t.showInvalidFormatMessage&&(this._showInvalidFormatMessage=t.showInvalidFormatMessage),null!=t.overwrite&&(this._overwrite=t.overwrite),null!=t.overWrite&&(this._overwrite=t.overWrite),this._restrictNull&&this._editor){var e=this._editor._editor;!e.onclick&&(e.onclick=this.clickHandler.bind(this))}},t.prototype.checkValid=function(){var t=[];if(this.allowEmpty){for(var e=0,i=this._tests.length;e<i;e++)t[e]=this.$_getPlaceHolder(e);if(t.join("")===this._buffer.join(""))return!0}for(e=0,i=this._tests.length;e<i;e++){var o=this._buffer[e];if(this._tests[e]&&!this._tests[e].test(o)&&o==this.$_getPlaceHolder(e)&&!this._tests[e].test(" "))return!1}return!0},t.prototype._changed=function(){},t.prototype._moveCaret=function(t,e){for(var i=this._editor._editor,o=t=arguments.length>0?t:i.selectionStart,n=e=arguments.length>1?e:i.selectionEnd,r=t-1;r>=0;r--){if(this._tests[r]&&this._tests[r].test(this._buffer[r])){o=r+1;break}o=r}for(r=e-1;r>=0;r--){if(this._tests[r]&&this._tests[r].test(this._buffer[r])){n=r+1;break}n=r}if(o!=t||n!=e){for(r=o;r<=t&&!this._tests[r];r++)o++;for(r=n;r<=e&&!this._tests[r];r++)n++;return i.setSelectionRange(o,n),!0}return o!=t||n!=e},t.prototype.$_setCaret=function(t,e){this._editor._editor.setSelectionRange(t,e)},t.prototype.$_parseDefinitions=function(t){for(var e in t)"string"==typeof t[e]&&(this._definitions[e]=new RegExp(t[e]))},t.prototype.$_parseMask=function(t){var e=this._tests=[],i=this._definitions,o=t.split("");this._editMask=t,this._buffer=[];for(var n=0,r=o.length;n<r;n++)e.push(i[o[n]]),this._buffer.push(i[o[n]]?this.$_getPlaceHolder(n):o[n])},t.prototype.$_getPlaceHolder=function(t){return this._placeHolder&&this._placeHolder.length>t?this._placeHolder[t]:this._tests[t]?"_":this._editMask&&this._editMask.length>t?this._editMask[t]:"_"},t.prototype.$_seekPrev=function(t){for(;--t>=0&&!this._tests[t];);return Math.max(0,t)},t.prototype.$_seekNext=function(t){for(;++t<this._editMask.length&&!this._tests[t];);return Math.min(this._editMask.length,t)},t.prototype.$_shiftL=function(t,e){var i=this._editMask.length,o=this._buffer;if(t>=0)for(var n=t,r=this.$_seekNext(e);i>n;n++)if(this._tests[n]){if(!(i>r&&this._tests[n].test(o[r])))break;o[n]=o[r],this._defBuffer[n]=this._defBuffer[r],o[r]=this.$_getPlaceHolder(r),this._defBuffer[r]="",r=this.$_seekNext(r)}},t.prototype.$_shiftR=function(t){for(var e,i,o=this._editMask.length,n=this._buffer,r=t,s=this.$_getPlaceHolder(t);o>r;r++)if(this._tests[r]){if(e=this.$_seekNext(r),i=n[r],this._defBuffer[r]=s,n[r]=s,!(o>e&&this._tests[e].test(i)))break;s=i}},t.prototype.keydown=function(t){var e=this._editor.editor;if(!e.readOnly){var i=t.which||t.keyCode,o=e.selectionStart,n=e.selectionEnd;if(46===i||8===i)o==n&&(o=46!==i?this.$_seekPrev(o):n=this.$_seekNext(o-1),n=46===i?this.$_seekNext(n):n),this.clearBuffer(o,n),!this._overwrite&&this.$_shiftL(o,n-1),e.value=this.writeBuffer(),this.$_setCaret(Math.max(0,o),Math.max(0,o));else if(39===i||35===i)return this._moveCaret();this._pStart=e.selectionStart}},t.prototype.keyPress=function(t){var e=this._editor.editor;if(!e.readOnly){this.restrictNull&&this._moveCaret();var i,o=e.selectionStart,n=e.selectionEnd,r=t.which||t.keyCode;this.clearBuffer(o,n),o!==n&&this.$_shiftL(o,n-1);var s=this.$_seekNext(o-1);this._editMask&&this._editMask.length>s&&this._tests[s]&&this._tests[s].test(i=String.fromCharCode(r))&&(!this._overwrite&&this.$_shiftR(o),this._buffer[s]=i,this._defBuffer[s]=i,e.value=this.writeBuffer(),s=this.$_seekNext(s),this.$_setCaret(Math.max(0,s),Math.max(0,s))),this._pStart=e.selectionStart}},t.prototype.input=function(t){var e=this._editor.editor;if(!e.readOnly){var i=e.value;/[---]/.test(i)&&(e.value=e.value.replace(/[---]/g,""),null!=this._pStart&&e.setSelectionRange(this._pStart,this._pStart))}},t}(),ga=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._maxLength=0,t._fontSize=0,t._modified=!1,t}return n(i,e),Object.defineProperty(i.prototype,"maxLength",{get:function(){return this._maxLength},set:function(t){t!=this._maxLength&&(this._maxLength=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=isNaN(t)?0:Math.max(0,t)},enumerable:!1,configurable:!0}),i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._maxLength=0},Object.defineProperty(i.prototype,"readonly",{set:function(t){this._editor.readOnly=this._readOnly=t},enumerable:!1,configurable:!0}),i.prototype.isEdited=function(){return this._modified},i.prototype.setVisible=function(t,i){e.prototype.setVisible.call(this,t,i);var o=this._container.style;t?(o.border="",o.boxShadow=""):t||(o.border="none",o.boxShadow="none")},i.prototype.setEditIndex=function(i){e.prototype.setEditIndex.call(this,i);var o=this._editor.style;xt.isMobile()?o.fontSize=Math.max(this.fontSize,16)+"px":this.fontSize>0&&(o.fontSize=this.fontSize+"px");var n=i.valueColumn;if(n)switch(this._textCase==t.TextInputCase.DEFAULT?n.textInputCase:this._textCase){case t.TextInputCase.LOWER:this._editor.style.textTransform="lowercase";break;case t.TextInputCase.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}},i.prototype.getEditText=function(){return this._editor.value},i.prototype.setEditValue=function(t){e.prototype.setEditValue.call(this,t),this._editor.value=this._valToStr(t)},i.prototype.getEditValue=function(e,i){void 0===e&&(e=!0);var o=this._editField(),n=this._emptyValue;try{var r=o.dataType,s=this._editor.value;if(r==t.ValueType.TEXT)s||void 0===this._emptyValue||(s=this._emptyValue),void 0===(n=this._strToVal(s))&&(n="");else{if(r===t.ValueType.OBJECT){var a=this._editIndex.dataColumn.objectKey||o.objectKey,l=this._editIndex.item.getData(o.index)||{};return l[a]=s,l}if(xt.isWhiteSpace(s))if(void 0!==this._emptyValue)n=this._strToVal(this._emptyValue);else switch(r){case t.ValueType.NUMBER:isNaN(this._oldValue)&&(n=NaN);break;case t.ValueType.DATETIME:null===this._oldValue&&(n=null);case t.ValueType.BOOLEAN:}else n=this._strToVal(s)}if(n===pa.InvalidFormat)return n;n=o.readValue(n)}catch(t){if(e)throw t;n=this._emptyValue}return n},i.prototype._selectAll=function(){var t=this._editor;if(t.select&&t.value){var e=t.value;t.value="",t.value=e,t.select()}},i.prototype._setSelectionRange=function(t,e){try{var i=this._editor;(!xt.isMobile()||!this.hasList)&&null!=i.selectionStart&&i.setSelectionRange(t,e)}catch(t){xt.log("setSelectionRange fail type => ".concat(this._editor.getAttribute("type")))}},i.prototype._doBeginEdit=function(){if(this._modified=!1,this.visible)return xt.isMobile()&&this.caretToLast(),!0},i.prototype._doEndEdit=function(){this._modified=!1},i.prototype._doCommit=function(){},i}(pa),ya=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._doDispose=function(){this._editor.$_owner=null,this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._editor.value},set:function(t){!this._editor||t==this._editor.value&&t==this._controller.getData(this._editIndex)||(this._editor.value=t,this._doChanged())},enumerable:!1,configurable:!0}),e.prototype.setMask=function(t){this._mask=null,t&&(this._mask=new fa(this,t))},e.prototype.setAlignment=function(t){this._container.style.textAlign="left"},e.prototype._createContainer=function(t){var e=t.createElement("div"),i=e.style;return e.spellcheck=!1,e.setAttribute("aria-hidden","true"),i.position="absolute",i.width="0px",i.height="0px",i.padding="0px",i.margin="0px",e},e.prototype._createEditor=function(t){var e=wt(t);this._container=this._createContainer(e),t.appendChild(this._container);var i=e.createElement("input"),o=i.style;i.setAttribute("aria-hidden","true"),i.autocomplete="off",o.position="absolute",o.boxSizing="border-box",o.margin="0px",o.padding="0px 2px",o.wordWrap="normal",o.overflow="hidden",o.resize="none",o.border="none",o.outline="none",o.left="0px",o.top="0px",o.width="100%",o.height="100%",o["-webkit-user-modify"]="read-write-plaintext-only",o["white-space"]="pre",o["-webkit-transform"]="translateZ(0)",i.tabIndex=-1,i.onkeydown=this._keyDownHandler.bind(this),i.onkeyup=this._keyUpHandler.bind(this),i.onkeypress=this._keyPressHandler.bind(this),i.oninput=this._inputHandler.bind(this),i.onpaste=this._pasteHandler.bind(this),i.oncopy=this._copyHandler.bind(this);var n=this._grid.container;return n.$_addListener(i,"compositionstart",this._compositionstartHandler.bind(this),!1),n.$_addListener(i,"compositionupdate",this._compositionupdateHandler.bind(this),!1),n.$_addListener(i,"compositionend",this._compositionendHandler.bind(this),!1),n.$_addListener(i,"text",this._textHandler.bind(this),!1),this._container.appendChild(i),this._defMaxLength=i.maxLength>0?i.maxLength:1e6,i},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._editor.readOnly=this._readOnly=!1,this._mask&&(this._mask=this._mask.dispose())},e.prototype.applyOptions=function(e){t.prototype.applyOptions.call(this,e),e.mask&&this.setMask(e.mask)},e.prototype.caretToLast=function(){var t=xt.toStr(this._editor.value).length;this._setSelectionRange(t,t)},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLength>0?this.maxLength:this._defMaxLength},e.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},e.prototype._doChanged=function(){this._requestStart(),this._started&&(this._textReadOnly||!this._editor.readOnly||this.allowEmpty&&""===this.text)&&(this._modified=!0,this._dispatchChange())},e.prototype.setBounds=function(t,e,i,o,n){xt.setBounds(this._container,t,e,i,o),0==i||0==o?this._editor.style.width="100%":n>0&&(this._editor.style.height=Math.round(o-4)+"px",this._editor.style.width=n+"px")},e.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._editor,i=t.keyCode;if((xt.isIE||xt.isEdge)&&!this.visible&&t.ctrlKey&&90==i)return!1;if(xt.isIE&&t.ctrlKey&&86==t.keyCode&&e.readOnly)return t.preventDefault(),this._pasteHandler(t),!1;if(xt.isIE&&t.ctrlKey&&(67==t.keyCode||45==t.keyCode)&&""==this._editor.value)return t.preventDefault(),void wt(this._editor).execCommand("copy");switch(this._inputValue=e.value,i){case 8:case 46:this._sendToParent(t)||(!this.visible&&this._requestStart()?e.readOnly&&!this.allowEmpty||!this._controller._getData(this._editIndex)||(this._mask?(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()):this.text=""):this._mask&&(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()),8===i&&e.readOnly&&(t.preventDefault(),t.stopImmediatePropagation()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);if(e.readOnly&&xt.isChrome)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 39:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);if(e.readOnly&&xt.isChrome)return!this._sendToParent(t);if(!(t.altKey||t.ctrlKey||t.shiftKey)&&this._mask&&this._mask.restrictNull){var o=e.selectionStart;this._mask._moveCaret(o+1,o+1)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case 36:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 35:if(!this.visible)return!this._sendToParent(t);if(this._mask&&this._mask.restrictNull){var n=e.value?e.value.length-1:0;this._mask._moveCaret(n,n)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(t);break;case 38:case 33:case 40:case 34:case 13:case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:this._sendToParent(t);break;default:return!this._sendToParent(t,null,!0)}return xt.isFirefox?!t.ctrlKey&&!t.altKey&&229!==i&&i>=32&&(i<112||i>130)&&this._requestStart():xt.isIE,!0}},e.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var e=t.keyCode;switch(8!=e&&46!=e||xt.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},e.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var e=t.which||t.keyCode;this._sendToParent(t,2),xt.isFirefox?t.ctrlKey||t.altKey||!(0==e||e>=32)||(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault()):xt.isMac&&t.metaKey&&(122===e||121===e)?t.preventDefault():xt.isMac&&t.metaKey&&(99===e||118===e)||e>=32&&(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault())}},e.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},e.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this._checkHangeul=!0))},e.prototype._compositionendHandler=function(){this._composing=!1},e.prototype._compositionupdateHandler=function(){this._composing=!0},e.prototype._changeHandler=function(t){},e.prototype._inputHandler=function(t){this.isDisabled()||xt.isIE&&!this._started||"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&(this._mask&&this._mask.input(t),this._doChanged())},e.prototype._pasteHandler=function(t){if(!this.isDisabled()){var e=this._grid.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;if(null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))){if(this.visible){if(this._mask){t.preventDefault();var n=this._editor,r=n.value,s=n.selectionStart,a=n.selectionEnd;r=r.substr(0,s)+i+r.substr(a),n.value=this._mask.writeBuffer(r,!0)}return void this._doChanged()}t.preventDefault(),this._grid.pasteFromClipboard(i,t)}}catch(t){if(t instanceof hr){if(e.throwValidationError)throw t}else if(t instanceof cr)alert(t.message);else if(t)throw t}}},e.prototype._copyHandler=function(t){pa.copyProc(this,t)},e.prototype._getInputSelector=function(){return null},e}(ga),_a=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),Object.defineProperty(e.prototype,"inputCharacters",{get:function(){return this._inputCharacters},set:function(t){t!=this._inputCharacters&&(this._inputCharacters=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ignoreCharacters",{get:function(){return this._ignoreCharacters},set:function(t){t!=this._ignoreCharacters&&(this._ignoreCharacters=t)},enumerable:!1,configurable:!0}),e.prototype.initOptions=function(){this._inputCharacters=null,this._ignoreCharacters=null,t.prototype.initOptions.call(this)},e.prototype._inputHandler=function(e){this.$_resetValue(),t.prototype._inputHandler.call(this,e)},e.prototype._keyDownHandler=function(e){return this._pStart=e.target.selectionStart,t.prototype._keyDownHandler.call(this,e)},e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.tabIndex=-1,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.$_resetValue=function(){var t,e,i=this._editor,o=i.value;this.visible&&((t=this.inputCharacters)&&(e=new RegExp("[^"+t+"]","g")).test(o)&&(i.value=o=o.replace(e,""),null!=this._pStart&&i.setSelectionRange(this._pStart,this._pStart)),(t=this.ignoreCharacters)&&(e=new RegExp("["+t+"]","g")).test(o)&&(i.value=i.value.replace(e,""),null!=this._pStart&&i.setSelectionRange(this._pStart,this._pStart)),this._pStart=null)},e.INPUT_CSS="rg-text-editor",e}(ya),ma=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.setAttribute("type","password"),i.tabIndex=-1,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.prepare=function(){},e.INPUT_CSS="rg-password-editor",e}(ya),va=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype._doDispose=function(){this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"altEnterNewLine",{get:function(){return this._altEnterNewLine},set:function(t){t!=this._altEnterNewLine&&(this._altEnterNewLine=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._editor.value},enumerable:!1,configurable:!0}),e.prototype.setAlignment=function(t){this._container.style.textAlign="left"},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._minHeight=0,this._height=0,this._altEnterNewLine=!1,this._editor.style.setProperty("overflow","hidden"),this.setReadOnly(!1)},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLength>0?this.maxLength:2e9},e.prototype.setCellEditValue=function(e){t.prototype.setCellEditValue.call(this,e,!1)},e.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},e.prototype._doChanged=function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this.$_resetBounds())},e.prototype.$_resetBounds=function(){var t,e=xt.getClientRect(this._container);this._height<0?(t=this._grid.getEditCellBounds(this,this._editIndex).height,t+=xt.isMobile()?3:1):this._height>0&&(t=this._height);var i=e.cx,o=e.cy,n=e.width,r=Math.round(e.height);this._editor.scrollWidth>n&&(n=this._editor.scrollWidth+6),t?(this._editor.style.overflow="auto",r=t):this._editor.scrollHeight>r&&(r=this._editor.scrollHeight+6);var s=isNaN(this._minHeight)?0:this._minHeight;s>0&&(r=Math.max(r,s)),e=xt.getClientRect(this._parentElement),n=Math.min(e.width,n),r=Math.min(e.height,r),i+n>e.width&&(i=e.width-n),o+r>e.height&&(o=e.height-r),xt.setBounds(this._container,Math.max(i,0),Math.max(o,0),n,r)},e.prototype.$_createContainer=function(t){var e=t.createElement("div"),i=e.style;return e.spellcheck=!1,e.setAttribute("aria-hidden","true"),i.position="absolute",i.width="0px",i.height="0px",i.padding="0px",i.margin="0px",e},e.prototype._createEditor=function(t){var e=wt(t);this._container=this.$_createContainer(e),t.appendChild(this._container);var i=e.createElement("textarea"),o=i.style;i.autocomplete="off",i.setAttribute("aria-hidden","true"),o.position="absolute",o.margin="0px",o.padding="0px",o.wordWrap="normal",o.overflow="hidden",o.resize="none",o.border="none",o.outline="none",o.left="0px",o.top="0px",o.width="100%",o.height="100%",o["-webkit-user-modify"]="read-write-plaintext-only",o["white-space"]="pre",o["-webkit-transform"]="translateZ(0)",i.tabIndex=-1,i.onkeydown=this._keyDownHandler.bind(this),i.onkeyup=this._keyUpHandler.bind(this),i.onkeypress=this._keyPressHandler.bind(this),i.oninput=this._inputHandler.bind(this),i.onpaste=this._pasteHandler.bind(this),i.oncopy=this._copyHandler.bind(this);var n=this._grid.container;return n.$_addListener(i,"compositionstart",this._compositionstartHandler.bind(this),!1),n.$_addListener(i,"compositionupdate",this._compositionupdateHandler.bind(this),!1),n.$_addListener(i,"compositionend",this._compositionendHandler.bind(this),!1),n.$_addListener(i,"text",this._textHandler.bind(this),!1),this._container.appendChild(i),i},e.prototype.setBounds=function(t,e,i,o){xt.setBounds(this._container,t,e,i,o),t>xt.$_INVISIBLE_EDIT_BOUNDS.x&&this.$_resetBounds()},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},e.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart())},e.prototype._compositionendHandler=function(){this._composing=!1},e.prototype._compositionupdateHandler=function(){this._composing=!0},e.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._editor,i=t.keyCode;if((xt.isIE||xt.isEdge)&&!this.visible&&t.ctrlKey&&90==i)return!1;if(xt.isIE&&t.ctrlKey&&(67==t.keyCode||45==t.keyCode)&&""==this._editor.value)return t.preventDefault(),void wt(this._editor).execCommand("copy");switch(i){case 8:case 46:this._sendToParent(t)||!this.visible&&this._requestStart()&&(t.preventDefault(),t.stopImmediatePropagation(),!this._editor.readOnly&&this._controller.getData(this._editIndex)&&(this._editor.value="",this._modified=!0,this._dispatchChange()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case 39:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case 36:case 35:case 38:case 33:case 40:case 34:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(t);break;case 13:var o=t.ctrlKey||xt.isMac&&t.metaKey;if(this.altEnterNewLine){if(!(t.altKey&&this.editing||t.shiftKey))return!this._sendToParent(t)}else if(!(o&&this.editing||t.shiftKey))return!this._sendToParent(t);if((this.altEnterNewLine&&t.altKey||!this.altEnterNewLine&&o)&&!t.shiftKey){t.preventDefault(),t.stopImmediatePropagation();var n=e.value;if(n){var r=e.selectionEnd;n=n.substring(0,r)+"\r\n"+n.substring(r),e.value=n,e.setSelectionRange(r+1,r+1),this._doChanged()}}break;case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:break;default:return this._sendToParent(t,null,!0),!0}return t.keyCode,!0}},e.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var e=t.keyCode;switch(8!=e&&46!=e||xt.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},e.prototype._keyPressHandler=function(t){var e=t.which||t.keyCode;this.isDisabled()||(xt.isMac&&t.metaKey&&(122===e||121===e)?t.preventDefault():xt.isMac&&t.metaKey&&(99===e||118===e)||e>=32&&!this._requestStart()&&t.preventDefault())},e.prototype._inputHandler=function(t){this.isDisabled()||"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&this._doChanged()},e.prototype._pasteHandler=function(t){if(!this.isDisabled())if(this.visible)this._doChanged();else{t.preventDefault();var e=this._grid.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))&&this._grid.pasteFromClipboard(i,t)}catch(t){if(t instanceof hr){if(e.throwValidationError)throw t}else if(t instanceof cr)alert(t.message);else if(t)throw t}}},e.prototype._copyHandler=function(t){pa.copyProc(this,t)},e.INPUT_CSS="rg-multiline-editor",e}(ga),ba=".",Ca=",",wa=/[---]/g,Sa=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._addString="000",o._maxIntegerLength=0,o._step=1,o._delay=100,o._regxAll=/[\d]|,|\.|\-|\+|e|E/,o._regxPos=/[\d]|,|\.|\+|e|E/,o._regxInt=/[\d]|,|\+|\-/,o._regxPosInt=/[\d]|,|\+/,o._regx=o._regxAll,o._decLen=void 0,o._decimalFormatter=void 0,o._isMultiple=!1,o._decSep=ba,o._groupSep=Ca,o._active=!1,o._stepChanged=!1,o._editor.style["ime-mode"]="disabled",o._editor.style["-webkit-ime-mode"]="disabled",o._editor.style["-moz-ime-mode"]="disabled",o._editor.style["-ms-ime-mode"]="disabled",o}return n(e,t),Object.defineProperty(e.prototype,"positiveOnly",{get:function(){return this._positiveOnly},set:function(t){t!=this._positiveOnly&&(this._positiveOnly=t,this.$_resetRistrict())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"integerOnly",{get:function(){return this._integerOnly},set:function(t){t!=this._integerOnly&&(this._integerOnly=t,this.$_resetRistrict())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editFormat",{get:function(){return this._editFormat},set:function(t){if(t!=this._editFormat)if(this._editFormat=t,t){var e=this._decimalFormatter=new We(t);e&&(this._decSep=e.separator?e.separator:ba,this._groupSep=e.groupSep?e.groupSep:Ca,this._decLen=Math.max(e.minDigits,e.maxDigits))}else this._decimalFormatter=void 0,this._decSep=ba,this._groupSep=Ca,this._decLen=void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multipleChar",{get:function(){return this._multipleChar},set:function(t){t!=this._multipleChar&&(this._multipleChar=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"addString",{get:function(){return this._addString},set:function(t){t!=this._addString&&(this._addString=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLengthExceptComma",{get:function(){return this._maxLengthExceptComma},set:function(t){t!=this._maxLengthExceptComma&&(this._maxLengthExceptComma=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxIntegerLength",{get:function(){return this._maxIntegerLength},set:function(t){t!=this._maxIntegerLength&&(this._maxIntegerLength=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blankWhenSpace",{get:function(){return this._blankWhenSpace},set:function(t){t!=this._blankWhenSpace&&(this._blankWhenSpace=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){t!==this._step&&0!=t&&(this._step=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){t!==this._delay&&(this._delay=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showStepButton",{get:function(){return this._showStepButton},set:function(t){this._showStepButton=t},enumerable:!1,configurable:!0}),e.prototype.setMask=function(t){this._mask=null},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this.editFormat=void 0,this._positiveOnly=!1,this._integerOnly=!1,this._multipleChar=void 0,this._addString="000",this._blankWhenSpace=!1,this._maxLengthExceptComma=!1,this._maxIntegerLength=0,this._step=1,this._min=this._max=void 0,this._delay=100,this._active=!1,this._direction="vertical",this._showStepButton=!1,this._textReadOnly=!1,this.$_resetRistrict()},e.prototype.hasButton=function(t,e){return null!=e.showStepButton&&e.showStepButton},Object.defineProperty(e.prototype,"buttonCount",{get:function(){return 2},enumerable:!1,configurable:!0}),e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLengthExceptComma||this.maxLength<=0?this._defMaxLength:this.maxLength},e.prototype._inputHandler=function(e){e.data&&e.data.match(wa)?e.target.value=this._inputValue:(this._editFormat&&this.$_editFormatting(e),t.prototype._inputHandler.call(this,e))},e.prototype._keyPressHandler=function(e){if(!xt.isFirefox||!e.ctrlKey&&0!==e.charCode){var i=!0,o=String.fromCharCode(e.keyCode||e.charCode);(!this._regx.test(o)||e.target.value&&e.target.value.indexOf(this._decSep)>=0&&o==this._decSep)&&(this._multipleChar&&o===this._multipleChar||(i=!1,(!this.blankWhenSpace||" "!==o)&&e.preventDefault()));var n=e.target.selectionStart,r=e.target.selectionEnd,s=e.target.value,a=new RegExp("\\"+this._groupSep,"g"),l=s?s.split(""):[];if(l.splice(n,r-n,o===this._multipleChar?this._addString:o),l=l.join("").replace(a,""),this.maxLength>0&&i&&this.maxLengthExceptComma&&s){var u=l&&"-"===l[0];u&&(l=l.substr(1)),l.length>this.maxLength&&e.preventDefault(),l=u?"-"+l:l}if(this._maxIntegerLength>0&&o!==this._decSep){var c=Math.floor(this.$_strToNum(l));if(!isNaN(c)){var h=Math.abs(c).toString().length;this._maxIntegerLength<h&&e.preventDefault()}}this._isMultiple=o==this._multipleChar,t.prototype._keyPressHandler.call(this,e)}else t.prototype._keyPressHandler.call(this,e)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=e.keyCode||e.charCode;if(this._isMultiple=!1,(8===i||46===i)&&this.editing&&this._editFormat){var o=e.target,n=o.value,r=n.length,s=n&&n.split(""),a=o.selectionStart,l=o.selectionEnd;if(a!==l)return t.prototype._keyDownHandler.call(this,e);var u=n[8===i?a-1:a];if(u===this._groupSep||u===this._decSep)if(u===this._decSep&&a===(8===i?n.length:n.length-1));else{s.splice(8===i?a-2:a+1,1),o.value=s.join(""),this.$_editFormatting(e),n=o.value;var c=r-(8===i?n.length:r);o.setSelectionRange(a-c,l-c),this._doChanged(),e.preventDefault()}}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._compositionstartHandler=function(t){this.isDisabled()||this._requestStart()},e.prototype._dispatchChange=function(){this.visible&&(this.$_resetValue(),t.prototype._dispatchChange.call(this))},e.prototype.setEditValue=function(t){var e=parseFloat(t);isNaN(e)?this._editor.value="":this._editFormat&&"number"==typeof e?this._editor.value=this.$_formatNum(e,this._decimalFormatter.minDigits,this._decimalFormatter._maxDigits):this._editor.value=e},e.prototype.getEditValue=function(t,e){void 0===t&&(t=!0),this.$_resetValue();var i=this._emptyValue;try{var o=this._editor.value;if(o=o&&o.trim()){var n=new RegExp("\\"+this._groupSep,"g"),r=new RegExp("[\\"+this._decSep+"]+","g");o=(o=(o=(o=(o=(o=o.replace(n,"")).replace(r,".")).replace(/\++/g,"+")).replace(/\-+/g,"-")).replace(/\+\-/g,"+")).replace(/\-\+/g,"-")}i=o?parseFloat(o):null!=i?i:void 0}catch(e){if(t)throw e}return i},e.prototype.setCellEditValue=function(t){!this.readOnly&&this._requestStart()&&("string"!=typeof t&&"number"!=typeof t||(t=this.$_strToNum(t),this.setEditValue(t),this._doChanged()))},e.prototype.buttonDown=function(t,e){var i,o=e.target;xt.stopEvent(e),"up"===o.$_editButtonType?i=this.step:"down"===o.$_editButtonType&&(i=-this.step),i&&(this.$_changeStepValue(i),this._active=!0,setTimeout(function(){this._active&&!this._stepTimer&&(this._stepTimer=setInterval(function(){this.$_changeStepValue(i)}.bind(this),this._delay))}.bind(this),300))},e.prototype.buttonUp=function(t,e){this._active=!1,clearInterval(this._stepTimer),this._stepTimer=null},e.prototype.setButtonStyle=function(t,e,i,o,n){var r=t.style;i?(0===e?r.top="0px":r.removeProperty("top"),0===e?r.removeProperty("bottom"):r.bottom="0px",r.right=o+"px",r.height="9px"):(r.top="0px",r.removeProperty("bottom"),r.right=o+n*e+"px",r.height="100%"),r.width=n+"px";var s=0===e?"rg-button-step-up":"rg-button-step-down";return t.className=s,t.$_editButtonType=0===e?"up":"down",!0},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.setFocus=function(){!this._stepChanged&&t.prototype.setFocus.call(this)},e.prototype.$_strToNum=function(t){t=""+t;var e=new RegExp("\\"+this._decSep,"g"),i=new RegExp("\\"+this._groupSep,"g"),o="-"===t[0];t=t.replace(i,"").replace(e,".").replace(/\+/g,"");var n=parseFloat(t);return isNaN(n)?NaN:o?-Math.abs(n):n},e.prototype.$_formatNum=function(t,e,i){var o=t,n=o<0||0==o&&1/o==-1/0?"-":"",r=Math.max(e,i);r=isNaN(r)?2:r;var s=parseInt(o=Math.abs(+o||0).toFixed(r))+"",a=s.length>3?s.length%3:0;if(o.indexOf(".")>=0){for(var l=o.split(".")[1].split("");l.length>0&&"0"===l[l.length-1]&&l.length>e;)l.splice(l.length-1,1);o=l.join(""),r=l.length}return n+(a?s.substr(0,a)+this._groupSep:"")+s.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+this._groupSep)+(r?this._decSep+o:"")},e.prototype.$_editFormatting=function(t){var e=t.target.value,i=e&&"-"===e[0],o=e&&e[e.length-1]==this._decSep,n=t.target.selectionStart,r=t.target.selectionEnd;this._isMultiple&&this._addString&&(e=e.replace(new RegExp("\\"+this._multipleChar,"gi"),this._addString),n+=this._addString.length,r+=this._addString.length);var s,a=e.split(this._decSep);a.length>1&&(a.length=2,a[1]=a[1].substr(0,this._decimalFormatter._maxDigits),e=a.join(this._decSep)),s=2==a.length?Math.min(a[1].length,null!=this._decLen?this._decLen:99):0;var l=this.$_strToNum(e);if(!isNaN(l)){if(this.maxLength>0||this.maxIntegerLength>0){l=Math.abs(l);var u=String(l).split(".");this.maxIntegerLength>0&&(u[0]=u[0].substr(0,this.maxIntegerLength));var c=u.join(".");this.maxLength>0&&(c=c.substr(0,this.maxLength)),l=parseFloat(c),i&&(l=-l)}e=this.$_formatNum(l,s,this._decimalFormatter.maxDigits);var h=(e=o&&this._decLen&&e.indexOf(this._decSep)<0?e+this._decSep:e).length,p=t.target.value.length;1==Math.abs(h-p)&&(h>p?(n++,r++):e.indexOf(this._decSep)>=n-1&&(n--,r--)),t.target.value=e,t.target.setSelectionRange(n,r)}},e.prototype.$_resetValue=function(){if(this.visible){var t=this._editor,e=t.selectionStart,i=t.selectionEnd,o=t.value?t.value.length:0;t.value=t.value.replace(wa,"").trim(),(t.value?t.value.length:0)==o?t.setSelectionRange(e,i):t.setSelectionRange(i,i)}},e.prototype.$_resetRistrict=function(){this._positiveOnly&&this._integerOnly?this._regx=this._regxPosInt:this._positiveOnly?this._regx=this._regxPos:this._integerOnly?this._regx=this._regxInt:this._regx=this._regxAll},e.prototype.$_changeStepValue=function(t){var e=this.getEditValue();e=null==e||e==isNaN(e)?0:e,e+=t,null!=this._max&&(e=Math.min(this._max,e)),null!=this._min&&(e=Math.max(this._min,e)),this.setEditValue(e),this._stepChanged=!0,this._doChanged(),this._stepChanged=!1},e.INPUT_CSS="rg-number-editor",e}(ya),Ea=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-editor-marquee"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.pointerEvents="none"},e.prototype._doDraw=function(t){},e.prototype.spread=function(){var t=this._dom,e=t.style,i=t.parentElement.getBoundingClientRect();e.left=i.left+"px",e.top=-i.top+"px",e.width=i.width+"px",e.height=i.height+"px",this._setClassName(t)},e}(Ys),xa=function(t){function e(e,i){var o=t.call(this,e,i)||this;if(o._isMobile){var n=wt(i);o._marquee=new Ea(n)}return o}return n(e,t),e.prototype.hasButton=function(t,e){return!0},Object.defineProperty(e.prototype,"buttonCount",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasList",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype._showMarquee=function(t){this._marquee&&(t.appendChild(this._marquee._dom),this._marquee.spread())},e.prototype._centerPopup=function(t,e){var i=e.getBoundingClientRect(),o=t.getBoundingClientRect(),n=Ct(t).innerHeight;t.appendChild(e),e.style.left=(o.width-i.width)/2+"px",e.style.top=(n-i.height)/2-o.top+"px"},e.prototype._closeMarquee=function(){this._marquee&&xt.detach(this._marquee._dom)},e.prototype._isMarquee=function(t){return this._marquee&&t===this._marquee._dom},Object.defineProperty(e.prototype,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){this._setAllowEmpty(t)},enumerable:!1,configurable:!0}),e}(ya);t.DropDownPosition=void 0,(Qs=t.DropDownPosition||(t.DropDownPosition={})).BUTTON="button",Qs.EDITOR="editor",t.DropDownSortStyle=void 0,(Js=t.DropDownSortStyle||(t.DropDownSortStyle={})).NONE="none",Js.ASCENDING="ascending",Js.DESCENDING="descending",t.DropDownValueLabel=void 0,(Zs=t.DropDownValueLabel||(t.DropDownValueLabel={})).VALUE="value",Zs.LABEL="label",Zs.VALUE_LABEL="valueLabel",Zs.LABEL_VALUE="labelValue";var Oa=function(e){function i(o){var n=e.call(this)||this;return n._minWidth=0,n._maxWidth=0,n._dropDownCount=8,n._caseSensitive=!1,n._partialMatch=!1,n._sortStyle=t.DropDownSortStyle.NONE,n._items=null,n._itemIndex=-1,n._dropDownPosition=t.DropDownPosition.BUTTON,n._dropDownWidth=-1,n._displayLabels=null,n._separator=null,n._itemColumned=!1,n._viewGridInside=!1,n._trimLabelText=!0,n._initCount=0,n._moreItemCount=25,n._moreText=null,n._selected=!1,n._clickHandler=function(t){var e=t.currentTarget,o=xt.getChildIndex(e);o>=0&&(this._itemIndex=o,this._selected=!0,this.fireEvent(i.CLOSE_UP,!0))}.bind(n),n._nextClickHandler=function(t){var e=t.currentTarget;this.$_addMoreItems(e)}.bind(n),n._container=o,n._element=n._createList(o.doc),n}return n(i,e),i.prototype._doDispose=function(){this._container=null,this._containerElement=null,this._items=null,xt.clearElements(this._element),this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortStyle",{get:function(){return this._sortStyle},set:function(t){t!=this._sortStyle&&(this._sortStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items},set:function(t){if(this._items=[],t)for(var e=0,i=t.length;e<i;e++)this._items.push({label:t[e].label,value:t[e].value,index:e})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!==this._displayLabels&&(this._displayLabels=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewGridInside",{get:function(){return this._viewGridInside||xt.isSlotMode()},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return 0==this.initCount?this._items&&this._items.length:this._element.children.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueIndex",{get:function(){var t=this._items,e=this._itemIndex;return t&&e>=0&&e<t.length?t[e].index:-1},set:function(t){if(t=Math.max(-1,t),this._itemIndex=-1,t>=0)for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].index==t){this._itemIndex=t;break}this.listing&&this._refreshItems()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},enumerable:!1,configurable:!0}),i.prototype.setItemIndex=function(t,e,i){var o=this._element.childNodes;if((t=Math.max(-1,t))<this._items.length&&(e||t!=this._itemIndex||t>=o.length-1)){if(i&&t>=o.length-1){var n=o[o.length-1];if(n.isMoreButton){var r=t-(o.length-1);r=(Math.floor(r/this.moreItemCount)+1)*this.moreItemCount,this.$_addMoreItems(n,r)}}this._itemIndex=t,this.listing&&this._refreshItems(),this._selected=t>=0}},i.prototype.setZIndex=function(t){this._element.style.zIndex=String(t)},i.prototype.show=function(e,i,o,n,r){this._containerElement=this.viewGridInside?this._container._container:e,this._sortStyle!=t.DropDownSortStyle.NONE&&this.$_sortItems(),this._show(i,o,n,r)},i.prototype.hide=function(){xt.detach(this._element),this._containerElement=null},i.prototype.currentIsMore=function(t){var e=this._element.childNodes[null!=t?t:this._itemIndex];return e&&e.isMoreButton},i.prototype.addMoreItems=function(){if(this.currentIsMore(null)){var t=this._element.childNodes[this._itemIndex];this.$_addMoreItems(t,0)}},i.prototype._changed=function(){},i.prototype._createList=function(t){var e=t.createElement("div");return e.className="rg-dropdownlist",e.id="rg-dropdown-list-"+Ra.$$_LIST_ID++,e.setAttribute("role","listbox"),e},i.prototype.$_sortItems=function(){this._sortStyle==t.DropDownSortStyle.ASCENDING?this._items.sort((function(t,e){return t.label<e.label?-1:t.label>e.label?1:0})):this._items.sort((function(t,e){return t.label>e.label?-1:t.label<e.label?1:0}))},i.prototype._show=function(t,e,i,o){var n=this._element;if(n){var r=n.style;r.position="absolute",r.cssFloat="none",r.clear="both",r.boxSizing="border-box",r.minWidth="20px",r.minHeight="10px",r.overflow="auto",this._firstChild=null,xt.clearChildren(n),xt.disableSelection(n),this._containerElement.appendChild(n),this._cellWidth=i,this._editBounds=o,r.width="10px",this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),this._selected=!1}},i.prototype._getListElement=function(){return this._element},i.prototype.$_resetHeight=function(){var t=this._getListElement();if(this._firstChild){var e=Ct(this._firstChild),i=xt.getClientRect(this._firstChild),o=this._firstChild.currentStyle||e.getComputedStyle(this._firstChild),n=parseInt(o.marginTop.replace("px",""));n=isNaN(n)?0:n;var r=parseInt(o.marginBottom.replace("px",""));r=isNaN(r)?0:r;var s=this._dropDownCount>0?Math.min(this._dropDownCount,this._items.length):this._items.length;t.style.height=(i.height+n)*s+4+r+"px"}else t.style.height="10px"},i.prototype._resetWidth=function(t){var e=this._element,i=xt.getClientRect(e),o=this._dropDownWidth,n=o,r=e.offsetWidth?e.offsetWidth+(xt.ieOld&&"border-box"===e.style.boxSizing?17:0):0;n<0?n=t:0==n&&(n=10),e.style.width=n+"px";var s=0;if(this._firstChild){var a=Ct(this._firstChild),l=this._firstChild.currentStyle||a.getComputedStyle(this._firstChild),u=parseInt(l.marginLeft.replace("px",""));u=isNaN(u)?0:u;var c=parseInt(l.marginRight.replace("px",""));c=isNaN(c)?0:c;for(var h=e.childNodes,p=0;p<h.length;p++)s=Math.max(s,h[p].scrollWidth);s+=e.offsetWidth-e.clientWidth+u+c+2}o<0&&(s=Math.max(s,n));var d=xt.getBrowserSize();n=s=Math.min(s,d.width),xt.ieOld&&(o>=0||s>n)&&(n+=20),n<i.width?e.style.overflowX="hidden":e.style.overflowX="auto",e.style.width=Math.max(n,r)+"px"},i.prototype.$_resetPosition=function(e,i,o,n){var r=wt(this._element),s=Ct(this._element),a=xt.getBrowserSize(),l=xt.getClientRect(this._containerElement),u=xt.getClientRect(this._container._container),c=a.width,h=a.height,p=xt.getClientRect(this._element),d=s.pageXOffset||r.documentElement.scrollLeft,f=s.pageYOffset||r.documentElement.scrollTop;r.documentElement.scrollWidth>r.documentElement.clientWidth&&(h-=18),r.documentElement.scrollHeight>r.documentElement.clientHeight&&(c-=18),e+=u.left-l.left,i+=u.top-l.top,(xt.ieTen||xt.ieOld||xt.ieLeg)&&(e+=r.documentElement.scrollLeft,i+=r.documentElement.scrollTop),i+p.height>h+f&&n&&(i=i-n.height-p.height)<0&&(i=h-p.height-2),this._dropDownPosition!=t.DropDownPosition.EDITOR?e=Math.max(0,e+o-p.width):e+p.width>c+d&&(e=c-p.width),!xt.isMobile()&&this.viewGridInside&&n&&(i=n.bottom-l.top+2,(l.bottom<n.bottom+p.height||h+f<n.bottom+p.height)&&(i=n.top-p.height-l.top-2)),xt.isMobile()&&!xt.isTablet()||this._element.offsetParent||(e+=r.documentElement.offsetLeft,i+=r.documentElement.offsetTop),xt.move(this._element,Math.max(0,e),Math.max(0,i))},i.prototype._resetItems=function(t,e,i,o){xt.clearChildren(this._element),this._firstChild=null,this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},i.prototype._buildItems=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o,n=wt(this._element),r=0,s=function(t,e){var i=e&&e.value?e.value.toString():"",o=n.createElement("span");return o.style.whiteSpace="pre",o.innerHTML=i?xt.htmlEncode(i):"&nbsp;",o.tabIndex=-1,o.className="rg-dropdown-value",xt.disableSelection(o),t.appendChild(o),o},a=function(t,e){var i=e&&e.label?e.label.toString():"";i=this._trimLabelText?i.trim():i;var o=n.createElement("span");return!this._trimLabelText&&(o.style.whiteSpace="pre"),o.innerHTML=i?xt.htmlEncode(i):"&nbsp;",o.tabIndex=-1,o.className="rg-dropdown-label",xt.disableSelection(o),t.appendChild(o),o}.bind(this),l=function(t,e){var i=n.createElement("span");i.style.whiteSpace="pre",i.innerHTML=e?xt.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-seperator",xt.disableSelection(i),t.appendChild(i)},u=function(t){var e=xt.getTextLength(t.textContent);e>r&&(o=t,r=e)},c=this._items,h=i||(this._element.children.length>0?this.moreItemCount:this.initCount);if(c&&!(c.length<1)){for(var p=e,d=c.length;p<d;p++){if(this._initCount&&p-e>=h&&p<d){var f=n.createElement("div"),g=f.style;g.position="relative",g.cssFloat="none",g.paddingTop="1px",g.paddingBottom="1px",g.paddingLeft="2px",g.paddingRight="2px",g.whiteSpace="nowrap",g.cursor="pointer",g.textAlign="center",xt.disableSelection(f),f.nextIndex=p,f.onclick=this._nextClickHandler,f.isMoreButton=!0,f.className="rg-dropdown-more",a(f,{label:this.moreText}),this._element.appendChild(f);break}var y=c[p],_=n.createElement("div");_.setAttribute("role","option"),_.id=this._element.id+"-"+p.toString();var m=_.style;m.position="relative",m.cssFloat="none",m.paddingTop="1px",m.paddingBottom="1px",m.paddingLeft="2px",m.paddingRight="2px",m.whiteSpace="nowrap",m.cursor="default",_.className=p==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",p===this._itemIndex?_.setAttribute("aria-selected","true"):_.removeAttribute("aria-selected"),xt.disableSelection(_),this._element.appendChild(_),0==p&&(this._firstChild=_),_.onclick=this._clickHandler;var v=null;switch(this.displayLabels){case t.DropDownValueLabel.LABEL:a(_,y);break;case t.DropDownValueLabel.VALUE:s(_,y);break;case t.DropDownValueLabel.LABEL_VALUE:v=a(_,y),l(_,this._separator),s(_,y);break;case t.DropDownValueLabel.VALUE_LABEL:v=s(_,y),l(_,this._separator),a(_,y)}v&&this._itemColumned&&u(v)}if(this._itemColumned&&o){var b=Math.ceil(o.getBoundingClientRect().width);for(p=0,d=this._element.childNodes.length;p<d;p++)(v=this._element.childNodes[p].firstChild).style.display="inline-block",v.style.width=b+"px"}}},i.prototype.$_addMoreItems=function(t,e){var o=t.nextIndex;t.parentNode&&t.parentNode.removeChild(t),this._buildItems(o,e),this._resetWidth(this._cellWidth),this.fireEvent(i.EDITOR_FOCUS)},i.prototype._refreshItems=function(){for(var t=this._element.childNodes,e=0;e<t.length;e++)(o=t[e]).className=e==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",e==this._itemIndex?o.setAttribute("aria-selected","true"):o.removeAttribute("aria-selected"),e==this._itemIndex&&this.fireEvent(i.ACTIVE_DESCENDENT,o.id);var o,n=this._itemIndex;if(n>=0&&n<t.length)if((o=t[n]).offsetTop<this._element.scrollTop)this._element.scrollTop=o.offsetTop;else{var r=o.offsetTop+xt.getSize(o).height;r>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=r-this._element.clientHeight)}},i.prototype.$_search=function(t,e){void 0===e&&(e=!1);try{if(this._items&&this._items.length>0&&t){for(var i=this._items,o=i.length,n=this._caseSensitive?t:t.toLowerCase(),r=[],s=0;s<o;s++){if(c=i[s].label.toString())if(c=this._caseSensitive?c:c.toLowerCase(),this._partialMatch){for(var a="",l=0;l<c.length;l++){var u=xt.hangulToChosung(c[l]);a+=xt.hangulToChosung(n[l]).org?u.org:u.cho}if(a==n)return void this.setItemIndex(s,e,!0)}else if(c==n)return void this.setItemIndex(s,e,!0);r.push(c)}for(s=0;s<o;s++){var c=r[s];if(this._partialMatch){var h=!1;for(l=0;l<n.length;l++){var p=xt.hangulToChosung(c[l]);if(!(p.org&&p.org==n[l]||p.cho&&p.cho==n[l])){h=!1;break}h=!0}if(h)return void this.setItemIndex(s,e,!0)}else if(c&&0==c.indexOf(n))return void this.setItemIndex(s,e,!0)}for(s=0;s<o;s++)if(c=r[s],this._partialMatch){var d=xt.hangulToChosungAll(c),f=xt.hangulToChosungAll(n),g=d.indexOf(f);if(a=c.substr(0,g),~g){l=0;for(var y=g,_=n.length;l<_;l++,y++)u=xt.hangulToChosung(c[y]),a+=xt.hangulToChosung(n[l]).org?u.org:u.cho}if(a&&a.indexOf(n)>0)return void this.setItemIndex(s,e,!0)}else if(c&&c.indexOf(n)>0)return void this.setItemIndex(s,e,!0)}this.setItemIndex(-1)}finally{e&&(this._selected=!0)}},i.CLOSE_UP="onDropDownListCloseUp",i.EDITOR_FOCUS="onDropDownListEditorFocus",i.ACTIVE_DESCENDENT="onDropDownListActiveDescendant",i}(Ee),Ra=function(e){function i(i,o){var n=e.call(this,i,o)||this;n._values=null,n._items=null,n._labels=null,n._displayLabels=t.DropDownValueLabel.LABEL,n._domainOnly=!1,n._dropDownWidth=-1,n._dropDownPosition=t.DropDownPosition.BUTTON,n._dropDownCount=8,n._itemSortStyle=t.DropDownSortStyle.NONE,n._caseSensitive=!1,n._partialMatch=!1,n._commitOnSelect=!0,n._dropDownWhenClick=!1,n._trimLabelText=!0,n._separator=null,n._itemColumned=!1,n._lookup=!1,n._labeling=!1,n._domain=null,n._closing=!1,n._selectedIndex=-1,n._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(n);var r=n._list=n._createDropDown(i.container);return n._setEditorAria("aria-owns",r._element.id),n._setEditorAria("aria-expanded","false"),n._setEditorAria("aria-haspopup","true"),n._setEditorAria("role","combobox"),n._list.addListener(n),n}return n(i,e),i.prototype._doDispose=function(){this._globalMouseHandler=null,this._list.removeListener(this),this._list.dispose(),this._list=this._items=this._values=this._labels=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"values",{get:function(){return this._values},set:function(t){(t=xt.makeArray(t,!0))?this._values=t.map((function(t){return null!=t?String(t):t})):this._values=[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labels",{get:function(){return this._labels},set:function(t){this._labels=t?t.slice():[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!=this._displayLabels&&(this._displayLabels=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"domainOnly",{get:function(){return this._domainOnly},set:function(t){t!=this._domainOnly&&(this._domainOnly=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemSortStyle",{get:function(){return this._itemSortStyle},set:function(t){t!=this.itemSortStyle&&(this._itemSortStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._list.listing},enumerable:!1,configurable:!0}),i.prototype.dropDown=function(t){if(void 0===t&&(t=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var e=wt(this._container),i=Ct(this._container);if(this._grid,t||this._items&&this._items.length>0){var o=this._list,n=this._options,r=e.documentElement,s=xt.getClientRect(this._container);o.viewGridInside=n.viewGridInside,o.displayLabels=this.displayLabels,o.separator=this.separator,o.itemColumned=this.itemColumned,o.items=this._items,this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,o.caseSensitive=this._caseSensitive,o.partialMatch=this._partialMatch,o.dropDownCount=this._dropDownCount,o.dropDownWidth=this._dropDownWidth,o.dropDownPosition=this._dropDownPosition,o.sortStyle=this._itemSortStyle,o.valueIndex=this._selectedIndex,o.trimLabelText=this._trimLabelText;var a=this._grid.displayOptions;return o.setZIndex(a.baseZindex+3),this._isMobile&&!this._isTablet?(this._showMarquee(r),o.viewGridInside=!1,o.show(r,0,0,0,null),this._centerPopup(r,o._element)):o.show(e.documentElement,s.cx+1,s.cy+s.height,this._cellBounds.width,xt.getClientRect(this._editor)),o.$_search(this._editor.value,!0),this._setEditorAria("aria-expanded","true"),!xt.isSlotMode()&&i.addEventListener("pointerdown",this._globalMouseHandler),!0}}return!1},i.prototype.closeUp=function(t,e){if(this.listing){this._closing=!0;var i=this._isMobile&&!this._isTablet;try{var o=Ct(this._container);!xt.isSlotMode()&&o.removeEventListener("pointerdown",this._globalMouseHandler),this._closeMarquee(),this._list.hide();var n=void 0;if(t&&this._list.selected&&(n=this._list.valueIndex)>=0&&this._items&&this._items.length>n){this._selectedIndex=this._list.valueIndex;var r=this._items[n].value,s=this._labeling?this._items[n].label:this._items[n].value;this._editor.value=s,i?this._commitListValue(r):(n==this._saveIndex&&s==this._saveText||this._dispatchChange(),e&&this._commitOnSelect&&this._dispatchCommit())}else this._selectedIndex=-1}finally{this._closing=!1,this._setEditorAria("aria-expanded","false"),this.setActiveDescendant(null)}return!0}},i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._values=[],this._labels=[],this._displayLabels=t.DropDownValueLabel.LABEL,this._separator=" - ",this._itemColumned=!1,this._domainOnly=!1,this._textReadOnly=!1,this._dropDownWidth=-1,this._dropDownPosition=t.DropDownPosition.BUTTON,this._dropDownCount=8,this._itemSortStyle=t.DropDownSortStyle.NONE,this._caseSensitive=!1,this._partialMatch=!1,this._commitOnSelect=!0,this._dropDownWhenClick=!1,this._viewGridInside=!1,this._initCount=0,this._moreItemCount=25,this._moreText=window.RG_CONST&&window.RG_CONST.MORETEXT||"",this._setEditorAria("aria-activedescendant",null)},i.prototype.setEditIndex=function(t){e.prototype.setEditIndex.call(this,t),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null,this._refreshItems()},i.prototype.setEditValue=function(t){var i=this,o=-1,n=function(t,o){var n;e.prototype.setEditValue.call(i,t?((n={})[t]=o,n):o)};this._value=t;var r=this._editIndex.dataColumn,s=r.getField(),a=r.objectKey||s.objectKey;if(t=a&&t?t[a]:t,this._lookup){var l=this._domain;if(l){var u=o=l.keys?l.keys.indexOf(t):-1;u>=0&&l.values&&l.values.length>u&&l.values[u]}else o=this._editIndex.dataColumn.getLookupIndex(t);this._labeling?n(a,l?o>=0&&l.values&&l.values.length>o?l.values[o]:t:o>=0?this._editIndex.dataColumn.getLookupLabel(t):t):n(a,t)}else this._values&&this._labeling&&this._labels?n(a,this._labels[this._values.indexOf(t)]||t):n(a,t);this._selectedIndex=o},i.prototype.isEdited=function(){var t=e.prototype.isEdited.call(this);return t&&this.domainOnly&&(t=void 0!==this.$_getEditValue(!1)),t},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype._setEditorAria=function(t,e){e?this._editor.setAttribute(t,e):this._editor.removeAttribute(t)},i.prototype._createDropDown=function(t){return new Oa(t)},i.prototype.setCellEditValue=function(t,i){e.prototype.setCellEditValue.call(this,t,i)},i.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(t,e)},i.prototype.setBounds=function(t,i,o,n,r){e.prototype.setBounds.call(this,t,i,o,n,r)},i.prototype._createEditor=function(t){return e.prototype._createEditor.call(this,t)},i.prototype._textHandler=function(){this._requestStart()},i.prototype._compositionstartHandler=function(t){e.prototype._compositionstartHandler.call(this,t)},i.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=this._list,o=i.itemIndex;switch(t.keyCode){case 8:case 46:if(!t.ctrlKey&&!t.shiftKey&&this.domainOnly&&this.allowEmpty);else if(!t.ctrlKey&&!t.shiftKey&&this.textReadOnly)return this._requestStart(),t.preventDefault(),!0;break;case 32:if(this.listing&&i.currentIsMore(o))return i.addMoreItems(),t.preventDefault(),!0;break;case 13:if(this.listing&&i.currentIsMore(o))return i.addMoreItems(),t.preventDefault(),!0;if(this.closeUp(!0,!1))return!this._sendToParent(t);break;case 27:if(this.closeUp(!1,!1))return t.preventDefault(),!0;break;case 40:if(!t.shiftKey&&t.altKey&&!this.listing)return this._requestStart(),t.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.min(i.itemCount-1,o+1)),t.preventDefault(),!0;break;case 34:if(this.listing)return this._list.setItemIndex(Math.min(i.itemCount-1,o+i.dropDownCount)),t.preventDefault(),!0;break;case 38:if(t.altKey&&this.listing)return this.closeUp(!1,!1),t.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.max(0,o-1)),t.preventDefault(),!0;break;case 33:if(this.listing)return this._list.setItemIndex(Math.max(0,o-i.dropDownCount)),t.preventDefault(),!0}return e.prototype._keyDownHandler.call(this,t)}},i.prototype._keyPressHandler=function(t){this.isDisabled()||(e.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault())},i.prototype._inputHandler=function(t){this.isDisabled()||(this.textReadOnly&&(t.target.value=this._oldValue||""),e.prototype._inputHandler.call(this,t))},i.prototype._pasteHandler=function(t){this.isDisabled()||e.prototype._pasteHandler.call(this,t)},i.prototype._copyHandler=function(t){this.isDisabled()||e.prototype._copyHandler.call(this,t)},i.prototype._requestStart=function(t){return!!e.prototype._requestStart.call(this,t)&&(this._isMobile?t&&this.dropDown():!1!==t&&this.dropDown(),!0)},i.prototype._doChanged=function(){this._selectedIndex=-1,e.prototype._doChanged.call(this),this.listing&&this._list.$_search(this._editor.value)},i.prototype.dropDownList=function(t){this.dropDown(t)&&this._setEditorAria("aria-expanded","true")},i.prototype.closeList=function(t){this.closeUp(t,!1),this._setEditorAria("aria-expanded","false")},i.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1,!1):this.dropDown()},i.prototype.$_setItems=function(t,e){this._items=[];for(var i=0,o=t.length;i<o;i++)this._items.push({value:t[i],label:e&&e.length>i?e[i]:t[i]})},i.prototype._refreshItems=function(e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var o=this.editIndex,n=o.item;if(this._values&&(this._values.length>0||i))this.$_setItems(this._values,this._labels),this._labeling=this.displayLabels!==t.DropDownValueLabel.VALUE&&this._labels&&this._labels.length>=this._values.length;else if(o.dataColumn&&o.item&&(o.dataRow>=0||vo(n.itemState))){var r=o.dataColumn;if(r.lookupSource){for(var s=r.lookupKeyFieldIds,a=[],l=0;l<s.length-1;l++)a.push(n.getData(s[l]));var u=r.lookupSource.getTextDomain(a);u&&u.values&&u.values.length>0&&(this.$_setItems(u.keys,u.values),this._labeling=!0,this._lookup=!0,this._domain=u)}else r.values&&r.values.length>0&&(this.$_setItems(r.values,r.labels),this._labeling=this.displayLabels!==t.DropDownValueLabel.VALUE&&r.labels&&r.labels.length>=r.values.length,this._lookup=!0)}if(e&&this.listing){this._list.items=this._items;var c=xt.getClientRect(this._container);this._list._resetItems(c.cx-1,c.cy+c.height,this._cellBounds.width,xt.getClientRect(this._editor))}},i.prototype.$_getEditValue=function(e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var o,n=this.text,r=ya.prototype.getEditValue.call(this,e,i),s=this._editIndex.dataColumn,a=this._selectedIndex,l=a>=0,u=s.getField(),c=u.dataType===t.ValueType.OBJECT&&(s.objectKey||u.objectKey),h=c&&r?r[c]:r;if(this._lookup){if(this._domain){if(this._labeling&&(h=(o=l?a:this._domain.values?this._domain.values.indexOf(n):-1)>=0&&this._domain.keys&&this._domain.keys.length>o?this._domain.keys[o]:h),this.domainOnly&&h&&(!this._domain.keys||this._domain.keys.indexOf(h)<0))return pa.Unselected}else if(this._labeling&&(h=l?s.getLookupValue(a):s.getSourceValue(n)||(c?r[c]:r)),this.domainOnly&&h&&(!s.values||s.values.indexOf(h)<0))return pa.Unselected}else if(this._labeling&&(o=l?a:this._labels?this._labels.indexOf(n):-1)>=0&&o<this._values.length&&(h=this._values[o]),this.domainOnly&&h&&(!this._values||this._values.indexOf(h)<0))return pa.Unselected;return c?(r[c]=h,r):h},i.prototype.setActiveDescendant=function(t){this._setEditorAria("aria-activedescendant",t)},i.prototype.onDropDownListCloseUp=function(t,e){this.closeUp(e,!0),!xt.isMobile()&&this.setFocus()},i.prototype.onDropDownListEditorFocus=function(){this.setFocus()},i.prototype.onDropDownListActiveDescendant=function(t,e){this.setActiveDescendant(e)},i.INPUT_CSS="rg-list-editor",i.$$_LIST_ID=0,i}(xa),Ia=function(e){function i(t){var o=e.call(this,t)||this;return o._selectItemIndices=[],o._acceptText=null,o._cancelText=null,o._showButtons=!1,o._showAllCheck=!1,o._acceptClickHandler=function(t){this.fireEvent(i.CLOSE_UP_2,!0)}.bind(o),o._cancelClickHandler=function(t){this.fireEvent(i.CANCEL,!1)}.bind(o),o._checkClickHandler=function(t){t.stopImmediatePropagation();var e=t.currentTarget,i=e.parentElement;if(i){var o=xt.getChildIndex(i),n=e.checked;this.$_changeCheckIndex(i,o,n,!0)}}.bind(o),o._allCheckClickHandler=function(t){if(t.stopImmediatePropagation(),2==t.eventPhase&&t.currentTarget==this._allCheckElement)this._allCheck.checked=!this._allCheck.checked,this.$_toggleAllCheck();else if(2==t.eventPhase&&t.currentTarget==this._allCheck)return void this.$_toggleAllCheck()}.bind(o),o._divClickHandler=function(t){xt.stopEvent(t,!0),t.currentTarget.firstElementChild.click()}.bind(o),o}return n(i,e),Object.defineProperty(i.prototype,"valueIndices",{get:function(){return this._selectItemIndices.slice()},set:function(t){this._selectItemIndices=[],null!=t&&(this._selectItemIndices=t.slice(),this.listing&&this._refreshItems(),this._selected=!1)},enumerable:!1,configurable:!0}),i.prototype.changeCheckIndex=function(t,e,i){var o=this._listElement.childNodes;if(t>=0&&t<o.length){for(var n=o[t],r=n.getElementsByTagName("input"),s=void 0,a=0,l=r.length;a<l;a++)if("checkbox"==r[a].type){s=r[a];break}s&&(s.checked=null!=e?e:!s.checked,this.$_changeCheckIndex(n,t,s.checked,i))}},i.prototype.$_changeCheckIndex=function(t,e,o,n){var r=this._selectItemIndices;if(!(e<0||e>=this._items.length)){var s=this._items[e].index;o?r.indexOf(s)<0&&r.push(s):r.indexOf(s)>=0&&r.splice(r.indexOf(s),1),t.className="rg-multicheck-item"+(o?" rg-multicheck-select":""),t.setAttribute("aria-selected",o?"true":"false"),this._selected=!0,this.$_changeAllCheck(),n&&this.fireEvent(i.CHECK_CLICK)}},i.prototype._createList=function(){var t=this._container.doc,e=t.createElement("div");e.className="rg-multicheck",e.id="rg-dropdown-list-"+Ra.$$_LIST_ID++,e.setAttribute("role","listbox");var i=t.createElement("div");i.className="rg-multicheck-allcheck",this._allCheckElement=i,i.style.paddingLeft="2px",xt.disableSelection(i),e.appendChild(i);var o=t.createElement("div");o.className="rg-multicheck-list",this._listElement=o,e.appendChild(o);var n=t.createElement("div");return n.style.textAlign="center",n.style.whiteSpace="nowrap",n.className="rg-multicheck-button",this._buttonElement=n,n.style.margin="2px",xt.disableSelection(n),e.appendChild(n),e},i.prototype._getListElement=function(){return this._listElement},i.prototype.setZIndex=function(t){var e=this._element.style;e.zIndex=String(t),(e=this._listElement.style).zIndex=String(t)},i.prototype.$_toggleAllCheck=function(){for(var t=this._listElement.childElementCount,e=this._allCheck.checked,o=0;o<t;o++)this.changeCheckIndex(o,e,!1);this.fireEvent(i.CHECK_CLICK)},i.prototype.$_changeAllCheck=function(){if(this._showAllCheck){for(var t=!0,e=this._listElement.children,i=0;i<e.length;i++){var o=e[i].firstElementChild;t=t&&o.checked}this._allCheck.checked=t}},i.prototype._show=function(t,e,i,o){var n=this._element;if(n){var r=n.style;r.position="absolute",r.cssFloat="none",r.clear="both",r.boxSizing="border-box",r.minWidth="20px",r.minHeight="10px",r.overflow="visible",(r=this._listElement.style).position="relative",r.cssFloat="none",r.clear="both",r.boxSizing="border-box",r.minWidth="20px",r.minHeight="10px",r.overflow="auto",(r=this._buttonElement.style).position="relative",r.cssFloat="none",r.clear="both",r.boxSizing="border-box",r.marginLeft="0px",r.marginRight="0px",this._firstChild=null,xt.clearChildren(this._listElement),xt.disableSelection(this._listElement),this._containerElement.appendChild(n),this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),this._itemIndex=-1,this._selectItemIndices.length&&this.setItemIndex(this._selectItemIndices.slice().sort((function(t,e){return t-e}))[0]),this._selected=!1}},i.prototype._resetWidth=function(t){e.prototype._resetWidth.call(this,t);var i=this._element,o=Math.floor(this._buttonElement.getBoundingClientRect().width),n=i.getBoundingClientRect().width;isNaN(o)||(n=Math.max(n,o)),i.style.width=n+"px"},i.prototype._resetItems=function(t,e,i,o){xt.clearChildren(this._listElement),this._firstChild=null,this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},i.prototype._buildItems=function(){var e,o=this._container.doc,n=0,r=function(t,e,i){var n=e?e.value.toString():"",r=o.createElement("label");return r.style.whiteSpace="pre",r.innerHTML=n?xt.htmlEncode(n):"&nbsp;",r.htmlFor=i&&i.id,r.tabIndex=-1,r.className="rg-dropdown-value",xt.disableSelection(r),t.appendChild(r),r}.bind(this),s=function(t,e,i){var n=e?e.label.toString():"";n=this._trimLabelText?n.trim():n;var r=o.createElement("label");return!this._trimLabelText&&(r.style.whiteSpace="pre"),r.innerHTML=n?xt.htmlEncode(n):"&nbsp;",r.htmlFor=i&&i.id,r.tabIndex=-1,r.className="rg-dropdown-label",xt.disableSelection(r),t.appendChild(r),r}.bind(this),a=function(t,e){var i=o.createElement("span");i.style.whiteSpace="pre",i.style.pointerEvents="none",i.innerHTML=e?xt.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-separator",xt.disableSelection(i),t.appendChild(i)}.bind(this),l=function(t){var i=xt.getTextLength(t.textContent);i>n&&(e=t,n=i)}.bind(this),u=this._items;if(u&&!(u.length<1)){for(var c=0,h=u.length;c<h;c++){var p=u[c],d=o.createElement("div");d.setAttribute("role","option"),d.id=this._element.id+"-"+c.toString();var f=d.style;f.position="relative",f.cssFloat="none",f.paddingTop="1px",f.paddingBottom="1px",f.paddingLeft="2px",f.paddingRight="2px",f.whiteSpace="nowrap",f.cursor="default";var g=this._selectItemIndices.indexOf(u[c].index)>=0;d.className="rg-multicheck-item"+(g?" rg-multicheck-select":""),xt.disableSelection(d),this._listElement.appendChild(d),0==c&&(this._firstChild=d),d.onclick=this._divClickHandler;var y=o.createElement("input");y.id="$multiCheck_item_"+i.$_checkId++,y.type="checkBox",y.onclick=this._checkClickHandler,y.checked=g,d.setAttribute("aria-selected",g?"true":"false"),d.appendChild(y);var _=null;switch(this.displayLabels){case t.DropDownValueLabel.LABEL:s(d,p,y);break;case t.DropDownValueLabel.VALUE:r(d,p,y);break;case t.DropDownValueLabel.LABEL_VALUE:_=s(d,p,y),a(d,this.separator),r(d,p,y);break;case t.DropDownValueLabel.VALUE_LABEL:_=r(d,p,y),a(d,this.separator),s(d,p,y)}_&&this.itemColumned&&(l(_),d._span=_)}if(this.itemColumned&&e){var m=Math.ceil(e.getBoundingClientRect().width);if(m>0)for(c=0,h=this._listElement.childNodes.length;c<h;c++)(_=this._listElement.childNodes[c]._span)&&(_.style.display="inline-block",_.style.width=m+"px")}}},i.prototype.setButtonOptions=function(t,e,i,o,n){this._acceptText=t,this._cancelText=e,this._showButtons=i,this._showAllCheck=o,this._allCheckText=n,this.$_buildButtons()},i.prototype.$_buildButtons=function(){var t=this._container.doc;if(this._buttonElement){this._buttonElement.style.display=this._showButtons?"":"none",xt.clearChildren(this._buttonElement);var e=t.createElement("label"),o=e.style;e.innerHTML=this._acceptText,e.onclick=this._acceptClickHandler,e.className="rg-multicheck-accept",o.cursor="pointer",xt.disableSelection(e),this._buttonElement.appendChild(e),o=(e=t.createElement("label")).style,e.innerHTML=this._cancelText,e.onclick=this._cancelClickHandler,e.className="rg-multicheck-cancel",o.marginLeft="2px",o.cursor="pointer",xt.disableSelection(e),this._buttonElement.appendChild(e);var n=this._allCheckElement;if(n.onclick=this._allCheckClickHandler,xt.clearChildren(n),this._showAllCheck){n.style.display="";var r=t.createElement("input");r.type="checkbox",r.id="$multiCheck_item_"+i.$_checkId++,r.onclick=this._allCheckClickHandler,this._allCheck=r,n.appendChild(r);var s=t.createElement("label");s.innerHTML=this._allCheckText,s.htmlFor=r.id,s.tabIndex=-1,xt.disableSelection(s),n.appendChild(s),this.$_changeAllCheck()}else n.style.display="none"}},i.prototype._refreshItems=function(){for(var t=this._listElement.childNodes,e=-1,i=0;i<t.length;i++){e=i<this._items.length?this._items[i].index:-1;var o=t[i];i===this._itemIndex?(xt.addClassName(o,"rg-multicheck-selectitem"),this.fireEvent(Oa.ACTIVE_DESCENDENT,o.id)):xt.removeClassName(o,"rg-multicheck-selectitem")}if((e=this._itemIndex)>=0&&e<t.length)if((o=t[e]).offsetTop<this._listElement.scrollTop)this._listElement.scrollTop=o.offsetTop;else{var n=o.offsetTop+xt.getSize(o).height;n>=this._listElement.scrollTop+this._listElement.clientHeight&&(this._listElement.scrollTop=n-this._listElement.clientHeight)}},i.CLOSE_UP_2="onMultiCheckListCloseUp",i.CANCEL="onMultiCheckListCancel",i.CHECK_CLICK="onMultiCheckListCheckClick",i.$_checkId=0,i}(Oa),Ta=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o._showButtons=!0,o._showAllCheck=!1,o._setEditorAria("aria-multiselectable","true"),o}return n(i,e),Object.defineProperty(i.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"acceptText",{get:function(){return this._acceptText},set:function(t){this._acceptText=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelText",{get:function(){return this._cancelText},set:function(t){this._cancelText=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"allCheckText",{get:function(){return this._allCheckText},set:function(t){this._allCheckText=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showAllCheck",{get:function(){return this._showAllCheck},set:function(t){this._showAllCheck=t},enumerable:!1,configurable:!0}),i.prototype._createDropDown=function(t){return new Ia(t)},i.prototype.setMask=function(t){this._mask=null},i.prototype.dropDown=function(t){if(void 0===t&&(t=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var e=wt(this._container),i=Ct(this._container);if(t||this._items&&this._items.length>0){this._grid;var o=this._list,n=this._options;this._selectedIndices=this._selectedIndices||[],o.viewGridInside=n.viewGridInside,o.displayLabels=this.displayLabels,o.separator=this.separator,o.itemColumned=this.itemColumned,o.items=this._items;var r=xt.getClientRect(this._container);this._saveIndices=this._selectedIndices.slice(),this._saveText=this._editor.value,o.caseSensitive=this.caseSensitive,o.dropDownCount=this.dropDownCount,o.dropDownWidth=this.dropDownWidth,o.dropDownPosition=this.dropDownPosition,o.setButtonOptions(this.acceptText,this.cancelText,this.showButtons,this.showAllCheck,this.allCheckText),o.sortStyle=this.itemSortStyle,o.valueIndices=this._selectedIndices.slice(),o.trimLabelText=this.trimLabelText;var s=this._grid.displayOptions;if(o.setZIndex(s.baseZindex+3),this._isMobile&&!this._isTablet){var a=e.documentElement;o.viewGridInside=!1,this._showMarquee(a),o.show(a,0,0,0,null),this._centerPopup(a,o._element)}else o.show(e.documentElement,r.cx+1,r.cy+r.height,this._cellBounds.width,xt.getClientRect(this._editor));return!xt.isSlotMode()&&i.addEventListener("pointerdown",this._globalMouseHandler),!0}}return!1},i.prototype.getCheckValues=function(t,e,i){for(var o=[],n=0,r=t.length;n<r;n++)t[n]>=0&&t[n]<e.length&&o.push(this._labeling&&!i?e[t[n]].label:e[t[n]].value);return o},i.prototype.closeUp=function(t,e){if(this.listing){this._closing=!0;try{var i=this._list,o=this.editIndex&&this.editIndex.dataColumn,n=Ct(this._container);if(!xt.isSlotMode()&&n.removeEventListener("pointerdown",this._globalMouseHandler),this._closeMarquee(),i.hide(),t&&i.selected){if(this._selectedIndices=i.valueIndices.slice(),this._editor.value=this.getCheckValues(this._selectedIndices,this._items).join(o.valueSeparator),!xt.equalArrays(this._saveIndices,this._selectedIndices)||this._editor.value!=this._saveText)if(this._isMobile){var r=this.getCheckValues(this._selectedIndices,this._items,!0).join(o.valueSeparator);this._commitListValue(r)}else this._dispatchChange(),e&&this.commitOnSelect&&this._dispatchCommit()}else this._selectedIndices=this._saveIndices.slice()}finally{this._closing=!1}return!0}return!1},i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._showButtons=!0,this._showAllCheck=!1,this._acceptText=window.RG_CONST&&window.RG_CONST.MULTICHECKACCEPT?window.RG_CONST.MULTICHECKACCEPT:"Accept",this._cancelText=window.RG_CONST&&window.RG_CONST.MULTICHECKCANCEL?window.RG_CONST.MULTICHECKCANCEL:"Cancel",this._allCheckText=window.RG_CONST&&window.RG_CONST.MULTICHECKALLCHECK?window.RG_CONST.MULTICHECKALLCHECK:"Check All"},i.prototype.applyOptions=function(t){e.prototype.applyOptions.call(this,t)},i.prototype.setEditValue=function(t){var e,i=[],o=[],n=-1,r=this._editIndex.dataColumn,s=r.getField(),a=r.objectKey||s.objectKey;a&&t&&(t=t[a]);var l=xt.isArray(t)?t:t?t.split(this._editIndex.dataColumn.valueSeparator):[];if(this._value=t,this._lookup){var u=this._domain;if(u)for(var c=0,h=l.length;c<h;c++)(n=u.keys.indexOf(l[c]))>=0&&(i.push(n),o.push(n<u.values.length?u.values[n]:l[c]));else i=this._editIndex.dataColumn.getLookupIndices(t);this._labeling?(e=u?o.join(this._editIndex.dataColumn.valueSeparator):i.length>0?this._editIndex.dataColumn.getLookupLabel(t):t,ya.prototype.setEditValue.call(this,e)):ya.prototype.setEditValue.call(this,t)}else if(this._values){for(c=0,h=l.length;c<h;c++)(n=this._values.indexOf(l[c]))>=0&&(i.push(n),o.push(this._labels&&n>=0&&this._labels.length>n?this._labels[n]:l[c]));this._labeling&&this._labels?(e=o.join(this._editIndex.dataColumn.valueSeparator),ya.prototype.setEditValue.call(this,e)):ya.prototype.setEditValue.call(this,t)}else ya.prototype.setEditValue.call(this,t);this._selectedIndices=i},i.prototype.setCellEditValue=function(t,i){e.prototype.setCellEditValue.call(this,t,i)},i.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!1),this.isEdited()||this._list.selected?this.$_getEditValue(t,e):this._value},i.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=this._list;return t.ctrlKey&&65==t.keyCode&&this.listing?(t.preventDefault(),i._allCheck.checked=!i._allCheck.checked,i.$_toggleAllCheck(),!0):32===t.keyCode&&this.listing?(i.changeCheckIndex(i.itemIndex,null,!0),t.preventDefault(),!0):e.prototype._keyDownHandler.call(this,t)}},i.prototype._keyPressHandler=function(t){e.prototype._keyPressHandler.call(this,t),this._list._selected=!1},i.prototype._inputHandler=function(t){e.prototype._inputHandler.call(this,t),this._list._selected=!1},i.prototype.$_getEditValue=function(e,i){function o(t,e,i,o,n){var r=[],s=e&&e.split(n.valueSeparator);if(s&&s.length>0)for(var a=0,l=s.length;a<l;a++)o.indexOf(s[a])>=0&&o.indexOf(s[a])<i.length?r.push(i[o.indexOf(s[a])]):(i.indexOf(s[a])>=0||!t.domainOnly)&&r.push(s[a]);return r}void 0===e&&(e=!1),void 0===i&&(i=!1);var n=this._strToVal(this.text),r=ya.prototype.getEditValue.call(this,e,i),s=this._editIndex.dataColumn,a=s.getField(),l=a.dataType===t.ValueType.OBJECT&&(s.objectKey||a.objectKey),u=l?r[l]:r,c=this._selectedIndices.slice(),h=[],p=this._list.selected;if(this._lookup){if(this._domain){if(this._labeling){if(p)for(var d=0,f=c.length;d<f;d++)c[d]<this._domain.keys.length&&h.push(this._domain.keys[c[d]]);else n&&(h=o(this,n,this._domain.keys,this._domain.values,s));u=h.join(s.valueSeparator)}}else if(this._labeling&&void 0===(u=p?s.getLookupValues(c):s.getSourceValues(n))&&(u=r),this.domainOnly&&u){if(!s.values)return pa.Unselected;for(d=(u=xt.isArray(u)?u:u&&u.split?u.split(s.valueSeparator):[u]).length-1;d>=0;d--)s.values.indexOf(u[d])<0&&u.splice(d,1)}}else{if(this._labeling){if(p)for(d=0,f=c.length;d<f;d++)c[d]<this._values.length&&h.push(this._values[c[d]]);else n&&(h=o(this,n,this._values,this._labels,s));u=h.join(s.valueSeparator)}if(this.domainOnly&&u){if(!this._values)return pa.Unselected;for(d=(u=xt.isArray(u)?u:u&&u.split?u.split(s.valueSeparator):[u]).length-1;d>=0;d--)this._values.indexOf(u[d])<0&&u.splice(d,1)}}return u=xt.isArray(u)?u.join(s.valueSeparator):u,l?(r[l]=u,r):u},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.onMultiCheckListCloseUp=function(t,e){this.closeUp(e,!0),!this._isMobile&&this.setFocus()},i.prototype.onMultiCheckListCheckClick=function(t){this._editor.value=this.getCheckValues(t._selectItemIndices,this._items).join(this.editIndex.dataColumn.valueSeparator),this._selectedIndices=t._selectItemIndices.slice(),this._saveIndices=t._selectItemIndices.slice(),this._modified=!0,this._dispatchChange(),!this._isMobile&&this._editor.focus()},i.prototype.onMultiCheckListCancel=function(){this._isMobile?this._controller.closeList(!1):this._controller.cancelEditor(!0)},i.INPUT_CSS="rg-multicheck-editor",i}(Ra),Pa=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._searchLength=1,o._searchDelay=1e3,o._useCtrlEnterKey=!1,o._useEnterKey=!1,o._initCount=0,o._moreItemCount=25,o._reInquery=!0,o._timer=void 0,o._editor.setAttribute("aria-autocomplate","list"),o}return n(e,t),Object.defineProperty(e.prototype,"searchLength",{get:function(){return this._searchLength},set:function(t){t!=this._searchLength&&(this._searchLength=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchDelay",{get:function(){return this._searchDelay},set:function(t){t!=this._searchDelay&&(this._searchDelay=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useCtrlEnterKey",{get:function(){return this._useCtrlEnterKey},set:function(t){t!=this._useCtrlEnterKey&&(this._useCtrlEnterKey=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useEnterKey",{get:function(){return this._useEnterKey},set:function(t){t!=this._useEnterKey&&(this._useEnterKey=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reInquery",{get:function(){return this._reInquery},set:function(t){t!=this._reInquery&&(this._reInquery=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype.fillItems=function(t,e,i){return!(!this.listing||t!=this.getEditText())&&(this.values=e,this.labels=i,this._refreshItems(!0,!0),this._list.$_search(this._editor.value,!0),!0)},e.prototype.$_setItems=function(e,i){t.prototype.$_setItems.call(this,e,i),(!this.values||this.values.length<=0)&&(this.values=e,this.labels=i)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=13==e.keyCode;if(i&&(i=e.ctrlKey?this.useCtrlEnterKey:this.useEnterKey&&(!this._items||this._items.length<1)),i&&this.editing){e.preventDefault(),e.stopImmediatePropagation(),this.$_stopTimer();var o=this.getEditText();return o&&o!=this._searchKey&&(this._searchKey=o,this._dispatchSearch(o)),!0}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._inputHandler=function(e){this.isDisabled()||(t.prototype._inputHandler.call(this,e),this.$_search())},e.prototype._doEndEdit=function(){t.prototype._doEndEdit.call(this),this.$_stopTimer(),this._searchKey=null},e.prototype.$_getEditValue=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var i=this.text,o=ya.prototype.getEditValue.call(this,t,e),n=this._selectedIndex,r=n>=0;if(this._labeling){var s=r?n:this._labels?this._labels.indexOf(i):-1;s>=0&&s<this._values.length&&(o=this._values[s])}return this.domainOnly&&o&&(!this._values||this._values.indexOf(o)<0)?pa.Unselected:o},e.prototype.dropDown=function(e){var i=this._list;return i&&(i.initCount=this.initCount,i.moreItemCount=this.moreItemCount,i.moreText=this.moreText),t.prototype.dropDown.call(this,!0)},e.prototype.buttonClicked=function(t){if(this.listing)this.closeUp(!1,!1);else{this.dropDown();var e=this.getEditText(),i=this._dispatchSearchCellButtonClick(e);i&&"object"==typeof i&&i.values&&this.fillItems(e,i.values,i.labels)}},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.$_search=function(){var t=this.getEditText();t&&t.length>=this._searchLength?this.$_startTimer():this.$_stopTimer()},e.prototype.$_startTimer=function(){this.$_stopTimer(),!this.reInquery&&this.listing&&this._list._items.length>0||(this._timer=setTimeout(function(){var t=this.getEditText();t&&t!=this._searchKey&&(this._searchKey=t,this.$_stopTimer(),this._dispatchSearch(t,!0))}.bind(this),this._searchDelay))},e.prototype.$_stopTimer=function(){this._timer&&clearTimeout(this._timer)},e.INPUT_CSS="rg-search-editor",e}(Ra),Da=function(e){function i(i,o){var n=e.call(this,i,o)||this;return n._values=null,n._items=null,n._labels=null,n._sortStyle=t.DropDownSortStyle.NONE,n._itemIndex=-1,n._displayLabels=null,n._separator=null,n._itemColumned=!1,n._trimLabelText=!0,n.$_selectChanged=null,n._handled=!1,n._globalKeyDownHandler=function(t){var e=Ct(this._container);if(!(t.target instanceof e.HTMLTableCellElement))return this._keyDownHandler(t)}.bind(n),n}return n(i,e),i.prototype._dodispose=function(){this._editor&&this._editor.removeEventListener("change",this.$_selectChanged),this._values=null,this._labels=null,this._items=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"native",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonCount",{get:function(){return 1},enumerable:!1,configurable:!0}),i.prototype.hasButton=function(t,e){return null==t||t},i.prototype._createEditor=function(t){var e=wt(t);this._container=this._createContainer(e),t.appendChild(this._container);var i=e.createElement("select"),o=i.style;return i.setAttribute("aria-hidden","true"),o.position="absolute",o.boxSizing="border-box",o.margin="0px",o.padding="0px",o.wordWrap="normal",o.overflow="hidden",o.resize="none",o.border="none",o.outline="none",o.left="0px",o.top="0px",o.width="100%",o.height="100%",this.$_selectChanged=function(t){var e=t.target;this._itemIndex!==e.selectedIndex&&(this._dispatchChange(),this._dispatchCommit())}.bind(this),i.addEventListener("change",this.$_selectChanged),this._container.appendChild(i),i},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._values=[],this._labels=[],this._items=[],this._itemIndex=-1},i.prototype.setEditIndex=function(t){e.prototype.setEditIndex.call(this,t),this._refreshItems(),this._resetPosition()},i.prototype.setEditValue=function(t){e.prototype.setEditValue.call(this,t),this._itemIndex=-1;for(var i=this._editor.options,o=0,n=i.length;o<n;o++)i[o].value===t?(this._itemIndex=o,i[o].selected=!0):i[o].selected=!1},i.prototype.prepare=function(){var t=Ct(this._container);this._handled||(!xt.isSlotMode()&&t.addEventListener("keydown",this._globalKeyDownHandler),this._handled=!0)},i.prototype.unprepare=function(){var t=Ct(this._container);!xt.isSlotMode()&&t.removeEventListener("keydown",this._globalKeyDownHandler),this._handled=!1},i.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=t.keyCode,o=xt.isIE&&this.visible;switch(i){case 40:if(t.altKey)return this._requestStart(),!0;if(o)return!1;break;case 13:case 38:case 33:case 34:case 36:case 35:if(o)return!1}return e.prototype._keyDownHandler.call(this,t)}},i.prototype._resetPosition=function(){var t=this._grid.getEditCellBounds(this,this._editIndex);t.x--,t.y--,this.setBounds(t.x,t.y,0,0,0)},i.prototype._refreshItems=function(t,e){void 0===e&&(e=!1);var i=this.editIndex,o=i.item;if(this._values&&(this._values.length>0||e))this.$_setItems(this._values,this._labels);else if(i.dataColumn&&i.item&&(i.dataRow>=0||vo(o.itemState))){var n=i.dataColumn;if(n.lookupSource){for(var r=n.lookupKeyFieldIds,s=[],a=0;a<r.length-1;a++)s.push(o.getData(r[a]));var l=n.lookupSource.getTextDomain(s);l&&l.values&&l.values.length>0&&this.$_setItems(l.keys,l.values)}else n.values&&n.values.length>0&&this.$_setItems(n.values,n.labels)}},i.prototype.$_setItems=function(t,e){this._items=[];for(var i=this._editor,o=i.options,n=wt(i),r=o.length-1;r>=0;r--)o.remove(r);r=0;for(var s=t.length;r<s;r++){var a=n.createElement("option");a.value=t[r],a.text=e&&e.length>r?e[r]:t[r],this._items.push({value:a.value,label:a.text}),i.options.add(a,null)}},i.prototype.getEditValue=function(){return this.$_getEditValue()},i.prototype.$_getEditValue=function(){return this._editor.value},i.INPUT_CSS="rg-nlist-editor",i}(ya),ka=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.lastLayout=function(){throw new Error("Method not implemented.")},e.prototype.getText=function(t,e,i,o){throw new Error("Method not implemented.")},e.prototype.getCellText=function(t,e){throw new Error("Method not implemented.")},e.prototype.getRows=function(t,e,i){throw new Error("Method not implemented.")},e.prototype.getCell=function(t,e,i){throw new Error("Method not implemented.")},e}(kt),Aa=function(t){function e(e,i,o){var n=t.call(this)||this;return n._colCount=0,n._blockPaste=!1,n._lines=[],n._colCount=0,n._blockPaste=!1,n._parse(e,i,o),n}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._lines.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colCount",{get:function(){return this._colCount},set:function(t){this._colCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this._lines.length||0==this._colCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"single",{get:function(){return 1==this._lines.length&&1==this._colCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blockPaste",{get:function(){return this._blockPaste},set:function(t){this._blockPaste=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return this._lines[t]},e.prototype._parse=function(t,e,i){var o,n,r,s,a,l=this._lines,u=[],c=t.length,h=0,p="";if(""===t)u.push(t),l.push(u),this._colCount=1;else{for(;h<c;)a=!1,o=t.charAt(h),n=h<c-1?t.charAt(h+1):"",'"'==o?s?r&&'"'==n?(p+=o,h++):r?r=!1:p+=o:(s=!0,r=!0):r||"\r"!=o&&"\n"!=o&&"\t"!=o?(s=!0,p+=o):("\t"==o&&(u.push(p),a=!0),"\r"!=o&&"\n"!=o||(u.push(p),this._colCount=Math.max(this._colCount,u.length),l.push(u),u=[],"\r"==o&&"\n"==n&&h++),p="",s=!1),h++;r&&(p='"'+p),(p.length>0||a)&&u.push(p),u.length>0&&(this._colCount=Math.max(this._colCount,u.length),l.push(u))}if(e&&e instanceof na&&!e.single&&(!i||1===this._colCount&&1===l.length)){var d=e.startIndex,f=e.endIndex;if(d&&f){var g=e.grid,y=d.layout,_=f.layout,m=d.itemIndex,v=f.itemIndex;if(y.col>_.col){var b=y;y=_,_=b}if(m>v){var C=m;m=v,v=C}y=g.activeCellLayout.getTopOf(y);var w=(_=g.activeCellLayout.getBottomOf(_,!0)).col-y.col+1,S=(_.row-y.row+1)*(v-m+1);h=0;for(var E=0,x=l.length;E<x;E++){for(var O=l[E].slice(),R=O.length;R<w;R++)l[E].push(O[h]),h=h>=O.length?0:h;this._colCount=Math.max(this._colCount,l[E].length)}for(h=0,E=l.length;E<S;E++)l.push(l[h++]),h=h>=l.length?0:h;this._blockPaste=!0,this._startIndex=hs.temp(g,m,y)}}},e}(kt),La=function(e){function i(){var t=e.call(this)||this;return t._lastLayout=null,t}return n(i,e),i.prototype._doDispose=function(){return e.prototype._doDispose.call(this)},i.prototype.lastLayout=function(){return this._lastLayout},i.prototype.getText=function(t,e,i,o){var n,r,s,a,l=t.grid,u=this._rangeToCells(t,null,e,o),c=[];if(l.copyOptions.includeHeaderText)for(s=0;s<u.length;s++){var h=[];for(a=0;a<u[s].length;a++)(n=xt.cast(u[s][a],Hr))?h.push(xt.addQuot(n.header.displayText)):h.push("");c.push(h.join("\t"))}if(!i){i=[];for(var p=e.r1,d=e.r2;p<=d;p++)i.push(p)}return i.forEach((function(e){var i=l.getItem(e);if(i.dataRow>=0||bo(i.itemState))for(s=0;s<u.length;s++){var o=[];for(a=0;a<u[s].length;a++)(n=xt.cast(u[s][a],Hr))&&!n.blankWhenCopy?(r=hs.temp(l,e,n).clone(),o.push(t.getData(r))):o.push("");c.push(o.join("\t"))}})),c.join("\r\n")+"\r\n"},i.prototype.getCellText=function(t,e){var i="";return t.grid.copyOptions.includeHeaderText&&(i=e.dataColumn.header.displayText+"\r\n"),i+t.getData(e)},i.prototype.getRows=function(e,i,o){if(null==i)return null;var n,r=o.grid,s=r.pasteOptions,a=r.getSelection(),l=o.dataColumn;if(a&&a.single&&!r.isTree()&&l.mergeEdit&&r.editOptions.commitByCell){var u=r.getMergedItems(o.itemIndex,l,!0,!0),c=new hs(r,u[0],l),h=new hs(r,u[u.length-1],l);a=new na(r.selections,t.SelectionStyle.BLOCK,c,h),n=!0}else{if(s.selectBlockPaste&&r.selections.count>1)return void alert("multi selection paste not supported");a=s.selectBlockPaste&&a}var p=new Aa(i,a,n);if(p.empty)return null;if(p.single)return p.get(0)[0];p.blockPaste&&p.startIndex&&o.assign(p.startIndex);for(var d=r.activeCellLayout._dataCells,f=d[0][o.layout.col],g=d[d.length-1][Math.min(d[0].length-1,o.layout.col+p.colCount-1)],y=new hs(r,o.itemIndex,f),_=new hs(r,o.itemIndex,g),m=gs.create(y,_),v=this._rangeToCells(e,p,m,null),b=void 0,C=void 0,w=void 0,S=void 0,E=[],x=0,O=p.rowCount;x<O;){var R={columns:[],values:[]};for(b=0;b<v.length&&x<O;b++,x++){var I=v[b],T=p.get(x);for(R.columns.push(I),R.values.push(S=[]),w=Math.min(T.length,I.length),C=0;C<w;C++)I[C]?S.push(T[C]):S.push("")}E.push(R)}return E},i.prototype.getCell=function(t,e,i){if(!e)return null;var o=new Aa(e);return o.empty?null:o.get(0)[0]},i.prototype._rangeToCells=function(t,e,i,o){i.normalizeData(),this._lastLayout=null;var n=i.c1,r=i.c2,s=t.grid.activeCellLayout._dataCells,a=n===r?n.row:0,l=n===r?n.row:s.length-1,u=[];if(o){for(var c=[],h=a;h<=l;h++){for(var p=[],d=0;d<s[0].length;d++){var f=s[h][d];o.indexOf(f)>=0?(p.push(f.firstColumn),c[d]=c[d]||f):p.push(null)}u.push(p)}for(d=s[0].length-1;d>=0;d--)for(h=a;h<=l;h++)!c[d]&&u[h].splice(d,1)}else for(h=a;h<=l;h++){p=[];var g=n.source,y=r.source,_=g.col,m=y.col+y._defColSpan-1;for(d=_;d<=m;d++)(f=s[h][d])instanceof Yr?p.push(f.firstColumn):p.push(null);u.push(p)}return this._lastLayout=s[l][r.col],u},i}(ka),Ma=function(e){function i(t){var i=e.call(this)||this;return i._values=null,i._dataRow=-1,i._grid=t,i}return n(i,e),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._grid.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return 0!=(1&this._getExtents())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.ROW},enumerable:!1,configurable:!0}),i.prototype._getExtents=function(){return 0},i.prototype._setExtents=function(t){},Object.defineProperty(i.prototype,"values",{set:function(t){this._values=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){return this._dataRow},set:function(t){this._dataRow=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)},enumerable:!1,configurable:!0}),i.prototype.getRowObject=function(){for(var t={},e=this.dataSource,i=this._dataRow>=0&&e.getRow(this._dataRow),o=0,n=e.fieldCount;o<n;o++){var r=e.getOrgFieldName(o),s=this._values.hasOwnProperty(o)?this._values[o]:i&&i[o];t[r]=s}return t},i.prototype.getRowData=function(){for(var t=[],e=this.dataSource,i=this._dataRow>=0&&e.getRow(this._dataRow),o=0,n=e.fieldCount;o<n;o++){var r=this._values.hasOwnProperty(o)?this._values[o]:i&&i[o];t[o]=r}return t},i.prototype.getData=function(t){return t=this.dataSource.getFieldIndex(t),this._values.hasOwnProperty(t)||this._dataRow<0?this._values[t]:this.dataSource.getRow(this._dataRow)[t]},i.prototype.setIndex=function(t){this._setIndex(t)},i}(wo),Fa=function(t){function e(e,i){var o=t.call(this,e)||this;return o._item=i,o}return n(e,t),e.prototype._doDispose=function(){return t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),e}(hs),Na=function(){function e(t){this._grid=t,this._data=new La,this._appendingItem=new Ma(t),this._appendingIndex=new Fa(t,this._appendingItem)}return e.prototype.dispose=function(){return null},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appendingIndex",{get:function(){return this._appendingIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPasting",{get:function(){return this._pasting},enumerable:!1,configurable:!0}),e.prototype.getDataRoots=function(){var t=this._grid._activeCellLayout._dataCells,e=[];if(!t.length||!t[0].length)return e;for(var i=0,o=t[0].length;i<o;i++)e.push(t[0][i].dataRoot);return e},e.prototype.getData=function(e){var i,o,n,r=this.grid,s=e.layout.firstColumn,a=r.getItem(e.itemIndex),l=r.copyOptions,u=l.datetimeFormat?Be.getFormatter(l.datetimeFormat):null,c=l.booleanFormat?Ge.getFormatter(l.booleanFormat):null,h=l.copyTextCallback;if(!a||!(bo(a.itemState)||a.dataRow>=0))return"";if(n=a.getData(s.dataIndex),s&&null!=(i=r.dataSource.getField(s.dataIndex))){if(null==(o=h?h.call(this,r,e.itemIndex,e.dataColumn,n):void 0))if(l.copyDisplayText)o=r.getDisplayText(e);else switch(i.dataType){case t.ValueType.DATETIME:case t.ValueType.DATE:o=n?u?u.getText(n):String(n):"";break;case t.ValueType.BOOLEAN:o=null!=n?c?c.formatValue(n):String(n):"";break;case t.ValueType.NUMBER:o=null==n||isNaN(n)?"":String(n);break;case t.ValueType.OBJECT:o=n&&"object"==typeof n?JSON.stringify(n):"";break;default:o=l.lookupDisplay&&(s.lookupDisplay||s.labelField)?Zo.getText(a,s):null!=n?String(n):""}return xt.addQuot(o)}return""},e.prototype.copyEmtpyToClipboard=function(){return""},e.prototype.copyToClipboard=function(t,e,i){return this._data.getText(this,t,e,i)},e.prototype.copyCellToClipboard=function(t){return this._data.getCellText(this,t)},e.prototype.pasteCellFromClipboard=function(t,e){if((t=this._correctIndex(t))&&this._grid.isValid(t)&&null!=e){var i=this._data.getCell(this,e,t);this._pasteSingleCell(t,i)}},e.prototype.pasteFromClipboard=function(t,e){var i=t.clone(),o=this.grid.pasteOptions.forceAppend;if((t=this._correctIndex(t))&&this._grid.isValid(t)){if(null!=e){var n=this._data.getRows(this,e,t);null!=n&&("string"==typeof n?this._pasteSingleCell(t,n):1!=n.length||o?(n.length>1||1===n.length&&o)&&this._pasteMultiLines(t,n):this._pasteSingleLine(t,n[0]))}hs.areEquals(t,i)||this._grid.setFocusedIndex(i,!1,!1)}},e.prototype._correctIndex=function(t){if(t){var e=this._grid;if(t.normalize(e),this._grid.isValid(t)&&e.pasteOptions.selectionBase&&e.selections.count>0){var i=e.selections.getItem(0).getBounds().firstCell;t.column=i.column,t.itemIndex=i.itemIndex}}return t},e.prototype._convertValue=function(e,i,o,n,r,s){var a=void 0,l=o.dataIndex,u=e.getField(l),c=this._grid;switch(u.dataType){case t.ValueType.NUMBER:var h=c.delegate.getCellEditor(pa.getEditorType(o.editor));a=NaN;var p=void 0;if(n){var d=void 0;if(i.applyNumberFormat||i.applyMaxLength){var f=c.body.getCell(s,!1);"object"!=typeof(d=o.getCellStyle(f))&&(d=void 0);var g=d&&d.editor||o.editor;"number"===pa.getEditorType(g)&&((h=c.delegate.getCellEditor("number")).initOptions(),h.applyOptions(g))}var y=o.name;if(i.applyNumberFormat){var _=h&&h.editFormat||d&&d.numberFormat||o.numberFormat||c.formatOptions.numberFormat;_&&(p=new We(_))}var m=i.numberCharExpOfCol(y);m&&(n=n.replace(m,""));var v=i.numberSeparatorOfCol(y);if(v&&(n=n.replace(v,".")),a=p?+parseFloat(n).toFixed(p.maxDigits):parseFloat(n),i.applyMaxLength){var b=String(a).split(".");h&&h.maxIntegerLength>0&&(b[0]=b[0].substr(0,h.maxIntegerLength)),n=b.join("."),h&&h.maxLength>0&&(n=n.substr(0,h.maxLength)),a=parseFloat(n)}}else""==n&&(a=null);break;case t.ValueType.DATETIME:a=null;var C=i.dateReaders;if(n&&C)for(var w=0;w<C.length&&!(a=C[w].toDate(n,!1));w++);null===a&&(a=new Date(n),isNaN(a.getTime())&&(a=null)),null===a&&(a=u.readValue(n));break;case t.ValueType.BOOLEAN:a=void 0;var S=i.boolReader;n&&S&&(a=S.toBoolStrict(n)),void 0===a&&(a=u.readValue(n));break;default:if(n=String(n)){var E=c.delegate.getCellEditor(pa.getEditorType(o.editor));if(E instanceof Ra){E.initOptions(),E.applyOptions(o.editor);var x=i.checkDomainOnly&&E.domainOnly,O=i.convertLookupLabel,R=-1,I=[],T=[];if(x||O)if(E.values&&E.values.length>0)T=E.values,I=E.labels;else if(o.lookupSource){var P=o.lookupSource,D=o.lookupKeyFieldIds,k=[];for(w=0;w<D.length-1;w++)k.push(r[D[w]]);var A=P.getTextDomain(k);T=A&&A.keys,I=A&&A.values}else o.values&&o.values.length>0&&(T=o.values,I=o.labels);n=O&&T&&I&&T.indexOf(n)<0&&(R=I.indexOf(n))>=0?T[R]:n,n=T&&T.indexOf(n)>=0?n:x?"":n}else i.applyMaxLength&&E&&E instanceof ya&&E.maxLength>0&&(n=n.substr(0,E.maxLength)),o.textInputCase==t.TextInputCase.LOWER?n=n.toLocaleLowerCase():o.textInputCase==t.TextInputCase.UPPER&&(n=n.toLocaleUpperCase())}a=n}return a},e.prototype._fireRowsPasted=function(t){for(var e=this._grid,i=[],o=0;o<t.length;o++)i.push(e.getItemIndexOfRow(t[o]));i.length>0&&e._fireItemsPasted(i)},e.prototype._cellWritable=function(e,i,o){var n=this._grid,r=n._fireCellPasting(e,o);if("boolean"==typeof r)return r;if(!n.pasteOptions.checkReadOnly)return!0;var s=n.body.getIndexCellStyle(e);if(s&&(null!=s.readOnly||null!=s.editable))return null!=s.editable?s.editable&&!s.readOnly:!s.readOnly;var a=n.body.getRowStyle(e.item,e.itemIndex<n.fixedOptions.rowCount);if("object"==typeof a&&(null!=a.readOnly||null!=a.editable))return null!=a.editable?a.editable&&!a.readOnly:!a.readOnly;var l=n.fixedOptions;if((e.colFixed||e.rightFixed)&&!l.editable||e.rowFixed&&!l.rowEditable)return!1;var u,c=e.item&&e.item.itemState;switch(i||c){case t.ItemState.NORMAL:case t.ItemState.FOCUSED:case t.ItemState.UPDATING:u=n.canUpdate(e.item,e.dataField);break;default:u=!0}var h=this.grid.getBodyCellAt(e,!1);if(h&&h.renderer2&&h.renderer2.canEdit())return u&&!e.dataColumn.readOnly;if(!h){var p=e.dataColumn.renderer;if(p&&"check"===p.type&&null!=p.editable)return u&&p.editable&&!e.dataColumn.readOnly}return u&&e.dataColumn.isWritable()},e.prototype._applyMaskValue=function(t,e){var i,o=this.grid.body.getIndexCellStyle(t);if(o.editor&&o.editor.mask?i=o.editor.mask:o.editor||(i=t.dataColumn.editor&&t.dataColumn.editor.mask),i){var n=new fa(null,i);return n.clearBuffer(),n.writeBuffer(e,!0),n.checkValid()?n.getStripValue():null}return e},e.prototype._applyInputChars=function(t,e){if(!this.grid.pasteOptions.applyInputChars)return e;var i,o,n=this.grid.body.getIndexCellStyle(t).editor||t.dataColumn.editor;return n?((o=n.inputCharacters)&&(i=new RegExp("[^"+o+"]","g")).test(e)&&(e=e.replace(i,"")),(o=n.ignoreCharacters)&&(i=new RegExp("["+o+"]","g")).test(e)&&(e=e.replace(i,"")),e):e},e.prototype._pasteSingleCell=function(t,e){var i,o=this._grid,n=o.dataSource,r=t.dataColumn,s=o.pasteOptions;if(null!=e&&n&&r&&!o.editOptions.readOnly&&t.item.canEdit()){e.lastIndexOf("\r\n")==e.length-1&&(e=e.substr(0,e.length-2)),e.lastIndexOf("\n")==e.length-1&&(e=e.substr(0,e.length-1));var a=this._convertValue(n,s,r,e,t.item&&t.item.getRowData(),t);if(a=s.applyEditMask?this._applyMaskValue(t,a):a,a=this._applyInputChars(t,a),this._cellWritable(t,null,a))if(o.isItemEditing()||/*!grid.editOptions.commitByCell &&*/s.startEdit&&o.edit(t)){i=t.item;var l=[],u=[];u[t.dataField]=a,l[t.dataField]=i.getData(t.dataField),o.setCellUpdateEventLock(s.noEditEvent);try{i.setData(r.dataIndex,a)}finally{o.setCellUpdateEventLock(!1)}o.validateCellCommit(t,t.item.getData(t.dataField)),o.editOptions.commitByCell&&o.commit(!1,!1,!0),o._fireEditItemPasted(i,[t.dataField],l,u),o.refreshView()}else{this._pasting=!0;try{var c=o.validationManager,h=s.forceRowValidation,p=s.forceColumnValidation;i=t.item;var d=this._appendingItem.values=h||p?i.getRowData():[];d[r.dataIndex]=a;var f=bo(i.itemState);if(this._appendingItem.dataRow=i.dataRow,this._appendingItem.setIndex(i.index),this._appendingIndex.column=null,this._appendingIndex.itemIndex=t.itemIndex,h&&c.validateRow(this._appendingItem,f,!0,!0),p){this._appendingIndex.column=r;try{c.validateCell(this._appendingIndex,f,!0)}catch(t){if(!(t instanceof hr))throw t;if(Y(t.level,o.editOptions.commitLevel)<0)throw t}}c.clearInvalidCell(this._appendingIndex),o.updatePastedRow(i,d,!h)}finally{this._pasting=!1}}}},e.prototype._pasteSingleLine=function(e,i){var o,n,r,s,a,l,u,c=this._grid,h=c.dataSource,p=c.pasteOptions,d=c.editOptions,f=!1;if(h&&!d.readOnly&&h){if(c.isItemEditing()||/*!editOptions.commitByCell && */p.startEdit&&c.edit(e)){var g=[],y=[],_=[],m=e.column;for(n=e.item,r=Math.min(i.columns.length,i.values.length),s=0;s<r;s++){var v=i.columns[s],b=i.values[s];for(a=0;a<b.length;a++){u=v[a];var C=b[a];if(u){var w=hs.temp(c,e.itemIndex,u),S=n.getData(u.dataIndex);o=this._convertValue(h,p,u,C,n&&n.getRowData(),w),o=p.applyEditMask?this._applyMaskValue(w,o):o,o=this._applyInputChars(w,o),c.setCellUpdateEventLock(p.noEditEvent);try{(l=this._cellWritable(w,null,o))&&n.setData(u.dataIndex,o)}finally{c.setCellUpdateEventLock(!1)}l&&(e.column=u,c.validateCellCommit(e,n.getData(u.dataIndex)),g.push(u.dataIndex),y[u.dataIndex]=S,_[u.dataIndex]=o,f=!0)}}}f&&(d.commitByCell&&c.commit(!1),c._fireEditItemPasted(n,g,y,_),e.column=m,c.refreshView())}else{this._pasting=!0;try{var E=c.validationManager,x=p.forceRowValidation,O=p.forceColumnValidation,R=this._appendingItem;for(n=e.item,R.setIndex(n.index),R.dataRow=n.dataRow,this._appendingIndex.column=null,this._appendingIndex.itemIndex=e.itemIndex,_=R.values=x||O?n.getRowData():[],r=Math.min(i.columns.length,i.values.length),v=void 0,b=void 0,s=0;s<r;s++)for(v=i.columns[s],b=i.values[s],a=0;a<b.length;a++)(u=v[a])&&(w=ps.tempItem(c,R,u),o=this._convertValue(h,p,u,b[a],R&&R.getRowData(),w),o=p.applyEditMask?this._applyMaskValue(w,o):o,o=this._applyInputChars(w,o),(l=this._cellWritable(w,null,o))&&(_[u.dataIndex]=o,f=!0));if(f){var I=bo(n.itemState);if(x&&E.validateRow(R,I,!0,!0),O)for(s=0;s<r;s++)for(v=i.columns[s],b=i.values[s],a=0;a<b.length;a++){this._appendingIndex.column=v[a];try{E.validateCell(this._appendingIndex,I,!0)}catch(t){if(!(t instanceof hr))throw t;if(Y(t.level,d.commitLevel)<0)throw t}}E.clearInvalidCells(n.dataId),c.updatePastedRow(n,_,!x)}}finally{this._pasting=!1}}c.selections.clear(),c.selections.add(e,new hs(c,e.itemIndex,this._data.lastLayout()),t.SelectionStyle.BLOCK)}},e.prototype._pasteMultiLines=function(e,i){var o=this._grid,n=o.dataSource;if(n){var r=o.pasteOptions,s=r.forceAppend,a=r.checkReadOnly;if(a&&o.editOptions.readOnly)return;var l=r.noDataEvent,u=i.length,c=e.itemIndex,h=n.fieldCount,p=o.getDataColumns(!1),d=p.length,f=o.validationManager,g=r.forceRowValidation,y=r.forceColumnValidation,_=this._appendingItem,m=this._appendingIndex,v=void 0,b=void 0,C=void 0,w=void 0,S=r.eventEachRow,E=[];r.commitEdit&&o.commit(!1)||o.cancel();var x=o.itemCount;l&&n.beginUpdate();var O=void 0,R=void 0;if(!o.isTree()){var I=o.itemSource;O=I.filterMode,R=I.sortMode,I.filterMode=t.FilterMode.EXPLICIT,I.sortMode=t.SortMode.EXPLICIT}try{for(this._pasting=!0,v=0;v<u&&c<x&&!s;v++)try{if(($=o.getItem(c)).itemState==t.ItemState.APPENDING)break;for(;$&&$.dataRow<0;)c++,$=o.getItem(c);if(null==$)break;var T=i[v],P=_.values=g||y?$.getRowData():[],D=g||y?$.getRowData():[],k=!1,A=[];for(_.setIndex($.index),_.dataRow=$.dataRow,C=Math.min(T.columns.length,T.values.length),b=0;b<C;b++){var L=T.columns[b],M=T.values[b];for(w=0;w<M.length;w++)if((B=L[w])&&B instanceof Hr){var F=ps.tempItem(o,_,B),N=this._convertValue(n,r,B,M[w],_&&_.getRowData(),F);N=r.applyEditMask?this._applyMaskValue(F,N):N,N=this._applyInputChars(F,N),(G=this._cellWritable(F,null,N))&&(k=k||G||!a,A.push(B.dataIndex),D[B.dataIndex]=$.getData(B.dataIndex),P[B.dataIndex]=N)}}if(k)try{m.column=null,m.itemIndex=$.index;var V=bo($.itemState);if(g&&f.validateRow(_,V,!0,!0),y)for(w=0;w<d;w++){var B=p[w];m.column=B;try{f.validateCell(m,V,!0)}catch(t){if(!(t instanceof hr))throw t;if(Y(t.level,o.editOptions.commitLevel)<0)throw t}}o.updatePastedRow($,P,!g),f.clearInvalidCells(_.dataId),S&&o._fireEditItemPasted($,A,D,P),E.push($.dataRow)}catch(t){if(r.stopOnError)throw t}c++}catch(i){throw c=Math.max(e.itemIndex,c-1),o.setFocusedIndex(e,!1),o.selections.clear(),o.selections.add(e,new hs(o,c,this._data.lastLayout()),t.SelectionStyle.BLOCK),i}if(v<u&&r.enableAppend){for(;v<u;v++){T=i[v],P=_.values=[],D=[],_.dataRow=-1,_.setIndex(-1);try{for(A=[],C=Math.min(T.columns.length,T.values.length),b=0;b<C;b++)for(L=T.columns[b],M=T.values[b],w=0;w<M.length;w++){var G;if(B=L[w])F=ps.tempItem(o,_,B),N=this._convertValue(n,r,B,M[w],P,F),N=r.applyEditMask?this._applyMaskValue(F,N):N,N=this._applyInputChars(F,N),(G=this._cellWritable(F,t.ItemState.APPENDING,N))&&(A.push(B.dataIndex),P[B.dataIndex]=N,D[B.dataIndex]=void 0)}if(r.fillColumnDefaults)for(w=0;w<d;w++)(B=p[w]).dataIndex>-1&&void 0===P[B.dataIndex]&&void 0!==B.defaultValue&&(P[B.dataIndex]=B.defaultValue);if(r.fillFieldDefaults)for(w=0;w<h;w++)if(void 0===P[w]){var j=n.getField(w);void 0!==j.defaultValue&&(P[w]=j.defaultValue)}try{if(this._appendingIndex.column=null,this._appendingIndex.itemIndex=-1,g&&f.validateRow(_,!0,!0,!0),r.forceColumnValidation)for(w=0;w<d;w++){B=p[w],this._appendingIndex.column=B;try{f.validateCell(this._appendingIndex,!0,!0)}catch(t){if(!(t instanceof hr))throw t;if(Y(t.level,o.editOptions.commitLevel)<0)throw t}}var H=o.appendPastedRow(P);if(S){var $=o.getItem(o.getItemIndexOfRow(H));o._fireEditItemPasted($,A,D,P)}E.push(H)}catch(t){if(r.stopOnError)throw t}}catch(i){throw c=Math.max(e.itemIndex,o.itemCount-1),o.setFocusedIndex(e,!1),o.selections.clear(),o.selections.add(e,new hs(e.grid,c,this._data.lastLayout()),t.SelectionStyle.BLOCK),i}}c=l?-1:o.itemCount}this._fireRowsPasted(E)}catch(t){throw this._fireRowsPasted(E),t}finally{if(this._pasting=!1,l&&(n.endUpdate(),c<0&&(c=n.rowCount)),!o.isTree()){var W=o.itemSource;(W.isFiltered(null)&&W.filterMode!==O||W.sorted&&W.sortMode!==R)&&(W.filterMode=O,W.sortMode=R,W._refreshItems())}}s&&E.length>0&&((e=e.clone()).itemIndex=c-E.length),o.setFocusedIndex(e,!1),o.selections.clear(),o.selections.add(e,new hs(e.grid,c-1,this._data.lastLayout()),t.SelectionStyle.BLOCK)}},e}(),Va=function(e){function i(t){var i=e.call(this,t)||this;return i._cellButtonWidth=16,i._cellButtonHeight=16,i._editButtonWidth=16,i._editButtonHeight=16,i._errorIconWidth=16,i._errorIconHeight=16,i._showChangeMarker=!1,i._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},i._buttonHeight=16,i._dataCell=new Zo,i._hiddenCell=new tn,i._literalCell=new en,i._seriesCell=new on,i._mergedCell=new nn,i._cs=new Br,i._rowCs=new Co,i}return n(i,e),i.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._hiddenCell=this._hiddenCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._mergedCell=this._mergedCell.dispose(),this._cs=null,this._rowCs=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowStyleCallback",{get:function(){return this._rowStyleCallback},set:function(t){t!==this._rowStyleCallback&&(this._rowStyleCallback=t,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ariaLabelCallback",{get:function(){return this._ariaLabelCallback},set:function(t){this._ariaLabelCallback=t,this.refreshOwner()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellButtonWidth",{get:function(){return this._cellButtonWidth},set:function(t){t!=this._cellButtonWidth&&(this._cellButtonWidth=t,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellButtonHeight",{get:function(){return this._cellButtonHeight},set:function(t){t!=this._cellButtonHeight&&(this._cellButtonHeight=t,this.$_resetButtonHeight(),this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editButtonWidth",{get:function(){return this._editButtonWidth},set:function(t){t!=this._editButtonWidth&&(this._editButtonWidth=t,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editButtonHeight",{get:function(){return this._editButtonHeight},set:function(t){t!=this._editButtonHeight&&(this._editButtonHeight=t,this.$_resetButtonHeight(),this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"errorIconWidth",{get:function(){return this._errorIconWidth},set:function(t){t!=this._errorIconWidth&&(this._errorIconWidth=t,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"errorIconHeight",{get:function(){return this._errorIconHeight},set:function(t){t!=this._errorIconHeight&&(this._errorIconHeight=t,this.$_resetButtonHeight(),this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonHeight",{get:function(){return this._buttonHeight},enumerable:!1,configurable:!0}),i.prototype.$_resetButtonHeight=function(){this._buttonHeight=Math.max(this._cellButtonHeight,this._editButtonHeight,this._errorIconHeight)},i.prototype.getCell=function(t,e){return this.getCellAt(t.item,t.column,e)},i.prototype.getCellAt=function(e,i,o){var n,r=this._grid;if(o?n=this._mergedCell:i instanceof Hr?e.index<0||e instanceof Ma?(n=this._hiddenCell,this._hiddenCell.setItem(e)):n=this._dataCell:n=i instanceof $r?this._seriesCell:i instanceof en?this._literalCell:this._dataCell,n.setIndex2(r,e?e.index:-1,i),i instanceof Hr){var s=r.validationManager.getError(n.index);s?(n.error=s.message,n.errorLevel=s.level):(n.error=null,n.errorLevel=t.ValidationLevel.IGNORE)}return n},i.prototype.getHidden=function(t,e){return this._hiddenCell.setIndex(t),this._hiddenCell.setItem(e),this._hiddenCell},i.prototype.getCellSimple=function(t,e){var i=t.column,o=e?this._mergedCell:i instanceof $r?this._seriesCell:i instanceof en?this._literalCell:this._dataCell;return o.setIndex(t),o},i.prototype.getIndexCellStyle=function(t,e){var i=this.getCell(t,!1);return this.getCellStyle(i,this._cs.clear(),!1,e)},i.prototype.getCellStyle=function(t,e,i,o){void 0===o&&(o=!0);var n,r=t.valueColumn,s=this._cellStyleCallback;s&&(n=s(this._grid.handler,t),e.assign(n)),r&&(n=r.getCellStyle(t),e.assign(n));var a=this.getUserCellStyle(t.index.dataRow,t.valueColumn.name);a&&e.assign(a);var l=e.styleName||r&&r.styleName||"";return o&&(e.styleName="rg-data-cell "+(i?"rg-merged-cell ":"")+l),e},i.prototype.getCellFormatters=function(t,e,i,o){if(e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),i){var n=i.grid,r=n.body.getCell(i,!1);e=(o=n.body.getCellStyle(r,o)).toFormatter(e)}return e},i.prototype.getRowStyle=function(t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=!0);var r=this._grid,s=this._rowCs;if(s.clear(),n){var a=this._rowStyleCallback;if(a){var l=a(r.handler,t,e)||{};s.assign(l)}var u=this.getUserCellStyle(t.dataRow,-1);u&&s.assign(u)}if(!s.styleName){var c=i.ROW_STYLE;t.index%2&&r.displayOptions.useAlternateRowStyle&&(c+=i.ALTERNATE_ROW_STYLE),e&&(c+=i.FIXED_ROW_STYLE),o||(c+=i.STATE_ROW_STYLES[t.rowState]||""),t.checked&&(c+=i.CHECKED_ROW_STYLE),s.styleName=c}return s},i.prototype.addUserCellStyle=function(t,e,i){var o=this._grid,n=o.getItemOfRow(t,!0);n&&o.itemSource.addCellStyle(n.dataId,e,i)&&o.refreshView()},i.prototype.removeUserCellStyle=function(t,e){var i=this._grid,o=null!=t?i.getItemOfRow(t,!0):null;(o||null==t)&&i.itemSource.removeCellStyle(o?o.dataRowId:null,e)&&i.refreshView()},i.prototype.getUserCellStyle=function(t,e){var i=this._grid,o=i.getItemOfRow(t,!0);if(o)return i.itemSource.getUserCellStyle(o.dataId,e)},i.prototype._prepareUpdate=function(){var t=this._grid=this.owner;this._ds=t.dataSource,this._showChangeMarker=t.displayOptions.showChangeMarker},i.ROW_STYLE=" rg-data-row",i.ALTERNATE_ROW_STYLE=" rg-alternate-row",i.FIXED_ROW_STYLE=" rg-fixed-row",i.CHECKED_ROW_STYLE=" rg-checked-row",i.STATE_ROW_STYLES={created:" rg-created-row",deleted:" rg-deleted-row",createAndDeleted:" rg-deleted-row",updated:" rg-updated-row"},i}(zo),Ba=function(t){function e(e){var i=t.call(this)||this;return i._grid=e,i}return n(e,t),e.prototype._doDispose=function(){return this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),e.prototype._changed=function(){this._grid&&this._grid.optionsChanged(this)},e.prototype._invalidateOwner=function(){this._grid&&this._grid.invalidate()},e.prototype._layoutOwner=function(){this._grid&&this._grid.invalidateLayout()},e.prototype._refreshOwner=function(){this._grid&&this._grid.refreshView()},e}(kt),Ga=function(t){function e(e){var i=t.call(this,e)||this;return i._colCount=0,i._rightCount=0,i._rowCount=0,i._rightFixed=!0,i._exceptFromFiltering=!0,i._exceptFromSorting=!0,i._editable=!0,i._rowEditable=!0,i._resizable=!1,i._rowResizable=!1,i._movable=!1,i._colBarWidth=3,i._rightBarWidth=3,i._rowBarHeight=3,i._mergeRows=!1,i._blankRows=!1,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"colCount",{get:function(){return this._colCount},set:function(t){(t=Math.max(0,t))!=this._colCount&&(this._colCount=t,this.grid&&this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightCount",{get:function(){return this._rightCount},set:function(t){(t=Math.max(0,t))!=this._rightCount&&(this._rightCount=t,this.grid&&this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._rowCount},set:function(t){(t=Math.max(0,t))!=this._rowCount&&(this._rowCount=t,this.$_resetItemSource())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightFixed",{get:function(){return this._rightFixed},set:function(t){t!=this._rightFixed&&(this._rightFixed=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exceptFromFiltering",{get:function(){return this._exceptFromFiltering},set:function(t){t!=this._exceptFromFiltering&&(this._exceptFromFiltering=t,this.$_resetItemSource())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exceptFromSorting",{get:function(){return this._exceptFromSorting},set:function(t){t!=this._exceptFromSorting&&(this._exceptFromSorting=t,this.$_resetItemSource())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowEditable",{get:function(){return this._rowEditable},set:function(t){t!=this._rowEditable&&(this._rowEditable=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowResizable",{get:function(){return this._rowResizable},set:function(t){t!=this._rowResizable&&(this._rowResizable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colBarWidth",{get:function(){return this._colBarWidth},set:function(t){(t=Math.max(0,t))!=this._colBarWidth&&(this._colBarWidth=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightBarWidth",{get:function(){return this._rightBarWidth},set:function(t){(t=Math.max(0,t))!=this._rightBarWidth&&(this._rightBarWidth=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowBarHeight",{get:function(){return this._rowBarHeight},set:function(t){(t=Math.max(0,t))!=this._rowBarHeight&&(this._rowBarHeight=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mergeRows",{get:function(){return this._mergeRows},set:function(t){t!=this._mergeRows&&(this._mergeRows=t,this.grid._columnMergeRuleChanged(null))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blankRows",{get:function(){return this._blankRows},set:function(t){t!=this._blankRows&&(this._blankRows=t,this.$_resetItemSource(!0))},enumerable:!1,configurable:!0}),e.prototype._refreshOwner=function(){t.prototype._refreshOwner.call(this),this.grid&&this.grid.invalidateColumns()},e.prototype.$_resetItemSource=function(t){var e,i=this.grid;i&&(e=i.itemSource)&&e.setFixed(this._rowCount,!this._exceptFromSorting,!this._exceptFromFiltering,t)},e.ROW_BAR_STYLE="rg-fixed-row-bar",e.ROW_BAR_CELL_STYLE="rg-fixed-row-bar-cell",e.COLUMN_BAR_STYLE="rg-fixed-column-bar",e}(Ba),ja=function(e){function i(i){var o=e.call(this,i)||this;return o._refreshMode=t.RefreshMode.ALL,o._columnResizable=!0,o._columnMovable=!0,o._minCellWidth=8,o._defaultColumnWidth=100,o._fitStyle=t.GridFitStyle.NONE,o._rowResizable=!1,o._eachRowResizable=!1,o._autoClearHeights=!0,o._rowHeight=0,o._refCalcHeights=!0,o._dataHeights=null,o._minTableRowHeight=23,o._minRowHeight=23,o._maxRowHeight=0,o._hscrollBar=!0,o._vscrollBar=!0,o._liveScroll=!0,o._scrollDuration=0,o._hscrollDuration=0,o._hintDelay=0,o._showTooltip=!1,o._rowChangeDelay=0,o._horzPageScroll=!1,o._emptyMessage="    DisplayOptions.emptyMessage  .",o._showEmptyMessage=!1,o._focusVisible=!0,o._focusType="layer",o._rowFocusType=t.RowMaskType.NONE,o._groupFocusVisible=!1,o._wheelEnabled=!0,o._wheelScrollLines=3,o._wheelScrollHorz=16,o._wheelAccelDelay=0,o._wheelAccelScroll=null,o._wheelDeltaY=0,o._wheelEventPropagate=!0,o._rightClickable=!0,o._remergeWhenColumnMoved=!0,o._editItemMerging=!1,o._showInnerFocus=!0,o._toastZIndex=3e3,o._popupDropdownCount=0,o._selectionMode=t.SelectionMode.SINGLE,o._selectionStyle=t.SelectionStyle.BLOCK,o._selectionDisplay=t.SelectionDisplay.CELL,o._selectAndImmediateDrag=!1,o._selectAtSingleRow=!1,o._rowHoverType=t.RowMaskType.NONE,o._rowBlockType=t.RowMaskType.NONE,o._showEmptyTooltip=!1,o._showChangeMarker=!0,o._showNativeEditButton=!1,o._baseZindex=2e3,o._useAlternateRowStyle=!0,o._useFocusClass=!1,o._watchDisplayChange=!0,o._syncGridHeight=t.SyncGridHeight.NONE,xt.isMobile()&&(o._selectionStyle=t.SelectionStyle.NONE),(xt.ieNine||xt.ieTen)&&(o._focusType="line"),i.setWatchTimer(o._watchDisplayChange),o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"refreshMode",{get:function(){return this._refreshMode},set:function(t){t!=this._refreshMode&&(this._refreshMode=t,this.grid.setNeedRefresh(!0),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnResizable",{get:function(){return this._columnResizable},set:function(t){this._columnResizable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnMovable",{get:function(){return this._columnMovable},set:function(t){this._columnMovable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultColumnWidth",{get:function(){return this._defaultColumnWidth},set:function(t){t!=this._defaultColumnWidth&&(this._defaultColumnWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fitStyle",{get:function(){return this._fitStyle},set:function(t){t!=this._fitStyle&&(this._fitStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fitStyleIncludeFixed",{get:function(){return this._fitStyleIncludeFixed},set:function(t){t!=this._fitStyleIncludeFixed&&(this._fitStyleIncludeFixed=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowResizable",{get:function(){return this._rowResizable},set:function(t){this._rowResizable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"eachRowResizable",{get:function(){return this._eachRowResizable},set:function(t){this._eachRowResizable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoClearHeights",{get:function(){return this._autoClearHeights},set:function(t){t!=this._autoClearHeights&&(this._autoClearHeights=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"refCalcHeights",{get:function(){return this._refCalcHeights},set:function(t){t!=this._refCalcHeights&&(this._refCalcHeights=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(t){t!=this._rowHeight&&(this._rowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataHeights",{get:function(){return this._dataHeights},set:function(t){t&&t.length>0?this._dataHeights=t.slice():this._dataHeights=null,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minTableRowHeight",{get:function(){return this._minTableRowHeight},set:function(t){(t=Math.max(i.MIN_TABLE_ROW_HEIGHT,t))!=this._minTableRowHeight&&(this._minTableRowHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){(t=Math.max(i.MIN_TABLE_ROW_HEIGHT,t))!=this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxRowHeight",{get:function(){return this._maxRowHeight},set:function(t){(t=Math.max(0,t))!=this._maxRowHeight&&(this._maxRowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minCellWidth",{get:function(){return this._minCellWidth},set:function(t){(t=Math.max(0,t))!=this._minCellWidth&&(this._minCellWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hscrollBar",{get:function(){return this._hscrollBar},set:function(t){t!=this._hscrollBar&&(this._hscrollBar=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vscrollBar",{get:function(){return this._vscrollBar},set:function(t){t!=this._vscrollBar&&(this._vscrollBar=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"liveScroll",{get:function(){return this._liveScroll},set:function(t){t!=this._liveScroll&&(this._liveScroll=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollDuration",{get:function(){return this._scrollDuration},set:function(t){this._scrollDuration=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hscrollDuration",{get:function(){return this._hscrollDuration},set:function(t){this._hscrollDuration=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hintDelay",{get:function(){return this._hintDelay},set:function(t){this._hintDelay=Math.max(t,0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowChangeDelay",{get:function(){return this._rowChangeDelay},set:function(t){this._rowChangeDelay=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"horzPageScroll",{get:function(){return this._horzPageScroll},set:function(t){this._horzPageScroll=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"emptyMessage",{get:function(){return this._emptyMessage},set:function(t){t!=this._emptyMessage&&(this._emptyMessage=t,this.grid.setEmptyMessage(t))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showEmptyMessage",{get:function(){return this._showEmptyMessage},set:function(t){t!=this._showEmptyMessage&&(this._showEmptyMessage=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusVisible",{get:function(){return this._focusVisible},set:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusType",{get:function(){return this._focusType},set:function(t){t!==this.focusType&&(this._focusType=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowFocusType",{get:function(){return this._rowFocusType},set:function(t){t!=this._rowFocusType&&(this._rowFocusType=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFocusVisible",{get:function(){return this._groupFocusVisible},set:function(t){t!==this._groupFocusVisible&&(this._groupFocusVisible=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelEnabled",{get:function(){return this._wheelEnabled},set:function(t){this._wheelEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelScrollLines",{get:function(){return this._wheelScrollLines},set:function(t){this._wheelScrollLines=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelScrollHorz",{get:function(){return this._wheelScrollHorz},set:function(t){this._wheelScrollHorz=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelAccelDelay",{get:function(){return this._wheelAccelDelay},set:function(t){this._wheelAccelDelay=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelAccelScroll",{get:function(){return this._wheelAccelScroll},set:function(t){this._wheelAccelScroll=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelDeltaY",{get:function(){return this._wheelDeltaY},set:function(t){this._wheelDeltaY=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelEventPropagate",{get:function(){return this._wheelEventPropagate},set:function(t){this._wheelEventPropagate=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightClickable",{get:function(){return this._rightClickable},set:function(t){this._rightClickable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"remergeWhenColumnMoved",{get:function(){return this._remergeWhenColumnMoved},set:function(t){this._remergeWhenColumnMoved=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editItemMerging",{get:function(){return this._editItemMerging},set:function(t){t!=this._editItemMerging&&(this._editItemMerging=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){t!=this._showInnerFocus&&(this._showInnerFocus=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toastZIndex",{get:function(){return this._toastZIndex},set:function(t){this._toastZIndex=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupDropdownCount",{get:function(){return this._popupDropdownCount},set:function(t){this._popupDropdownCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){t!=this._selectionMode&&(this._selectionMode=t,this.grid.clearAddSelection())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionStyle",{get:function(){return this._selectionStyle},set:function(t){t!=this._selectionStyle&&(this.grid.selections.clear(),this._selectionStyle=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionDisplay",{get:function(){return this._selectionDisplay},set:function(t){t!=this._selectionDisplay&&(this._selectionDisplay=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectAndImmediateDrag",{get:function(){return this._selectAndImmediateDrag},set:function(t){this._selectAndImmediateDrag=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectAtSingleRow",{get:function(){return this._selectAtSingleRow},set:function(t){this._selectAtSingleRow=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowHoverType",{get:function(){return this._rowHoverType},set:function(t){t!=this._rowHoverType&&(this._rowHoverType=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowBlockType",{get:function(){return this._rowBlockType},set:function(t){t!=this._rowBlockType&&(this._rowBlockType=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowBlockCallback",{get:function(){return this._rowBlockCallback},set:function(e){e!==this._rowBlockCallback&&(this._rowBlockCallback=e,this._rowBlockType!=t.RowMaskType.NONE&&this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showEmptyTooltip",{get:function(){return this._showEmptyTooltip},set:function(t){this._showEmptyTooltip=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showChangeMarker",{get:function(){return this._showChangeMarker},set:function(t){t!=this._showChangeMarker&&(this._showChangeMarker=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollMessageCallback",{get:function(){return this._scrollMessageCallback},set:function(t){this._scrollMessageCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showNativeEditButton",{get:function(){return this._showNativeEditButton},set:function(t){t!=this._showNativeEditButton&&(this._showNativeEditButton=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseZindex",{get:function(){return this._baseZindex},set:function(t){this._baseZindex=Math.max(t,0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useAlternateRowStyle",{get:function(){return this._useAlternateRowStyle},set:function(t){t!=this._useAlternateRowStyle&&(this._useAlternateRowStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useFocusClass",{get:function(){return this._useFocusClass},set:function(t){t!=this._useFocusClass&&(t||(this.grid.setFocusedClass(this.grid.focusedIndex,!1),this.grid.setFocusedRowClass(this.grid.focusedIndex,!1)),this._useFocusClass=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editButtonHeight",{get:function(){return this.grid.body.editButtonHeight},set:function(t){this.grid.body.editButtonHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"watchDisplayChange",{get:function(){return this._watchDisplayChange},set:function(t){t!=this._watchDisplayChange&&(this._watchDisplayChange=t,this.grid.setWatchTimer(t))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"syncGridHeight",{get:function(){return this._syncGridHeight},set:function(e){e!=this._syncGridHeight&&(this._syncGridHeight=e,e!==t.SyncGridHeight.ALWAYS&&this.grid.recallHeight(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowHeightCallback",{get:function(){return this._rowHeightCallback},set:function(t){this._rowHeightCallback=t,this.grid.clearRowHeights(!1),this._changed()},enumerable:!1,configurable:!0}),i.MIN_TABLE_ROW_HEIGHT=15,i}(Ba),Ha=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.width=t,this.height=e}return t.empty=function(){return new t},t.create=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),new t(e,i)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.width||0===this.height},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equals=function(t){return t===this||t&&this.width===t.width&&this.height===t.height},t.prototype.setEmpty=function(){return this.width=this.height=0,this},t.prototype.set=function(t,e){return this.width=t,this.height=e,this},t.prototype.round=function(){var t=this.clone();return t.width>>>=0,t.height>>>=0,t},t.prototype.toString=function(){return"{width: "+this.width+", height: "+this.height+"}"},t.EMPTY=new t,t}(),$a=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof Rh)return t;t=t.parent}return null},enumerable:!1,configurable:!0}),e.prototype.measure=function(t,e,i){return this._setClassName(this._dom),this._doMeasure(t,e,i)},e.prototype.layoutContent=function(t){(this.grid._loading||this.visible)&&(this._doPrepareContent(t),this._doLayoutContent(t))},e.prototype._getCssSelector=function(){return""},e.prototype._getCssDisplay=function(){return"table"},e.prototype._doDraw=function(t){this._doRender(t)},e.prototype._doMeasure=function(t,e,i){return new Ha(e,i)},e.prototype._doPrepareContent=function(t){},e.prototype._doLayoutContent=function(t){},e.prototype._doRender=function(t){},e}(Ys),Wa=function(t){function e(e,i,o){void 0===o&&(o=null);var n=t.call(this,e,o)||this;return n._ff=xt.isFirefox,n._chromium=xt.isChromium,n._textProp=xt.TextProp,n._cursor="default",n._model=i,n}return n(e,t),e.prototype._doDispose=function(){this._model=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),e.prototype.setCursor=function(t){t!==this._cursor&&(this._cursor=t,this._dom.style.cursor=t)},e}($a),Ua=function(t){function e(e){return t.call(this,e,"emptyGridView")||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.setMessage=function(t){this._span[xt.TextProp]=t},e.prototype._createDom=function(e){var i=t.prototype._createDom.call(this,e),o=this._span=e.createElement("span");return i.appendChild(o),i},e.prototype._getCssSelector=function(){return"rg-empty-grid"},e.prototype._doDraw=function(t){this.setMessage(this.grid.displayOptions.emptyMessage)},e}($a),za=function(t){function e(e,i,o){void 0===o&&(o=null);var n=t.call(this,e,i,o)||this;return n._explicitWidth=NaN,n}return n(e,t),e.prototype._doDispose=function(){this._tbody=this._thead=this._table=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"tableRowCount",{get:function(){return this._tbody.childElementCount},enumerable:!1,configurable:!0}),e.prototype.getCellPoint=function(t,e){return(e=e||new Ks).x+=t.offsetLeft,e.y+=t.offsetTop,e},e.prototype._getTableHidden=function(){return!0},e.prototype._getTableCaption=function(){return""},e.prototype._createDom=function(t){var e=t.createElement("div"),i=this._table=t.createElement("table");this._getTableHidden()&&i.setAttribute("aria-hidden","true"),i.setAttribute("role","grid");var o=i.createCaption();o.textContent="grid table ";var n=o.style;return n.width=n.height="0px",n.overflow="hidden",n.setProperty("padding","0px","important"),n.boxSizing="border-box",(n=i.style).setProperty("table-layout","fixed","important"),n.setProperty("width","100%","important"),i.className="rg-table",e.appendChild(i),this._thead=t.createElement("thead"),i.appendChild(this._thead),this._tbody=t.createElement("tbody"),i.appendChild(this._tbody),e},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e[v]=this[m],e.style.overflow="hidden"},e.prototype._doPrepareContent=function(t){var e=this._getExplicitWidth(t);xt.equalNumbers(e,this._explicitWidth)||(this._table.style.width=e>0?e+"px":"100%",this._explicitWidth=e),this._doPrepareTableExtents(t),this._doPrepareTable(t)},e.prototype._doDraw=function(t){this._doRender(t),this._doRenderTable(this._tbody)},e.prototype._getExplicitWidth=function(t){return NaN},e.prototype._doPrepareTableExtents=function(t){},e.prototype._doPrepareTable=function(t){this._doPrepareTableHead(t,this._thead),this._doPrepareTableRows(t,this._tbody)},e.prototype._doPrepareTableHead=function(t,e){var i,o=wt(e);0==e.childElementCount?((i=o.createElement("tr")).setAttribute("role","row"),e.appendChild(i),this._getTableHidden()&&i.setAttribute("aria-hidden","true"),(l=i.style).setProperty("border","0px none","important")):i=e.lastElementChild;for(var n=this._getCellCount(t);i.childElementCount<n;)(a=o.createElement("th")).scope="col",(l=a.style).setProperty("margin","0px","important"),l.setProperty("padding","0px","important"),l.setProperty("font-size","0px","important"),l.setProperty("line-height","0px","important"),l.height="0px",i.appendChild(a);for(;i.childElementCount>n;)i.removeChild(i.lastChild);for(var r=i.children,s=0;s<r.length;s++){var a,l;(l=(a=r[s]).style).width=this._getCellWidth(t,s)+"px"}},e.prototype._prepareTableRowCells=function(t,e){for(var i=this._getCellCount(t),o=wt(e),n=e.childElementCount;n<i;){var r=o.createElement("td");r.setAttribute("role","gridcell"),e.appendChild(r);var s=this._prepareCellContent(r,n++);r.appendChild(s)}for(;e.childElementCount>i;)s=e.lastElementChild,this._cleanCellContent(s),e.removeChild(e.lastElementChild);return e.childElementCount},e.prototype._isFixedHeight=function(t){return!0},e.prototype._getMinRowHeight=function(t){return t.minRowHeight},e.prototype._doPrepareTableRow=function(t,e,i,o){this._prepareTableRowCells(t,o);var n=this._isFixedHeight(t),r=o.children,s=this._isDataTable(),a=n?this._getTableRowHeight(t,i):this._getMinRowHeight(t),l=isNaN(a)||a<2?"0px":a-2+"px",u=o.style;o[v]=this[m],o.$_fix=n,o.$_hei=n?a:0,s||n?u.setProperty("height",a+"px"):u.removeProperty("height"),u.display="";for(var c=this._getStartCell(t)-this._getFirstCell(t),h=r.length;c<h&&c<=this._getEndCell(t);c++){var p=r[c];this._ff&&(p.style.height="100%");var d=p.firstElementChild;d||(d=this._prepareCellContent(p,c),p.appendChild(d));var f=d.style,g=n?l:"";!n&&s&&f.removeProperty("height"),g!=f.maxHeight&&(f.maxHeight=g),"hidden"!==f.overflow&&(f.overflow="hidden")}},e.prototype._doRenderTable=function(t){for(var e=t.children,i=0;i<e.length;i++){var o=e[i];this._renderRow(o,i)}},e.prototype._renderRow=function(t,e){this._doDrawRow(e,t);for(var i=t.children,o=0;o<i.length;o++){var n=i[o];this._renderCell(n.lastElementChild,e,o)}},e.prototype._renderCell=function(t,e,i){this._doDrawCell(e,i,t)},e.prototype._prepareCellContent=function(t,e){return wt(t).createElement("div")},e.prototype._cleanCellContent=function(t){},e.prototype._doDrawRow=function(t,e){},e.prototype._doDrawCell=function(t,e,i){},e.prototype._getTableRow=function(t,e){return this._tbody.children[e]},e.prototype._getTableRows=function(t,e,i){for(var o=[],n=0;n<i;n++)o.push(this._tbody.children[e+n]);return o},e.prototype._getTableCell=function(t,e){return this._tbody.children[t].children[e]},e.prototype.getCellContent=function(t,e){return this._tbody.children[t].children[e].firstElementChild},e.prototype.getContentAt=function(t){var e,i=t.grid.layoutManager,o=i.fixedItemCount,n=t.column?t.column.index:0;return e=o>0?t.itemIndex<o?t.itemIndex:t.itemIndex-i.topIndex+1:t.itemIndex-i.topIndex,this.getCellContent(e,n)},e.prototype._getFirstCell=function(t){return t.firstCell},e.prototype._getStartCell=function(t){return t.startCell},e.prototype._getLastCell=function(t){return t.lastCell},e.prototype._getEndCell=function(t){return t.endCell},e}(Wa),Ka=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._isDataTable=function(){return!1},e.prototype._doPrepareTableRows=function(t,e){for(var i=Math.max(0,this._getTableRowCount(t)),o=wt(e);e.childElementCount<i;)(s=o.createElement("tr")).setAttribute("role","row"),e.appendChild(s);for(;e.childElementCount>i;)e.removeChild(e.lastChild);for(var n=e.children,r=0;r<i;r++){var s;(s=n[r]).style.height=this._getTableRowHeight(t,r)+"px",this._doPrepareTableRow(t,r,r,s)}},e.prototype._getTableRowCount=function(t){return 1},e}(za),Ya=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._trCount=0,e._trs=1,e}return n(e,t),e.prototype._isDataTable=function(){return!0},e.prototype._getTrs=function(t){return 1},e.prototype._getTableRowCount=function(t){var e=t.fixedItemCount,i=e+t.itemCount;return i*=this._trs,i+(e>0?1:0)},e.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount,o=e*this._trs;return i>0&&e>=i?o+1:o},e.prototype._getTableRow=function(t,e){var i=this.$_getTableIndex(t,e);return this._tbody.children[i]},e.prototype._doPrepareTableRows=function(t,e){for(var i=t.$_getItems(),o=this._trs=this._getTrs(t),n=t.fixedItemCount,r=t.itemCount+n,s=this._trCount=Math.max(0,this._getTableRowCount(t)),a=wt(e);e.childElementCount<s;){var l=a.createElement("tr");l.setAttribute("role","row"),e.appendChild(l)}for(;e.childElementCount>s;)e.removeChild(e.lastChild);var u=e.children,c=0,h=0;if(n>0){for(c=0;c<n;c++)for(var p=0;p<o;p++,h++)this._doPrepareTableRow(t,c,h,u[h]);this.$_prepareFixedBar(t,u[h++])}for(;c<r&&h<s;c++){var d=i[c].isData?o:1;for(p=0;p<d&&h<s;p++,h++)this._doPrepareTableRow(t,c,h,u[h])}},e.prototype.$_prepareFixedBar=function(t,e){var i=Ct(e),o=this._prepareTableRowCells(t,e),n=t.fixedBarHeight,r=e.style;n>0?r.height=t.fixedBarHeight+"px":r.display="none";for(var s=e.children,a=0;a<o;a++){var l=s[a];l instanceof i.HTMLTableCellElement&&(l.rowSpan=1,l.style.display=""),(l=s[a].firstElementChild)&&(l.style.maxHeight="0px",l.style.overflow="hidden")}return n},e.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},e.prototype._getCellContent=function(t){return t.firstElementChild},e.prototype._updateCellContent=function(t,e,i){this._doUpdateCellContent(t,e,this._getCellContent(i))},e.prototype._doUpdateCellContent=function(t,e,i){},e}(za),qa=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,e,i)||this;return o._fixed=!1,o._index=new hs,o}return n(e,t),e.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,this._cellDom=xt.detach(this._cellDom),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"fixed",{get:function(){return this._fixed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(t){hs.areEquals(this._index,t)||(this._index.assignFrom(t),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._index.item},enumerable:!1,configurable:!0}),e.prototype.updateCell=function(t,e,i){i!=this._cellDom&&(i&&this._clearCellDom(i),this._clearCellCache(),this._cellDom=i),this.index=e.index,this._doPrepareValue(t,e),this._doUpdateContent(t,e,this._cellDom)},e.prototype.removeCellDom=function(t){void 0===t&&(t=!1),t&&this._cellDom&&this._clearCellDom(this._cellDom),this._cellDom=null,this._clearCellCache()},e.prototype._createDom=function(t){return null},e.prototype._clearCellDom=function(t){t.innerHTML=""},e.prototype._clearCellCache=function(){},Object.defineProperty(e.prototype,"valueColumn",{get:function(){return this._index.valueColumn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataColumn",{get:function(){return this._index.dataColumn},enumerable:!1,configurable:!0}),e.prototype._changed=function(){this.invalidate()},e.prototype._doPrepareValue=function(t,e){},e.prototype._doUpdateContent=function(t,e,i){},e.prototype._doLayoutContent=function(t){},e}($a),Xa=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return n(e,t),e.prototype._doPrepareValue=function(t,e){},e}(qa),Qa=function(t){function e(){var e=t.call(this)||this;return e._valueSeparator=",",e}return n(e,t),Object.defineProperty(e.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){this._valueSeparator=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.SERIES_TYPE},enumerable:!1,configurable:!0}),e.prototype._makeText=function(t,e){return e.getDisplayText(t,this._valueSeparator)||""},e.SERIES_TYPE="series",e}(En),Ja=function(t){function e(){var e=t.call(this)||this;return e._baseValue=NaN,e.$_render=function(t,e,i,o){var n=this._values;if(n&&n.length){for(var r=n.length,s=n[0],a=n[0],l=1;isNaN(s)&&l<r;)a=s=n[l++];for(;l<r;l++){var u=n[l];isNaN(u)||(u<s&&(s=u),u>a&&(a=u))}var c=isNaN(this._baseValue)?s:this._baseValue;isNaN(s)||this._renderChart(e,n,s,a,c)}}.bind(e),e}return n(e,t),e.interfaced=function(t){return xt.included(t.type,Za.TYPE,tl.TYPE,el.TYPE)},Object.defineProperty(e.prototype,"baseValue",{get:function(){return this._baseValue},set:function(t){this._baseValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstStyle",{get:function(){return this._firstStyle},set:function(t){this._firstStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastStyle",{get:function(){return this._lastStyle},set:function(t){this._lastStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"highStyle",{get:function(){return this._highStyle},set:function(t){this._highStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lowStyle",{get:function(){return this._lowStyle},set:function(t){this._lowStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"belowStyle",{get:function(){return this._belowStyle},set:function(t){this._belowStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointStyle",{get:function(){return this._pointStyle},set:function(t){this._pointStyle=t},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=wt(t),i=this._div=e.createElement("div");i.style.position="relative",i.style.height="100%",t.appendChild(i);var o=(this._svg=gn.createSVG(i)).style;o.position="absolute",o.left=o.top="0px",o.width=o.height="100%"},e.prototype._doRenderCell=function(t,e,i,o,n){var r=this._svg;r.setAttribute("class",this._getChartStyle()),this._values=this._getValues(e),gn.renderSVG2(t,r,this.$_render)},e.prototype._getPoints=function(t,e,i){for(var o=t.length,n=[],r=i-e,s=0;s<o;s++){var a=t[s],l=5+s/(o-1)*90,u=10+(isNaN(a)||0==r?80:80*(1-(a-e)/r));n.push(l,u)}return n},e.prototype._getBasePoint=function(t,e,i){var o=e-t;return 0+(isNaN(i)||0==o?100:100*(1-(i-t)/o))},e}(function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._getValues=function(t){return t.value||[]},e}(Sn)),Za=function(t){function e(){var i=t.call(this)||this;return i._chartStyle=e.CHART_STYLE,i.lastStyle=e.LAST_STYLE,i.highStyle=e.HIGH_STYLE,i.lowStyle=e.LOW_STYLE,i}return n(e,t),e.interfaced=function(t){return t.type==e.TYPE},Object.defineProperty(e.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){this._chartStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._getChartStyle=function(){return this._chartStyle},e.prototype._renderChart=function(t,e,i,o,n){for(var r,s=isNaN(n)?o:Math.max(o,n),a=isNaN(n)?i:Math.min(i,n),l=this._getPoints(e,a,s),u=e.length,c=0;c<u-1;c++)if(t.sline(null,l[2*c]+"%",l[2*c+1]+"%",l[2*(c+1)]+"%",l[2*(c+1)+1]+"%"),r=this.pointStyle){var h=l[2*c],p=l[2*c+1];t.scircle(r,h+"%",p+"%","2")}if((r=this.firstStyle)&&(h=l[0],p=l[1],t.scircle(r,h+"%",p+"%","2")),(r=this.lastStyle)&&(h=l[2*(u-1)],p=l[2*(u-1)+1],t.scircle(r,h+"%",p+"%","2")),r=this.highStyle)for(c=0;c<u;c++)e[c]>=o&&(h=l[2*c],p=l[2*c+1],t.scircle(r,h+"%",p+"%","2"));if(r=this.lowStyle)for(c=0;c<u;c++)e[c]<=i&&(h=l[2*c],p=l[2*c+1],t.scircle(r,h+"%",p+"%","2"))},e.TYPE="sparkline",e.STYLE="rg-sparkline-renderer",e.CHART_STYLE="rg-sparkline-renderer-chart",e.LAST_STYLE="rg-sparkline-renderer-last",e.HIGH_STYLE="rg-sparkline-renderer-high",e.LOW_STYLE="rg-sparkline-renderer-low",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Ja),tl=function(t){function e(){var i=t.call(this)||this;return i._chartStyle=e.CHART_STYLE,i._barWidth=.8,i.lastStyle=e.LAST_STYLE,i.highStyle=e.HIGH_STYLE,i.lowStyle=e.LOW_STYLE,i}return n(e,t),e.interfaced=function(t){return t.type===e.TYPE},Object.defineProperty(e.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){this._chartStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){this._barWidth=Math.min(1,Math.max(0,t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._getChartStyle=function(){return this._chartStyle},e.prototype._renderChart=function(t,e,i,o,n){for(var r,s=isNaN(n)?o:Math.max(o,n),a=isNaN(n)?i:n,l=e.length,u=this._getBasePoint(a,s,n),c=100/l,h=0+c/2,p=s-a,d=c*this._barWidth,f=0;f<l;f++){var g=e[f];if(!isNaN(g))if(r=g<=i&&this.lowStyle?this.lowStyle:g>=o&&this.highStyle?this.highStyle:g<n&&this.belowStyle?this.belowStyle:0==f&&this.firstStyle?this.firstStyle:f==l-1&&this.lastStyle?this.lastStyle:null,isNaN(this.baseValue)&&a<0)if(s<0){var y=0,_=0===p?100:Math.max(1,Math.floor(Math.abs(g-s)/p*100));t.pbounds(r,h-d/2,y,d,_)}else y=0===p?100:Math.floor(Math.abs(a)/p*100),_=Math.max(1,Math.floor(Math.abs(g)/p*100)),g>0?t.pbounds(r,h-d/2,100-y-_,d,_):t.pbounds(r,h-d/2,100-y,d,_);else _=0==p?100:Math.max(1,Math.floor(100*(g-a)/p)),t.pbounds(r,h-d/2,u,d,-_);h+=c}},e.TYPE="sparkcolumn",e.STYLE="rg-sparkcolumn-renderer",e.CHART_STYLE="rg-sparkcolumn-renderer-chart",e.LAST_STYLE="rg-sparkcolumn-renderer-last",e.HIGH_STYLE="rg-sparkcolumn-renderer-high",e.LOW_STYLE="rg-sparkcolumn-renderer-low",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Ja),el=function(t){function e(){var i=t.call(this)||this;return i._chartStyle=e.CHART_STYLE,i._barWidth=.8,i._belowHeight=.4,i.belowStyle=e.BELOW_STYLE,i}return n(e,t),e.interfaced=function(t){return t.type===e.TYPE},Object.defineProperty(e.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){this._chartStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){this._barWidth=Math.min(1,Math.max(0,t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"belowHeight",{get:function(){return this._belowHeight},set:function(t){this._belowHeight=Math.min(1,Math.max(0,t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._getChartStyle=function(){return this._chartStyle},e.prototype._renderChart=function(t,e,i,o,n){for(var r=e.length,s=100/r,a=0+s/2,l=s*this._barWidth,u=0+100*(1-this._belowHeight),c=0;c<r;c++){var h=e[c];if(!isNaN(h)&&h!=n){var p=null;h<n&&this.belowStyle&&(p=this.belowStyle);var d=h<n?100:0;t.pbounds(p,Math.floor(a-l/2),Math.floor(d),Math.floor(l),Math.floor(u-d))}a+=s}},e.TYPE="sparkwinloss",e.STYLE="rg-sparkwinloss-renderer",e.CHART_STYLE="rg-sparkwinloss-renderer-chart",e.BELOW_STYLE="rg-sparkwinloss-renderer-below",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Ja);!function(t){function e(e,i){return t.call(this,e,i||"dataCellView")||this}n(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},enumerable:!1,configurable:!0}),e.prototype._doUpdateContent=function(t,e,i){i[xt.TextProp]=this._text}}(Xa);var il,ol,nl=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,e,i)||this;return o._domIndex=-1,o._trs=1,o._fixedHeight=!1,o}return n(e,t),e.prototype._doDispose=function(){this._item=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._item.index},enumerable:!1,configurable:!0}),e.prototype.updateItem=function(t,e,i,o){this._item=t,this._domIndex=e,this._trs=i,this._fixedHeight=o},e.prototype.clearContent=function(t,e){},e.prototype._createDom=function(){return null},e.prototype.$_getDefaultRenderer=function(t,e){return En.TYPE},e.prototype._changed=function(){this.invalidate()},e.prototype._getTableRow=function(t,e){return this.parent._getTableRow(t,this._domIndex)},e.prototype._getTableRows=function(t){return this.parent._getTableRows(t,this._domIndex,this._trs)},e.prototype._getCellContent=function(t){return this.parent.getCellContent(this._domIndex,t)},e}($a),rl="rg-expander-expanded",sl="rg-expander-collapsed",al=function(e){function i(t,i){return void 0===i&&(i=null),e.call(this,t,i)||this}return n(i,e),i.isExpander=function(t){var e=t.className;return"string"==typeof e&&(e==rl||e==sl||e.indexOf("rg-tree-expanded")>=0||e.indexOf("rg-tree-collapsed")>=0)},i.prototype.resetButtons=function(t,e,i){for(var o=t.layoutManager,n=this._trs,r=this.parent._cells,s=this._getFirstCell(o),a=this._getStartCell(o)-s,l=this._getEndCell(o)-s,u=e&&i&&e.head===i.head&&t.canMergeEditing(i),c=0;c<n;c++)for(var h=r[this._domIndex+c],p=a;p<=l;p++){var d=h[p],f=d.layout,g=f.firstColumn;!f.isProxy&&this._item.isDataRow&&g instanceof jr&&!u&&this.$_setButtons(t,d,d.cell.firstElementChild)}},i.prototype.moveCellButtons=function(t,e,i){var o=Math.min(i-e.item.index,e.rowSpan-1);if(!this.grid.canMergeEditing(e)&&o!=e.buttonsOffset){var n=e.rowIndex,r=n+o,s=t.getTableItemBounds(n),a=t.getTableItemBounds(r),l=t.grid.body.buttonHeight,u=a.y-s.y;u=Math.floor(u+(a.height-l)/2),e.buttons.style.top=u+"px",e.buttonsOffset=o}},i.prototype.cellRefresh=function(t,e,i,o,n){var r=t.layoutManager;this._updateDataCell(t,r,e,i,o,n)},i.prototype.clearContent=function(t,e){for(var i=this.parent,o=this._getFirstCell(t),n=this._getStartCell(t)-o,r=this._getEndCell(t)-o,s=0;s<e;s++)for(var a=i._cells[this._domIndex+s],l=n;l<=r;l++){var u=a[l],c=u.renderer2;c&&c.clearContent(),u.setBorderBottom(1),u.changedMarker&&(xt.detach(u.changedMarker),u.valueChanged=!1)}},i.prototype._doLayoutContent=function(t){var e,i=t.grid,o=this._trs,n=i.body,r=this.parent,s=r._cells,a=this._getFirstCell(t),l=this._getStartCell(t)-a,u=this._getEndCell(t)-a,c=i.focusedIndex,h=c&&c.itemIndex==this._item.index,p=c.column,d=this._item.index;this._item instanceof Wn&&(u=Math.min(u,this._item.parent.level-1),(d=(e=this._item.parent.firstDataItem).index)>=0&&(e=null));for(var f=hs.temp(i,d),g=r._tbody.rows,y=0;y<o;y++)for(var _=s[this._domIndex+y],m=g[this._domIndex+y],v=l;v<=u;v++){var b=_[v],C=b.layout;if(!C.isProxy){var w=C.firstColumn;if(!(C instanceof Yr&&i.isRecycleMode()&&m.recycle)||b.merged||C.blanked){b.focused=h&&p===w,b.mouseEntered=!1,f.layout=C;var S=e?n.getHidden(f,e):n.getCellAt(this._item,w,!1);b.visible?(b.width=t.getCellWidth(v),b.height=t.getTableRowHeightFixed(b.trow,b.rowSpan),w instanceof jr?this._updateDataCell(i,t,n,S,w,b):this._clearDataCell(b)):w instanceof jr&&this._updateDataCell(i,t,n,S,w,b,!1)}}}},i.prototype._getFirstCell=function(t){return t._firstCell},i.prototype._getLastCell=function(t){return t._lastCell},i.prototype._getStartCell=function(t){return t.getStartCell(!1)},i.prototype._getEndCell=function(t){return this._item instanceof Un?Math.min(t.getStartCell(!1)+this._item.groupLevel,t.getEndCell(!1)):t.getEndCell(!1)},i.prototype._createRenderer=function(t,e,i,o,n){return t.delegate.createRenderer(i,o,n)},i.prototype.$_getRenderer=function(t,e,i,o,n){var r,s,a,l,u=e.valueColumn.renderer,c=i.renderer;"string"==typeof c?a=c:c&&(a=c.type,l=c),"string"==typeof u?r=u:u&&(r=u.type,s=u);var h=a||r||(o instanceof $r?Qa.SERIES_TYPE:this.$_getDefaultRenderer(t,e));if(!n.renderer2||n.rendererChanged||n.renderer2.type!=h)return this._createRenderer(t,e,h,s,l);n.renderer2&&c&&n.renderer2.assignFrom(c)},i.prototype.$_getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},i.prototype.$_clearAriaProperty=function(t){t.removeAttribute("aria-activedescendant"),t.removeAttribute("aria-haspopup")},i.prototype._renderDataCell=function(t,e,i,o,n,r){var s=n.cell,a=t.doc,l=!1,u=this.$_getRenderer(t,i,o,r,n);u&&(n.renderer2&&n.renderer2.clearAndDispose(),n.renderer2=u,n.rendererChanged=!1,l=!0);var c=s.firstElementChild,h=n.renderer2;(n.heighted=this._fixedHeight)&&(c.style.maxHeight=n.height-2+"px"),!l&&h&&h._dom!=c&&(h.clearContent(),l=!0),t.accessibility&&this.$_clearAriaProperty(s),this.$_setButtons(t,n,c);var p=!1,d=n.merged&&t.findGroupItem(n.item,r.dataIndex);if(d&&r.mergeGrouped&&t.rowGroup.$_isExpanderVisible(d)){var f=n.expander;f||((f=n.expander=a.createElement("span")).style.position="absolute",f.style.display="inline-block",f.style.top="2px",f.style.left="2px",s.appendChild(f)),p=d.expanded,f.className=p?rl:sl}else n.clearExpander();var g=h.styleName;n.expander&&(g+=" "+(p?"rg-expanded-cell":"rg-collapsed-cell")),l?h.initContent(i._index,c,g):h.checkClassName(g)?(h.clearContent(),h.initContent(i._index,c,g)):h.index.assign(i._index),h.renderCell(t,i,n);var y=e._showChangeMarker&&i.isValueChanged();if(y!=n.valueChanged){if(y){var _=n.changedMarker;_||((_=n.changedMarker=a.createElement("div")).className="rg-changed-marker",_.style.position="absolute",_.style.display="block",_.style.top="0px",n.changedMarker=_),s.appendChild(_)}else n.changedMarker&&n.valueChanged&&xt.detach(n.changedMarker);n.valueChanged=y}pl.addEdgeMark(o.edgeMark||r.edgeMark,n,a)},i.prototype._clearDataCell=function(e){e.setClassName(""),e.setEditor(null,null),e.button=t.CellButton.NONE,e.error=void 0,e.editable=!1,e.readonly=!0,e.setBorderBottom(1);var i=e.cell.firstElementChild;this._fixedHeight&&(i.style.maxHeight=e.height-2+"px"),e.renderer2&&e.renderer2.clearContent(),e.valueChanged=!1},i.prototype._updateDataCell=function(t,e,i,o,n,r,s){void 0===s&&(s=!0);var a=i.getCellStyle(o,r.style.clear(),r.merged);(null==o.value||""==o.value)&&n instanceof Hr&&n.placeHolder&&(a.styleName+=" "+(o.dataColumn.placeHolderStyleName||"rg-data-empty-cell"));var l=t.cellGhostStyle;if(xt.setStyle(l,r.cell),a.style){for(var u in a.style)l[u]=void 0;a.style&&xt.setStyle(a.style,r.cell)}r.refreshFormatters(a),i.getCellFormatters(n,r),r.setEditor(a.editor,n.editor),r.button=n.button,r.error=o.error,r.errorLevel=o.errorLevel;var c=hs.temp(t,r.item.index,r.dataColumn);if(r.editable=t.getEditableAt(c,r.style),r.readonly=t.getReadOnlyAt(c,r.style),r.editable&&!r.readonly||(a.styleName+=" rg-data-readonly-cell"),r.setClassName(a.styleName),!r.merged&&n instanceof Hr&&n.layout.blanked&&!n.equalBlankLine)switch(o.getBlankState()){case O.HEAD:case O.BODY:r.setBorderBottom(0);break;case O.TAIL:case O.NONE:r.setBorderBottom(1)}else r.setBorderBottom(1);s?this._renderDataCell(t,i,o,a,r,n):r.renderer2&&(r.renderer2=r.renderer2&&r.renderer2.clearAndDispose())},i.prototype.$_getButtonVisible=function(e,i,o,n){if(n){var r=e.getIndex(i.item.index,i.dataColumn);return n(e.handler,r.proxy(),i.focused,i.mouseEntered)}var s=!0,a=i&&i.item,l=e.getIndex(e.focusedRow,i.dataColumn),u=i.merged?i.head.contains(e.focusedIndex):a.index===e.focusedRow&&i.dataColumn===e.focusedColumn,c=a.index===e.focusedRow,h=i.mouseEntered&&i.item.isDataRow,p=e.focusedItem&&e.focusedItem.isDataRow;switch(o){case t.ButtonVisibility.ALWAYS:s=!i.mouseEntered&&!i.focused||i.item.isDataRow;break;case t.ButtonVisibility.HIDDEN:s=!1;break;case t.ButtonVisibility.VISIBLE:s=u&&p;break;case t.ButtonVisibility.ROWFOCUSED:s=c?p:h;break;case t.ButtonVisibility.DEFAULT:default:s=u?p:h}return!c&&i.merged&&o===t.ButtonVisibility.ROWFOCUSED?i.head.contains(e.focusedIndex)?p:i.head.contains(l)?i.mouseEntered?i.item.isDataRow:p:i.mouseEntered&&i.item.isDataRow:s},i.prototype.$_buttonWidth=function(e,i){var o=0;if(i.button!=t.CellButton.NONE){var n=i.layout.getDataColumn();this.$_getButtonVisible(e,i,n.buttonVisibility,n.buttonVisibleCallback)&&(o=e.body.cellButtonWidth)}return o},i.prototype.$_editButtonWidth=function(t,e){var i=0;if(e.editable&&!e.readonly){var o=e.layout,n=o.getDataColumn(),r=e.editorType,s=t.delegate.getCellEditor(r),a=e.editor||n.editor;if(s.hasButton(t.displayOptions.showNativeEditButton,a)){var l=!1;hs.equalsTo(t.focusedIndex,e.item.index,o)&&(l=!!s&&s.listing),t.isEditing()&&e.contains(t.focusedIndex)&&t.canMergeEditing(e)&&e.editWidth>0&&(l=!0),(l||this.$_getButtonVisible(t,e,n.editButtonVisibility,null))&&(i=t.body.editButtonWidth)}}return i},i.prototype.$_editButtonCount=function(t,e){var i=e.editorType,o=t.delegate.getCellEditor(i);return o?o.buttonCount:0},i.prototype.$_editButtonVerti=function(t,e){if("number"===e.editorType){var i=e.editor||e.dataColumn.editor||{};return null==i.direction||"horizontal"!==i.direction}},i.prototype.$_errorWidth=function(t,e){return e.error?t.body.errorIconWidth:0},i.prototype.$_setButtons=function(e,i,o,n){var r,s,a=i.cell,l=e.doc,u=e.layoutManager,c=i.dataColumn,h=this.$_buttonWidth(e,i),p=this.$_editButtonWidth(e,i),d=this.$_errorWidth(e,i),f=p&&this.$_editButtonCount(e,i),g=p&&this.$_editButtonVerti(e,i),y=e.canMergeEditing(i),_=c&&(c.buttonVisibility===t.ButtonVisibility.ROWFOCUSED||c.editButtonVisibility===t.ButtonVisibility.ROWFOCUSED),m=0,v=0,b=void 0;if(h>0&&v++,p>0&&(v+=f),d>0&&v++,i.merged&&(a=(i=i.head).cell,o=i.cell.firstElementChild),v>0){(b=i.buttons)||((b=i.buttons=l.createElement("div")).className="rg-cell-buttons",b.style.position="absolute",b.style.overflow="hidden",a.appendChild(b));var C=e.body.buttonHeight,w=i.height,S=-100;if((r=b.style).height=C+"px",r.right="0px",i.merged){var E=i.rowIndex,x=u.getTableItemBounds(E),O=E,R=e.getIndex(e.focusedRow,i.dataColumn);if(!y&&(i.contains(e.focusedIndex)||_&&i.contains(R)||n))if(e.focusedRow<e.topIndex)S=-100,i.buttonsOffset=-1;else if(e.focusedRow>e.topIndex+u.itemCount)S=1e4,i.buttonsOffset=-1;else{O=E+(e.focusedRow-i.item.index);var I=u.getTableItemBounds(O);S=I.y-x.y,S=Math.floor(S+(I.height-C)/2),i.buttonsOffset=O-E}else S=i.cell.getBoundingClientRect().height,S=Math.floor((S-C)/2),i.buttonsOffset=y?0:-1}else S=Math.floor((w-C)/2),i.buttonsOffset=0;r.top=Math.floor(S)+"px",m=b.childElementCount}else i.buttons&&(i.clearButtons(),o.style.maxWidth="");for(var T=m;T<v;T++){var P=l.createElement("span");(s=P.style).position="absolute",s.display="inline-block",s.height="100%",s.top="0px",b.appendChild(P)}for(T=m;T>v;T--)b.removeChild(b.lastElementChild);var D=v>0?b.children:null;if(v=0,h>0){if(i.cellButton=D[v++],(s=i.cellButton.style).right="0px",s.width=h+"px",i.resetButtonClass(),e.accessibility){a.removeAttribute("aria-haspopup");var k=i.renderer2;k&&i.button==t.CellButton.POPUP&&!k.itemClickable&&a.setAttribute("aria-haspopup","true")}i.buttonWidth=h}else i.cellButton=null,i.buttonWidth=0;if(p>0){i.editButtons=[];var A=i.editorType,L=e.delegate.getCellEditor(A);for(T=0;T<f;T++){var M=D[v++];L.setButtonStyle(M,T,g,h,p)||((s=M.style).right=h+p*T+"px",s.width=p+"px",i.resetEditClass(M,T)),i.editButtons.push(M)}i.editWidth=p*(g?1:f);var F=hs.equalsTo(e.editController.editIndex,i.item.index,i.layout),N=e.canMergeEditing(i)&&i.contains(e.editController.editIndex);this.$_setButtonZIndex(e,i,e.isEditing()&&(F||N),L)}else i.editButtons=null,i.editWidth=0;if(d>0?(i.errorIcon=D[v],(s=i.errorIcon.style).right=h+i.editWidth+"px",s.width=d+"px",i.resetErrorClass(),i.errorWidth=d):(i.errorIcon=null,i.errorWidth=0),b){var V=i.buttonWidth+i.editWidth+i.errorWidth,B=this.$_getCellWidth2(u,i.tcol,i.colSpan);r.width=V+"px",o.style.maxWidth=B-V+"px"}else o.style.maxWidth=""},i.prototype.$_setButtonZIndex=function(t,e,i,o){var n=e.merged?e.head:e,r=t.displayOptions.baseZindex;function s(t){!i||o&&o.native?t.removeProperty("z-index"):t.zIndex=String(r+1)}n.editButtons&&n.editButtons.forEach((function(t){s(t.style)})),n.cellButton&&s(n.cellButton.style),n.errorIcon&&s(n.errorIcon.style)},i}(nl),ll=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype.$_getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)},e}(al),ul=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype.$_getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)},e}(al),cl="rowspan",hl="colspan",pl=function(){function t(t){this.cell=null,this.layout=null,this.visible=void 0,this.spanned=!1,this.rowSpan=1,this.colSpan=1,this.className="",this.width=0,this.height=0,this.text=void 0,this.cell=t}return t.addEdgeMark=function(t,e,i){if(t!==e.edgeMark){var o=e.cell;if(t){var n=e.edgeMarker;switch(n||(n=e.edgeMarker=i.createElement("div")),t){case"leftTop":n.className="rg-edgemarker-lefttop";break;case"leftBottom":n.className="rg-edgemarker-leftbottom";break;case"rightTop":n.className="rg-edgemarker-righttop";break;case"rightBottom":n.className="rg-edgemarker-rightbottom";break;default:n.className=t}o.appendChild(n)}else e.edgeMarker&&o.removeChild(e.edgeMarker);e.edgeMark=t}},t.prototype.dispose=function(){this.cell=null},t.prototype.setColSpan=function(t){return this.colSpan!=t&&(this.colSpan=t,t>1?this.cell.colSpan=t:this.cell.removeAttribute(hl)),this},t.prototype.setRowSpan=function(t){return this.rowSpan!=t&&(this.rowSpan=t,t>1?this.cell.rowSpan=t:this.cell.removeAttribute(cl)),this},t.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=t,this.cell.style.display=t?"":"none"),this},t.prototype.set=function(t,e,i){return this.colSpan!=t&&(this.colSpan=t,t>1?this.cell.colSpan=t:this.cell.removeAttribute(hl)),this.rowSpan!=e&&(this.rowSpan=e,e>1?this.cell.rowSpan=e:this.cell.removeAttribute(cl)),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},t.prototype.clear=function(t){return this.colSpan>1&&(this.colSpan=1,this.cell.removeAttribute(hl)),this.rowSpan>1&&(this.rowSpan=1,this.cell.removeAttribute(cl)),this.visible!==t&&(this.visible=t,this.cell.style.display=t?"":"none"),this},t.prototype.isClickableElt=function(t){return!1},t}(),dl=function(e){function i(i){var o=e.call(this,i)||this;return o.cellButton=null,o.editButtons=null,o.errorIcon=null,o.buttons=null,o.changedMarker=null,o.expander=null,o.item=null,o.grouped=!1,o.rowIndex=-1,o.rows=0,o.trow=-1,o.tcol=-1,o.head=null,o.merged=!1,o.spanHead=null,o.heighted=!1,o.buttonsOffset=0,o.template=void 0,o.marginRight=-1,o.style=new Br,o.rendererChanged=!1,o.valueChanged=!1,o.mouseEntered=!1,o.focused=!1,o.borderBottom=1,o.readonly=void 0,o.editable=void 0,o.error=void 0,o.errorLevel=t.ValidationLevel.IGNORE,o.errorWidth=0,o.button=t.CellButton.NONE,o.buttonWidth=0,o.editWidth=0,o.edgeMarker=null,o.text=i[xt.TextProp],o}return n(i,e),i.prototype.dispose=function(){e.prototype.dispose.call(this),this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.item=null,this.editButtons&&this.editButtons.forEach((function(t){xt.detach(t)})),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.layout=null},Object.defineProperty(i.prototype,"dataColumn",{get:function(){return this.layout.getDataColumn()},enumerable:!1,configurable:!0}),i.prototype.reset=function(t){return this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.editButtons&&this.editButtons.forEach((function(t){xt.detach(t)})),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.cell=t,this},i.prototype.span=function(t){this.spanned=!0,this.spanHead=t,this.clear(!1)},i.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(e=t.textFormat)&&(this.textFormatter&&this.textFormatter.format==e||(this.textFormatter=vr.getFormatter(e))),(e=t.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==e||(this.numberFormatter=We.getFormatter(e))),(e=t.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==e||(this.datetimeWriter=Be.getFormatter(e))),(e=t.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==e||(this.booleanFormatter=Ge.getFormatter(e))),this.prefix=t.prefix,this.suffix=t.suffix},i.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},i.prototype.setEditor=function(t,e){this.editor=t,this.editorType=pa.getEditorType2(t,e)},i.prototype.setBorderBottom=function(t){t!=this.borderBottom&&(this.borderBottom=t,this.cell.style.borderBottom=0==t?"0":"")},i.prototype.setMarginRight=function(t,e){e!=this.marginRight&&(this.marginRight=e,t.style.marginRight=e<=0?"":e+"px")},i.prototype.isCellButton=function(t){return t===this.cellButton},i.prototype.isEditButton=function(t){return this.editButtons&&this.editButtons.some((function(e){return e===t}))},i.prototype.isButton=function(t){return t===this.cellButton||this.isEditButton(t)},i.prototype.resetButtonClass=function(){var e=this.button==t.CellButton.POPUP?"rg-button-popup":"rg-button-action";this.cellButton.className=e},i.prototype.resetEditClass=function(t,e){var i;switch(this.editorType){case"date":case"btdate":case"ndate":i="rg-button-calendar";break;default:i="rg-button-list"}t.className=i},i.prototype.resetErrorClass=function(){var e;switch(this.errorLevel){case t.ValidationLevel.ERROR:e="rg-validation-error";break;case t.ValidationLevel.WARNING:e="rg-validation-warning";break;case t.ValidationLevel.INFO:e="rg-validation-info";break;default:e=""}this.errorIcon.className=e},i.prototype.clearExpander=function(){this.expander&&(this.cell.removeChild(this.expander),this.expander=null)},i.prototype.clearButtons=function(){this.buttons&&(this.cell.removeChild(this.buttons),this.buttons=null,this.errorWidth=this.buttonWidth=this.editWidth=0)},i.prototype.getEditIndex=function(t){var e=this.item.index;return this.merged&&(e+=this.buttonsOffset),t.set(e,this.layout.firstColumn)},i.prototype.contains=function(t){if(t.layout===this.layout){var e=t.itemIndex,i=this.item.index,o=i+this.rowSpan/this.layout._dspan;return i<=e&&e<o}return!1},i.prototype.toString=function(){return"Body Cell("+this.layout.col+", "+this.item.index+", "+this.layout.row+")"},i}(pl),fl=function(t){function e(e,i){var o=t.call(this,e,i,"bodyView")||this;return o._itemViews=[],o._cells=[],o._spanned=!1,o._ghostStyle={},o}return n(e,t),e.prototype._doDispose=function(){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)i[o].dispose(),i[o]=null;this._cells=this._ghostStyle=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"fixed",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightFixed",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstCell",{get:function(){return this._cells[0][0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastCell",{get:function(){return this._cells[this.tableRowCount-1][0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spanned",{get:function(){return this._spanned},enumerable:!1,configurable:!0}),e.prototype.bodyCellByCell=function(t){for(var e=t.parentElement[b],i=0;i<this._cells.length;i++){var o=this._cells[i],n=o[0].item;if(n&&n.index==e)for(var r=0;r<o.length;r++){var s=o[r];if(s&&s.cell===t)return s}}},e.prototype.bodyCellAt=function(t){for(var e=0;e<this._cells.length;e++){var i=this._cells[e],o=i[0].item;if(o&&o.index==t.itemIndex)for(var n=0;n<i.length;n++){var r=i[n];if(r&&r.layout===t.layout)return r}}},e.prototype.layoutByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout},e.prototype.columnByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout&&e.layout._columnObj},e.prototype.cellByLayout=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);for(var o=e;o<this._cells.length;o++)for(var n=this._cells[o],r=i;r<n.length;r++){var s=n[r];if(s&&s.layout===t)return s}},e.prototype.getCellRectAt=function(t,e,i){var o=this.getCellAt(t,e);return o&&this.getCellRect(t,o,i)},e.prototype.getCellRect=function(t,e,i){i&&e.merged&&(e=e.head);var o=e.layout,n=e.trow,r=e.rowSpan,s=i||r>1&&r==o.getDataSpan()?r:e.item.isData?o._dspan:1,a=t.getTableRowBounds(n,s),l=e.tcol,u=e.colSpan;return this.fixed?(a.x=t.getFixedCellPoint(l),a.width=t.getFixedCellWidth2(l,u)):this.rightFixed?(a.x=t.getRightCellPoint(l),a.width=t.getRightCellWidth2(l,u)):(a.x=t.getCellPoint(l),a.width=t.getCellWidth2(l,u)),a},e.prototype.getRowView=function(t){for(var e=0,i=this.childCount;e<i;e++){var o=this.getChild(e);if(o._item===t)return o}},e.prototype.getRowIndex=function(t){return this._cells[t][0].item.index},e.prototype.getViewIndex=function(t){return this._cells[t][0].rowIndex},e.prototype.cleanRows=function(t,e){this.$_cleanRowViews(t),this.$_cutTailBodyCells(e),this.$_cleanTableRows(e)},e.prototype.getCheckedLayout=function(t){return t.spanned&&(t=this.getUpperOf(t)),t},e.prototype.getLowerOf=function(t){for(var e=this._cells,i=t.trow,o=t.tcol,n=i+1;n<e.length;n++){var r=e[n][o];if(!r.spanned)return r;if(r.spanHead.trow===r.trow)return r.spanHead}},e.prototype.isBottomCell=function(t){for(var e=this._cells,i=t.rowIndex,o=t.trow,n=t.tcol,r=o+1;r<e.length;r++){var s=e[r][n];if(s.rowIndex!=i)break;if(!s.spanned||s.spanHead.trow===s.trow)return!1}return!0},e.prototype.getUpperOf=function(t){for(var e=this._cells,i=t.trow,o=t.tcol,n=i-1;n>=0;n--){var r=e[n][o];if(!r.spanned)return r;if(r.spanHead.trow===r.trow)return r.spanHead}},e.prototype.isTopCell=function(t){for(var e=this._cells,i=t.rowIndex,o=t.trow,n=t.tcol,r=o-1;r>=0;r--){var s=e[r][n];if(s.rowIndex!=i)break;if(!s.spanned||s.rowIndex===t.rowIndex&&s.trow!==t.trow&&s.layout.source)return!1}return!0},e.prototype.getNextVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.next())return!1;e=this.bodyCellAt(t)}return null!=e},e.prototype.getPrevVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.prev())return!1;e=this.bodyCellAt(t)}return null!=e},e.prototype.tdClone=function(t){var e=this.grid,i=t&&e.isValid(t)&&this.getCellAt(e.layoutManager,t);if(i){var o=(i=i.merged?i.head:i).cell,n=o.parentElement;if(n){var r=o.cloneNode(!1);r.appendChild(o.firstElementChild.cloneNode(!1)),r.style.display="none",i.rendererChanged=!0,n.insertBefore(r,o.nextElementSibling),i.reset(r),r.setAttribute("tabindex","0");var s=[];if(n=this._table,xt.isIE)for(;n&&n!==e.container._containerDom;)s.push({top:n.scrollTop,left:n.scrollLeft}),n=n.parentElement;if(r.style.display="",r.focus({preventScroll:!0}),xt.detach(o),n=this._table,xt.isIE)for(;n&&n!==e.container._containerDom;){var a=s.shift();a&&a.top!==n.scrollTop&&(n.scrollTop=a.top),a&&a.left!==n.scrollLeft&&(n.scrollLeft=a.left),n=n.parentElement}}else o.focus()}},e.prototype.refreshTdFocused=function(t,e){var i=this.grid,o=t&&i.isValid(t)&&this.getCellAt(i.layoutManager,t);if(o){o=o.merged?o.head:o;var n=this._tbody,r=Array.prototype.slice.call(n.querySelectorAll("td"));e?s.call(this,o):setTimeout(function(){s.call(this,o)}.bind(this),15)}function s(t){var e=t.cell;e&&(r.forEach((function(t){t!==e&&t.removeAttribute("tabindex")})),e.setAttribute("tabindex","0"),e.focus({preventScroll:!0}))}},e.prototype.cleanRecycle=function(){for(var t=this._tbody,e=0;e<t.rows.length;e++)t.rows[e].recycle=!1},e.prototype.reArrangeRows=function(t,e){for(var i=this.grid,o=this._tbody,n=this._cells,r=i.itemSource,s=0,a=t.topIndex+t.fixedItemCount,u=0;u<o.rows.length;u++)o.rows[u].recycle=!0;var c=0===t.fixedTableRowCount?0:t.fixedTableRowCount+1;if(e<0){for(;e++<0;)s+=r.getItem(a+e+t.itemCount-1).isData?this._trs:1;for(;s-- >0;)o.rows[o.rows.length-1].recycle=!1,o.insertBefore(o.rows[o.rows.length-1],o.rows[c]),n.splice.apply(n,l([c,0],n.splice(-1),!1))}else{for(;e-- >0;)s+=r.getItem(a+e).isData?this._trs:1;for(;s-- >0;){var h=o.removeChild(o.rows[c]);h.recycle=!1,o.appendChild(h),n.push.apply(n,n.splice(c,1))}}},e.prototype._doAttached=function(t){var e=this._table;e&&e.setAttribute("role",this.grid.isTree()?"treegrid":"grid")},e.prototype._getCssSelector=function(){return"rg-body"},e.prototype._getTableHidden=function(){return!1},e.prototype._getTableCaption=function(){var t=this.grid;return t&&t.accessibility&&t.WaiOptions&&t.WaiOptions.getDescription()||""},e.prototype._isFixedHeight=function(t){return!t.isAutoRowHeights()},e.prototype._getTrs=function(t){return t.trs},e.prototype._getTableRowCount=function(e){var i=e.fixedItemCount,o=this.grid,n=this._trs;if(e.syncHeight()){for(var r=0,s=0,a=this.grid.itemCount;s<a;s++)r+=o.getItem(s).isData?n:1;return r+(i?1:0)}if(e.isAutoRowHeights())return(a=Math.max(0,Math.ceil(e._itemsBounds/e.grid.displayOptions.minTableRowHeight)+this._trs-1))+(e.grid.displayOptions.refCalcHeights?5:0);if(e.isRowGrouped()){for(var l=i+e.itemCount,u=(r=0,0);u<l;u++)r+=e.getItem(u).isData?n:1;return r+(i?1:0)}return t.prototype._getTableRowCount.call(this,e)},e.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount;if(e>=i&&t.isRowGrouped()){var o=this._trs,n=i*o;i>0&&n++;for(var r=i;r<e;r++)t.getItem(r).isData?n+=o:n++;return n}return n=e*this._trs,i>0&&e>=i?n+1:n},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doPrepareTableHead=function(e,i){if(this.grid._columnsDirty||e.syncHeight()){t.prototype._doPrepareTableHead.call(this,e,i),this._table.caption.innerHTML=this._getTableCaption();for(var o=this._getFirstCell(e),n=this._getLastCell(e)-o+1,r=e.cellLayouts._dataCells,s=0;s<1;s++)for(var a=r[s],l=i.children[s],u=0;u<n;u++){var c=a[u+o];c=c.isProxy?c.source:c;var h=l.children[u];c&&h&&(h[xt.TextProp]=c.header.getDisplayText()||c.firstColumn.header.displayText)}}},e.prototype._doMeasure=function(t,e,i){return this._spanned=!1,new Ha},e.prototype.$_refreshRowCells=function(t,e,i,o,n,r,s){for(var a=this._cells,l=s.children,u=this._getFirstCell(t),c=this._getLastCell(t)-u+1,h=a.length,p=o+r;h<p;h++)a.push([]);for(var d=0;d<r;d++){var f=a[o],g=l[o];this.grid.accessibility&&(e?(g.removeAttribute("aria-hidden"),g.setAttribute("aria-rowindex",(e.index+2).toString())):(g.setAttribute("aria-hidden","true"),g.removeAttribute("aria-rowindex"))),this._ghostStyle&&xt.setStyle(this._ghostStyle,g);for(var y=g.children,_=n[d],m=0;m<c;m++){var v=y[m],b=_[m+u],C=f[m];C?C.cell!==v?C.reset(v):C.layout!==b&&(C.rendererChanged=!0,C.layout=b,C.clear(!0)):(C=f[m]=new dl(v)).layout=b,C.spanned=!1,C.item=e,C.rowIndex=i,C.trow=o,C.tcol=m}for(o++,m=c;m<f.length;m++)xt.isDebugging()&&f[m],f[m].dispose();f.length=c}},e.prototype.layoutRow=function(t,e,i,o,n){function r(t,e){var i=this._ghostStyle=this._ghostStyle||{};for(var o in t)i[o]=void 0;xt.setStyle(t,e)}var s,a=t.lm,l=t.fixedItemCount,u=this.model,c=a.cellLayouts._dataCells,h=this._tbody.rows,p=n.isData?this._trs:1;this.$_refreshRowCells(a,n,i,o,c,p,this._tbody),this.childCount<=i?(s=this.$_borrowView(n),this.addChild(s)):s=this.getChild(i),this.$_setRowCellsDisplay(a,t,e,this._cells,n,i,o,p);var d=n.index,f=h[o];if(f.style.display="",f[b]=d,f[C]=o,s.updateItem(n,o,p,this._isFixedHeight(a)),n.isDataRow||n instanceof Un){var g=a.getItemBounds(i);g.width=this.width,s.setRect(g);var y=u.getRowStyle(n,d<l),_=y.styleName;if(n.isDataRow){n.setEditable(y.editable,y.readOnly);for(var m=1;m<this._trs;m++)(v=h[o+m])[C]=o+m,v[b]=d,xt.setClassName(v,_),y.style&&r.call(this,y.style,v)}s.layoutContent(a),xt.setClassName(f,_),y.style&&r.call(this,y.style,f)}else if(n.isData){for(m=1;m<this._trs;m++){var v;(v=h[o+m])[C]=o+m,v[b]=d}this.grid.isRecycleMode()&&h[o].recycle||s.clearContent(a,this._trs),n instanceof Wn&&s.layoutContent(a)}else s.clearContent(a,1)},e.prototype.layoutFixedBar=function(t,e){var i=t.cellLayouts._dataCells,o=this._tbody,n=o.rows[e],r=this.$_prepareFixedBar(t,n),s=t.grid.hoveredCell;s&&s.trow==e&&s.rowIndex==t.fixedItemCount&&t.grid.$_setHoveredCell(null,-1),n[C]=e,n[b]=-99,n.style.display="",xt.setClassName(n,Ga.ROW_BAR_STYLE),this.$_refreshRowCells(t,null,-1,e,i,1,o),this.$_setFixedBarCellsDisplay(t,this._cells,e);for(var a=0,l=this._cells[e];a<l.length;a++){var u=l[a];u.className="",u.clearExpander(),u.clearButtons()}return r},e.prototype._doRender=function(t){},e.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},e.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},e.prototype._doDrawCell=function(t,e,i){},e.prototype.getCellAt=function(t,e){var i=e.layout,o=t.fixedItemCount,n=t.topIndex,r=e.itemIndex;if((o>0&&r<o||r>=n&&r-n>=o&&r-n<o+t.itemCount)&&(r>=o&&(r-=n),(r=this.$_getTableIndex(t,r))<this._cells.length))for(var s=0;s<this._trs;s++){var a=this._cells[r+s];if(a)for(var l=0;l<a.length;l++){var u=a[l];if(u&&u.layout===i)return u}}return null},e.prototype.getCellView=function(t,e){var i=this.getCellAt(t,e);return i&&i.cell},e.prototype.spanRight=function(t,e){if(e){var i=this.getCellAt(t,e);i&&(i.spanned&&(i=i.spanHead),i&&(e.layout=this._cells[i.trow][i.tcol+i.colSpan-1].layout))}},e.prototype.spanHead=function(t,e){if(e){var i=this.getCellAt(t,e);i&&(i.spanned&&(i=i.spanHead),i&&(e.layout=i.layout))}},e.prototype._getStartCell=function(t){return t.getStartCell(!1)},e.prototype._getEndCell=function(t){return t.getEndCell(!1)},e.prototype.$_removeView=function(t){var e=this.removeChildAt(t);e.validate(),this._itemViews.push(e)},e.prototype.$_borrowView=function(t){var e=this._itemViews.pop();return e||(e=this.createRowElement()),e},e.prototype.createRowElement=function(){return new al(this.doc)},e.prototype.$_setFixedBarCellsDisplay=function(t,e,i){for(var o=this._getFirstCell(t),n=this._getFirstCell(t)-o,r=this._getLastCell(t)-o,s=e[i],a=Ga.ROW_BAR_CELL_STYLE,l=n;l<=r;l++){var u=s[l];u.clear(!0),xt.setClassName(u.cell,a)}},e.prototype.$_setRowCellsDisplay=function(t,e,i,o,n,r,s,a){var l=this._getFirstCell(t),u=this._getFirstCell(t)-l,c=this._getLastCell(t)-l,h=e.grid,p=e.fixedItemCount,d=i,f=n.isData,g=n.level;if(f||e.mergedRowGrouped)for(var y=0;y<a;y++)for(var _=(U=o[s+y]).length,m=u;m<=c;m++){var v=(z=U[m]).layout,b=v.getDataColumn(),C=v.parent,w=C&&C.vertical;if(z.merged=!1,z.head=null,z.grouped=!1,z.spanned);else if(v.isProxy){for(var S=void 0,E=s;E<s+a;E++){var x=o[E];if(!x)break;for(var O=0;O<x.length;O++)if(x[O].layout===v.source){S=x[O];break}if(S)break}S?z.span(S):z.clear(!1)}else if(!f&&m+l>=g)z.grouped=!0,z.clear(!0);else{var R=!0,I=void 0,T=1;b&&b.mergeGrouped&&b.groupLevel<=n.parent.level||n.isDataRow&&(void 0===(T=(I=v.spanCallback)?I(h.handler,v,z.item.index):void 0)&&(T=v.dataSpan),void 0===T&&(R=!1,T=v.cellSpan));var P=0;if(T>1){var D=0,k=v.vindex+1;if(w)for(T--;D++<T&&D<a;){if(!(G=C.getVisible(k++)))break;P+=G._dspan,this._cells[s+y+D][m].span(z),this._spanned=!0}else{for(var A=v._dspan,L=[],M=0;M<A;M++)L.push(0);for(var F=0;F<A;F++){L[F]+=v._defColSpan;for(var N=1;N<T&&m-u+N<_;N++){var V=this._cells[s+y+F][m+N].layout;V&&!V.isProxy&&(L[F]+=V._defColSpan)}}var B=Math.max.apply(Math,L);for(R=R&&B===T;D++<T-1&&m-u+D<_&&(R||k<C.visibleCount);){var G;if(!(G=R?U[m+D].layout:C.getVisible(k++)))break;!G.isProxy&&(P+=G._defColSpan)}for(v._defColSpan+P!==T&&(P=0),D=1;D<v._defColSpan+P;D++){if(A>1&&R)for(N=1;N<a&&A>N;N++)this._cells[s+y+N][m+D].span(z);U[m+D].span(z)}}}var j=v._defColSpan,H=v._dspan,$=v.merged&&v.merges;if($&&n instanceof Wn&&m>=n.parent.level&&($=null),$)if(z.merged=$.isMerged(r,p),$.isHidden(r,p))z.set(j+P,H,!1),z.head=d[m-u];else{var W=void 0;W=n.isData?(z.rows=$.getMerged(r,p))*H:$.getMerged2(h,n.index,r-p,H),z.set(j+P,W,!0),d[m-u]=z.head=z}else w?z.set(j,H+P,!0):z.set(j+P,H,!0)}}else{var U=o[s];for(m=u;m<=c;m++){var z;(z=U[m]).clear(!1),z.merged=!1,z.grouped=!0}}},e.prototype.$_refreshSpans=function(t,e,i){},e.prototype.$_cleanRowViews=function(t){for(;this.childCount>t;)this.$_removeView(this.childCount-1)},e.prototype.$_cutTailBodyCells=function(t){for(var e=this._cells,i=t;i<e.length;i++)for(var o=e[i],n=0;n<o.length;n++)o[n].dispose(),o[n]=null;e.length=t},e.prototype.$_cleanTableRows=function(t){var e=this._tbody.rows;if(this.grid.isRecycleMode())for(var i=e.length-1;i>=t;i--){var o=e[i];xt.detach(o)}else{for(i=e.length-1;i>=this._cells.length;i--)for(var n=e[i].cells,r=n.length;r--;){for(var s=n[r];s.childElementCount>1;)s.removeChild(s.lastElementChild);s.removeAttribute(cl),s.removeAttribute(hl)}for(i=e.length-1;i>=t;i--)(o=e[i]).childElementCount>0?(o[C]=-1,o.style.display="none"):xt.detach(o)}},e.prototype.$_resetHeights=function(t,e){var i=this._tbody.children,o=0;if(t.length>0){for(var n=1;n<t.length;n++)i[o++].style.height=t[n]-t[n-1]+"px";o++}for(n=1;n<e.length;n++)i[o++].style.height=e[n]-e[n-1]+"px"},e.prototype.$_resetCellStyleHeights=function(t,e){var i=this._tbody.children,o=0;if(t.length>0){for(var n=1;n<t.length;n++)for(var r=t[n]-t[n-1],s=i[o++].cells,a=0;a<s.length;a++)s[a].style.height=r+"px";o++}for(n=1;n<e.length;n++)for(r=e[n]-e[n-1],s=i[o++].cells,a=0;a<s.length;a++)s[a].style.height=r+"px"},e.prototype.$_resetCellHeights2=function(t,e){for(var i=t.grid.body.buttonHeight,o=0,n=this._cells.length;o<n;o++)for(var r=this._cells[o],s=0,a=r.length;s<a;s++){var l=r[s],u=l.height,c=t.getTableRowHeightFixed(l.trow,l.rowSpan);if(u!=c&&(l.height=c,(l.buttonWidth>0||l.editWidth>0)&&l.buttons&&(l.buttons.style.top=Math.floor((c-i)/2)+"px")),e&&!l.heighted){var h=Math.max(0,l.height-2);l.cell.firstElementChild.style.maxHeight=h+"px",xt.ieTen&&(l.cell.firstElementChild.style.height=h+"px")}}},e.prototype.$_focusChanged=function(t,e,i){this.$_cellStateChanged(t,e,"focused",i)},e.prototype.$_mouseEnteredChanged=function(t,e,i){this.$_cellStateChanged(t,e,"mouseEntered",i)},e.prototype.$_cellStateChanged=function(t,e,i,o){var n=t.canMergeEditing(e);if(e&&e.item,e&&o!=e[i]){var r=this.getRowView(e.item);if(r instanceof nl){var s=this.model,a=e.dataColumn;if(e[i]=o,a&&"data"===t.getCellType(e.cell)){var l=s.getCellAt(e.item,a,!1);if(r.$_setButtons(t,e,e.cell.firstElementChild),e.merged&&e.head){var u=e.head,c=t.layoutManager,h=this.getCellRect(c,e,!1),p=this.getCellRect(c,e,!0),d=u.renderer2;if(e.focused){var f=h.top-p.top+h.height/2-p.height/2;d.moveClickElement(f,n)}else e.mouseEntered||u.contains(t.focusedIndex)||d.moveClickElement(0,n)}r instanceof al&&e.renderer2&&"focused"===i&&e.renderer2.refreshFocusChanged&&r.cellRefresh(t,s,l,a,e)}}}},e.prototype.$_buttonZIndexChanged=function(t,e,i,o){var n=e&&e.item;if(n&&n.isDataRow){var r=this.getRowView(n);r instanceof nl&&e.dataColumn&&r.$_setButtonZIndex(t,e,i,o)}},e.prototype.$_rendererChanged=function(t){for(var e=this._cells,i=0;i<e.length;i++)for(var o=e[i],n=0;n<o.length;n++)o[n].layout===t&&(o[n].rendererChanged=!0)},e}(Ya),gl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"fixed",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-fixed-body"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e.prototype.createRowElement=function(){return new ll(this.doc)},e}(fl),yl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"rightFixed",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-fixed-body"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype.createRowElement=function(){return new ul(this.doc)},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(fl),_l=function(t){function e(e){var i=t.call(this,e)||this;return i.check=null,i.sort=null,i.filter=null,i.popup=null,i.textSpan=null,i.expander=null,i.rendererClass="",i.html=void 0,i.tooltip="",i.sortWidth=0,i.filterWidth=0,i.checkWidth=0,i.popupWidth=0,i.expanderWidth=0,i.marginLeft=0,i.marginRight=0,i.marginTop=0,i.marginBottom=0,i.edgeMarker=null,i.textSpan=e.firstElementChild.firstElementChild,i}return n(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.textSpan=this.cell=this.check=this.sort=this.filter=this.expander=null,this.layout=null},e.prototype.span=function(){this.spanned=!0,this.clear(!1)},e.prototype.clear=function(e){t.prototype.clear.call(this,e);var i=this.cell.firstElementChild,o=this.textSpan,n=i.style;return this.checkWidth>0&&(i.removeChild(this.check),this.check=null,this.checkWidth=0),this.filterWidth>0&&(i.removeChild(this.filter),this.filter=null,this.filterWidth=0),this.sortWidth>0&&(i.removeChild(this.sort),this.sort=null,this.sortWidth=0),this.popupWidth>0&&(i.removeChild(this.popup),this.popup=null,this.popupWidth=0),this.expander&&(i.removeChild(this.expander),this.expander=null),this.className&&(this.cell.className=this.className=""),this.rendererClass&&(i.className=this.rendererClass=""),0!=this.marginLeft&&(n.marginLeft="",this.marginLeft=0),0!=this.marginRight&&(n.marginRight="",this.marginRight=0),0!=this.marginTop&&(n.marginTop="",this.marginTop=0),0!=this.marginBottom&&(n.marginBottom="",this.marginBottom=0),this.text&&(o[xt.TextProp]=this.text=""),this.html&&(o.innerHTML=this.html=""),this},e.prototype.setText=function(t,e){e!=this.text&&(t[xt.TextProp]=this.text=e,this.html="")},e.prototype.setHtml=function(t,e){e!=this.html&&(t.innerHTML=this.html=e,this.text="")},e.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},e.prototype.setRendererClassName=function(t,e){e!=this.rendererClass&&(t.className=this.rendererClass=e)},e.prototype.setDivMarigns=function(t,e,i,o,n){e!=this.marginLeft&&(t.marginLeft=e?e+"px":"",this.marginLeft=e),i!=this.marginRight&&(t.marginRight=i?i+"px":"",this.marginRight=i),o!=this.marginTop&&(t.marginTop=o?o+"px":"",this.marginTop=o),n!=this.marginBottom&&(t.marginBottom=n?n+"px":"",this.marginBottom=n)},e.prototype.getIndex=function(t){return t.set(-1,this.layout.firstColumn)},e.prototype.isClickableElt=function(t){return t===this.filter||t===this.popup||t===this.check||t===this.expander},e}(pl),ml=function(e){function i(t,i){var o=e.call(this,t,i,"headerView")||this;return o._fixedHeight=!0,o._rowPoints=[],o._cells=[],o._pointerEnterHandler=o.$_pointerEnter.bind(o),o._pointerLeaveHandler=o.$_pointerLeave.bind(o),o}return n(i,e),i.renderCell=function(t,e){e[xt.TextProp]=t.text||""},i.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var i=this._cells[t],o=0;o<i.length;o++)i[o].cell.removeEventListener("pointerenter",this._pointerEnterHandler),i[o].cell.removeEventListener("pointerleave",this._pointerLeaveHandler),i[o].dispose(),i[o]=null;this._cells=null,e.prototype._doDispose.call(this)},i.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}},i.prototype.tableCellByLayout=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)if(i[o].layout===t)return i[o]},i.prototype.tableCellByLayout2=function(t,e){var i=this._cells,o=i.length;if(!(o<1)){for(var n=i[0].length,r=this._getFirstCell(t),s=this._getStartCell(t)-r,a=this._getEndCell(t)-r,l=s;l<=a;l++)for(var u=0;u<o;u++)if(i[u][l].layout===e)return i[u][l];for(l=s-1;l>=0;l--)for(u=0;u<o;u++)if(i[u][l].layout===e)return i[u][l];for(l=a+1;l<n;l++)for(u=0;u<o;u++)if(i[u][l].layout===e)return i[u][l]}},i.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},i.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},i.prototype.getSpanRoot=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n.layout===t){if(n.spanned)if(n.layout.parent.vertical){for(var r=e-1;r>=0;r--)if(!this._cells[r][o].spanned)return this._cells[r][o].layout}else for(r=o-1;r>=0;r--)if(!i[r].spanned)return i[r].layout;return t}}},i.prototype.refresh=function(t){for(var e=t.focusedColumn,i=t.layoutManager,o=this._getFirstCell(i),n=this._getLastCell(i)-o+1,r=0;r<this._cells.length;r++)for(var s=this._cells[r],a=0;a<n;a++){var l=s[a],u=l.layout;if(l.visible&&u instanceof Yr){var c=l.cell;c[w]=u.isColumn(e),l.setClassName(this.$_getCellSelector(u,c))}}},i.prototype.getRowAt=function(t){for(var e=1;e<this._rowPoints.length-1;e++)if(t<this._rowPoints[e])return e-1;return this._rowPoints.length-2},i.prototype.getLayoutHeight=function(t,e,i){var o,n;return t instanceof Zr?(o=t.hrow,n=i?t.hlen:t.hspan):(o=t.hrow,n=i?e.rowSpan:t.hspan),this._rowPoints[o+n]-this._rowPoints[o]},i.prototype.getMeasureHeights=function(){var t=new Array(this._cells.length);return t.forEach((function(t,e,i){i[e]=0})),this._cells.forEach((function(e,i){e.forEach((function(e){if(e.visible){var o=e.textSpan.getBoundingClientRect();t[i]=Math.max(t[i],o.height+5)}}))})),t},i.prototype.getLayoutPos=function(t){return this._rowPoints[t.hrow]},i.prototype._getCssSelector=function(){return"rg-header"},i.prototype._isFixedHeight=function(){return this._fixedHeight},i.prototype._getMinRowHeight=function(t){return this._minRowHeight},i.prototype._prepareCellContent=function(t,e){var i=wt(t),o=i.createElement("div"),n=i.createElement("span");return t.addEventListener("pointerenter",this._pointerEnterHandler,!1),t.addEventListener("pointerleave",this._pointerLeaveHandler,!1),o.appendChild(n),o},i.prototype._cleanCellContent=function(t){t.removeEventListener("pointerenter",this._pointerEnterHandler,!1),t.removeEventListener("pointerleave",this._pointerLeaveHandler,!1)},i.prototype._doMeasure=function(t,e,i){var o=this.model,n=t.layoutManager.headerRows,r=o.height,s=o.heights,a=[];if(this._minRowHeight=o.minRowHeight,s&&s.length>0){for(var l=0,u=0;u<n;u++)l+=a[u]=Math.max(s[u]||this._minRowHeight,this._minRowHeight);r=l}return r=r<=0?Math.max(this._minRowHeight,t.heightMeasurer.headerHeight)*n:Math.max(this._minRowHeight*n,r),this._fixedHeight=r>=0,r=Math.max(this._minRowHeight*n,o.minHeight,r),o.setCalcHeights(a),Ha.create(e,r)},i.prototype._doPrepareTableExtents=function(t){var e=this.model,i=this._rowPoints,o=this.height,n=e.getCalcHeights(),r=Math.floor(o/t.headerRows);if(i.length=this._getTableRowCount(t)+1,i[0]=0,i.length>0){for(var s=1;s<i.length-1;s++)i[s]=i[s-1]+(n[s-1]||r);i[s]=o}},i.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],o=e.children[0],n=0;o&&n<i.length;n++){var r=i[n].layout.source,s=o.children[n];s&&r&&(s[xt.TextProp]=r.header.getDisplayText()||r.firstColumn.header.displayText)}},i.prototype._doLayoutContent=function(t){var e=t.grid,i=e.focusedColumn,o=this.model,n=t.cellLayouts._headerCells,r=n.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s;this.$_refreshCells(t,n,this._tbody),this.$_refreshSpans(t,r),this.$_refreshHeadTitle(t,this._thead);for(var u=0;u<r;u++)for(var c=this._cells[u],h=a;h<=l;h++){var p=c[h];if(p.visible||h===a){var d=void 0;p.layout.isProxy?(d=p.layout.source,p=this.tableCellByLayout(d)):d=p.layout;var f=p.cell;if(f[w]=d.isColumn(i),p.setClassName(this.$_getCellSelector(d,f)),d.isNull)p.setText(p.textSpan,d.header.getDisplayText());else if(d instanceof Zr){var g=o.getCell(d);this._updateGroupCell(e,o,g,p)}else g=o.getCell(d),this._updateCell(e,o,g,p)}}},i.prototype._doRender=function(t){},i.prototype._getTableRowCount=function(t){return t.headerRows},i.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},i.prototype.$_getCellHeight=function(t){var e=t.layout.hrow,i=this._rowPoints[e];return this._rowPoints[e+t.rowSpan]-i},i.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},i.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},i.prototype._getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},i.prototype._doDrawCell=function(t,e,i){},i.prototype._doPrepareTableRow=function(t,i,o,n){e.prototype._doPrepareTableRow.call(this,t,i,o,n);var r=this.model;xt.setClassName(n,r.getStyleName())},i.prototype.$_getCellSelector=function(t,e){var i,o="";if(t instanceof Zr)o="rg-header-group-cell",(i=t.header.styleName)&&(o+=" "+i);else{o="rg-header-cell",e[w]?o+=" rg-header-focus":this.grid.isSelectedLayout(t)&&(o+=" rg-header-select");var n=t.firstColumn;(i=i||n&&n.header.styleName)&&(o+=" "+i)}return o},i.prototype.$_hoverChanged=function(t,e){var i=this.grid.getTableCell(t.target),o=this.tableCellByCell(i),n=this.model,r=o.layout,s=n.getCell(r);o.hovered=e,r instanceof Yr&&this._updateCell(this.grid,n,s,o)},i.prototype.$_pointerEnter=function(t){this.$_hoverChanged(t,!0)},i.prototype.$_pointerLeave=function(t){this.$_hoverChanged(t,!1)},i.prototype._getStartCell=function(t){return t.getStartCell()},i.prototype._getEndCell=function(t){return t.getEndCell()},i.prototype.$_refreshCells=function(t,e,i){for(var o=this._cells,n=i.children,r=n.length,s=this._getFirstCell(t),a=this._getLastCell(t)-s+1,l=o.length;l<r;l++)o.push([]);for(var u=0;u<r;u++){for(var c=o[u],h=n[u].children,p=e[u],d=0;d<a;d++){var f=h[d],g=p[d+s],y=c[d];y?y.cell!==f||y.layout!=g&&(y.layout=g,y.clear(!0)):(y=c[d]=new _l(h[d])).layout=g,y.height=this.$_getCellHeight(y),y.width=this._getCellWidth(t,d),y.spanned=!1}for(d=a;d<c.length;d++)c[d].dispose();c.length=a}for(u=r;u<o.length;u++){var _=o[u];for(d=0;d<_.length;d++)_[d].dispose(),_[d]=null}o.length=r},i.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,n=this._getLastCell(t)-i,r=0;r<e;r++)for(var s=this._cells[r],a=s.length,l=o;l<=n;l++){var u=s[l],c=u.layout,h=c.parent,p=h&&h.vertical;if(u.spanned);else if(c.isProxy)u.clear(!1);else{var d=0,f=c.getHeaderSpan()-1;if(f>0){var g=0,y=c.vindex+1;if(p)for(;g++<f&&g<e;)d+=h.getVisible(y++)._hspan,this._cells[r+g][l].span();else for(;g++<f&&l-o+g<a&&y<h.visibleCount;)d+=h.getVisible(y++)._cspan,s[l+g].span()}(c instanceof Zr||c.isNull)&&u.clear(!0),p?u.set(c._cspan,c._hspan+d,!0):u.set(c._cspan+d,c._hspan,!0),u.width=this._getCellWidth2(t,l,u.colSpan)}}},i.prototype._updateCell=function(e,o,n,r){var s=e.doc,a=e.sortingOptions,l=e.filteringOptions,u=r.layout.firstColumn,c=n.checkLocation,h=c&&c!=t.ColumnHeaderItemLocation.NONE?o.checkWidth:0,p=h>0?o.checkWidth:0,d=u&&this.$_canSortHandleVisible(a,u,r),f=u&&u.sortDirection||t.SortDirection.NONE,g=d?o.sortWidth:0,y=u&&this.$_canFilterHandleVisible(l,u,r)?o.filterWidth:0,_=u&&this.$_canPopupHandleVisible(o,u,r)?o.popupWidth:0,m=r.cell.firstElementChild,v=r.textSpan,b=r.width,C=this.$_getCellHeight(r),w=0,S=0,E=0,x=0,O=m.style;r.setRendererClassName(m,i.RENDERER_STYLE),O.maxHeight=Math.max(C-2,0)+"px";var R=r.check;if(h>0){var I=v.style;R?O=R.style:(R=s.createElement("input"),r.check=R,R.type="checkbox",R.className="rg-header-check",(O=R.style).position="absolute",O.display="inline-block",O.verticalAlign="middle"),r.checkWidth<=0&&(m.appendChild(R),r.checkWidth=h),R.checked=u.checked,R.title=n.text+" "+u.checked?"checked":"unchecked";var T=-1,P=-1;switch(I.removeProperty("display"),c){case t.ColumnHeaderItemLocation.LEFT:case t.ColumnHeaderItemLocation.LEFT_EDGE:m.insertBefore(R,r.textSpan),c===t.ColumnHeaderItemLocation.LEFT?(O.position="relative",O.removeProperty("left"),O.removeProperty("top")):(O.position="absolute",w+=h,T=0,P=Math.floor((C-o.checkHeight)/2));break;case t.ColumnHeaderItemLocation.RIGHT:case t.ColumnHeaderItemLocation.RIGHT_EDGE:m.insertBefore(r.textSpan,R),c===t.ColumnHeaderItemLocation.RIGHT?(O.position="relative",O.removeProperty("left"),O.removeProperty("top")):(O.position="absolute",S+=h,T=b-h,P=Math.floor((C-o.checkHeight)/2));break;case"top":case"topEdge":m.insertBefore(R,r.textSpan),c===t.ColumnHeaderItemLocation.TOP?(I.display="block",O.position="relative",O.removeProperty("left"),O.removeProperty("top")):(O.position="absolute",E+=p,T=Math.floor((b-g-y-o.checkWidth)/2),P=0);break;case"bottom":case"bottomEdge":m.insertBefore(r.textSpan,R),c===t.ColumnHeaderItemLocation.BOTTOM?(I.display="block",O.position="relative",O.removeProperty("left"),O.removeProperty("top")):(O.position="absolute",x+=p,T=Math.floor((b-g-y-o.checkWidth)/2),P=C-o.checkHeight)}T>-1&&(O.left=T+"px"),P>-1&&(O.top=P+"px")}else r.checkWidth>0&&(m.removeChild(R),r.checkWidth=0);var D=r.filter;y>0?(D?O=D.style:(D=s.createElement("span"),r.filter=D,(O=D.style).position="absolute",O.display="inline-block"),r.filterWidth<=0&&(m.appendChild(D),r.filterWidth=y),D.className="rg-header-filtering"+(u.isFiltered()?" filter-activated":""),S+=y,O.left=b-S+"px",O.top=Math.floor((C-o.filterHeight)/2)+"px",O.width=y+"px",O.height=o.filterWidth+"px"):r.filterWidth>0&&(m.removeChild(D),r.filterWidth=0);var k=r.sort;if(d){switch(k?O=k.style:(k=s.createElement("span"),r.sort=k,(O=k.style).position="absolute",O.display="inline-block"),r.sortWidth<=0&&(m.appendChild(k),r.sortWidth=g),f){case t.SortDirection.DESCENDING:k.className="rg-header-sort-descending";break;case t.SortDirection.ASCENDING:k.className="rg-header-sort-ascending";break;default:k.className="rg-header-sort-none"}S+=g,O.left=b-S+"px",O.width=g+"px",a.showSortOrder&&u.sortOrder>=0?(k[xt.TextProp]=(u.sortOrder+1).toString(),O.top=Math.max(0,Math.floor((C-o.sortHeight-10)/2))+"px",O.height=Math.min(r.height,o.sortHeight+10)+"px",O.backgroundPositionY=xt.isIE?"5px":"70%",O.lineHeight=xt.isIE?"1.5em":"1em"):(k[xt.TextProp]="",O.backgroundPositionY="center",O.top=Math.floor((C-o.sortHeight)/2)+"px",O.height=o.sortHeight+"px")}else r.sortWidth>0&&(m.removeChild(k),r.sortWidth=0);var A=r.popup;_>0?(A?O=A.style:(A=s.createElement("span"),r.popup=A,(O=A.style).position="absolute",O.display="inline-block"),r.popupWidth<=0&&(m.appendChild(A),r.popupWidth=_),A.className="rg-header-popup",S+=_,O.left=b-S+"px",O.top=Math.floor((C-o.popupHeight)/2)+"px",O.width=_+"px",O.height=o.popupWidth+"px"):r.popupWidth>0&&(m.removeChild(A),r.popupWidth=0),O=m.style,r.showTooltip=n.showTooltip,r.tooltip=n.tooltip,r.setDivMarigns(O,w,S,E,x);var L=n.template;L?r.setHtml(v,L):r.setText(v,n.text||""),pl.addEdgeMark(n.edgeMark,r,s)},i.prototype._updateGroupCell=function(t,e,i,o){var n=t.doc,r=o.cell.firstElementChild,s=o.textSpan,a=this.$_getCellHeight(o),l=o.layout,u=0,c=r.style;c.maxHeight=Math.max(a-2,0)+"px";var h=this.$_canExpanderHandleVisible(l),p=o.expander;if(h){o.expander||((p=o.expander=n.createElement("span")).style.position="absolute",p.style.display="inline-block"),p.className=l.expanded?"rg-column-expanded":"rg-column-collapsed";var d=p.style;d.left="2px",d.top=Math.floor((a-e.expanderHeight)/2)+"px",d.width=e.expanderWidth+"px",d.height=e.expanderHeight+"px",u+=e.expanderWidth+2,r.appendChild(o.expander)}else o.expander&&r.removeChild(o.expander);o.showTooltip=i.showTooltip,o.tooltip=i.tooltip,o.setDivMarigns(c,u,0,0,0);var f=i.template;f?o.setHtml(s,f):o.setText(s,i.text||""),pl.addEdgeMark(i.edgeMark,o,n)},i.prototype.$_canPopupHandleVisible=function(e,i,o){if(null==i.header.popupMenuName)return!1;switch(e.showPopupMenu){case t.HandleVisibility.VISIBLE:case t.HandleVisibility.ALWAYS:return!0;case t.HandleVisibility.HOVERED:return o.hovered;case t.HandleVisibility.HIDDEN:return!1}},i.prototype.$_canFilterHandleVisible=function(e,i,o){var n=e.enabled&&i.hasFilters&&i.filterable&&i.filterIconVisible;if(n)switch(e.handleVisibility){case t.HandleVisibility.HIDDEN:n=!1;break;case t.HandleVisibility.HOVERED:n=n&&o.hovered}return n},i.prototype.$_canSortHandleVisible=function(e,i,o){switch(e.handleVisibility){case t.HandleVisibility.VISIBLE:return i.sortOrder>=0;case t.HandleVisibility.HOVERED:return o.hovered&&i.sortOrder>=0;case t.HandleVisibility.ALWAYS:return i.sortable||i.sortOrder>=0;case t.HandleVisibility.HIDDEN:return!1}},i.prototype.$_canCheckHandleVisible=function(t,e){return!1},i.prototype.$_canExpanderHandleVisible=function(t){return t.isExpandable()},i.prototype.$_checkHeight=function(){return this._dirty&&this._table.offsetHeight!=this._rowPoints[this._rowPoints.length-1]},i.prototype.$_getHeights=function(t){var e=this._tbody.rows;if(0==t.length)for(var i=0,o=this._rowPoints.length-1;i<o;i++)t[i]=0;for(i=0;i<t.length;i++)t[i]=Math.max(t[i],e[i]?e[i].offsetHeight:0)},i.prototype.$_adjustHeights=function(t){var e=this._tbody.rows,i=this._rowPoints;i[0]=0;for(var o=0,n=i.length-1;o<n;o++)e[o].style.height=t[o]+"px",i[o+1]=i[o]+t[o];return i[i.length-1]},i.prototype.$_distributeHeights=function(t,e){for(var i=e.length,o=0,n=0;n<i;n++)o+=e[n];if(t>o){var r=this._tbody.rows,s=t-o,a=s;for(n=0;n<i-1;n++){var l=Math.floor(s*e[n]/o);e[n]+=l,r[n].style.height=e[n]+"px",a-=l}e[n]+=a,r[n]&&(r[n].style.height=e[n]+"px")}},i.RENDERER_STYLE="rg-header-renderer",i}(Ka),vl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e.prototype._getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)},e.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)},e}(ml),bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.cellCount-1},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e.prototype._getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)},e.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)},e}(ml),Cl=function(e){function i(i){var o=e.call(this)||this;return o._refreshMode=t.RefreshMode.ALL,o._leftPos=0,o._rightFixed=!0,o._footerCount=0,o._headerSummaryCount=0,o._layoutCount=0,o._fixedLayoutCount=0,o._rightLayoutCount=0,o._firstLayout=0,o._lastLayout=0,o._layoutsLength=0,o._layouts=[],o._layoutPoints=[],o._fixedLayoutPoints=[],o._rightLayoutPoints=[],o._cellCount=0,o._fixedCellCount=0,o._rightCellCount=0,o._firstCell=0,o._lastCell=0,o._startCell=0,o._endCell=0,o._cellPoints=[],o._fixedCellPoints=[],o._rightCellPoints=[],o._trs=1,o._rowGrouped=!1,o._items=[],o._topIndex=0,o._itemCount=0,o._fixedItemCount=0,o._fullItemCount=0,o._fixedItemPoints=[],o._itemPoints=[],o._fixedTableRowCount=0,o._tableRowCount=0,o._fixedTableRowPoints=[],o._tableRowPoints=[],o._fixedTableItemPoints=[],o._tableItemPoints=[],o._fixedDataHeight=0,o._dataRowHeights=[],o._dataHeight=0,o._fixedBarWidth=0,o._rightBarWidth=0,o._fixedBarHeight=0,o._itemsBounds=0,o._fixedWidth=0,o._rightWidth=0,o._fixedHeight=0,o._autoRowHeights=!1,o._minRowHeight=ja.MIN_TABLE_ROW_HEIGHT,o._minItemHeight=ja.MIN_TABLE_ROW_HEIGHT,o._maxHeight=ja.MIN_TABLE_ROW_HEIGHT,o._itemHeight=0,o._hscrolled=!1,o._vscrolled=!1,o._hscrollBar=!1,o._vscrollBar=!1,o._scrollBarWidth=0,o._scrollBarHeight=0,o._scrollWidth=0,o._fitStyle=void 0,o._grid=i,o}return n(i,e),i.prototype._doDispose=function(){this._grid=null,this._rs=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerCount",{get:function(){return this._footerCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerSummaryCount",{get:function(){return this._headerSummaryCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vscrollBar",{get:function(){return this._vscrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hscrollBar",{get:function(){return this._hscrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarHeight",{get:function(){return this._scrollBarHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataBounds",{get:function(){return this._dataBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bodyBounds",{get:function(){return this._bodyBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedBodyBounds",{get:function(){return this._fixedBodyBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gridBounds",{get:function(){return this._gridBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerBounds",{get:function(){return this._headerBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryBounds",{get:function(){return this._summaryBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerBounds",{get:function(){return this._footerBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterPanelBounds",{get:function(){return this._filterPanelBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topContentBounds",{get:function(){return this._topContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftContentBounds",{get:function(){return this._leftContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowBarBounds",{get:function(){return this._rowBarBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sideContentBounds",{get:function(){return this._sideContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentBounds",{get:function(){return this._contentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedContentBounds",{get:function(){return this._fixedContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nonFixedBounds",{get:function(){return this._nonFixedBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightContentBounds",{get:function(){return this._rightContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headBounds",{get:function(){return this._headBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sumBounds",{get:function(){return this._sumBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footBounds",{get:function(){return this._footBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedWidth",{get:function(){return this._fixedWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightWidth",{get:function(){return this._rightWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultItemHeight",{get:function(){return this._itemHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topIndex",{get:function(){return this._topIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedItemCount",{get:function(){return this._fixedItemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fullItemCount",{get:function(){return this._fullItemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedTableRowCount",{get:function(){return this._fixedTableRowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tableRowCount",{get:function(){return this._tableRowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trs",{get:function(){return this._cellLayouts.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftPos",{get:function(){return this._leftPos},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellLayouts",{get:function(){return this._cellLayouts},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layoutCount",{get:function(){return this._layoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedLayoutCount",{get:function(){return this._fixedLayoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightLayoutCount",{get:function(){return this._rightLayoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstLayout",{get:function(){return this._firstLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastLayout",{get:function(){return this._lastLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFirstLayout",{get:function(){return this._layoutCount-this._rightLayoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layoutsLength",{get:function(){return this._layoutsLength},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellCount",{get:function(){return this._cellCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCellCount",{get:function(){return this._fixedCellCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightCellCount",{get:function(){return this._rightCellCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstCell",{get:function(){return this._firstCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastCell",{get:function(){return this._lastCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startCell",{get:function(){return this._startCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endCell",{get:function(){return this._endCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isColumnFitted",{get:function(){return!!this._fitStyle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollWidth",{get:function(){return this._scrollWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedBarWidth",{get:function(){return this._fixedBarWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightBarWidth",{get:function(){return this._rightBarWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedHeight",{get:function(){return this._fixedHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedBarHeight",{get:function(){return this._fixedBarHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGrouped",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergedRowGrouped",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupFields",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupLevels",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientRect",{get:function(){return this._clientRect},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return this._cellLayouts.headerRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRows",{get:function(){return this._cellLayouts.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topPanelVisible",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minItemHeight",{get:function(){return this._minItemHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fitStyle",{get:function(){return this._fitStyle},enumerable:!1,configurable:!0}),i.prototype.syncHeight=function(){return this.grid.displayOptions.syncGridHeight!==t.SyncGridHeight.NONE},i.prototype.fitSyncHeight=function(){return this._fitSyncHeight},i.prototype.getStartCell=function(e){if(void 0===e&&(e=!0),e)return this._firstCell;var i=this.grid,o=i.isRecycleMode();switch(this._refreshMode){case t.RefreshMode.VISIBLE_ONLY:return this._startCell;case t.RefreshMode.RECYCLE:return o?i._needRefresh&&i._horzScrolled?this._firstCell:this._startCell:this._firstCell;default:return this._firstCell}},i.prototype.getEndCell=function(e){if(void 0===e&&(e=!0),e)return this._lastCell;var i=this.grid,o=i.isRecycleMode();switch(this._refreshMode){case t.RefreshMode.VISIBLE_ONLY:return this._endCell;case t.RefreshMode.RECYCLE:return o?i._needRefresh&&i._horzScrolled?this._lastCell:this._endCell:this._lastCell;default:return this._lastCell}},i.prototype.getLayout=function(t){return this._layouts[t]},i.prototype.getLayoutBounds=function(t){return new q(this._layoutPoints[t],0,this._layoutPoints[t+1]-this._layoutPoints[t],0)},i.prototype.getLayoutWidth=function(t){return this._layoutPoints[t+1]-this._layoutPoints[t]},i.prototype.getPositionToVIndex=function(t){for(var e=this._layoutPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},i.prototype.getFixedLayoutWidth=function(t){return this._fixedLayoutPoints[t+1]-this._fixedLayoutPoints[t]},i.prototype.getRightLayoutWidth=function(t){return this._rightLayoutPoints[t+1]-this._rightLayoutPoints[t]},i.prototype.getCellIndex=function(t){for(var e=this._cellPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},i.prototype.getHorzColumnIndex=function(t){for(var e=t,i=0;e;)i+=!e.group||e.group.horizontal?e.vindex:0,e=e.group;return i},i.prototype.getLeftCell=function(){return this.getCellIndex(this._leftPos)},i.prototype.getCellPoint=function(t){return this._cellPoints[t]},i.prototype.getCellWidth=function(t){return this._cellPoints[t+1]-this._cellPoints[t]},i.prototype.getCellWidth2=function(t,e){var i=this._cellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},i.prototype.getFixedCellPoint=function(t){return this._fixedCellPoints[t]},i.prototype.getFixedCellWidth=function(t){return this._fixedCellPoints[t+1]-this._fixedCellPoints[t]},i.prototype.getFixedCellWidth2=function(t,e){var i=this._fixedCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},i.prototype.getRightCellPoint=function(t){return this._rightCellPoints[t]},i.prototype.getRightCellWidth=function(t){return this._rightCellPoints[t+1]-this._rightCellPoints[t]},i.prototype.getRightCellWidth2=function(t,e){var i=this._rightCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},i.prototype.$_getItems=function(){return this._items},i.prototype.getItem=function(t){return this._items[t]},i.prototype.getDataRowHeights=function(t){var e=this.grid.displayOptions,i=[],o=e.dataHeights;if(o&&o.length>0)for(var n=0;n<t;n++){var r=Math.floor(Math.max(e.minTableRowHeight,o[n]||e.minTableRowHeight));i.push(r)}return i.slice()},i.prototype._calcDefaultRowHeight=function(t){var e=this.grid.displayOptions.rowHeight,i=this._dataRowHeights=this.getDataRowHeights(this._trs);return i&&i.length>0&&(e=i.reduce((function(t,e){return t+e}),0)),e<=0&&(e=t.heightMeasurer.rowHeight*this._trs),i.length>0&&this._maxHeight>0&&(e>this._maxHeight||e<this._minItemHeight)&&(this._dataRowHeights=[]),this._maxHeight>0&&(e=Math.min(this._maxHeight,e)),Math.max(this._minItemHeight,e)},i.prototype.measure=function(t,e,i,o,n){var r=this._grid;this._rs=r.itemSource,this._cellLayouts=r._activeCellLayout,this._footerCount=r.footers.visibleCount,this._headerSummaryCount=r.headerSummaries.visibleCount,this._leftPos=e,this._topIndex=i,this._focusIndex&&!r.isValid(this._focusIndex)&&this._focusIndex.normalize(r),this._prevVscrolled=this._vscrolled,this._prevHscrolled=this._hscrolled,this._doMeasure(t,o,n),this._prevVscrolled===this._vscrolled&&this._prevHscrolled===this._hscrolled||(r._columnsDirty=!0)},i.prototype.layout=function(t){var e=this._grid;e.invalidateGridObject(),this._doLayout(e,t),this._adjustLayout(e,this._gridBounds.clone()),this._prevFocused=this._focusIndex,this._focusIndex=null,this._oldSyncHeight=e.displayOptions.syncGridHeight},i.prototype.getItemHeight=function(t){var e=t.index;return e<this._fixedItemCount?this._fixedItemPoints[e+1]-this._fixedItemPoints[e]:(e-=this._fixedItemCount-this._topIndex,this._itemPoints[e+1]-this._itemPoints[e])},i.prototype.getTableItemHeight=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]-this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t+1]-this._tableItemPoints[t])},i.prototype.getTableItemIndex=function(t){for(var e=0;e<this._fixedItemCount;e++)if(t<=this._fixedTableItemPoints[e+1])return e;for(e=0;e<this._itemCount;e++)if(t<=this._tableItemPoints[e+1])return e+this._fixedItemCount;return-1},i.prototype.getTableItemTop=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t])},i.prototype.getTableItemBottom=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]:(t-=this._fixedItemCount,this._tableItemPoints[t+1])},i.prototype.getItemBounds=function(t){var e,i;return this._fixedItemCount>0&&t<this._fixedItemCount?(e=this._fixedItemPoints[t],i=this._fixedItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._itemPoints[t],i=this._itemPoints[t+1]-e),new q(0,e,1e3,i)},i.prototype.getItemRect=function(t,e){void 0===e&&(e=!1);var i,o,n=(e?this._fixedContentBounds:this._bodyBounds).y;return this._fixedItemCount>0&&t<this._fixedItemCount?(i=this._fixedItemPoints[t]+n,o=this._fixedItemPoints[t+1]+n-i):(t-=this._fixedItemCount,i=this._itemPoints[t]+n,o=this._itemPoints[t+1]+n-i),new q(0,i,1e3,o)},i.prototype.getTableItemBounds=function(t){var e,i;return this._fixedItemCount>0&&t<this._fixedItemCount?(e=this._fixedTableItemPoints[t],i=this._fixedTableItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._tableItemPoints[t],i=this._tableItemPoints[t+1]-e),new q(0,e,1e3,i)},i.prototype.getTableRowHeightFixed=function(t,e){var i=this._fixedTableRowPoints.length;return t<i-1?this._fixedTableRowPoints[Math.min(t+e,i-1)]-this._fixedTableRowPoints[t]:(i>1&&(t-=i),this._tableRowPoints[Math.min(t+e,this._tableRowPoints.length-1)]-this._tableRowPoints[t])},i.prototype.getTableRowHeight=function(t,e){return t<this._fixedTableRowCount?this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowPoints.length-1)]-this._fixedTableRowPoints[t]:(this._fixedItemCount>0&&(t-=this._fixedItemCount*this._trs+1),this._tableRowPoints[Math.min(t+e,this._tableRowPoints.length-1)]-this._tableRowPoints[t])},i.prototype.getTableRowBounds=function(t,e){var i,o;return this._fixedTableRowCount>0&&t<this._fixedTableRowCount?(i=this._fixedTableRowPoints[t],o=this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowCount)]-i):(this._fixedTableRowCount>0&&(t-=this._fixedTableRowCount+1),i=this._tableRowPoints[t],o=this._tableRowPoints[Math.min(t+e,this._tableRowCount)]-i),new q(0,i,1e3,o)},i.prototype.getTableRowIndex=function(t){t-=this.contentBounds.y+this.bodyBounds.y;for(var e=0;e<this._fixedTableRowCount;e++)if(t<=Math.round(this._fixedTableRowPoints[e+1]))return e;for(e=0;e<this._tableRowCount;e++)if(t<=Math.round(this._tableRowPoints[e+1]))return e+(this._fixedTableRowCount>0?this._fixedTableRowCount+1:0);return-1},i.prototype.setLeftPos=function(t,e){var i=this._grid;this._leftPos=e,this.$_calcLeftPos(),i.contentPane.x=this._contentBounds.x=this.fixedContentBounds.right-this._leftPos},i.prototype.isMergedCell=function(t){return!1},i.prototype.getMergeRoom=function(t){var e=t.layout;if(e instanceof Yr&&e.canMerge()){var i=e.merges;return i&&i.getRoom(t)}return null},i.prototype.getHeaderCellAt=function(t,e,i){void 0===i&&(i=!1);var o,n=this._grid,r=this._cellLayouts._headerCells,s=-1;if(t<this._fixedContentBounds.right){o=n.fixedHeaderView,t-=this._fixedContentBounds.x;for(var a=0;a<this._fixedCellCount;a++)if(t>=this._fixedCellPoints[a]&&t<this._fixedCellPoints[a+1]){s=a;break}}else if(t>this._rightContentBounds.x){for(o=n.rightHeaderView,t-=this._rightContentBounds.x,a=0;a<this._rightCellCount;a++)if(t>=this._rightCellPoints[a]&&t<this._rightCellPoints[a+1]){s=a+this._cellCount-this._rightCellCount;break}}else for(o=n.headerView,t-=this._contentBounds.x,a=0;a<this._cellPoints.length;a++)if(t>=this._cellPoints[a]&&t<this._cellPoints[a+1]){s=a+this._fixedCellCount;break}if(s>=0){var l=r[o.getRowAt(e-this._headerBounds.y-this._contentBounds.y)][s];return(l=o.getSpanRoot(l))&&!i?l.source:l}},i.prototype.getHeaderCellRect=function(t,e){void 0===e&&(e=!1);var i,o,n=this.grid,r=t.hcol,s=this.cellCount-this.rightCellCount;if(r<this._fixedCellCount){var a=this._fixedContentBounds.x,l=r,u=(o=n.fixedHeaderView.tableCellByLayout(t))?o.colSpan:t.cols;i=new q(this._fixedCellPoints[l]+a,0,this._fixedCellPoints[l+u]-this._fixedCellPoints[l],0)}else r>=s?(a=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,l=r-s,u=(o=n.rightHeaderView.tableCellByLayout(t))?o.colSpan:t.cols,i=new q(this._rightCellPoints[l]+a,0,this._rightCellPoints[l+u]-this._rightCellPoints[l],0)):(a=this._contentBounds.x,l=r-this._fixedCellCount,u=(o=n.headerView.tableCellByLayout(t))?o.colSpan:t.cols,i=new q(this._cellPoints[l]+a,0,this._cellPoints[l+u]-this._cellPoints[l],0));return i.y=this._contentBounds.y+n.headerView.getLayoutPos(t),i.height=n.headerView.getLayoutHeight(t,o,e),i},i.prototype.getDataRect=function(t){var e,i=(t=t.source).col,o=t instanceof Zr?t._clen:t._defColSpan,n=this.cellCount-this.rightCellCount;if(i<this._fixedCellCount){var r=this._fixedContentBounds.x,s=i;e=new q(this._fixedCellPoints[s]+r,0,this._fixedCellPoints[s+o]-this._fixedCellPoints[s],0)}else i>=n?(r=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,s=i-n,e=new q(this._rightCellPoints[s]+r,0,this._rightCellPoints[s+o]-this._rightCellPoints[s],0)):(r=this._contentBounds.x,s=i-this._fixedCellCount,e=new q(this._cellPoints[s]+r,0,this._cellPoints[s+o]-this._cellPoints[s],0));return e},i.prototype.getBodyView=function(t){var e=this.rightFirstLayout,i=(t instanceof zr?t:t.layout).root.vindex;return i<this._fixedLayoutCount?this._grid.fixedBodyView:i>=e?this._grid.rightBodyView:this._grid.bodyView},i.prototype.mouseToIndex=function(t,e,i,o){if(o.set(-1,null),this._layoutCount<1)return o;var n=this.grid,r=this._summaryBounds.bottom,s=-1;if((i-=this._contentBounds.y)>=r&&i<this._footerBounds.y){for(var a=0;a<this._fixedItemCount;a++)if(i>=r+this._fixedItemPoints[a]&&i<r+this._fixedItemPoints[a+1]){s=a,i-=r+this._fixedItemPoints[a];break}if(s<0&&this._itemCount>0){for(a=0;a<this._itemCount;a++)if(i>=r+this._itemPoints[a]&&i<r+this._itemPoints[a+1]){s=a;break}s>=0&&(s+=n.topItem)}}else i>=this._footerBounds.y?s=-2:i<this._headerBounds.y&&(s=-3);if(o.itemIndex=s,t){var l=n.getCellViewOf(t),u=l&&n.getBodyView(l),c=u instanceof fl&&u.layoutByCell(l);if(c)return o.layout=c,o}return o},i.prototype.mouseToIndexEx=function(t,e,i,o){if(this._layoutCount<1)return o;var n=this.grid,r=this._topIndex+this._fixedItemCount,s=this._summaryBounds.bottom,a=0;if((i-=this._contentBounds.y)<s)a=-1;else if(i>=this._bodyBounds.bottom&&i<this._footerBounds.y)a=r+this._fullItemCount;else if(i>=this._footerBounds.y)a=r+this._fullItemCount;else{a=-1,i-=s;for(var l=0;l<this._fixedItemCount;l++)if(i>=this._fixedItemPoints[l]&&i<this._fixedItemPoints[l+1]){a=l;break}if(a<0&&this._itemCount>0){for(l=0;l<this._itemCount;l++)if(i>=this._itemPoints[l]&&i<this._itemPoints[l+1]){a=l;break}a>=0&&(a+=r)}}o.itemIndex=a;var u=-1,c=this._gridBounds.x;if(e<c)u=Math.max(0,this._firstLayout-1);else if(e>=this._bodyBounds.right&&e<this._clientRect.right)u=n.visibleLayoutCount-1;else{for(e-=c,l=0;l<this._fixedLayoutCount;l++)if(e>=this._fixedLayoutPoints[l]&&e<this._fixedLayoutPoints[l+1]){u=l;break}if(u<0&&this._rightLayoutCount>0){var h=e-this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth+c;for(l=0;l<this._rightLayoutCount;l++)if(h>=this._rightLayoutPoints[l]&&h<this._rightLayoutPoints[l+1]){u=l+this.rightFirstLayout;break}}if(u<0)for(e=e-this._fixedWidth+this._leftPos,l=this._firstLayout;l<=this._lastLayout;l++)if(e>=this._layoutPoints[l-this._fixedLayoutCount]&&e<this._layoutPoints[l-this._fixedLayoutCount+1]){u=l;break}}return u>=0&&u<n.visibleLayoutCount?o.layout=n.getVisibleLayout(u):o.layout=null,o},i.prototype.cellIsVisible=function(t){var e=t.itemIndex,i=this._fixedItemCount;if(e>=i){if(e<this._topIndex+i)return!1;if(0==this._fullItemCount&&e==this._topIndex+i)return!0;if(e>=this._topIndex+i+this._fullItemCount)return!1}var o=t.layout,n=o.col;if(n>=(i=this._fixedLayoutCount)){if(n=o.col-this._fixedCellCount,this._cellPoints[n]<this._leftPos)return!1;if(this._cellPoints[n+o.cols]-this._leftPos>this._nonFixedBounds.width)return!1}return!0},i.prototype.clearFocusRequest=function(){this._focusIndex=null},i.prototype.focusIsVisible=function(t){return(t=t||this._focusIndex)&&this.cellIsVisible(t)},i.prototype.makeCellVisible=function(t){this._focusIndex=t.clone()},i.prototype.isAutoRowHeights=function(){return this._autoRowHeights},i.prototype.isRowGrouped=function(){return this._rowGrouped},i.prototype.scrollToNextCell=function(){for(var t=0;t<this._cellCount;t++)if(this._cellPoints[t]>this._leftPos)return this._cellPoints[t];return this._leftPos},i.prototype.scrollToPrevCell=function(){for(var t=this._cellCount-1;t>=0;t--)if(this._cellPoints[t]<this._leftPos)return this._cellPoints[t];return this._leftPos},i.prototype.needRelayout=function(){return this._autoRowHeights&&this._fitStyleChanged&&this._fitStyle==t.GridFitStyle.EVEN_FILL||this.syncHeight()&&this._fitSyncChanged},i.prototype.$_calcFixedCellPoints=function(t,e){var i=this._layoutCount=e.visibleCount,o=e._cellWidths,n=this._fixedLayoutCount=Math.min(t.colCount,i);if(this._rightLayoutCount=Math.max(0,Math.min(t.rightCount,i-n-1)),this._rightFixed=t.rightFixed,this._cellCount=0,this._fixedCellCount=0,this._rightCellCount=0,this._layouts=[],this._fixedLayoutPoints=[],this._fixedWidth=0,this._rightWidth=0,this._rightBarWidth=0,this._fixedCellPoints=[],n>0){var r=this._layouts,s=this._fixedLayoutPoints,a=this._fixedCellPoints,l=0,u=0;s.push(l),a.push(l);for(var c=0;c<n;c++){for(var h=e.getVisible(c),p=h.cols,d=0;d<p;d++)l+=o[u++],a.push(l);r.push(h),s.push(l)}this._fixedCellCount=this._cellCount=u,this._fixedWidth=s[n]+(this._fixedBarWidth=t.colBarWidth)}},i.prototype.$_calcCellPoints=function(t){var e=t.visibleCount-this._fixedLayoutCount-this._rightLayoutCount,i=t._cellWidths,o=this._layoutPoints=[],n=this._cellPoints=[],r=this._fixedLayoutCount,s=this._layouts;if(this._firstCell=this._lastCell=this._cellCount,this._layoutsLength=0,e>0){var a=0,l=this._cellCount;o.push(a),n.push(a);for(var u=0;u<e;u++){for(var c=t.getVisible(u+r),h=c.cols,p=0;p<h;p++)a+=i[l++],n.push(a);s.push(c),o.push(a)}this._layoutsLength=a,this._cellCount=l,this._lastCell=l-1}},i.prototype.$_calcRightCellPoints=function(t,e){var i=e._cellWidths,o=this._layoutCount,n=this._rightLayoutPoints=[],r=this._rightCellPoints=[],s=this._layouts;if(this._rightLayoutCount>0){var a=0,l=this._cellCount;n.push(a),r.push(a);for(var u=o-this._rightLayoutCount;u<o;u++){for(var c=e.getVisible(u),h=0;h<c.cols;h++)a+=i[l++],r.push(a);s.push(c),n.push(a)}this._rightCellCount=l-this._cellCount,this._cellCount=l,this._rightWidth=n[this._rightLayoutCount]+(this._rightBarWidth=t.rightBarWidth)}},i.prototype.$_calcScrollWidth=function(t){this._scrollWidth=t.width-this._leftContentBounds.width-this._sideContentBounds.width-this._fixedContentBounds.width-this._rightContentBounds.width},i.prototype.$_calcLeftPos=function(){var e=this._focusIndex&&this._focusIndex.layout,i=this._leftPos;if(e){var o=e.root.vindex,n=this._cellPoints,r=this.grid,s=r.editOptions.focusMoveStep===t.FocusMoveStep.GROUP;if(!r.isSwiping&&o>=this._fixedLayoutCount&&o<this.rightFirstLayout){var a=e.col-this._fixedCellCount,l=n[a],u=r.displayOptions.horzPageScroll&&"keydown"===r._eventFrom&&r._prevTop===this._topIndex;if(l<this._leftPos)u&&this._leftPos>=n[a+1]&&(l=l-(this.gridBounds.width+n[a]-n[a+1])+(this._fixedContentBounds.width+this._rightContentBounds.width)),i=l;else{var c=n[a+(s?e.root.cols:e.cols)]-this._leftPos-this._scrollWidth;u&&n[a]-this._leftPos>=this._scrollWidth&&(c=Math.max(n[a]-n[this.getLeftCell()],c)),c>0&&(i=Math.min(l,this._leftPos+c))}}}(i=Math.max(0,Math.min(i,this._layoutsLength-this._scrollWidth)))!==this._leftPos&&(this.grid._horzScrolled=!0,this._leftPos=i),this._firstLayout=this._fixedLayoutCount,this._lastLayout=this._layoutCount>0?this._layoutCount-this._rightLayoutCount-1:-1},i.prototype.$_checkFitting=function(e,i){var o=e.fitStyle;if(o!=t.GridFitStyle.NONE){var n=this._cellPoints,r=n.length;if(r>0)return o==t.GridFitStyle.EVEN_FILL||i-n[r-1]>0?o:void 0}},i.prototype.$_fitColumns=function(e,i,o){var n=this;if(e.fitStyleIncludeFixed&&this._fixedCellCount+this._rightCellCount>0){var r=[this._fixedLayoutPoints,this._layoutPoints,this._rightLayoutPoints],s=0;r.forEach((function(t){t.length>0&&(s+=t[t.length-1])}));var a=this._clientRect.width-this._leftContentBounds.width-this._sideContentBounds.width-this._scrollBarWidth;a=a-(this._fixedCellCount?this._fixedBarWidth:0)-(this._rightCellCount?this._rightBarWidth:0),r.forEach((function(t){for(var e=1;e<t.length;e++)t[e]=Math.round(t[e]*(a/s))}));var l=0;r.forEach((function(t,e){var o=0===e?n._fixedCellPoints:1===e?n._cellPoints:n._rightCellPoints,r=t.length,s=i._cellWidths,a=0;o.length=0,o.push(a);for(var u=0;u<r-1;u++){var c=n._cellLayouts.getVisible(l++),h=c._cellWidth,p=t[u+1]-t[u],d=p/h,f=c.hcol,g=c.cols,y=a;c._setFitWidth(p);for(var _=0;_<g-1;_++)y+=s[f+_]*d,o.push(Math.round(y));a+=p,o.push(Math.round(a))}o[o.length-1]=t[r-1]})),this._layoutsLength=xt.getLast(this._layoutPoints),this._fixedWidth=this._fixedCellCount?xt.getLast(this._fixedLayoutPoints)+this._fixedBarWidth:0,this._rightWidth=this._rightCellCount?xt.getLast(this._rightLayoutPoints)+this._rightBarWidth:0,this._fixedContentBounds.width=this._fixedWidth,this.$_measureFixedPane(this.grid),this._contentBounds.left=this._fixedContentBounds.right,this._contentBounds.width=this._layoutsLength,this.$_measureContentPane(this.grid),this._rightContentBounds.left=this._contentBounds.right+this._scrollBarWidth,this._rightContentBounds.width=this._rightWidth,this.$_measureRightPane(this.grid),this._nonFixedBounds=new q(this._fixedContentBounds.right,this._fixedContentBounds.y,this._layoutsLength,this._fixedContentBounds.height)}else{for(var u=0;u<this._layoutCount;u++)(O=this._cellLayouts.getVisible(u)).isFixed&&O._clearFitWidth();var c=this._layoutsLength,h=this._layoutPoints,p=h.length,d=this._fixedLayoutCount,f=[];for(u=1;u<h.length;u++)f.push(h[u]-h[u-1]);if(p>0){var g=e.fitStyle,y=this._layouts;if(g==t.GridFitStyle.EVEN||g==t.GridFitStyle.EVEN_FILL)for(u=1;u<p;u++)h[u]=h[u]*o/c;else if(g==t.GridFitStyle.FILL){var _=0,m=0;for(u=0;u<p-1;u++){var v=y[u+d].fillWidth;v>0?m+=v:_+=f[u]}if(m>0)for(_=o-_,u=1;u<p;u++){var b=(O=y[u-1+d]).fillWidth;h[u]=b>0?h[u-1]+b*_/m:h[u-1]+f[u-1]}else for(u=1;u<p;u++)h[u]=h[u]*o/c}var C=0;for(u=0;u<p-1;u++)h[u]=Math.round(h[u]);for(u=1;u<p-1;u++){var w=h[u]-h[u-1];w<2?(C=2-w,h[u]+=2-w):C>0&&w>2+C&&(h[u]-=C,C=0)}var S=this._cellPoints=[],E=i._cellWidths,x=0;for(S.push(x),u=0;u<p-1;u++){var O,R=(O=this._cellLayouts.getVisible(u+d))._cellWidth,I=h[u+1]-h[u],T=I/R,P=O.hcol,D=O.cols,k=x;O._setFitWidth(I);for(var A=0;A<D-1;A++)k+=E[P+A]*T,S.push(Math.round(k));x+=I,S.push(Math.round(x))}S[S.length-1]=h[p-1]}this._layoutsLength=h[p-1]=o}},i.prototype.$_measureTopPane=function(t){this._doMeasureTopPane(t,this._topContentBounds)},i.prototype._doMeasureTopPane=function(t,e){e.height=0},i.prototype.$_measureViewHeights=function(t,e){var i;i=0,t.header.visible?(this._headerBounds=e.clone(),i=t.headerView.measure(t,e.width,e.height).height,this._headerBounds.height=i):this._headerBounds?this._headerBounds.setEmpty():this._headerBounds=new q,this._fixedHeaderBounds=this._headerBounds.clone(),this._rightHeaderBounds=this._headerBounds.clone(),this._headBounds.y=e.y,this._headBounds.height=i,e.topBy(i),i=0,t.filterPanel.visible?(this._filterPanelBounds=e.clone(),i=t.filterPanelView.measure(t,e.width,e.height).height,this._filterPanelBounds.height=i):(this._filterPanelBounds=this._filterPanelBounds||new q,this._filterPanelBounds.setEmpty()),this._fixedFilterBounds=this._filterPanelBounds.clone(),this._rightFilterBounds=this._filterPanelBounds.clone(),this._filterBounds.y=e.y,this._filterBounds.height=i,e.topBy(i),i=0,t.headerSummaries.canShow?(this._summaryBounds=e.clone(),i=t.headerSummaryView.measure(t,e.width,e.height).height,t.fixedHeaderSummaryView,this._summaryBounds.height=i):this._summaryBounds?this._summaryBounds.setEmpty():this._summaryBounds=new q,this._fixedSummaryBounds=this._summaryBounds.clone(),this._rightSummaryBounds=this._summaryBounds.clone(),this._sumBounds.y=e.y,this._sumBounds.height=i,e.topBy(i),i=0,t.footers.canShow?(this._footerBounds=e.clone(),i=t.footerView.measure(t,e.width,e.height).height,this._footerBounds.height=i):this._footerBounds?this._footerBounds.setEmpty():this._footerBounds=new q,this._fixedFooterBounds=this._footerBounds.clone(),this._rightFooterBounds=this._footerBounds.clone(),this._footBounds.y=e.bottom-this._footerBounds.height,this._footBounds.height=i;var o=this._sumBounds.bottom;i=this._footBounds.y-o,this._rowBarBounds.y=o,this._rowBarBounds.height=i},i.prototype.$_sortSections=function(t){var e=[t.rowIndicator,t.stateBar,t.checkBar];return e.sort((function(t,e){var i=t.displayOrder,o=e.displayOrder;return i==o?t.staticOrder-e.staticOrder:i-o})),e},Object.defineProperty(i.prototype,"sectionObjects",{get:function(){return this._sectionObjects},enumerable:!1,configurable:!0}),i.prototype.$_measureLeftPane=function(t){this._sectionObjects=this.$_sortSections(t);var e,i=this._leftContentBounds.clone().move();this._headBounds=i.clone(),this._sumBounds=i.clone(),this._footBounds=i.clone(),this._filterBounds=i.clone(),e=t.rowBarContainer.measure(t,i.width,i.height),this._rowBarBounds=i.clone(),this._rowBarBounds.width=e.width,this._leftContentBounds.width=e.width,i.leftBy(e.width),this._headBounds.width=this._sumBounds.width=this._footBounds.width=this._filterBounds.width=this._leftContentBounds.width},i.prototype._measureSidePane=function(t){if(t.isSidePaneVisible()){var e=this._sideContentBounds.clone(),i=t.sideContentPane.measure(t,e.width,e.height);this._sideContentBounds.width=i.width}else this._sideContentBounds.width=0},i.prototype.$_measureFixedPane=function(t){var e=this._fixedContentBounds.width=this._fixedWidth,i=this._fixedContentBounds.clone().move();this._fixedHeaderBounds.x=i.x,this._fixedHeaderBounds.y=i.y,this._fixedHeaderBounds.width=i.width,i.topBy(this._fixedHeaderBounds.height),this._fixedFilterBounds.x=i.x,this._fixedFilterBounds.y=i.y,this._fixedFilterBounds.width=i.width,i.topBy(this._fixedFilterBounds.height),e>0&&(t.fixedFilterView._rowPoints=t.filterPanelView._rowPoints.slice()),this._fixedSummaryBounds.x=i.x,this._fixedSummaryBounds.y=this._fixedFilterBounds.bottom,this._fixedSummaryBounds.width=i.width,i.topBy(this._fixedSummaryBounds.height),e>0&&(t.fixedHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._fixedFooterBounds.x=i.x,this._fixedFooterBounds.y=i.bottom-this._fixedFooterBounds.height,this._fixedFooterBounds.width=i.width,i.bottomBy(-this._fixedFooterBounds.height),e>0&&(t.fixedFooterView._rowPoints=t.footerView._rowPoints.slice()),this._fixedBodyBounds=i},i.prototype.$_measureRightPane=function(t){var e=this._rightWidth;this._rightContentBounds.width=e;var i=this._rightContentBounds.clone();i.x=this._rightBarWidth,i.y=0,i.width-=i.x,this._rightHeaderBounds.x=i.x,this._rightHeaderBounds.y=i.y,this._rightHeaderBounds.width=i.width,i.topBy(this._rightHeaderBounds.height),this._rightFilterBounds.x=i.x,this._rightFilterBounds.y=i.y,this._rightFilterBounds.width=i.width,i.topBy(this._rightFilterBounds.height),e>0&&(t.rightFilterView._rowPoints=t.filterPanelView._rowPoints.slice()),this._rightSummaryBounds.x=i.x,this._rightSummaryBounds.y=this._rightFilterBounds.bottom,this._rightSummaryBounds.width=i.width,i.topBy(this._rightSummaryBounds.height),e>0&&(t.rightHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._rightFooterBounds.x=i.x,this._rightFooterBounds.y=i.bottom-this._rightFooterBounds.height,this._rightFooterBounds.width=i.width,i.bottomBy(-this._rightFooterBounds.height),e>0&&(t.rightFooterView._rowPoints=t.footerView._rowPoints.slice()),this._rightBodyBounds=i},i.prototype.$_measureContentPane=function(t){var e=this._layoutsLength;this._contentBounds.width=e;var i=this._contentBounds.clone();i.x=i.y=0,this._headerBounds&&(this._headerBounds.x=i.x,this._headerBounds.y=i.y,this._headerBounds.width=i.width,i.topBy(this._headerBounds.height)),this._filterPanelBounds&&(this._filterPanelBounds.x=i.x,this._filterPanelBounds.y=i.y,this._filterPanelBounds.width=i.width,i.topBy(this._filterPanelBounds.height)),this._summaryBounds&&(this._summaryBounds.x=i.x,this._summaryBounds.y=this._filterPanelBounds.bottom,this._summaryBounds.width=i.width,i.topBy(this._summaryBounds.height)),this._dataBounds=i.clone(),this._footerBounds&&(this._footerBounds.x=i.x,this._footBounds.y=this._footerBounds.y=i.bottom-this._footerBounds.height,this._footerBounds.width=i.width,i.bottomBy(-this._footerBounds.height)),this._bodyBounds=i},i.prototype.getRowHeightOfCallback=function(t,e){var i=t.getItem(e),o=t.displayOptions.rowHeightCallback;if(o){var n=o.call(this,t.handler,i.type,e),r=[],s=void 0,a=this.trs;if(null!=n){if(Array.isArray(n))for(r=n.slice(0,a),l=n.length;l<a;l++)r.push(this.minRowHeight);else{s=0;for(var l=1;l<a;l++){var u=Math.max(this.minRowHeight,l%2?Math.floor(n/a):Math.round(n/a));r.push(u),s+=u}r.push(Math.max(n-s,this.minRowHeight))}var c=r.reduce((function(t,e){return t+e}),0);return i.heights=r.slice(),c}}},i.prototype.$_getItemHeight=function(e,i){var o=e.getItem(i),n=o.height;if(!isNaN(n))return n;if(this._autoRowHeights)return this._minItemHeight;if(e.displayOptions.rowHeightCallback&&xt.included(o.type,t.ItemType.ROW,t.ItemType.TREE)){var r=this.getRowHeightOfCallback(e,i);if(r)return r;o.heights=null}else o.heights=null;return this._itemHeight},i.prototype.$_calcItemPoints=function(t){var e=this.grid;if(!("mousedown"===e._eventFrom&&this._focusIndex&&this._topIndex<this._focusIndex.itemIndex-this._fixedItemCount-Math.max(0,this._fullItemCount-1))){t=null==t||t;var i=e.itemSource,o=this.syncHeight(),n=o?1/0:this._itemsBounds;this._topIndex=o?0:this._topIndex;var r=0,s=i?Math.min(i.fixedCount,i.itemCount):0;if(this._fixedItemCount=0,this._fixedBarHeight=0,this._fixedHeight=0,this._fixedItemPoints=[],s>0){this._fixedItemPoints.push(r);for(var a=0;a<s&&r<n;a++)r+=this.$_getItemHeight(e,a),this._fixedItemPoints.push(r),this._fixedItemCount++;this._fixedHeight=r,r+=this._fixedBarHeight=e.fixedOptions.rowBarHeight}var l=e.itemCount-this._fixedItemCount;if(this._itemPoints=[r],this._itemCount=0,this._fullItemCount=0,l>0&&r<n){var u=this._topIndex,c=-1;if(this._focusIndex&&(c=this._focusIndex.itemIndex)>=this._fixedItemCount&&c<u+this._fixedItemCount){var h=c-this._fixedItemCount;null==(p=e.topIndexChanging(u,c-this._fixedItemCount-u,!0,!1))||isNaN(p)||(h=this._topIndex+p),u=this._topIndex=h}for(a=u;a<l&&r<n;a++)r+=this.$_getItemHeight(e,a+this._fixedItemCount),this._itemCount++,this._itemPoints.push(r);if(this._fullItemCount=this._itemCount-(r>n?1:0),t&&c>=this._topIndex+this._fixedItemCount+this._fullItemCount){r=this.fixedItemCount>0?this._fixedHeight+e.fixedOptions.rowBarHeight:0;var p,d=c-this._fixedItemCount-Math.max(0,this._fullItemCount-1)-this._topIndex;for(null==(p=e.topIndexChanging(this._topIndex,d,t,!1))||isNaN(p)||(d=p),this._topIndex+=d,this._itemPoints=[r],this._itemCount=0,this._fullItemCount=0,a=this._topIndex;a<e.itemCount-this._fixedItemCount&&r<n;a++)r+=this.$_getItemHeight(e,a+this._fixedItemCount),this._itemCount++,this._itemPoints.push(r);this._fullItemCount=this._itemCount-(r>=n?1:0)}}else this._topIndex=0}},i.prototype.$_updateScrollInfo=function(e,i,o){var n=this._reqScrollBarWidth,r=this._reqScrollBarHeight,s=o?this._tableItemPoints:this._itemPoints,a=s[s.length-1],l=this._layoutsLength,u=i.fitStyle==t.GridFitStyle.EVEN_FILL,c=this.syncHeight();this._hscrolled=l>this._scrollWidth,this._vscrolled=!c&&(this._topIndex>0||e.itemCount>this._itemCount+this._fixedItemCount||a>this._bodyBounds.height);var h=r>0&&this._hscrolled&&!u,p=n>0&&this._vscrolled;h!=p&&(h?n>0&&!c&&(p=a>this._bodyBounds.height-r):r>0&&!u&&(h=l>this._scrollWidth-n)),this._hscrollBar=h,this._vscrollBar=p,this._hscrolled=this._hscrolled||h,this._vscrolled=this._vscrolled||p,this._scrollBarWidth=p?n:0,this._scrollBarHeight=h?r:0,this._scrollWidth-=this._scrollBarWidth},i.prototype.$_recalcScrollInfo=function(t){this._scrollWidth+=this._scrollBarWidth,this._bodyBounds.height+=this._scrollBarHeight,this._gridBounds.height+=this._scrollBarHeight,this._clientRect.height+=this._scrollBarHeight,this.$_updateScrollInfo(t,t.displayOptions,!0),this._bodyBounds.height-=this._scrollBarHeight,this._gridBounds.height-=this._scrollBarHeight,this._clientRect.height-=this._scrollBarHeight},i.prototype.$_adjustVerticals=function(){var t=this._scrollBarHeight,e=this._itemPoints;if(t>0){this._leftContentBounds.height-=t,this._footBounds.y-=t,this._rowBarBounds.height-=t,this._sideContentBounds.height-=t,this._fixedContentBounds.height-=t,this._fixedFooterBounds.y-=t,this._fixedBodyBounds.height-=t,this._nonFixedBounds.height-=t,this._contentBounds.height-=t,this._footerBounds.y-=t,this._bodyBounds.height-=t,this._rightContentBounds.height-=t,this._rightFooterBounds.y-=t,this._rightBodyBounds.height-=t;for(var i=this.syncHeight()?1/0:this._bodyBounds.height;e[e.length-2]>i;)this._itemCount--,e.pop();this._fullItemCount=Math.max(0,this._itemCount-(e[this._itemCount]>=i?1:0));var o=this._focusIndex?this._focusIndex.itemIndex:-1;if(o>=0&&this._itemCount>this._fullItemCount&&o>=this._topIndex+this._fixedItemCount+this._fullItemCount){for(var n=this.grid,r=e[this._itemCount],s=0;r>i;)r-=e[++s];var a=n._prevTop+1!==this._topIndex;if(s>0&&"mousedown"!==n._eventFrom){var l=n.topIndexChanging(this._topIndex,s,!!this._focusIndex,!0);null==l||isNaN(l)||(s=l),e.splice(0,s),this._topIndex+=s,this._itemCount-=s,this._fullItemCount-=s,r=e[0];for(var u=0;u<e.length;u++)e[u]-=r;if(r=e[e.length-1],n.itemCount<this._topIndex+this._fixedItemCount+this._itemCount)this._itemCount--;else for(;r<i&&this._topIndex+this._fixedItemCount+this._itemCount<n.itemCount;)e.push(r+=this.$_getItemHeight(n,this._topIndex+this._fixedItemCount+this._itemCount)),this._itemCount++,this._fullItemCount++;a&&(this._topIndex,this._fixedItemCount,this._fullItemCount)}}}if(this._dataBounds.height=e[e.length-1],this._fullItemCount==this._itemCount){var c=e[e.length-1];this._rowBarBounds.height=c}},i.prototype.$_adjustHorizontals=function(t){this._rightContentBounds.x-=this._scrollBarWidth,this.$_calcLeftPos();var e=this._cellPoints,i=e.length,o=this._leftPos,n=o+this._nonFixedBounds.width;this._startCell=this._endCell=this._firstCell;for(var r=0;r<i;r++)if(e[r]>o){this._startCell+=r-1;break}for(r=i-2;r>=0;r--)if(e[r]<n){this._endCell+=r;break}},i.prototype.$_calcTableRowPoints=function(){var t,e,i=this._trs,o=this._items,n=this._fixedItemCount,r=this._itemCount+n,s=this._fixedTableRowPoints=[],a=this._tableRowPoints=[],l=this._dataRowHeights,u=0;if(this._fixedTableRowCount=this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,n>0){for(var c=this._fixedItemPoints;u<n;u++){var h=c[u];if(t=o[u],s.push(h),this._fixedTableRowCount++,t.isData){e=t.heights||l;for(var p=Math.floor((c[u+1]-h)/i),d=Math.round(c[u+1]-h)/i,f=1;f<i;f++)s.push(h+=e[f-1]?e[f-1]:f%2?p:d),this._fixedTableRowCount++}}s.push(this._fixedDataHeight=this._fixedItemPoints[n])}if(this.itemCount>0){for(c=this._itemPoints;u<r;u++)if(h=c[u-n],p=c[u-n+1]-h,t=o[u],a.push(h),this._tableRowCount++,t.isData){e=t.heights||l;var g=Math.floor(p/i);for(d=Math.round(p/i),f=1;f<i;f++)a.push(h+=e[f-1]?e[f-1]:f%2?g:d),this._tableRowCount++}a.push(this._dataHeight=c[this._itemCount]),this._dataHeight+=this._fixedDataHeight}},i.prototype._doMeasure=function(t,e,i){var o=this._grid,n=o.displayOptions,r=o.fixedOptions,s=t.clone();this._refreshMode=n.refreshMode,this._autoRowHeights=n.rowHeight<0,this._items=[],this._trs=this._cellLayouts.dataRows,this._rowGrouped=this.rowGrouped||this.mergedRowGrouped,this._hscrolled=this._vscrolled=!1,this._hscrollBar=this._vscrollBar=!1,this._reqScrollBarWidth=e,this._reqScrollBarHeight=i,this._minRowHeight=n.minTableRowHeight,this._maxHeight=n.maxRowHeight,this._minItemHeight=Math.max(this._minRowHeight*this._trs,n.minRowHeight),1==this._trs&&(this._minRowHeight=this.minItemHeight),o.heightMeasurer.measure(o),this.$_calcFixedCellPoints(r,this._cellLayouts),this.$_calcCellPoints(this._cellLayouts),this.$_calcRightCellPoints(r,this._cellLayouts),this._itemHeight=this._calcDefaultRowHeight(o);var a=o.container._containerDiv;!this.syncHeight()&&this._oldSyncHeight&&this._oldSyncHeight!==o.displayOptions.syncGridHeight&&a.style.height!==o.container._orgCssHeight&&(a.style.height=o.container._orgCssHeight),function(){this._topContentBounds=s.clone(),this.$_measureTopPane(o),s.topBy(this.topPanelVisible?this._topContentBounds.height:0),this._leftContentBounds=s.clone(),this.$_measureLeftPane(o),s.leftBy(this._leftContentBounds.width),this._sideContentBounds=s.clone(),this._measureSidePane(o),s.leftBy(this._sideContentBounds.width),this.$_measureViewHeights(o,s.clone().move()),this._fixedContentBounds=s.clone(),this.$_measureFixedPane(o),s.leftBy(this._fixedContentBounds.width),this._rightContentBounds=s.clone(),this.$_measureRightPane(o),this._rightContentBounds.x=s.right-this._rightContentBounds.width,s.width-=this._rightContentBounds.width,this._contentBounds=s.clone(),this.$_measureContentPane(o),this._clientRect=t.clone(),this._nonFixedBounds=new q(this._fixedContentBounds.right,this._fixedContentBounds.y,t.width-this._fixedContentBounds.right-this.rightContentBounds.width,this._fixedContentBounds.height)}.call(this),this._itemsBounds=t.height-this._topContentBounds.height-this._headerBounds.height-this._filterPanelBounds.height-this._summaryBounds.height-this._footBounds.height+1,this.$_calcItemPoints(),this.$_calcScrollWidth(t),this.$_updateScrollInfo(o,n);var l=this._fitStyle;(this._fitStyle=this.$_checkFitting(n,this._scrollWidth))?(this.$_fitColumns(n,this.cellLayouts,this.scrollWidth),this._contentBounds.width=this._layoutsLength):o._activeCellLayout.$_clearFitWidths(),(this._fitStyleChanged=this._fitStyle!=l)&&o.clearRowHeights(!1),this.$_adjustVerticals(),this.$_adjustHorizontals(t),this._gridBounds=new q(this._fixedContentBounds.x,this._fixedContentBounds.y,t.right-this._fixedContentBounds.x-this._scrollBarWidth,this._footerBounds.y-0),this._clientRect.width-=this._scrollBarWidth,this._clientRect.height-=this._scrollBarHeight,this._nonFixedBounds.width-=this._scrollBarWidth,this._topContentBounds.width-=this._scrollBarWidth},i.prototype.$_layoutTopPane=function(t,e){var i=this._topContentBounds;this.topPanelVisible?e.setRect(i):e.setBounds(-10,-10,1,1),this._doLayoutTopPane(t,e)},i.prototype._doLayoutTopPane=function(t,e){},i.prototype.$_layoutLeftPane=function(t,e){var i=this._leftContentBounds;function o(t,e,i,o){(t.visible=e.visible)&&(t._table.parentElement!==t._dom&&t._dom.appendChild(t._table),i&&(t.setRect(o),t.layoutContent(this)))}(e.visible=!i.isEmpty)?(e.setRect(i),o.call(this,t.headView,t.header,!1,this._headBounds),o.call(this,t.sumView,t.headerSummaries,!0,this._sumBounds),o.call(this,t.footView,t.footers,!0,this._footBounds),o.call(this,t.filterView,t.filterPanel,!0,this._filterBounds),t.rowBarContainer.visible=t.rowIndicator.visible||t.stateBar.visible||t.checkBar.visible):[t.headView,t.sumView,t.footView].forEach((function(t){t&&xt.detach(t._table)}))},i.prototype._layoutSidePane=function(t,e){var i=this._sideContentBounds;e.setRect(i),(e.visible=!i.isEmpty)&&e.layoutContent(this,i.width,i.height)},i.prototype._prepareItems=function(t){for(var e=this._topIndex+this._fixedItemCount,i=0;i<this._fixedItemCount;i++){var o=this._rs.getItem(i);this._items.push(o)}var n=this.grid.bodyView,r=t?n._getTableRowCount(this):this._itemCount;for(i=0;i<r;i++){if(!(o=this._rs.getItem(i+e)))break;this._items.push(o)}t&&(this._itemCount=this._items.length-this._fixedItemCount)},i.prototype.$_layoutFixedPane=function(t,e){var i,o=this._fixedContentBounds;if(e.visible=!o.isEmpty){var n=t._columnsDirty||t._cellLayoutDirty||t._needPosition,r=n||t._dataChanged||t._itemCheckChanged;e.setRect(o),((i=t.fixedHeaderView).visible=t.header.visible)&&(i.setRect(this._fixedHeaderBounds),i.layoutContent(this)),((i=t.fixedHeaderSummaryView).visible=t.headerSummaries.canShow)&&(r||t.headerSummaries.dirty)&&(i.setRect(this._fixedSummaryBounds),i.layoutContent(this)),((i=t.fixedFilterView).visible=t.filterPanel.visible)&&(n||t.filterPanel.dirty)&&(i.setRect(this._fixedFilterBounds),i.layoutContent(this)),((i=t.fixedFooterView).visible=t.footers.canShow)&&(r||t.footers.dirty)&&(i.setRect(this._fixedFooterBounds),i.layoutContent(this)),(i=t.fixedBodyView).visible=!0,e.layoutContent(this,o.width,o.height)}else t.fixedHeaderView.visible=!1,t.fixedHeaderSummaryView.visible=!1,t.fixedFilterView.visible=!1,t.fixedFooterView.visible=!1,t.fixedBodyView.visible=!1},i.prototype.$_layoutRightPane=function(t,e){var i,o=this._rightContentBounds,n=t._columnsDirty||t._cellLayoutDirty||t._needPosition,r=n||t._dataChanged||t._itemCheckChanged;(e.visible=!o.isEmpty)?(this._rightFixed||this._hscrolled||(o.x=this._contentBounds.right),e.setRect(o),((i=t.rightHeaderView).visible=t.header.visible)&&(i.setRect(this._rightHeaderBounds),i.layoutContent(this)),((i=t.rightHeaderSummaryView).visible=t.headerSummaries.canShow)&&(r||t.headerSummaries.dirty)&&(i.setRect(this._rightSummaryBounds),i.layoutContent(this)),((i=t.rightFilterView).visible=t.filterPanel.visible)&&(n||t.filterPanel.dirty)&&(i.setRect(this._rightFilterBounds),i.layoutContent(this)),((i=t.rightFooterView).visible=t.footers.canShow)&&(r||t.footers.dirty)&&(i.setRect(this._rightFooterBounds),i.layoutContent(this)),(i=t.rightBodyView).visible=!0,e.layoutContent(this,o.width,o.height)):(t.rightHeaderView.visible=!1,t.rightHeaderSummaryView.visible=!1,t.rightFilterView.visible=!1,t.rightFooterView.visible=!1,t.rightBodyView.visible=!1)},i.prototype.$_layoutContentPane=function(t,e){var i,o=this._contentBounds,n=t._columnsDirty||t._cellLayoutDirty||t._needPosition,r=n||t._dataChanged||t._itemCheckChanged;(e.visible=!o.isEmpty)?(o.x-=this._leftPos,e.setRect(o),((i=t.headerView).visible=t.header.visible)&&(this._headerBounds.width=o.width,i.setRect(this._headerBounds),i.layoutContent(this)),((i=t.filterPanelView).visible=t.filterPanel.visible)&&(n||t.filterPanel.dirty)&&(this._filterPanelBounds.width=o.width,i.setRect(this._filterPanelBounds),i.layoutContent(this)),((i=t.headerSummaryView).visible=t.headerSummaries.canShow)&&(r||t.headerSummaries.dirty)&&(this._summaryBounds.width=o.width,i.setRect(this._summaryBounds),i.layoutContent(this)),((i=t.footerView).visible=t.footers.canShow)&&(r||t.footers.dirty)&&(this._footerBounds.width=o.width,i.setRect(this._footerBounds),i.layoutContent(this)),(i=t.bodyView).visible=!0,this._bodyBounds.width=o.width,e.layoutContent(this,o.width,o.height)):t.headerView.visible=t.headerSummaryView.visible=t.footerView.visible=t.bodyView.visible=!1},i.prototype.$_layoutWatingPane=function(t,e){var i=t.bounds.clone();e.setRect(i),e.layoutContent(this,i.width,i.height)},i.prototype._doLayout=function(t,e){var i;this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),i=t._topContentPane,this.$_layoutTopPane(t,i),i=t._leftContentPane,this.$_layoutLeftPane(t,i),i=t._fixedContentPane,this.$_layoutFixedPane(t,i),i=t._rightContentPane,this.$_layoutRightPane(t,i),i=t._contentPane,this.$_layoutContentPane(t,i)},i.prototype.$_adjustHeader=function(t,e,i,o){var n=t.fixedHeaderView,r=t.rightHeaderView,s=t.headerView,a=t.header.height,l=s.height,u=0,c=!1;if(i&&(c=n.$_checkHeight()),!c&&o&&(c=r.$_checkHeight()),!c&&e&&(c=s.$_checkHeight()),c){var h=[],p=0;i&&(n.$_getHeights(h),a>0?n.$_distributeHeights(a,h):p=Math.max(p,n.$_adjustHeights(h))),o&&(r.$_getHeights(h),a>0?r.$_distributeHeights(a,h):p=Math.max(p,r.$_adjustHeights(h))),e&&(s.$_getHeights(h),a>0?s.$_distributeHeights(a,h):p=Math.max(p,s.$_adjustHeights(h))),a<0&&(u+=p-l,this._headBounds.height=p,i&&this._fixedHeaderBounds.height!=p&&(this._fixedHeaderBounds.height=p,n.setRect(this._fixedHeaderBounds),n.$_adjustHeights(h)),o&&this._rightHeaderBounds.height!=p&&(this._rightHeaderBounds.height=p,r.setRect(this._rightHeaderBounds),r.$_adjustHeights(h)),e&&this._headerBounds.height!=p&&(this._headerBounds.height=p,s.setRect(this._headerBounds),s.$_adjustHeights(h)))}return u},i.prototype._adjustLayout=function(e,i){var o,n=this._autoRowHeights,r=e._fixedContentPane,s=e._rightContentPane,a=e._contentPane,l=e.fixedHeaderView,u=e.rightHeaderView,c=e.headerView,h=e.headView.visible,p=r.visible,d=s.visible,f=a.visible,g=0,y=0,_=this.$_adjustHeader(e,f,p&&c.visible&&l.visible,d&&u.visible);if(0!=_&&(y=this._fixedFilterBounds.y=this._rightFilterBounds.y=this._filterPanelBounds.y=this._filterBounds.y+=_,p&&(e.fixedFilterView.y=y),d&&(e.rightFilterView.y=y),f&&(e.filterPanelView.y=y),h&&(e.filterView.y=y)),0!=_&&(this._fixedSummaryBounds.y=this._rightSummaryBounds.y=this.summaryBounds.y=this._sumBounds.y=this._filterBounds.bottom),e.headerSummaries.canShow&&0!=_&&(p&&(e.fixedHeaderSummaryView.y=this._fixedSummaryBounds.y),d&&(e.rightHeaderSummaryView.y=this._rightSummaryBounds.y),f&&(e.headerSummaryView.y=this._summaryBounds.y),h&&(e.sumView.y=this._sumBounds.y)),i.topBy(this._headBounds.height+this._sumBounds.height+this._filterBounds.height),0!=_&&(y=this._sumBounds.bottom,g=Math.min(i.height,this._rowBarBounds.height),this._fixedBodyBounds.y=this.bodyBounds.y=this._rightBodyBounds.y=y,this._fixedBodyBounds.height=this._bodyBounds.height=this._rightBodyBounds.height=g),(o=e.fixedBodyView).visible&&o.setRect(this._fixedBodyBounds),(o=e.bodyView).visible&&o.setRect(this._bodyBounds),(o=e.rightBodyView).visible&&o.setRect(this._rightBodyBounds),this.$_layoutBodyRows(e,p,f,d,this._bodyBounds.height),this.$_adjustTableRowHeights(),n&&this.$_recalcScrollInfo(e),this.syncHeight()){var m=this.topContentBounds.height+this.headerBounds.height+this.footerBounds.height+this.summaryBounds.height+this.scrollBarHeight+this._filterBounds.height,v=e.container._containerDom,b=e.container._containerDiv,C=v.offsetWidth-v.clientWidth,w=b.offsetHeight,S=this._tableItemPoints[this._tableItemPoints.length-1];(this._fitSyncHeight=this.itemCount>0&&(m+S+C>=w||e.displayOptions.syncGridHeight===t.SyncGridHeight.ALWAYS))?b.style.height=m+S+C+"px":(e.recallHeight(),S=w-m-C+(this.topPanelVisible?0:1));var E=new q(0,0,v.clientWidth,v.clientHeight);e.setRect(E),this._topContentBounds.width=E.width,this.$_layoutTopPane(e,this.grid._topContentPane),this._bodyBounds.height=this._fixedBodyBounds.height=this._rightBodyBounds.height=S,e.bodyView.setRect(this._bodyBounds),e.fixedBodyView.setRect(this._fixedBodyBounds),e.rightBodyView.setRect(this._rightBodyBounds),this._contentBounds.height=this._fixedContentBounds.height=this._rightContentBounds.height=this._headerBounds.height+this._summaryBounds.height+this._bodyBounds.height+this._footerBounds.height+this._filterBounds.height,this._contentBounds.x=this._leftContentBounds.width+this._sideContentBounds.width+this._fixedContentBounds.width,this.$_layoutContentPane(e,e._contentPane),this.$_layoutFixedPane(e,e._fixedContentPane),this.$_layoutRightPane(e,e._rightContentPane),this._gridBounds.height=this._headerBounds.height+this._summaryBounds.height+this._bodyBounds.height+this._filterBounds.height,this._footBounds.y=this._footerBounds.y=this._fixedFooterBounds.y=this._rightFooterBounds.y=this._bodyBounds.bottom,e.footView.y=e.footerView.y=e.fixedFooterView.y=e.rightFooterView.y=this._bodyBounds.bottom,i=this._gridBounds.clone()}else this._fitSyncHeight=!1;if(this._topIndex>0){var x=n?this._minItemHeight:this._itemHeight;if(this._contentBounds.y+this._dataBounds.bottom+x<=this._gridBounds.bottom&&(n?this.$_fillBottomAuto(e,p,f,d,this._bodyBounds.height):this.$_fillBottomFixed(e,p,f,d,this._bodyBounds.height)),0==this._topIndex){var O=this._vscrollBar;this.$_recalcScrollInfo(e),this._vscrollBar!=O&&this._fitStyle&&(this.$_layoutBodyRows(e,p,f,d,this._bodyBounds.height,!1),this.$_adjustTableRowHeights())}}e.fixedBodyView.visible&&e.fixedBodyView.$_resetCellHeights2(this,n),e.bodyView.visible&&e.bodyView.$_resetCellHeights2(this,n),e.rightBodyView.visible&&e.rightBodyView.$_resetCellHeights2(this,n);var R=this._tableItemPoints;this._dataBounds.height=R[R.length-1],y=this._sumBounds.bottom,g=Math.min(i.height,this._dataBounds.height),this._rowBarBounds.y=y,this._rowBarBounds.height=g,p&&e._fixedContentPane.layoutBars(this,this._fixedContentBounds.width,this._fixedContentBounds.height),d&&e._rightContentPane.layoutBars(this,this._rightContentBounds.width,this._rightContentBounds.height),(o=e.headView).visible&&(o.setRect(this._headBounds),o.layoutContent(this)),(o=e.rowBarContainer).visible&&(o.setRect(this._rowBarBounds),o.layoutContent(this))},i.prototype.$_layoutBodyRows=function(t,e,i,o,n,r){function s(t,e,i,o){d._items.push(t),m.forEach((function(n,r){n&&n.layoutRow(e,v[r],i,o,t)}))}function a(e,i,o,n){var r=e.height,s=[];if(!t.displayOptions.refCalcHeights||isNaN(r)){for(var a=0;a<x;a++)s[a]=0;m.forEach((function(t){for(var e=t&&t._tbody.children,i=0;e&&i<x;i++)s[i]=Math.round(Math.max(s[i],E,e[o+i].offsetHeight))})),e.heights=s}else if(e.heights)s=e.heights;else{var l=0,u=0;for(a=0;a<x;a++)l+=u=a%2?Math.floor(r/x):Math.round(r/x),s.push(u);s.push(C-l)}r=0;var c=s.reduce((function(t,e){return t+e}),0)+3;if(c>O){var h=O/c;c=O;for(var p=0;p<s.length-1;p++)c-=s[p]=Math.max(E,Math.floor(s[p]*h));s[s.length-1]=Math.max(E,c)}for(p=0;p<x;p++)r+=s[p],n.push(i+=s[p]);return f.setRowHeight(e,r,!1),r}void 0===r&&(r=!0);var l,u=e&&this._fixedCellCount>0?t.fixedBodyView:null,c=i&&this.cellCount>0?t.bodyView:null,h=(o&&this._rightCellCount)>0?t.rightBodyView:null,p=this._dataRowHeights,d=this;if(r&&this.$_checkColumnMerging(t,this.syncHeight()),l=c||u||h){var f=t.itemSource,g=f?Math.min(f.fixedCount,f.itemCount):0,y=this._autoRowHeights,_={lm:this,grid:t,topIndex:this._topIndex,fixedItemCount:g,mergeFixed:t.fixedOptions.mergeRows,mergedRowGrouped:this.mergedRowGrouped,rowGroupFields:this.rowGroupFields},m=[u,c,h],v=[[],[],[]];m.forEach((function(t){t&&t._doPrepareContent(d)})),n=this.syncHeight()?1/0:n;var b,C,w,S,E=this._minRowHeight,x=l._trs,O=this._maxHeight>0?Math.min(Math.max(this._maxHeight,E*x),n):n,R=Math.floor(m.reduce((function(t,e){return e?Math.max(e.tableRowCount,t):t}),0)/x),I=0,T=0,P=0,D=[],k=[],A=[];this._fixedTableRowCount=0,this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,this._items=[];var L=Math.min(g,this._fixedItemCount,Math.ceil(n/E));if(this._fixedHeight=0,g>0){D.push(T),k.push(P);for(var M=I,F=0;F<L;F++)s(f.getItem(F),_,F,M),M+=x;for(F=0;F<g&&T<n;F++){S=f.getItem(F);var N=x;if(this._items.indexOf(S)<0&&s(S,_,F,I),y)P+=C=a(S,P,I,k);else{b=P,C=this._fixedItemPoints[F+1]-this._fixedItemPoints[F],w=Math.floor(C/N);for(var V=Math.round(C/N),B=S.heights||p,G=0;G<N-1;G++)k.push(P+=B[G]?B[G]:G%2?V:w);k.push(P=b+C)}this._fixedTableRowCount+=N,T+=C,D.push(T),this._fixedDataHeight=T,I+=N}this._fixedHeight=T,T<n&&(C=0,m.forEach((function(t){t&&(C=t.layoutFixedBar(d,I))})),I++,T+=C,P+=C),R=R-this._fixedItemCount-1}this._fixedItemCount=D.length?D.length-1:0;var j=t.itemCount-this._fixedItemCount,H=[T];if(A.push(T),L=Math.min(j,R,Math.ceil((n-T)/E)),this._itemCount=0,this._fullItemCount=0,j>0&&T<n){var $=this._topIndex,W=-1;for(this._focusIndex&&(W=this._focusIndex.itemIndex)>=this._fixedItemCount&&W<$+this._fixedItemCount&&($=this._topIndex=W-this._fixedItemCount),M=I,F=0;F<L&&F+$<j&&(S=f.getItem(F+$+g));F++)s(S,_,this._fixedItemCount+F,M),M+=S.isData?x:1;for(F=$;F<j&&T<n;F++){if(N=(S=f.getItem(F+g)).isData?x:1,this._items.indexOf(S)<0&&s(S,_,this._fixedItemCount+F-$,I),S.isData)if(y)P+=C=a(S,P,I,A);else{for(b=P,C=this._itemPoints[F-$+1]-this._itemPoints[F-$],w=Math.floor(C/N),V=Math.round(C/N),B=S.heights||p,G=0;G<N-1;G++)A.push(P+=B[G]?B[G]:G%2?V:w);A.push(P=b+C)}else C=this._itemPoints[F-$+1]-this._itemPoints[F-$],A.push(P+=C);this._tableRowCount+=N,T+=C,H.push(T),this._itemCount++,this._dataHeight=T,I+=N}this._fullItemCount=this._itemCount-(T>n?1:0)}y&&m.forEach((function(t){t&&t.$_resetHeights(k,A)})),xt.ieOld&&m.forEach((function(t){t&&t.$_resetCellStyleHeights(k,A)})),this._fixedItemPoints=D,this._itemPoints=H,this._fixedTableRowPoints=k,this._tableRowPoints=A,this._dataBounds.height=H[H.length-1];var U=this._items.length=this.fixedItemCount+this._itemCount;m.forEach((function(t){t&&t.cleanRows(U,I)}))}},i.prototype.$_adjustTableRowHeights=function(){if(this.fixedItemCount+this._itemCount!=0){for(var t=this._items,e=this._trs,i=this._fixedTableRowPoints,o=this._fixedTableItemPoints=[0],n=0,r=1,s=this._fixedItemCount;r<=s;r++,n++)o.push(i[r*e]);i=this._tableRowPoints,o=this._tableItemPoints=[i[0]],r=0;var a=0;for(s=this._itemCount;r<s;r++,n++)t[n].isData?o.push(i[a+=e]):o.push(i[++a])}else this._tableItemPoints=this._tableRowPoints.slice()},i.prototype.$_fillBottomFixed=function(t,e,i,o,n){for(var r=this._dataBounds.height,s=this._topIndex,a=0;(r+=this.$_getItemHeight(this.grid,s--))<this._bodyBounds.height&&s>=0;)a++;this._topIndex=Math.max(0,this._topIndex-a),this.$_calcItemPoints(),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,n),this.$_adjustTableRowHeights()},i.prototype.$_fillBottomAuto=function(t,e,i,o,n){for(;this._topIndex>0&&this._gridBounds.bottom-this._contentBounds.y-this._dataBounds.bottom>this._minItemHeight;){var r=this._tableItemPoints,s=r[1]-r[0];if(this._topIndex--,this.$_calcItemPoints(!1),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,n),this.$_adjustTableRowHeights(),s+(r=this._tableItemPoints)[r.length-1]+this._contentBounds.y+this._dataBounds.y>this._gridBounds.bottom){this._topIndex++,this.$_calcItemPoints(),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,n),this.$_adjustTableRowHeights();break}}},i.prototype.$_prepareColumnMerges=function(t,e,i,o){for(var n=this._fixedItemCount,r=this._itemCount,s=!1,a=0,l=t.length;a<l;a++){var u=t[a],c=u&&u.layout;c&&c.canMerge()?((h=c.merges)||((h=new Tr(c)).clear(),h.initialize(br.INIT_COUNT)),h.refreshRooms(e,i,o),h.prepareCells(n,r),h.refreshCells(n,this.topIndex),c.$_setMerged(!0),s=!0):c.$_setMerged(!1)}var h,p=this.grid.checkBar;return p.canMerge()?((h=p.merges)||((h=new zs(p)).clear(),h.initialize(br.INIT_COUNT)),h.refreshRooms(e,i,o),h.prepareCells(n,r),h.refreshCells(n,this.topIndex),p._merged=!0):p._merged=!1,s},i.prototype.$_checkColumnMerging=function(t,e){void 0===e&&(e=!1);var i=t.fixedOptions,o=i.rowCount,n=this._contentBounds.height/this._minItemHeight-o,r=this._topIndex,s=o>0&&i.mergeRows,a=e?o:o+r,l=e?t.itemCount-1:Math.min(t.itemCount-1,o+r+n-1);l>=0&&this.$_prepareColumnMerges(t.getHorzColumns(),a,l,s)},i}(kt),wl=function(t){function e(e){var i=t.call(this,e)||this;return i.summaryIndex=0,i.rowIndex=-1,i.rendererClass="",i.style=new Dr,i.html=void 0,i.text=e[xt.TextProp],i}return n(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.layout=null},e.prototype.span=function(){this.spanned=!0,this.clear(!1)},e.prototype.clear=function(e){t.prototype.clear.call(this,e);var i=this.cell.firstElementChild;return this.className&&(this.cell.className=this.className=""),this.rendererClass&&(i.className=this.rendererClass=""),this.text&&(i[xt.TextProp]=this.text=""),this.html&&(i.innerHTML=this.html=""),this},e.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(e=t.textFormat)&&(this.textFormatter&&this.textFormatter.format==e||(this.textFormatter=vr.getFormatter(e))),(e=t.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==e||(this.numberFormatter=We.getFormatter(e))),(e=t.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==e||(this.datetimeWriter=Be.getFormatter(e))),(e=t.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==e||(this.booleanFormatter=Ge.getFormatter(e))),this.prefix=t.prefix,this.suffix=t.suffix},e.prototype.setText=function(t){t!==this.text&&(this.cell.firstElementChild[xt.TextProp]=(this.text=t)||"")},e.prototype.setHtml=function(t){t!==this.html&&(this.cell.firstElementChild.innerHTML=(this.html=t)||"")},e.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},e.prototype.setRendererClassName=function(t){t!=this.rendererClass&&(this.cell.firstElementChild.className=this.rendererClass=t)},e}(pl),Sl=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n._rowPoints=[],n._cells=[],n}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}return null},e.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},e.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},e.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},e.prototype._doDrawCell=function(t,e,i){},e.prototype._doRender=function(t){},e.prototype._getStartCell=function(t){return t.getStartCell()},e.prototype._getEndCell=function(t){return t.getEndCell()},e.prototype._prepareCellContent=function(t,e){return wt(t).createElement("div")},e.prototype._doMeasure=function(t,e,i){for(var o=t.layoutManager,n=this._getSummaryRows(o),r=this._getCollection(),s=this._getSummaryHeight(t.heightMeasurer),a=0,l=this._rowPoints=[a],u=0,c=t.layoutManager.getDataRowHeights(n),h=c.reduce((function(t,e){return t+e}),0),p=0,d=r.visibleCount;p<d;p++){var f=r.getVisible(p),g=Math.max(h,f.height);g<=0&&(g=s*n),g=Math.max(f.minHeight,g);var y=f.heights;if(y&&y.length>0){for(var _=0;_<n;_++)y[_]=isNaN(y[_])||null==y?s:y[_];g=y.reduce((function(t,e){return t+e}),0)}for(var m=Math.floor(g/n),v=0,b=0;b<n-1;b++)y&&y.length>0?(a+=y[b],l.push(a),v+=y[b]):c[b]?(a+=Math.round(c[b]*(g/h)),l.push(a),v+=Math.round(c[b]*(g/h))):(a+=m,l.push(a),v+=m);a+=g-v,l.push(a),u+=g}return Ha.create(e,u)},e.prototype._doPrepareTableExtents=function(t){},e.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],o=e.children[0],n=0;o&&n<i.length;n++){var r=i[n].layout.source,s=o.children[n];s&&r&&(s[xt.TextProp]=(r.header.getDisplayText()||r.firstColumn.header.displayText)+" summary")}},e.prototype._doLayoutContent=function(t){var e=t.grid,i=this._getCollection(),o=this._getSummaryCount(t),n=t.cellLayouts._dataCells,r=n.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s;this._refreshCells(t,o,n,this._tbody),this.$_refreshSpans(t,r*o),this.$_refreshHeadTitle(t,this._thead);for(var u=0;u<o;u++)for(var c=i.getVisible(u),h=0;h<r;h++){var p=this._cells[u*r+h],d=this._getTableRow(t,u*r+h);xt.setClassName(d,c.styleName||"");for(var f=a;f<=l;f++){var g=p[f];if(g.visible){var y=g.layout;if(y.isProxy)g.setText(""),g.setClassName(c.getCellStyleName());else if(y instanceof Zr)g.setText(""),g.setClassName(c.getCellStyleName());else{var _=c.getCell(y);this._updateCell(e,c,_,g)}}}}},e.prototype._updateCell=function(t,e,i,o){var n=i,r=n.getSummary(),s=e.getCellStyle(i,o.style.clear());if(o.setClassName(s.styleName),o.setRendererClassName(this._getRendererStyle()),o.refreshFormatters(s),r){e.getCellFormatters(r,o);var a=n.getTemplate(o);void 0===a?o.setText(n.getDisplayText(o)):o.setHtml(a)}else o.setText("")},e.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},e.prototype._refreshCells=function(t,e,i,o){for(var n=this._cells,r=o.children,s=r.length,a=i.length,l=this._getFirstCell(t),u=this._getLastCell(t)-l+1,c=n.length;c<s;c++)n.push([]);c=0;for(var h=0;c<e&&h<s;c++)for(var p=0;p<a;p++){for(var d=n[h],f=r[h].children,g=i[p],y=0;y<u;y++){var _=g[y+l],m=d[y];m?m.cell!==f[y]||m.layout!=_&&(m.layout=_,m.clear(!0)):(m=d[y]=new wl(f[y])).layout=_,m.spanned=!1,m.summaryIndex=c,m.rowIndex=h}for(h++,y=u;y<d.length;y++)d[y].dispose();d.length=u}for(h=s;h<n.length;h++){var v=n[h];for(y=0;y<v.length;y++)v[y].dispose(),v[y]=null}n.length=s},e.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,n=this._getLastCell(t)-i,r=t.cellLayouts._dataCells.length,s=this._rowPoints,a=0;a<e;a++)for(var l=this._cells[a],u=l.length,c=o;c<=n;c++){var h=l[c],p=h.layout,d=p.parent,f=d&&d.vertical;if(h.spanned);else if(p.isProxy)h.clear(!1);else{var g=0,y=0,_=this._getSpanOf(p,h.summaryIndex)-1,m=this._getUserSpanOf(p,h.summaryIndex);if(m){var v=m.footerCount||0,b=v>0?v*e:m.rowspan||1,C=m.colspan||1;h.set(C,b,!0);for(var w=0;w<b;w++)for(var S=0;S<C;S++){var E=this._cells[w+a]&&this._cells[w+a][S+c];E&&E!==h&&E.span()}}if(!m&&_>0){var x=0,O=p.vindex+1;if(f)for(;x++<_&&x<r;){if(!(R=d.getVisible(O++)))break;y+=R._dspan,this._cells[a+x][c].span()}else for(;x++<_&&c-o+x<u&&O<d.visibleCount;){var R;if(!(R=d.getVisible(O++)))break;g+=R._cspan,l[c+x].span()}}p.isNull&&h.clear(!0),!m&&h.set(p._cspan+g,p._dspan+y,!0),h.rowSpan>1&&(h.height=s[h.rowIndex+h.rowSpan]-s[h.rowIndex],h.cell.firstElementChild.style.maxHeight=h.height-2+"px")}}},e.prototype._doPrepareTableRow=function(e,i,o,n){t.prototype._doPrepareTableRow.call(this,e,i,o,n)},e}(Ka),El=function(t){function e(e,i){return t.call(this,e,i,"footerView")||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-footer"},e.prototype._getRendererStyle=function(){return"rg-footer-renderer"},e.prototype._getSummaryRows=function(t){return t.dataRows},e.prototype._getCollection=function(){return this.model},e.prototype._getSummaryHeight=function(t){return t.footerHeight},e.prototype._getSummaryCount=function(t){return t.footerCount},e.prototype._getSpanOf=function(t,e){return t.getFooterSpan(e)},e.prototype._getUserSpanOf=function(t,e){return t.getFooterUserSpan(e)},e.prototype._getTableRowCount=function(t){return t.dataRows*t.footerCount},e.prototype._getSummaryItem=function(t,e){return t.firstColumn.footers.get(e)},e}(Sl),xl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-footer"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e}(El),Ol=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-footer"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(El),Rl=function(t,e){return"object"==typeof t&&Object.prototype.toString.call(t).indexOf(e)>=0},Il=function(t){function e(e,i){var o=t.call(this)||this;return o._active=!1,o._completed=!1,o._dragging=!1,o._currentX=0,o._currentY=0,o._container=e,o._name=i,o}return n(e,t),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragging",{get:function(){return this._dragging},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){return this._completed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linkable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollable",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.activate=function(){this._active||(this._doActivate(),this._active=!0)},e.prototype.deactivate=function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},e.prototype.start=function(t,e,i,o){return void 0===o&&(o=null),this.cancel(),!(!this._active||!this._doStart(t,e,i,o))&&(this._currentX=this._startX=e,this._currentY=this._startY=i,this._dragging=!0,this._completed=!1,this._showFeedback(e,i),!0)},e.prototype.drag=function(t,e,i,o){return!(!this._dragging||(this._currentX=e,this._currentY=i,!this._doDrag(t,e,i,o)))&&(this._moveFeedback(e,i),!0)},e.prototype.cancel=function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled(this._currentX,this._currentY)}finally{this._doEnded()}}finally{this._hideFeedback()}},e.prototype.drop=function(t,e,i,o){try{if(this._dragging)try{this._currentX=e,this._currentY=i,this._dragging=!1,this._canAccept(t,e,i,o)?(this._doCompleted(t,e,i,o),this._completed=!0):this._doCanceled(e,i)}finally{this._doEnded()}}finally{this._hideFeedback()}},e.prototype.getRequest=function(){return null},e.prototype.getNextRequest=function(t,e){return null},e.prototype.init=function(t,e,i){this._doInit(t,e,i)},Object.defineProperty(e.prototype,"currentX",{get:function(){return this._currentX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentY",{get:function(){return this._currentY},enumerable:!1,configurable:!0}),e.prototype._showFeedback=function(t,e){},e.prototype._moveFeedback=function(t,e){},e.prototype._hideFeedback=function(){},e.prototype._doActivate=function(){},e.prototype._doDeactivate=function(){},e.prototype._doStart=function(t,e,i,o){return!0},e.prototype._doDrag=function(t,e,i,o){return!0},e.prototype._doCanceled=function(t,e){},e.prototype._canAccept=function(t,e,i,o){return!0},e.prototype._doCompleted=function(t,e,i,o){},e.prototype._doEnded=function(){},e.prototype._doInit=function(t,e,i){},e}(kt);t.DataDropMode=void 0,(il=t.DataDropMode||(t.DataDropMode={})).COPY="copy",il.MOVE="move",t.DragFeedbackStyle=void 0,(ol=t.DragFeedbackStyle||(t.DragFeedbackStyle={})).LINE="line",ol.ROW="row",ol.CELL="cell",ol.GROUP="group";var Tl,Pl="${rows}",Dl="${mode}",kl=function(e){function i(i){var o=e.call(this,i)||this;return o._dropMode=t.DataDropMode.COPY,o._proxyLabel=Pl+" "+Dl,o._feedbackStyle=t.DragFeedbackStyle.LINE,o._scroll=!0,o._cursor="move",o._dropOtherElement=!1,o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"dragCallback",{get:function(){return this._dragCallback},set:function(t){this._dragCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropMode",{get:function(){return this._dropMode},set:function(t){this._dropMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"feedbackStyle",{get:function(){return this._feedbackStyle},set:function(t){this._feedbackStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldMap",{get:function(){return this._fieldMap},set:function(t){this._fieldMap=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldMapCallback",{get:function(){return this._fieldMapCallback},set:function(t){this._fieldMapCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"proxyLabel",{get:function(){return this._proxyLabel},set:function(t){this._proxyLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelCallback",{get:function(){return this._labelCallback},set:function(t){this._labelCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scroll",{get:function(){return this._scroll},set:function(t){this._scroll=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cursor",{get:function(){return this._cursor},set:function(t){this._cursor=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropOtherElement",{get:function(){return this._dropOtherElement},set:function(t){this._dropOtherElement=t},enumerable:!1,configurable:!0}),i.prototype.getEnabled=function(t,e,i,o,n,r){if(!this.dropOtherElement&&r)return!1;var s=this._dragCallback;if(s)return!1!==s(t.handler,e,r||this.grid.handler,i.index,i.column);if(this.grid===t&&!r){var a=t.layoutManager;return(n-=a.contentBounds.y)<=a.footerBounds.y&&n>=a.summaryBounds.bottom}return!0},i.prototype.getLabel=function(e,i,o,n){var r=this._labelCallback,s=void 0;return r&&(s=r(e.handler,i,n||this.grid.handler,o.index,o.column)),void 0===s&&this._proxyLabel&&(s=(s=(s=(s=this._proxyLabel.replace(Pl,i.length+"")).replace(Dl,e==this.grid||this.dropMode==t.DataDropMode.MOVE?"":"")).replace("${from}",i[0]+"")).replace("${to}",o.index+"")),s},i}(Ba),Al=function(t){function e(e,i){var o=t.call(this,e.container,i)||this;return o._grid=e,o}return n(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(Il),Ll=function(t){function e(e,i){var o=t.call(this,e.layout.grid,"columnResizeTracker")||this;o._request=e,o._feedback=i;var n=e.layout;return o._layoutX=e.x+e.offset-n.domWidth,o._offset=e.offset,o}return n(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var n=this.grid.layoutManager,r=n.contentBounds.y,s=n.contentBounds.bottom;return this._feedback.resize(2,s-r),this._feedback.move(e-this._offset,r),this.grid.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i,o){this._request.layout;var n=this.grid.displayOptions.minCellWidth;return(e-=this._offset)>=this._layoutX+n&&e<this._layoutX+1e6&&(this._feedback.x=e,!0)},e.prototype._doEnded=function(){var t=this.grid.displayOptions.minCellWidth,e=Math.max(t,this._feedback.x-this._layoutX);this.grid.removeFeedbackElement(this._feedback),this._request.layout.changeCellWidth(e,this.grid.layoutManager.isColumnFitted),this.grid.container.setCursor("default")},e}(Al),Ml=function(t){function e(e,i,o){var n=t.call(this,e.layout.grid,"columnMoveTracker")||this;return n._timer=null,n._colLoop=0,n._colPrevLoop=0,n._interval=0,n._request=e,n._layout=e.layout,n._cellFeedback=i,n._feedback=o,n}return n(e,t),e.prototype._doDispose=function(){this._request=this._layout=this._cellFeedback=this._feedback=this._target=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,i,o,n){var r=this.grid,s=r.layoutManager,a=this._layout.parent,l=this._request.offset,u=s.getHeaderCellRect(this._layout,!0);a.horizontal?(this._offset=l>0?l:i-u.x,this._feedback.setBounds(u.x,u.y,e.WING_SIZE,u.height)):(this._offset=l>0?l:o-u.y,this._feedback.setBounds(u.x,u.y,u.width,e.WING_SIZE)),this._request.offset=this._offset,this._feedback.visible=!1,this._cellFeedback.setBounds(u.x,u.y,u.width,u.height),this._cellFeedback.model=r.header.getCell(this._layout),this._cellFeedback.dragging=!1,r.addFeedbackElement(this._cellFeedback),r.addFeedbackElement(this._feedback);var c=this._feedback._dom.style;return c.borderLeft=c.borderRight=c.borderTop=c.borderBottom="",!0},e.prototype._doDrag=function(t,e,i,o){var n=this.grid,r=this._layout.parent,s=this.grid.layoutManager;if(i<s.contentBounds.y&&n.canGrouping())return!1;if(e<s.gridBounds.x||e>s.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var a=s.getHeaderCellAt(e,i),l=this.$_findTarget(a);xt.log("MOVE: ",this._layout.displayText+" => "+(null==l?void 0:l.displayText)),l&&!n.canMoveToLayout(l)&&(l=null),this.$_setTarget(l),this._cellFeedback.dragging=!0,r.horizontal?this._cellFeedback.x=e-this._offset:this._cellFeedback.y=i-this._offset}return!0},e.prototype._doCanceled=function(){this.$_stopTimer()},e.prototype._doCompleted=function(){this.$_stopTimer(),this._target&&(this._layout.vindex=this._target.vindex)},e.prototype._doEnded=function(){this.$_stopTimer(),this.grid.removeFeedbackElement(this._feedback),this.grid.removeFeedbackElement(this._cellFeedback)},e.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,this._cellFeedback,t,e)},e.prototype.$_startTimer=function(){this._timer||(this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),60))},e.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},e.prototype.$_timerHandler=function(){var t=this._grid,e=this.currentX,i=t.layoutManager,o=0;e>i.clientRect.right?(o=Math.max(0,Math.min(3,(e-i.clientRect.right)/40)),this._interval=4-o,this._colLoop++):e<i.gridBounds.x&&(o=Math.max(0,Math.min(3,(i.gridBounds.x-e)/40)),this._interval=4-o,this._colLoop++),o>0&&(this._interval=4-o),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>i.clientRect.right?t.leftCell+=1:e<i.gridBounds.left&&t.leftPos>0&&(t.leftCell-=1)),this.$_setTarget(null)},e.prototype.$_findTarget=function(t){if(t)for(var e=this._layout.parent;t;){if(t.parent===e)return t;t=t.parent}},e.prototype.$_setTarget=function(t){var e=this._request.layout,i=e.parent,o=this._feedback,n=o._dom.style,r=this.grid.layoutManager;if(this.currentX,this.currentY,this._target=t,o.visible=null!=t&&t.parent===i&&t!==e){var s=r.getHeaderCellRect(t,!0);if(i.horizontal){var a=e.hcol;n.height=s.height+"px",t.hcol<a?(n.borderRight="none",n.borderLeft="",o.x=s.x):t.hcol>a&&(n.borderLeft="none",n.borderRight="",o.x=s.right-o.width)}else{var l=e.row;n.width=s.width+"px",t.row<l?(n.borderBottom="none",n.borderTop="",o.y=s.y):t.row>l&&(n.borderTop="none",n.borderBottom="",o.y=s.bottom-o.height)}}},e.WING_SIZE=7,e}(Al),Fl=function(t){function e(e,i){var o=t.call(this,e.grid,"rowResizeTracker")||this;return o._request=e,o._feedback=i,o}return n(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var n=this.grid.layoutManager,r=n.leftContentBounds.x,s=n.rightContentBounds.right;return this._feedback.resize(s-r,2),this._feedback.move(r,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i,o){return i-this._request.offset-this._request.rowTop>=this.grid.displayOptions.minRowHeight&&(this._feedback.y=i-this._request.offset,!0)},e.prototype._doCompleted=function(t,e,i,o){var n=this.grid,r=n.displayOptions,s=Math.max(r.minRowHeight,i-this._request.offset-this._request.rowTop);(s=0===r.maxRowHeight?s:Math.min(r.maxRowHeight,s))>=n.layoutManager.bodyBounds.height&&(s=n.layoutManager.bodyBounds.height-1),this._request.variable?n.setRowHeight(this._request.itemIndex,s):r.rowHeight=s},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(Al),Nl=function(t){function e(e,i){var o=t.call(this,e.grid,"rowResizeTracker")||this;return o._request=e,o._feedback=i,o}return n(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var n=this.grid.layoutManager,r=n.leftContentBounds.x,s=n.rightContentBounds.right;return this._feedback.resize(s-r,2),this._feedback.move(r,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i,o){return i-this._request.offset-this._request.top>=this.grid.header.minHeight&&(this._feedback.y=i-this._request.offset,!0)},e.prototype._doCompleted=function(t,e,i,o){var n=this.grid.header,r=Math.max(n.minHeight,i-this._request.offset-this._request.top);n.height=r},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(Al),Vl=function(e){function i(t,i,o){var n=e.call(this,t.grid,"rowMoveTracker")||this;return n._timer=null,n._request=t,n._proxy=i,n._line=o,n}return n(i,e),i.updateLineFeedback=function(e,i,o,n,r,s,a,l,u){var c={index:-1,position:0,column:void 0};if(s<0||a<0||s>=e.width||a>=e.height)return r.visible=!1,c;var h=r.feedbackStyle=e.dataDropOptions.feedbackStyle,p=e.layoutManager;a-=p.contentBounds.y;var d=0,f=p.contentBounds.right,g=-1,y=-1,_=0,m=2,v=e.cellToIndex(u),b=!1,C=xt.included(h,t.DragFeedbackStyle.CELL,t.DragFeedbackStyle.GROUP);if(a<p.summaryBounds.bottom)y=Math.max(0,p.topIndex-1),g=p.getTableItemTop(0);else if(a>=p.footerBounds.y)y=p.topIndex+p.fullItemCount,g=p.getTableItemBottom(p.fullItemCount);else{var w=a-p.summaryBounds.bottom,S=p.getTableItemIndex(w),E=p.getTableItemHeight(S);if((y=S)>=p.fixedItemCount&&(y+=p.topIndex),y!=i||C){var x=p.getTableItemTop(S);if(h===t.DragFeedbackStyle.ROW){g=x,m=E;var O=Math.floor(E/3);w<x+O?_=-1:w>x+2*O&&(_=1)}else if(h===t.DragFeedbackStyle.GROUP){if(v&&e.isValid(v)){var R=p.getDataRect(v.layout.root),I=v.layout.root.first;m=E,g=x,f=(d=R.x)+R.width,c.column=I.getDataColumn().name,b=I!==o}}else if(h===t.DragFeedbackStyle.CELL){if(v&&e.isValid(v)){var T=p.getBodyView(v);g=(R=T.getCellRectAt(p,v,!0)).y,m=(R=T.boundsByContainer(R)).height,f=(d=R.x)+R.width,b=v.layout!==o,c.column=v.layout.getDataColumn().name}}else w<x+E/2?(g=x,y>i&&(y=Math.max(p.topIndex,y-1)),_=-1):((g=S>-1?p.getTableItemBottom(S):l?0:-1)>=0&&y<i&&y++,_=1)}}return g+=p.contentBounds.y+p.summaryBounds.bottom,r.visible=y>i?y>i+n-1:y>=0&&(y!=i||b),r.visible?(r.resize(f-d,m),0==e.itemCount&&(g+=p.defaultItemHeight),r.move(d,g)):y=-1,e.dataDropOptions.scroll&&(a<p.summaryBounds.bottom?e.topIndex--:a>=p.footerBounds.y&&e.topIndex++),c.index=y,c.position=_,c},i.prototype._doDispose=function(){this._request=null,this._proxy=null,this._line=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"request",{get:function(){return this._request},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sourceItems",{get:function(){return this._sourceItems},enumerable:!1,configurable:!0}),i.prototype.setEnabled=function(t){this._proxy.setEnabled(t)&&this._proxy.draw()},i.prototype.setLabel=function(t){this._proxy.setLabel(t)&&this._proxy.draw()},Object.defineProperty(i.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"linkable",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(e,i,o,n){var r,s,a=this.grid,l=wt(e),u=a.selections.count;if(this._sourceItems=[],0===u||(r=a.selections.getItem(0),(s=r&&r.style)==t.SelectionStyle.COLUMNS||s==t.SelectionStyle.SINGLE_COLUMN))if(a.displayOptions.selectionStyle===t.SelectionStyle.NONE)a.selections.selectBlock(a.focusedIndex,!0);else switch(a.dataDropOptions.feedbackStyle){case t.DragFeedbackStyle.LINE:case t.DragFeedbackStyle.ROW:a.selections.selectRow(this._request.itemIndex,!0);break;case t.DragFeedbackStyle.CELL:case t.DragFeedbackStyle.GROUP:a.selections.selectBlock(a.focusedIndex,!0)}if(a.selections.count>=1){this._sourceItems=a.selections.getItem(0).getItemIndices(),l.body.appendChild(this._proxy._dom),a.addFeedbackElement(this._line);var c=this.$_updateLine(i,o,e);return this._proxy.setZIndex(a.displayOptions.baseZindex+6),this.$_updateProxy(i,o,c,e),!0}return!1},i.prototype._doDrag=function(t,e,i,o){var n=this.grid.layoutManager;t=this.$_getTarget(o,t);var r=this.$_updateLine(e,i,t);return this.$_updateProxy(e,i,r,t),(i-=n.contentBounds.y)>n.footerBounds.y||i<n.summaryBounds.bottom?this.$_startTimer():this.$_stopTimer(),!0},i.prototype._doCompleted=function(e,i,o,n){var r=this._targetRow,s=this.grid;e=this.$_getTarget(n,e);var a,l=s.container.findContainer(null,e);if(l?r.index>=0&&(a=s.canMoveRow(!0,!1)&&s.dataDropOptions.getEnabled(s,this._sourceItems,r,i,o)):a=s.canMoveRow(!1,!0)&&s.dataDropOptions.getEnabled(s,this._sourceItems,r,i,o,e),a){var u=this._request.itemIndex,c=s.dataDropOptions.callback;if(c)l?c(s.handler,this._sourceItems,s.handler,r.index,r.column):c(s.handler,this._sourceItems,e,null,null);else if(l===s.container){var h=r.index>u?r.index-(u+this._sourceItems.length-1):r.index-u,p=s.dataDropOptions.feedbackStyle;xt.included(p,t.DragFeedbackStyle.CELL,t.DragFeedbackStyle.GROUP)||s.moveSelection(h,"mouseup")}}},i.prototype._doCanceled=function(t,e){},i.prototype._doEnded=function(){var t=this.grid;this.$_stopTimer(),t.removeFeedbackElement(this._line),t.doc.body.removeChild(this._proxy._dom)},i.prototype.$_getTarget=function(t,e){var i;if(xt.isMobile()){var o=wt(t.target);i=o&&o.elementFromPoint(t.clientX,t.clientY)}return i||e},i.prototype.$_updateLine=function(t,e,o){return this._targetRow=i.updateLineFeedback(this.grid,this._request.itemIndex,this._request.layout,this._sourceItems.length,this._line,t,e,!1,o)},i.prototype.$_updateProxy=function(t,e,i,o){var n=this.grid,r=n.container.findContainer(null,o),s=r!==n.container,a=xt.getOffset(n.container._containerDom);a.y+=e,a.x+=t+20;var l=!0;if(!s)for(var u=n.selections.getItem(0).getItems(),c=u[0].level,h=1,p=u.length;h<p;h++)if(u[h].level!==c){l=!1;break}if(l=r?l&&n.canMoveRow(!0,s)&&(s||n.dataDropOptions.getEnabled(n,this._sourceItems,i,t,e)):l&&n.canMoveRow(!1,!0)&&n.dataDropOptions.getEnabled(n,this._sourceItems,i,t,e,o),this._proxy.move(a.x,a.y),this._proxy.setEnabled(void 0!==l?l:i.index>=0),!s||!r){var d=n.dataDropOptions.getLabel(n,this._sourceItems,i,!r&&o);this._proxy.setLabel(d)}return this._proxy.draw(),l},i.prototype.$_startTimer=function(){this._timer||(this._timer=setInterval(this.$_timerHandler.bind(this),100))},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},i.prototype.$_timerHandler=function(){var t=this.currentX,e=this.currentY;this.$_updateLine(t,e,null)},i}(Al),Bl=function(t){function e(e,i,o,n){var r=t.call(this,e.index.grid,i)||this;return r._request=e,r._currX=o,r._currY=n,r}return n(e,t),e.prototype._doDispose=function(){this._request.dispose(),this._request=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollable",{get:function(){var t=this._getItem().getBounds();return t.top===t.bottom},enumerable:!1,configurable:!0}),e.prototype.getRequest=function(){return this._request},e.prototype._doCanceled=function(){},e.prototype._doEnded=function(){var t=this._getItem();this.grid.selections.$_ended(t)},e.prototype.spanHome=function(t){var e=this.grid;e.getBodyViewAt(t).spanHead(e.layoutManager,t)},e.prototype.spanRight=function(t){var e=this.grid;e.getBodyViewAt(t).spanRight(e.layoutManager,t)},e}(Al),Gl=function(e){function i(t,i,o){var n=e.call(this,t,"blockSelectTracker",i,o)||this;return n._timer=null,n._rowPrevLoop=0,n._rowLoop=0,n._colPrevLoop=0,n._colLoop=0,n._interval=0,n}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},i.prototype._doStart=function(e,i,o,n){var r=this.grid,s=r.selections,a=r.layoutManager,l=n&&n.shiftKey,u=n&&(n.ctrlKey||n.metaKey),c=this._request.index;if(a.isMergedCell(c)&&!(c=r.pointToIndex(e,i,o,!0)).layout)return!1;if(l)this._item=s.count>0&&s.lastItem();else{var h=void 0;u||1===s.count&&s.lastItem()instanceof na?h=s.lastItem():s.clear(),this._item=h&&h instanceof na?h:s.add(c,c,t.SelectionStyle.BLOCK)}return!!this._item},i.prototype._doDrag=function(t,e,i,o){if(this._item){var n=this.grid;if(n.displayOptions.selectAndImmediateDrag)return!1;var r=n.layoutManager;if(this._currX=e,this._currY=i,i-r.contentBounds.y>r.footerBounds.y||i<r.gridBounds.y||e<r.gridBounds.x||e>r.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var s=n.pointToIndex(t,e,i,!0);s.column&&s.itemIndex>=0&&(hs.compareHorz(s,this._item.startIndex)>=0?(this.spanRight(s),this.spanHome(this._item.startIndex)):this.spanRight(this._item.startIndex),this._item.resizeTo(s))}return!0}},i.prototype._doEnded=function(){this.$_stopTimer(),e.prototype._doEnded.call(this)},i.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,null,t,e)},i.prototype.$_startTimer=function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},i.prototype.$_timerHandler=function(){var t=this._grid,e=this._currX,i=this._currY,o=t.layoutManager,n=0,r=0;i>o.footerBounds.y?(r=Math.max(0,Math.min(3,(i-o.footerBounds.y)/40)),this._interval=4-r,this._rowLoop++):i<o.gridBounds.y&&(r=Math.max(0,Math.min(3,(o.gridBounds.y-i)/40)),this._interval=4-r,this._rowLoop++),e>o.clientRect.right?(n=Math.max(0,Math.min(3,(e-o.clientRect.right)/40)),this._interval=4-n,this._colLoop++):e<o.gridBounds.x&&(n=Math.max(0,Math.min(3,(o.gridBounds.x-e)/40)),this._interval=4-n,this._colLoop++);var s=!1;if(Math.max(n,r)>0&&(this._interval=4-Math.max(n,r)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,i>o.footerBounds.y?t.topItem+o.fullItemCount<t.itemCount&&(t.topIndex=t.topIndex+1,s=!0):i<o.gridBounds.y&&t.topItem>o.fixedItemCount&&(t.topIndex=t.topIndex-1,s=!0)),s||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>o.clientRect.right?(t.leftPos+=e-o.clientRect.right,s=!0):e<o.gridBounds.left&&t.leftPos>0&&(t.leftPos-=o.gridBounds.left-e,s=!0)),s){var a=t.pointToIndex(null,e,i,!1);a.column&&(a.itemIndex=Math.min(Math.max(0,a.itemIndex,t.topIndex),t.itemCount-1),this._item.resizeTo(a))}},i}(Bl),jl=function(e){function i(t,i,o){var n=e.call(this,t,"rowsSelectTracker",i,o)||this;return n._timer=null,n._prevLoop=0,n._loop=0,n._colPrevLoop=0,n._colLoop=0,n._interval=0,n}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},i.prototype._doStart=function(e,i,o,n){var r=this.grid,s=r.selections,a=r.layoutManager,l=n&&n.shiftKey,u=n&&(n.ctrlKey||n.metaKey),c=this._request.index;if(a.isMergedCell(c)&&(c=r.pointToIndex(e,i,o,!0)),l)this._item=s.count>0&&s.lastItem();else{var h=void 0;u||1===s.count&&s.lastItem()instanceof ra?h=s.lastItem():s.clear(),this._item=h&&h instanceof ra?h:s.add(c,c,t.SelectionStyle.ROWS)}return!!this._item},i.prototype._doDrag=function(t,e,i,o){if(this._item){var n=this.grid;if(n.displayOptions.selectAndImmediateDrag)return!1;var r=n.layoutManager;if(this._currX=e,this._currY=i,i>r.footerBounds.y||i<r.gridBounds.y||e<0||e>r.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var s=this.grid.pointToIndex(t,e,i,!1);s.itemIndex>=0&&this._item.resizeTo(s)}return!0}return!1},i.prototype._doEnded=function(){this.$_stopTimer(),e.prototype._doEnded.call(this)},i.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},i.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,n=this._currY,r=i.layoutManager;n>r.footerBounds.y?(t=Math.max(0,Math.min(3,(n-r.footerBounds.y)/40)),this._interval=4-t,this._loop++):n<r.gridBounds.y&&(t=Math.max(0,Math.min(3,(r.gridBounds.y-n)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=this._interval?(this._prevLoop=this._loop,n>r.footerBounds.y?i.topIndex=i.topIndex+1:n<r.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e)):(o>r.clientRect.right?(t=Math.max(0,Math.min(3,(o-r.clientRect.right)/40)),this._interval=4-t,this._colLoop++):o<0&&(t=Math.max(0,Math.min(3,(r.gridBounds.x-o)/40)),this._interval=4-t,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,o>r.clientRect.right?i.leftLayout=i.leftLayout+1:o<r.gridBounds.x&&i.leftPos>0&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex>=0&&(e.itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e))))},i}(Bl),Hl=function(e){function i(t,i,o){var n=e.call(this,t,"columnsSelectTracker",i,o)||this;return n._timer=null,n._prevLoop=0,n._loop=0,n._rowPrevLoop=0,n._rowLoop=0,n._interval=0,n}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},i.prototype._doStart=function(e,i,o,n){var r,s=this.grid,a=s.selections,l=s.layoutManager,u=n&&n.shiftKey,c=n&&(n.ctrlKey||n.metaKey),h=this._request.index;return l.isMergedCell(h)&&(h=s.pointToIndex(e,i,o,!0)),u?r=a.count>0&&a.lastItem():c||1===a.count&&a.lastItem()instanceof sa?r=a.lastItem():a.clear(),r&&r instanceof sa&&r.containsLayout(h.layout)?this._item=r:this._item=a.add(h,h,t.SelectionStyle.COLUMNS),!!this._item},i.prototype._doDrag=function(t,e,i,o){if(this._item){var n=this.grid.layoutManager;if(this._currX=e,this._currY=i,e<n.gridBounds.x||e>n.clientRect.right||i>n.footerBounds.y||i<0)this.$_startTimer();else{this.$_stopTimer();var r=this.grid.pointToIndex(t,e,i,!0);null!=r.column&&this._item.resizeTo(r)}return!0}return!1},i.prototype._doEnded=function(){this.$_stopTimer(),e.prototype._doEnded.call(this)},i.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},i.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,n=this._currY,r=i.layoutManager;o>r.clientRect.right?(t=Math.max(0,Math.min(3,(o-r.clientRect.right)/40)),this._interval=4-t,this._loop++):o<r.gridBounds.x&&(t=Math.max(0,Math.min(3,(r.gridBounds.x-o)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=2*this._interval?(this._prevLoop=this._loop,o>r.clientRect.right?i.leftLayout=i.leftLayout+1:o<r.gridBounds.x&&i.leftPos>0&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)):(n>r.footerBounds.y?(t=Math.max(0,Math.min(3,(n-r.footerBounds.y)/40)),this._interval=4-t,this._rowLoop++):n<0&&(t=Math.max(0,Math.min(3,(r.gridBounds.y-n)/40)),this._interval=4-t,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,n>r.footerBounds.y?i.topIndex=i.topIndex+1:n<r.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)))},i}(Bl),$l=function(t){function e(e,i){var o=t.call(this)||this;return o._clickX=0,o._clickY=0,o._mouseX=0,o._mouseY=0,o._longTimerHander=function(){o._longPressed=!0},o._owner=e,o._name=i,o._previous=null,o}return n(e,t),e.prototype._doDispose=function(){this._dragTracker=null,this._previous=null,this._owner=null,this._mouseEventTarget=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previous",{get:function(){return this._previous},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragTracker",{get:function(){return this._dragTracker},set:function(t){t!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=t,this._dragTracker&&this._dragTracker.activate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragging",{get:function(){return this._dragTracker&&this._dragTracker.dragging},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseX",{get:function(){return this._mouseX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){return this._mouseY},enumerable:!1,configurable:!0}),e.prototype.findElementAt=function(t,e,i){return this._owner.findElementAt(t,e,i)},e.prototype.activate=function(t){this._doActivated(t)},e.prototype.deactivate=function(){this._doDeactivated()},e.prototype.keyDown=function(t){return this._doKeyDown(t)},e.prototype.keyUp=function(t){return this._doKeyUp(t)},e.prototype.keyPress=function(t){return this._doKeyPress(t)},e.prototype.pointerDown=function(t){var e=this._mouseX=this._clickX=t.mouseX,i=this._mouseY=this._clickY=t.mouseY;this._longPressed=!1,this._touchEvents=[{x:e,y:i,t:t.timeStamp}],this.dragging&&this._stopDragTracker(e,i,!1,t),this._doPointerDown(t)},e.prototype.mouseDown=function(t){var e=this._mouseX=this._clickX=t.mouseX,i=this._mouseY=this._clickY=t.mouseY;this._doMouseDown(t),this.dragging&&this._stopDragTracker(e,i,!1,t)},e.prototype.pointerCancel=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY;this.dragging?this._stopDragTracker(e,i,!0,t):(this._dragTracker instanceof Bl&&this._dragTracker._doEnded(),this._dragTracker=null),this._touchEvents=[],this._doPointerCancel(t)},e.prototype.dragFrom=function(t,e){},e.prototype.dropFrom=function(t,e){},e.prototype.cancelFrom=function(t){},e.prototype.pointerMove=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY,o=this.dragTracker,n=t.buttons;if(o){if(o.dragging){if(1===n){if(!o.drag(this._mouseEventTarget,e,i,t)){var r=o.getNextRequest(e,i);r&&(this._stopDragTracker(e,i,!0,t),this.dragTracker=this._getDragTracker(r,e,i),this._startDragTracker(e,i,t))}}else this._stopDragTracker(e,i,!0,t);return}if(Math.abs(e-this._clickX)>=3||Math.abs(i-this._clickY)>=3){if(1===n)return void this._startDragTracker(e,i,t);this._stopDragTracker(e,i,!0,t),this._dragTracker=null}}this._doPointerMove(t)},e.prototype.pointerUp=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY;clearTimeout(this._longTimer),this._longPressed=!1,this._touchEvents&&this._touchEvents.push({x:t.mouseX,y:t.mouseY,t:t.timeStamp}),this.dragging?(xt.isMobile()&&"pointerup"===t.type&&this._checkSwipe(t),this._stopDragTracker(e,i,!1,t),this._dragTracker.clickable&&this._doPointerUp(t)):(this._dragTracker instanceof Bl&&this._dragTracker._doEnded(),this._dragTracker=null,this._doPointerUp(t)),this._touchEvents=[]},e.prototype.mouseEnter=function(t){this._doMouseEnter(t)},e.prototype.mouseLeave=function(t){this._doMouseLeave(t)},e.prototype.mouseOver=function(t){this._doMouseOver(t)},e.prototype.mouseOutside=function(){this._doMouseOutside()},e.prototype.mouseWheel=function(t){return this._doMouseWheel(t)},e.prototype.contextMenu=function(t){return this._doContextMenu(t)},e.prototype.click=function(t){this._doClick(t)},e.prototype.dblclick=function(t){this._doDblClick(t)},e.prototype.setFocus=function(t){this._doSetFocus(t)},e.prototype.focusLeave=function(t){this._doFocusLeave(t)},e.prototype.resetFocused=function(){},e.prototype.touchMove=function(t){return this._doTouchMove(t)},e.prototype._checkSwipe=function(t){},Object.defineProperty(e.prototype,"mouseEventTarget",{get:function(){return this._mouseEventTarget},enumerable:!1,configurable:!0}),e.prototype.isMouseEventTarget=function(t){return t._dom===this._mouseEventTarget},e.prototype._doActivated=function(t){},e.prototype._doDeactivated=function(){},e.prototype._doKeyDown=function(t){return!1},e.prototype._doKeyUp=function(t){return!1},e.prototype._doKeyPress=function(t){return!1},e.prototype._doPointerDown=function(t){},e.prototype._doPointerCancel=function(t){},e.prototype._doPointerMove=function(t){},e.prototype._doPointerUp=function(t){},e.prototype._doMouseDown=function(t){},e.prototype._doMouseEnter=function(t){},e.prototype._doMouseLeave=function(t){},e.prototype._doMouseOver=function(t){},e.prototype._doMouseOutside=function(){},e.prototype._doMouseWheel=function(t){return!1},e.prototype._doContextMenu=function(t){},e.prototype._doClick=function(t){},e.prototype._doDblClick=function(t){},e.prototype._doSetFocus=function(t){},e.prototype._doFocusLeave=function(t){},e.prototype._getDragTracker=function(t,e,i){return null},e.prototype._startDragTracker=function(t,e,i){void 0===i&&(i=null),this._dragTracker&&(this._dragTracker.start(this._mouseEventTarget,t,e,i)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},e.prototype._stopDragTracker=function(t,e,i,o){if(this.dragging){var n=this._dragTracker;i?n.cancel():n.drop(this._mouseEventTarget,t,e,o),this._doDragTrackerFinished(n,i)}},e.prototype._doDragTrackerStarted=function(t){},e.prototype._doDragTrackerFinished=function(t,e){},e.prototype._findTableCell=function(t){return this.owner.getTableCell(t||this.mouseEventTarget)},e.prototype._doTouchMove=function(t){return!0},e}(kt),Wl=function(t){function e(){return t.call(this)||this}return n(e,t),Object.defineProperty(e.prototype,"cursor",{get:function(){return"default"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dblClickable",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(kt);!function(t){t.LINE="line",t.PAGE="page",t.THUMB_TRACK="thumbTrack",t.THUMB_END="thumbEnd",t.SCROLL_END="scrollEnd"}(Tl||(Tl={}));var Ul,zl=function(t){function e(e,i,o){var n=t.call(this,e,o)||this;return n._scrollBar=i,n}return n(e,t),e.prototype._doDispose=function(){this._scrollBar=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"scrollBar",{get:function(){return this._scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._scrollBar.vertical},enumerable:!1,configurable:!0}),e.prototype._doDraw=function(t){this._doRender(t)},e.prototype._doRender=function(t){},e.prototype._changed=function(){this.invalidate()},e}(Ys),Kl=function(t){function e(e){return t.call(this,e,null,"scrollEdgeView")||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-scrolledge"},e}(zl),Yl=function(t){function e(e){return t.call(this,e.doc,e,"scrollTrackView")||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-scrolltrack"},e}(zl),ql=function(t){function e(e,i){var o=t.call(this,e.doc,e,"scrollButtonView")||this;return o._enabled=!0,o._far=i,o}return n(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"far",{get:function(){return this._far},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return this.scrollBar.vertical?this._far?"rg-scroll-down":"rg-scroll-up":this._far?"rg-scroll-right":"rg-scroll-left"},e}(zl),Xl=function(t){function e(e){return t.call(this,e.doc,e,"scrollThumbView")||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-scrollthumb"},e}(zl),Ql=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this,e.doc,"scrollBarView")||this;return o._lineScrollSize=1,o._pageScrollSize=1,o._minThumbSize=20,o._min=0,o._max=0,o._pos=0,o._page=0,o._maxPosition=0,o._buttonSize=20,o._needLayout=!0,o._tipView=null,o._container=e,o._vertical=i,o._track=new Yl(o),o.addChild(o._track),o._thumb=new Xl(o),o.addChild(o._thumb),o._nearButton=new ql(o,!1),o.addChild(o._nearButton),o._farButton=new ql(o,!0),o.addChild(o._farButton),o}return n(e,t),e.prototype._doDispose=function(){this._track=this._track.dispose(),this._thumb=this._thumb.dispose(),this._nearButton=this._nearButton.dispose(),this._farButton=this._farButton.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineScrollSize",{get:function(){return this._lineScrollSize},set:function(t){(t=Math.max(1,t))!=this._lineScrollSize&&(this._lineScrollSize=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageScrollSize",{get:function(){return this._pageScrollSize},set:function(t){(t=Math.max(1,t))!=this._pageScrollSize&&(this._pageScrollSize=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minThumbSize",{get:function(){return this._minThumbSize},set:function(t){(t=Math.max(8,t))!=this._minThumbSize&&(this._minThumbSize=t,this.invalidateLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._vertical},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return this._pos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxPosition",{get:function(){return this._maxPosition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonSize",{get:function(){return this._buttonSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tipView",{set:function(t){this._tipView=t},enumerable:!1,configurable:!0}),e.prototype.layoutContent=function(){this._needLayout&&(this._needLayout=!1,this._doLayoutContent())},e.prototype.setProperties=function(t,e,i){t=Math.max(0,t),e=Math.max(t,e),t==this._min&&e==this._max&&i==this._page||(this._min=t,this._max=e,this._page=i,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate(),this._needLayout=!0)},e.prototype.setPosition=function(t,e){void 0===e&&(e=!0),(t=Math.min(this._maxPosition,Math.max(this._min,t)))!=this._pos&&(this._pos=t,this.invalidate(),this._needLayout=!0,e&&this.layoutContent())},e.prototype.ptInTrack=function(t,e,i){var o=this.containerToElement(t,e);if(this._vertical){if(o.y>=this._nearButton.height&&o.x<this._farButton.y)return!i&&o.y<this._thumb.y||i&&o.y>=this._thumb.bottom}else if(t>=this._nearButton.width&&t<this._farButton.x)return!i&&o.x<this._thumb.x||i&&o.x>=this._thumb.right;return!1},e.prototype.setText=function(t){if(this._tipView&&t){this._tipView.show(),this._tipView.setText(t);var e=void 0,i=void 0;if(this._vertical){var o=this._tipView.width();e=this.x-o-5,i=this._thumb.y}else{var n=this._tipView.height();e=this._thumb.x,i=this.y-n-5}this._tipView.move(e,i)}},e.prototype._getCssSelector=function(){return this._vertical?"rg-vscrollbar":"rg-hscrollbar"},e.prototype.draw=function(){t.prototype.draw.call(this)},e.prototype._doDraw=function(t){},e.prototype._doSizeChanged=function(){this.invalidateLayout()},e.prototype.invalidateLayout=function(){this._needLayout=!0,t.prototype.invalidateLayout.call(this)},e.prototype._doLayoutContent=function(){var t=this._vertical,e=this._buttonSize,i=this.height,o=this.width,n=(t?i:o)-2*e,r=Math.min(n,Math.max(this._minThumbSize,Math.floor(n*this._page/(this._max-this._min+1)))),s=e+Math.min(n-r,Math.max(0,Math.floor((n-r)*this._pos/(this._maxPosition-this._min))));this._track.setBounds(0,0,o,i),t?(this._nearButton.setBounds(0,0,o,e),this._farButton.setBounds(0,i-e,o,e),r<=n&&this._thumb.setBounds(2,s,o-4,r)):(this._nearButton.setBounds(0,0,e,i),this._farButton.setBounds(o-e,0,e,i),r<=n&&this._thumb.setBounds(s,2,r,i-4))},e.prototype._doScroll=function(t,i,o){this.fireEvent(e.SCROLLED,t,i,o)},e.SCROLLED="onScrollBarScrolled",e}(Ys),Jl=function(t){function e(e){return t.call(this,e,"scrollThumbTracker")||this}return n(e,t),e.prototype._doDispose=function(){this._thumb=this._thumb&&this._thumb.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"thumb",{get:function(){return this._thumb},set:function(t){this._thumb=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype._doStart=function(t,e,i,o){var n=this._thumb.scrollBar,r=n.containerToElement(e,i);return n.vertical?this._offset=r.y-this._thumb.y:this._offset=r.x-this._thumb.x,xt.isSlotMode()&&o instanceof PointerEvent&&t.setPointerCapture(o.pointerId),!0},e.prototype._doDrag=function(t,e,i,o){return this.$_doScroll(e,i,Tl.THUMB_TRACK)},e.prototype._doCompleted=function(t,e,i,o){return xt.isSlotMode()&&o instanceof PointerEvent&&t.releasePointerCapture(o.pointerId),this.$_doScroll(e,i,Tl.THUMB_END)},e.prototype._doCanceled=function(t,e){},e.prototype._doEnded=function(){},e.prototype.$_doScroll=function(t,e,i){var o=this._thumb.scrollBar,n=o._maxPosition-o._min+1,r=o._buttonSize,s=o.containerToElement(t,e);if(o.vertical){if((a=o.height-2*r-this._thumb.height)<=0)return!1;s.y-=this._offset,s.y=(s.y-r)*n/a,o._doScroll(i,0,Math.max(Math.floor(s.y),0))}else{var a;if((a=o.width-2*r-this._thumb.width)<=0)return!1;s.x-=this._offset,s.x=(s.x-r)*n/a,o._doScroll(i,0,Math.max(Math.floor(s.x),0))}return!0},e}(Il),Zl=function(t){function e(){var e=t.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e}return n(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return void 0!==this._timer},enumerable:!1,configurable:!0}),e.prototype.start=function(t){this._button=t,this._scrollBar=t.scrollBar,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,clearInterval(this._timer),this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),20))}.bind(this),300),this._ready=!0,this.$_fireEvent()},e.prototype.move=function(t,e){var i=this._button.containerToElement(t,e);this._active=this._button.containsInClient(i.x,i.y)},e.prototype.stop=function(){this._ready=!1,this._timer&&(clearInterval(this._timer),this._timer),this._button},e.prototype.$_fireEvent=function(){var t=this._button.far?1:-1,e=Tl.LINE;this._scrollBar._doScroll(e,this._scrollBar.lineScrollSize*t,0)},e}(Ee),tu=function(t){function e(){var e=t.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e._mouseX=0,e._mouseY=0,e}return n(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),e.prototype.start=function(t,e,i,o){this._scrollBar=t,this._far=e,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),300),this._ready=!0;var n=this._scrollBar.containerToElement(i,o);this._mouseX=n.x,this._mouseY=n.y,this.$_fireEvent()},e.prototype.move=function(t,e){var i=this._scrollBar.containerToElement(t,e);this._mouseX=i.x,this._mouseY=i.y,this._active=this._scrollBar.ptInTrack(i.x,i.y,this._far)},e.prototype.stop=function(){this._ready=!1,this._timer&&clearInterval(this._timer)},e.prototype.$_fireEvent=function(){var t=null,e=0,i=this._scrollBar._thumb;if(this._scrollBar.vertical){var o=this._mouseY;this._far&&o>i.bottom?(t=Tl.PAGE,e=1):!this._far&&o<i.y&&(t=Tl.PAGE,e=-1)}else{var n=this._mouseX;this._far&&n>i.right?(e=1,t=Tl.PAGE):n<i.x&&(t=Tl.PAGE,e=-1)}0!=e&&this._scrollBar._doScroll(t,this._scrollBar.pageScrollSize*e,0)},e}(kt),eu=function(t){function e(e){var i=t.call(this,e,"scrollTool")||this;return i._buttonTimer=new Zl,i._trackTimer=new tu,i._thumbTracker=new Jl(e),i}return n(e,t),e.prototype._doDispose=function(){this._thumbTracker.cancel(),this._thumbTracker=this._thumbTracker.dispose(),this._buttonTimer.stop(),this._buttonTimer=this._buttonTimer.dispose(),this._trackTimer.stop(),this._trackTimer=this._trackTimer.dispose(),t.prototype._doDispose.call(this)},e.prototype._doPointerDown=function(t){var e=t.mouseX,i=t.mouseY;this._clickElement=null,this.dragTracker=null,this._buttonTimer.stop(),this._trackTimer.stop();var o=this.findElementAt(e,i,!1);if(o instanceof zl)if(this._clickElement=o,o instanceof ql)this._buttonTimer.start(o);else if(o instanceof Xl)this._thumbTracker.thumb=o,this.dragTracker=this._thumbTracker;else if(o instanceof Yl){var n=o.scrollBar.ptInTrack(e,i,!0);this._trackTimer.start(o.scrollBar,n,e,i)}},e.prototype._doPointerMove=function(t){var e=t.mouseX,i=t.mouseY,o=this._clickElement;1===t.buttons?o instanceof ql&&this._buttonTimer.active?this._buttonTimer.move(e,i):o instanceof Yl&&this._trackTimer.active&&this._trackTimer.move(e,i):(this._buttonTimer.active&&this._buttonTimer.stop(),this._trackTimer.active&&this._trackTimer.stop())},e.prototype._doPointerUp=function(t){this._clickElement&&this._clickElement.scrollBar._doScroll(Tl.SCROLL_END,0,-1),this._clickElement=null,this._buttonTimer.stop(),this._trackTimer.stop()},e}($l),iu=function(t){function e(e){var i=t.call(this)||this;return i._container=e,i._element=i.$_createElement(e.doc),i}return n(e,t),e.prototype._doDispose=function(){this._element=xt.detach(this._element),this._container=null,t.prototype._doDispose.call(this)},e.prototype.show=function(){this._container._container.appendChild(this._element)},e.prototype.hide=function(){xt.detach(this._element)},e.prototype.move=function(t,e){xt.move(this._element,t,e)},e.prototype.setText=function(t){this._element.innerHTML=t},e.prototype.width=function(){return this._element.offsetWidth},e.prototype.height=function(){return this._element.offsetHeight},e.prototype.getRect=function(){return this._element.getBoundingClientRect()},e.prototype.$_createElement=function(t){var e=t.createElement("div"),i=e.style;return i.position="absolute",i.padding="4px 4px",i.boxSizing="border-box",i.display="lnline-block",i.pointerEvents="none",i.userSelect="none",e.className="rg-scroll-tip-view",e},e}(kt),ou=function(t){function e(e,i,o){var n=t.call(this,e,i)||this;return n._contaner=o,n}return n(e,t),Object.defineProperty(e.prototype,"container",{get:function(){return this._contaner},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){},e.prototype._doDraw=function(t){},e}(Ys),nu=function(t){function e(i,o,n){var r=t.call(this)||this;return r._disabled=!1,r._updateRequested=!1,r._layoutNeeded=!1,r._invalidated=!1,r._currentX=0,r._currentY=0,r._defaultCursor="default",r._drawing=!1,r._eventHandlers={},r._eventNodes=[],r._containerRender=r._render.bind(r),r._scrollTool=new eu(r),r._cursor="default",r._testWidth=NaN,r._testHeight=NaN,r.prepareContainer(i,o,n),r.invalidateLayout(),r._registerEventHandlers(r._rootElement._dom,r._containerDom),r.activeTool=r._defaultTool=r._createDefaultTool(),e.$_Containers[r.$_hash]=r,r}return n(e,t),e.prototype.getMouseContainer=function(){return e.$_Containers[e.$_mouseContainer]},e.prototype.findContainer=function(t,i){for(var o in e.$_Containers){var n=e.$_Containers[o];if(n.contains(i||t.target))return n}return null},e.getActiveGrid=function(){var t=e.$_Containers[e.$_ActiveGrid];return t&&t._gridView},e.setActiveGrid=function(t){if(t!==e.$_ActiveGrid){var i=e.$_Containers[t],o=void 0;if(i=i&&i._gridView,window.RealGrid&&(o=window.RealGrid.onActiveGridChanged)){var n=e.$_Containers[e.$_ActiveGrid];o((n=n&&n._gridView)&&n.handler,i&&i.handler)}i._fireGridActivated()}e.$_ActiveGrid=t},e.getGridInstance=function(t){if("string"==typeof t&&(t=document.getElementById(t)),Rl(t,"HTMLDivElement"))for(var i in e.$_Containers){var o=e.$_Containers[i];if(o._containerDiv===t)return o.gridView}},e.clearContainer=function(t){e[t]&&delete e[t],e.$_ActiveGrid===t&&(e.$_ActiveGrid=null)},e.disposeStatic=function(){this.$_Containers=null,this.$_ActiveGrid=null},e.prototype._doDispose=function(){this._activeTool=null,this._defaultTool=this._defaultTool.dispose(),this._scrollTool=this._scrollTool.dispose(),this.$_removeListenerAll(null),xt.detach(this._containerDom),this._containerDom=null,this._container=null,this._doc=null,xt.clearElements(this._containerDiv),t.prototype._doDispose.call(this),delete e.$_Containers[this.$_hash]},Object.defineProperty(e.prototype,"doc",{get:function(){return this._doc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t!=this._disabled&&(this._disabled=t,this._doDisabledChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeTool",{get:function(){return this._activeTool},set:function(t){if((t=t||this._defaultTool)!=this._activeTool){var e=this._activeTool;e&&e.deactivate(),this._activeTool=t,t&&t.activate(e)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultTool",{get:function(){return this._defaultTool},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"measurer",{get:function(){return this._measurer},enumerable:!1,configurable:!0}),e.prototype.findElementAt=function(t,e,i){return this._rootElement.findChildAt(t-this._rootElement._x,e-this._rootElement._y,i)},e.prototype.getTableCell=function(t){return null},e.prototype.setCursor=function(t){t!=this._cursor&&(this._containerDom.style.cursor=this._cursor=t)},e.prototype.setFocus=function(){this._containerDom.focus()},e.prototype.updateNow=function(){this._layoutNeeded=!0,this.invalidate(!0),this._render(xt.getTimer())},e.prototype.toScreen=function(t){var e=this._containerDom.getBoundingClientRect();return t.x+=e.left,t.y+=e.top,t},e.prototype.pointToScreen=function(t,e){var i=this._containerDom.getBoundingClientRect();return{x:t+i.left,y:e+i.top}},e.prototype.getBound=function(){var t=this._containerDom.getBoundingClientRect();return new q(t.left,t.top,t.width,t.height)},e.prototype.getHtml=function(){return this._containerDom.outerHTML},e.prototype.addElement=function(t){return this._rootElement.addChild(t)},e.prototype.removeElement=function(t){return this._rootElement.removeChild(t)},e.prototype.resetSize=function(t){void 0===t&&(t=null),this.updateNow(),t&&setTimeout(t,0)},e.prototype.measureText=function(t,e,i){this._textMeasurer.className=t;var o=this._textMeasurer.style;return i?(o.fontSize=i.fontSize,o.fontFamily=i.fontFamily,o.fontWeight=i.fontWeight,o.fontStyle=i.fontStyle):(o.removeProperty("font-size"),o.removeProperty("font-family"),o.removeProperty("font-weight"),o.removeProperty("font-style")),this._textMeasurer.innerHTML=e,this._textMeasurer.offsetWidth},e.prototype.$_refreshCheckMeasurer=function(){if(!this._checkRect){var t=this._checkMeasurer.getBoundingClientRect(),e=St(this._doc).getComputedStyle(this._checkMeasurer);this._checkRect={width:t.width+parseInt(e.marginLeft)+parseInt(e.marginRight),height:t.height+parseInt(e.marginTop)+parseInt(e.marginBottom)}}return this._checkRect},e.prototype.measureCheckWidth=function(){return this.$_refreshCheckMeasurer().width},e.prototype.measureCheckHeight=function(){return this.$_refreshCheckMeasurer().height},e.prototype.contains=function(t){var e=t;if(e instanceof St(this.doc).HTMLElement)for(var i=e.parentElement;i;){if(i===this._containerDom)return!0;i=i.parentElement}return!1},e.prototype.getDomPosition=function(t){return this.offsetDomPosition(t,{x:0,y:0})},e.prototype.offsetDomPosition=function(t,e){var i=St(this._doc),o=this._containerDom.getBoundingClientRect(),n=t.getBoundingClientRect(),r=i.getComputedStyle(this._containerDom);return e.x=n.left-o.left-Math.round(parseFloat(r.borderLeftWidth)),e.y=n.top-o.top-Math.round(parseFloat(r.borderTopWidth)),e},e.prototype.cancelOtherContainer=function(t){for(var i in e.$_Containers){var o=e.$_Containers[i];if(o!==this){var n=o._activeTool;n&&n.cancelFrom(t)}}},e.prototype.getContainerWidth=function(){return this._containerDiv.getBoundingClientRect().width},e.prototype._doDisabledChanged=function(){},e.prototype.prepareContainer=function(t,e,i){if(!t)throw new Error("container is null!");if(Rl(t,"HTMLDivElement")?this._containerDiv=t:this._containerDiv=document.getElementById(t),!Rl(this._containerDiv,"HTMLDivElement"))throw new Error("Invalid grid container element: "+t);var o=this._doc=this._containerDiv.ownerDocument,n=St(o),r=this._containerDiv.getElementsByClassName("rg-root");if(r&&r.length>0)throw new Error("Grid is already contained ContainerDiv");n.requestAnimationFrame=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame||function(t){return n.setTimeout(t,10)};var s=this._containerDom=o.createElement("div");this._container=this._containerDom;var a=s.style;this._cursor=a.cursor,this._containerDiv.appendChild(s),s.setAttribute("tabindex","0"),a.position="relative",a.width="100%",a.height="100%",a.boxSizing="border-box",a.overflow="hidden",a["-webkit-touch-callout"]="none",a["-webkit-user-select"]="none",a["user-select"]="none",a["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",this._rootElement=this._createRootElement(o),this._measurer=o.createElement("div"),this._measurer.setAttribute("aria-hidden","true"),this._container.appendChild(this._measurer);var l=this._textMeasurer=o.createElement("span");l.setAttribute("aria-hidden","true"),l.style.position="absolute",l.style.left="-10000px",l.style.top="-10000px",l.style.display="block",this._container.appendChild(l);var u=this._checkMeasurer=o.createElement("input");u.type="checkbox",u.title="grid check measurer",u.tabIndex=-1,u.setAttribute("aria-hidden","true"),u.style.position="absolute",u.style.left="-1000px",u.style.top="-11000px",u.style.display="block",this._container.appendChild(u),this._doPrepareContainer(s,e,i)},e.prototype._doPrepareContainer=function(t,e,i){},e.prototype._createRootElement=function(t){var e=new ou(t,"root",this);return this._containerDom.appendChild(e._dom),e},e.prototype.isLayoutNeeded=function(){return this._layoutNeeded},e.prototype.invalidateLayout=function(){this._layoutNeeded||(this._layoutNeeded=!0,this.invalidate(!0))},e.prototype.invalidate=function(t){var e=St(this._doc);this._updateRequested&&this._invalidated||!t&&this._drawing||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0,this._invalidated=!0)},e.prototype.invalidateElement=function(t){var e=St(this._doc);this._drawing||this._updateRequested||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0)},e.prototype._render=function(t){if(!this.disposing){this._updateRequested=!1,this._drawing=!0;try{this._doBeforeRender(),this.$$_render(t)}finally{this._drawing=!1,this._invalidated=!1,this._requestTimer=null,this._doAfterRender()}}},e.prototype.$$_render=function(t){var e=this._containerDom,i=isNaN(this._testWidth)?e.clientWidth:this._testWidth,o=isNaN(this._testHeight)?e.clientHeight:this._testHeight;if(this._layoutChildren(new q(0,0,i,o)),this._layoutNeeded)try{this._doLayout(new q(0,0,i,o))}finally{this._layoutNeeded=!1}else this._doPrepareRender(new q(0,0,i,o));this._doRenderHtml(new q(0,0,i,o))},e.prototype._doLayout=function(t){},e.prototype._doAfterRender=function(){},e.prototype._doPrepareRender=function(t){},e.prototype._doRenderHtml=function(t){this._doDrawContainer(t),this._drawElement(this._rootElement),this._validateChildren(this._rootElement)},e.prototype._doDrawContainer=function(t){},e.prototype._drawElement=function(t){t.draw();for(var e=0,i=t.childCount;e<i;e++){var o=t.getChild(e);o.visible&&this._drawElement(o)}},e.prototype._validateChildren=function(t){for(var e=0,i=t.childCount;e<i;e++)t.getChild(e).validate()},e.prototype._setFocusAndScroll=function(t){t.setFocus?t.setFocus():t.focus&&t.focus({preventScroll:!0})},e.prototype._registerEventHandlers=function(t,e){var i=xt.isSlotMode()?e.parentElement:Ct(t);t.style.cursor=this._defaultCursor,this.$_addListener(Ct(t),"resize",this._resizeHandler.bind(this),!1),this.$_addListener(i,"pointermove",this._pointerMoveHandler.bind(this),!1),this.$_addListener(i,"pointerup",this._pointerUpHandler.bind(this),!1),this.$_addListener(i,"focus",this._focusHandlerFireFox.bind(this),!0),this.$_addListener(i,"focusin",this._focusinHandler.bind(this),!0),this.$_addListener(i,"focusout",this._focusoutHandler.bind(this),!0),this.$_addListener(Ct(t),"pointerdown",this._globalPointerDownHandler.bind(this),!1),e&&(this.$_addListener(e,"keydown",this._keyDownHandler.bind(this),!1),this.$_addListener(e,"keyup",this._keyUpHandler.bind(this),!1),this.$_addListener(e,"keypress",this._keyPressHandler.bind(this),!1)),this.$_addListener(t,"click",this._clickHandler.bind(this),!1),!xt.isMobile()&&this.$_addListener(t,"dblclick",this._dblclickHandler.bind(this),!1),this.$_addListener(t,"pointerdown",this._pointerDownHandler.bind(this),!1),this.$_addListener(t,"pointerenter",this._pointerEnterHandler.bind(this),!1),this.$_addListener(t,"pointerleave",this._pointerLeaveHandler.bind(this),!1),this.$_addListener(t,"pointerover",this._pointerOverHandler.bind(this),!1),this.$_addListener(t,"pointercancel",this._pointerCancelHandler.bind(this),!1),this.$_addListener(t,"focus",this._focusHandler.bind(this),!1),this.$_addListener(t,"contextmenu",this._contextMenuHander.bind(this),!1),this.$_addListener(t,"blur",this._blurHandler.bind(this),!1),this.$_addListener(t,"selectstart",this._selectstartHandler.bind(this),!1),this.$_addListener(t,"wheel",this._wheelHandler.bind(this),!!xt.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchmove",this._touchMoveHandler.bind(this),!1)},e.prototype.$_addListener=function(t,e,i,o){t in this._eventHandlers||(this._eventHandlers[t]={}),e in this._eventHandlers[t]||(this._eventHandlers[t][e]=[]),this._eventHandlers[t][e].push([i,o]),t.addEventListener(e,i,o),this._eventNodes.indexOf(t)<0&&this._eventNodes.push(t)},e.prototype.$_removeListener=function(t,e,i){if(t in this._eventHandlers){var o=this._eventHandlers[t];if(e in o){for(var n=o[e],r=n.length;r--;){var s=n[r];t.removeEventListener(e,s[0],s[1]),n.splice(r,1)}i&&delete o[e]}}},e.prototype.$_removeListenerAll=function(t){void 0===t&&(t=null);for(var e=t?[t]:this._eventNodes,i=0,o=e.length;i<o;i++){var n=e[i];if(n in this._eventHandlers){var r=this._eventHandlers[n];for(var s in r)for(var a=r[s],l=a.length;l--;){var u=a[l];n.removeEventListener(s,u[0],u[1])}}}},e.prototype.$_existListener=function(t,e){var i=this._eventHandlers[t];return i&&i[e]},e.prototype.addMouseEvent=function(t){this.$_addListener(this._rootElement._dom,"mousedown",this._mouseDownHandler.bind(this),{once:!0}),this.$_addListener(this._rootElement._dom,"mouseup",this._mouseUpHandler.bind(this),{once:!0})},e.prototype.removeMouseEvent=function(){this.$_removeListener(this._rootElement._dom,"mousedown",!0),this.$_removeListener(this._rootElement._dom,"mouseup",!0)},e.prototype._doResized=function(t){},e.prototype._isEnabled=function(){return this._activeTool&&!this._disabled},e.prototype._isOutChildElement=function(t){return!1},e.prototype.$_checkKeyElement=function(t){var e=Ct(t.target);return t.target===t.currentTarget&&t.target===this._containerDom||t.target instanceof e.HTMLTableCellElement&&xt.isAncestorOf(this._containerDom,t.target,t)},e.prototype._keyDownHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyDown(t)},e.prototype._keyUpHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyUp(t)},e.prototype._keyPressHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyPress(t)},e.prototype.eventToContainer=function(t){var e=this._containerDom.getBoundingClientRect();return new Ks(t.clientX-e.left,t.clientY-e.top)},e.prototype.toOffset=function(t){var e=this._containerDom.getBoundingClientRect();return t.mouseX=t.clientX-e.left,t.mouseY=t.clientY-e.top,t},e.prototype.toOffsetTouch=function(t){var e=this._containerDom.getBoundingClientRect(),i=t.touches[0]||t.changedTouches[0];return t.mouseX=i.clientX-e.left,t.mouseY=i.clientY-e.top,t},e.prototype._clickHandler=function(t){this._isEnabled()?this._activeTool.click(this.toOffset(t)):t.preventDefault()},e.prototype._dblclickHandler=function(t){this._isEnabled()?this._activeTool.dblclick(this.toOffset(t)):t.preventDefault()},e.prototype.$_setMouseTarget=function(t){for(var e=Ct(this._containerDom),i=t.target;i&&!(i instanceof e.HTMLElement);)i=i.parentElement||i.parentNode;this.activeTool._mouseEventTarget=i instanceof e.HTMLElement?i:null},e.prototype._pointerDownHandler=function(t){if(t.isPrimary)if(this._isEnabled()){e.$_mouseContainer=this.$_hash,this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY;var i=this.findElementAt(this._currentX,this._currentY,!1);i&&i.getAncestor(Ql)?(this.activeTool.setFocus(),this.activeTool!==this._scrollTool&&(this._scrollTool._previous=this.activeTool),this.activeTool=this._scrollTool):this.activeTool||(this.activeTool!==this._defaultTool&&(this._defaultTool._previous=this.activeTool),this.activeTool=this._defaultTool),this.$_setMouseTarget(t),this.activeTool.pointerDown(t)}else t.preventDefault()},e.prototype._mouseDownHandler=function(t){if(this._isEnabled()){e.$_mouseContainer=this.$_hash,this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY;var i=this.findElementAt(this._currentX,this._currentY,!1);i&&i.getAncestor(Ql)?(this.activeTool.setFocus(),this.activeTool!==this._scrollTool&&(this._scrollTool._previous=this.activeTool),this.activeTool=this._scrollTool):this.activeTool||(this.activeTool!==this._defaultTool&&(this._defaultTool._previous=this.activeTool),this.activeTool=this._defaultTool),this.$_setMouseTarget(t),this.activeTool.mouseDown(t)}else t.preventDefault()},e.prototype._mouseUpHandler=function(t){this.removeMouseEvent(),this.$_pointerUpHandler(t)},e.prototype._pointerMoveHandler=function(t){var i;if(this._containerDom.parentElement&&t.isPrimary&&(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled())){i=this._activeTool,this.$_setMouseTarget(t),i.pointerMove(t);var o=i.dragTracker;if(o&&o.linkable&&e.$_mouseContainer==this.$_hash)for(var n in e.$_Containers){var r=e.$_Containers[n];r!==this&&(i=r._activeTool)&&i.dragFrom(t,o)}}},e.prototype.$_pointerUpHandler=function(t){var i=e.$_mouseContainer==this.$_hash,o=this._activeTool;try{if(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()){var n=o.dragTracker;if(this.$_setMouseTarget(t),o.pointerUp(t),o instanceof eu&&(this.activeTool=o.previous),n&&n.linkable&&i){var r=this.findContainer(t);if(r&&r!==this){var s=r._activeTool;s&&s.dropFrom(t,n)}}}else t.preventDefault()}finally{o&&(this.setCursor("default"),o.dragTracker=null),i&&(e.$_mouseContainer=-1)}},e.prototype._pointerUpHandler=function(t){t.isPrimary&&(!this.activeTool.dragging&&this.$_existListener(this._rootElement._dom,"mouseup")||(this.removeMouseEvent(),this.$_pointerUpHandler(t)))},e.prototype._pointerEnterHandler=function(t){this._isEnabled()&&this._activeTool.mouseEnter(this.toOffset(t))},e.prototype._pointerLeaveHandler=function(t){this._isEnabled()&&this._activeTool.mouseLeave(this.toOffset(t))},e.prototype._pointerOverHandler=function(t){this._isEnabled()&&this._activeTool.mouseOver(this.toOffset(t))},e.prototype._pointerCancelHandler=function(t){this._isEnabled()&&this._activeTool.pointerCancel(this.toOffset(t))},e.prototype._contextMenuHander=function(t){this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.contextMenu(this.toOffset(t)))},e.prototype._wheelHandler=function(t){this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.mouseWheel(this.toOffset(t))&&xt.stopEvent(t))},e.prototype._focusHandler=function(t){},e.prototype._blurHandler=function(t){},e.prototype._selectstartHandler=function(t){return!1},e.prototype._focusinHandler=function(t){},e.prototype._globalPointerDownHandler=function(t){xt.isAncestorOf(this._containerDiv,t.target,t)||this._isOutChildElement(t)||(this._focused=!1,this._isEnabled()&&this._activeTool.focusLeave(t))},e.prototype._focusoutHandler=function(t){var e=t.relatedTarget;if(xt.isAncestorOf(this._containerDiv,t.target,t)&&e&&!xt.isAncestorOf(this._containerDiv,e,t)&&!this._isOutChildElement(t)){if(!e&&!t.sourceCapabilities)return;this._focused=!1,this._isEnabled()&&this._activeTool.focusLeave(t)}},e.prototype._focusHandlerFireFox=function(t){t.target===this._containerDom||xt.isAncestorOf(this._containerDom,t.target,t)?this._isEnabled()&&(this._focused=!0,this._activeTool.setFocus(t.target)):this._isOutChildElement(t)||(this._containerDom.setAttribute("tabindex","0"),this._focused=!1)},e.prototype._touchMoveHandler=function(t){if(!(t.touches.length>1))return this.toOffsetTouch(t),this._activeTool.touchMove(t)},e.$_Containers={},e.$_mouseContainer=-1,e.$_ActiveGrid=null,e}(Ee),ru=function(t){function e(e,i,o){void 0===o&&(o="gridHeadCellView");var n=t.call(this,e,o)||this;return n._text="",n._styleName="",n._textChanged=!1,n._model=i,n}return n(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),e.prototype.setStyleName=function(t,e,i){i==this._styleName&&e==this._cellDom||(this._styleName=i,this._className="",this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._clearCellCache=function(){t.prototype._clearCellCache.call(this),this._textChanged=!0},e.prototype._doPrepareValue=function(t,e){this._model.headText!=this._text&&(this._text=this._model.headText||"",this._textChanged=!0)},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[xt.TextProp]=this._text)},e}(qa),su=function(e){function i(t,i){var o=e.call(this,t,i,"chekHeadCellView")||this;return o._checked=!1,o}return n(i,e),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!1,configurable:!0}),i.prototype._clearCellCache=function(){this._check=this._image=this._span=this._label=null},i.prototype._doUpdateContent=function(e,i,o){var n,r=e.doc,s=this.model,a=s.showAll&&!s.exclusive;if(a&&!this._check){var l=this._check=r.createElement("input");l.id="$$-grid-head-check-"+this.model.$_hash,n=l.style,l.type="checkbox",l.className="rg-checkbox",l.tabIndex=-1,n.display=s.useImages?"none":"inline-block",o.appendChild(l);var u=this._image=r.createElement("span");(n=u.style).display=s.useImages?"inline-block":"none",o.appendChild(u);var c=this._label=r.createElement("label");c.setAttribute("for",this._check.id),c[xt.TextProp]="grid head check",(n=c.style).display="none",o.appendChild(c)}if(a?(this._check.style.display=s.useImages?"none":"inline-block",this._image.style.display=s.useImages?"inline-block":"none",this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked",this._check.checked=this._checked):(xt.detach(this._check),xt.detach(this._image),xt.detach(this._label),this._check=this._image=this._label=null),this._textChanged&&(this._span||(this._span=r.createElement("span"),this._span.style.display="block",o.appendChild(this._span)),this._span[xt.TextProp]=this._text),a&&this._span&&this._text){var h=s.useImages?this._image:this._check,p=this._span,d=h.parentElement,f=null!=s.itemGap?s.itemGap+"px":"5px";switch((n=p.style).margin="",s.checkLocation){case t.ColumnHeaderItemLocation.BOTTOM:d.insertBefore(p,h),n.display="block",n.marginBottom=f;break;case t.ColumnHeaderItemLocation.LEFT:d.insertBefore(h,p),n.display="inline-block",n.marginLeft=f;break;case t.ColumnHeaderItemLocation.RIGHT:d.insertBefore(p,h),n.display="inline-block",n.marginRight=f;break;case t.ColumnHeaderItemLocation.TOP:default:d.insertBefore(h,p),n.display="block",n.marginTop=f}}},i.prototype.$_updateContent=function(){var t=this.model;t.showAll&&!t.exclusive&&this._check&&(this._check.checked=this._checked,this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked")},i}(ru),au=function(t){function e(e){var i=t.call(this,e.doc,null,"gridHeadView")||this;i._cells=[];var o=e.doc;return i.addChild(i._indicatorCell=new ru(o,e.rowIndicator)),i.addChild(i._stateCell=new ru(o,e.stateBar)),i.addChild(i._checkCell=new su(o,e.checkBar)),i}return n(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"allChecked",{get:function(){return this._checkCell.checked},set:function(t){var e=this._checkCell;e.checked=t,e.$_updateContent()},enumerable:!1,configurable:!0}),e.prototype.getHeadModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this.getHeadModel(t);return e instanceof Ts?e.getCellType():void 0},e.prototype._getCssSelector=function(){return"rg-head"},e.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,o=t.sectionObjects;this._cells=[];for(var n=0,r=o;n<r.length;n++){var s=r[n];s instanceof Ls&&(((e=this._indicatorCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.rowIndicator.width):e.removeCellDom()),s instanceof Fs&&(((e=this._stateCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.stateBar.width):e.removeCellDom()),s instanceof Vs&&(((e=this._checkCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.checkBar.width):e.removeCellDom(!0))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){var e=t.grid,i=this._cells.length;this._getTableRowCount(t);for(var o=this._thead,n=o&&o.children[0],r=0;r<i;r++){var s=this._cells[r],a=s.model;if(a.dirty||s._dirty||e._columnsDirty){var l=a.getHeadCell(),u=this._getTableCell(0,r),c=u.firstElementChild,h=this.$_getCellSelector()+" "+a.getHeadStyleName();if(n){var p=n.children[r];p&&(p[xt.TextProp]=a.getCellType()+" head")}s.setStyleName(u,c,h),s.updateCell(e,l,c)}}},e.prototype._doRender=function(t){},e.prototype._doDraw=function(t){this._cells.forEach((function(t){t.validate()}))},e.prototype._getTableRowCount=function(t){return 1},e.prototype._getTableRowHeight=function(t,e){return this.height},e.prototype._getCellCount=function(t){return this._cells.length},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype._doPrepareTableRow=function(e,i,o,n){t.prototype._doPrepareTableRow.call(this,e,i,o,n);var r=e.grid.header.styleName;xt.setClassName(n,r)},e.prototype.$_getCellSelector=function(){return e.CELL_CSS},e.CELL_CSS="rg-head-cell",e}(Ka),lu=function(t){function e(e){var i=t.call(this,e,"gridFootCellView")||this;return i._text="",i._styleName="",i._textChanged=!1,i}return n(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())},enumerable:!1,configurable:!0}),e.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[xt.TextProp]=this._text)},e.prototype._doRender=function(t){},e}(qa),uu=function(t){function e(e){var i=t.call(this,e,null,"gridFootView")||this;i._cells=[],i._count=0;for(var o=0;o<3;o++)i.addChild(i._cells[o]=new lu(e));return i}return n(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},e.prototype.getFootModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this.getFootModel(t);return e instanceof Ts?e.getCellType():void 0},e.prototype._getCssSelector=function(){return"rg-foot"},e.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,o=t.sectionObjects;this._count=0;for(var n=0,r=o;n<r.length;n++){var s=r[n];s.visible&&((e=this._cells[this._count++]).model=s,s instanceof Ls?e.width=i.rowIndicator.width:s instanceof Fs?e.width=i.stateBar.width:s instanceof Vs&&(e.width=i.checkBar.width))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,o=this._thead,n=o&&o.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var r=0;r<i;r++){var s=this.getChild(r),a=s.model;if(a.dirty){var l=a.getFootCell(),u=this._getTableCell(0,r),c=u.firstElementChild,h=this.$_getCellSelector()+" "+a.getFootStyleName();if(n){var p=n.children[r];p&&(p[xt.TextProp]=a.getCellType()+" foot")}s.setStyleName(u,h),s.text=a.footText,s.updateCell(e,l,c)}}},e.prototype._doRender=function(t){},e.prototype._doDraw=function(t){this._cells.forEach((function(t){t.validate()}))},e.prototype._getTableRowCount=function(t){return 1},e.prototype._getTableRowHeight=function(t,e){return this.height},e.prototype._getCellCount=function(t){return this._count},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype.$_getCellSelector=function(){return e.CELL_CSS},e.CELL_CSS="rg-foot-cell",e}(Ka),cu=function(t){function e(e){var i=t.call(this,e)||this;return i._numberFormat=We.DEFAULT_FORMAT,i._datetimeFormat=Be.DEFAULT_FORMAT,i._datetimeWriter=Be.Default,i._numberFormatter=We.Default,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?vr.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?Be.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?We.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?Ge.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!1,configurable:!0}),e}(Ba),hu=function(t){function e(e){var i=t.call(this)||this;return i._message="",i._visible=!0,i._zIndex=void 0,i._styleName="rg-toast",e&&i.assignFrom(e),i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){t!=this._zIndex&&(this._zIndex=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName=t},enumerable:!1,configurable:!0}),e.prototype.assignFrom=function(e){"string"==typeof e?(this._message=e,this._message&&(this._visible=!0)):"boolean"==typeof e?this._visible=e:t.prototype.assignFrom.call(this,e)},e}(kt),pu=function(t){function e(e){var i=t.call(this)||this;return i._minWidth=0,i._maxWidth=0,i._dropdownCount=8,i._showing=!1,i._container=e,i._element=i.$_createElement(e.doc),i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCount",{get:function(){return this._dropdownCount},set:function(t){this._dropdownCount=t},enumerable:!1,configurable:!0}),e.prototype.show=function(t){this._showing=!0;try{this.$_show(t)}finally{this._showing=!1}},e.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},e.prototype.$_createElement=function(t){var e=t.createElement("div");e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e);var i=this._span=t.createElement("span");return this.$_disableSelection(i),e.appendChild(i),e},e.prototype.$_show=function(t){var e=t.message;if(e){var i=this._element;if(i){var o=this._span,n=this._container._gridView.displayOptions;o.innerHTML=e,i.className=t.styleName,i.style.position="absolute",i.style.overflow="hidden",i.style.zIndex=null!=t.zIndex?t.zIndex:n.toastZIndex,this._container._container.appendChild(i);var r=xt.getBoundingClientRect2(i),s=xt.getBoundingClientRect2(this._container._container),a=r.width+10,l=r.height+10,u=s.width,c=s.height;i.style.left=(u-a)/2+"px",i.style.top=(c-l)/2+"px"}}},e.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},e}(kt),du=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._container=e.container,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._active},enumerable:!1,configurable:!0}),e.prototype.show=function(t,e,i){if((!this._active||e)&&(this.close(),(t=t instanceof hu?t:t?new hu(t):null)&&t.visible))return this._toast||(this._toast=new pu(this._container)),this._toast.show(t),this._active=!0,void(i&&setTimeout(function(){try{i()}finally{this.close()}}.bind(this),0));i&&i()},e.prototype.close=function(){this._active&&(this._toast&&this._toast.hide(),this._active=!1)},e}(kt),fu=function(e){function i(i){var o=e.call(this,i)||this;return o._enabled=!0,o._style=t.SortStyle.EXCLUSIVE,o._handleVisibility=t.HandleVisibility.VISIBLE,o._commitBeforeSorting=!0,o._toast=new hu({visible:!1,message:"Sorting..."}),o._keepFocusedRow=!1,o._textCase=t.SortCase.SENSITIVE,o._showSortOrder=!1,o._pageSorting=!1,o}return n(i,e),i.prototype._doDispose=function(){this._toast=this._toast.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeSorting",{get:function(){return this._commitBeforeSorting},set:function(t){t!=this._commitBeforeSorting&&(this._commitBeforeSorting=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"keepFocusedRow",{get:function(){return this._keepFocusedRow},set:function(t){t!=this._keepFocusedRow&&(this._keepFocusedRow=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showSortOrder",{get:function(){return this._showSortOrder},set:function(t){t!=this._showSortOrder&&(this._showSortOrder=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageSorting",{get:function(){return this._pageSorting},set:function(t){t!=this._pageSorting&&(this._pageSorting=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toast",{get:function(){return this._toast},enumerable:!1,configurable:!0}),i}(Ba),gu=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof Rh)return t;t=t.parent}return null},enumerable:!1,configurable:!0}),e.prototype.measure=function(t,e,i){return this._doMeasure(t,e,i)},e.prototype.layoutContent=function(t,e,i){this._doLayoutContent(t,e,i)},e.prototype._doMeasure=function(t,e,i){return new Ha(e,i)},e.prototype._doLayoutContent=function(t,e,i){},e}(qs),yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._initDom=function(e){t.prototype._initDom.call(this,e)},e}(gu),_u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(gu),mu=function(t){function e(e){var i=t.call(this,e.doc,"fixedColumnBar")||this;return i._grid=e,i}return n(e,t),e.prototype._getCssSelector=function(){return Ga.COLUMN_BAR_STYLE},e}(qs),vu=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.layoutBars=function(t,e,i){this._layoutBars(t,e,i)},e.prototype._doLayoutContent=function(e,i,o){this._barView||(this._barView=this._createBar(e.grid),this.addChild(this._barView),this._barView2=this._createBar(e.grid),this.addChild(this._barView2)),t.prototype._doLayoutContent.call(this,e,i,o)},e.prototype._createBar=function(t){return new mu(t)},e.prototype._layoutBars=function(t,e,i){var o=t.fixedBarWidth,n=t.footBounds.height;if(this._barView.visible=o>0,this._barView2.visible=!1,this._barView.visible){var r=Math.min(i-n,t.dataBounds.bottom);this._barView.setBounds(e-o,0,o,r),n>0&&(this._barView2.visible=!0,this._barView2.setBounds(e-o,i-n,o,n))}},e}(_u),bu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-right-column-bar"},e}(qs),Cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._createBar=function(){return new bu(this.doc,"rightColumnBar")},e.prototype._layoutBars=function(t,e,i){var o=t.rightBarWidth,n=t.footBounds.height;if(this._barView.visible=o>0,this._barView2.visible=!1,this._barView.visible){var r=Math.min(i-n,t.dataBounds.bottom);this._barView.setBounds(0,0,o,r),n>0&&(this._barView2.visible=!0,this._barView2.setBounds(0,i-n,o,n))}},e}(vu);!function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,e,i)||this;return o.visible=!1,o}n(e,t),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){t!=this._message&&(this._message=t,this._dom.innerHTML=t,this.invalidate())},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-message-pane"},e.prototype._doLayoutContent=function(e,i,o){t.prototype._doLayoutContent.call(this,e,i,o)}}(gu),t.TimeSelectType=void 0,(Ul=t.TimeSelectType||(t.TimeSelectType={})).NONE="none",Ul.HOUR="hour",Ul.MINUTE="minute",Ul.SECOND="second";var wu,Su=/[---]/g,Eu=function(t){if(!t)return null;(t=String(t))&&(t=t.replace(/[^0-9]/g,""));var e=parseInt(t.substr(0,4)),i=parseInt(t.substr(4,2));if(isNaN(e)||e<=0||isNaN(i)||i<0)return null;var o=new Date(e,0,1),n=4-o.getDay()+1;return o.setDate(n),o.getFullYear()==e&&i--,n=7*i,o.setDate(o.getDate()+n),o},xu=function(t,e,i){var o,n=function(t){var i=new Date(t),o=i.getDay();o=o<e?-3-o:4-o;var n=i.getDate();return i.setDate(n+o),i},r=t.getFullYear(),s=n(new Date(r,0,1)),a=n(new Date(r,t.getMonth(),t.getDate())),l=s.getFullYear(),u=a.getFullYear();return u<r?(s=n(new Date(l,0,1)),o=Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(s.getFullYear()===u?1:0)):o=u>r?1:Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(l===u?1:0),String(u)+(null!=i?i:"")+(o<10?"0"+o:String(o))},Ou=function(t){function e(e){var i=t.call(this)||this;return i._tooltips=[],i._items=[],i._enabled=!0,i._owner=e,i}return n(e,t),e.prototype._doDispose=function(){this._owner=null,this._tooltips=null,this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"tooltips",{get:function(){return this._tooltips},set:function(t){this._tooltips=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items&&this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName||""},set:function(t){this._styleName=t},enumerable:!1,configurable:!0}),e.prototype.load=function(t){this.clear()},e.prototype.clear=function(){this._items=[],this._tooltips=[]},e.prototype.contains=function(t){return!1},e.prototype.getTooltip=function(t){return null},e}(kt),Ru=function(t){function e(e,i){var o=t.call(this,e)||this;return i&&o.load(i),o}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.load=function(e){if(t.prototype.load.call(this,e),e){var i=xt.makeArray(e.dates,!0);e.tooltips=xt.makeArray(e.tooltips,!0);for(var o=0,n=i.length;o<n;o++){var r=i[o],s=void 0;if(r instanceof Date||"number"==typeof r)(s=new Date(r)).setHours(0,0,0,0);else if("string"==typeof r){4!==r.length&&8!==r.length||!/^[0-9]*$/.test(r)||(r=4===r.length?r.replace(/(\d{2})(\d{2})/,"$1/$2"):r.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"));var a=r.split(/[.//-]/);if(2==a.length)try{s=parseInt(a[0]).toString()+"/"+parseInt(a[1]).toString()}catch(t){xt.log("  (".concat(r,")"))}else 3==a.length&&(s=Pt.getSimpleDateNull(r))}s&&(this._items.push(s),e.tooltips[o]&&this._tooltips.push(e.tooltips[o]))}null!=e.enabled&&(this.enabled=!!e.enabled),this.styleName=e.styleName}},e.prototype.getItemIndex=function(t){for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];if(o instanceof Date&&o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate())return e;if(o===t.getMonth()+1+"/"+t.getDate())return e}return-1},e.prototype.contains=function(t){return this.getItemIndex(t)>=0},e.prototype.getTooltip=function(t){var e=this.getItemIndex(t);return e>=0?this._tooltips[e]:null},e}(Ou),Iu=function(t){function e(e,i){var o=t.call(this,e)||this;return i&&o.load(i),o}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.load=function(e){t.prototype.load.call(this,e),e&&(this._items=xt.makeArray(e.days,!0),this._tooltips=xt.makeArray(e.tooltips,!0),this.enabled=!!e.enabled,this.styleName=e.styleName)},e.prototype.contains=function(t){return t instanceof Date&&this._items.indexOf(t.getDay())>=0},e.prototype.getTooltip=function(t){var e=t instanceof Date?this._items.indexOf(t.getDay()):this._items.indexOf(t);return e>=0?this._tooltips[e]:null},e}(Ou),Tu=function(t){function e(){var e=t.call(this)||this;return e._items=[],e._count=-1,e}return n(e,t),e.prototype._doDispose=function(){this._editor=null,this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){return this._editor},set:function(t){this._editor=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){return-1==this._count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),e.prototype.setNull=function(){this.clear()},e.prototype.clear=function(){for(var t=0,e=this._items.length;t<e;t++)this._items[t].clear();this._items=[],this._count=-1},e.prototype.load=function(t){if(this.clear(),t){for(var e=0,i=(t=xt.isArray(t)?t:[t]).length;e<i;e++){var o=t[e],n=void 0;switch(o.type){case"day":n=new Iu(this,o);break;case"date":n=new Ru(this,o)}n.count>0&&this._items.push(n)}this._count=this._items.length}else this._count=-1},e.prototype.contains=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].contains(t))return this._items[e];return null},e}(kt);!function(t){t.DAY="day",t.MONTH="month",t.YEAR="year"}(wu||(wu={}));var Pu=function(e){function i(o,n){var r=e.call(this)||this;return r._minWidth=0,r._maxWidth=0,r._dropDownPosition=t.DropDownPosition.BUTTON,r._showToday=!0,r._viewGridInside=!1,r._showWeeks=!1,r._startWeek=0,r._weekSelectable=!1,r._weekSeparator="",r._currentMode=wu.DAY,r._date=new Date,r._selected=!1,r._focused=!0,r._canceled=!1,r._touchs=null,r._applyTouchs=null,r._clickHandler=function(e){var o=r.$_getCellDate(r._currDate,e.currentTarget.$_day+1);if(r._editor.containsRange(o)){var n=r._holidays&&r._holidays.contains(o);n&&!n.enabled||(r.date=new Date(o),r._selected=!0,r.focused=!0,r._editor.$_selectDate(r._date),!r.showButtons&&r._editor.timeSelectType===t.TimeSelectType.NONE&&r.fireEvent(i.CLOSE_UP,!0))}},r._dblClickHandler=function(t){r.fireEvent(i.CLOSE_UP,!0)},r._yearWeekClickHandler=function(t){var e,o=t.currentTarget.$_yearWeek;o&&(e=Eu(o)),e&&this._editor.containsRange(e)&&(this._date=new Date(e),this._selected=!0,this._editor.$_selectDate(this._date),!this.showButtons&&this.fireEvent(i.CLOSE_UP,!0))}.bind(r),r._mouseupHandler=function(t){!this._isMobile&&this._editor.setFocus()}.bind(r),r._timeWheelHandler=function(t){xt.stopEvent(t),r._doTimeWheel(t)},r._timeClickHandler=function(t){xt.stopEvent(t),r._doTimeClick(t)},r._touchStartHandler=function(t){r._touchs=[],r._applyTouchs=[],r._swipeTimer=clearInterval(r._swipeTimer),1!=t.touches.length&&(r._touchId=void 0),r._touchId=t.touches[0].identifier;var e=t.touches[0];r._touchs.push({x:e.clientX,y:e.clientY,t:t.timeStamp}),r._applyTouchs.push({x:e.clientX,y:e.clientY,t:t.timeStamp})},r._touchEndHandler=function(t){r._checkSwipe(t.target),r._touchs=r._applyTouchs=null},r._touchMoveHandler=function(t){if(!(t.touches.length>1)){xt.stopEvent(t);var e=r._touchs,i=r._applyTouchs,o=t.touches[0],n={x:o.clientX,y:o.clientY,t:t.timeStamp};e.push(n),i.push(n);var s=i[0].y,a=i[i.length-1].y;Math.abs(s-a)>13&&(r._applyTouchs=[],r._doTimeScroll(t.target,s-a))}},r._checkSwipe=function(t){var e=r._touchs,i=e.length;if(!(i<2)){for(var o=e[i-1],n=e[i-2],s=i-3;s>=0&&!(o.t-n.t>100);s--)n=e[s];var a=n.x,l=n.y,u=o.x,c=o.y,h=Math.sqrt(Math.pow(a-u,2)+Math.pow(l-c,2))/Math.max(16,o.t-n.t),p=.998;if(h>.1){var d=Math.log(.1/h)/Math.log(p),f=h*(1-Math.pow(p,d+1))/(1-p),g="right",y=Math.round(180*Math.atan2(c-l,u-a)/Math.PI);return y<0&&(y=360+y),y>45&&y<=135?g="bottom":y>135&&y<=225?g="left":y>225&&y<=315&&(g="top"),r.onSwipeHandler(d,f,g,t)}return!1}},r.$_scrollRow=function(){xt.getTimer()-r._swipeStarted<r._swipeDuration?r._doTimeScroll(r._swipeTarget,r._swipeDistance):r._swipeTimer=clearInterval(r._swipeTimer)},r.$_nextMonth=function(t){xt.incMonth(r._currDate,1),r.$_buildCalendar()},r.$_prevMonth=function(t){xt.incMonth(r._currDate,-1),r.$_buildCalendar()},r.$_nextYearMonth=function(t){xt.incYear(r._currDate,1),r.$_buildMonths()},r.$_prevYearMonth=function(t){xt.incYear(r._currDate,-1),r.$_buildMonths()},r.$_nextYear=function(){var t=r._yearTable.tBodies[0].rows[2].cells[3],e=parseInt(t.getAttribute("year"));r.$_buildYear(e)},r.$_prevYear=function(){var t=r._yearTable.tBodies[0].rows[0].cells[0],e=parseInt(t.getAttribute("year"))-4;r.$_buildYear(e)},r._editor=n,r._container=o,r._yearDisplayFormat=n.yearDisplayFormat,r._monthDisplayFormat=n.monthDisplayFormat,r._months=n.months,r._weekDays=xt.week_days,r._element=r.$_createPicker(n),r._element.addEventListener("pointerup",r._mouseupHandler),r}return n(i,e),i.prototype.onSwipeHandler=function(t,e,i,o){this._swipeDuration=t,this._swipeStarted=xt.getTimer(),this._swipeTarget=o;var n=1;switch(i){case"bottom":n=-1;case"top":this._swipeDistance=n*e/20,this._swipeTimer=setInterval(this.$_scrollRow,40)}return!0},i.prototype._doDispose=function(){var t=this;if(this._element){var i=function(e){e&&(e.removeEventListener("wheel",t._timeWheelHandler),e.removeEventListener("click",t._timeClickHandler),e.removeEventListener("touchstart",t._touchStartHandler),e.removeEventListener("touchend",t._touchEndHandler),e.removeEventListener("touchmove",t._touchMoveHandler),e.removeEventListener("dblclick",t._dblClickHandler))};this._element.removeEventListener("pointerup",this._mouseupHandler),i(this._hourElement.$_UL),i(this._minuteElement.$_UL),i(this._secondElement.$_UL),xt.detach(this._element)}e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showToday",{get:function(){return this._showToday},set:function(t){t!=this._showToday&&(this._showToday=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"months",{get:function(){return this._months},set:function(t){xt.isArray(t)&&(this._months=t,this._months.length=12,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewGridInside",{get:function(){return this._viewGridInside||xt.isSlotMode()},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showWeeks",{get:function(){return this._showWeeks},set:function(t){t!=this._showWeeks&&(this._showWeeks=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startWeek",{get:function(){return this._startWeek},set:function(t){t!=this._startWeek&&(this._startWeek=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){t!=this._weekSelectable&&(this._weekSelectable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){t!=this._weekSeparator&&(this._weekSeparator=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&(this._holidays=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"date",{get:function(){return this._date},set:function(t){t?this._date&&this._date.getTime()===t.getTime()||(this._currDate=new Date(t),this._date=new Date(t),this.listing&&(this.$_buildCalendar(),this._setTime(this._date,!1))):null===t&&(this._date=null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canceled",{get:function(){return this._canceled},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=t?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._calendar.tHead.style.opacity=t?"1.0":"0.5")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"today",{get:function(){return this.date=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){t!=this._showButtons&&(this._footer&&(this._footer.style.display=t?"":"none"),this._showButtons=t),this._showButtons=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"saveLabel",{get:function(){return this._saveLabel},set:function(t){t!=this._saveLabel&&(this._saveElement&&(this._saveElement[xt.TextProp]=t),this._saveLabel=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){t!=this._cancelLabel&&(this._cancelElement&&(this._cancelElement[xt.TextProp]=t),this._cancelLabel=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deleteLabel",{get:function(){return this._deleteLabel},set:function(t){t!=this._deleteLabel&&(this._deleteElement&&(this._deleteElement[xt.TextProp]=t),this._deleteLabel=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"todayLabel",{get:function(){return this._todayLabel},set:function(t){t!=this._todayLabel&&(this._todayElement&&(this._todayElement[xt.TextProp]=t),this._todayLabel=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentMode",{get:function(){return this._currentMode},set:function(t){if(this._currentMode!==t){this._currentMode=t;for(var e=this._bodyElement,i=void 0,o=this._header,n=o.$_prev,r=o.$_next,s=this._currDate||new Date;i=e.lastElementChild;)e.removeChild(i);var a=s.getMonth(),l=s.getFullYear();switch(this._currentMode){case wu.DAY:e.appendChild(this._calendarElement),n.onclick=this.$_prevMonth,r.onclick=this.$_nextMonth,n.title=0==a?l-1+"/12":l+"/"+xt.pad(a),r.title=r.title=11==a?l+1+"/01":l+"/"+xt.pad(a+2);break;case wu.MONTH:e.appendChild(this._monthsElement),this.$_buildMonths(),n.onclick=this.$_prevYearMonth,r.onclick=this.$_nextYearMonth,n.title="".concat(l-1,"/").concat(a+1),r.title="".concat(l+1,"/").concat(a+1);break;case wu.YEAR:e.appendChild(this._yearsElement),this.$_buildYear(s.getFullYear()),n.onclick=this.$_prevYear,r.onclick=this.$_nextYear,n.title="".concat(10*Math.floor(l/10)-11,"-").concat(10*Math.floor(l/10)),r.title="".concat(10*Math.floor(l/10)+11,"-").concat(10*Math.floor(l/10)+20)}}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hours",{get:function(){return this._hours},set:function(e){if(e)this._hours=e.slice();else{this._hours=[];for(var i=0;i<24;i++)this._hours.push(i)}this.$_buildHourMinutes(t.TimeSelectType.HOUR)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minutes",{get:function(){return this._minutes},set:function(e){if(e)this._minutes=e.slice();else{this._minutes=[];for(var i=0;i<60;i++)this._minutes.push(i)}this.$_buildHourMinutes(t.TimeSelectType.MINUTE)},enumerable:!1,configurable:!0}),i.prototype.setWeekDays=function(t){t!=this._weekDays&&(xt.isArray(t)&&t.length>=7?this._weekDays=t:this._weekDays=xt.week_days)},i.prototype.show=function(t,e,i,o,n){this._containerElement=!xt.isMobile()&&this.viewGridInside?this._container._container:t,this._element.style.removeProperty("width"),this._timeContainer.style.setProperty("height","0px"),this.$_show(e,i,o,n)},i.prototype.hide=function(){this.focused=!1,xt.detach(this._element),this._containerElement=null},i.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date)).setDate(this._date.getDate()+t):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},i.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),xt.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},i.prototype.startDay=function(){var t=new Date(this._currDate),e=t.getDay()-this._startWeek;return t.setDate(t.getDate()-(e+7)%7),this.date=t},i.prototype.endDay=function(){var t=new Date(this._currDate),e=t.getDay()-this._startWeek;return t.setDate(t.getDate()+(6-e)),this.date=t},i.prototype.incHour=function(t){var e,i=new Date(this._currDate),o=i.getHours(),n=this._hours;return n?(e=n.indexOf(o))>=0?null==(o=n[e+t])&&(o=1===t?n[0]:n[n.length-1]):o=n[0]:o=(24+o+t)%24,i.setHours(o),this.$_setTime(this._hourElement,null,o,!0),this.date=i},i.prototype.incMinute=function(t){var e,i=new Date(this._currDate),o=this._minutes,n=i.getMinutes();return o?(e=o.indexOf(n))>=0?null==(n=o[e+t])&&(n=1===t?o[0]:o[o.length-1]):n=o[0]:n=(24+n+t)%24,i.setMinutes(n),this.$_setTime(this._minuteElement,null,n,!0),this.date=i},i.prototype.incSecond=function(t){var e=new Date(this._currDate),i=e.getSeconds();return i=(60+i+t)%60,e.setSeconds(i),this.$_setTime(this._secondElement,null,i,!0),this.date=e},i.prototype.setCurrentLoc=function(t){var e="focused";1===t?xt.addClassName(this._hourElement,e):xt.removeClassName(this._hourElement,e),2===t?xt.addClassName(this._minuteElement,e):xt.removeClassName(this._minuteElement,e),3===t?xt.addClassName(this._secondElement,e):xt.removeClassName(this._secondElement,e)},i.prototype._changed=function(){},i.prototype.$_getCellDate=function(t,e){var i=new Date(t);return i.setDate(e),i},i.prototype.$_createPicker=function(t){var e=this._container.doc,i=e.createElement("div");this._id=i.id="rg-calendar-"+Du.$$_LIST_ID++;var o=i.style;return o.position="absolute",o.boxSizing="border-box",o.margin="0px",o.overflow="auto",o.zIndex=String(t._baseZindex+2),i.className="rg-calendar",this._header=this.$_createHeader(e),i.appendChild(this._header),this._bodyElement=this.$_createBody(e),i.appendChild(this._bodyElement),this._calendarElement=this.$_createCalTable(e),this._monthsElement=this.$_createMonths(e),this._yearsElement=this.$_createYears(e),this._footer=this.$_createFooter(e),i.appendChild(this._footer),i},i.prototype.$_createBody=function(t){var e=t.createElement("div");return e.className="rg-calendar-body",e},i.prototype.$_createCalTable=function(t){var e,i=t.createElement("div");(e=i.style).display="flex",e.flexDirection="row";var o=this._dateContainer=t.createElement("div");(e=o.style).display="inline-block",i.appendChild(o),this._calendar=this.$_createCalendar(t),o.appendChild(this._calendar);var n=this._timeContainer=t.createElement("div");return i.appendChild(n),(e=n.style).display="none",e.overflow="hidden",e.height="0px",n.appendChild(this._hourElement=this.$_createHour(t)),n.appendChild(this._minuteElement=this.$_createMinute(t)),n.appendChild(this._secondElement=this.$_createSecond(t)),i},i.prototype._getCell=function(t){for(var e=Ct(t);t&&!(t instanceof e.HTMLTableCellElement);)t=t.parentElement;return t},i.prototype.$_setCurrentTime=function(t,e,i){for(var o=t.parentElement.clientHeight,n=t.offsetTop,r=0,s=0;s<t.childElementCount;s++){var a=t.children[s];e&&(a.setAttribute("time-value",e[s].toString()),a[xt.TextProp]=xt.pad(e[s])),e[s]===i?xt.addClassName(a,"rg-cal-time-select"):xt.removeClassName(a,"rg-cal-time-select"),(n+=r||(r=a.clientHeight+2))>o?a.style.visibility="hidden":a.style.removeProperty("visibility")}},i.prototype._doTimeScroll=function(e,i){for(var o=Ct(this._containerElement),n=e;!(n instanceof o.HTMLUListElement)||null==n;)n=n.parentElement;if(n){var r=n.parentElement;if(!(r.scrollHeight<=r.clientHeight)){var s;switch(n.firstElementChild.getAttribute("kind")){case t.TimeSelectType.HOUR:s=this._currDate.getHours();break;case t.TimeSelectType.MINUTE:s=this._currDate.getMinutes();break;case t.TimeSelectType.SECOND:s=this._currDate.getSeconds()}if(n){for(var a=[],l=0;l<n.childElementCount;l++)a.push(Number(n.children[l].getAttribute("time-value")));i>0?a.push(a.shift()):a.unshift(a.pop()),this.$_setCurrentTime(n,a,s)}}}},i.prototype._doTimeWheel=function(t){this._doTimeScroll(t.target,t.deltaY)},i.prototype._doTimeClick=function(e){var o=e.target,n=new Date(this._currDate),r=o.getAttribute("kind"),s=Number(o.getAttribute("time-value"));switch(r){case t.TimeSelectType.HOUR:n.setHours(s);break;case t.TimeSelectType.MINUTE:n.setMinutes(s);break;case t.TimeSelectType.SECOND:n.setSeconds(s)}this._editor.$_selectDate(this.date=n),r===this._editor.timeSelectType&&!this.showButtons&&this.fireEvent(i.CLOSE_UP,!0)},i.prototype._changeCurrent=function(t){switch(this._currentMode){case wu.DAY:this.currentMode=t?wu.MONTH:wu.DAY;break;case wu.MONTH:this.currentMode=t?wu.YEAR:wu.DAY;break;case wu.YEAR:this.currentMode=t?wu.YEAR:wu.MONTH}},i.prototype.$_createHeader=function(t){var e=this,i=function(t,e){var i=t.createElement("span"),o=i.style;return o.position="relative",o.minWidth="17px",o.minHeight="17px",i},o=this,n=this._headerElement=t.createElement("div"),r=n.style;r.position="relative",r.display="flex",n.className="rg-cal-header";var s=n.appendChild(n.$_prev=i(t));s.className="rg-cal-prev-month",s.onclick=this.$_prevMonth;var a=t.createElement("div");(r=a.style).position="relative",r.textAlign="center",r.display="flex",r.alignItems="center",r.justifyContent="center",r.height="100%",r.flexGrow="1",n.appendChild(n.$_title=a),a.className="rg-cal-yearmonth";var l=t.createElement("div");(r=l.style).position="relative",r.fontSize="14px",l.className="rg-cal-year",a.appendChild(a.$_year=l),l.onclick=function(t){e._currentMode!==wu.YEAR&&e._changeCurrent(!0)};var u=this._todayElement=t.createElement("span");(r=u.style).position="relative",u.className="rg-cal-today-button",n.appendChild(u),u.innerHTML=this.todayLabel,u.onclick=function(t){var e=new Date;o.focused=!0,o.date=e,o._selected=!0,o.currentMode=wu.DAY,o._editor.$_selectDate(o._currDate),o._setTime(e,!0)};var c=n.appendChild(n.$_next=i(t));return c.className="rg-cal-next-month",c.onclick=this.$_nextMonth,n},i.prototype.$_createFooter=function(t){var e,o=t.createElement("div"),n=o.style;return n.display="none",o.className="rg-cal-buttons",e=this._deleteElement=t.createElement("span"),this._deleteLabel&&(e[xt.TextProp]=this._deleteLabel),e.className="rg-cal-delete-button",(n=e.style).float="left",e.onclick=function(t){this._selected=!0,this.date=null,this._editor.$_selectDate(null)}.bind(this),o.appendChild(e),e=this._saveElement=t.createElement("span"),this._saveLabel&&(e[xt.TextProp]=this._saveLabel),e.className="rg-cal-save-button",(n=e.style).float="right",e.onclick=function(t){this.fireEvent(i.CLOSE_UP,!0)}.bind(this),o.appendChild(e),e=this._cancelElement=t.createElement("span"),this._cancelLabel&&(e[xt.TextProp]=this._cancelLabel),e.className="rg-cal-cancel-button",(n=e.style).float="right",e.onclick=function(t){this._selected=!1,this._canceled=!0,this.fireEvent(i.CLOSE_UP,!1)}.bind(this),o.appendChild(e),o},i.prototype.$_createCalendar=function(t){var e=["sun","mon","tue","wed","thu","fri","sat"],i=t.createElement("table"),o=i.style;o.margin="2px",i.className="rg-cal-days-table";var n=i.createTHead();n.className="rg-cal-weeks";var r=t.createElement("tr");n.appendChild(r);var s=[],a=t.createElement("th");(o=a.style).minWidth="20px",o.textAlign="center",a.className="rg-cal-week-year-week",r.appendChild(a);var l=t.createElement("span");a.appendChild(l),n.$_weeks=a;for(var u=0;u<7;u++){var c=t.createElement("th");(o=c.style).minWidth="20px",o.textAlign="center",c.className="rg-cal-week-"+e[u],r.appendChild(c);var h=t.createElement("span");h.innerHTML=xt.htmlEncode(this._weekDays[u]),c.appendChild(h),s.push(h)}n.$_cells=s;var p=t.createElement("tbody");p.className="rg-cal-days",i.appendChild(i.$_body=p);for(var d=p.$_rows=[],f=p.$_yearweeks=[],g=0;g<6;g++){var y=t.createElement("tr");p.appendChild(y),d.push(y),y.$_cells=s=[];var _=t.createElement("td");(o=_.style).padding="1px",y.appendChild(_);var m=t.createElement("span");for(_.appendChild(_.$_span=m),f.push(_),u=0;u<7;u++){var v=t.createElement("td");(o=v.style).padding="1px",v.className="rg-cal-day rg-cal-week-"+e[(u+this._startWeek)%7],y.appendChild(v),v.onclick=this._clickHandler,v.ondblclick=this._dblClickHandler;var b=t.createElement("span");v.appendChild(v.$_span=b),v.id=this._id+"-"+g.toString()+"-"+u.toString(),s.push(v)}}return i},i.prototype.$_buildYear=function(t){for(var e=this._yearTable.tBodies[0],i=this._currDate.getFullYear(),o=t=10*Math.floor(t/10)-1,n=0;n<3;n++)for(var r=e.rows[n],s=0;s<4;s++){var a=r.cells[s];a.setAttribute("year",t.toString()),a.firstElementChild[xt.TextProp]=this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",t+""):t+"",i===t?xt.addClassName(a,"rg-cal-focusday"):xt.removeClassName(a,"rg-cal-focusday"),t++}var l="".concat(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",o+""):o," - ").concat(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",--t+""):--t);this._headerElement.$_title.$_year[xt.TextProp]=l},i.prototype.$_buildMonths=function(){for(var t=this._months,e=0,i=this._currDate.getMonth(),o=this._monthTable.tBodies[0],n=0;n<3;n++)for(var r=o.rows[n],s=0;s<4;s++){var a=r.cells[s];a.setAttribute("month",e.toString());var l=a.firstElementChild;t&&t[e]?l[xt.TextProp]=t[e]:l[xt.TextProp]=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",e+1+""):"".concat(e+1),i===e?xt.addClassName(a,"rg-cal-focusday"):xt.removeClassName(a,"rg-cal-focusday"),e++}var u=this._currDate.getFullYear(),c="".concat(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",u+""):u);this._headerElement.$_title.$_year[xt.TextProp]=c},i.prototype.$_buildHourMinutes=function(e){var i,o,n=this._container.doc;switch(e){case t.TimeSelectType.HOUR:i=this._hourElement,o=this._hours;break;case t.TimeSelectType.MINUTE:i=this._minuteElement,o=this._minutes}var r=i.$_UL;if(r){for(;r.lastElementChild;)r.removeChild(r.lastElementChild);o.forEach((function(t){var i=n.createElement("li");i.className="rg-cal-time-item",i.setAttribute("time-value",t.toString()),i[xt.TextProp]=xt.pad(t,2),i.setAttribute("kind",e),r.appendChild(i)}))}},i.prototype.$_createMonths=function(t){var e=this,i=t.createElement("div"),o=this._monthTable=t.createElement("table");o.className="rg-cal-month-table";var n=t.createElement("tbody");o.appendChild(n);for(var r=0;r<3;r++){var s=n.appendChild(t.createElement("tr"));s.className="rg-cal-month-row";for(var a=0;a<4;a++){var l=s.appendChild(t.createElement("td"));l.className="rg-cal-month-cell",l.appendChild(t.createElement("div"))}}return i.appendChild(o),o.onclick=function(t){var i=e._getCell(t.target);if(i){var o=parseInt(i.getAttribute("month")),n=e._currDate.getDate(),r=new Date(e._currDate.getFullYear(),o+1,0).getDate();e._currDate.setMonth(o,Math.min(n,r)),e._changeCurrent(!1),e.$_buildCalendar()}},i},i.prototype.$_createYears=function(t){var e=this,i=t.createElement("div"),o=this._yearTable=t.createElement("table");o.className="rg-cal-year-table";for(var n=o.appendChild(t.createElement("tbody")),r=0;r<3;r++){var s=n.appendChild(t.createElement("tr"));s.className="rg-cal-year-row";for(var a=0;a<4;a++){var l=s.appendChild(t.createElement("td"));l.className="rg-cal-year-cell",l.appendChild(t.createElement("div"))}}return i.appendChild(o),o.onclick=function(t){var i=e._getCell(t.target);if(i){var o=parseInt(i.getAttribute("year"));e._currDate.setFullYear(o),e._changeCurrent(!1)}},i},i.prototype.$_createTimeElt=function(e,i,o,n){var r=i.style;i.className="rg-cal-time rg-cal-time-".concat(n),r.display="inline-block",r.height="100%",r.overflow="hidden",r.position="relative";var s=e.createElement("div");s.className="rg-time-header";var a=e.createElement("div");switch(a.className="rg-time-title",i.$_Label=a,n){case t.TimeSelectType.HOUR:a[xt.TextProp]=this._editor.hourLabel;break;case t.TimeSelectType.MINUTE:a[xt.TextProp]=this._editor.minuteLabel;break;case t.TimeSelectType.SECOND:a[xt.TextProp]=this._editor.secondLabel}s.appendChild(a),i.appendChild(s);var l=e.createElement("ul");l.addEventListener("wheel",this._timeWheelHandler),l.addEventListener("click",this._timeClickHandler),l.addEventListener("touchstart",this._touchStartHandler),l.addEventListener("touchend",this._touchEndHandler),l.addEventListener("touchmove",this._touchMoveHandler),l.addEventListener("dblclick",this._dblClickHandler),l.className="rg-cal-time-list";for(var u=0;u<o;u++){var c=e.createElement("li");c.className="rg-cal-time-item",c.setAttribute("time-value",u.toString()),c[xt.TextProp]=xt.pad(u,2),c.setAttribute("kind",n),l.appendChild(c)}i.appendChild(l),i.$_UL=l},i.prototype.$_createHour=function(e){var i=e.createElement("div");return this.$_createTimeElt(e,i,24,t.TimeSelectType.HOUR),i},i.prototype.$_createMinute=function(e){var i=e.createElement("div");return this.$_createTimeElt(e,i,60,t.TimeSelectType.MINUTE),i},i.prototype.$_createSecond=function(e){var i=e.createElement("div");return this.$_createTimeElt(e,i,60,t.TimeSelectType.SECOND),i},i.prototype.$_show=function(e,i,o,n){var r=wt(this._element),s=St(r);this.focused=!1,this._selected=!1,this._canceled=!1,this._footer.style.display=this.showButtons?"":"none",this._showToday?this._todayElement.style.removeProperty("display"):this._todayElement.style.setProperty("display","none");var a=this._date;this._currDate=a?new Date(a):new Date,this._today=new Date;for(var l,u=this._bodyElement;l=u.lastElementChild;)u.removeChild(l);this._bodyElement.appendChild(this._calendarElement),this.currentMode=wu.DAY,this.setCurrentLoc(0),this.$_buildCalendar(),xt.disableSelection(this._element),this._containerElement.appendChild(this._element),this._timeContainer.style.height=this._dateContainer.getBoundingClientRect().height+"px",this.$_setTimeSelector(),this._setTime(this._currDate,!0);var c=xt.getBrowserSize(),h=xt.getClientRect(this._containerElement),p=xt.getClientRect(this._container._container),d=c.width,f=c.height,g=xt.getClientRect(this._element),y=s.pageXOffset||r.documentElement.scrollLeft,_=s.pageYOffset||r.documentElement.scrollTop;r.documentElement.scrollWidth>r.documentElement.clientWidth&&(f-=18),r.documentElement.scrollHeight>r.documentElement.clientHeight&&(d-=18),e+=p.left-h.left,i+=p.top-h.top,(xt.ieTen||xt.ieOld||xt.ieLeg)&&(e+=r.documentElement.scrollLeft,i+=r.documentElement.scrollTop),i+g.height>f+_&&(i=i-n.height-g.height)<0&&(i=f-g.height-2),this._dropDownPosition!=t.DropDownPosition.EDITOR?e=Math.max(0,e+o-g.width):e+g.width>d+y&&(e=d-g.width),!xt.isMobile()&&this.viewGridInside&&(i=n.bottom-h.top+2,(h.bottom<n.bottom+g.height||f+_<n.bottom+g.height)&&(i=n.top-g.height-h.top-2)),xt.isMobile()&&!xt.isTablet()||this._element.offsetParent||(e+=r.documentElement.offsetLeft,i+=r.documentElement.offsetTop),xt.move(this._element,Math.max(0,e),Math.max(0,i)),this._element.style.setProperty("width",Math.ceil(g.width)+"px")},i.prototype.$_checkFocusedWeek=function(t,e,i){var o=["rg-cal-week-year-week"];this.$_isFocusedWeek(t,e.$_yearWeek)&&o.push("rg-cal-week-year-focusweek"),this.weekSelectable&&o.push("rg-week-selectable"),e.className=o.join(" ")},i.prototype.$_isFocusedWeek=function(t,e){return t&&e&&xu(t,this._startWeek)==e},i.prototype.$_isFocusedDay=function(t,e){var i=this._date;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},i.prototype.$_isToday=function(t,e){var i=this._today;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},i.prototype.$_setTime=function(t,e,i,o){var n=t.$_UL,r=t.$_Label;if(n){r&&e&&(r[xt.TextProp]=e);var s=[].map.call(n.children,(function(t){return Number(t.getAttribute("time-value"))})),a=s.indexOf(i);if(!(a<0)){if(!this.listing||o)if(a>2){var l=s.splice(0,a-2);s.push.apply(s,l)}else a<2&&(l=s.splice(s.length-a),s.unshift.apply(s,l));this.$_setCurrentTime(n,s,i)}}},i.prototype._setTime=function(t,e){this.$_setTime(this._hourElement,this._editor.hourLabel,t.getHours(),e),this.$_setTime(this._minuteElement,this._editor.minuteLabel,t.getMinutes(),e),this.$_setTime(this._secondElement,this._editor.secondLabel,t.getSeconds(),e)},i.prototype.$_setTimeSelector=function(){var e=this._editor.timeSelectType,i=this._hourElement.style,o=this._minuteElement.style,n=this._secondElement.style;i.display=o.display=n.display="none";var r=0;switch(e){case t.TimeSelectType.SECOND:n.display="inline-block",r++;case t.TimeSelectType.MINUTE:o.display="inline-block",r++;case t.TimeSelectType.HOUR:i.display="inline-block",r++}var s=this._headerElement.clientHeight+"px";this._hourElement.firstElementChild.style.height=this._minuteElement.firstElementChild.style.height=this._secondElement.firstElementChild.style.height=s,this._timeContainer.style.display=r?"inline-block":"none"},i.prototype.$_buildCalendar=function(){var t,e,i=["sun","mon","tue","wed","thu","fri","sat"],o=this._header,n=this._currDate,r=o.$_title,s=n.getFullYear(),a=n.getMonth(),l="";l=(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",s+""):s+"")+"&nbsp;",this._months&&this._months.length>0?l+=this._months[a]:l+=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",(a+1).toString()):a+1+"",r.$_year.innerHTML=l,l=r.$_year.innerText;for(var u=this._calendar.tHead.$_cells,c=0;c<7;c++){var h=u[(c+7-this._startWeek)%7];h.innerHTML=xt.htmlEncode(this._weekDays[c]),h.parentElement.className="rg-cal-week-"+i[c]}this._calendar.tHead.$_weeks.style.display=this.showWeeks?"":"none";for(var p=this._calendar.$_body,d=p.$_yearweeks,f=(c=0,d.length);c<f;c++)d[c].style.display=this.showWeeks?"":"none",d[c].onclick=this.weekSelectable?this._yearWeekClickHandler:null,d[c].ondblclick=this.weekSelectable?this._dblClickHandler:null;var g=p.$_rows,y=xt.month_days[xt.isLeapYear(s)?1:0][a],_=new Date(n);_.setDate(1);var m=(_.getDay()+7-this._startWeek)%7;30==y&&6==m||31==y&&m>=5?xt.addChild(p,g[5]):xt.removeChild(p,g[5]),28==y&&0==m?xt.removeChild(p,g[4]):xt.addChild(p,g[4]);var v,b,C=0,w=d[0];if(u=g[0].$_cells,m>0){var S=s,E=a-1;E<0&&(S--,E=11);var x=xt.month_days[xt.isLeapYear(S)?1:0][E];for(c=0;c<m;c++){(D=u[c]).removeAttribute("title");var O=new Date(this._currDate);D.$_day=c-m,O.setDate(D.$_day+1);var R=this._editor.containsRange(O);0===c&&(w.$_yearWeek=xu(O,this._startWeek),w.$_span.innerText=w.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,w,R)),D.$_span.innerHTML=x-m+c+1,D.className="rg-cal-day rg-cal-prev-day "+(R?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(c+this._startWeek)%7]}}for(c=m;c<7;c++)(D=u[c]).removeAttribute("title"),D.$_day=C++,D.$_span.innerHTML=C,(_=new Date(this._currDate)).setDate(C),R=this._editor.containsRange(_),0===c&&(w.$_yearWeek=xu(_,this._startWeek),w.$_span.innerText=w.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,w,R)),v=this.$_isFocusedDay(n,C),b=this.$_isToday(n,C),v&&this._editor._editor.setAttribute("aria-activedescendant",D.id),D.setAttribute("aria-label",l+" "+C.toString()),b?D.setAttribute("aria-current","date"):D.removeAttribute("aria-current"),R?D.removeAttribute("aria-disabled"):D.setAttribute("aria-disabled","true"),t="rg-cal-day "+(v?"rg-cal-focusday ":""),t+=b?"rg-cal-today ":"",t+=(e=this._holidays&&this._holidays.contains(_))?e.styleName+" rg-cal-holiday ":"",t+=R?"":"rg-cal-disable-day ",t+="rg-cal-week-"+i[(c+this._startWeek)%7],D.className=t,e&&(t=e.getTooltip(this.$_getCellDate(n,C)))&&(D.title=t);for(var I=1;I<6&&C<y;I++){u=g[I].$_cells;var T=d[I];for(c=0;c<7;c++)if(C<y)(D=u[c]).removeAttribute("title"),D.$_day=C++,(_=new Date(this._currDate)).setDate(C),R=this._editor.containsRange(_),0===c&&(T.$_yearWeek=xu(_,this._startWeek),T.$_span.innerText=T.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,T,R)),D.$_span.innerHTML=C,v=this.$_isFocusedDay(n,C),b=this.$_isToday(n,C),v&&this._editor._editor.setAttribute("aria-activedescendant",D.id),D.setAttribute("aria-label",l+" "+C.toString()),b?D.setAttribute("aria-current","date"):D.removeAttribute("aria-current"),R?D.removeAttribute("aria-disabled"):D.setAttribute("aria-disabled","true"),t="rg-cal-day "+(v?"rg-cal-focusday ":""),t+=this.$_isToday(n,C)?"rg-cal-today ":"",t+=(e=this._holidays&&this._holidays.contains(_))?e.styleName+" rg-cal-holiday ":"",t+=R?"":"rg-cal-disable-day ",t+="rg-cal-week-"+i[(c+this._startWeek)%7],D.className=t,e&&(t=e.getTooltip(this.$_getCellDate(n,C)))&&(D.title=t);else for(var P=1;c<7;c++){var D;(D=u[c]).removeAttribute("title"),D.$_day=C++,(_=new Date(this._currDate)).setDate(C),R=this._editor.containsRange(_),D.$_span.innerHTML=P++,D.className="rg-cal-day rg-cal-next-day "+(R?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(c+this._startWeek)%7]}}},i.CLOSE_UP="onDatePickerCloseUp",i}(Ee),Du=function(e){function i(i,o){var n=e.call(this,i,o)||this;n._minDate=new Date(1970,0,1),n._maxDate=new Date(2100,11,31),n._dropDownPosition=t.DropDownPosition.BUTTON,n._dropDownWhenClick=!1,n._showToday=!0,n._yearDisplayFormat="{Y}",n._monthDisplayFormat="{M}",n._months=null,n._weekDays=null,n._showWeeks=!1,n._startWeek=0,n._weekSelectable=!1,n._weekSeparator="",n._commitOnSelect=!1,n._holidays=null,n._showButtons=!0,n._saveLabel="Save",n._cancelLabel="Cancel",n._deleteLabel="Delete",n._todayLabel="Today",n._timeSelectType=t.TimeSelectType.NONE,n._currentLoc=0,n._hourLabel="",n._minuteLabel="",n._secondLabel="",n._holidayCollection=new Tu,n._closing=!1,n._regx=/[\d\-.:/apmz+ ]/i,n._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e===this._list._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(n);var r=i.editorOptions;n._yearDisplayFormat=r.yearDisplayFormat,n._monthDisplayFormat=r.monthDisplayFormat,n._months=r.months,n._weekDays=r.weekDays,n._baseZindex=i.displayOptions.baseZindex,n._list=new Pu(i.container,n),n._list.addListener(n);var s=n._editor;return s.setAttribute("aria-owns",n._list._element.id),s.setAttribute("aria-expanded","false"),s.setAttribute("aria-haspopup","true"),n}return n(i,e),i.prototype._doDispose=function(){this._globalMouseHandler=null,this._holidayCollection=this._holidayCollection.dispose(),this._list=this._list&&this._list.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"editFormat",{get:function(){return this.datetimeFormat},set:function(t){t!=this.datetimeFormat&&(this.datetimeFormat=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showToday",{get:function(){return this._showToday},set:function(t){this._showToday=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){this._yearDisplayFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){this._monthDisplayFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"months",{get:function(){return this._months},set:function(t){this._months=t.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekDays",{get:function(){return this._weekDays},set:function(t){this._weekDays=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showWeeks",{get:function(){return this._showWeeks},set:function(t){this._showWeeks=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startWeek",{get:function(){return this._startWeek},set:function(t){t=null==t||isNaN(t=Math.floor(t))?0:t,this._startWeek=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){this._weekSelectable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){this._weekSeparator=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultShowDate",{get:function(){return this._defaultShowDate},set:function(t){t!=this._defaultShowDate&&(this._defaultShowDate=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultDate",{get:function(){return this._defaultDate},set:function(t){t!=this._defaultDate&&(this._defaultDate=t instanceof Date?new Date(t):t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"holidays",{get:function(){return this._holidays},set:function(t){this._holidays=t,t?(this._holidayCollection=this._holidayCollection||new Tu,this._holidayCollection.editor=this,this._holidayCollection.load(t)):this._holidayCollection.setNull(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._list.listing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"saveLabel",{get:function(){return this._saveLabel},set:function(t){this._saveLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){this._cancelLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deleteLabel",{get:function(){return this._deleteLabel},set:function(t){this._deleteLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"todayLabel",{get:function(){return this._todayLabel},set:function(t){this._todayLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hourLabel",{get:function(){return this._hourLabel},set:function(t){this._hourLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minuteLabel",{get:function(){return this._minuteLabel},set:function(t){this._minuteLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"secondLabel",{get:function(){return this._secondLabel},set:function(t){this._secondLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hours",{get:function(){return this._hours},set:function(t){var e=this;if("string"==typeof t){this._hours=[];try{t.split(",").forEach((function(t){var i=t.split("-");if(1===i.length&&i[0]&&!isNaN(parseInt(i[0])))e._hours.push(parseInt(i[0]));else if(i.length=2)for(var o=parseInt(i[0]),n=parseInt(i[1]),r=o;r<n;r++)e._hours.indexOf(r)<0&&e._hours.push(r)}))}catch(t){this._hours=void 0}}else this._hours=t?t.slice():null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minutes",{get:function(){return this._minutes},set:function(t){this._minutes=t?t.slice():null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"timeSelectType",{get:function(){return this._timeSelectType},set:function(t){this._timeSelectType=t},enumerable:!1,configurable:!0}),i.prototype.dropDown=function(t){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var e=wt(this._container),i=St(e),o=this._grid.editorOptions,n=this._list,r=e.documentElement,s=xt.getClientRect(this._container);return this._currentLoc=0,n.viewGridInside=o.viewGridInside,n.dropDownPosition=this._dropDownPosition,n.showToday=this._showToday,n.yearDisplayFormat=this._yearDisplayFormat,n.monthDisplayFormat=this._monthDisplayFormat,n.months=this._months,n.minDate=this._minDate,n.maxDate=this._maxDate,n.showWeeks=this._showWeeks,n.startWeek=this._startWeek||0,n.weekSelectable=this.weekSelectable,n.weekSeparator=this.weekSeparator,n.showButtons=this.showButtons,n.saveLabel=this.saveLabel,n.cancelLabel=this.cancelLabel,n.deleteLabel=this.deleteLabel,n.currentMode=wu.DAY,n.holidays=this._holidayCollection.isNull?o._holidayCollection:this._holidayCollection,n.hours=this.hours,n.minutes=this.minutes,n.todayLabel=this.todayLabel,this._weekDays&&this._weekDays.length>0&&n.setWeekDays(this._weekDays),this.$_setListDate(),this._isMobile&&!this._isTablet?(this._showMarquee(r),n.show(r,0,0,0,null),this._centerPopup(r,n._element)):n.show(r,s.cx+1,s.cy+s.height,this._cellBounds.width,xt.getClientRect(this._editor)),n.focused=t,this._editor.setAttribute("aria-expanded","true"),!xt.isSlotMode()&&i.addEventListener("pointerdown",this._globalMouseHandler),!0}},i.prototype.closeUp=function(t){if(this.listing){var e=St(wt(this._container));this._closing=!0;try{e.removeEventListener("pointerdown",this._globalMouseHandler),this._closeMarquee(),this._list.hide(),t&&this._list.selected?this._isMobile&&!this._isTablet?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()):this._list.canceled&&this._controller.cancelEditor(!1)}finally{this._closing=!1,this._editor.setAttribute("aria-expanded","false")}return!0}},i.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._textReadOnly=!1,this._showToday=!0,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._showWeeks=!1,this._startWeek=0,this._weekSelectable=!1,this._weekSeparator="",this._commitOnSelect=!1,this._defaultShowDate=t.DefaultShowDate.NORMAL,this._holidayCollection&&this._holidayCollection.setNull(),this._showButtons=!0,this._cancelLabel="Cancel",this._saveLabel="Save",this._deleteLabel="Delete",this._todayLabel="Today",this._timeSelectType=t.TimeSelectType.NONE,this._hours=null,this._minutes=null},i.prototype.setEditIndex=function(i){e.prototype.setEditIndex.call(this,i);var o=this._editField().dataType;this._weekSelectable=this._weekSelectable&&o!==t.ValueType.DATE&&o!==t.ValueType.DATETIME},i.prototype.setEditValue=function(t){e.prototype.setEditValue.call(this,t),this.weekSelectable?this._date=Eu(t):this._date="string"==typeof t?this._dateConverter.getDateNull(t):t},i.prototype.getEditValue=function(i,o){void 0===i&&(i=!0),void 0===o&&(o=!1);var n=e.prototype.getEditValue.call(this,i),r=this._editField().dataType;return n&&o&&(r==t.ValueType.DATE||r==t.ValueType.DATETIME)&&(n=this._minDate?Math.max(this._minDate.getTime(),n):n,(n=this._maxDate?Math.min(this._maxDate.getTime(),n):n)&&(n=new Date(n))),n},i.prototype._createEditor=function(t){return e.prototype._createEditor.call(this,t)},i.prototype._textHandler=function(){this._requestStart(!1)},i.prototype._compositionstartHandler=function(t){this.isDisabled()||this._requestStart(!1)},i.prototype._keyDownHandler=function(i){if(!this.isDisabled()){var o=this._list,n=this.listing,r=n&&o.focused;switch(i.keyCode){case 13:if(this.closeUp(!0))return xt.stopEvent(i,!0),!this._sendToParent(i);break;case 27:if(this.closeUp(!1))return xt.stopEvent(i,!0),!0;break;case 36:case 35:if(r)return xt.stopEvent(i,!0),this.$_selectDate(36===i.keyCode?o.startDay():o.endDay()),!0;break;case 37:case 39:if(r){if(0===this._currentLoc)return this.$_selectDate(o.incDay(37===i.keyCode?-1:1)),xt.stopEvent(i,!0),!0;if(this._setLocation(39===i.keyCode))return xt.stopEvent(i,!0),!0}break;case 33:if(r)return xt.stopEvent(i,!0),this.$_selectDate(o.incMonth(i.shiftKey?-12:-1)),!0;break;case 34:if(r)return xt.stopEvent(i,!0),this.$_selectDate(o.incMonth(i.shiftKey?12:1)),!0;break;case 40:if(i.altKey&&!n)return this._requestStart(),xt.stopEvent(i,!0),this._list.focused=!0,this.$_setListDate(),!0;if(n)return xt.stopEvent(i,!0),r?0===this._currentLoc?this.$_selectDate(o.incDay(7)):1===this._currentLoc?this.$_selectDate(o.incHour(1)):2===this._currentLoc?this.$_selectDate(o.incMinute(1)):3===this._currentLoc&&this.$_selectDate(o.incSecond(1)):this._list.focused=!0,!0;break;case 38:if(i.altKey&&n)return this.closeUp(!1),xt.stopEvent(i,!0),!0;if(n)return xt.stopEvent(i,!0),r?0===this._currentLoc?this.$_selectDate(o.incDay(-7)):1===this._currentLoc?this.$_selectDate(o.incHour(-1)):2===this._currentLoc?this.$_selectDate(o.incMinute(-1)):3===this._currentLoc&&this.$_selectDate(o.incSecond(-1)):this._list.focused=!1,!0;break;case 84:(i.altKey||i.altKey&&i.ctrlKey)&&n&&(xt.stopEvent(i,!0),this._list.date=new Date,this.$_selectDate(this._list.date));break;case 9:if(r&&this.timeSelectType!==t.TimeSelectType.NONE&&this._setLocation(!i.shiftKey))return xt.stopEvent(i,!0),!0}return e.prototype._keyDownHandler.call(this,i)}},i.prototype._setLocation=function(e){var i=this._timeSelectType,o=this._currentLoc,n=1;if(i!==t.TimeSelectType.NONE){switch(i){case t.TimeSelectType.SECOND:n++;case t.TimeSelectType.MINUTE:n++;case t.TimeSelectType.HOUR:n++}return e?++o:--o,!(o<0||o>=n)&&(this._list.setCurrentLoc(this._currentLoc=o),!0)}this._currentLoc=0},i.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var i=this._list,o=t.keyCode||t.which,n=String.fromCharCode(o);if(n.toLocaleLowerCase()==this.todayChar){if(xt.stopEvent(t,!0),this.listing)return i.focused=!0,this.$_selectDate(i.today),i._setTime(i.today,!0),!0}else{if(xt.isFirefox&&(t.ctrlKey||0===o))return void e.prototype._keyPressHandler.call(this,t);if(xt.isMac&&t.metaKey&&xt.included(o,99,118))return void e.prototype._keyPressHandler.call(this,t);if(!this._regx.test(n))return void t.preventDefault()}e.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault()}},i.prototype.$_resetValue=function(t){if(void 0===t&&(t=!1),this.visible||t){var e=this._editor,i=e.selectionStart,o=e.selectionEnd,n=e.value?e.value.length:0;e.value=e.value.replace(Su,"");var r=e.value?e.value.length:0;this._isMobile||(r==n?e.setSelectionRange(i,o):e.setSelectionRange(o,o))}},i.prototype._dispatchChange=function(){(this._isMobile||this.visible)&&(this.$_resetValue(this._isMobile),e.prototype._dispatchChange.call(this))},i.prototype._changeHandler=function(t){e.prototype._changeHandler.call(this,t)},i.prototype._pasteHandler=function(t){e.prototype._pasteHandler.call(this,t)},i.prototype._copyHandler=function(t){e.prototype._copyHandler.call(this,t)},i.prototype._requestStart=function(t){return!!e.prototype._requestStart.call(this)&&(this._isMobile?t&&this.dropDown(!1):!1!==t&&this.dropDown(!1),!0)},i.prototype.setBounds=function(t,i,o,n,r){e.prototype.setBounds.call(this,t,i,o,n,r)},i.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(!this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},i.prototype.dropDownList=function(t){this.dropDown(!0)},i.prototype.closeList=function(t){this.closeUp(t)},i.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown(!0)},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype._isDateEditor=function(){var e=this._editField().dataType;return e==t.ValueType.DATE||e==t.ValueType.DATETIME||!this.weekSelectable},i.prototype.$_selectDate=function(t){if(t){if(this._date=t,this.containsRange(t)){var e=void 0;e=this.weekSelectable?xu(t,this._startWeek,this.weekSeparator):this._dateConverter.getText(this._date),this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged()}}else this._date=null,this._mask&&this._mask.clearBuffer(),this._editor.value="",this._doChanged()},i.prototype.$_setListDate=function(){var e,i=this._defaultDate instanceof Date?new Date(this._defaultDate):this._dateConverter.getDateNull(this._defaultDate),o=this._editor.value;switch(this._mask&&(o=this._mask.getStripValue()),e=this.weekSelectable?Eu(o):this._dateConverter.getDateNull(o),this._defaultShowDate){case t.DefaultShowDate.TODAY:e=new Date;break;case t.DefaultShowDate.NORMAL:break;case t.DefaultShowDate.TODAY_WHEN_NULL:e=e||new Date;break;case t.DefaultShowDate.DEFAULT_WHEN_NULL:e=e||i;break;case t.DefaultShowDate.DEFAULT:e=i}e&&(this._list.date=e)},i.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),!this._isMobile&&this.setFocus()},i.INPUT_CSS="rg-date-editor",i.$$_LIST_ID=0,i}(xa),ku=function(e){function i(i,o,n){var r=e.call(this)||this;r._dropDownPosition=t.DropDownPosition.BUTTON,r._viewGridInside=!1,r._selected=!1,r._focused=!1;var s=St(i.doc);return r._jquery=s&&s.jQuery,r._editor=o,r._container=i,r._btOptions=n,r._element=r.$_createList(i.doc),r}return n(i,e),i.prototype._doDispose=function(){this._jquery=null,this._editor=null,this._container=null,this._containerElement=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"date",{get:function(){return this._date},set:function(t){if(this._date=t,t.getTime()!==this._date.getTime()&&(this._currDate=new Date(t),this._date=new Date(t),this.listing)){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());this._jquery&&this._jquery(this._element).datepicker("update",e)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){this._viewGridInside=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._jquery&&this._jquery(this._element).data("datepicker")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px")},enumerable:!1,configurable:!0}),i.prototype.$_destroy=function(){this._jquery&&this._jquery(this._element).datepicker("destroy")},i.prototype.keydown=function(t){if(this._jquery){this._jquery(this._element).datepicker("keydown",t);var e=this._jquery(this._element).data("datepicker").viewDate;e instanceof Date&&(this.date=e,this._editor&&this._editor.selectDate(this._date))}},i.prototype.$_createList=function(t){var e=t.createElement("div"),i=e.style;return i.position="absolute",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",i.zIndex=String(this._editor._baseZindex+2),i.margin="0px",i.overflow="auto",e.className="rg-calendar",e},i.prototype.show=function(t,e,i,o,n){if(this._containerElement=xt.isMobile()&&this._viewGridInside?this._container._container:t,!this.$_createCalendar())return alert("BootStrap DatePicker Not Include"),!1;this.$_show(e,i,o,n)},i.prototype.$_createCalendar=function(){var t,e=this._element,i=this._btOptions;return this._date&&(t=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate())),!!this._jquery&&(this._jquery(e).datepicker&&this._jquery(e).datepicker(i).datepicker("setDate",t).on("changeDate",function(t){var e=t.date;e&&!this._editor.containsRange(e)||(e?(this._date=new Date(e),this._selected=!0):(this._date=void 0,this._selected=!0),this.fireEvent(Pu.CLOSE_UP,!0))}.bind(this)),!0)},i.prototype.$_show=function(e,i,o,n){var r=this._container.doc,s=St(r);this.focused=!1,this._selected=!1,this._containerElement.appendChild(this._element);var a=this._date;this._currDate=a?new Date(a):new Date;var l=xt.getBrowserSize(),u=xt.getClientRect(this._containerElement),c=xt.getClientRect(this._container._container),h=l.width,p=l.height,d=xt.getClientRect(this._element),f=s.pageXOffset||r.documentElement.scrollLeft,g=s.pageYOffset||r.documentElement.scrollTop;r.documentElement.scrollWidth>r.documentElement.clientWidth&&(p-=18),r.documentElement.scrollHeight>r.documentElement.clientHeight&&(h-=18),e+=c.left-u.left,i+=c.top-u.top,(xt.ieTen||xt.ieOld||xt.ieLeg)&&(e+=r.documentElement.scrollLeft,i+=r.documentElement.scrollTop),i+d.height>p+g&&n&&(i=i-n.height-d.height)<0&&(i=p-d.height-2),this._dropDownPosition!=t.DropDownPosition.EDITOR?e=Math.max(0,e+o-d.width):e+d.width>h+f&&(e=h-d.width),!xt.isMobile()&&this._viewGridInside&&n&&(i=n.bottom-u.top+2,(u.bottom<n.bottom+d.height||p+g<n.bottom+d.height)&&(i=n.top-d.height-u.top-2)),xt.isMobile()&&!xt.isTablet()||this._element.offsetParent||(e+=r.documentElement.offsetLeft,i+=r.documentElement.offsetTop),xt.move(this._element,Math.max(0,e),Math.max(0,i))},i.prototype.today=function(){return this.date=new Date},i.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},i.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&xt.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},i.prototype.firstDay=function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.date=t},i.prototype.lastDay=function(){var t=new Date(this._currDate);if(this._date){var e=t.getFullYear(),i=t.getMonth(),o=xt.month_days[xt.isLeapYear(e)?1:0][i];t.setDate(o)}return this.date=t},i}(Ee),Au=function(e){function i(i,o){var n=e.call(this,i,o)||this;return n._minDate=new Date(1970,0,1),n._maxDate=new Date(2100,11,31),n._dropDownPosition=t.DropDownPosition.BUTTON,n._dropDownWhenClick=!1,n._commitOnSelect=!1,n._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,n._closing=!1,n._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentNode}this.closeUp(!0)}}.bind(n),n}return n(i,e),i.prototype._doDispose=function(){this._globalMouseHandler=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"list",{get:function(){return this._list},set:function(t){this._list=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"btOptions",{get:function(){return this._btOptions},set:function(t){this._btOptions=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editFormat",{get:function(){return this.datetimeFormat},set:function(t){this.datetimeFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){this._dropDownWhenClick=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){this._commitOnSelect=t},enumerable:!1,configurable:!0}),i.prototype.dropDown=function(){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var t=wt(this._container),e=St(t),i=this._grid,o=this._list=new ku(i.container,this,this._btOptions),n=t.documentElement,r=xt.getBounds(this._container);return o.addListener(this),o.viewGridInside=this._options&&this._options.viewGridInside,o.dropDownPosition=this._dropDownPosition,o.minDate=this._minDate,o.maxDate=this._maxDate,this.$_setListDate(),this._isMobile&&!this._isTablet?(this._showMarquee(n),o.show(n,0,0,0,null),this._centerPopup(n,o._element)):o.show(t.documentElement,r.x+1,r.y+r.height,this._cellBounds.width,xt.getClientRect(this._editor)),!xt.isSlotMode()&&e.addEventListener("pointerdown",this._globalMouseHandler),!0}return!1},i.prototype.closeUp=function(t){if(this.listing){var e=St(wt(this._container));this._closing=!0;try{!xt.isSlotMode()&&e.removeEventListener("pointerdown",this._globalMouseHandler),this._closeMarquee(),t&&this._list.selected&&(this._isMobile&&!this._isTablet?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()))}finally{this.$_listDestroy(),this._closing=!1}return!0}return!1},i.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown()},i.prototype.dropDownList=function(){this.dropDown()},i.prototype.closeList=function(t){this.closeUp(t)},i.prototype.$_setListDate=function(){var t=this._editor.value;t&&this._mask&&(t=this._mask.getStripValue());var e=this._dateConverter.getDateNull(t);e&&(this._list.date=e)},i.prototype.selectDate=function(t){this.$_selectDate(t)},i.prototype.$_selectDate=function(t){if(t&&t!=this._date){if(this._date=t,this.containsRange(t)){var e=this._dateConverter.getText(this._date);this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged()}}else void 0===t&&(this._editor.value=this._mask?(this._mask.clearBuffer(),this._mask.writeBuffer(null)):"",this._doChanged())},i.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},Object.defineProperty(i.prototype,"listing",{get:function(){return!!this._list&&this._list.listing},enumerable:!1,configurable:!0}),i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._textReadOnly=!1,this._viewGridInside=!1,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._commitOnSelect=!1},i.prototype._isDateEditor=function(){return!0},i.prototype.setEditValue=function(t){e.prototype.setEditValue.call(this,t),this._date="string"==typeof t?this._dateConverter.getDateNull(t):t},i.prototype.getEditValue=function(i,o){var n=e.prototype.getEditValue.call(this,i),r=this._editField().dataType;return n&&o&&(r==t.ValueType.DATE||r==t.ValueType.DATETIME)&&(n=n.getTime(),n=this._minDate?Math.max(this._minDate.getTime(),n):n,(n=this._maxDate?Math.min(this._maxDate.getTime(),n):n)&&(n=new Date(n))),n},i.prototype._requestStart=function(t){return!!e.prototype._requestStart.call(this,t)&&(this._isMobile?t&&this.dropDown():!1!==t&&this.dropDown(),!0)},i.prototype._textHandler=function(){this._requestStart()},i.prototype._compositionstartHandler=function(){this._requestStart()},i.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=this._list,o=this.listing,n=o&&i.focused;switch(t.keyCode){case 13:if(this.closeUp(!0))return xt.stopEvent(t,!0),!this._sendToParent(t);break;case 27:if(this.closeUp(!1))return xt.stopEvent(t,!0),!0;break;case 36:if(n)return xt.stopEvent(t,!0),this.$_selectDate(i.firstDay()),!0;break;case 35:if(n)return xt.stopEvent(t,!0),this.$_selectDate(i.lastDay()),!0;break;case 37:case 39:if(n)return xt.stopEvent(t,!0),i&&i.keydown(t),!0;break;case 33:if(n)return xt.stopEvent(t,!0),this.$_selectDate(i.incMonth(-1)),!0;break;case 34:if(n)return xt.stopEvent(t,!0),this.$_selectDate(i.incMonth(1)),!0;break;case 40:if(t.altKey&&!o)return this._requestStart(),xt.stopEvent(t,!0),!0;if(o)return xt.stopEvent(t,!0),n?i.keydown(t):(i.focused=!0,this.$_setListDate()),!0;break;case 38:if(t.altKey&&o)return this.closeUp(!1),xt.stopEvent(t,!0),!0;if(o)return xt.stopEvent(t,!0),n?i.date.getDate()<=7?i.focused=!1:i.keydown(t):i.focused=!1,!0;break;case 84:(t.altKey||t.altKey&&t.ctrlKey)&&o&&(xt.stopEvent(t,!0),i.date=new Date,this.$_selectDate(i.date))}return e.prototype._keyDownHandler.call(this,t)}},i.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var i=this._list,o=String.fromCharCode(t.keyCode||t.charCode);if(o.toLocaleLowerCase()==this.todayChar){if(xt.stopEvent(t,!0),this.listing)return i.focused=!0,this.$_selectDate(i.today()),!0}else{if(xt.isFirefox&&(t.ctrlKey||0===t.charCode))return e.prototype._keyPressHandler.call(this,t);if(!this._regx.test(o))return void t.preventDefault()}e.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault()}},i.prototype.$_resetValue=function(t){if(void 0===t&&(t=!1),this.visible||t){var e=this._editor,i=e.selectionStart,o=e.selectionEnd,n=e.value?e.value.length:0;e.value=e.value.replace(Su,"");var r=e.value?e.value.length:0;this._isMobile||(r==n?e.setSelectionRange(i,o):e.setSelectionRange(o,o))}},i.prototype.setBounds=function(t,i,o,n,r){e.prototype.setBounds.call(this,t,i,o,n,r)},i.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},i.prototype._dispatchChange=function(){(this._isMobile||this.visible)&&(this.$_resetValue(this._isMobile),e.prototype._dispatchChange.call(this))},i.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),!this._isMobile&&this.setFocus()},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.$_listDestroy=function(){var t=this._list&&this._list._element.parentElement;this._list&&(this._list.$_destroy(),t.removeChild(this._list._element),this._list.dispose(),delete this._list)},i.INPUT_CSS="rg-btdate-editor",i}(xa),Lu=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._minDate=new Date(1970,0,1),o._maxDate=new Date(2100,11,31),o}return n(e,t),Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"native",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonCount",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.setAttribute("type","date"),i.tabIndex=this._isMobile?-1:0,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.initOptions=function(){t.prototype.initOptions.call(this)},e.prototype.hasButton=function(t,e){return null==t||t},e.prototype.setVisible=function(e,i){void 0===i&&(i=!1),t.prototype.setVisible.call(this,e,i),this.visible&&this._editor.click()},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e);var i=this._editor;i.min=this._minDate?this.$_toInputDate(this._minDate):"",i.max=this._maxDate?this.$_toInputDate(this._maxDate):""},e.prototype.setEditValue=function(t){this._date="string"==typeof t?this._dateConverter.getDateNull(t):t,this._editor.value=this.$_toInputDate(this._date)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled())return 40===e.keyCode&&e.altKey?(this._requestStart(),!0):t.prototype._keyDownHandler.call(this,e)},e.prototype.setBounds=function(e,i,o,n,r){t.prototype.setBounds.call(this,e,i,o,n,0),this._editor&&xt.isiOS&&(this._editor.style.minWidth=o+"px",this._editor.style.width=o+"px")},e.prototype.$_toInputDate=function(t){return t?e.Formatter.getText(t):""},e.INPUT_CSS="rg-ndate-editor",e.Formatter=Be.getFormatter("yyyy-MM-dd"),e}(ya),Mu=function(e){function i(i){var o=e.call(this,i)||this;return o._readOnly=!1,o._editable=!xt.isMobile(),o._checkable=!0,o._updatable=!0,o._appendable=!1,o._insertable=!1,o._deletable=!1,o._revertable=!1,o._erasable=!1,o._movable=!1,o._commitByCell=!1,o._editWhenFocused=!1,o._commitWhenNoEdit=!1,o._commitWhenExitLast=!1,o._commitWhenLeave=!1,o._crossWhenExitLast=!1,o._validateOnEdited=!0,o._validateOnExit=!1,o._hintOnError=!0,o._deleteRowsMessage=window.RG_CONST&&window.RG_CONST.DELETEROWSMESSAGE?window.RG_CONST.DELETEROWSMESSAGE:" () ??",o._invalidFormatMessage=window.RG_CONST&&window.RG_CONST.INVALIDFORMATMESSAGE?window.RG_CONST.INVALIDFORMATMESSAGE:"  .",o._showInvalidFormatMessage=!0,o._confirmWhenDelete=!0,o._editWhenClickFocused=!1,o._commitLevel=t.ValidationLevel.IGNORE,o._useTabKey=!0,o._useArrowKeys=!0,o._skipReadOnly=!1,o._skipReadOnlyCell=!1,o._verticalMoveStep=t.VerticalMoveStep.CELL,o._focusMoveStep=t.FocusMoveStep.CELL,o._enterToTab=!1,o._enterToNextRow=!1,o._enterToEdit=!1,o._maxLengthToNextCell=!1,o._forceInsert=!1,o._forceAppend=!1,o._checkDiff=!1,o._checkCellDiff=!1,o._strictDiff=!1,o._deletableWhenEdit=!0,o._showCommitError=!1,o._firstCellWhenInsert=!1,o._appendWhenInsertKey=!1,o._appendWhenExitLast=!1,o._showOnlyValidationMessage=!0,o._displayEmptyEditRow=!1,o._buttonClickWhenSpace=!1,o._exitGridWhenTab=t.ExitGridWhenTab.NONE,o._cancelWhenLastUndo=!1,o._exceptDataClickWhenButton=!1,o._removeValidateOnCommit=!1,o._validateOnlyEditColumn=!1,o._columnEditableFirst=!1,o._currentChangingFirat=!1,o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._refreshOwner(),this.$_invalidateEditor())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner(),this.$_invalidateEditor())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnEditableFirst",{get:function(){return this._columnEditableFirst},set:function(t){t!=this._columnEditableFirst&&(this._columnEditableFirst=t,this._refreshOwner(),this.$_invalidateEditor())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkable",{get:function(){return this._checkable},set:function(t){t!=this._checkable&&(this._checkable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"updatable",{get:function(){return this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"appendable",{get:function(){return this._appendable},set:function(t){t!=this._appendable&&(this._appendable=t,this.displayEmptyEditRow=this._displayEmptyEditRow,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"insertable",{get:function(){return this._insertable},set:function(t){t!=this._insertable&&(this._insertable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletable",{get:function(){return this._deletable},set:function(t){t!=this._deletable&&(this._deletable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"revertable",{get:function(){return this._revertable},set:function(t){t!=this._revertable&&(this._revertable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"erasable",{get:function(){return this._erasable},set:function(t){t!=this._erasable&&(this._erasable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitByCell",{get:function(){return this._commitByCell},set:function(t){t!=this._commitByCell&&(this._commitByCell=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(t){this._editWhenFocused=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitWhenNoEdit",{get:function(){return this._commitWhenNoEdit},set:function(t){this._commitWhenNoEdit=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitWhenExitLast",{get:function(){return this._commitWhenExitLast},set:function(t){this._commitWhenExitLast=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitWhenLeave",{get:function(){return this._commitWhenLeave},set:function(t){this._commitWhenLeave=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"crossWhenExitLast",{get:function(){return this._crossWhenExitLast},set:function(t){this._crossWhenExitLast=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validateOnEdited",{get:function(){return this._validateOnEdited},set:function(t){this._validateOnEdited=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validateOnExit",{get:function(){return this._validateOnExit},set:function(t){this._validateOnExit=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hintOnError",{get:function(){return this._hintOnError},set:function(t){this._hintOnError=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"removeValidateOnCommit",{get:function(){return this._removeValidateOnCommit},set:function(t){this._removeValidateOnCommit=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validateOnlyEditColumn",{get:function(){return this._validateOnlyEditColumn},set:function(t){this._validateOnlyEditColumn=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deleteRowsMessage",{get:function(){return this._deleteRowsMessage},set:function(t){this._deleteRowsMessage=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){this._invalidFormatMessage=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){this._showInvalidFormatMessage=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"confirmWhenDelete",{get:function(){return this._confirmWhenDelete},set:function(t){this._confirmWhenDelete=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editWhenClickFocused",{get:function(){return this._editWhenClickFocused},set:function(t){this._editWhenClickFocused=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitLevel",{get:function(){return this._commitLevel},set:function(t){this._commitLevel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useTabKey",{get:function(){return this._useTabKey},set:function(t){this._useTabKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useArrowKeys",{get:function(){return this._useArrowKeys},set:function(t){this._useArrowKeys=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"skipReadOnly",{get:function(){return this._skipReadOnly},set:function(t){this._skipReadOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"skipReadOnlyCell",{get:function(){return this._skipReadOnlyCell},set:function(t){this._skipReadOnlyCell=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"verticalMoveStep",{get:function(){return this._verticalMoveStep},set:function(t){this._verticalMoveStep=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusMoveStep",{get:function(){return this._focusMoveStep},set:function(t){this._focusMoveStep=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterToTab",{get:function(){return this._enterToTab},set:function(t){this._enterToTab=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterToNextRow",{get:function(){return this._enterToNextRow},set:function(t){this._enterToNextRow=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterToEdit",{get:function(){return this._enterToEdit},set:function(t){this._enterToEdit=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxLengthToNextCell",{get:function(){return this._maxLengthToNextCell},set:function(t){this._maxLengthToNextCell=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"forceInsert",{get:function(){return this._forceInsert},set:function(t){this._forceInsert=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"forceAppend",{get:function(){return this._forceAppend},set:function(t){this._forceAppend=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletableWhenEdit",{get:function(){return this._deletableWhenEdit},set:function(t){this._deletableWhenEdit=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showCommitError",{get:function(){return this._showCommitError},set:function(t){this._showCommitError=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstCellWhenInsert",{get:function(){return this._firstCellWhenInsert},set:function(t){this._firstCellWhenInsert=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"appendWhenInsertKey",{get:function(){return this._appendWhenInsertKey},set:function(t){this._appendWhenInsertKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"appendWhenExitLast",{get:function(){return this._appendWhenExitLast},set:function(t){this._appendWhenExitLast=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showOnlyValidationMessage",{get:function(){return this._showOnlyValidationMessage},set:function(t){this._showOnlyValidationMessage=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayEmptyEditRow",{get:function(){return this._displayEmptyEditRow},set:function(t){var e=this.grid;this._displayEmptyEditRow=t,this._displayEmptyEditRow&&this._appendable?e.itemSource.appendDummy():e.itemSource.cancelDummy(),this._refreshOwner()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonClickWhenSpace",{get:function(){return this._buttonClickWhenSpace},set:function(t){this._buttonClickWhenSpace=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exitGridWhenTab",{get:function(){return this._exitGridWhenTab},set:function(t){this._exitGridWhenTab=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exceptDataClickWhenButton",{get:function(){return this._exceptDataClickWhenButton},set:function(t){this._exceptDataClickWhenButton=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollOnEditing",{get:function(){return this._scrollOnEditing},set:function(t){this._scrollOnEditing=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentChangingFirst",{get:function(){return this._currentChangingFirat},set:function(t){this._currentChangingFirat=t},enumerable:!1,configurable:!0}),i.prototype.isWritable=function(){return this._editable&&!this._readOnly},i.prototype.canUpdate=function(t){return!this._readOnly&&(t||this._updatable)},i.prototype.canInsert=function(){return!this._readOnly&&this._insertable},i.prototype.canAppend=function(){return!this._readOnly&&this._appendable},i.prototype.canDelete=function(){return!this._readOnly&&this._deletable},i.prototype.$_invalidateEditor=function(){this.grid&&this.grid.requestPrepareEditor()},i}(Ba),Fu=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._doDispose=function(){this._cell=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"value",{set:function(t){this._value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cell",{set:function(t){this._cell=t},enumerable:!1,configurable:!0}),e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._value;case e.ID_ROW:return this._cell.itemIndex+1;case e.ID_COLUMN_HEADER:var i=this._cell&&this._cell.column;return i&&i.header&&i.header.text?i.header.text:i.displayText}throw new Lt("Invalid identifier key: "+t)},e.ID_VALUE=0,e.ID_ROW=1,e.ID_COLUMN_HEADER=2,e.IDENTS={value:e.ID_VALUE,row:e.ID_ROW,dcount:e.ID_COLUMN_HEADER},e}(jt),Nu=function(t){function e(e){var i=t.call(this,e)||this;return i._yearDisplayFormat=window.RG_CONST&&window.RG_CONST.YEARDISPLAYFORMAT?window.RG_CONST.YEARDISPLAYFORMAT:"{Y}",i._monthDisplayFormat=window.RG_CONST&&window.RG_CONST.MONTHDISPLAYFORMAT?window.RG_CONST.MONTHDISPLAYFORMAT:"{M}",i._months=null,i._weekDays=null,i._viewGridInside=!1,i._holidays=null,i._titleExprRuntime=new Fu,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weekDays",{get:function(){return this._weekDays},set:function(t){t!=this._weekDays&&(this._weekDays=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleStatement",{get:function(){return this._titleStatement},set:function(t){t!=this._titleStatement&&(this._titleStatement=t,t?this._titleExprStatement?this._titleExprStatement.source=t:this._titleExprStatement=new Vo(t):this._titleExprStatement=null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&(this._holidays=t,t?(this._holidayCollection=this._holidayCollection||new Tu,this._holidayCollection.load(t)):this._holidayCollection&&this._holidayCollection.clear(),this._changed())},enumerable:!1,configurable:!0}),e}(Ba),Vu=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"singleMode",{get:function(){return this._singleMode},set:function(t){this._singleMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){this._datetimeFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){this._booleanFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"copyDisplayText",{get:function(){return this._copyDisplayText},set:function(t){this._copyDisplayText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"includeHeaderText",{get:function(){return this._includeHeaderText},set:function(t){this._includeHeaderText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"copyTextCallback",{get:function(){return this._copyTextCallback},set:function(t){this._copyTextCallback=t},enumerable:!1,configurable:!0}),e}(Ba),Bu=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i._startEdit=!0,i._commitEdit=!0,i._enableAppend=!0,i._numberCharsOfCols={},i._numberSeparatorOfCols={},i._stopOnError=!0,i._throwValidationError=!0,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"singleMode",{get:function(){return this._singleMode},set:function(t){this._singleMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startEdit",{get:function(){return this._startEdit},set:function(t){this._startEdit=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commitEdit",{get:function(){return this._commitEdit},set:function(t){this._commitEdit=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableAppend",{get:function(){return this._enableAppend},set:function(t){this._enableAppend=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"forceAppend",{get:function(){return this._forceAppend},set:function(t){this._forceAppend=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillFieldDefaults",{get:function(){return this._fillFieldDefaults},set:function(t){this._fillFieldDefaults=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillColumnDefaults",{get:function(){return this._fillColumnDefaults},set:function(t){this._fillColumnDefaults=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"forceRowValidation",{get:function(){return this._forceRowValidation},set:function(t){this._forceRowValidation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"forceColumnValidation",{get:function(){return this._forceColumnValidation},set:function(t){this._forceColumnValidation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormats",{get:function(){return this._datetimeFormats},set:function(t){if(t!==this._datetimeFormats)if(this._datetimeFormats=t&&t.concat(),t){this._dateReaders=[];for(var e=0;e<this._datetimeFormats.length;e++)this._dateReaders.push(new Pt(this._datetimeFormats[e]))}else this._dateReaders=null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateReaders",{get:function(){return this._dateReaders},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolReader=t&&new It(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boolReader",{get:function(){return this._boolReader},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberChars",{get:function(){return this._numberChars},set:function(t){if(t!==this._numberChars)if(this._numberChars=t,t&&t.length>0){for(var e="[",i=0;i<t.length;i++){var o=t[i];e+="\\"==o?"\\"+o:o}e+="]",this._numberCharExp=new RegExp(e,"g")}else this._numberCharExp=null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberSeparator",{get:function(){return this._numberSeparator},set:function(t){this._numberSeparator=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberCharsOfCols",{get:function(){return this._numberCharsOfCols},set:function(t){if(t!==this._numberCharsOfCols&&(this._numberCharsOfCols=t,this._numberCharExpOfCols={},t))for(var e in t){var i=t[e];if(i instanceof Array&&i.length>0){for(var o="[",n=0,r=i.length;n<r;n++){var s=i[n];o+="\\"==s?"\\"+s:s}o+="]",this._numberCharExpOfCols[e]=new RegExp(o,"g")}else this._numberCharExpOfCols[e]=null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberCharExp",{get:function(){return this._numberCharExp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberSeparatorOfCols",{get:function(){return this._numberSeparatorOfCols},set:function(t){this._numberSeparatorOfCols=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectionBase",{get:function(){return this._selectionBase},set:function(t){this._selectionBase=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectBlockPaste",{get:function(){return this._selectBlockPaste},set:function(t){this._selectBlockPaste=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stopOnError",{get:function(){return this._stopOnError},set:function(t){this._stopOnError=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noEditEvent",{get:function(){return this._noEditEvent},set:function(t){t!=this._noEditEvent&&(this._noEditEvent=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noDataEvent",{get:function(){return this._noDataEvent},set:function(t){this._noDataEvent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventEachRow",{get:function(){return this._eventEachRow},set:function(t){this._eventEachRow=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkReadOnly",{get:function(){return this._checkReadOnly},set:function(t){this._checkReadOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkDomainOnly",{get:function(){return this._checkDomainOnly},set:function(t){this._checkDomainOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"convertLookupLabel",{get:function(){return this._convertLookupLabel},set:function(t){this._convertLookupLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applyNumberFormat",{get:function(){return this._applyNumberFormat},set:function(t){this._applyNumberFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applyEditMask",{get:function(){return this._applyEditMask},set:function(t){this._applyEditMask=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applyMaxLength",{get:function(){return this._applyMaxLength},set:function(t){this._applyMaxLength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applyInputChars",{get:function(){return this._applyInputChars},set:function(t){this._applyInputChars=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"throwValidationError",{get:function(){return this._throwValidationError},set:function(t){this._throwValidationError=t},enumerable:!1,configurable:!0}),e.prototype.numberCharExpOfCol=function(t){return t&&this._numberCharExpOfCols&&this._numberCharExpOfCols[t]?this._numberCharExpOfCols[t]:this._numberCharExp},e.prototype.numberSeparatorOfCol=function(t){return t&&this._numberSeparatorOfCols&&this._numberSeparatorOfCols[t]?this._numberSeparatorOfCols[t]:this._numberSeparator},e}(Ba),Gu=function(t){function e(e){var i=t.call(this,e)||this;return i._longTapDuration=500,i._doubleTapInterval=500,i._tapThreshold=10,i._showEditCommander=!1,i._showTooltip=!1,i._scrollPropagate=!0,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"longTapDuration",{get:function(){return this._longTapDuration},set:function(t){t!=this._longTapDuration&&(this._longTapDuration=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doubleTapInterval",{get:function(){return this._doubleTapInterval},set:function(t){t!=this._doubleTapInterval&&(this._doubleTapInterval=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tapThreshold",{get:function(){return this._tapThreshold},set:function(t){t!=this._tapThreshold&&(this._tapThreshold=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showEditCommander",{get:function(){return this._showEditCommander},set:function(t){t!=this._showEditCommander&&(this._showEditCommander=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollOnEditing",{get:function(){return this.grid.editOptions.scrollOnEditing},set:function(t){this.grid.editOptions.scrollOnEditing=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollPropagate",{get:function(){return this._scrollPropagate},set:function(t){this._scrollPropagate=t},enumerable:!1,configurable:!0}),e}(Ba),ju=function(t){function e(e){var i=t.call(this)||this;return i._grid=e,i}return n(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),e.prototype.canFocus=function(){return!0},e}(Wl),Hu=function(t){function e(e,i){var o=t.call(this,e)||this;return o._style=i,o}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"style",{get:function(){return this._style},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"manager",{get:function(){return this.grid.selections},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(function(t){function e(e){var i=t.call(this,e.grid)||this;return i._index=e,i}return n(e,t),e.prototype._doDispose=function(){this._index.dispose(),this._index=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),e}(ju)),$u=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._doDispose=function(){this._layout=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,i,o){return this._layout=t,this._x=e,this._y=i,this._offset=o,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"col-resize"},enumerable:!1,configurable:!0}),e}(ju),Wu=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._doDispose=function(){this._layout=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(t){this._offset=t},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,i,o){return this._layout=zr.getSource(t),this._x=e,this._y=i,null!=o&&(this._offset=o),this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"default"},enumerable:!1,configurable:!0}),e}(ju),Uu=function(t){function e(e){var i=t.call(this,e)||this;return i._itemIndex=-1,i._variable=!1,i._rowTop=0,i._offset=0,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variable",{get:function(){return this._variable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowTop",{get:function(){return this._rowTop},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,i,o){return this._itemIndex=t,this._variable=e,this._rowTop=i,this._offset=o,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"row-resize"},enumerable:!1,configurable:!0}),e.prototype.canFocus=function(){return!1},e}(ju),zu=function(t){function e(e){var i=t.call(this,e)||this;return i._offset=0,i._top=0,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"top",{get:function(){return this._top},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){return this._top=t,this._offset=e,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"row-resize"},enumerable:!1,configurable:!0}),e}(ju),Ku=function(e){function i(t){var i=e.call(this,t)||this;return i._itemIndex=-1,i._offset=0,i._layout=null,i}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),i.prototype.init=function(e,i){return this._selStyle=e&&e.style,this._selStyle&&this._selStyle!=t.SelectionStyle.COLUMNS&&this._selStyle!=t.SelectionStyle.SINGLE_COLUMN?(this._itemIndex=e.getBounds().top,this._layout=e.startLayout,this._offset=i-this._itemIndex):(this._itemIndex=i,this._offset=0,this._layout=null),this},Object.defineProperty(i.prototype,"cursor",{get:function(){return this.grid.dataDropOptions.cursor},enumerable:!1,configurable:!0}),i.prototype.canFocus=function(){return this._selStyle==t.SelectionStyle.COLUMNS||this._selStyle==t.SelectionStyle.SINGLE_COLUMN},i}(ju),Yu=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,e&&i.assignFrom(e),i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!1,configurable:!0}),e.prototype.assignFrom=function(e){"string"==typeof e?(this._message=e,this._message&&(this._visible=!0)):"boolean"==typeof e?this._visible=e:e&&t.prototype.assignFrom.call(this,e)},e}(kt),qu=function(t){function e(e){var i=t.call(this)||this;return i._minWidth=0,i._maxWidth=0,i._dropDownCount=8,i._showing=!1,i.$_touchendHandler=null,i._container=e,i._element=i.$_createElement(e.doc),i.$_touchendHandler=function(t){t.preventDefault(),this.hide()}.bind(i),xt.isMobile()&&i._element.addEventListener("touchend",i.$_touchendHandler,!1),i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this),this._element&&this._element.removeEventListener("touchend",this.$_touchendHandler),xt.detach(this._element)},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){this._dropDownCount=t},enumerable:!1,configurable:!0}),e.prototype.show=function(t,e,i,o,n){this._showing=!0;try{this.$_show(t,e,i,o,n)}finally{this._showing=!1}},e.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},e.prototype.$_createElement=function(t){var e=t.createElement("div");return e.style.pointerEvents="none",e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e),this._span=t.createElement("span"),e.appendChild(this._span),this.$_disableSelection(this._span),e},e.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},e.prototype.$_show=function(t,e,i,o,n){var r=this._container.gridView.displayOptions.baseZindex+4,s=this._element,a=t.message;if(s&&a){this._span.innerHTML=a.replace(/\n/g,"<br>"),xt.setClassName(s,"rg-tooltip");var l=s.style;l.position="absolute",l.left=e+"px",l.top=i+"px",l.overflow="hidden",l.zIndex=String(r),this._container._container.appendChild(s);var u=s.getBoundingClientRect(),c=this._container._container.getBoundingClientRect();l.left=u.right>c.right?Math.max(c.right-u.width-c.left-2,0)+"px":s.style.left,u.bottom>c.bottom&&(s.style.top=n?Math.max(0,i-(u.bottom-c.bottom))+"px":Math.max(i-u.height-o,0)+"px"),l.visibility="visible"}},e}(kt),Xu=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._pos=new Ks,i._container=e.container,i}return n(e,t),e.prototype._doDispose=function(){this._container=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._active},enumerable:!1,configurable:!0}),e.prototype.show=function(t,e,i,o,n){if(!this._active&&(this.close(),(t=t instanceof Yu?t:t?new Yu(t):null)&&t.visible)){this._tipView||(this._tipView=new qu(this._container)),this._tipView.show(t,e,i,o,n);var r=this._container.gridView;return r&&this._pos.set(r.mouseX,r.mouseY),this._active=!0,!0}return!1},e.prototype.close=function(t,e){if(this._active&&void 0!==t){var i=this._pos;if(Math.abs(i.x-t)<4&&Math.abs(i.y-e)<4)return!1}return this._timer&&clearTimeout(this._timer),!!this._active&&(this._tipView&&this._tipView.hide(),this._active=!1,!0)},e}(kt);!function(t){function e(e){var i=t.call(this)||this;return i._type=e,i}n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0})}(Sn);var Qu,Ju=function(t){function e(e,i){var o=t.call(this)||this;return o._inputFocusable=!1,e&&"function"==typeof e.render?(o._impl=e,o._impl.type=i,o.assignFrom(o._impl)):o._impl=null,o._itemClickable=!0,o}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._impl&&this._impl.type},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){this._impl&&this._impl.initContent&&this._impl.initContent.call(this,t)},e.prototype._doClearContent=function(t){this._impl&&this._impl.clearContent&&this._impl.clearContent.call(this,t)},e.prototype._doRenderCell=function(t,e,i,o,n){var r={};r.focused=i.focused,this._impl&&this._impl.render&&this._impl.render.call(this,t.handler,e,o,n,r)},e.prototype.preventDefaultEditClick=function(e){return this._impl&&this._impl.preventEditClick?this._impl.preventEditClick.call(this,e):t.prototype.preventDefaultEditClick.call(this,e)},e.prototype._doEditClick=function(e,i,o){return this._impl&&this._impl.editClick?this._impl.editClick.call(this,e,i,o):t.prototype._doEditClick.call(this,e,i,o)},e.prototype.canEditClickAt=function(e){return this._impl&&this._impl.canEditClickAt?this._impl.canEditClickAt.call(this,e):t.prototype.canEditClickAt.call(this,e)},e.prototype.preventDefaultClick=function(e){return this._impl&&this._impl.preventClick?this._impl.preventClick.call(this,e):t.prototype.preventDefaultClick.call(this,e)},e.prototype._doClick=function(e,i){return this._impl&&this._impl.click?this._impl.click.call(this,i):t.prototype._doClick.call(this,e,i)},e.prototype._doEditKey=function(e,i,o){return this._impl&&this._impl.editKey?this._impl.editKey.call(this,i,o):t.prototype._doEditKey.call(this,e,i,o)},e.prototype.canClick=function(e){return this._impl&&this._impl.canClick?this._impl.canClick.call(this,e):t.prototype.canClick.call(this,e)},e.prototype.canEdit=function(){return this._impl&&this._impl.canEdit?this._impl.canEdit.call(this):t.prototype.canEdit.call(this)},e.prototype.canEditKey=function(e){return this._impl&&this._impl.canEditKey?this._impl.canEditKey.call(this,e):t.prototype.canEditKey.call(this,e)},e}(Sn),Zu=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r._row=e,r._field=i,r._value=o,r._column=n,r._oldValue=xt.deepCopy(e.getData(i)),r}return n(e,t),e.prototype.undo=function(){this._row.setData(this._field,this._oldValue),this.$_focusCell()},e.prototype.redo=function(){this._row.setData(this._field,this._value),this.$_focusCell()},e.prototype.$_focusCell=function(){var t=this._column.grid,e=t.focusedIndex.clone();e.layout=this._column.layout,t.setFocusedIndex(e),t.makeCellVisible(e)},e}(ni),tc=function(e){function i(t){var i=e.call(this)||this;return i._editIndex=new hs,i._starting=!1,i._needPrepare=!1,i._modified=!1,i._commiting=!1,i._canceling=!1,i._resetting=!1,i._dirty=!1,i._editable=!1,i._readOnly=!1,i._resetFocused=!1,i._grid=t,i._defaultEditor=t.delegate.getDefaultCellEditor(),i._defaultEditor&&i._defaultEditor.setController(i),i._defaultEditor&&i._internalHideEditor(i._defaultEditor),i}return n(i,e),i.prototype._doDispose=function(){this._grid=null,this._editIndex&&this._editIndex.dispose(),this._editIndex=null,this._editor&&this._editor.dispose(),this._editor=null,this._defaultEditor&&this._defaultEditor.dispose(),this._defaultEditor=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},enumerable:!1,configurable:!0}),i.prototype.onEditorStart=function(t){if(!t.visible&&!this._commiting&&!this._canceling)return this._activateEditor(!1,!1)},i.prototype.onEditorKeyDown=function(t,e){var i=e.ctrlKey;return this._editor&&(this._editor.textReadOnly||i||e.altKey||!this._isEditKey(e.keyCode)?this._editor.textReadOnly?this._editor._editor.readOnly=this._editor.textReadOnly:229==e.keyCode&&this._editor.setReadOnly(this._readOnly):this._editor.setReadOnly(this._readOnly)),this._grid.activeTool.keyDown(e)},i.prototype.onEditorKeyPress=function(t,e){return this._grid.activeTool.keyPress(e)},i.prototype.onEditorKeyUp=function(t,e){return this._grid.activeTool.keyUp(e)},i.prototype.onEditorChange=function(t){if(this._modified||(this._modified=!0,this._grid._editorStarted(t,this._editIndex)),this.editing){this._grid.makeCellVisible(this._editIndex);var e=t.getEditValue(!1,!1);e=e===pa.Unselected?t.getEditText():e,this._grid._editorChange(t,this._editIndex,e)}},i.prototype.onEditorSearch=function(t,e){this._grid._editorSearch(this._editor,this._editIndex,e)},i.prototype.onSearchCellButtonClick=function(t,e){return this._grid._searchCellButtonClick(this._editor,this._editIndex,e)},i.prototype.onEditorCommit=function(t){return this.commitEditor(!0,!1,!0,!1)},Object.defineProperty(i.prototype,"editIndex",{get:function(){return this._editIndex.clone()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editing",{get:function(){return this._editor&&this._editor.editing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editValue",{get:function(){return this._editor&&this._editor.value},enumerable:!1,configurable:!0}),i.prototype.setFocus=function(t,e){var i;if(e&&(!this._editor||e!==this._editor.editor)){var o=Ct(e),n=this._grid,r=void 0,s=null===(i=this._editor)||void 0===i?void 0:i.editor;if((e instanceof o.HTMLInputElement||e instanceof o.HTMLSelectElement)&&(r=n.getTableCell(e))){var a=n.getCellType(r),l=n.getTableView(r),u=l&&l.tableCellByCell&&l.tableCellByCell(r);if("data"===a){var c=this._grid.focusedIndex.clone(),h=this._grid.getBodyCellAt(c,!0),p=h&&h.renderer2;if((p instanceof Hn||p instanceof Ju)&&p.inputFocusable)return;s&&(s.tabIndex=-1)}else if("inlineFilter"===a){if(n.isItemEditing()&&n.filterPanel.beforeCommit&&n.commit(!1),!n.isEditing())return s&&(s.tabIndex=0),void n.makeColumnVisible(u.layout&&u.layout.firstColumn)}else if(xt.included(a,"header","layoutHeader","footer","summary")&&!u.isClickableElt(e)&&xt.isFocusableTemplate(r,e))return}}this.$_focusToEditor(t,e)},i.prototype.resetEditor=function(t){if(this.editing){if(this._grid.isValid(this._editIndex)){if(this._resetBounds(),t&&this.editing){var e=this.getData(this._editIndex);this._resetting=!0;try{this._editor.setEditValue(e),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor();return!0}},i.prototype.invalidateEditor=function(){this._dirty=!0},i.prototype.closeList=function(t){this._editor&&this._editor.closeList(t)},i.prototype.focusedIndexChanging=function(){return!this.editing||(this.closeList(!0),this.commitEditor(!0,!1,!0,!1))},i.prototype.focusedIndexChanged=function(t,e,i){this._hideEditor(),this._grid.isValid(e)&&(i?this._prepareEditor(e):this._needPrepare=!0)},i.prototype.prepareEditor=function(t){this._needPrepare&&(this._needPrepare=!1,this._grid.isValid(t)&&this._prepareEditor(t))},i.prototype.requestPrepareEditor=function(){this._needPrepare=!0},i.prototype.showEditor=function(t,e){var i=this._grid;if(i&&i.isValid(t)&&t.item.canEdit()){if(this._editor&&this._editor.editing)return i.makeCellVisible(t),!0;if(this._editor&&!this._editor.editing&&(!this._showEditorTimer&&this._prepareEditor(t),i.makeCellVisible(t),this._activateEditor(!1,!0,e)))return!0}},i.prototype.showList=function(t){var e=this._grid,i=this._editor;if(i&&i.editing&&(e.makeCellVisible(t),this.cancelEditor(!0)),e&&e.isValid(t)&&(this._prepareEditor(t),e.makeCellVisible(t),i&&this._editable&&!i.editing))return i.dropDownList(!0),!0},i.prototype.caretToLast=function(){this._editor&&this._editor.caretToLast()},i.prototype.hideEditor=function(){if(this.editing){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}},i.prototype.commitEditor=function(t,e,i,o){if(!this.editing||this._commiting)return!0;var n=this._editor;if(!n)return!1;var r,s,a=this._grid,l=a.editOptions,u=this._editIndex,c=u.dataColumn,h=!0,p=n._mask;this._commiting=!0;try{if(n.commit(),(this._modified||n.isEdited())&&c&&c.dataIndex>=0)try{try{if((r=p&&!p.checkValid()?pa.InvalidFormat:n.getEditValue(!0,!0))===pa.InvalidFormat)h=!1,l.showInvalidFormatMessage&&p&&p.showInvalidFormatMessage&&alert(p&&p.invalidFormatMessage||l.invalidFormatMessage);else if(r===pa.Unselected)this._modified=!1,h=!0;else{var d={text:n.getEditText(),value:r};this._grid.getEditValue(n,u,d),r=d.value,h=o||this._grid.editorCommit(u,this._getData(u),r)}}catch(t){h=!1}this._grid.isItemEditing()?h&&r!==pa.Unselected&&(this._setData(u,r),this._grid.isItemEditing(u.item)&&(r=this._getData(u),this._grid.validateCellCommit(u,r)),this._modified=!1):this._modified=!1}catch(t){s=t,h=!1}if(this._resetting=!0,h&&t)try{this._internalHideEditor(n),this._prepareEditor(u,i),n.isEdited()||this._grid.activeTool.resetFocused()}finally{this._resetting=!1}if(s){if(e)throw s;l.showCommitError&&alert(s.message||s)}}finally{this._commiting=!1}if(h&&a.isCellEditing()){var f=a.itemSource,g=f.editingItem.invalidFields,y=a.validationManager.getError(u);if(y)return g.push(c.dataIndex),l.showCommitError&&alert(y.userMessage||y.message||y),!1;if(g.indexOf(c.dataIndex)>=0&&g.splice(g.indexOf(c.dataIndex),1),a.validationManager.clearInvalidCell(u),g.length>0)return!0;var _=a.canMergeEditing(a.getBodyCellAt(u,!0));if(!f.commit(_))return f.cancel(),!0;a.validationManager.cloneError(-1,u.dataId);var m=hs.temp(a,u.itemIndex,c);if(_&&r!==pa.Unselected){var v=c.layout.merges.getRoom(u),b={},C={};C[c.fieldName]=r;for(var w=v.head;w<=v.tail;w++){var S=a.getItem(w);m.itemIndex=S.index,S.isDataRow&&(b[S.dataRow]=C),a.validationManager.clearInvalidCell(m)}f.updateRows2(b)}}return h},i.prototype.cancelEditor=function(t){if(this.editing){this._canceling=!0;try{try{this._modified=!1,this._grid.editorCancel(this._editor,this._editIndex)}catch(t){throw t}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}if(this._grid.editOptions.commitByCell){var e=this._grid.itemSource;e.isUpdating&&e.cancel()}}},i.prototype.fillSearchItems=function(t,e,i,o){this.editing&&this._editIndex.column===t&&this._editor instanceof Pa&&this._editor.fillItems(e,i,o)},i.prototype.buttonClicked=function(t,e){var i=this._editor,o=this._grid,n=o.getBodyCellAt(t,!1),r=t.layout.getDataColumn();i&&hs.areEquals(this._editIndex,t)&&i.hasButton(o.displayOptions.showNativeEditButton,n.editor||r.editor)&&i.buttonClicked(this._editIndex,e)},i.prototype.buttonDown=function(t,e){this._editor&&this._editor.buttonDown(t,e)},i.prototype.buttonUp=function(t,e){this._editor&&this._editor.buttonUp(t,e)},i.prototype.getData=function(t){return this._getData(t)},i.prototype.setEditValue=function(t,e){this._editor&&this._editor.setCellEditValue(t,e)},i.prototype.currentEditor=function(){return this._editor},i.prototype._internalHideEditor=function(t){this.closeList(!1),t.setVisible(!1,!1),t.endEdit(),!this._grid._loading&&this._grid._fireHideEditor(t.editIndex)},i.prototype.$_hideEdit=function(t,e){e&&(e.setEditIndex(t),e.setVisible(!1),this.$_focusToEditor())},i.prototype.$_getCellEditor=function(t){var e,i=this._grid,o=i.getBodyCellAt(t);if(!(e=o&&o.editor)){var n=t.valueColumn;n&&(e=n.editor)}var r=i.delegate.getCellEditor(pa.getEditorType(e));return r&&(r.initOptions(),e&&r.applyOptions(e),r.setController(this)),r},i.prototype.resetEditable=function(e){var i=this._editor;if(!i)return!1;var o=this._grid;i.setReadOnly(!1);var n=o.editorOptions,r=e.valueColumn,s=e.item,a=o.canEditAt(e);if(n._titleExprStatement&&this._editor.setEditorTitle(e),!a)return this._editable=!1,this.$_hideEdit(e,this._editor),!1;var l=!o.canWriteAt(e);if(!l){var u=s.dataSource,c=u?u.getField(e.dataField):null;l=!c||c.dataType==t.ValueType.OBJECT&&null==(r.objectKey||c.objectKey)}return this._readOnly=l,this._editor.setReadOnly(this._readOnly),this._editor.setEditIndex(e),this._editable=!0,!0},i.prototype.remainFocusing=function(t){this._resetFocused=t},i.prototype._prepareEditor=function(t,e){var i=this;void 0===e&&(e=!0);var o=this._grid,n=o.editOptions;if(this._dirty=!1,this._grid.isValid(t)&&t.item.canEdit()&&(this._hideEditor(e),this._editor=this.$_getCellEditor(t),this._editor)){this._editIndex.assign(t);var r,s=this._getData(t);this.resetEditable(t)?(this._editor.prepare(),this._editor.setEditValue(s),this._editor.selectAll(),n.editWhenFocused&&!this._editor.editing?(this._showEditorTimer&&clearTimeout(this._showEditorTimer),this._canceling||this._resetting||(this._showEditorTimer=(r=this._resetFocused,setTimeout((function(){!i._editor.editing&&!r&&o.showEditor(null,!1,i._editor.dropDownWhenClick),i.remainFocusing(!1),i._showEditorTimer=null}),100)))):this._editor.setVisible(!1),e&&this.$_focusToEditor()):this._editor&&(this._editor.editor.value=this._editor._valToStr(s))}},i.prototype._hideEditor=function(t){if(void 0===t&&(t=!0),this._editor)try{this._editor.setVisible(!1)}finally{this._editor.unprepare(),this._editor.endEdit(),this._editor=null,this._editable=!1,t&&this.$_focusToEditor()}},i.prototype._initEditor=function(t,e,i){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex));var o=this._editor;o&&(o.endEdit(),this._resetBounds(),o.setVisible(!0,!0),o.beginEdit(t,e),t&&o.clear(),e&&o.selectAll(),i&&o.dropDownList(!1),this.$_focusToEditor(!0))},i.prototype.$_setEditorAttrs=function(t){var e=this._editor;if(e)for(var i in t)"callback"!=i&&e._editor.setAttribute(i,t[i])},i.prototype._editorActivated=function(t){this._grid.editorActivated(t)},i.prototype._activateEditor=function(t,e,i){void 0===i&&(i=!1);var o=this._grid,n=this._editor,r=this._editIndex,s={},a={};if(this._editable&&n&&!n.editing&&o.$_canShowEditor(r,s,a)){s.type&&(n=this._editor=o.delegate.getCellEditor(pa.getEditorType(s.type))||n),xt.isEmpty(s)||(n.applyOptions(s),n.setEditIndex(r));var l=n._editor;return n.textReadOnly?n.textReadOnly&&l&&(l.readOnly=n.textReadOnly):n.setReadOnly(this._readOnly),this.$_setEditorAttrs(a),this._initEditor(t,e,i),wt(l).activeElement!==l&&(!xt.isMobile()||!n.hasList)&&l.focus(),this._modified=!1,this._editorActivated(this._editor),a&&"function"==typeof a.callback&&a.callback(),!0}return!1},i.prototype._resetBounds=function(){if(this._editor){var t=this._grid.getEditCellBounds(this._editor,this._editIndex),e=this._grid.getEditBounds(this._editor,this._editIndex).width;xt.isMobile()&&xt.isiOS&&(e-=3),t.x--,t.y--,t.width++,t.height++,xt.isMobile()&&(t.y-=1,t.height+=2),this._editor.setBounds(t.x,t.y,t.width,t.height,e),t=this._grid.getEditCellBounds(this._editor,this._editIndex),this._editor.setCellBounds(t.x,t.y,t.width,t.height)}},i.prototype.$_focusToEditor=function(t,e){var i=this._grid;if(t||i.$_editFocused){var o=this._editor||this._defaultEditor;i.$_showFocusCell=i.$_showFocusCell||e&&o&&e!==o._editor,i.container._setFocusAndScroll(o),this.editing||this._editor&&this._editor.selectAll()}},i.prototype._getData=function(t){var e=t.dataColumn,i=t.item;if(e&&i&&i.isDataRow){var o=e.dataIndex;if(o>=0)return i.getData(o)}},i.prototype._setData=function(t,e){var i=t.item;if(i){var o=t.dataColumn.dataIndex;o>=0&&(this._grid.undoable?this._grid.execute(new Zu(t.item,o,e,t.column)):i.setData(o,e))}},i.prototype._isEditKey=function(t){return 8==t||t>=46&&t<=90||t>=96&&t<=111||t>=186&&t<=222||13==t&&this._grid.editOptions.enterToEdit},i}(kt),ec=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n._col=-1,n._colChanged=!1,n}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getCellIndex=function(t){return t.parentElement[b]},e.prototype._createDom=function(){return null},e.prototype._prepareContent=function(t,e){var i=wt(t).createElement("div");return this._prepareCellContent(i,t),i},e.prototype._clearCellContent=function(t){var e=t.firstElementChild;e&&xt.detach(e)},e.prototype._prepareCellContent=function(t,e){},e.prototype._updateCellContent=function(t,e,i,o){i[this._textProp]=e.text},e.prototype._doRender=function(t){},e.prototype.$_setCol=function(t){(this._colChanged=t!=this._col)&&(this._col=t)},e.prototype._layoutCell=function(t,e,i){if(this._colChanged){i.removeAttribute("rowspan"),i.style.removeProperty("display");var o=i.firstElementChild;this._clearCellContent(o),this._prepareCellContent(o,i)}},e.prototype._getTableCell=function(t){return this.parent._tbody.children[t].children[this._col]},e.prototype.$_getCellSelector=function(t,e){var i=this.model.cellStyleCallback,o=this.grid,n=t.parentElement[b],r=o.getItem(n),s=o.getCellType(t);if(i){var a=i(this.grid.handler,s,null==r?void 0:r.index);return a?" "+a:""}return""},e}(Wa),ic=function(e){function i(t,i){return e.call(this,t,i,"rowIndicatorView")||this}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.refresh=function(t,e){for(var i=0;i<e;i++){var o=this._getTableCell(i);o[w]=t.isFocusedRow(o.parentElement[b]),xt.setClassName(o,this.$_getCellSelector(o))}},i.prototype._getCssSelector=function(){return"rg-rowindicator"},i.prototype.measureWidth=function(t){var e=this.model,i=e.width;if(0==i&&t.dataSource){var o=t.dataSource.rowCount+"";i=t.container.measureText("rg-rowindicator-cell",o)+1}return i=Math.max(e.minWidth>0?e.minWidth:i,Math.min(e.maxWidth>0?e.maxWidth:i)),e._displayWidth=i,i},i.prototype._layoutCell=function(t,i,o){if(e.prototype._layoutCell.call(this,t,i,o),i){var n=this.model.getCell(i);xt.setClassName(o,this.$_getCellSelector(o)),this._updateCellContent(t,n,o.firstElementChild,o)}},i.prototype.$_getCellSelector=function(i,o){var n=this.grid,r=i.parentElement[b],s=i[w],a=this.model,l="rg-rowindicator-cell";if(-99===r)return Ga.ROW_BAR_CELL_STYLE;if(s){l+=a.showFocus?" rg-rowindicator-focus":"";var u=n.getItem(r);xt.isDebugging();var c=u&&u.itemState;bo(c)?l+=" rg-rowindicator-inserting":c==t.ItemState.UPDATING&&(l+=" rg-rowindicator-editing")}else n.isSelectedItem(r)&&a.showSelection&&(l+=" rg-rowindicator-select");return l+e.prototype.$_getCellSelector.call(this,i,o)},i}(ec),oc=function(e){function i(t,i){var o=e.call(this,t,i,"stateBarView")||this;return o._textMark=!1,o}return n(i,e),i.prototype.rowOf=function(t){return t.parentElement[b]},i.prototype._getCssSelector=function(){return"rg-statebar"},i.prototype.measureWidth=function(t){return t.stateBar.width},i.prototype._layoutCell=function(i,o,n){if(e.prototype._layoutCell.call(this,i,o,n),o){var r=this.model,s=r.mark,a=s==t.StateMark.IMAGE;this._textMark=s==t.StateMark.TEXT;var l=r.getCell(o);xt.setClassName(n,this.$_getCellSelector(n,a)),this._updateCellContent(i,l,n.firstElementChild,n)}},i.prototype._updateCellContent=function(t,e,i,o){i[xt.TextProp]=this._textMark&&e.text||""},i.prototype.$_getCellSelector=function(i,o){var n=this.grid,r=n.getItem(i.parentElement[b]),s=r.dataRow,a="rg-statebar-cell ";if(n.isItemEditing(r)&&this._error&&this.model.errorVisible)switch(this._error.level){case t.ValidationLevel.INFO:a+=" rg-statebar-info";break;case t.ValidationLevel.WARNING:a+=" rg-statebar-warning";break;case t.ValidationLevel.ERROR:a+=" rg-statebar-error"}else if(s>=0&&o)switch(r.rowState){case t.RowState.UPDATED:a+=" rg-statebar-updated";break;case t.RowState.CREATED:a+=" rg-statebar-created";break;case t.RowState.DELETED:a+=" rg-statebar-deleted";break;case t.RowState.CREATE_AND_DELETED:a+=" rg-statebar-create-and-deleted"}return a+e.prototype.$_getCellSelector.call(this,i,o)},i}(ec),nc=function(t){function e(e,i){var o=t.call(this,e,i,"checkBarView")||this;return o._fixedCount=0,o._prevChecked=-1,o._exclusive=!1,o._typeChanged=!1,o._useImage=!1,o._imageChanged=!1,o}return n(e,t),e.prototype.rowOf=function(t){return t.parentElement[b]},e.prototype._getCssSelector=function(){return"rg-checkbar"},e.prototype._doPrepareContent=function(t){var e=t.grid.checkBar;(this._typeChanged=e.exclusive!==this._exclusive)&&(this._exclusive=e.exclusive),(this._imageChanged=e.useImages!==this._useImage)&&(this._useImage=e.useImages)},e.prototype._clearCellContent=function(e){e[this._textProp]="",t.prototype._clearCellContent.call(this,e)},e.prototype._prepareCellContent=function(t,i){var o=wt(t),n=e.FOR_ID+this.rowOf(i)+"-"+this.model.$_hash,r=o.createElement("input"),s=r.style;r.type=this._exclusive?"radio":"checkbox",r.id=n,r.tabIndex=-1,r.className=this._exclusive?"rg-radio":"rg-checkbox",s.display=this._useImage?"none":"inline-block",t.appendChild(r);var a=o.createElement("span");(s=a.style).display=this._useImage?"inline-block":"none",t.appendChild(a);var l=o.createElement("label");l.setAttribute("for",n),(s=l.style).display="none",t.appendChild(l)},e.prototype.measureWidth=function(t){return this.model.width},e.prototype._layoutCell=function(e,i,o){t.prototype._layoutCell.call(this,e,i,o);var n=i&&this.model.getCell(i);xt.setClassName(o,this.$_getCellSelector(o)),o.style.display="",o.removeAttribute("rowspan");var r=e.fixedOptions.rowCount,s=e.checkBar;if(s._merged&&i){var a=s._merges,l=i.itemIndex;if(l=l<r?l:l-e.layoutManager.topIndex,a.isMerged(l,r))if(a.isHidden(l,r))o.style.display="none",o.removeAttribute("rowspan");else{var u=a.getMerged(l,r);o.rowSpan=u}else o.removeAttribute("rowspan")}n&&this._updateCellContent(e,n,o.firstElementChild.firstElementChild,o)},e.prototype._updateCellContent=function(t,i,o,n){var r=i.item,s=o,a=t.checkBar,l=e.FOR_ID+this.rowOf(n)+"-"+this.model.$_hash;s.checked=r&&r.checked,s.disabled=r&&!r.checkable,s.id=l,n.firstElementChild.style.display=r instanceof So||r instanceof or||a.showGroup&&a.fieldIndex<0&&!a.merged?"":"none";var u=this._useImage;this._typeChanged&&(s.setAttribute("type",this._exclusive?"radio":"checkbox"),s.className=this._exclusive?"rg-radio":"rg-checkbox");var c=s.nextElementSibling;if(this._imageChanged&&c&&(s.style.display=u?"none":"inline-block",c.style.display=u?"inline-block":"none"),u&&c){var h=s.checked?this._exclusive?"rg-checkbar-radio-checked":"rg-checkbar-checked":this._exclusive?"rg-checkbar-radio-unchecked":"rg-checkbar-unchecked";h+=s.disabled?" disabled":"",c.className=h}var p=c.nextElementSibling;p.removeAttribute("for"),p.setAttribute("for",l),p[xt.TextProp]=this.rowOf(n)+1+" row "+(r&&r.checkable?r.checked?"checked":"unchecked":"check disable")},e.prototype.getCheckBox=function(t){return t.firstElementChild.firstElementChild},e.prototype.$_getCellSelector=function(i,o){var n=e.CELL_CSS,r=i.parentElement[b],s=this.grid.getItem(r);return n+=s&&s.checkable?"":" rg-checkbar-disabled",n+t.prototype.$_getCellSelector.call(this,i,o)},e.prototype.$_setPrevChecked=function(t){this._prevChecked=t},e.FOR_ID="$$-check-bar-cell",e.CELL_CSS="rg-checkbar-cell",e}(ec),rc=function(t){function e(e){var i=t.call(this,e.doc,null,"rowBarContainer")||this;i._count=0;var o=e.doc;return i._bars=[e.rowIndicator,e.stateBar,e.checkBar],i.addChild(i._indicatorView=new ic(o,e.rowIndicator)),i.addChild(i._stateView=new oc(o,e.stateBar)),i.addChild(i._checkView=new nc(o,e.checkBar)),i._views=[i._indicatorView,i._stateView,i._checkView],i}return n(e,t),e.prototype._doDispose=function(){this._bars=this._views=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowIndicator",{get:function(){return this._indicatorView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stateBar",{get:function(){return this._stateView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkBar",{get:function(){return this._checkView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stateError",{get:function(){return this._stateView._error},set:function(t){this._stateView._error=t},enumerable:!1,configurable:!0}),e.prototype.isVisible=function(){return this._indicatorView.visible||this._stateView.visible||this._checkView.visible},e.prototype.getCellIndex=function(t){return t.parentElement[b]},e.prototype.refresh=function(t){this._indicatorView.visible&&this._indicatorView.refresh(t,this._count)},e.prototype.rowOf=function(t){return t.parentElement[b]},e.prototype.getCheckBox=function(t){return this._checkView.getCheckBox(t)},e.prototype.getCellType=function(t){var e=this._views[t.cellIndex];return e instanceof ic?"indicator":e instanceof oc?"state":e instanceof nc?"check":void 0},e.prototype.isRowIndicator=function(t){return this._views[t.cellIndex]instanceof ic},e.prototype._getCssSelector=function(){return"rg-rowbarcontainer"},e.prototype._isFixedHeight=function(){return!0},e.prototype._doPrepareContent=function(e){if(this._views.length){this._dirty&&this._dom.appendChild(this._table);for(var i=0,o=this._views;i<o.length;i++){var n=o[i];(n._dirty||n.model.dirty)&&n._doPrepareContent(e)}}else xt.detach(this._table);t.prototype._doPrepareContent.call(this,e)},e.prototype._prepareCellContent=function(t,e){return this._views[e]._prepareContent(t,e)},e.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount;return i>0&&e>i?t.getTableItemHeight(e-1):t.getTableItemHeight(e)},e.prototype._doMeasure=function(t,e,i){this.$_prepareBars(t);for(var o=0,n=0,r=this._views;n<r.length;n++){var s=r[n];o+=s.width=s.measureWidth(t)}return new Ha(o,i)},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=t.topIndex,o=t.itemCount,n=t.fixedItemCount,r=this._count=n+o,s=this._bars.length,a=e.focusedRow,l=this._views,u=this._thead,c=u&&u.children[0],h=e.displayOptions.useAlternateRowStyle,p=0;p<r;p++){var d=p<n?p:p+i,f=hs.temp(e,d),g=this._getTableRow(t,p);xt.setClassName(g,this.getStyleName(f.item,f.itemIndex%2&&h)),g[b]=d;for(var y=0;y<s;y++){var _=g.cells[y];if(_[w]=d==a,l[y]._layoutCell(e,f,_),0===p&&c){var m=c.cells[y];m&&(m[xt.TextProp]=this.getCellType(_)+" column")}}}n>0&&this._layoutFixedBar(e.fixedOptions,n)},e.prototype._doUpdateCellContent=function(t,e,i){i[this._textProp]=e.text},e.prototype._doRender=function(t){},e.prototype._doDraw=function(t){this._views.forEach((function(t){t.validate()}))},e.prototype._getCellCount=function(t){return this._bars.length},e.prototype._getCellWidth=function(t,e){return this._views[e].width},e.prototype.$_prepareBars=function(t){var e=this._bars=[],i=this._views=[];t.rowIndicator.visible&&e.push(t.rowIndicator),t.stateBar.visible&&e.push(t.stateBar),t.checkBar.visible&&e.push(t.checkBar),e.length>1&&e.sort((function(t,e){var i=t.displayOrder,o=e.displayOrder;return i==o?t.staticOrder-e.staticOrder:i-o}));for(var o=0,n=e.length;o<n;o++){var r=e[o],s=void 0;(s=r instanceof Ls?this._indicatorView:r instanceof Fs?this._stateView:this._checkView).$_setCol(o),s._colChanged=s._colChanged||r.visChanged,i.push(s),r.visChanged=!1}this._indicatorView.visible=i.indexOf(this._indicatorView)>=0,this._stateView.visible=i.indexOf(this._stateView)>=0,this._checkView.visible=i.indexOf(this._checkView)>=0},e.prototype._layoutFixedBar=function(t,e){var i=this._tbody.children[e];i[C]=e,i[b]=-99,xt.setClassName(i,Ga.ROW_BAR_STYLE);for(var o=0;o<i.childElementCount;o++){var n=i.children[o];n[w]=!1;var r=this._views[o];r._colChanged&&r._layoutCell(this.grid,null,n),xt.setClassName(n,Ga.ROW_BAR_CELL_STYLE)}},e.prototype.getStyleName=function(t,i){var o=e.ROW_STYLE;return o+=Va.STATE_ROW_STYLES[t.rowState]||"",(o+=i?e.ALTERNATE_ROW_STYLE:"").trim()},e.ROW_STYLE="rg-row-bar",e.ALTERNATE_ROW_STYLE=" rg-alternate-row-bar",e}(Ya),sc=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"targetElement",{get:function(){return this._targetElement},set:function(t){this._targetElement=t},enumerable:!1,configurable:!0}),e}(ju),ac=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e}(sc),lc=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"handle",{get:function(){return this._handle},set:function(t){this._handle=t},enumerable:!1,configurable:!0}),e}(sc),uc=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),Object.defineProperty(e.prototype,"request",{get:function(){return this._request},set:function(t){this._request=t},enumerable:!1,configurable:!0}),e.prototype.stop=function(){},e.prototype.end=function(t){this._doEnd(t)},e.prototype._doEnd=function(t){},e.prototype.getRequest=function(){return this._request},e}(Al),cc=function(e){function i(t){var i=e.call(this,t,"mobileBodyScrollTracker")||this;return i._tapX=NaN,i._tapY=NaN,i._vertical=!0,i}return n(i,e),i.prototype._doDispose=function(){this._grid=null,e.prototype._doDispose.call(this)},i.prototype._doStart=function(e,i,o,n){var r=this._grid;if(r.isEditing())switch(r.mobileOptions.scrollOnEditing){case t.ScrollOnEditing.CANCEL:r.cancelEditor(!0);break;case t.ScrollOnEditing.COMMIT:r.commitEditor(!0);case t.ScrollOnEditing.DEFAULT:}return this._scrolling=void 0,this._dragTableItemPoints=r.layoutManager._tableItemPoints,this._dragTopIndex=r.topIndex,this._dragLeftPos=r.leftPos,this._doDrag(e,i,o,n),!0},i.prototype._doDrag=function(t,e,i,o){var n=this._grid,r=n.activeTool,s=e-this._tapX,a=i-this._tapY,l=r.findElementAt(o.mouseX,o.mouseY,!1);if(this._vertical=!(l instanceof Sl)&&Math.abs(2*a)>=Math.abs(s),this._vertical){if(Math.abs(a)>5){var u=n.topIndex,c=n.layoutManager.fullItemCount,h=n.itemCount;if(c===h)return this._scrolling=!1,!1;if(void 0===this._scrolling){if(u+c>=h&&a<0||0==u&&a>0)return this._scrolling=!1,!1;this._scrolling=!0}else if(this._scrolling){for(var p=0,d=this._dragTableItemPoints;++p<d.length&&!(d[p]>=Math.abs(a)););n.topIndex=this._dragTopIndex+--p*(a>0?-1:1)}}}else Math.abs(s)>5&&(this._scrolling=!0,n.leftPos=this._dragLeftPos-s);return!0},i.prototype._doEnd=function(t){this._scrolling=void 0},i.prototype._doCanceled=function(t,e){this._scrolling=void 0},i.prototype._doInit=function(t,e,i){this._tapY=e,this._tapX=t},i}(uc),hc=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._doStart=function(t,e,i,o){return!0},e.prototype._doDrag=function(t,e,i,o){var n=this._grid.pointToIndex(null,e,i,!1);if(n&&n.itemIndex>=0){var r=this.request.handle,s=r.selectionMask.item;s&&s.inflate(r.dir,n)}return!0},e}(uc),pc=function(t){function e(e,i){var o=t.call(this,e.doc,"mobileSelectionHandle")||this;return o._dir=i,o._owner=e,o}return n(e,t),e.prototype._doDispose=function(){this._owner=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"selectionMask",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dir",{get:function(){return this._dir},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return e.STYLE_NAME+this._dir+"-handle"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.background="red"},e.prototype._doDraw=function(){},e.STYLE_NAME="rg-selection-handle",e}(Ys),dc=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype._doDispose=function(){},e.prototype.getSelectHandle=function(t){for(var e in this._views){var i=this._views[e];if(i.leftHandle._dom===t)return i.leftHandle;if(i.topHandle._dom===t)return i.topHandle;if(i.bottomHandle._dom===t)return i.bottomHandle;if(i.rightHandle._dom===t)return i.rightHandle}},e.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new fc(this.doc),this._views[e]=i),i._item=t,this.addChild(i),this.addChild(i.leftHandle),this.addChild(i.topHandle),this.addChild(i.bottomHandle),this.addChild(i.rightHandle),i},e.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e.leftHandle),this.removeChild(e.topHandle),this.removeChild(e.bottomHandle),this.removeChild(e.rightHandle),this.removeChild(e),this._pool.push(e)}this._views={}},e.prototype.layout=function(){var t=this._grid.layoutManager;this._grid.selections;var e=new q;for(var i in this._views){var o=this._views[i],n=o.item,r=!1,s=new q;if(o.prepare(),n instanceof ra||n instanceof sa||(r=this.$_getMobileSelectionRangeRect(t,n,o,s,e)),r){var a=t.footerBounds.y+t.contentBounds.y;s.bottom>a&&(o._bottomed=!0,s.bottom=a)}o.visible=r,o.visible&&(o.setRectI(s),o.updateElement(),this._layoutHandle(o,s,e),o.invalidate(!1,!0))}},e.prototype._layoutHandle=function(t,e,i){var o,n,r=13,s=13;t._lefted?t.leftHandle.visible=!1:(t.leftHandle.visible=!0,o=i.x-6.5,n=e.y+(e.height-r)/2,t.leftHandle.setBounds(o,n,s,r)),o=i.x+(i.width-s)/2,n=e.y-6.5,!t._toped&&o>=e.x?(t.topHandle.visible=!0,t.topHandle.setBounds(o,n,s,r)):t.topHandle.visible=!1,n=e.bottom-6.5,!t._bottomed&&o>=e.x?(t.bottomHandle.visible=!0,t.bottomHandle.setBounds(o,n,s,r)):t.bottomHandle.visible=!1,t._righted?t.rightHandle.visible=!1:(t.rightHandle.visible=!0,o=i.right-6.5,n=e.y+(e.height-r)/2,t.rightHandle.setBounds(o,n,s,r))},e.prototype.$_getMobileSelectionRowsRect=function(e,i,o,n){return t.prototype.$_getSelectionRowsRect.call(this,e,i,o,n)},e.prototype.$_getMobileSelectionColumnsRect=function(e,i,o,n){return t.prototype.$_getSelectionColumnsRect.call(this,e,i,o,n)},e.prototype.$_getMobileSelectionRangeRect=function(e,i,o,n,r){return t.prototype.$_getSelectionRangeRect.call(this,e,i,o,n,r)},e}(ua),fc=function(t){function e(e){var i=t.call(this,e)||this;return i._leftHandle=new pc(i,"left"),i._topHandle=new pc(i,"top"),i._bottomHandle=new pc(i,"bottom"),i._rightHandle=new pc(i,"right"),i}return n(e,t),e.prototype._doDispose=function(){this._leftHandle=this._leftHandle.dispose(),this._topHandle=this._topHandle.dispose(),this._bottomHandle=this._bottomHandle.dispose(),this._rightHandle=this._rightHandle.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"leftHandle",{get:function(){return this._leftHandle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHandle",{get:function(){return this._topHandle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHandle",{get:function(){return this._bottomHandle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightHandle",{get:function(){return this._rightHandle},enumerable:!1,configurable:!0}),e.prototype.prepare=function(){t.prototype.prepare.call(this)},e.prototype.updateElement=function(){t.prototype.updateElement.call(this)},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},e.prototype._visibleChanged=function(){this._leftHandle.visible=this._topHandle.visible=this._bottomHandle.visible=this._rightHandle.visible=this.visible},e}(la),gc=function(){function t(){}return t.getData=function(e){var i=new t;return i.cellType=e,i},t.getSub=function(e,i){var o=new t;return o.cellType=e,o.subType=i,o},t.getField=function(e,i,o){var n=new t;return n.cellType=e,n.field=n.fieldIndex=i,n.fieldName=o,n},t.getItem=function(e,i,o){var n=new t;return n.cellType=e,n.itemIndex=i,null!=o&&(n.dataRow=o),n},t.getLayout=function(e,i){var o=new t;return o.cellType=e,i instanceof Zr?(o.subType="layoutHeader",o.column=i.name):(o.column=i.firstColumn&&i.firstColumn.name,i.firstColumn instanceof Hr&&(o.field=o.fieldIndex=i.firstColumn.dataIndex,o.fieldName=i.firstColumn.fieldName)),o},t.getCell=function(e,i,o){var n=new t;"data"===e&&(n.editable=i.editable,n.readOnly=i.readonly);var r=i.layout;return n.cellType=e,n.itemIndex=o?o.itemIndex:i.item.index,n.dataRow=o?o.dataRow:i.item.dataRow,n.column=i.layout.firstColumn&&i.layout.firstColumn.name,r.firstColumn instanceof Hr&&(n.field=n.fieldIndex=r.firstColumn.dataIndex,n.fieldName=r.firstColumn.fieldName),n},t.getGroupFooter=function(e,i,o,n){var r=new t,s=o.firstColumn;return r.cellType=e,r.itemIndex=i,r.index=n,r.column=s&&s.name,s instanceof Hr&&(r.field=r.fieldIndex=s.dataIndex,r.fieldName=s.fieldName),r},t.getSummary=function(e,i,o){var n=new t;return n.cellType=e,n.index=i,n.column=o.firstColumn&&o.firstColumn.name,o.firstColumn instanceof Hr&&(n.field=n.fieldIndex=o.firstColumn.dataIndex,n.fieldName=o.firstColumn.fieldName),n},t.getGroupElt=function(e,i){var o=new t;return o.cellType=e,o.groupLevel=i,o},t}(),yc=function(t){function e(e,i){var o=t.call(this,e,"focusView")||this;return o._editing=!1,o._focusType="layer",o._inner=i,o}return n(e,t),Object.defineProperty(e.prototype,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this.$_typeChanged(t))},enumerable:!1,configurable:!0}),e.prototype.$_createLine=function(t){function e(t,e,i){var o=t.createElement("div");o.className=e?"rg-focus-inner-line":"rg-focus-line";var n=o.style;return n.display="none",n.position="absolute",n.boxSizing="border-box",n.left="0px",n.top="0px",1!==i&&(n.borderTop="none"),2!==i&&(n.borderBottom="none"),3!==i&&(n.borderLeft="none"),4!==i&&(n.borderRight="none"),o}var i=wt(t);t.appendChild(this._topLine=e(i,this._inner,1)),t.appendChild(this._bottomLine=e(i,this._inner,2)),t.appendChild(this._leftLine=e(i,this._inner,3)),t.appendChild(this._rightLine=e(i,this._inner,4))},e.prototype.$_typeChanged=function(t){var e=this._dom.style;this._topLine||this.$_createLine(this._dom),"line"===t?(e.height="0px",e.width="0px",e.border="none",this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="block",this.invalidate()):(e.removeProperty("border"),this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="none")},e.prototype.$_linePosition=function(t,e,i,o){var n=this._topLine.style,r=this._bottomLine.style,s=this._leftLine.style,a=this._rightLine.style,l=this.parent.width,u=this.parent.height;r.left=n.left=-t+"px",r.width=n.width=l+t+"px",r.top=o-2+"px",a.height=s.height=u+"px",a.left=i-2+"px",r.display=u<o?"none":"block",s.display=t<0?"none":"block",a.display=l<i?"none":"block"},e.prototype.setEditing=function(t,e,i){t!=this._editing&&(this._editing=t,this.resetStyleName())},e.prototype.setActivated=function(t){this._setClassName(null)},e.prototype._getCssSelector=function(){return(this._inner?"rg-focus-inner":this._editing?"rg-focus-editing":"rg-focus")+(this.container._focused?"":" rg-deactive-focus")},e.prototype.setBounds=function(e,i,o,n){if("line"===this._focusType){var r=this._dom.style;r.left=e+"px",r.top=i+"px",this.width=o,this.height=n,this.$_linePosition(e,i,o,n)}else this.x++,t.prototype.setBounds.call(this,e,i,o,n)},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e.prototype._beforeDraw=function(e){if("line"===this._focusType){this._setClassName(e);var i=e.style;i.left=this.x+"px",i.top=this.y+"px"}else t.prototype._beforeDraw.call(this,e)},e}(qs),_c=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this,e,"focusMask")||this;return o._focusType="layer",o._focusView=new yc(e,i),o.addChild(o._focusView),o}return n(e,t),e.prototype._doDispose=function(){this._focusView&&this._focusView.dispose(),this._focusView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this._focusView.focusType=t,this.$_typeChanged(t))},enumerable:!1,configurable:!0}),e.prototype.$_typeChanged=function(t){var e=this._dom.style;"line"===t?(e.removeProperty("overflow"),e.width="0px",e.height="0px"):(e.overflow="hidden",e.width=this.width+"px",e.height=this.height+"px")},e.prototype.updateElement=function(t,e,i,o,n){this._focusView.setBounds(t,e,i,o),this._focusView.setEditing(n,0,!1)},e.prototype.setActivated=function(t){this._focusView.setActivated(t)},e.prototype._getCssSelector=function(){return"rg-focus-mask"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},e.prototype._beforeDraw=function(e){if("line"===this._focusType){this._setClassName(e);var i=e.style;i.left=this.x+"px",i.top=this.y+"px"}else t.prototype._beforeDraw.call(this,e)},e.prototype.setRect=function(e){"line"===this._focusType?e.x==this.x&&e.y==this.y&&e.width==this.width&&e.height==this.height||(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height):t.prototype.setRect.call(this,e)},e}(qs),mc=function(t){function e(e){var i=t.call(this,e,"groupFocusView")||this;return i.visible=!0,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-group-focus"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(qs),vc=function(t){function e(e,i){var o=t.call(this,e,"focusMask")||this;return o._groupFocusView=new mc(e),o.addChild(o._groupFocusView),o}return n(e,t),e.prototype._doDispose=function(){this._groupFocusView=this._groupFocusView&&this._groupFocusView.dispose(),t.prototype._doDispose.call(this)},e.prototype.updateElement=function(t,e,i,o){this._groupFocusView.setBounds(t,e,i,o)},e.prototype._getCssSelector=function(){return"rg-group-focus-mask"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},e.prototype._beforeDraw=function(e){t.prototype._beforeDraw.call(this,e)},e}(qs),bc=function(t){function e(e){var i=t.call(this,e,"rowBlockView")||this;return i.visible=!1,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-rowblock"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(qs),Cc=function(t){function e(e){return t.call(this,e,"headerCellResizer")||this}return n(e,t),e.prototype._getCssSelector=function(){return"_rg-col-resizer_"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(qs),wc=function(t){function e(e){var i=t.call(this,e,"headerCellFeedback")||this;return i._modelChanged=!1,i.dragging=!1,i}return n(e,t),e.prototype._doDispose=function(){this._model=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{set:function(t){this._model=t,this._modelChanged=!0},enumerable:!1,configurable:!0}),e.prototype._createDom=function(t){var e=t.createElement("table");e.setAttribute("aria-hidden","true");var i=e.createCaption();i.textContent="grid table feedback",i.style.width=i.style.height="0px",i.style.padding="none",i.style.boxSizing="border-box",i.style.overflow="hidden",e.style.setProperty("table-layout","fixed","important");var o=t.createElement("tbody");e.appendChild(o);var n=t.createElement("tr");o.appendChild(n);var r=this._cell=t.createElement("td");return n.appendChild(r),r.className="rg-header rg-header-cell _rg-header-cell-feedback_",e},e.prototype._getCssSelector=function(){return"rg-table"},e.prototype._doDraw=function(t){this.dragging&&!this._modelChanged||(ml.renderCell(this._model,this._cell),this._modelChanged=!1)},e}(qs),Sc=function(t){function e(e){return t.call(this,e,"headerCellMover")||this}return n(e,t),e.prototype._getCssSelector=function(){return"_rg-header-cell-mover_"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e)},e.prototype._doDraw=function(t){},e}(qs),Ec=function(e){function i(i){var o=e.call(this,i,"rowMoverLine")||this;return o._feedbackStyle=t.DragFeedbackStyle.LINE,o}return n(i,e),Object.defineProperty(i.prototype,"feedbackStyle",{set:function(t){this._feedbackStyle=t},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){switch(this._feedbackStyle){case t.DragFeedbackStyle.LINE:return"_rg-row-mover-line_";case t.DragFeedbackStyle.ROW:return"_rg-row-mover-block_";case t.DragFeedbackStyle.GROUP:case t.DragFeedbackStyle.CELL:return"_rg-row-mover-group_"}},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},i}(qs),xc=function(t){function e(e){var i=t.call(this,e,"rowMover")||this;return i._enabled=!0,i._label="1 ",i}return n(e,t),e.prototype.setEnabled=function(t){if(t!=this._enabled)return this._enabled=t,this.invalidate(),!0},e.prototype.setLabel=function(t){if(t!=this._label)return this._label=t,this.invalidate(),!0},e.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t)},e.prototype._getCssSelector=function(){var t="_rg-row-mover-proxy_";return this._enabled||(t+=" _rg-row-mover-proxy-disabled_"),t},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),e.style.whiteSpace="nowrap"},e.prototype._setSizeStyle=function(t){},e.prototype._doDraw=function(t){t[xt.TextProp]=this._label},e}(qs),Oc=function(e){function i(t,i){var o=e.call(this,t,i)||this;o._rowBlockStart=-1,o._rowBlockEnd=-1;var n=t.doc,r=o._grid=t.gridView;return o._skipIndex=r.getIndex(),o._tempIndex=r.getIndex(),o._tempInnerIndex=r.getIndex(),r.addFeedbackElement(o._rowBlockMask=new bc(n)),r.addFeedbackElement(o._rowFocusView=new Ic(n)),r.addFeedbackElement(o._focusMask=new _c(n)),r.addFeedbackElement(o._innerFocusMask=new _c(n,!0)),r.addFeedbackElement(o._groupFocusMask=new vc(n)),o}return n(i,e),i.prototype._doDispose=function(){this._skipIndex&&this._skipIndex.dispose(),this._skipIndex=null,this._tempInnerIndex=this._tempInnerIndex.dispose(),this._focusMask=this._focusMask.dispose(),this._innerFocusMask=this._innerFocusMask.dispose(),this._rowFocusView&&this._rowFocusView.dispose(),this._rowFocusView=null,this._rowBlockMask&&this._rowBlockMask.dispose(),this._rowBlockMask=null,this._groupFocusMask=this._groupFocusMask&&this._groupFocusMask.dispose(),this._grid=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this._grid.focusedIndex},enumerable:!1,configurable:!0}),i.prototype.setFocused=function(t,e,i){var o=this._grid;if(o.isValid(t)){var n=o.getItem(t.itemIndex);return!o.isEditing()&&n instanceof Po&&o.append(),this._grid.setFocusedIndex(t,e,!0,i)}return!1},i.prototype.layoutChanged=function(){this.$_resetFocusView(),this.$_resetRowBlockMask(),this.$_resetFocusButton(this.grid.focusedIndex),this._doLayoutChanged()},i.prototype.resetFocused=function(){this.$_resetFocusView()},i.prototype.focusedIndexChanging=function(t){},i.prototype.focusedIndexChanged=function(t,e){var i=this.grid,o=i.layoutManager,n=o.fixedItemCount,r=e.itemIndex;this.grid.setFocusedClass(t,!1),t.itemIndex!==e.itemIndex&&this.grid.setFocusedRowClass(t,!1),(!this.grid.isValid(e)||n>0&&r<n||r>=o.topIndex+n&&r<=n+o.topIndex+o.fullItemCount)&&this.$_resetFocusView(),!i.isEditing()&&e.item instanceof Po&&i.append()},i.prototype.currentRowChanged=function(e,i){var o=this.grid,n=o.displayOptions;if(this._rowBlockStart=-1,this._rowBlockEnd=-1,n.rowBlockType!=t.RowMaskType.NONE){var r,s=n.rowBlockCallback;if(s)(r=s(o.handler,o.getItemIndexOfRow(i)))?(this._rowBlockStart=r.start,this._rowBlockEnd=r.end):this._rowBlockStart=this._rowBlockEnd=-1}this.$_resetRowBlockMask()},i.prototype.getNextRequest=function(t,e,i,o){return null},i.prototype.isMouseEventTarget=function(t){if(t instanceof qa){var i=t.getAncestor(za);if(i)return i.getContentAt(t.index)==this.mouseEventTarget}return e.prototype.isMouseEventTarget.call(this,t)},i.prototype._doSetFocus=function(t){!xt.isMobile()&&this.grid.setFocus(t),this._focusMask.setActivated(this.grid.container._focused)},i.prototype._doFocusLeave=function(t){var e=this.grid;e._resetTdFocus=void 0,e.editOptions.commitWhenLeave&&(e.isEditing()||e.isItemEdited())&&e.commit(!1,void 0,!1),xt.isSlotMode()&&e.closePopups(),this._focusMask.setActivated(e.container._focused)},i.prototype._doLayoutChanged=function(){},i.prototype.$_resetFocusView=function(){var e=this._grid,i=e.layoutManager,o=e.displayOptions,n=e.focusedIndex,r=e.fixedOptions,s=this._tempInnerIndex.assign(n),a=!1,l=!1,u=!1;if(o.focusVisible&&e.isValid(s)&&!e.isEditing()){var c=s.item,h=e.getBodyViewAt(s),p=h.getCellAt(i,s),d=p;if(!p&&s.layout.merged){var f=i.getMergeRoom(s);f&&(s.itemIndex=i.fixedItemCount+i.topIndex,f.contains(s)&&(p=h.getCellAt(i,s)),p||(s.itemIndex=i.fixedItemCount+i.topIndex+i.itemCount-1,f.contains(s)&&(p=h.getCellAt(i,s))))}if(p&&!p.grouped){var g=e.isEditing(),y=h.getCellRectAt(i,s,!0);if((y=h.boundsByContainer(y)).width>0&&y.height>0){var _=0,m=y.width;if(!s.colFixed&&!s.rightFixed){var v=i.fixedContentBounds;_=Math.max(0,v.right-y.x),m=Math.max(0,y.width-_),v=i.rightContentBounds,m-=y.right-v.x}if(m>0){g&&(y.y--,y.height+=1);var b=y.clone();if((v=i.footerBounds.clone()).y+=i.contentBounds.y,Math.max(0,y.bottom-v.y),y.width=Math.min(y.width,m),y.x+=_,y.bottom=Math.min(y.bottom,v.y),this._focusMask.setRect(y),this._focusMask.focusType=o.focusType,this._focusMask.updateElement(-_,0,b.width,b.height,g),a=!0,e.canMergeEditing(d),d&&d.merged){if(o.showInnerFocus&&(E=h.getCellRectAt(i,s,!1)).height<y.height){this._innerFocusMask.focusType=o.focusType,E.height=Math.min(E.height,y.height);var C=(E=h.boundsByContainer(E)).width-8,w=E.height-8;E.bottom=Math.min(y.bottom+4,E.bottom),this._innerFocusMask.setRect(E.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,C,w,g),u=!0}}else{var S=h.getCellAt(i,s);if(S&&S.renderer2&&S.editable&&S.renderer2.canShowInnerFocus()){var E=h.getCellRectAt(i,s,!1);C=(E=h.boundsByContainer(E)).width-8,w=E.height-8,E.bottom=Math.min(y.bottom+4,E.bottom),this._innerFocusMask.setRect(E.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,C,w,g),u=!0}}}}}else if(!c.isData){var x=e.getRowView(h,c);x&&(y=x.boundsByContainer(),this._focusMask.updateElement(0,0,y.width,y.height,!1),y.x<i.leftContentBounds.right&&(y.x=i.leftContentBounds.right,y.width-=i.leftContentBounds.right-y.x),this._focusMask.setRect(y),a=!0)}}var O=o.rowFocusType;if(O!=t.RowMaskType.NONE){var R=i.footerBounds.y+i.contentBounds.y,I=i.fixedItemCount;if((T=(T=s.itemIndex)>=I?T-i.topIndex:T)>=0&&T<=i.itemCount-1){switch((y=i.getTableItemBounds(T)).y+=i.contentBounds.y+i.bodyBounds.y,y.bottom>R&&(y.bottom=R),O){case t.RowMaskType.DATA:y.x=e.fixedContentPane.x,y.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right;break;case t.RowMaskType.FILL:y.x=0,y.width=e.width;break;case t.RowMaskType.ROW:y.x=0,y.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right}this._rowFocusView.setRect(y),l=!0}else l=!1}if(this._groupFocusMask.visible=o.groupFocusVisible&&e.isValid(n)){var T,P=n.layout.root;if(P)if(R=i.footerBounds.y+i.contentBounds.y,I=i.fixedItemCount,(T=(T=n.itemIndex)>=I?T-i.topIndex:T)>=0&&T<=i.itemCount+I-1){if(y=i.getTableItemBounds(T),_=0,(E=i.getDataRect(P)).height=y.height,y.x=E.x,m=E.width,y.y+=i.contentBounds.y+i.bodyBounds.y,y.bottom>R&&(y.bottom=R),v=void 0,v=!n.colFixed&&r.colCount>0?i.fixedContentBounds:i.rowBarBounds,y.x=Math.max(v.right,E.x),_=Math.min(0,E.x-v.right),!n.rightFixed&&r.rightCount>0){var D=i.rightContentBounds;m-=Math.max(0,E.right-D.x)}m<=0&&(this._groupFocusMask.visible=!1),y.width=m,y.x-=1,y.y-=1,y.width++,y.height++,this._groupFocusMask.setRect(y),this._groupFocusMask.updateElement(_,0,E.width+1,E.height+1)}else this._groupFocusMask.visible=!1}this._rowFocusView.visible=l,this._focusMask.visible=a,this._innerFocusMask.visible=u,this._focusMask.visible,e.setFocusedClass(n,!0),e.setFocusedRowClass(n,!0)},i.prototype.$_resetRowBlockMask=function(){var e=this.grid,i=e.layoutManager,o=i.fixedItemCount,n=e.topItem,r=this._rowBlockMask,s=e.displayOptions.rowBlockType,a=this._rowBlockStart,l=this._rowBlockEnd,u=Math.max(a-n+o,o),c=Math.min(Math.max(l-n+o),i.itemCount+o-1);if(r.visible=s&&s!=t.RowMaskType.NONE&&u>=0&&c>=0&&u<i.itemCount&&u<=c&&a!==l,r.visible){var h=i.footerBounds.y+i.contentBounds.y,p=i.getTableItemBounds(u),d=i.getTableItemBounds(c);switch((p=p.union(d)).y+=i.contentBounds.y+i.bodyBounds.y,p.bottom>h&&(p.bottom=h),s){case t.RowMaskType.DATA:p.x=e.fixedContentPane.x,p.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right;break;case t.RowMaskType.FILL:p.x=0,p.width=e.width;break;case t.RowMaskType.ROW:p.x=0,p.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right}r.setRect(p)}},i.prototype.$_resetFocusButton=function(t){var e,i=this.grid;if(i.isValid(t)){var o=i.getBodyViewAt(t),n=i.getBodyCellAt(t),r=this._tempIndex.assign(t);if(!n&&r.layout.merged){var s=i.layoutManager;(e=s.getMergeRoom(r))&&(r.itemIndex=s.fixedItemCount+s.topIndex,e.contains(r)&&(n=i.getBodyCellAt(r)),n||(r.itemIndex=s.fixedItemCount+s.topIndex+s.itemCount-1,e.contains(r)&&(n=i.getBodyCellAt(r))))}var a=o&&n&&o.getRowView(n.item);a&&a.$_setButtons(i,n,n.cell.firstElementChild,e)}},i.prototype._doCancel=function(t){if(t.closeFilterSelector(),t.isEditing())t.cancelEditor(!0);else if(t.isItemEditing())t.itemEditCancel()&&t.cancel();else if(this.dragging&&this.dragTracker)try{this._stopDragTracker(null,null,!0,null),this.dragTracker.cancel(),this.dragTracker.linkable&&t.container.cancelOtherContainer(this.dragTracker)}catch(t){throw t}finally{this.dragTracker=null}},i.prototype._doEnter=function(t,e,i,o){var n=t.isEditing(),r=o.shiftKey;if(n&&!e.enterToTab)t.commitEditor(!0);else{var s=i.clone(),a=e.skipReadOnly,l=e.skipReadOnlyCell;if(t.isValid(s))if(e.enterToNextRow&&(!r&&s.itemIndex<t.itemCount-1||r&&s.itemIndex>0))r?s.up():s.down(),l&&this._checkReadOnly(s)&&(this._skipReadOnlyCell(s,r?-1:1)||s.assign(i));else if(!r&&(!e.enterToEdit||n)&&e.enterToTab&&e.crossWhenExitLast&&(s.isLast||e.skipReadOnly&&s.isEditableLast)&&s.itemIndex<t.itemCount-1)s.down(),s.firstCell(),a&&this._skipReadOnly(s,1);else if(r&&(!e.enterToEdit||n)&&e.enterToTab&&e.crossWhenExitLast&&(s.isFirst||e.skipReadOnly&&s.isEditableFirst)&&s.itemIndex>0)s.up(),s.lastCell(),a&&this._skipReadOnly(s,-1);else if((!n||e.enterToTab)&&e.commitWhenExitLast&&s.isLast){try{t.commit(e.commitWhenNoEdit)}catch(i){throw i instanceof hr&&(i=t._fireValidationFail(s.item.index,i.column,i))&&alert(e.showOnlyValidationMessage&&i.userMessage?i.userMessage:i.toString()),i}e.appendWhenExitLast&&s.itemIndex===t.itemCount-1&&(t.append(),t.isItemEditing()&&(s.down(),s.firstCell()))}else(e.enterToTab&&(t.isEditing()||this._checkReadOnly(s))||!e.enterToEdit)&&(t.isEditing()&&t.commitEditor(!0),r?(s.prev(),this._getPrevVisible(t,s)):(s.next(),this._getNextVisible(t,s)),a&&!this._skipReadOnly(s,r?-1:1)&&s.assign(i));else s.normalize(t);hs.areEquals(s,i)?t.isValid(s)&&e.enterToEdit&&!n&&!t.isEditing()&&i&&i.dataColumn&&!this._checkReadOnly(i)&&t.showEditor(i):this.setFocused(s,!0,!0)}return!0},i.prototype._doTab=function(t,e,i,o,n,r){var s=i.clone(),a=!1;if(t.isValid(s)){if(e.useTabKey){var l=e.exitGridWhenTab;if(n){if(e.crossWhenExitLast&&(s.isFirst||e.skipReadOnly&&s.isEditableFirst)&&s.itemIndex>0?(s.up(),s.lastCell()):(s.prev(),this._getPrevVisible(t,s)),e.skipReadOnly&&!this._skipReadOnly(s,-1)&&s.assign(i),hs.areEquals(s,i)&&l){switch(l){case"row":a=!0;break;case"grid":a=s.itemIndex<=0}if(a)return!xt.isMobile()&&t.container._containerDom.setAttribute("tabindex","-1"),!1}}else{if(e.crossWhenExitLast&&(s.isLast||e.skipReadOnly&&s.isEditableLast)&&s.itemIndex<t.itemCount-1)s.down(null,e.skipReadOnly&&s.isEditableLast&&e.crossWhenExitLast),s.firstCell();else if(e.commitWhenExitLast&&s.isLast){try{t.commit(e.commitWhenNoEdit)}catch(i){throw i instanceof hr&&(i=t._fireValidationFail(s.itemIndex,i.column,i))&&alert(e.showOnlyValidationMessage&&i.userMessage?i.userMessage:i.toString()),i}e.appendWhenExitLast&&(t.append(),t.isItemEditing()&&(s.down(),s.firstCell()))}else s.next(),this._getNextVisible(t,s);if(e.skipReadOnly&&!this._skipReadOnly(s,1)&&s.assign(i),hs.areEquals(s,i)&&l){switch(l){case"row":a=!0;break;case"grid":a=s.itemIndex>=t.itemCount-1}if(a)return!1}}return hs.areEquals(s,i)||this.setFocused(s,!0,!0),r&&(r.preventDefault&&r.preventDefault(),r.stopImmediatePropagation()),!0}}else s.normalize(t),this._skipReadOnly(s,1);return n&&!xt.isMobile()&&t.container._containerDom.setAttribute("tabindex","-1"),!1},i.prototype._getNextVisible=function(t,e){t.getBodyViewAt(e).getNextVisibleCell(e)},i.prototype._getPrevVisible=function(t,e){t.getBodyViewAt(e).getPrevVisibleCell(e)},i.prototype._checkReadOnly=function(t){var e=this.grid;if(!e.isValid(t))return!0;var i=e.getWritableAt(t);return null!=i?!i:!t.dataColumn.isWritable()},i.prototype._skipReadOnly=function(t,e){var i=!1;if(this.grid.editOptions.skipReadOnly){var o=this._skipIndex;if(o.assign(t),!(i=!this._checkReadOnly(o)))if(e>0){for(;o.next();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}else for(;o.prev();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}return i},i.prototype._skipReadOnlyCell=function(t,e,i){var o=this.grid,n=!t.dataColumn.isWritable()&&!0;if(!n&&o.editOptions.skipReadOnlyCell){var r=this._skipIndex;r.assign(t),n=!this._checkReadOnly(r)}return n},i.prototype._commitCancel=function(e,i){var o=this.grid;try{switch(e.itemState){case t.ItemState.INSERTING:return o.commit(i.forceInsert)||o.cancel(!0),!0;case t.ItemState.APPENDING:return o.commit(i.forceAppend)||o.cancel(!0),!0;case t.ItemState.UPDATING:return o.commit(i.commitWhenNoEdit)||o.cancel(!0),!0}}catch(t){if(t instanceof hr)return(t=o._fireValidationFail(e.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof cr)return!1;throw t}return!1},i.prototype._doColumnHeaderClicked=function(t,e){},i.prototype._editButtonClicked=function(t,e){},i}($l),Rc=function(t){function e(e){var i=t.call(this,e,"rowHoverView")||this;return i.visible=!1,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-rowhover"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(qs),Ic=function(t){function e(e){var i=t.call(this,e,"rowFocusView")||this;return i.visible=!1,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-rowfocus"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(qs),Tc=function(e){function i(t,i){var o=e.call(this,t,i)||this;o._tooltipOptions=new Yu,o._checkScroll=Date.now(),o._prevScroll=Date.now(),o._wheelDeltaY=0,o._tempRect=new q,o._reqPoint=new Ks,o._swipeTimer=null,o._swipeDistance=0,o._swipeDuration=0,o._swipeStarted=null,o._swipeAmount=0;var n=t.doc,r=o.grid;return o._cellResizer=new Cc(n),o._cellMover=new Sc(n),o._cellFeedback=new wc(n),o._rowMoverLine=new Ec(n),o._rowMoverProxy=new xc(n),o._colResizeReq=new $u(r),o._colMoveReq=new Wu(r),o._rowResizeReq=new Uu(r),o._headerResizeReq=new zu(r),o._rowMoveReq=new Ku(r),o._tooltipIndex=new hs(r),xt.isMobile()&&(o._touchScrollRequest=new ac(r),o._touchScrollTracker=new cc(r),o._touchSelectRequest=new lc(r),o._touchSelectTracker=new hc(r)),o}return n(i,e),i.prototype._doDispose=function(){this._clickCell=null,this._clickElement=null,this._cellResizer=this._cellResizer.dispose(),this._cellMover=this._cellMover.dispose(),this._cellFeedback=this._cellFeedback.dispose(),this._rowMoverLine=this._rowMoverLine.dispose(),this._rowMoverProxy=this._rowMoverProxy.dispose(),this._colResizeReq=this._colResizeReq.dispose(),this._colMoveReq=this._colMoveReq.dispose(),this._rowMoveReq=this._rowMoveReq.dispose(),this._rowResizeReq=this._rowResizeReq.dispose(),this._headerResizeReq=this._headerResizeReq.dispose(),clearTimeout(this._tooltipShowTimer),e.prototype._doDispose.call(this)},i.prototype._doDeactivated=function(){this._clickCell=this._clickElement=null},i.prototype._doDragTrackerFinished=function(t,e){t.clickable||(this._clickCell=this._clickElement=null)},i.prototype.$_getIndexAt=function(t,e,i,o,n){var r=t.getDataCellIndex(o,this._tempIndex),s=i.getCellAt(e,r);if(s&&s.merged){var a=e.getTableRowIndex(n);if(a<0)return r;var l=i.getRowIndex(a);r.itemIndex=Math.min(Math.max(s.item.index,l),s.item.index+s.rowSpan-1)}return r},i.prototype._doPointerDown=function(e){var i=e.mouseX,o=e.mouseY,n=e.ctrlKey||e.metaKey,r=e.shiftKey,s=e.altKey,a=e.button,l=this.grid,u=l.layoutManager,c=l.editOptions,h=l.focusedIndex.clone(),p=l.selections.exclusiveMode;this._longTimer=xt.isMobile()&&setTimeout(this._longTimerHander,l.mobileOptions.longTapDuration),this._hideTooltip(),l.closePopups(),l.setEventFrom("mousedown"),this._scrollY=window.scrollY,clearInterval(this._swipeTimer),this._touchMoving=!1;var d,f=this._clickCell=null,g=this._clickElement=null;if(0==a||l.displayOptions.rightClickable&&2==a){var y=this._tempIndex,_=this.mouseEventTarget,m=0==a&&(this._getEditRequest(_,h,i,o,n,r,s)||this._getSelectRequest(_,i,o,n,r,s)||xt.isMobile()&&this._getTouchRequest(e));if(!(m instanceof ju)||m.canFocus())if(f=this._clickCell=this._findTableCell(),g=this._clickElement=this.findElementAt(i,o,!1),f){var v=l.getTableView(f),C=v instanceof ml,w=v instanceof fl,S=v instanceof rc&&v.isRowIndicator(f);if(C||w||S){var E=l.selections.lastItem();if(w?(y=this.$_getIndexAt(l,u,v,f,o),l.editOptions.focusMoveStep===t.FocusMoveStep.GROUP&&(y.layout=y.layout.root.first)):C?(y.assign(l.focusedIndex),y.layout=v.layoutByCell(f)):(y.assign(l.focusedIndex),y.itemIndex=f.parentElement[b]),C){if(n&&r)E&&this.$_resizeSelection(E,y,t.SelectionStyle.COLUMNS);else if(r)return}else{if(r&&E){var x=C?t.SelectionStyle.COLUMNS:S?t.SelectionStyle.ROWS:null;return void this.$_resizeSelection(E,y,x)}if(w){if(this.$_checkAppending(l.focusedIndex,!0,y))return this._clickElement=null,void(this._clickCell=null);var O=v.getCellAt(u,y),R=v.bodyCellByCell(this._clickCell);if(R&&O&&0===a&&R.isEditButton(e.target))this.setFocused(y,!0,!0)&&O.editable&&!O.readonly&&l.editController.buttonDown(y,e);else if(xt.isMobile()&&m instanceof ac)this.grid.container.addMouseEvent(null);else if(hs.areEquals(y,this.focused)&&c.editWhenClickFocused)l.showEditor();else{var I=!(n&&l.selections.containsCell(y));this.setFocused(y,p||!n,I)||m instanceof Hu&&(m=null)}}else if(S&&l.rowIndicator.selectable)if(null==y.column&&y.item.isDataRow&&(y.layout=l.getFirstLayout()),m instanceof Hu){if(this.setFocused(y,p||!n,!1)){var T=E&&ea(E)?E.getItemIndices():[];(1!==T.length||T[0]!==y.itemIndex)&&l.selections.selectRow(y.itemIndex,!n)}}else I=void 0,I=l.displayOptions.selectionStyle===t.SelectionStyle.SINGLE_ROW?!(n&&l.selections.containsItem(y.itemIndex,null)):!(n&&l.selections.containsCell(y)),this.setFocused(y,p||!n,I)}}}else(d=g)&&"itemIndex"in d&&(y.assign(l.focusedIndex),y.itemIndex=g.itemIndex,this.setFocused(y,!0,!0));!m||l.isItemEditing()&&m.selectable||(this.dragTracker=this._getDragTracker(m,i,o))}l.$_resetHovering(i,o);var P=this.dragTracker;P&&P.startWhenCreated?(P instanceof Bl&&e.shiftKey,this._startDragTracker(i,o,e)):P&&P.init(i,o,e)},i.prototype._doPointerCancel=function(t){this.grid.container.removeMouseEvent()},i.prototype._doMouseDown=function(t){var e=this.grid,i=e.editOptions,o=t.ctrlKey||t.metaKey,n=e.selections.exclusiveMode,r=t.mouseX,s=t.mouseY,a=this._tempIndex;if(hs.areEquals(a,this.focused)&&i.editWhenClickFocused)e.showEditor();else{var l=!(o&&e.selections.containsCell(a));this.setFocused(a,n||!o,l)}e.$_resetHovering(r,s)},i.prototype.$_checkOtherGridRowMoving=function(t,e){var i=this.grid,o=i.container,n=o.getMouseContainer(),r={index:-1,position:0,column:void 0};if(n&&n!==o)if(o.findContainer(t)!==o)i.removeFeedbackElement(this._rowMoverLine);else if(e instanceof Vl){var s=o.eventToContainer(t),a=o.findElementAt(s.x,s.y,!1);if(0==i.itemCount||a instanceof al||a instanceof ec||a instanceof rc){var l=Vl.updateLineFeedback(i,Number.MAX_VALUE,null,1,this._rowMoverLine,s.x,s.y,!0,t.target),u=i.canMoveRow(!0,!0)&&i.dataDropOptions.getEnabled(n.gridView,e.sourceItems,l),c=i.dataDropOptions.getLabel(n.gridView,e.sourceItems,l,null);return e.setEnabled(u),e.setLabel(c),i.addFeedbackElement(this._rowMoverLine),u?l:r}a?(e.setEnabled(!1),i.removeFeedbackElement(this._rowMoverLine)):i.removeFeedbackElement(this._rowMoverLine)}return r},i.prototype.getNextRequest=function(t,e,i,o){if(t instanceof Hu){var n=this.grid.getSelection();return this._rowMoveReq.init(n,n.startItem)}return null},i.prototype.dragFrom=function(t,e){e instanceof Vl&&this.$_checkOtherGridRowMoving(t,e)},i.prototype.dropFrom=function(t,e){if(e instanceof Vl){var i=this.grid,o=0==i.itemCount?{index:0,position:0,column:void 0}:this.$_checkOtherGridRowMoving(t,e);i.removeFeedbackElement(this._rowMoverLine),o.index>=0&&i.$_dropData(e.grid,e.sourceItems,o)}},i.prototype.cancelFrom=function(t){var e=this.grid;t instanceof Vl&&e.removeFeedbackElement(this._rowMoverLine)},i.prototype._doPointerMove=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,n=t.shiftKey,r=t.altKey,s=this.grid,a=s.layoutManager;s.$_resetHovering(e,i)||this._hideTooltip();var l=this._getEditRequest(this.mouseEventTarget,s.focusedIndex,e,i,o,n,r);if(xt.isMobile()&&!l&&(l=this._getTouchRequest(t)),l&&l.cursor?s.setCursor(this.mouseEventTarget,l.cursor):s.setCursor(this.mouseEventTarget,"default"),!l&&!this.dragging){var u=this._findTableCell(),c=u&&s.getTableView(u);if(c instanceof fl){var h=c.bodyCellByCell(u);if(h&&h.merged){var p=h.head||h,d=this.$_getIndexAt(s,a,c,u,i);if(!p.contains(s.focusedIndex)){if(h.buttons){var f=c.getRowView(p.item);f instanceof al&&f.moveCellButtons(a,p,d.itemIndex)}var g=s.canMergeEditing(p);if(p.renderer2&&p.renderer2.refreshFocusChanged){var y=c.getCellRectAt(a,d,!1),_=c.getCellRect(a,p,!0),m=p.renderer2,v=y.top-_.top+y.height/2-_.height/2;m.moveClickElement(v,g)}}}}}},i.prototype._doPointerUp=function(t){this.grid.container;var e=t.mouseX,i=t.mouseY,o=this._findTableCell(),n=this.grid,r=n.focusedIndex,s=n.layoutManager;n.setEventFrom("mouseup");var a=n.getCellType(o);if(n.setCursor(this.mouseEventTarget,"default"),n.editController.buttonUp(null,t),"data"===a&&(!this.dragTracker||this.dragTracker.scrollable)){var l=o&&n.cellToIndex(o);n.isValid(r)&&hs.areEquals(r,l)&&!s.focusIsVisible(r)&&(s.makeCellVisible(r),n.invalidateLayout())}if(o&&o==this._clickCell&&"header"===a&&!(this._getEditRequest(this.mouseEventTarget,r,e,i,!1,!1,!1)instanceof $u)){var u=n.getHeaderView(o).layoutByCell(o);u&&this.$_columnHeaderClicked(t,u)}},i.prototype._doClick=function(t,e,i){e=e||t.mouseX,i=i||t.mouseY;var o,n=this.grid,r=this.findElementAt(e,i,!1),s=this._findTableCell(),a=n.getCellType(s),l=this.focused,u="data"===a&&n.cellToIndex(s);(!n._eventFrom||n._eventFrom.indexOf("key")>=0)&&(this._clickCell=s=this._findTableCell(t.target),l=s&&n.getDataCellIndex(s)),n.setEventFrom(null);try{if(s&&s==this._clickCell){var c=n.getCellType(s),h=void 0,p=void 0;switch(c){case"head":if(this.$_gridCellClicked(o=gc.getSub(c,n.headView.getCellType(s))),"check"===o.subType){var d=n.headView._checkCell;xt.included(t.target,d._check,d._image,d._span)&&this._checkAllClicked()}break;case"foot":this.$_gridCellClicked(gc.getSub(c,n.footView.getCellType(s)));break;case"indicator":case"state":case"check":"check"===c&&this.$_checkCellClicked2(s,t),h=n.rowBarContainer.rowOf(s),p=n.getRowOfItem(h),this.$_gridCellClicked(gc.getItem(c,h,p));break;case"header":var f=n.getHeaderView(s),g=n.headerView.tableCellByCell(s);g&&g.isClickableElt(t.target)||this.$_gridCellClicked(gc.getLayout(c,f.layoutByCell(s)));break;case"data":var y=n.getBodyView(s).bodyCellByCell(s),_=hs.areEquals(l,u)||y.contains(l);if(_&&y.grouped)this.$_gridCellClicked(gc.getItem("groupHeader",y.item.index,null));else{if(_&&y.isCellButton(t.target))return this.$_cellButtonClicked(y),void(!n.editOptions.exceptDataClickWhenButton&&this.$_gridCellClicked(gc.getCell(c,y,l)));if(_&&al.isExpander(t.target))return void(!n.editOptions.exceptDataClickWhenButton&&this.$_gridCellClicked(gc.getCell(c,y,l)));var m=n.editController._editor;if(_&&(y.isEditButton(t.target)||!y.readonly&&m&&m.dropDownWhenClick))return n.canMergeEditing(y)?this._tempIndex=n.focusedIndex.clone():y.getEditIndex(this._tempIndex),this._editButtonClicked(this._tempIndex,t),void this.$_gridCellClicked(gc.getCell(c,y,l));var v=y.renderer2;if(v&&(_||!v.clickOnlyFocusedCell))return o=gc.getCell(c,y,u),this.$_performRendererClick(y,t,o)?void((!n.editOptions.exceptDataClickWhenButton||!v.itemClickable)&&this.$_gridCellClicked(o)):void this.$_gridCellClicked(gc.getCell(c,y,u));xt.isInteractive(t.target)&&xt.stopEvent(t,!0)}break;case"footer":var C=n.getFooterView(s).tableCellByCell(s);this.$_gridCellClicked(gc.getSummary(c,C.summaryIndex,C.layout));break;case"summary":var w=n.getSummaryView(s).tableCellByCell(s);this.$_gridCellClicked(gc.getSummary(c,w.summaryIndex,w.layout));break;case"inlineFilter":var E=n.getFilterView(s).tableCellByCell(s),x=t.target;x===E.operatorButton&&n.popupMenuManager.show(E.popupMenu,x,this._tempIndex.set(-1,E.layout,this.grid),!1);break;case"sum":this.$_gridCellClicked(gc.getSub(c,n.sumView.getCellType(s)));break;case"filter":this.$_gridCellClicked(gc.getSub(c,n.filterView.getCellType(s)));break;case"groupFooter":var O=n.getBodyView(s).bodyCellByCell(s),R=O.item.footerIndex;this.$_gridCellClicked(gc.getGroupFooter(c,O.item.index,O.layout,R));break;case"groupHead":case"groupFoot":var I=s[S];this.$_gridCellClicked(gc.getGroupElt(c,I));break;case"groupBar":var T=s[b];p=this.grid.getRowOfItem(T),this.$_gridCellClicked(gc.getItem(c,T,p))}}else if(r&&r===this._clickElement){var P=this._getClickData(r,t);P&&("gridEmpty"===P.cellType&&n.isEditing()&&n.commitEditor(!0),this.$_gridCellClicked(P))}}finally{if(xt.isMobile()){var D=n.mobileOptions.doubleTapInterval||500;this._clickTimeStamp&&this._clickTimeStamp+D>t.timeStamp&&this._clickElt===this._findTableCell(t.target)?"data"!==a||hs.areEquals(this._clickIndex,u)?(this._clickTimeStamp=null,this._clickIndex=null,this._doDblClick(t)):this._clickTimeStamp=t.timeStamp:(this._clickTimeStamp=t.timeStamp,this._clickElt=this._findTableCell(t.target),"data"===a&&(this._clickIndex=u.clone()))}}},i.prototype._getClickData=function(t,e){if(t instanceof Rh||t instanceof Ua||t instanceof fl)return gc.getData("gridEmpty")},i.prototype.$_commitRendererEdit=function(t,e,i){var o=e.item,n=e.dataField,r=e.dataColumn,s=!1;try{(s=t.editorCommit(e,o.getData(n),i))&&(t.undoable?t.execute(new Zu(e.item,n,i,e.column)):o.setData(n,i),t.isItemEditing(e.item)&&t.validateCellCommit(e,i))}catch(e){if(!t.editOptions.showCommitError)throw e;alert(e.message||e)}if(s&&t.isCellEditing()){var a=t.itemSource,l=a.editingItem.invalidFields,u=t.validationManager.getError(e);if(u)return l.push(r.dataIndex),void(t.editOptions.showCommitError&&alert(u.userMessage||u.message||u));if(l.indexOf(r.dataIndex)>=0&&l.splice(l.indexOf(r.dataIndex),1),t.validationManager.clearInvalidCell(e),l.length>0)return;var c=t.canMergeEditing(t.getBodyCellAt(e,!0));if(a.commit(c)||a.cancel(),c){var h=r.layout.merges.getRoom(e),p={},d={};d[r.fieldName]=i;for(var f=h.head;f<=h.tail;f++){var g=t.getItem(f);g.isDataRow&&(p[g.dataRow]=d)}a.updateRows2(p)}}},i.prototype.$_performRendererClick=function(t,e,i){var o,n=t.renderer2,r=this.grid,s=r.layoutManager;if(n){if(t.merged)if(""===e.pointerType)o=r.focusedIndex.clone();else{var a=e.mouseY,l=this._findTableCell(),u=l&&r.getTableView(l);o=this.$_getIndexAt(r,s,u,l,a)}else o=n.index;if(r.canWriteAt(o)&&n.canEdit()&&n.canEditClickAt(e)&&r.edit(o)){var c=n.editClick(o,e);if(c)return c.commit&&this.$_commitRendererEdit(r,o,c.value),!0}if(n.canClick(e)){var h=n.click(o,e);if(h)return xt.extendObj(i,h),!1===r._fireCellItemClicked(o,h)&&n.preventDefaultClick(e),!0}return n.preventDefaultEditClick(e),!1}},i.prototype.$_performRendererKey=function(e,i){var o,n=e.renderer2,r=e.head;if(n)o=n.index;else{if(!r||!(n=r.renderer2))return;var s=e.rowIndex-r.rowIndex;(o=n.index.clone()).incRow(s)}var a=this.grid,l=a.canWriteAt(o)&&n.canEdit();if(hs.areEquals(o,a.focusedIndex)){var u=gc.getCell(a.getCellType(e.cell),e,o);if(l&&n.canEditKey(i)||n.canClickSpaceKey(i))return n.itemClick(),!0;if(32===i.keyCode&&a.editOptions.buttonClickWhenSpace)return e.button===t.CellButton.ACTION||e.button===t.CellButton.POPUP?(a.closePopups(),e.cellButton.click(),!0):(this.$_gridCellClicked(u),!0)}},i.prototype._doDblClick=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,n=t.shiftKey,r=t.altKey,s=this.grid,a=s.layoutManager,l=this.focused,u=this.findElementAt(e,i,!1),c=this._findTableCell();if(s.setEventFrom(null),c&&c==this._clickCell){var h=s.getCellType(c),p=void 0,d=void 0;switch(h){case"head":this.$_gridCellDblClicked(gc.getSub(h,s.headView.getCellType(c)));break;case"foot":this.$_gridCellDblClicked(gc.getSub(h,s.footView.getCellType(c)));break;case"indicator":case"state":case"check":p=s.rowBarContainer.rowOf(c),d=s.getRowOfItem(p),this.$_gridCellDblClicked(gc.getItem(h,p,d));break;case"header":var f=s.getHeaderView(c),g=s.headerView.tableCellByCell(c);g&&g.isClickableElt(t.target)||this.$_gridCellDblClicked(gc.getLayout(h,f.layoutByCell(c)));var y=this._getEditRequest(this.mouseEventTarget,s.focusedIndex,e,i,o,n,r);if(y instanceof $u){var _=y.layout;_.firstColumn&&s.fitLayoutWidth(_)}break;case"data":var m=s.getBodyView(c),v=m.bodyCellByCell(c),C=this.$_getIndexAt(s,a,m,c,i);if(al.isExpander(t.target))return;if(v.grouped)this.$_gridCellDblClicked(gc.getItem("groupHeader",v.item.index,null));else if(this.$_gridCellDblClicked(gc.getCell(h,v,l)),hs.areEquals(C,l)){var w=s.editController.currentEditor();s.showEditor(C,void 0,xt.isMobile()&&(null==w?void 0:w.hasList))}break;case"footer":var E=s.getFooterView(c).tableCellByCell(c);this.$_gridCellDblClicked(gc.getSummary(h,E.summaryIndex,E.layout));break;case"summary":var x=s.getSummaryView(c).tableCellByCell(c);this.$_gridCellDblClicked(gc.getSummary(h,x.summaryIndex,x.layout));break;case"sum":this.$_gridCellDblClicked(gc.getSub(h,s.sumView.getCellType(c)));break;case"groupFooter":var O=s.getBodyView(c).bodyCellByCell(c),R=O.item.footerIndex;this.$_gridCellDblClicked(gc.getGroupFooter(h,O.item.index,O.layout,R));break;case"groupHead":case"groupFoot":var I=c[S];this.$_gridCellDblClicked(gc.getGroupElt(h,I));break;case"groupBar":var T=c[b];d=s.getRowOfItem(T),this.$_gridCellDblClicked(gc.getItem(h,T,d))}}else if(u&&u===this._clickElement){var P=this._getClickData(u,t);P&&this.$_gridCellDblClicked(P)}},i.prototype._doMouseWheel=function(t){var e=this.grid;e.setEventFrom(null),e.scrollOnEditing();var i=e.displayOptions;if(i.wheelEnabled&&!t.ctrlKey){if(!e._fireWheel(t))return!0;if((t.shiftKey||Math.abs(t.deltaX)>Math.abs(t.deltaY))&&0!==i.wheelScrollHorz){var o=e.leftPos,n=Math.abs(i.wheelScrollHorz||16)*((t.deltaX||t.deltaY)>0?1:-1);return e.leftPos=o+n,!0}var r=e.topIndex,s=Date.now(),a=Math.abs(i.wheelScrollLines);a=a||3;var l=e.displayOptions.wheelDeltaY;if(l>0){if(!(this._wheelDeltaY+Math.abs(t.deltaY)>=l))return void(this._wheelDeltaY+=Math.abs(t.deltaY));this._wheelDeltaY=0}if(i.wheelAccelDelay>0)if(s>this._prevScroll+300)this._checkScroll=s;else if(this._checkScroll+i.wheelAccelDelay<s){var u=i.wheelAccelScroll;if(u&&!isNaN(u))a=parseInt(u);else if("string"==typeof u){var c=u.trim();if(c.indexOf("%")>0){var h=e.itemCount;a=parseInt(c.substr(0,c.length-1))/100*h}}}return this._prevScroll=s,e.topIndex=e.topIndex+(t.deltaY>0?a:-a),!i.wheelEventPropagate||r!=e.topIndex}return!1},i.prototype._doMouseEnter=function(t){},i.prototype._doMouseLeave=function(t){var e=t.mouseX,i=t.mouseY;this._hideTooltip(),this.$_setHoveredHeaderCell(null,e,i),this.$_setHoveredCell(null,e,i)},i.prototype._doMouseOver=function(t){},i.prototype._doContextMenu=function(t){return this.grid.doContextMenu(t)},i.prototype.$_doHome=function(t,e,i){var o=t.clone();if(t.first(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,1,o))return t.assign(e),!0},i.prototype.$_doEnd=function(t,e,i){var o=t.clone();if(t.last(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,-1,o))return t.assign(e),!0},i.prototype._doKeyDown=function(i){var o,n=i.keyCode,r=i.ctrlKey,s=xt.isMac,a=s&&i.metaKey||!s&&i.ctrlKey,l=i.shiftKey,u=i.altKey,c=this.grid,h=c.editOptions,p=c.layoutManager,d=c.popupMenuManager,f=h.skipReadOnly,g=h.skipReadOnlyCell,y=c.focusedIndex,_=y.clone(),m=h.verticalMoveStep;if(!c._fireKeyDown(i))return!0;if(!c.isEditing()&&c.accessibility&&xt.included(n,40,34,38,33,32,37,39)&&xt.stopEvent(i),d.isShow()&&xt.included(n,37,39,38,40,13,32)){var v=c.getBodyCellAt(y);return d.keyDown(i,v&&v.cell),!0}if(c.setEventFrom("keydown"),y&&!c.isEditing()&&(v=c.getBodyCellAt(y))&&this.$_performRendererKey(v,i))return!0;if(!c.isEditing()&&c.accessibility&&(67===n||86===n)&&a)return c.editController.setFocus(!0),!1;if(27==n)c.closePopups(),this._doCancel(c);else{if(13==n)return this._doEnter(c,h,_,i);if(9==n)return this._doTab(c,h,_,r,l,i);if(113==n)!c.isEditing()&&_.dataColumn&&(c.accessibility&&c.$_setEditFocused(!0,null),c.showEditor(_,l));else{if(xt.isMac&&i.metaKey&&i.shiftKey&&90===i.keyCode)return c.redo();if(90==n&&a)return c.undo();if(89==n&&a)return c.redo();if(45==n)h.appendWhenInsertKey||0==c.itemCount?c.append():c.insert(_.item,i.shiftKey,r);else{if(46==n)return r&&l?(c.revertSelection(),!0):r?(c.deleteSelection(),!0):!!l&&(c.eraseSelection(!1),!0);if(u&&l&&40==n)c.moveSelection(1,"keydown");else if(u&&l&&38==n)c.moveSelection(-1,"keydown");else if(32==n&&l&&a&&c.rowBarContainer.rowIndicator.visible){var b=c.selections.getItem(0),C=b&&(ea(b)||xt.included(b.style,t.SelectionStyle.BLOCK,t.SelectionStyle.GROUP))&&b.getItems(c.checkBar.merged||c.checkBar.fieldIndex>=0);C||c.checkBar.merged?(C=C||[_.item],c.toggleChecks(C,_.item)):c.toggleCheck(_.itemIndex)}else if(c.editOptions.useArrowKeys&&xt.included(n,36,35,39,37,40,38,34,33)){xt.isMobile()&&i&&i.preventDefault&&i.preventDefault();var w=c.itemCount;if(40==n&&0==w)return c.append(),!0;if(!c.isValid(_))return _.normalize(c),this.setFocused(_,!0,!0),!0;if((xt.included(n,40,34)||35==n&&r)&&_.isBottom&&this.$_checkAppending(_))return!0;if((xt.included(n,38,33)||36==n&&r)&&_.isTop&&this.$_checkAppending(_,!0))return!0;var S=c.getBodyViewAt(_);if(!S)return!0;switch(n){case 36:if(r){if(this.$_doHome(_,y,f))break}else _.home(),this._skipReadOnly(_,1);break;case 35:if(r){if(this.$_doEnd(_,y,f))break}else _.end(),this._skipReadOnly(_,-1);break;case 39:if(S.spanRight(p,_),_.right(),f&&this._checkReadOnly(_)&&!this._skipReadOnly(_,1)){_.assign(y);break}break;case 37:if(_.left(),f&&this._checkReadOnly(_)&&!this._skipReadOnly(_,-1)){_.assign(y);break}break;case 38:if(s&&a){this.$_doHome(_,y,f);break}try{if(0==_.itemIndex&&_.isTop){if(this.$_commitCancel(_.item,h))return!0;r&&s?_.first():c.filterPanel.visible?c.inlineFilterFocus(_.layout):_.up(m)}else if(r&&s)_.first();else{if(r)return void c.topIndex--;_.up(m,c.isItemEditing(_.item))}}finally{g&&this._checkReadOnly(_)&&(this._skipReadOnlyCell(_,-1)||_.assign(y))}break;case 33:if(r&&!s)return c.topIndex=c.topIndex-p.fullItemCount,!0;if(o=_.clone(),_.incRow(-p.fullItemCount),f&&this._checkReadOnly(_)&&!this._skipReadOnlyCell(_,1,o)){_.assign(y);break}break;case 40:if(s&&a){this.$_doEnd(_,y,f);break}try{if(_.itemIndex!=w-1||!_.isBottom&&m!=t.VerticalMoveStep.ROW)if(r&&s)_.last();else{if(r)return c.topIndex++,!0;_.down(m,c.isItemEditing(_.item))}else{if(_.isBottom&&this._commitCancel(_.item,h))return!0;c.append(),r&&s?_.last():_.down(m,c.isItemEditing(_.item))}}finally{g&&this._checkReadOnly(_)&&(this._skipReadOnlyCell(_,1)||_.assign(y))}break;case 34:if(_.itemIndex==c.itemCount-1&&_.isBottom&&bo(_.item.itemState))return c.commit(h.forceAppend),!0;if(r&&!s)return c.topIndex=c.topIndex+p.fullItemCount,!0;if(o=_.clone(),_.incRow(p.fullItemCount),f&&this._checkReadOnly(_)&&!this._skipReadOnlyCell(_,-1,o)){_.assign(y);break}}return S.spanHead(p,_),l&&c.selections.count>0&&!ta(c.displayOptions.selectionStyle)?(this.setFocused(_,!1,!1),c.selections.lastItem().resizeTo(_)):this.setFocused(_,!0,!0),!0}}}}return e.prototype._doKeyDown.call(this,i)},i.prototype._doKeyPress=function(t){this.grid._fireKeyPress(t)},i.prototype._doKeyUp=function(t){if(xt.isIE){var e=t.ctrlKey,i=t.keyCode,o=this.grid;90===i&&e&&o.undo()}this.grid._fireKeyUp(t)},i.prototype._editButtonClicked=function(t,i){this.grid.makeCellVisible(t),this.grid.showEditor(t)&&this.grid.editorButtonClicked(t,i),e.prototype._editButtonClicked.call(this,t,i)},i.prototype._getSelectRequest=function(e,i,o,n,r,s){var a=this.grid,l=a.displayOptions,u=l.selectionMode,c=l.selectionStyle,h=this._findTableCell(e);if(!h)return null;var p=a.getCellType(h);if("indicator"==p){if(a.rowIndicator.selectable&&u!=t.SelectionMode.NONE&&c!=t.SelectionStyle.NONE&&!ta(c))return new Hu(a.getIndex(a.rowBarContainer.getCellIndex(h)),t.SelectionStyle.ROWS)}else if("header"==p){if(n){var d=a.headerView.columnByCell(h);if(a.rowIndicator.selectable&&u!=t.SelectionMode.NONE&&c!=t.SelectionStyle.NONE&&!ta(c))return new Hu(a.getIndex(-1,d),t.SelectionStyle.COLUMNS)}}else if("data"==p){var f=a.getDataCellIndex(h,this._tempIndex);if(n&&a.selections.containsCell(f))return null;if(u!=t.SelectionMode.NONE&&c!=t.SelectionStyle.NONE&&!ta(c)&&!xt.isMobile())return new Hu(f.clone(),c)}return null},i.prototype._getEditRequest=function(t,e,i,o,n,r,s){var a=St(this.grid.doc),l=this.grid,u=l.layoutManager,c=l.displayOptions,h=this._findTableCell(t);if(!h)return null;var p=l.getTableView(h),d=this.$_getRowResizeRequest(p,h,i,o,n,r,s);if(d)return d;if(p instanceof rc&&p.isRowIndicator(h)){if(s&&(xt.isIE||xt.isEdge)&&(s=n),s&&l.canMoveRow(!1,!1)){var f=l.getSelection(),g=l.rowBarContainer.rowOf(h),y=!1;if(f?y=f.containsItem(g):g==e.itemIndex&&(y=!0),y)return this._rowMoveReq.init(f,g)}}else if(p instanceof ml){if(t instanceof a.HTMLInputElement)return null;if(n);else{var _=p.layoutByCell(h);if(_){var m=l.cellToContainer(h,this._reqPoint.setEmpty());if(c.columnResizable&&_._isResizable()&&(l.fixedOptions.resizable||_.root.vindex>=u.fixedLayoutCount&&_.root.vindex<u.rightFirstLayout)){var v=l.headerView.tableCellByLayout2(u,_);if(m.x+=v?v.width:_.domWidth,i>=m.x-3&&i<=m.x+3)return this._colResizeReq.init(_,i,o,i-m.x)}if(c.columnMovable&&_._isMovable()&&(!_.isRoot||l.canMoveLayout(_)))return this._colMoveReq.init(_,i,o,-1)}}}else if(p instanceof fl){var b=l.getDataCellIndex(h,this._tempIndex);if(g=b&&b.itemIndex,l.canMoveRow(!1,!1)&&g>=0){var C=!1;if(f=l.getSelection(),(v=l.getBodyCellAt(b,!0)).expander===t)return null;if(s&&(xt.isIE||xt.isEdge)&&(s=n),f?(C=f.containsItem(g))&&!s&&(C=f.containsLayout(b.layout)&&this._canMoveRowAt(p,b,i)):e&&g==e.itemIndex&&(C=!!s||hs.areEquals(b,e)&&this._canMoveRowAt(p,b,i)),C)return this._rowMoveReq.init(f,g)}}else if(p instanceof au){var w=p.boundsByContainer();if(l.header.resizable&&o<=w.bottom+1&&o>=w.bottom-2)return this._headerResizeReq.init(w.top,o-w.bottom-1)}},i.prototype.$_resizeSelection=function(e,i,o){var n=this.grid.selections,r=e?e.runStyle:o;if(!ta(r)&&xt.included(o,t.SelectionStyle.ROWS,t.SelectionStyle.COLUMNS,t.SelectionStyle.SINGLE_COLUMN)&&(r=o),e){if(e.runStyle!=r){this.grid.selections.clear();var s=e.getBounds();e=n.add(s.firstCell,s.lastCell,r)}n.canResize(e)&&e.resizeTo(i)}else e=n.add(i,i,r)},i.prototype._canMoveRowAt=function(t,e,i){return i<t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)).x+20},i.prototype.$_getRowResizeRequest=function(t,e,i,o,n,r,s){var a=-1,l=this.grid;if(t instanceof rc?a=e.parentElement.$_row:t instanceof fl&&(l.rowBarContainer.isVisible()||t.rightFixed||(l.fixedOptions.colCount>0&&t.fixed||0===l.fixedOptions.colCount)&&0===e.cellIndex&&(a=e.parentElement.$_row)),a<0)return null;var u=l.layoutManager,c=l.displayOptions,h=c.eachRowResizable&&!n,p=u.fixedItemCount,d=u.contentBounds.y,f=t.boundsByContainer(this._tempRect.setWidth(t.width));if(f.width<=0||i<f.x||i>=f.right)return null;if(a<p){if(l.fixedOptions.rowResizable&&(!c.dataHeights||c.dataHeights.length<=0)&&((f=u.getItemRect(a)).y+=d,o<=f.bottom+2&&o>=f.bottom-3))return this._rowResizeReq.init(a,h,f.y,o-f.bottom-1)}else if(c.rowResizable&&(!c.dataHeights||c.dataHeights.length<=0))for(var g=u.itemCount,y=l.topIndex,_=0;_<g;_++){var m=_+y+p;if(m==a&&((f=u.getItemRect(_+p)).y+=d,o<=f.bottom+2&&o>=f.bottom-3))return this._rowResizeReq.init(m,h,f.y,o-f.bottom-1)}return null},i.prototype._getDragTracker=function(e,i,o){if(e instanceof Hu)switch(e.style){case t.SelectionStyle.ROWS:return new jl(e,i,o);case t.SelectionStyle.COLUMNS:return new Hl(e,i,o);case t.SelectionStyle.BLOCK:case t.SelectionStyle.GROUP:return new Gl(e,i,o)}else{if(e instanceof $u)return new Ll(e,this._cellResizer);if(e instanceof Wu)return new Ml(e,this._cellFeedback,this._cellMover);if(e instanceof Uu)return new Fl(e,this._cellResizer);if(e instanceof Ku)return new Vl(e,this._rowMoverProxy,this._rowMoverLine);if(e instanceof zu)return new Nl(e,this._cellResizer);if(xt.isMobile()){if(e instanceof ac)return this._touchScrollTracker.request=e,this._touchScrollTracker;if(e instanceof lc)return this._touchSelectTracker.request=e,this._touchSelectTracker}}return null},i.prototype.$_checkCellClicked2=function(e,i){if(e!==i.target&&e.firstElementChild!==i.target){var o=Ct(e),n=this.grid,r=n.rowBarContainer.getCheckBox(e);if(n.editOptions.checkable){var s=n.getEditItem(),a=n.getItem(e.parentElement[b]);if(s&&s.dataRow!==a.dataRow){var l=n.editOptions;switch(s.itemState){case t.ItemState.APPENDING:n.commit(l.forceAppend);break;case t.ItemState.INSERTING:n.commit(l.forceInsert);break;case t.ItemState.UPDATING:n.commit(l.commitWhenNoEdit)}}i.target instanceof o.HTMLSpanElement&&a.checkable&&(r.checked=n.checkBar.exclusive||!r.checked),this._doCheck(r,a,i.shiftKey)}else i.preventDefault()}},i.prototype._doCheck=function(t,e,i){var o=this.grid,n=o.checkBar,r=o.rowBarContainer.checkBar;if(o.editOptions.checkable){var s=o.checkBar;if(e.checkable&&(s.showGroup||e.dataRow>=0)&&t){var a=r._prevChecked,l=void 0,u=void 0,c=[],h=-1,p=-1,d=void 0;if(i&&a>=0&&!n.exclusive||s.merged){i&&a>=0?(l=hs.temp(o,a,null),u=o.getItem(a).checked,s.merged?(h=(d=s.merges.getRoom(l))?d.head:a,p=d?d.tail:a):(h=a,p=e.index)):(u=t.checked,h=p=e.index,r.$_setPrevChecked(e.index),n.exclusive&&o.itemSource._clearChecked()),s.merged?(l=hs.temp(o,e.index,null),d=s.merges.getRoom(l),h=Math.min(d?d.head:e.index,h),p=Math.max(d?d.tail:e.index,p)):(h=Math.min(h,e.index),p=Math.max(h,p));for(var f=h;f<=p;f++){var g=o.getItem(f);g.checkable&&g.dataRow>=0&&c.push(g)}c.length>0&&o.itemSource.checkItems(c,u,!0)}else if(o.itemSource.checkItem(e,t.checked,s.exclusive,!0),r.$_setPrevChecked(e.index),s.focusMove){var y=o.focusedIndex.clone();y.itemIndex=e.index,this.setFocused(y,!0,!0)}}}},i.prototype._checkAllClicked=function(){var t=this.grid;if(!t.empty&&t.editOptions.checkable){var e=t.checkBar,i=t.headView;e.showAll&&!e.exclusive&&(i.allChecked=!i.allChecked,t.itemSource.checkAll(i.allChecked,e.visibleOnly,e.checkableOnly,!0,e.showGroup&&!e.merged&&e.fieldIndex<0))}},i.prototype._doColumnHeaderClicked=function(t,i){if(e.prototype._doColumnHeaderClicked.call(this,t,i),2!=t.button){var o=i instanceof Yr?i.getDataColumn():null,n=this.grid,r=n.getHeaderView(this._clickCell).tableCellByCell(this._clickCell);if(o)if(t.target===r.check)r.check.checked=o.checked=!o.checked,n._columnCheckedChanged(o);else if(t.target===r.filter&&o.hasFilters)n.selectColumnFilters(r);else if(t.target===r.popup){var s=o.header.popupMenuName,a=n.getCellViewOf(r.cell);s&&a&&n.popupMenuManager.show(s,a,null,!0)}else xt.isClickableTemplate(r.cell,t.target)||!o.sortable||!n.sortingOptions.enabled||this.dragTracker instanceof Hl||n.sortColumn(o,t);else i instanceof Zr&&t.target===r.expander&&i.expandable&&(i.expanded=!i.expanded)}},i.prototype.$_columnHeaderClicked=function(t,e){t.button,this._doColumnHeaderClicked(t,e),t.preventDefault()},i.prototype.$_gridCellClicked=function(t){this.grid._fireCellClicked(t)},i.prototype.$_gridCellDblClicked=function(t){this.grid._fireCellDblClicked(t)},i.prototype.$_setHoveredCell=function(t,e,i){var o=this.grid,n=this._findTableCell();if(t&&n){var r=o.getTableView(n),s=this.$_getIndexAt(o,o.layoutManager,r,n,i);if(t!==this._tooltipCell||!hs.areEquals(this._tooltipIndex,s)){this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var a=o.displayOptions.hintDelay;if(t)if(a>0){var l=this;this._tooltipShowTimer=setTimeout(function(){l.$_showTooltip2(t,s)}.bind(l),a)}else this.$_showTooltip2(t,s)}}},i.prototype._hideTooltip=function(t,e){this.grid.tooltipManager.close(t,e),this._tooltipCell=null,this._tooltipIndex.reset()},i.prototype.$_showTooltip2=function(t,e){var i=this.grid,o=i.validationManager.getError(e),n=this._tooltipOptions;if(i.editOptions.hintOnError&&o)n.message=o.message,this.$_showTooltip(t,e,n);else{var r=t.renderer2,s=i.getCellType(t.cell),a=e.item,l="data"===s&&(!xt.isMobile()||i.mobileOptions.showTooltip);if(a instanceof Un?l=l&&e.dataColumn.groupLevel>0&&a.groupLevel+1>=e.dataColumn.groupLevel:a instanceof Wn&&(l=l&&e.dataColumn&&a.level>e.dataColumn.groupLevel),(l=l&&!!r)&&(l=i.displayOptions.showTooltip?!1!==r.showTooltip:r.showTooltip),l&&!hs.areEquals(e,this._tooltipIndex)){var u=r.getTooltip(t,e);if(u||i.displayOptions.showEmptyTooltip){var c=i._fireShowTooltip(e,u);c&&(this._tooltipOptions.assignFrom(c),this.$_showTooltip(t,e,this._tooltipOptions))}}}},i.prototype.$_showTooltip=function(t,e,i){var o=this.grid,n=o.tooltipManager,r=o.layoutManager;if(!n.visible||this._tooltipCell!=t){this._hideTooltip();var s=o.getBodyView(t.cell),a=s.getCellRectAt(r,e,!1);a=s.boundsByContainer(a);var l=t.layout.isFixed?a.x:Math.max(a.x,r.nonFixedBounds.x),u=a.y+a.height;n.show(i,l,u,a.height,!1),this._tooltipCell=t,this._tooltipIndex.assign(e)}},i.prototype.$_showStateError=function(t,e){var i=this.grid,o=i.tooltipManager,n=i.layoutManager,r=this._tooltipOptions;if(t!==this._tooltipCell){this._hideTooltip(),r.message=e;var s=i.focusedIndex.itemIndex,a=i.rowBarContainer.boundsByContainer(),l=n.getItemBounds(s<n.fixedItemCount?s:s-n.topIndex);o.show(r,a.x,a.y+l.bottom,l.height,!0),this._tooltipCell=t,this._tooltipIndex.assign(null)}},i.prototype.$_setHoveredHeaderCell=function(t,e,i){if(t!=this._tooltipCell){this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var o=this.grid.displayOptions.hintDelay;if(o>0){var n=this;this._tooltipShowTimer=setTimeout(function(){n.$_showHeaderTooltip2(t)}.bind(n),o)}else this.$_showHeaderTooltip2(t)}},i.prototype.$_showHeaderTooltip2=function(t){var e=this.grid,i=e.header.showTooltip;if(!1!==i&&this._tooltipCell!=t){var o=t&&t.showTooltip;if(void 0===i?o:!1!==o){var n=t.tooltip||t.text;if(n){var r=e._fireShowHeaderTooltip(t.layout.firstColumn,n,t.layout);r&&(this._tooltipOptions.assignFrom(r),this.$_showHeaderTooltip(t,this._tooltipOptions))}}}},i.prototype.$_showHeaderTooltip=function(t,e){var i=this.grid,o=i.tooltipManager,n=i.layoutManager;if(!o.visible||this._tooltipCell!=t){this._hideTooltip();var r=n.getHeaderCellRect(t.layout,!1),s=t.layout.isFixed?r.x:Math.max(r.x,n.nonFixedBounds.x),a=r.y+r.height;o.show(e,s,a,0,!0),this._tooltipCell=t}},i.prototype.$_cellButtonClicked=function(e){var i=this.grid,o=e.layout.firstColumn;if(o){i.layoutManager;var n=e.getEditIndex(this._tempIndex);switch(o.button){case t.CellButton.POPUP:var r=o.popupMenuName,s=i.getCellViewOf(e.cell);r&&s&&i.popupMenuManager.show(r,s,n,!0);break;case t.CellButton.ACTION:i._doCellButtonClicked(n)}}},i.prototype.$_commitCancel=function(e,i){var o=this.grid;try{switch(e.itemState){case t.ItemState.INSERTING:return o.commit(i.forceInsert)||o.cancel(!0),!0;case t.ItemState.APPENDING:return o.commit(i.forceAppend)||o.cancel(!0),!0;case t.ItemState.UPDATING:return o.commit(i.commitWhenNoEdit)||o.cancel(!0),!0}}catch(t){if(t instanceof hr)return(t=o._fireValidationFail(e.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof cr)return!1;throw t}return!1},i.prototype.$_checkAppending=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null);var o=this.grid;if(t.itemIndex==o.itemCount-1&&bo(t.item.itemState)){var n=t.itemIndex;if(!i||i.itemIndex!=n){try{o.commit(o.editOptions.forceAppend,!0)?((t=t.clone()).itemIndex=n,o.isValid(t)||(t.itemIndex=o.getItemIndexOfRow(o.dataSource.rowCount-1)),this.setFocused(t,!0,!0)):e&&(o.cancel(!0),i&&this.setFocused(i,!0,!0))}catch(t){if(t instanceof hr)return(t=o._fireValidationFail(n,t.column,t))&&alert(o.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!0;if(t instanceof cr)return!0;throw t}return!0}}return!1},i.prototype._getTouchRequest=function(t){var e=this.grid,i=e.selectionLayer;if(i instanceof dc){var o=i.getSelectHandle(t.target);if(o)return this._touchSelectRequest.handle=o,this._touchSelectRequest}var n=e.getCellViewOf(t.target),r=e.getCellType(n);if(!n){var s=this.findElementAt(t.mouseX,t.mouseY,!1),a=this._getClickData(s,t);r=a&&a.cellType}switch(r){case"data":var l=e.getBodyCellbyCell(t.target);if(l&&l.isEditButton(t.target))return;return this._touchScrollRequest;case"gridEmpty":case"footer":case"summary":case"groupFooter":case"groupHeader":case"indicator":case"state":case"check":return this._touchScrollRequest}},i.prototype.onLongTapHandler=function(t,e,i){var o=this.grid,n=o.cellToIndex(t.target),r=this.grid.getBodyCellbyCell(t.target);if(r&&r.isEditButton(t.target))return this.setFocused(n,!0,!0),r.editable&&!r.readonly&&o.editController.buttonDown(n,t),!0},i.prototype._doTouchMove=function(t){var e=this.grid.mobileOptions;if(!this._longPressed){clearTimeout(this._longTimer),this._longPressed=!1;var i=this.dragTracker,o=!!i;return i instanceof cc&&(o=i._scrolling),(o||this._swipeTimer||!e.scrollPropagate)&&t.cancelable&&t.preventDefault(),this._touchEvents.push({x:t.mouseX,y:t.mouseY,t:t.timeStamp}),!1}},i.prototype._checkSwipe=function(t){if(this.dragTracker instanceof cc){var e=this.grid,i=this._clickCell&&e.getTableView(this._clickCell);if(!((i=i||this.findElementAt(t.mouseX,t.mouseY,!1))instanceof Sl||i instanceof Ua||i instanceof fl)){var o=this._getClickData(i,t);if(o&&"groupHeader"!==o.cellType)return}var n=this._touchEvents,r=n.length;if(!(r<2)){for(var s=n[r-1],a=n[r-2],l=r-3;l>=0&&!(s.t-a.t>100);l--)a=n[l];var u=a.x,c=a.y,h=s.x,p=s.y,d=Math.sqrt(Math.pow(u-h,2)+Math.pow(c-p,2))/Math.max(16,s.t-a.t),f=.998;if(d>.1){var g=Math.log(.1/d)/Math.log(f),y=d*(1-Math.pow(f,g+1))/(1-f),_="right",m=Math.round(180*Math.atan2(p-c,h-u)/Math.PI);if(m<0&&(m=360+m),m>45&&m<=135?_="bottom":m>135&&m<=225?_="left":m>225&&m<=315&&(_="top"),i instanceof Sl&&xt.included(_,"bottom","top"))return;return this.onSwipeHandler(g,y,_,t)}}}},i.prototype.onSwipeHandler=function(t,e,i,o){this._touchMoving=!0,this._swipeDuration=t,this._swipeStarted=xt.getTimer(),this._swipeAmount=0;var n=1;switch(i){case"right":n=-1;case"left":this._swipeDistance=n*e/20,this._swipeTimer=setInterval(this.$_scrollLeftPos.bind(this),50);break;case"bottom":n=-1;case"top":this._swipeDistance=n*e/20,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}return!0},i.prototype.$_checkTopBottom=function(t){var e=this.grid,i=e.layoutManager;return 0===e.topIndex&&t<0||e.topIndex+i.fullItemCount>=e.itemCount&&t>0},i.prototype.$_scrollRow=function(){var t=xt.getTimer();if(Math.abs(this._scrollY-window.scrollY)>10)this._touchMoving=this._swipeTimer=clearInterval(this._swipeTimer);else if(t-this._swipeStarted<this._swipeDuration){var e=Math.floor(50*(this._swipeDistance-this._swipeAmount)/this._swipeDuration);this._swipeAmount-=e,this.grid.topIndex+=e,this.$_checkTopBottom(e)&&(this._swipeTimer=clearInterval(this._swipeTimer))}else this._swipeTimer=clearInterval(this._swipeTimer)},i.prototype.$_scrollLeftPos=function(){xt.getTimer()-this._swipeStarted<this._swipeDuration?this.grid.leftPos+=Math.floor(this._swipeDistance):this._touchMoving=this._swipeTimer=clearInterval(this._swipeTimer)},i}(Oc),Pc=function(t){function e(e){var i=t.call(this)||this;return i._cellEditors={},i._customRenderers={},i._grid=e,i}return n(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),e.prototype.getDefaultCellEditor=function(){if(!this._defaultEditor){var t=this._grid.container._container;this._defaultEditor=new _a(this._grid,t),this._defaultEditor.setController(this._grid.editController)}return this._defaultEditor},e.prototype.getCellEditor=function(t){var e=this._grid.container._container,i=this._cellEditors[t];if(!i){switch(t){case"list":case"dropdown":i=new Ra(this._grid,e);break;case"nlist":i=new Da(this._grid,e);break;case"multiline":i=new va(this._grid,e);break;case"number":i=new Sa(this._grid,e);break;case"date":i=new Du(this._grid,e);break;case"btdate":i=new Au(this._grid,e);break;case"search":i=new Pa(this._grid,e);break;case"checklist":i=new Ta(this._grid,e);break;case"password":i=new ma(this._grid,e);break;case"ndate":i=new Lu(this._grid,e);break;default:i=this.getDefaultCellEditor()}this._cellEditors[t]=i,i&&i.setController(this._grid.editController)}return i},e.prototype.$_checkFlexible=function(t,e){if(!xt.ieOld&&!xt.ieTen)return t&&t.flexible||e&&e.flexible},e.prototype.createRenderer=function(t,e,i){var o=null;if(t){switch(t){case En.TYPE:o=new En;break;case On.TYPE:o=new On;break;case Rn.TYPE:o=new Rn;break;case Tn.TYPE:o=this.$_checkFlexible(e,i)?new Pn:new Tn;break;case Dn.TYPE:o=this.$_checkFlexible(e,i)?new kn:new Dn;break;case An.TYPE:o=new An;break;case Mn.TYPE:o=this.$_checkFlexible(e,i)?new Fn:new Mn;break;case Ln.TYPE:o=new Ln;break;case Nn.TYPE:o=new Nn;break;case Vn.TYPE:o=new Vn;break;case Bn.TYPE:o=new Bn;break;case Qa.SERIES_TYPE:o=new Qa;break;case Za.TYPE:o=new Za;break;case tl.TYPE:o=new tl;break;case el.TYPE:o=new el;break;case Hn.TYPE:o=new Hn}if(!o){var n=this._customRenderers[t];o="function"==typeof n?new n(t):new Ju(n,t)}o||(xt.log("Renderer type is invalid: "+t),o=new En),e&&o.assignFrom(e),i&&o.assignFrom(i)}return o},e.prototype.addCustomRenderer=function(t,e){t&&e&&(this._customRenderers[t]=e)},e.prototype.removeCustomRenderer=function(t){delete this._customRenderers[t]},e.prototype.existsCustomRenderer=function(t){return this._customRenderers.hasOwnProperty(t)},e.prototype.clearCustomRenderers=function(){this._customRenderers={}},e}(kt),Dc=function(t){function e(e,i,o){void 0===i&&(i=0),void 0===o&&(o=!1);var n=t.call(this,e)||this;if(i<1)throw new Error("LookupTable levels must be equals or greater than 1");return n._levels=i,n._tree={},n._listMap=o?{}:null,n}return n(e,t),e.prototype._doDispose=function(){this._tree=this._listMap=null,t.prototype._doDispose.call(this)},e.prototype.clear=function(){this._tree=this._listMap={},this._changed()},e.prototype.exists=function(t){var e;if((t=xt.makeArray(t))&&(e=t.length)>0&&e<=this._levels){if((e=Math.min(e,this._levels)-1)>0){for(var i=this._tree,o=0;o<e&&(i=i[t[o]]);o++);return null!=i&&i.hasOwnProperty(t[e])}return this._tree.hasOwnProperty(t[0])}return!1},e.prototype.fill=function(t,e){if(t&&t.length>0&&e&&e.length>0){for(var i=Math.min(t.length,e.length),o=0;o<i;o++){var n=xt.makeArray(t[o]);this.$_add(n,e[o])}this._changed()}},e.prototype.fillRows=function(t){if(t&&t.length>0){for(var e=0,i=t.length;e<i;e++)this.$_addRow(t[e]);this._changed()}},e.prototype.add=function(t,e){t&&(this.$_add(t,e),this._changed())},e.prototype.addRow=function(t){t&&(this.$_addRow(t),this._changed())},e.prototype.lookup=function(t,e){var i;if(this._levels>1){var o=void 0,n=this._levels-1;for(i=this._tree,o=0;o<n&&(i=i[t[o]]);o++);}else i=this._tree;var r=t[t.length-1];if(i&&r&&e){for(var s=r.split(e),a=[],l=(o=0,s.length);o<l;o++)a.push(i[s[o]]?i[s[o]]:s[o]);return a.join(e)}return i?i[r]:void 0},e.prototype.getDomain=function(t){if(!t||t.length!=this._levels-1)throw new Error("Keys length must be "+(this._levels-1));var e,i,o=this._tree,n=[],r=[];if(this._levels>1)for(e=0,i=t.length;e<i;e++)if(!(o=o[t[e]]))return{keys:n,values:r};if(this._listMap){var s=this._listMap[t.slice(0,t.length).join("~!~")];for(i=s?s.length:0,e=0;e<i;e++)n.push(s[e]),r.push(o[s[e]])}else for(var a in o)n.push(a),r.push(o[a]);return{keys:n,values:r}},e.prototype.getTextDomain=function(t){for(var e=this.getDomain(t),i=e.keys,o=e.values,n=0,r=e.keys.length;n<r;n++)i[n]=i[n]?String(i[n]):null,o[n]=o[n]?String(o[n]):null;return e},e.prototype.$_add=function(t,e){if(t){t=xt.makeArray(t);var i,o,n,r,s=this._levels;if(t.length<s)throw Error("Keys length must be equals or greater than "+s);var a=this._tree;for(o=0;o<s-1;o++)(r=a[n=t[o]])||(r={},a[n]=r),a=r;if(a[i=t[s-1]]=e,this._listMap){var l=t.slice(0,t.length-1).join("~!~"),u=this._listMap[l];xt.isArray(u)||(u=[],this._listMap[l]=u),u.push(i)}}},e.prototype.$_addRow=function(t){if(t){if(t.length-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);var e=t[this._levels];t=t.slice(0,this._levels),this.$_add(t,e)}},e}(function(t){function e(e){var i=t.call(this)||this;return i._id=e,i}return n(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.exists=function(t){return!1},e.prototype._changed=function(){this.fireEvent(e.CHANGED)},e.CHANGED="onLookupSourceChanged",e}(Ee)),kc=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i._sources={},e&&i.load(e),i}return n(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this)},e.prototype.load=function(t){if(t=xt.makeArray(t)){this._sources={};for(var e=0,i=t.length;e<i;e++)this.$_add(t[e]);this._changed()}},e.prototype.add=function(t){var e=this.$_add(t);return e&&this._changed(),e},e.prototype.remove=function(t){this.$_remove(t)&&this._changed()},e.prototype.getSource=function(t){return this._sources[t]},e.prototype.$_createSource=function(t){if(t){var e=new Dc(t.id,t.levels,t.ordered);return e.fill(t.keys,t.values),e}return null},e.prototype.$_add=function(t){if(t&&t.id&&this._sources[t.id]!=t){var e=this.$_createSource(t);if(e)return this.$_remove(t.id),this._sources[t.id]=e,e.addListener(this),e}},e.prototype.$_remove=function(t){if(t){var e=this._sources[t];if(e)return e.removeListener(this),delete this._sources[t],!0}return!1},e.prototype.onLookupSourceChanged=function(t){this._changed()},e.CHANGED="onLookupSourceProviderChanged",e}(function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._changed=function(){this.fireEvent(e.CHANGED)},e.CHANGED="onLookupSourceProviderChanged",e}(Ee)),Ac=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,i._enabled=!0,e&&e.name&&(i._name=e.name),e&&i.assignFrom(e),i}return n(e,t),e.prototype._doDispose=function(){return t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled&&!this.isSeparator()},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"manager",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.click=function(){},e.prototype.isSeparator=function(){return!1},e}(Ee),Lc=function(e){function i(t,i){var o=e.call(this,i)||this;return o._parent=t,o}return n(i,e),i.prototype._doDispose=function(){this._parent=null,this._callback=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return this._group},set:function(t){this._group=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t},enumerable:!1,configurable:!0}),i.prototype.isSeparator=function(){return"-"===this._label||this._type===t.MenuItemType.SEPARATOR},i.prototype.getData=function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this.tag}},i.prototype.click=function(){"check"===this._type&&(this._checked=!this._checked),this._parent&&this._parent.itemClicked(this)},Object.defineProperty(i.prototype,"manager",{get:function(){return this._parent.manager},enumerable:!1,configurable:!0}),i.prototype._itemClicked=function(t){},i}(Ac),Mc=function(e){function i(t,i){var o=e.call(this,i)||this;return o._parent=t,o._items=o._load(i.children),o}return n(i,e),i.prototype._doDispose=function(){this._items&&this._items.forEach((function(t,e){t.dispose()})),this._items=null,this._parent=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"children",{get:function(){return this._items},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manager",{get:function(){for(var t=this._parent;t;){if(t.popupMenuManager instanceof Nc)return t.popupMenuManager;if(t instanceof Nc)return t;t=t._parent}return null},enumerable:!1,configurable:!0}),i.prototype.count=function(){return this._items?this._items.length:0},i.prototype.itemClicked=function(e){if(e.parent==this&&e.type===t.MenuItemType.RADIO){var i=e.group,o=void 0;if(i){for(var n=0;n<this._items.length;n++)(o=this._items[n])instanceof Lc&&o.type===t.MenuItemType.RADIO&&o.group===i&&(o.checked=!1);e.checked=!0}}var r=this.manager.grid;"function"==typeof e.callback?e.callback.call(this,r.handler,e.toProxy(),this.manager.clickData):this._parent instanceof Nc?this._parent.doMenuItemClick(e,this.manager.clickData):this._parent.onMenuItemClick?this._parent.onMenuItemClick(e,this.manager.clickData):this._parent.itemClicked(e)},i.prototype.addMenu=function(t,e){var i;void 0===e&&(e=-1);var o=this._load(xt.makeArray(t));e<0&&(e=this._items.length),(i=this._items).splice.apply(i,l([e,0],o,!1))},i.prototype.removeMenu=function(t){var e=this.getMenu(t);if(e){var i=this._items.indexOf(e);return this._items.splice(i,1),e.dispose(),!0}},i.prototype.getMenu=function(t){return xt.find(this._items,(function(e){return e.name===t}))},i.prototype._load=function(t){var e=[];if(t)for(var o=0,n=t.length;o<n;o++){var r=t[o];if(xt.isArray(r.children)&&r.children.length>0){var s=new i(this,r);e.push(s)}else s=new Lc(this,r),e.push(s)}return e},i.CLICKED="onPopupMenuClicked",i}(Ac),Fc=function(e){function i(t){var i=e.call(this)||this;return i._showing=!1,i._viewGridInside=!1,i._container=t,i._element=i._createElement(),i._element.addEventListener("contextmenu",(function(t){t.preventDefault()})),i}return n(i,e),i._borrowView=function(t){var e=i.$_views[t.$_hash]||[];return i.$_views[t.$_hash]=e,e.pop()||new i(t)},i._returnView=function(t){i.$_views[t._container.$_hash].push(t)},i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"parentView",{get:function(){return this._parentView},set:function(t){this._parentView=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childView",{get:function(){return this._childView},set:function(t){this._childView=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currDiv",{get:function(){return this._currDiv},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manager",{get:function(){return this._menu.manager},enumerable:!1,configurable:!0}),i.prototype.getElementId=function(){return"rg-popup-"+this._menu.name},i.prototype.show=function(t,e,i,o,n,r,s,a){if(!this._showing){this._showing=!0;try{var l=i.parent;for(this._containerElement=t._container,this._parentView=e,this._firstItem=null,this._menu=i;l._parent&&!(l instanceof Rh);)l=l.parent;l&&(this._viewGridInside=l instanceof Rh?l.editorOptions.viewGridInside:l instanceof Nc&&l.grid.editorOptions.viewGridInside),this.$_show(t,this._menu,o,n,r,s)}finally{this._showing=!1}}},i.prototype.boundsByContainer=function(){return null},i.prototype.hide=function(t){void 0===t&&(t=!0),t&&this._parentView?this._parentView.hide(!0):(this.$_hideChildView(),xt.detach(this._element))},i.prototype.hideChild=function(){this.$_hideChildView()},i.prototype.changeItemIndex=function(t){var e,i=this._itemIndex,o=this._menu._items;if(0==t)return this._itemIndex=-1,void this.$_refreshItems(this._itemIndex);if(o&&!(i>=o.length)){for(;(e=o[i+=t])&&!e.enabled;);e&&(this._itemIndex=i,this.$_refreshItems(this._itemIndex))}},i.prototype.getActiveElementId=function(){var t=this._menu._items[this._itemIndex];return t?t._elementId:""},i.prototype.menuItemClicked=function(t){this._menuItemClicked(t)},i.prototype.$_show=function(t,e,i,o,n,r){if(this._element){var s=t.doc,a=St(s),l=this._element,u=l.style,c=this.manager,h=t.gridView.displayOptions.baseZindex,p=t._containerDiv;this._element.style.zIndex=String(h+4);var d,f=c.dropdownCount;if(this._viewGridInside)d=t._container;else{var g=p.parentNode;d=!xt.isSlotMode()||1!==g.nodeType&&11!==g.nodeType?s.documentElement:g}l.id="rg-popup-"+this._menu.name,this._menu=e,this._itemIndex=-1,xt.clearElements(this._element),this.$_buildItems(e),xt.disableSelection(l),d.appendChild(l);var y=0;if(f&&e.children.length>f)for(var _=0,m=0;_<e.children.length&&m<f;_++){var v=this._element.children[_];v.menuItem.isSeparator()||(y+=v.offsetHeight,m++)}y>0&&y<l.offsetHeight?(u.height=y+2+"px",u.overflow="auto"):(u.removeProperty("height"),u.overflow="hidden");var b=xt.getBrowserSize(),C=xt.ieTen||xt.ieOld?xt.getClientRect(s.body):xt.getClientRect(s.documentElement),w=xt.getClientRect(t._container),S=b.width,E=b.height,x=xt.getClientRect(l),O=a.pageXOffset||s.documentElement.scrollLeft,R=a.pageYOffset||s.documentElement.scrollTop;s.documentElement.scrollWidth>s.documentElement.clientWidth&&(E-=18),s.documentElement.scrollHeight>s.documentElement.clientHeight&&(S-=18),this._viewGridInside?(x.height>=w.height&&(u.height=w.height-4+"px",u.overflow="auto",x=xt.getClientRect(this._element)),o+w.top+x.height>w.bottom&&(o=this._parentView?w.bottom-x.height-w.top-3:o-x.height-r),i+w.left+x.width>w.right&&(i=this._parentView?w.right-x.width-w.left-3:i-x.width-n)):(this._parentView||(d===p.parentNode?(i+=p.offsetLeft,o+=p.offsetTop):(i+=w.left-C.left,o+=w.top-C.top)),x.height>=E&&(u.height=E-4+"px",u.overflow="auto",x=xt.getClientRect(this._element)),o+x.height>=E+R-3&&(o=o-x.height-3)<0&&(o=Math.max(0,E-x.height-3)),i+x.width>=S+O-3?i=Math.max(0,S-x.width-3):void 0!==n&&x.width<n&&(i+=n-x.width)),xt.move(this._element,Math.max(0,i),Math.max(0,o))}},i.prototype._createElement=function(){var t=function(t){27==t.keyCode&&this.hide()}.bind(this),e=this._container.doc.createElement("div");return e.style.setProperty("position","absolute","important"),e.className="rg-popup-menu",e.setAttribute("role","listbox"),e.tabIndex=-1,this._container.$_addListener(e,"keydown",t,!1),e},i.prototype._showChild=function(t){if(this==this.manager.showingView&&!(this._childView&&this._childView._menu===t.menuItem||this._currDiv!==t)){this.$_hideChildView();var e=t.menuItem,o=this._element.getBoundingClientRect(),n=this._element.offsetLeft+o.width-4,r=this._element.offsetTop+t.offsetTop-this._element.scrollTop;this._childView=i._borrowView(this._container),this._childView.show(this._container,this,e,n,r)}},i.prototype.$_hideChildView=function(){this.manager.showingView=null,this._childView&&(this._childView.$_hideChildView(),xt.detach(this._childView._element),i._returnView(this._childView)),this._childView=null},i.prototype._menuItemActived=function(t){this._currDiv=t;var e=t.menuItem,i=this.manager.showingView=this.manager.activeView=t.menuView;e instanceof Lc?i.childView&&i.$_hideChildView():e instanceof Mc&&e.enabled&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout((function(){i._showChild(t)}),200))},i.prototype._menuItemDeactived=function(t){},i.prototype._menuItemClicked=function(t){var e=t.menuItem;e instanceof Mc?e.enabled&&this._showChild(t):e?e.enabled&&(this.hide(!0),this.manager.close(),e.enabled&&e.click()):this.$_hideChildView()},i.prototype.$_refreshItems=function(t){for(var e=this._element,i=0,o=e.childElementCount;i<o;i++){var n=e.childNodes[i];if(i===t?xt.addClassName(n,"rg-popup-item-focused"):xt.removeClassName(n,"rg-popup-item-focused"),i==t){var r=n.offsetTop,s=n.offsetHeight+4,a=e.offsetHeight,l=e.scrollTop;l>r?e.scrollTop=Math.max(0,e.scrollTop+(r-l)):l+a<r+s&&(e.scrollTop=e.scrollTop+r+s-(l+a)),this._menuItemActived(n)}}},i.prototype.$_buildItems=function(e){for(var o=e.children,n=[],r=this._container.doc,s=0,a=o.length;s<a;s++){var l=i.$_menuId++,u=o[s];if(u.visible){var c=r.createElement("div");if(c.menuView=this,c.menuItem=u,c.setAttribute("role","option"),c.id=u._elementId="rg-popup-item"+l,u instanceof Lc&&u.isSeparator()){c.className="rg-popup-separator";var h=r.createElement("hr");h.className="rg-popup-separator-hr",c.appendChild(h),c.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this)}else{!this._firstItem&&(this._firstItem=c),n.length=0,n.push("rg-popup-item"),u.group&&n.push("rg-popup-"+u.group),!u.enabled&&n.push("rg-popup-item-disable"),c.className=n.join(" "),c.onclick=function(t){this._menuItemClicked(t.currentTarget)}.bind(this),c.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this),c.onmouseout=function(t){this._menuItemDeactived(t.currentTarget)}.bind(this),n=["rg-popup-content"],xt.included(u.type,t.MenuItemType.CHECK,t.MenuItemType.RADIO)&&(u.checked?n.push(u.group?"rg-popup-radio-checked":"rg-popup-check-checked"):n.push(u.group?"rg-popup-radio":"rg-popup-check")),u.styleName&&n.push(u.styleName),u instanceof Mc&&n.push("rg-popup-expander");var p=r.createElement("span");p.id="$popupMenu_item_"+l,p.innerHTML=u.label,p.className=n.join(" "),xt.disableSelection(p),c.appendChild(p)}xt.disableSelection(c),this._element.appendChild(c)}}},i.$_menuId=0,i.$_views={},i}(Ee),Nc=function(t){function e(e){var i=t.call(this)||this;return i._grolbalMouseHandler=function(t){for(var e=t.target;e;){if(e===this._mainView._element||e.menuItem)return;e=e.parentElement}this.close()}.bind(i),i._container=e,i._containerDom=e._containerDom,i._menus=[],i}return n(e,t),e.prototype._doDispose=function(){this.close(),this._mainView=null,this._showingView=null,this._clickData=null,this._activeView=null,this._container=this._containerDom=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"clickData",{get:function(){return this._clickData},set:function(t){this._clickData=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this._container.gridView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropdownCount",{get:function(){if(this._container&&this._container.gridView)return this._container.gridView.displayOptions.popupDropdownCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showingView",{get:function(){return this._showingView},set:function(t){this._showingView=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeView",{get:function(){return this._activeView},set:function(t){this._activeView=t},enumerable:!1,configurable:!0}),e.prototype.popupManager=function(){return this},e.prototype.isShow=function(){return!!this._mainView},e.prototype.indexOf=function(t){for(var e=this._menus.length;e--;)if(xt.compareTextValue(this._menus[e].name,t,!0,!1))return e;return-1},e.prototype.getMenu=function(t){return xt.find(this._menus,(function(e){return e.name===t}))},e.prototype.addMenu=function(t,e,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=null),xt.isWhiteSpace(t))throw"Menu name is empty.";var n=xt.find(this._menus,(function(e){return e.name===t}));if(n&&!i)return n;var r=this._menus.indexOf(n);return n&&n.dispose(),n=new Mc(o||this,{name:t,children:e}),r>=0?this._menus.splice(r,1,n):this._menus.push(n),n},e.prototype.removeMenu=function(t){var e=this.indexOf(t);e>-1&&this._menus.splice(e,1).forEach((function(t){return t.dispose()}))},e.prototype.show=function(t,i,o,n){var r=this.grid,s=Ct(this._containerDom),a=o&&r.getBodyCellAt(o);if("string"==typeof t?t=this.getMenu(t):t instanceof Mc||(t=new Mc(this,{children:t})),t){var l=this.grid.container.getBound(),u=void 0;u=a?(a.cellButton||a.merged&&a.head.cellButton||a.cell).getBoundingClientRect():i.getBoundingClientRect();var c=u.bottom,h=u.left-l.x,p=c-l.y,d=u.width,f=u.height;if(this._mainView=this._activeView=Fc._borrowView(this._container),i instanceof s.HTMLTableCellElement){var g=r.getCellType(i),y=r.getTableView(i),_=void 0;if("data"===g)_=(a=a||y.bodyCellByCell(i)).grouped?gc.getItem("groupHeader",a.item.index,null):gc.getCell(g,a,o);else if("header"===g){var m=y.layoutByCell(i);_=gc.getLayout(g,m)}this.clickData=_}else if(i instanceof s.HTMLElement){var v=r.getCellViewOf(i),b=(y=r.getTableView(v)).tableCellByCell&&y.tableCellByCell(v);"inlineFilter"===(g=r.getCellType(v))&&(this.clickData=gc.getLayout(g,b.layout))}var C="string"==typeof t?t:t.name,w=n?this.fireObjectEvent(e.POPUP_MENU_POPUP,h,p,this.clickData,C,!1):t;if("string"==typeof w)t=this.getMenu(w);else if(!1===w)return;t&&(this._mainView.show(this._container,null,t,h,p,d,f),!xt.isSlotMode()&&i&&i.setAttribute("aria-activedescendant",this._mainView.getElementId()),!xt.isSlotMode()&&s.addEventListener("pointerdown",this._grolbalMouseHandler,!1))}},e.prototype.showContext=function(t,e,i,o,n){if(t&&!this._mainView){var r=Ct(this._containerDom);this.clickData=n,this._mainView=this._activeView=Fc._borrowView(this._container),this._mainView.show(this._container,null,t,i,o,0,0,e),!xt.isSlotMode()&&r.addEventListener("pointerdown",this._grolbalMouseHandler,!1)}},e.prototype.close=function(){if(this._mainView){var t=Ct(this._containerDom);this._mainView.hide(),Fc._returnView(this._mainView),this._mainView=null,!xt.isSlotMode()&&t.removeEventListener("pointerdown",this._grolbalMouseHandler,!1)}},e.prototype.keyDown=function(t,e){this._doKeydown(t,e)},e.prototype.doMenuItemClick=function(t,i){this.fireEvent(e.MENU_ITEM_CLICKED,t,i)},e.prototype._doKeydown=function(t,e){var i=this._activeView,o=null==i?void 0:i.currDiv;switch(t.keyCode){case 40:i.changeItemIndex(1);break;case 38:i.changeItemIndex(-1);break;case 37:i.parentView&&(i.changeItemIndex(0),i.hideChild(),this._showingView=this._activeView=i.parentView||this._mainView);break;case 39:i&&i.childView&&(i=this._showingView=this._activeView=i.childView).changeItemIndex(1);break;case 13:case 32:o&&o.parentElement&&i.menuItemClicked(o)}!xt.isSlotMode()&&e&&e.setAttribute("aria-activedescendant",i.getActiveElementId())},e.prototype.$_buildItems=function(t){},e.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked",e.POPUP_MENU_POPUP="onPopupMenuManagerPopup",e}(Ee),Vc=function(t){function e(){return t.call(this,"summaryCell")||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"summaryIndex",{get:function(){return this._childIndex},set:function(t){this._childIndex=t},enumerable:!1,configurable:!0}),e.prototype._getSummary=function(t,e){return t&&t.headerSummaries.get(e)},e}(Ss),Bc=function(t){function e(e){return t.call(this,e)||this}return n(e,t),Object.defineProperty(e.prototype,"summaryIndex",{get:function(){return this._childIndex},enumerable:!1,configurable:!0}),e.prototype.getCellStyleName=function(){return e.CELL_CSS},e.prototype._createCell=function(){return new Vc},e.CELL_CSS="rg-header-summary-cell",e}(xs),Gc=function(t){function e(e){var i=t.call(this,e)||this;return i.visible=!1,i}return n(e,t),e.prototype._createSummary=function(t){return new Bc(t||this._grid)},e}(Rs),jc=function(t){function e(e,i){return t.call(this,e,i,"headerSummaryView")||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-header-summary"},e.prototype._getRendererStyle=function(){return"rg-header-summary-renderer"},e.prototype._getSummaryRows=function(t){return t.dataRows},e.prototype._getCollection=function(){return this.model},e.prototype._getSummaryHeight=function(t){return t.summaryHeight},e.prototype._getSummaryCount=function(t){return t.headerSummaryCount},e.prototype._getSpanOf=function(t,e){return t.getSummarySpan(e)},e.prototype._getUserSpanOf=function(t,e){return t.getSummaryUserSpan(e)},e.prototype._getSummaryItem=function(t,e){return t.firstColumn.headerSummaries.get(e)},e.prototype._getTableRowCount=function(t){return t.dataRows*t.headerSummaryCount},e}(Sl),Hc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e}(jc),$c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(jc),Wc=function(t){function e(e){var i=t.call(this,e,"gridSumCellView")||this;return i._text="",i._styleName="",i._textChanged=!1,i}return n(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())},enumerable:!1,configurable:!0}),e.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[xt.TextProp]=this._text)},e.prototype._doRender=function(t){},e}(qa),Uc=function(t){function e(e){var i=t.call(this,e,null,"gridSumView")||this;i._cells=[],i._count=0;for(var o=0;o<3;o++)i.addChild(i._cells[o]=new Wc(e));return i}return n(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},e.prototype.getSumModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this.getSumModel(t);return e instanceof Ts?e.getCellType():void 0},e.prototype._getCssSelector=function(){return"rg-sum"},e.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,o=t.sectionObjects;this._count=0;for(var n=0,r=o;n<r.length;n++){var s=r[n];s.visible&&((e=this._cells[this._count++]).model=s,s instanceof Ls?e.width=i.rowIndicator.width:s instanceof Fs?e.width=i.stateBar.width:s instanceof Vs&&(e.width=i.checkBar.width))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){var e=t.grid,i=this._count;this._getTableRowCount(t);for(var o=this._thead,n=o&&o.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var r=0;r<i;r++){var s=this.getChild(r),a=s.model;if(a.dirty||e._columnsDirty){var l=a.getSumCell(),u=this._getTableCell(0,r),c=u.firstElementChild,h=this.$_getCellSelector()+" "+a.getSumStyleName();if(n){var p=n.children[r];p&&(p[xt.TextProp]=a.getCellType()+" sum")}s.setStyleName(u,h),s.text=a.sumText,s.updateCell(e,l,c)}}},e.prototype._doRender=function(t){},e.prototype._doDraw=function(t){this._cells.forEach((function(t){t.validate()}))},e.prototype._getTableRowCount=function(t){return 1},e.prototype._getTableRowHeight=function(t,e){return this.height},e.prototype._getCellCount=function(t){return this._count},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype.$_getCellSelector=function(){return"rg-sum-cell"},e.CELL_CSS="rg-sum-cell",e}(Ka),zc=function(e){function i(i){var o=e.call(this,i)||this;return o._enabled=!0,o._handleVisibility=t.HandleVisibility.VISIBLE,o._commitBeforeFiltering=!0,o._toast=new hu({visible:!1,message:"Filtering..."}),o._includeParentItem=!0,o._selector=new Yc(i),o._automating=new qc(i),o}return n(i,e),i.prototype._doDispose=function(){this._selector=this._selector.dispose(),this._automating=this._automating.dispose(),this._toast=this._toast.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeFiltering",{get:function(){return this._commitBeforeFiltering},set:function(t){this._commitBeforeFiltering=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){this._includeParentItem=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selector",{get:function(){return this._selector},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"automating",{get:function(){return this._automating},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toast",{get:function(){return this._toast},enumerable:!1,configurable:!0}),i.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t),t.selector&&this._selector.assignFrom(t.selector),t.automating&&this._automating.assignFrom(t.automating),t.toast&&this._toast.assignFrom(t.toast)},i}(Ba),Kc="rg-filter-selector",Yc=function(t){function e(e){var i=t.call(this,e)||this;return i._listHeight=170,i._partialSearch=!0,i._filterReset=!0,i._filtersResetText=" ",i._acceptText="",i._cancelText="",i._allCheckText="( )",i._searchedCheckText="(  )",i._filterResetText="",i._showEmptyFilter=!0,i._emptyFilterText="( )",i._searchPlaceholder="...",i._maxWidth=0,i._width=0,i._minWidth=0,i._style=Kc,i}return n(e,t),Object.defineProperty(e.prototype,"listHeight",{get:function(){return this._listHeight},set:function(t){t!=this._listHeight&&(this._listHeight=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showButtons",{get:function(){return!!this._showButtons},set:function(t){this._showButtons=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"partialSearch",{get:function(){return this._partialSearch},set:function(t){t!=this._partialSearch&&(this._partialSearch=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"acceptText",{get:function(){return this._acceptText},set:function(t){t!=this._acceptText&&(this._acceptText=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelText",{get:function(){return this._cancelText},set:function(t){t!=this._cancelText&&(this._cancelText=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allCheckText",{get:function(){return this._allCheckText},set:function(t){t!=this._allCheckText&&(this._allCheckText=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showEmptyFilter",{get:function(){return this._showEmptyFilter},set:function(t){t!==this._showEmptyFilter&&(this._showEmptyFilter=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyFilterText",{get:function(){return this._emptyFilterText},set:function(t){t!=this._emptyFilterText&&(this._emptyFilterText=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchPlaceholder",{get:function(){return this._searchPlaceholder},set:function(t){t!=this._searchPlaceholder&&(this._searchPlaceholder=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchedCheckText",{get:function(){return this._searchedCheckText},set:function(t){t!=this._searchedCheckText&&(this._searchedCheckText=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"closeWhenClick",{get:function(){return!!this._closeWhenClick},set:function(t){this._closeWhenClick=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterReset",{get:function(){return this._filterReset},set:function(t){t!=this._filterReset&&(this._filterReset=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filtersResetText",{get:function(){return this._filtersResetText},set:function(t){t!=this._filtersResetText&&(this._filtersResetText=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterResetText",{get:function(){return this._filterResetText},set:function(t){t!=this._filterResetText&&(this._filterResetText=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=Math.max(t,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){t!==this._width&&(this._width=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!==this._minWidth&&(this._minWidth=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textToTitle",{get:function(){return!!this._textToTitle},set:function(t){this._textToTitle=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchIgnoreCase",{get:function(){return!!this._searchIgnoreCase},set:function(t){this._searchIgnoreCase=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeWhenEnter",{get:function(){return!!this._activeWhenEnter},set:function(t){this._activeWhenEnter=t},enumerable:!1,configurable:!0}),e}(Ba),qc=function(t){function e(e){var i=t.call(this,e)||this;return i._dateCategorize=!0,i._numberCategorize=!0,i._textCategorize=!1,i._dateYearFormat="YYYY",i._dateQuarterFormat="Q",i._dateMonthFormat="M",i._dateDayFormat="YYYY-MM-DD",i._lookupDisplay=!1,i}return n(e,t),Object.defineProperty(e.prototype,"dateCategorize",{get:function(){return this._dateCategorize},set:function(t){t!=this._dateCategorize&&(this._dateCategorize=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberCategorize",{get:function(){return this._numberCategorize},set:function(t){t!=this._numberCategorize&&(this._numberCategorize=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textCategorize",{get:function(){return this._textCategorize},set:function(t){t!=this._textCategorize&&(this._textCategorize=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateCategoryCallback",{get:function(){return this._dateCategoryCallback},set:function(t){t!=this._dateCategoryCallback&&(this._dateCategoryCallback=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberCategoryCallback",{get:function(){return this._numberCategoryCallback},set:function(t){t!=this._numberCategoryCallback&&(this._numberCategoryCallback=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textCategoryCallback",{get:function(){return this._textCategoryCallback},set:function(t){t!=this._textCategoryCallback&&(this._textCategoryCallback=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateYearFormat",{get:function(){return this._dateYearFormat},set:function(t){this._dateYearFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateQuarterFormat",{get:function(){return this._dateQuarterFormat},set:function(t){this._dateQuarterFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateMonthFormat",{get:function(){return this._dateMonthFormat},set:function(t){this._dateMonthFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateDayFormat",{get:function(){return this._dateDayFormat},set:function(t){this._dateDayFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filteredDataOnly",{get:function(){return this._filteredDataOnly},set:function(t){this._filteredDataOnly=t},enumerable:!1,configurable:!0}),e}(Ba);!function(t){t[t.ALL=0]="ALL",t[t.YQ=1]="YQ",t[t.YM=2]="YM",t[t.Y=3]="Y",t[t.QM=4]="QM",t[t.Q=5]="Q",t[t.M=6]="M",t[t.NONE=7]="NONE"}(Qu||(Qu={}));var Xc=function(){function e(t){this._options=t}return e.HasPartial=function(t,e,i){if(i&&(t=t&&t.toLowerCase(),e=e&&e.toLowerCase()),t.indexOf(e)>=0)return!0;for(var o=xt.hangulToChosungAll(t),n=xt.hangulToChosungAll(e),r=-1,s=!1;(r=o.indexOf(n,r+1))>=0;){for(var a=0;a<n.length&&a+r<o.length;a++){var l=xt.hangulToChosung(t[a+r]),u=xt.hangulToChosung(e[a]);if(u.org&&u.org!==l.org||!u.cho||u.cho!==l.cho){s=!1;break}s=!0}if(s)return!0}return!1},e.getDateProperty=function(t,e){if(!t)return null;switch(e){case 0:return t.getFullYear();case 1:return t.getMonth()>5?2:1;case 2:return Math.floor(t.getMonth()/3);case 3:return t.getMonth();case 4:var i=new Date(t.getFullYear(),t.getMonth(),1);return i.setDate(i.getDate()-i.getDay()),Math.floor((t.getTime()-i.getTime())/6048e5)+1;case 5:return t.getDate();case 6:return t.getHours()}},e.prototype.dispose=function(){return this._filters=null,this._options=null,null},Object.defineProperty(e.prototype,"searched",{get:function(){return this._searched},enumerable:!1,configurable:!0}),e.prototype.buildItems=function(e,i,o,n){void 0===n&&(n=!0);var r=this._options.selector,s=this._options.automating,a=r.emptyFilterText;this._autoFilter=o;var l=this._filters=o?e.autoFilters:e.filters,u=[];if(o){e.autoFilters.activeCount>0&&(u=this._getActivatedFilters(e.autoFilters)),e.autoFilters.clear(!1);var c=!1,h=void 0;this._valueType=e.valueType;var p=s.filteredDataOnly?e.grid.getDistinctItemValues(e.dataIndex):i.getDistinctValues(e.dataIndex);switch(this._valueType){case t.ValueType.DATETIME:h=(c=s.dateCategorize)&&s.dateCategoryCallback?s.dateCategoryCallback(e,p):this._categorizeDateValues(p,c,a);break;case t.ValueType.NUMBER:h=(c=s.numberCategorize)&&s.numberCategoryCallback?s.numberCategoryCallback(e,p):this._categorizeNumberValues(p,c,a);break;case t.ValueType.BOOLEAN:h=[];for(var d=!1,f=0;f<p.length;f++){var g=p[f];null!=g?h.push({text:g.toString().toUpperCase(),value:g}):d=!0}d&&r.showEmptyFilter&&h.push({text:a,empty:!0});break;case t.ValueType.TEXT:c=s.textCategorize,h=e.lookupSource&&this._options.automating.lookupDisplay&&!s.textCategoryCallback?this._categorizeLookupTree(i,e,a):c&&s.textCategoryCallback?s.textCategoryCallback(e,p):this._categorizeTextValues(p,c,a)}h&&this._createCategories(h,null,e.valueType,l),this._filters.activateItems(u,!0,n)}},e.prototype.search=function(t){var i=[];function o(t,e){if(i.indexOf(t)<0){for(var o=[],n=t;n;)i.indexOf(n)<0&&o.push(n),n=n.category;Array.prototype.push.apply(i,o.reverse())}}for(var n=0,r=this._filters.count;n<r;n++){var s=this._filters.getItem(n);if(!(s instanceof jo)){var a=this._autoFilter?s.tag:s.toString(),l=this._autoFilter&&this._options.automating.lookupDisplay&&this._filters.getOwner()&&this._filters.getOwner().lookupDisplay,u=this._options.selector.searchIgnoreCase,c=e.HasPartial;(c(a,t,u)||l&&c(s.toString(),t,u))&&o(s)}}return i},e.prototype._getActivatedFilters=function(t){for(var e=[],i=t.count;i--;){var o=t.getItem(i);o instanceof jo||!o.active||e.push(o.name)}return e},e.prototype._createCategories=function(i,o,n,r){var s=r.getOwner(),a=this._options.automating.lookupDisplay&&s.lookupDisplay,l=a&&s.lookupSource;function u(e,i,o){if(l&&o.fieldIds){for(var n=o,r=[],s=0;s<n.fieldIds.length;s++)null==n.keys[s]||""==n.keys[s]?r.push("(values[".concat(n.fieldIds[s],"] is empty)")):r.push("(values[".concat(n.fieldIds[s],"] = '").concat(n.keys[s],"')"));return r.join(" and ")}if(null==e||o.empty)return"value is empty";if(i==t.ValueType.DATETIME){var a=o;return"(year(value) = ".concat(a.year,") and (month(value) = ").concat(a.month+1,") and (day(value) = ").concat(a.day,")")}return i==t.ValueType.BOOLEAN?o.value?"value":"not(value)":i==t.ValueType.NUMBER?"value = "+e:"value = '"+(e=e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'"))+"'"}function c(e,i,o){return n===t.ValueType.TEXT&&e&&!i.empty?s.getLookupLabel(e):o}for(var h=xt.pad,p=0,d=i.length;p<d;p++){var f=i[p],g=f.hasOwnProperty("childs"),y=f.hasOwnProperty("values"),_=void 0;(_=g||y?new jo:new Go(u(f.value,n,f))).text=l?f.text:a?c(f.value,f,f.text):f.text;var m="";if(m=f.name?f.name:f.empty?e.EMPTY_FILTER:n==t.ValueType.DATETIME&&g&&o?o.name+" "+f.text:f.text,_.name=m,this._filters.add(_,!1),o&&o.addChild(_),_ instanceof jo){if(g)this._createCategories(f.childs,_,n,r);else if(xt.isArray(f.values))for(var v=f.values,b=0,C=v.length;b<C;b++){var w=v[b],S=w+"",E=new Go(u(w,n,f));E.name=S,E.text=a?c(w,f,S):S,E.tag=S,_.addChild(E),this._filters.add(E,!1)}}else if(n!=t.ValueType.DATETIME||f.empty)_.tag=f.text;else{var x=f;_.tag="".concat(x.year,"-").concat(h(x.month+1,2),"-").concat(h(x.day,2))}}},e.prototype._categorizeDateValues=function(t,i,o){if(!t)return null;for(var n=!1,r=!1,s=!1,a=e.getDateProperty,l=0,u=0,c=0,h={year:null,quarter:null,month:null,day:null},p=t.length,d=0;d<p;d++){var f=t[d];if(f){var g=a(f,0),y=a(f,2),_=a(f,3),m=a(f,5);h?g!=h.year?(l++,u++,c++):y!=h.quarter||_!=h.month?(u++,c++):m!=h.day&&c++:(l++,u++,c++),h.year=g,h.quarter=y,h.month=_,h.day=m}}function v(t,e){var i=e+"";return t?t.replace("YYYY",i).replace("YY",i.slice(-2)):i}function b(t,e){var i=e+1+"";if(!t)return i;var o=("0"+i).slice(-2);return t.replace("QQ",o).replace("Q",i)}function C(t,e){var i=e+1+"";if(!t)return i;var o=("0"+i).slice(-2);return t.replace("MM",o).replace("M",i)}var w=this._options.automating,S=[],E=[];i&&((n=l>1&&u>6)&&(S.push(0),E.push((function(t,e,i){return v(w.dateYearFormat,i)}))),(r=u/l>6)&&(S.push(2),E.push(n?function(t,e,i){return b(w.dateQuarterFormat,i)}:function(t,e,i){return v(w.dateYearFormat,t)+" "+b(w.dateQuarterFormat,i)})),(s=c>9&&u>3)&&(S.push(3),E.push(n||r?function(t,e,i){return C(w.dateMonthFormat,i)}:function(t,e,i){return v(w.dateYearFormat,t)+" "+C(w.dateMonthFormat,i)}))),S.push(5),E.push((function(t,e,i){var o=v(w.dateDayFormat,t);return o=function(t,e){var i=e+"";if(!t)return i;var o=("0"+i).slice(-2);return t.replace("DD",o).replace("D",i)}(o=C(o,e),i),o}));var x=[];return function t(i,a,l,u,c){void 0===u&&(u=0),void 0===c&&(c=-1),c=-1==c?i.length-1:c;for(var h,p,d=null,f=u,g=!1,y=function(o){var c=i[o],y=function(t,i,o){for(var n=[],r=0;r<=o;r++)n.push(e.getDateProperty(t,i[r]));return n}(c,S,a),m=function(t,e,i){if(!t)return null;switch(e[i]){case 0:return t.getFullYear().toString();case 1:return t.getFullYear().toString()+Math.floor(t.getMonth()/6).toString();case 2:return t.getFullYear().toString()+Math.floor(t.getMonth()/3).toString();case 3:return t.getFullYear().toString()+t.getMonth().toString();case 5:return t.getFullYear().toString()+t.getMonth()+t.getDate()}}(c,S,a);if(o>u&&m!=d){var v=h[a];if(p)if(a===S.length-1){var b={text:"",year:p.getFullYear(),month:p.getMonth(),day:p.getDate(),value:p};b.text=E[a](b.year,b.month,b.day),l.push(b)}else{var C={text:"",childs:[]},w=function(){C.year=p.getFullYear()},x=function(){C.quarter=Math.floor(p.getMonth()/3)},O=function(){C.month=p.getMonth()},R=n&&r&&s?Qu.ALL:n&&r?Qu.YQ:n&&s?Qu.YM:n?Qu.Y:r&&s?Qu.QM:r?Qu.Q:s?Qu.M:Qu.NONE;R===Qu.ALL?0===a?w():1===a?(w(),x()):2===a&&(w(),x(),O()):R===Qu.YQ?0===a?w():1===a&&(w(),x()):R===Qu.YM?0===a?w():1===a&&(w(),O()):R===Qu.Y?w():R===Qu.QM?0===a?x():1===a&&(x(),O()):R===Qu.Q?x():R===Qu.M&&O(),C.text=E[a](p.getFullYear(),p.getMonth(),v),l.push(C),t.call(_,i,a+1,C.childs,f,o-1)}f=o}o>u&&null==p&&(g=!0),d=m,h=y,p=c},_=this,m=u;m<=c+1;m++)y(m);0==a&&g&&this._options.selector.showEmptyFilter&&l.push({text:o,empty:!0})}.call(this,t,0,x),x},e.prototype._categorizeNumberValues=function(t,e,i){if(!t||!t.length)return null;var o=t.filter((function(t){return null!=t&&null!=t&&!isNaN(t)})).sort((function(t,e){return t-e})),n=o.length,r=o.length!==t.length,s=1,a=[];if(e&&n>15)for(s=Math.round(n/Math.min(Math.max(4,Math.round(n/5)),8));o.length>0;){var l=o.splice(0,s);a.push({text:l[0]+" ~ "+l[l.length-1],values:l})}else for(var u=0;u<n;u++)a.push({text:o[u]+"",value:o[u]});return r&&this._options.selector.showEmptyFilter&&a.push({text:i,empty:!0}),a},e.prototype._categorizeLookupTree=function(t,e,i){var o=e.grid,n=[];if(this._options.automating.filteredDataOnly)o._items._rs.getAllItems().forEach((function(t){n.push(t.dataRow)}));else if(o.isTree())t.getDescendants(null,-1).forEach((function(t){n.push(t.rowId)}));else for(var r=t.rowCount,s=0;s<r;s++)n.push(s);var a=[],l=e.lookupKeyFieldIds,u={},c={};function h(n,r,s,a,l){var u=s.shift(),p=t.getValue(r,u);l.push(u),a.push(p);var d=n[p];d||(d=n[p]={value:p,name:a.join("-"),keys:a.slice(),fieldIds:l.slice()}),s.length?(!d.text&&(d.text=function(t,e,i){var n=c[t];if(!n)for(var r=o.columnsByField(t),s=0;s<r.length;s++)if(r[s].lookupSource||r[s].lookupDisplay){n=c[t]=r[s];break}return n?n.lookupSource?n.lookupSource.lookup(e,n.valueSeparator):n.lookupDisplay?n.getLookupLabel(i):i:i}(u,a,p)||p||i),d.childs=d.childs||{},h(d.childs,r,s,a,l)):!d.text&&(d.text=p?e.lookupSource.lookup(a,e.valueSeparator)||p:i)}for(s=0;s<n.length;s++)h(u,n[s],l.slice(),[],[]);return function t(e,i){Object.keys(e).sort().forEach((function(o){var n=e[o],r={value:n.value,text:n.text,name:n.name,fieldIds:n.fieldIds,keys:n.keys};i.push(r),n.hasOwnProperty("childs")&&(r.childs=[],t(n.childs,r.childs))}))}(u,a),a},e.prototype._categorizeTextValues=function(t,e,i){if(!t)return null;var o=t.length,n=[],r=!1;if(e&&o>15){for(var s=[{},{},{},{}],a=[0,0,0,0],l=[0,0,0,0],u=0;u<o;u++){var c=t[u];if(c){var h=(w=c[0]).charCodeAt(0),p=!1,d=void 0;s[d=h>=48&&h<=57?0:h>=65&&h<=90||h>=97&&h<=122?1:h>=1e4?2:3][w]?s[d][w].push(c):(s[d][w]=[c],p=!0),a[d]++,p&&l[d]++}else r=!0}for(var f=Math.min(Math.max(4,Math.round(o/5)),8),g=0;g<4;g++){var y=0==a[g]?0:Math.max(1,Math.min(l[g],Math.round(a[g]/o*f))),_=Math.round(l[g]/y),m=_,v=s[g],b="",C=[];for(var w in v)m===_&&(b=w),Array.prototype.push.apply(C,s[g][w]),0==--m&&(n.push({text:1==_?w:b+" ~ "+w,values:C}),C=[],m=_)}}else{u=0;for(var S=t.length;u<S;u++){var E=t[u];E?n.push({text:E,value:E}):r=!0}}return r&&this._options.selector.showEmptyFilter&&n.push({text:i,empty:!0}),n},e.EMPTY_FILTER="$$empty",e}(),Qc=function(t){function e(e,i,o){var n=t.call(this)||this;n._opened=!1,n._grid=o,n._gridContainer=o.container._containerDom;var r=wt(n._gridContainer),s=n._element=r.createElement("div");return s.style.position="absolute",s.style.display="none",s.className=i.selector.style,s.setAttribute("aria-hidden","true"),n._options=i,n._soptions=i.selector,n._manager=new Xc(n._options),n._globalMouseDownHandler=n._globalMouseDownHandler.bind(n),n._globalKeyDownHandler=n._globalKeyDownHandler.bind(n),n._scrollHandler=n._scrollHandler.bind(n),n._wheelHandler=n._wheelHandler.bind(n),n._resetClickHandler=n._resetClickHandler.bind(n),n._searchInputHandler=n._searchInputHandler.bind(n),n._searchKeyDownHandler=n._searchKeyDownHandler.bind(n),n._checkAllClickHandler=n._checkAllClickHandler.bind(n),n._confirmClickHandler=n._confirmClickHandler.bind(n),n._cancelClickHandler=n._cancelClickHandler.bind(n),n._itemClickHandler=n._itemClickHandler.bind(n),n}return n(e,t),Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"column",{get:function(){return this._targetColumn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return wt(this._element)},enumerable:!1,configurable:!0}),e.prototype._doDispose=function(){this._soptions=null,this._manager=this._manager.dispose(),this._grid=null,xt.detach(this._element),t.prototype._doDispose.call(this)},e.prototype.show=function(t,e,i){this._opened&&this.hide();var o,n=this._element,r=this._soptions,s=this._grid.container._containerDiv,a=xt.isSlotMode()?s:s.parentElement;!xt.isSlotMode()&&(o=s.nextElementSibling)?a.insertBefore(n,o):a.appendChild(n),this._targetColumn=t,n.className=r.style,n.tabIndex=-1,n.style.display="block",this._autoFiltering=t.autoFilter,this._build(t,i,this._autoFiltering);var l=e.getBoundingClientRect(),u=this._gridContainer.parentElement.clientWidth,c=r.width,h=t.filterSelectorWidth,p=n.style,d=r.minWidth,f=0;h>0?f=h:-1===c?(f=this._viewWidth,d=Math.max(d,140)):-2===c?f=t.layout.cellWidth:c>0&&(f=c),f>0?(d>0&&(f=Math.max(d,f)),r.maxWidth>0&&(f=Math.min(f,r.maxWidth)),f=Math.min(f,u),p.width=Math.max(f,d)+"px"):p.removeProperty("width");var g=Ct(this._gridContainer),y=n.getBoundingClientRect(),_=n.offsetParent instanceof g.HTMLBodyElement,m=_?{left:0,top:0}:n.offsetParent.getBoundingClientRect(),v=y.left-m.left+(l.right-y.right)+(_?g.scrollX||g.pageXOffset:n.offsetParent.scrollLeft),b=l.bottom-m.top+(_?g.scrollY||g.pageYOffset:n.offsetParent.scrollTop);p.left=Math.max(0,v)+"px",p.top=b+"px",!xt.isSlotMode()&&g.addEventListener("pointerdown",this._globalMouseDownHandler,!1),!xt.isSlotMode()&&g.addEventListener("keydown",this._globalKeyDownHandler,!1),this._opened=!0},e.prototype.hide=function(){if(this._opened){xt.detach(this._element);var t=Ct(this._gridContainer);!xt.isSlotMode()&&t.removeEventListener("pointerdown",this._globalMouseDownHandler,!1),!xt.isSlotMode()&&t.removeEventListener("keydown",this._globalKeyDownHandler,!1),this._finalize(),this._element.style.display="none",this._opened=!1}},e.prototype._createItemInfo=function(t){this._items=[],this._roots=[],this._visbleItemMap={};for(var e=(t=t instanceof $o?t.items:t).length,i=[],o=0;o<e;o++){var n=t[o],r=n.level;if(this._autoFiltering||n.visible){var s={text:n.toString(),index:o,level:r,filter:n};if(this._items.push(s),n instanceof jo?s.expanded=!1:s.state=n.active?Lo.ACTIVE:Lo.UNACTIVE,i[r]=s,r>0){var a=i[r-1];s.parent=a,a.childs||(a.childs=[]),a.childs.push(s)}0==r&&this._roots.push(s),this._visbleItemMap[o]=s}}this._calcluateStates(),this._visibleCount=this._calcVisibleItems(),this._dirties=[]},e.prototype._build=function(t,e,i){var o=this._soptions,n=this._applyBatch=o.showButtons,r=this.doc;this._manager.buildItems(t,e,i,!1),this._filters=i?t.autoFilters:t.filters,this._createItemInfo(this._filters),this._headerDiv=r.createElement("div"),this._headerDiv.className="rg-filter-header",o.filterReset&&this._buildReset(this._headerDiv),this._soptions.partialSearch&&this._buildSearchbox(this._headerDiv),this._buildSelectAllBox(),this._element.appendChild(this._headerDiv);var s=this._viewportDiv=r.createElement("div");s.className="rg-filter-list-viewport",s.style.height=o.listHeight+"px",s.addEventListener("scroll",this._scrollHandler),s.addEventListener("wheel",this._wheelHandler),this._listDiv=r.createElement("div"),this._listDiv.className="rg-filter-list",this._listDiv.style.position="relative",s.appendChild(this._listDiv),this._element.appendChild(s),this._calcAllChecked(),this._calcluateStates(),this._buildItems(),n&&this._buildFooter(this._element),this._searched=!1},e.prototype._finalize=function(){var t;this._roots=[],this._visbleItemMap={};for(var e=this._items.length;e--;)this._items[e].filter=null,this._items[e].parent=null,this._items[e].childs=null,this._items[e]=null;for(this._items=[],(t=this._resetDiv)&&(t.removeEventListener("click",this._resetClickHandler),this._resetDiv=xt.detach(this._resetDiv)),(t=this._searchDiv)&&(t.removeEventListener("input",this._searchInputHandler),t.removeEventListener("keydown",this._searchKeyDownHandler),this._searchInput=xt.detach(this._searchInput),this._searchDiv=xt.detach(this._searchDiv)),this._selectAllDiv.removeEventListener("click",this._checkAllClickHandler),this._selectAllDiv=xt.detach(this._selectAllDiv),this._headerDiv=xt.detach(this._headerDiv),this._footerDiv&&(this._confirmButton.removeEventListener("click",this._confirmClickHandler),this._cancelButton.removeEventListener("click",this._cancelClickHandler),this._confirmButton=xt.detach(this._confirmButton),this._cancelButton=xt.detach(this._cancelButton),this._footerDiv=xt.detach(this._footerDiv)),e=this._itemElements.length;e--;)this._removeItem(e);this._itemElements=[];var i=this._viewportDiv;i.removeEventListener("scroll",this._scrollHandler),i.removeEventListener("wheel",this._wheelHandler),this._listDiv=xt.detach(this._listDiv),this._viewportDiv=xt.detach(this._viewportDiv)},e.prototype._buildSelectAllBox=function(){var t=this.doc,e=this._soptions.allCheckText,i=this._selectAllDiv=t.createElement("div");i.className="rg-filter-select-all",this._soptions.textToTitle&&e&&(i.title=e);var o=this._selectAllCheck=t.createElement("input");o.type="checkbox",o.className="rg-filter-checkbox",this._setCheckState(o,this._allCheck),i.appendChild(o);var n=this._selectAllText=t.createElement("div");n.className="rg-filter-text",n.innerHTML=xt.htmlEncode(e),i.appendChild(n);var r=this._columnReset=t.createElement("div");r.className="rg-filter-column-reset",r.innerHTML=xt.htmlEncode(this._soptions.filterResetText),i.appendChild(r),this._headerDiv.appendChild(this._selectAllDiv),this._selectAllDiv.addEventListener("click",this._checkAllClickHandler)},e.prototype._buildReset=function(t){var e=this.doc,i=this._resetDiv=e.createElement("div");i.className="rg-filter-reset",i.appendChild(e.createTextNode(this._soptions.filtersResetText)),i.addEventListener("click",this._resetClickHandler),t.appendChild(i)},e.prototype._buildItems=function(){var t="temp",e=xt.getTextLength(t),i=0;this._filters.items.forEach((function(o){i=Math.max(i,o.level);var n=o.toString();e<xt.getTextLength(n)&&(e=xt.getTextLength(n),t=n)}));var o=this._listDiv,n=o.style;n.display="inline-block";var r=this._buildItemElement(t,0,void 0,"rg-filter-item");r.style.position="relative",o.appendChild(r),this._itemHeight=Math.floor(r.getBoundingClientRect().height),this._viewWidth=Math.floor(r.getBoundingClientRect().width)+15*i+4,o.removeChild(r),n.height="1500px";var s=this._viewportDiv.offsetWidth-this._viewportDiv.clientWidth;n.removeProperty("height");var a=this._visibleCount,l=this._viewportDiv.offsetHeight;this._pageCount=Math.min(this._items.length,Math.ceil(l/this._itemHeight));var u=this._pageCount;n.height=a*this._itemHeight+"px",u<=this._items.length&&(this._viewWidth+=s+2),n.removeProperty("display");var c=a<u?a:u;this._itemElements=[];for(var h=0;h<c;h++){var p=this._visibleItems[h];this._itemElements.push(this._buildItem(p,h))}},e.prototype._buildSearchbox=function(t){var e=this.doc,i=this._searchDiv=e.createElement("div");i.className="rg-filter-searchbox";var o=this._searchInput=this.doc.createElement("input");o.type="text",o.placeholder=this._soptions.searchPlaceholder,o.className="rg-filter-search-input",o.autocomplete="off",o.addEventListener("input",this._searchInputHandler),o.addEventListener("keydown",this._searchKeyDownHandler),i.appendChild(o),t.appendChild(i)},e.prototype._buildFooter=function(t){var e=this.doc;this._footerDiv=e.createElement("div"),this._footerDiv.className="rg-filter-button";var i=this._confirmButton=e.createElement("input");i.type="button",i.className="rg-filter-accept",i.value=this._soptions.acceptText,i.addEventListener("click",this._confirmClickHandler),this._footerDiv.appendChild(i);var o=this._cancelButton=e.createElement("input");o.type="button",o.className="rg-filter-cancel",o.value=this._soptions.cancelText,o.addEventListener("click",this._cancelClickHandler),this._footerDiv.appendChild(o),t.appendChild(this._footerDiv)},e.prototype._buildItem=function(t,e){var i=this._items,o=this._listDiv,n=i[t],r=n.expanded,s=this._buildItemElement(n.text,n.level,n.state,"rg-filter-item",r);return s.filter_id=t+"",s.style.position="absolute",s.style.height=this._itemHeight+"px",s.style.top=e*this._itemHeight+"px",s.addEventListener("click",this._itemClickHandler),o.appendChild(s),s},e.prototype._removeItem=function(t){var e=this._itemElements[t];e.removeEventListener("click",this._itemClickHandler),xt.detach(e),this._itemElements.splice(t,1)},e.prototype._buildItemElement=function(t,e,i,o,n){var r,s=this.doc,a=s.createElement("div");o&&(a.className=o,a.tabIndex=-1),this._soptions.textToTitle&&t&&(a.title=t);var l=s.createElement("div");l.className="rg-filter-item-indent-"+e,a.appendChild(l);var u=s.createElement("div"),c="rg-filter-expander";void 0!==n&&(c+=" "+(n?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),u.className=c,a.appendChild(u);var h=s.createElement("input");h.type="checkbox",h.className="rg-filter-checkbox",this._setCheckState(h,i),a.appendChild(h);var p=s.createElement("div");return r=p.style,p.className="rg-filter-text",r.position="relative",r.display="inline",r.pointerEvents="none",p.innerHTML=xt.htmlEncode(t),a.appendChild(p),a},e.prototype._calculateState=function(t){for(var e=void 0,i=0,o=t.length;i<o;i++){var n=t[i];if(e&&n.state!=e)return Lo.INDETERMINATE;e=n.state}return e||Lo.UNACTIVE},e.prototype._calcluateStates=function(){for(var t=this._items.length;t--;){var e=this._items[t];e.childs&&(e.state=this._calculateState(e.childs))}},e.prototype._calcVisibleItems=function(){function t(t){for(var e=t.parent;e;){if(!e.expanded)return!1;e=e.parent}return!0}var e=0;this._visibleItems=[];for(var i=0,o=this._items.length;i<o;i++){var n=this._items[i];n.parent&&!t(n)||(e++,this._visibleItems.push(i))}return e},e.prototype._setCheckState=function(t,e){t.checked=e==Lo.ACTIVE,t.indeterminate=e==Lo.INDETERMINATE},e.prototype._calcAllChecked=function(){this._allCheck=this._calculateState(this._roots),this._setCheckState(this._selectAllCheck,this._allCheck)},e.prototype._redrawCheck=function(){for(var t=this._itemElements.length;t--;){var i=this._itemElements[t],o=parseInt(i.filter_id),n=this._visbleItemMap[o],r=i.childNodes[e.INDEX_CHECKBOX];this._setCheckState(r,n.state)}},e.prototype._doRedraw=function(t){void 0===t&&(t=0);var e=this._itemElements,i=this._pageCount,o=Math.min(i,this._visibleCount),n=Math.max(0,this._visibleItems.indexOf(t));n+i>this._visibleCount&&(n=Math.max(0,this._visibleCount-i));for(var r=0,s=0;s<o;s++){var a=this._visibleItems[s+n];!e[s]&&s<o&&e.push(this._buildItem(a,s)),this._changeItemModel(e[s],a),r++}for(s=e.length-1;s>r-1;s--)this._removeItem(s);var l=this._visibleCount*this._itemHeight;this._listDiv.style.height=l+"px";var u=this._viewportDiv;u.scrollTop+u.offsetHeight>l&&(u.scrollTop=l-u.offsetHeight)},e.prototype._changeItemModel=function(t,e){var i=Ct(t),o=this._items[e];t.filter_id=e+"",this._soptions.textToTitle&&o.text&&(t.title=o.text);for(var n=t.childNodes.length;n--;){var r=t.childNodes.item(n);if(r instanceof i.HTMLElement){var s=r.className;if(s)if(s.indexOf("rg-filter-item-indent-")>-1)r.className="rg-filter-item-indent-"+o.level;else if(s.indexOf("rg-filter-expander")>-1){var a="rg-filter-expander";void 0!==o.expanded&&(a+=" "+(o.expanded?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),r.className=a}else if(r instanceof i.HTMLInputElement&&"rg-filter-checkbox"==s)this._setCheckState(r,o.state);else if(s.indexOf("rg-filter-text")>=0){var l=xt.htmlEncode(o.text),u=this._searchInput?this._searchInput.value:"",c="g"+(this._soptions.searchIgnoreCase?"i":"");l=u?l.replace(new RegExp(u,c),(function(t,e,i){return'<span class="rg-filter-search-text">'.concat(t,"</span>")})):l,r.innerHTML="<span>"+l+"</span>"}}}},e.prototype._doScroll=function(){for(var t=this._itemElements,e=Math.max(0,Math.floor(Math.min(this._viewportDiv.scrollTop,this._listDiv.offsetHeight-this._viewportDiv.offsetHeight)/this._itemHeight)),i=0,o=t.length;i<o;i++){var n=this._visibleItems[e+i];this._changeItemModel(t[i],n),t[i].style.top=(e+i)*this._itemHeight+"px"}},e.prototype._doSearch=function(t,e){void 0===e&&(e=!0),t?this._createItemInfo(this._manager.search(t)):this._createItemInfo(this._filters),this._selectAllText.textContent=t?this._soptions.searchedCheckText:this._soptions.allCheckText,e&&this._calcAllChecked(),this._doRedraw(),this._searched=!!t},e.prototype._resetActive=function(){for(var t=this._items.length;t--;)this._items[t].state=Lo.UNACTIVE;this._filters.activateAll(!1,!0),this._redrawCheck()},e.prototype._activateAll=function(t){for(var e=!this._applyBatch,i=this._items.length;i--;){var o=this._items[i];o.childs||(o.state=t?Lo.ACTIVE:Lo.UNACTIVE,(!e||this._searched)&&this._dirties.push(o))}if(e&&(this._searched?this._doFilterApply():this._filters.activateAll(t,!0)),this._calcluateStates(),this._itemElements.length){var n=this._itemElements[0].filter_id,r=Math.max(0,this._visibleItems.indexOf(parseInt(n)));this._doRedraw(r)}},e.prototype._doCheck=function(t,e){var i=e?Lo.ACTIVE:Lo.UNACTIVE,o=this._applyBatch||void 0!==t.childs,n=this._applyBatch?this._dirties:[];if(function t(i,o,n,r){if(i.state!=o)if(i.state=o,i.childs)for(var s=i.childs.length;s--;)t(i.childs[s],o,n,r);else n?r.push(i):i.filter.active=e}(t,i,o,n),o&&!this._applyBatch){for(var r=[],s=0,a=n.length;s<a;s++)r.push(n[s].filter.name);r.length>0&&this._filters.activateItems(r,e)}for(var l=t.parent;l;)l.state=this._calculateState(l.childs),l=l.parent;(t.parent||t.childs)&&this._redrawCheck(),this._calcAllChecked()},e.prototype._doFilterApply=function(){this._filters._updating=!0;try{for(var t=this._dirties,e=t.length;e--;){var i=t[e];i.filter.active=i.state==Lo.ACTIVE}this._filters._updating=!1,t.length&&this._filters.changed(1==t.length?t[0].filter:null)}finally{this._filters._updating=!1}this._dirties=[]},e.prototype._doExpand=function(t,e){t.expanded=e,this._visibleCount=this._calcVisibleItems();var i=parseInt(this._itemElements[0].filter_id);this._doRedraw(i)},e.prototype._globalMouseDownHandler=function(t){for(var e=t.target;e;){if(e===this._element)return;e=e.parentElement}this.hide()},e.prototype._globalKeyDownHandler=function(t){27==t.keyCode&&this.hide()},e.prototype._wheelHandler=function(t){var e=t.deltaY;0!==e&&(e=(e>0?2:-2)*this._itemHeight,this._viewportDiv.scrollTop+=e,this._doScroll()),t.preventDefault()},e.prototype._scrollHandler=function(t){this._doScroll()},e.prototype._searchInputHandler=function(t){var e=t.target;e instanceof Ct(e).HTMLInputElement&&this._doSearch(e.value)},e.prototype._searchKeyDownHandler=function(t){if(13==t.keyCode&&(this._doSearch(this._searchInput.value),this._searched&&this._soptions.activeWhenEnter&&this._items.length)){var e=this._selectAllCheck;e.checked=!(e.indeterminate=!1),this.$_allCheck(!0)}},e.prototype.$_refreshItem=function(t){for(var e=this._itemElements.length;e--;)this._removeItem(e);this._itemElements=[],this._manager.buildItems(t,t.grid.dataSource,t.autoFilter,!1),this._createItemInfo(t.autoFilters),this._buildItems(),this._dirties=[]},e.prototype._resetClickHandler=function(){var t=this._grid.getFilteredColumns(),e=t.length,i=this._targetColumn,o=this._selectAllCheck;this._setCheckState(o,Lo.UNACTIVE),this._resetActive(),this._searched&&this._doSearch(this._searchInput.value="");for(var n=0;n<e;n++)t[n].activateAllFilters(!1);this._soptions.closeWhenClick?this.hide():i.autoFilter&&this._options.automating.filteredDataOnly&&this.$_refreshItem(i)},e.prototype.$_allCheck=function(t){this._activateAll(t),this._allCheck=t?Lo.ACTIVE:Lo.UNACTIVE,!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()},e.prototype._checkAllClickHandler=function(t){var e=this._selectAllCheck,i=t.target;if(i===this._columnReset){e.checked=e.indeterminate=!1,this._doSearch(this._searchInput.value="",!1);var o=this._targetColumn;this._resetActive(),o.autoFilter&&this._options.automating.filteredDataOnly&&this.$_refreshItem(o)}else i!==e?(e.checked=!e.checked,e.indeterminate=!1,this.$_allCheck(e.checked)):i===e&&this.$_allCheck(e.checked)},e.prototype._itemClickHandler=function(t){var i=t.target,o=i.className.indexOf("rg-filter-expander")>-1,n="rg-filter-checkbox"==i.className,r=i;"rg-filter-item"!==i.className&&(r=r.parentElement);var s=parseInt(r.filter_id),a=this._visbleItemMap[s];if(o)void 0!==a.expanded&&this._doExpand(a,!a.expanded);else{var l=void 0;n?l=i:(l=r.children.item(e.INDEX_CHECKBOX)).checked=!l.checked,this._doCheck(a,l.checked),!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()}},e.prototype._confirmClickHandler=function(){this._doFilterApply(),this.hide()},e.prototype._cancelClickHandler=function(){this.hide()},e.INDEX_CHECKBOX=2,e}(Ee),Jc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof i.g?i.g:"undefined"!=typeof self?self:{},Zc={};function th(t,e){return t==e||0===t.indexOf("*")&&(t=t.substr(1,t.length-1),e.substr(e.indexOf(t),t.length)==t)}function eh(t,e,i){for(var o=t.split(","),n=0,r=o.length;n<r;n++){var s=o[n];if(th(s,e))return!0;if(i&&s&&"*"===s[0]&&"*."!==s.substr(0,1)&&new RegExp("^/"+s.substr(1)+"/").exec(i))return!0}return!1}!function(t){var e,i=Jc&&Jc.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0}),t.h=t.r=void 0;var o=function(){function t(){}return t.encode=function(e){for(var i=t.CHARACTERS,o=[],n=e.length,r=n%3,s=n-r,a=0;a<s;){var l=e[a++]<<16|e[a++]<<8|e[a++];o.push(i.charAt(l>>>18&63)),o.push(i.charAt(l>>>12&63)),o.push(i.charAt(l>>>6&63)),o.push(i.charAt(63&l))}switch(r){case 2:l=e[s++]<<16|e[s++]<<8,o.push(i.charAt(l>>>18&63)),o.push(i.charAt(l>>>12&63)),o.push(i.charAt(l>>>6&63)),o.push(t.SUFFIX);break;case 1:l=e[s++]<<16,o.push(i.charAt(l>>>18&63)),o.push(i.charAt(l>>>12&63)),o.push(t.SUFFIX),o.push(t.SUFFIX)}return o.join("")},t.decode=function(e){for(var i=t.CHARACTERS,o=t.SUFFIX,n=e.split(""),r=[],s=n.length;n[--s]===o;);for(var a=0;a<s;){var l=i.indexOf(n[a++])<<18;a<=s&&(l|=i.indexOf(n[a++])<<12),a<=s&&(l|=i.indexOf(n[a++])<<6),a<=s&&(l|=i.indexOf(n[a++])),r.push(l>>>16&255),r.push(l>>>8&255),r.push(255&l)}for(;0===r[r.length-1];)r.pop();return r},t.SUFFIX="=",t.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t}(),n=function(){function t(){}return t.union=function(t,e){var i=e.s3[255&t],o=e.s2[255&(t>>=8)],n=e.s1[255&(t>>=8)];return((n=((n=((t=e.s0[255&(t>>=8)])>>16)+(n>>16)+((65535&t)+(65535&n)>>16)<<16|(65535&t)+(65535&n)&65535)>>16^o>>16)<<16|65535&(65535&n^65535&o))>>16)+(i>>16)+((65535&n)+(65535&i)>>16)<<16|(65535&n)+(65535&i)&65535},t.xor=function(t,e){return(t>>16^e>>16)<<16|65535&(65535&t^65535&e)},t._encryptBlock=function(e,i){var o=e.left,n=e.right,r=t.xor,s=t.union;o=r(o,i.p[0]),n=r(n,r(s(o,i),i.p[1])),o=r(o,r(s(n,i),i.p[2])),n=r(n,r(s(o,i),i.p[3])),o=r(o,r(s(n,i),i.p[4])),n=r(n,r(s(o,i),i.p[5])),o=r(o,r(s(n,i),i.p[6])),n=r(n,r(s(o,i),i.p[7])),o=r(o,r(s(n,i),i.p[8])),n=r(n,r(s(o,i),i.p[9])),o=r(o,r(s(n,i),i.p[10])),n=r(n,r(s(o,i),i.p[11])),o=r(o,r(s(n,i),i.p[12])),n=r(n,r(s(o,i),i.p[13])),o=r(o,r(s(n,i),i.p[14])),n=r(n,r(s(o,i),i.p[15])),o=r(o,r(s(n,i),i.p[16])),e.right=o,e.left=r(n,i.p[17])},t._decryptBlock=function(e,i){var o=e.left,n=e.right,r=t.xor,s=t.union;o=r(o,i.p[17]),n=r(n,r(s(o,i),i.p[16])),o=r(o,r(s(n,i),i.p[15])),n=r(n,r(s(o,i),i.p[14])),o=r(o,r(s(n,i),i.p[13])),n=r(n,r(s(o,i),i.p[12])),o=r(o,r(s(n,i),i.p[11])),n=r(n,r(s(o,i),i.p[10])),o=r(o,r(s(n,i),i.p[9])),n=r(n,r(s(o,i),i.p[8])),o=r(o,r(s(n,i),i.p[7])),n=r(n,r(s(o,i),i.p[6])),o=r(o,r(s(n,i),i.p[5])),n=r(n,r(s(o,i),i.p[4])),o=r(o,r(s(n,i),i.p[3])),n=r(n,r(s(o,i),i.p[2])),o=r(o,r(s(n,i),i.p[1])),e.right=o,e.left=r(n,i.p[0])},t._init=function(e){for(var i,o=e.split("").map((function(t){return 255&t.charCodeAt(0)})),n=(e=t.kb,t._encryptBlock),r=0,s=0,a={left:0,right:0},l={p:e.p.slice(0).map((function(e){for(var i=o.length,n=0;n<4;n++)s=s*t.POW8|o[r++%i];return(e>>16^s>>16)<<16|65535&(65535&e^65535&s)})),s0:e.s0.slice(0),s1:e.s1.slice(0),s2:e.s2.slice(0),s3:e.s3.slice(0)},u=0,c=l.p.length;u<c;)n(a,l),l.p[u++]=a.left,l.p[u++]=a.right;for(u=0;u<4;u++)for(i=0,c=l["s"+u].length;i<c;)n(a,l),l["s"+u][i++]=a.left,l["s"+u][i++]=a.right;return l},t.encrypt=function(e,i){for(var n=t._encryptBlock,r=t._init(i),s=8-(7&e.length),a=0;a<s;a++)e+=String.fromCharCode(s);var l=0,u=[],c=e.length>>3,h={left:null,right:null};for(a=0;a<c;a++)h.left=e.charCodeAt(l)*t.POW24|e.charCodeAt(l+1)*t.POW16|e.charCodeAt(l+2)*t.POW8|e.charCodeAt(l+3),h.right=e.charCodeAt(l+4)*t.POW24|e.charCodeAt(l+5)*t.POW16|e.charCodeAt(l+6)*t.POW8|e.charCodeAt(l+7),n(h,r),u.push(h.left>>24&255),u.push(h.left>>16&255),u.push(h.left>>8&255),u.push(255&h.left),u.push(h.right>>24&255),u.push(h.right>>16&255),u.push(h.right>>8&255),u.push(255&h.right),l+=8;return o.encode(u)},t.decrypt=function(e,i){for(var n=t._decryptBlock,r=t._init(i),s=[],a=o.decode(e),l=0,u=a.length>>3,c={left:null,right:null},h=0;h<u;h++){c.left=a[l]*t.POW24|a[l+1]*t.POW16|a[l+2]*t.POW8|a[l+3],c.right=a[l+4]*t.POW24|a[l+5]*t.POW16|a[l+6]*t.POW8|a[l+7],n(c,r);var p=c.left,d=c.right;s.push(p>>24&255),s.push(p>>16&255),s.push(p>>8&255),s.push(255&p),s.push(d>>24&255),s.push(d>>16&255),s.push(d>>8&255),s.push(255&d),l+=8}return s[s.length-1]!==s[s.length-2]&&1!==s[s.length-1]||(e=s[s.length-1],s.splice(s.length-e,e)),s.map((function(t){return String.fromCharCode(t)})).join("")},t.POW2=Math.pow(2,2),t.POW3=Math.pow(2,3),t.POW4=Math.pow(2,4),t.POW8=Math.pow(2,8),t.POW16=Math.pow(2,16),t.POW24=Math.pow(2,24),t.kb={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],k:[202,218,204,100]},t}(),r=String.fromCharCode(100,107,100,108),s=function(){function t(t){this._gk=null!=t?t:r}return t.prototype._ldk=function(t){for(var e="",i=0,o=t.length;i<o;i++)e+=String.fromCharCode(t[i]>>1);return e},t.prototype.get=function(){return this._gk+this._ldk(n.kb.k)},t}(),a=function(){function t(){}return t.run=function(t,e){return e=new s(e).get(),n.encrypt(t,e)},t}();t.r=a;var l=function(t){function e(){var i=t.call(this)||this;return Object.setPrototypeOf(i,e.prototype),i}return i(e,t),e}(Error),u=function(){function t(t,e){this._gk=e,this._code=t,this._lic=this.run()}return t.prototype.run=function(){for(var t={},e=n.decrypt(this._code,new s(this._gk).get()).split(";"),i=0,o=e.length;i<o;i++){var r,a=(r=e[i].split("="))[0];(r=r[1])&&0<r.length&&(t[a]=r)}return t},Object.defineProperty(t.prototype,"lic",{get:function(){return this._lic},enumerable:!1,configurable:!0}),t.prototype.is=function(t,e){return t in this._lic&&this._lic[t]===e},t.prototype.includes=function(t,e){return t in this._lic&&0<=e.indexOf(this._lic[t])},t.prototype.expired=function(t,e){return!(t in this._lic)||!this._lic[t]||(t=this._lic[t],e=(e?new Date(new Date(t).setMonth(new Date(t).getMonth()+e)):new Date(t)).getTime(),t=Date.now(),!isNaN(e)&&e<t)},t.prototype.validate=function(t){var e=this,i=!1;try{t.forEach((function(t){var o=Object.keys(t),n=Object.values(t);o.forEach((function(t,o){if(o=n[o],!(i=Array.isArray(o)?e.includes(t,o):e.is(t,o)))throw new l}))}))}catch(t){if(!(t instanceof l))throw t;i=!1}return i},t}();t.h=u}(Zc);var ih=function(){var t;try{if(!(t=realGrid2Lic))return 1}catch(t){return 1}var i=null;try{if(!(i=new Zc.h(t,"dkdl")))return 1}catch(t){return 1}if(!i.is("name",e.name))return 2;var o=null===window||void 0===window?void 0:window.location,n=o?o.hostname:"",r=o?o.pathname.toLowerCase():"",s=eh,a=i.is("lic","Enterprise"),l=i.is("lic","Evaluation"),u=i.is("lic","Limited"),c=i.is("lic","Subscription"),h=s(i.lic.server,n,r),p=!a&&s(i.lic.server,"*",null);return a||l||u||c?h||p?!a&&i.expired("expire",1)?p?32:16:(e.license=i.lic.lic,e.expire=i.lic.expire,0):8:64},oh=function(t){function e(e){var i=t.call(this,"rowGroupHeaderCell")||this;return i._rowGroup=e,i}return n(e,t),e.prototype._doDispose=function(){this._rowGroup=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return this.item instanceof xo?this._rowGroup.getHeaderText(this.item):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),e}(Xo),nh=function(t){function e(e){var i=t.call(this,"rowGroupFooterCell")||this;return i._footerIndex=0,i._value=NaN,i._rowGroup=e,i}return n(e,t),e.$_getValue=function(t,e){if(e&&e.dataIndex>=0){var i=e.grid,o=t.parent,n=o.getFooterIndex(t),r=e.groupFooters.get(n),s=r&&r.expression,a=r&&r.valueCallback;if(s||a){var l=null;if(s){var u=i.rowGroupSummaryRuntime;u.setColumn(e,e.grid.summarizer),u.setItem(o),l=r.evaluate(u)}return a?a(i.handler,e,n,o,l):l}if(o&&i.isGroupedColumn(e)){var c=i.rowGroup.getFooterText(o);return null==c?void 0:c}}},e.getValue=function(t,i){try{return e.$_getValue(t,i)}catch(t){return Xo.ERROR}},e.$_displayText=function(t,e,i,o){var n="";if(void 0!==i&&e){if(i instanceof Date){var r=o.datetimeWriter;n=r?r.getText(i):String(i)}else if("number"==typeof i){var s=o.numberFormatter;n=s?s.getText(i):isNaN(i)?"":String(i)}else"string"==typeof i?n=i+"":"boolean"==typeof i&&(n=String(i));if(n){var a=o.prefix;a&&(n=a+n),(a=o.suffix)&&(n+=a)}}if(!n){var l=xt.cast(t.parent,xo);if(e){var u=e.groupFooters.get(l.getFooterIndex(t));u&&(n=u.text)}}return n||""},e.prototype._doDispose=function(){this._rowGroup=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"footerIndex",{get:function(){return this._footerIndex},enumerable:!1,configurable:!0}),e.prototype.calculate=function(t){this._value=NaN,this._error=null;try{this._value=e.$_getValue(this.index.item||t,this.index.dataColumn)}catch(t){this._error=t,this._errorDetail=t,xt.log("FOOTER ERROR: "+t)}},e.prototype.getDisplayText=function(t){return this._error?Xo.ERROR:e.$_displayText(this.index.item,this.index.dataColumn,this._value,t)},e.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._footerIndex)},e.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._footerIndex);return e?e.realizeGroupSummary(this,t):void 0},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.index.item.level},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(e){t.prototype.setIndex.call(this,e),this._footerIndex=e.item.$_footerIndex},e.prototype._getSummary=function(t,e){return t.groupFooters.get(e)},e}(Xo),rh=function(t){function e(){var e=t.call(this,"rowGroupBarCell")||this;return e._level=0,e}return n(e,t),Object.defineProperty(e.prototype,"level",{get:function(){return this.item.level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getText",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),e}(Xo),sh=function(t){function e(e){var i=t.call(this)||this;return i._index=0,i.$_owner=e,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!==this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype._changed=function(){this.$_owner&&this.$_owner.$_itemChanged(this)},e}(kt),ah=function(t){function e(e){var i=t.call(this)||this;return i._items=[],i._owner=e,i._items.push(new sh(i)),i}return n(e,t),e.prototype._doDispose=function(){for(var e=0,i=this._items;e<i.length;e++)i[e].dispose();this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},set:function(t){t=Math.max(t,1);var e=this._items;if(t!==e.length){for(var i=void 0;e.length<t;)(i=new sh(this))._index=e.length,e.push(i);for(;e.length>t;)(i=e.pop()).dispose();this.$_itemChanged(null)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return this._items[t]},e.prototype.assignFrom=function(e){t.prototype.assignFrom.call(this,e);var i=this._items,o=e&&e.items?xt.makeArray(e.items,!0):e;if(xt.isArray(o))for(var n=Math.max(o.length,1),r=0;r<n;r++)i[r]||(i[r]=new sh(this)),i[r].assignFrom(o[r]),i[r]._index=r;else i[0].assignFrom(o),i[0]._index=0;this.$_itemChanged(null)},e.prototype.$_itemChanged=function(t){this._owner&&this._owner.rowGroupFooterChanged(t)},e}(kt),lh=function(e){function i(i){var o=e.call(this,i)||this;return o._mergeMode=!1,o._sorting=!0,o._expandedAdornments=t.RowGroupAdornments.BOTH,o._collapsedAdornments=t.RowGroupAdornments.HEADER,o._indentVisible=!0,o._levelIndent=20,o._mergeHeaderIndenting=!0,o._mergeFooterIndenting=!0,o._headerStatement="${groupField}: ${groupValue} - ${rowCount} rows",o._expanderVisibility=t.ExpanderVisibility.DEFAULT,o._headerCell=new oh(o),o._footerCell=new nh(o),o._barCell=new rh,o._headerStatementExpr=new Vo(o._headerStatement),o._footerStatementExpr=new Vo,o._statementRuntime=new qo,o._footerFormatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},o._footers=new ah(o),o}return n(i,e),i.prototype._doDispose=function(){this._footers=this._footers.dispose(),e.prototype._doDispose.call(this)},i.prototype.rowGroupFooterChanged=function(t){this._counterAware&&this._counterAware.groupfFooterCounterChanged(this)},i.prototype.getGroupFooterCount=function(t){return this._footers.count},i.prototype.setCounterAware=function(t){this._counterAware=t},Object.defineProperty(i.prototype,"mergeMode",{get:function(){return this._mergeMode},set:function(t){t!=this._mergeMode&&(this._mergeMode=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorting",{get:function(){return this._sorting},set:function(t){t!=this._sorting&&(this._sorting=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(e){e!==t.RowGroupAdornments.NONE&&e!=this._collapsedAdornments&&(this._collapsedAdornments=e,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"createFooterCallback",{get:function(){return this._createFooterCallback},set:function(t){t!==this._createFooterCallback&&(this._createFooterCallback=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"indentVisible",{get:function(){return this._indentVisible},set:function(t){t!=this._indentVisible&&(this._indentVisible=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"levelIndent",{get:function(){return this._levelIndent},set:function(t){(t=Math.max(0,t))!=this._levelIndent&&(this._levelIndent=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeHeaderIndenting",{get:function(){return this._mergeHeaderIndenting},set:function(t){t!=this._mergeHeaderIndenting&&(this._mergeHeaderIndenting=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeFooterIndenting",{get:function(){return this._mergeFooterIndenting},set:function(t){t!=this._mergeFooterIndenting&&(this._mergeFooterIndenting=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footers",{get:function(){return this._footers},set:function(t){this.setFooters(t)},enumerable:!1,configurable:!0}),i.prototype.setFooters=function(t){this._footers.assignFrom(t)},Object.defineProperty(i.prototype,"headerStatement",{get:function(){return this._headerStatement},set:function(t){t!==this._headerStatement&&(this._headerStatement=t,this._headerStatementExpr.source=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerCallback",{get:function(){return this._headerCallback},set:function(t){this._headerCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerStatement",{get:function(){return this._footerStatement},set:function(t){t!=this._footerStatement&&(this._footerStatement=t,this._footerStatementExpr.source=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeExpanderVisibility",{get:function(){return this.expanderVisibility},set:function(t){this.expanderVisibility=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderVisibility",{get:function(){return this._expanderVisibility},set:function(t){t!==this.expanderVisibility&&(this._expanderVisibility=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderVisibleCallback",{get:function(){return this._expanderVisibleCallback},set:function(t){this._expanderVisibleCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueForGroupCallback",{get:function(){return this._valueForGroupCallback},set:function(t){this._valueForGroupCallback=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this,!0),this._changed()},enumerable:!1,configurable:!0}),i.prototype.getHeaderCell=function(t){return this._headerCell.setIndex(hs.temp(this.owner,t.index)),this._headerCell},i.prototype.getFooterCell=function(t){var e=t.item;return this._footerCell.setIndex(t),this._footerCell.calculate(e),this._footerCell},i.prototype.getFooterStyleName=function(t){var e=this._footers.get(t.$_footerIndex),i="rg-rowgroup-footer rg-rowgroup-footer-level-"+String(t.parent.level),o=e.styleName,n=e.styleCallback;return o&&(i+=" "+o),n&&(o=n(this._grid.handler,t.index,e.index))&&(i+=" "+o),i},i.prototype.getFooterCellStyle=function(t,e,o){void 0===o&&(o=!0);var n=t.footerIndex,r=this._footers.get(n).cellStyleCallback,s=t.index.column.groupFooters.get(t.footerIndex);if(r){var a=r(this._grid.handler,t);e.assign(a)}if(s){var l=s.styleCallback;if(l){var u=l(this._grid.handler,t);e.assign(u)}}return!e.styleName&&s&&(e.styleName=s.styleName),o&&(e.styleName?e.styleName=i.FOOTER_CELL_STYLE+" "+e.styleName:e.styleName=i.FOOTER_CELL_STYLE),e},i.prototype.getFooterCellFormatters=function(t,e){return e&&t?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):t&&((e=this._footerFormatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},i.prototype.getBarCell=function(t){return this._barCell.setIndex(t),this._barCell},i.prototype.getHeaderText=function(t){return!this._headerStatement&&this._headerCallback?this._headerCallback(this.owner.handler,t):(this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._headerStatementExpr.evaluate(this._statementRuntime))},i.prototype.getFooterText=function(t){if(this._footerStatement&&this._footerStatementExpr)return this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._footerStatementExpr.evaluate(this._statementRuntime)},i.prototype._doChanged=function(){this.owner.$_rowGroupChanged(this)},i.prototype.$_isMultiLine=function(t){var e=t.visible?1:0,i=t.footerCount;if((e+=Math.max(t.descendantCount,t.count)-i)>1)return!0;for(var o=0;o<i;o++)if(t.getFooter(o).visible&&++e>1)return!0;return!1},i.prototype.$_isExpanderVisible=function(e){if(!e.expanded)return!0;if(this._expanderVisibleCallback){var i=this._expanderVisibleCallback.call(this._grid,this._grid.handler,e);return null==i||i}switch(this._expanderVisibility){case t.ExpanderVisibility.NONE:return!1;case t.ExpanderVisibility.ALWAYS:return!0;default:return this.$_isMultiLine(e)}},i.FOOTER_CELL_STYLE="rg-rowgroup-footer-cell",i.FOOTER_CELL_RENDERER="rg-rowgroup-footer-renderer",i}(zo),uh=function(t){function e(e){var i=t.call(this,e.doc,"gridDebugLayer")||this;return i._owner=e,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.layout=function(){var t=this._owner.layoutManager;this.$_setBounds(this._grid,t.gridBounds.clone().inflate(-1,-1));var e=t.dataBounds.clone();e.offset(t.contentBounds.x,t.contentBounds.y),this.$_setBounds(this._data,e)},e.prototype._getCssSelector=function(){return"rg-debug-layer"},e.prototype._initDom=function(t){var e=t.style,i=wt(t);e.position="absolute",t.appendChild(this._client=this.$_createElement(i,"Client")),t.appendChild(this._topContent=this.$_createElement(i,"Top Content")),t.appendChild(this._leftContent=this.$_createElement(i,"Left Content")),t.appendChild(this._fixedContent=this.$_createElement(i,"Fixed Content")),t.appendChild(this._content=this.$_createElement(i,"Content")),t.appendChild(this._rightContent=this.$_createElement(i,"Right Content")),t.appendChild(this._grid=this.$_createElement(i,"Grid Bounds","b")),t.appendChild(this._data=this.$_createElement(i,"Data Bounds","g")),t.appendChild(this._nonFixed=this.$_createElement(i,"Non Fixed","g"))},e.prototype.$_createElement=function(t,e,i){void 0===i&&(i="r");var o=t.createElement("span"),n=o.style;return n.display="inline-block",n.position="absolute",n.boxSizing="border-box",n.pointerEvents="none","b"==i?(n.border="2px dashed rgba(0, 0, 255, 0.5)",n.color="blue"):"g"==i?(n.paddingTop="20px",n.border="2px solid rgba(0, 128, 0, 0.5)",n.color="rgb(0, 128, 0)"):(n.border="1px solid rgba(255, 0, 0, 0.7)",n.color="red"),n.fontWeight="bold",n.textAlign="center",n.verticalAlign="middle",n.whiteSpace="normal",o[xt.TextProp]=e,o},e.prototype.$_setBounds=function(t,e){var i=t.style;e.isEmpty?i.display="none":(i.display="inline-block",i.left=e.x+"px",i.top=e.y+"px",i.width=e.width+"px",i.height=e.height+"px",i.lineHeight=e.height+"px")},e}(qs);!function(t){function e(){var e=t.call(this)||this;return e._min=0,e._max=100,e._step=1,e._next=0,e._completed=!1,e._timer=void 0,e}n(e,t),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){this._step=t},enumerable:!1,configurable:!0}),e.prototype.execute=function(t){if(t){this._runner=t,this._next=this._min;var e=Ct(t.container);t.container instanceof e.HTMLElement&&(this._view.setProperties(this._min,this._max,this._min),this._view.show(t.container)),this.$_runNext()}},e.prototype.$_runNext=function(){if(this._next<this._max){var t=this._runner.run(this._next);if(this._next+=this._step,this._view.setPosition(this._next,t),this._next<this._max)return void setTimeout(function(){this.$_runNext()}.bind(this),0)}!this._completed&&this.$_complete()},e.prototype.$_complete=function(){try{this._runner.complete&&this._runner.complete()}finally{this._completed=!0,this._view.close()}}}(Ee);var ch,hh=function(t){function e(e){var i=t.call(this)||this;i._message="Load data...",i._min=0,i._max=0,i._pos=0;var o=wt(e);return i._dom=i.$_createElement(o),i}return n(e,t),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._pos},enumerable:!1,configurable:!0}),e.prototype.setPosition=function(t,e){(t=Math.max(this._min,Math.min(this._max,t)))!=this._pos&&(this._pos=t,this._message=e,this.$_refreshView())},e.prototype.setProperties=function(t,e,i,o,n){void 0===o&&(o=null),void 0===n&&(n=!1),this._min=t,this._max=Math.max(t,e),this._max==this._min&&(this._max=this._min+1),this._pos=Math.max(this._min,Math.min(this._max,i)),this._message=o,n&&this.$_refreshView()},e.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},e.prototype.show=function(t,e){void 0===e&&(e=null),this._container=t,e&&this.$_setMessage(e),t.appendChild(this._dom);var i=t.getBoundingClientRect(),o=xt.getSize(this._dom);xt.move(this._dom,(i.width-o.width)/2,(i.height-o.height)/3)},e.prototype.close=function(){xt.detach(this._dom)},e.prototype.$_createElement=function(t){var e=t.createElement("div");e.className="rg-progress";var i=e.style;return i.position="absolute",i.zIndex="3001",i.minWidth="250px",i.padding="8px 10px",e.appendChild(e.$_bar=this.$_createBar(t)),e.appendChild(e.$_msg=this.$_createMsg(t)),e},e.prototype.$_createBar=function(t){var e=t.createElement("div");e.className="rg-progress-bar";var i=e.style;i.width="100%",i.height="13px",i.marginBottom="4px";var o=t.createElement("div");return o.className="rg-progress-progress",(i=o.style).height="100%",i.width="0px",e.appendChild(e.$_led=o),e},e.prototype.$_createMsg=function(t){var e=t.createElement("div"),i=t.createElement("span");i.className="rg-progress-message";var o=e.style;return o.width="100%",o.textAlign="center",e.appendChild(e.$_span=i),e},e.prototype.$_refreshView=function(){var t=this._dom,e=t.$_bar,i=e.$_led;t.$_msg.$_span.innerHTML=xt.htmlEncode(this._message);var o=xt.getSize(e);i.style.width=Math.min(o.width-1,Math.floor(o.width*(this._pos-this._min)/(this._max-this._min)))+"px"},e.prototype.$_setMessage=function(t){this._dom.$_msg.$_span.innerHTML=xt.htmlEncode(this._message)},e}(Ee),ph=function(t){function e(e){var i=t.call(this)||this;return i._container=e,i}return n(e,t),e.prototype.show=function(t,e,i){this._view||(this._view=new hh(t)),this._view.setZIndex(i),this._view.show(t||this._container,e||"Load data...")},e.prototype.close=function(){this._view&&this._view.close()},e.prototype.setProperties=function(t,e,i,o){this._view&&(o||(o=this._title||"Load data... ",e>t&&(o+=Math.floor(100*(i-t)/(e-t))+"% ("+i+" / "+e+")")),this._view.setProperties(t,e,i,o,!0))},e.prototype.showLoader=function(t,e){this._loaderView||(this._loaderView=new dh(t)),this._loaderView.setZIndex(e),this._loaderView.show(t||this._container)},e.prototype.closeLoader=function(){this._loaderView&&this._loaderView.close()},e.prototype.loaderShowing=function(){return this._loaderView&&this._loaderView.isShowing()},e}(Ee),dh=function(t){function e(e){var i=t.call(this)||this,o=wt(e);return i._dom=i.$_createElement(o),i}return n(e,t),e.prototype.show=function(t){t.appendChild(this._dom)},e.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},e.prototype.close=function(){xt.detach(this._dom)},e.prototype.isShowing=function(){return!!this._dom.parentElement},e.prototype.$_createElement=function(t){var e=t.createElement("div");return e.className="rg-load-indicator",e.style.position="absolute",e},e}(Ee),fh=function(t){function e(e){var i=t.call(this,e)||this;return i._title="  (     )",i._description="${columns}    .",i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title!==t&&(this._title=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(t){this._description!==t&&(this._description=t)},enumerable:!1,configurable:!0}),e.prototype.getDescription=function(){var t,e=this.title?"<strong>"+this.title+"</strong>":"",i="";if(t=this.grid){var o=t.layoutManager.cellLayouts._dataCells,n=o&&o[0];n&&n.forEach((function(t){t.isProxy||(i+=t.displayText+", ")}))}return e+(i=this.description?"<span>"+this.description.replace("${columns}",i.substr(0,i.length-2))+"</span>":"")},e}(Ba),gh=function(t){function e(e){var i=t.call(this,e.doc,"watermark")||this;return i._grid=e,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){var t=32===this._grid.container._lkCheck;if(t){this._active=!0;var e=this._dom;e&&!e.parentElement&&this._grid._dom.appendChild(e),this.$_setDiv(e,t),this.$_setSpan(this._span,t,this.message||Ot.decode("6riw6rCE7J20IOunjOujjOuQmOyXiOyKteuLiOuLpA==")),this.resetSize(),this._grid.container.disabled=!0}},e.prototype._getCssSelector=function(){return"rg-watermark-layer"},e.prototype._initDom=function(t){var e=wt(t);t.appendChild(this._span=this.$_createElement(e,""))},e.prototype._setSizeStyle=function(t){var e=this._active;t.width=e?"100%":"0px",t.height=e?"100%":"0px"},e.prototype.$_setDiv=function(t,e){var i=t.style;i.position="absolute",i.zIndex="1",e?(this.setImportantStyle("background-color","rgba(80, 80, 80, 0.5)"),this.setImportantStyle("display","block"),i.removeProperty("pointer-events")):i.pointerEvents="none"},e.prototype.$_setSpan=function(t,e,i){var o=t.style;e&&(o.display="inline-block",o.position="absolute",o.boxSizing="border-box",o.pointerEvents="none",o.fontWeight="bold",o.textAlign="center",o.verticalAlign="middle",o.whiteSpace="normal",o.top="50%",o.left="50%",o.transform="translate(-50%, -50%)",o.fontSize="50px",t[xt.TextProp]=i)},e.prototype.$_createElement=function(t,e){return t.createElement("span")},e}(qs),yh=function(t){function e(){return t.call(this,"filterPanelCell")||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e}(Xo),_h=function(e){function i(i){var o=e.call(this,i)||this;return o._showInput=!0,o._height=23,o._minRowHeight=23,o._filterDelay=500,o._ignoreCase=!0,o._trimData=!1,o._beforeCommit=!0,o._defaultNumberOperator=t.InlineFilterOperator.GREATER_EQUAL,o._defaultTextOperator=t.InlineFilterOperator.CONTAINS,o._defaultDateOperator=t.InlineFilterOperator.GREATER_EQUAL,o.visible=!1,o._cell=new yh,o}return n(i,e),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){t!==this._height&&(this._height=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!==this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInput",{get:function(){return this._showInput},set:function(t){t!=this._showInput&&(this._showInput=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ignoreCase",{get:function(){return this._ignoreCase},set:function(t){t!==this._ignoreCase&&(this._ignoreCase=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterDelay",{get:function(){return this._filterDelay},set:function(t){this._filterDelay=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"beforeCommit",{get:function(){return this._beforeCommit},set:function(t){t!=this._beforeCommit&&(this._beforeCommit=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textOperators",{get:function(){return this._textOperators||i.$_DefaultTextOperators},set:function(t){this._grid.closePopups(!1),this._textOperators=this.$_setOperators(t),this.$_getPopup(i.$_TEXT_POPUP,this.textOperators,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberOperators",{get:function(){return this._numberOperators||i.$_DefaultNumberOperators},set:function(t){this._grid.closePopups(!1),this._numberOperators=this.$_setOperators(t),this.$_getPopup(i.$_NUMBER_POPUP,this.numberOperators,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateOperators",{get:function(){return this._dateOperators||i.$_DefaultDateOperators},set:function(t){this._grid.closePopups(!1),this._dateOperators=this.$_setOperators(t),this.$_getPopup(i.$_DATE_POPUP,this.dateOperators,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trimData",{get:function(){return this._trimData},set:function(t){t!==this._trimData&&(this._trimData=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterPanelCallback",{get:function(){return this._filterPanelCallback},set:function(t){this._filterPanelCallback=t},enumerable:!1,configurable:!0}),i.prototype.getPopup=function(e){switch(e.valueType){case t.ValueType.DATE:case t.ValueType.DATETIME:return this.$_getPopup(i.$_DATE_POPUP,this.dateOperators,!1);case t.ValueType.NUMBER:case t.ValueType.UINT:case t.ValueType.INT:case t.ValueType.UNUM:return this.$_getPopup(i.$_NUMBER_POPUP,this.numberOperators,!1);case t.ValueType.TEXT:case t.ValueType.CHAR:return this.$_getPopup(i.$_TEXT_POPUP,this.textOperators,!1)}},i.prototype.clearInput=function(t){("string"!=typeof t||(t=this._grid.columnByName(t)))&&this._grid.clearInlineFilter(t)},i.prototype.getCell=function(t){var e=this._cell,i=t.getDataColumn();return e.index.set(-1,i),e.showInput=!!i&&i.filterable&&(this.showInput?!1!==i.showInlineFilter:i.showInlineFilter),e.filterOperator=i._inlineFilterOp||this.$_getDefaultOperator(i),e.filterText=i._inlineFilterText||"",e},i.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t)},i.prototype._doChanged=function(){this._grid&&this._grid.invalidatePosition()},i.prototype.$_getPopup=function(t,e,i){var o=this._grid,n=o.popupMenuManager,r=n.getMenu(t);if(!r||i){for(var s=[],a=Object.keys(e),l=o.filterOperatorCallback.bind(o),u=0,c=a;u<c.length;u++){var h=c[u],p=new Lc(null,{label:e[h],tag:h,styleName:"rg-inline-filter-icon rg-inline-filter-".concat(xt.camelToHyphen(h)),callback:l});s.push(p)}r=n.addMenu(t,s,!0,null)}return r.name},i.prototype.$_getDefaultOperator=function(e){switch(e.valueType){case t.ValueType.DATE:case t.ValueType.DATETIME:return this._defaultDateOperator;case t.ValueType.NUMBER:case t.ValueType.UNUM:case t.ValueType.UINT:case t.ValueType.INT:return this._defaultNumberOperator;case t.ValueType.CHAR:case t.ValueType.TEXT:return this._defaultTextOperator}},i.prototype._createCell=function(){return new yh},i.prototype.$_setOperators=function(e){var i,o=Object.keys(e);if(o.length<=0){var n=Object.keys(t.InlineFilterOperator);i={};for(var r=0;r<o.length;r++)for(var s=o[r],a=0;a<n.length;a++)t.InlineFilterOperator[n[a]].toLowerCase()==s.toLowerCase()&&(i[t.InlineFilterOperator[n[a]]]=e[s])}return i},i.$_TEXT_POPUP="$$_textOperators_$$",i.$_NUMBER_POPUP="$$_numberOperators_$$",i.$_DATE_POPUP="$$_dateOperators_$$",i.$_DefaultTextOperators={contains:"",notContains:" ",startsWith:" ",endsWith:" ",equal:"",notEqual:" ",empty:" ",reset:""},i.$_DefaultNumberOperators={equal:"",notEqual:" ",greater:" ",greaterEqual:" ",lower:" ",lowerEqual:" ",between:"",empty:" ",reset:""},i.$_DefaultDateOperators={contains:"",notContains:" ",startsWith:" ",endsWith:" ",equal:"",notEqual:" ",greater:" ",greaterEqual:" ",lower:" ",lowerEqual:" ",empty:" ",reset:""},i}(zo),mh=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.input=null,t.operatorButton=null,t.popupMenu=null,t}return n(i,e),i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(t){return e.prototype.clear.call(this,t),this.className&&(this.cell.className=this.className=""),this},i.prototype.setOperator=function(t){this.setClass(t),this.setPlaceHolder(t)},i.prototype.setClass=function(t){this.operatorButton&&(this.operatorButton.className="rg-filter-panel-operator "+(t?" rg-inline-filter-".concat(xt.camelToHyphen(t)):""))},i.prototype.setPlaceHolder=function(e){this.input&&(this.input.placeholder=e===t.InlineFilterOperator.BETWEEN?"value1 ~ value2":"")},i.prototype.setFocus=function(){this.input.focus()},i}(pl),vh=function(e){function i(t,i){var o=e.call(this,t,i,"filterPanelView")||this;return o._rowPoints=[],o._cells=[],o}return n(i,e),i.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var i=this._cells[t],o=0;o<i.length;o++)i[o].dispose(),i[o]=null;this._cells=null,e.prototype._doDispose.call(this)},i.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}},i.prototype.tableCellByLayout=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)if(i[o].layout===t)return i[o]},i.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},i.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},i.prototype.operatorChange=function(e,i,o,n){var r=i.tag,s=o.getDataColumn(),a=this.model.getCell(o);r===t.InlineFilterOperator.RESET&&(e.input.value="",r=a.filterOperator),e.setOperator(r),this._filterRun(this.model,e.input.value,r,s)},i.prototype.clearInput=function(t,e){if(t)t.input.value="",this._filterRun(this.model,"",void 0,e);else for(var i=0,o=this._cells.length;i<o;i++)for(var n=0,r=this._cells[i].length;n<r;n++){(t=this._cells[i][n]).input.value="";var s=t.layout.getDataColumn();s._inlineFilterText="",s&&s.setInlineFilter(void 0,!1)}},i.prototype.setFocus=function(t){t.setFocus()},i.prototype._getCssSelector=function(){return"rg-filter-panel"},i.prototype._getRendererStyle=function(){return"rg-filter-panel-renderer"},i.prototype._getTableRowCount=function(t){return t.dataRows},i.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},i.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},i.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},i.prototype._doPrepareTableRow=function(t,i,o,n){e.prototype._doPrepareTableRow.call(this,t,i,o,n)},i.prototype._prepareCellContent=function(t,e){var i=wt(t).createElement("div");return i.className=this._getRendererStyle(),i},i.prototype._doMeasure=function(t,e,i){for(var o=t.layoutManager.dataRows,n=Math.max(t.filterPanel.height,t.filterPanel.minRowHeight*o),r=0,s=this._rowPoints=[r],a=0;a<o-1;a++)s.push(r+=Math.round(n/o));return s.push(r=n),Ha.create(e,r)},i.prototype._doPrepareTableExtents=function(t){},i.prototype._doLayoutContent=function(t){var e=t.grid,i=t.cellLayouts._dataCells,o=i.length,n=this._getFirstCell(t),r=this._getStartCell(t)-n,s=this._getEndCell(t)-n,a=this.model;this.$_refreshCells(t,i,this._tbody),this.$_refreshSpans(t,o),this.$_refreshHeadTitle(t,this._thead);for(var l=0;l<o;l++){var u=this._cells[l],c=this._getTableRow(t,l);xt.setClassName(c,"rg-filter-panel-row");for(var h=r;h<=s;h++){var p=u[h];if(p.visible){var d=p.layout;if(d.isProxy||d instanceof Zr)p.clear(!1);else{var f=a.getCell(d);this._updateCell(e,a,f,p)}}}}},i.prototype._updateCell=function(t,e,i,o){var n=t.doc,r=t.container,s=o.input,a=o.operatorButton,l=o.cell.firstElementChild;a||(a=o.operatorButton=n.createElement("span"),l.appendChild(a)),s||((s=o.input=n.createElement("input")).type="text",r.$_addListener(s,"keyup",this._keyupHandler.bind(this),!1),r.$_addListener(s,"input",this._inputHandler.bind(this),!1),l.appendChild(s)),s.value=i.filterText;var u=this._rowPoints[1]-this._rowPoints[0];l.style.display=i.showInput?"":"none";var c=a.style;c.width="20px",c.height="".concat(u-6,"px"),(c=s.style).width=o.width-30+"px",c.height="".concat(u-6,"px"),o.setOperator(i.filterOperator),o.popupMenu=e.getPopup(o.layout.getDataColumn())},i.prototype._keyupHandler=function(e){var i=this.grid,o=e.keyCode||e.charCode;if(xt.included(o,38,40)){var n=i.getTableCell(e.target),r=this.tableCellByCell(n),s=hs.temp(i,-1,r.layout),a=void 0;if(38!==o||s.isTop){if(40===o){if(s.isBottom)return s.itemIndex=i.topIndex,i.setFocusedIndex(s,!0,!0,!0),void i.setFocus();s.down(t.VerticalMoveStep.CELL),a=s.layout}}else s.up(t.VerticalMoveStep.CELL),a=s.layout;a&&(r=this.tableCellByLayout(s.layout)).setFocus()}else 13===o&&this.$_search(e,!0)},i.prototype._inputHandler=function(t){this.$_search(t,!1)},i.prototype.$_search=function(t,e){var i,o=t.target,n=this.grid,r=this.model;i=o.value;var s=n.getTableCell(o),a=this.columnByCell(s);if(a){var l=r.getCell(a.layout);e?(clearTimeout(this._timer),this._filterRun(r,i,l.filterOperator,a)):this._startTimer(i,l.filterOperator,a)}},i.prototype._startTimer=function(t,e,i){var o=this.model;clearTimeout(this._timer),this._timer=setTimeout(function(){this._filterRun(o,t,e,i)}.bind(this),o.filterDelay)},i.prototype._filterRun=function(e,i,o,n){var r,s,a=i,l=e.filterPanelCallback;if(l){var u=this.grid;if(!1!==l.call(this,u.handler,n,o,i))return n.setInlineFilter(void 0,!0),void(n._inlineFilterText=i)}if(null!=i&&""!=i||o===t.InlineFilterOperator.EMPTY)switch(n.valueType){case t.ValueType.DATE:case t.ValueType.DATETIME:case t.ValueType.NUMBER:var c=i=i.replace(/[^0-9\-.~]/g,"");switch(xt.included(n.valueType,t.ValueType.DATE,t.ValueType.DATETIME)?(i=i.replace(/-/g,""),s="datestr(value)",c='"'.concat(i,'"')):s="value",o){case t.InlineFilterOperator.EQUAL:r="".concat(s," = ").concat(c);break;case t.InlineFilterOperator.NOT_EQUAL:r="".concat(s," <> ").concat(c);break;case t.InlineFilterOperator.GREATER:r="".concat(s," > ").concat(c);break;case t.InlineFilterOperator.GREATER_EQUAL:r="".concat(s," >= ").concat(c);break;case t.InlineFilterOperator.LOWER:r="".concat(s," < ").concat(c);break;case t.InlineFilterOperator.LOWER_EQUAL:r="".concat(s," <= ").concat(c);break;case t.InlineFilterOperator.CONTAINS:r="".concat(s," like '%").concat(i,"%'");break;case t.InlineFilterOperator.NOT_CONTAINS:r="".concat(s," not like '%").concat(i,"%'");break;case t.InlineFilterOperator.STARTS_WITH:r="".concat(s," like '").concat(i,"%'");break;case t.InlineFilterOperator.ENDS_WITH:r="".concat(s," like '%").concat(i,"'");break;case t.InlineFilterOperator.EMPTY:r="value is empty";break;case t.InlineFilterOperator.BETWEEN:var h=c.split("~").sort((function(t,e){return parseFloat(t)-parseFloat(e)}));r=2===h.length&&h[1]?"(value >= ".concat(h[0],") and (value <= ").concat(h[1],")"):"value >= ".concat(h[0])}break;case t.ValueType.TEXT:default:s=n.lookupDisplay?"text":"value",s=e.trimData?"trim(".concat(s,")"):s;var p=e.ignoreCase?"i":"";switch(i=e.trimData&&i?i.trim():i,i=e.ignoreCase&&i?i.toLowerCase():i,o){case t.InlineFilterOperator.CONTAINS:r="".concat(s," ").concat(p,"likehan '%").concat(i,"%'");break;case t.InlineFilterOperator.NOT_CONTAINS:r="".concat(s," not ").concat(p,"likehan '%").concat(i,"%'");break;case t.InlineFilterOperator.STARTS_WITH:r="".concat(s," ").concat(p,"likehan '").concat(i,"%'");break;case t.InlineFilterOperator.ENDS_WITH:r="".concat(s," ").concat(p,"likehan '%").concat(i,"'");break;case t.InlineFilterOperator.EQUAL:r="".concat(s," ").concat(p,"like '").concat(i,"'");break;case t.InlineFilterOperator.NOT_EQUAL:r="".concat(s," not ").concat(p,"like '").concat(i,"'");break;case t.InlineFilterOperator.EMPTY:r="value is empty"}}else r=void 0;var d=this.tableCellByLayout(n.layout);r!=d.criteria&&(d.criteria=r,n.setInlineFilter(r,!0)),o&&(n._inlineFilterOp=o),n._inlineFilterText=a},i.prototype._getStartCell=function(t){return t.getStartCell()},i.prototype._getEndCell=function(t){return t.getEndCell()},i.prototype.$_getCellHeight=function(t){var e=t.layout.hrow,i=this._rowPoints[e];return this._rowPoints[e+t.rowSpan]-i},i.prototype.$_refreshCells=function(t,e,i){for(var o=this._cells,n=i.children,r=n.length,s=this._getFirstCell(t),a=this._getLastCell(t)-s+1,l=o.length;l<r;l++)o.push([]);for(var u=0;u<r;u++){for(var c=o[u],h=n[u].children,p=e[u],d=0;d<a;d++){var f=h[d],g=p[d+s],y=c[d];y?y.cell!==f||y.layout!=g&&(y.layout=g,y.clear(!0)):(y=c[d]=new mh(h[d])).layout=g,y.height=this.$_getCellHeight(y),y.width=this._getCellWidth(t,d),y.spanned=!1}for(d=a;d<c.length;d++)c[d].dispose();c.length=a}for(u=r;u<o.length;u++){var _=o[u];for(d=0;d<_.length;d++)_[d].dispose(),_[d]=null}o.length=r},i.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,n=this._getLastCell(t)-i,r=t.cellLayouts._dataCells.length,s=0;s<e;s++)for(var a=this._cells[s],l=a.length,u=o;u<=n;u++){var c=a[u],h=c.layout,p=h.parent,d=p&&p.vertical;if(c.spanned);else if(h.isProxy)c.clear(!1);else{var f=0,g=0,y=h.getDataSpan()-1;if(y>0){var _=0,m=h.vindex+1;if(d)for(;_++<y&&_<r;){if(!(v=p.getVisible(m++)))break;g+=v._dspan,this._cells[s+_][u].span()}else for(;_++<y&&u-o+_<l&&m<p.visibleCount;){var v;if(!(v=p.getVisible(m++)))break;f+=v._cspan,a[u+_].span()}}h.isNull&&c.clear(!0),c.set(h._cspan+f,h._dspan+g,!0)}}},i.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],o=e.children[0],n=0;o&&n<i.length;n++){var r=i[n].layout.source,s=o.children[n];s&&r&&(s[xt.TextProp]=r.header.getDisplayText()||r.firstColumn.header.displayText)}},i.RENDERER_STYLE="rg-filter-renderer",i}(Ka),bh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-filter-panel"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e}(vh),Ch=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-filter-panel"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(vh),wh=function(t){function e(e){var i=t.call(this,e,"gridFilterCellView")||this;return i._text="",i._styleName="",i._textChanged=!1,i}return n(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())},enumerable:!1,configurable:!0}),e.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[xt.TextProp]=this._text)},e.prototype._doRender=function(t){},e}(qa),Sh=function(t){function e(e){var i=t.call(this,e,null,"gridFilterView")||this;i._cells=[],i._count=0;for(var o=0;o<3;o++)i.addChild(i._cells[o]=new wh(e));return i}return n(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},e.prototype.getFilterModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this.getFilterModel(t);return e instanceof Ts?e.getCellType():void 0},e.prototype._getCssSelector=function(){return"rg-filter"},e.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,o=t.sectionObjects;this._count=0;for(var n=0,r=o;n<r.length;n++){var s=r[n];s.visible&&((e=this._cells[this._count++]).model=s,s instanceof Ls?e.width=i.rowIndicator.width:s instanceof Fs?e.width=i.stateBar.width:s instanceof Vs&&(e.width=i.checkBar.width))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,o=this._thead,n=o&&o.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var r=0;r<i;r++){var s=this.getChild(r),a=s.model,l=a.getFilterCell(),u=this._getTableCell(0,r),c=u.firstElementChild,h=this.$_getCellSelector()+" "+a.getFilterStyleName();if(n){var p=n.children[r];p&&(p[xt.TextProp]=a.getCellType()+" filter")}s.setStyleName(u,h),s.updateCell(e,l,c)}},e.prototype._doRender=function(t){},e.prototype._getTableRowCount=function(t){return 1},e.prototype._getTableRowHeight=function(t,e){return this.height},e.prototype._getCellCount=function(t){return this._count},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype.$_getCellSelector=function(){return e.CELL_CSS},e.CELL_CSS="rg-filter-cell",e}(Ka),Eh=function(){function t(t,e){this._containerDom=t,this._commandType=e,this.$_createDom()}return t.prototype.getCommandType=function(){return this._commandType},t.prototype.$_getStyle=function(){return"commit"===this._commandType?"rg-editor-commit":"cancel"===this._commandType?"rg-editor-cancel":void 0},t.prototype.$_createDom=function(){var t=this._containerDom,e=wt(t),i=this._dom=e.createElement("div");i.style.touchAction="none",this.$_createButton(),xt.addChild(t,i)},t.prototype.$_createButton=function(){var t=wt(this._containerDom),e=this._button=t.createElement("div");e.style.touchAction="none",e.style.pointerEvents="none",e.className=this.$_getStyle(),xt.addChild(this._dom,e)},t}(),xh=function(t){function e(e){var i=t.call(this)||this;return i._owner=e,i._commands=[],i.$_clickHandler=i._clickHandler.bind(i),i}return n(e,t),Object.defineProperty(e.prototype,"showing",{get:function(){return this._showing},enumerable:!1,configurable:!0}),e.prototype.setContainerDom=function(t){this._containerDom=t},e.prototype.show=function(t){var i=wt(this._containerDom);if(this._dom||((this._dom=i.createElement("div")).className=e.STYLE),!this._commands||0==this._commands.length){var o=new Eh(this._dom,"commit");this._commands.push(o),o=new Eh(this._dom,"cancel"),this._commands.push(o)}xt.addChild(this._containerDom,this._dom),this._dom.addEventListener("click",this.$_clickHandler),this._showing=!0,this.$_setPosition(t)},e.prototype.hide=function(){this._showing=!1,this._dom.removeEventListener("click",this.$_clickHandler),xt.detach(this._dom)},e.prototype.setPosition=function(t){this._dom&&this.$_setPosition(t)},e.prototype._clickHandler=function(t){t.target!==this._dom&&this.$_doClick(t)},e.prototype.$_doClick=function(t){var e=this.$_findCommand(t.target);if(e)switch(e.getCommandType()){case"commit":this._owner.commitCommand(t);break;case"cancel":this._owner.cancelCommand(t)}},e.prototype.$_findCommand=function(t){for(var e=0;e<this._commands.length;e++)if(this._commands[e]._dom===t)return this._commands[e];return null},e.prototype.$_setPosition=function(t){var e=this._dom.style,i=this._dom.getBoundingClientRect(),o=t.right-i.width,n=t.top-i.height;e.left=o+"px",e.top=n+"px"},e.STYLE="rg-mobile-command-view",e}(kt),Oh=function(t){function e(e){var i=t.call(this,e)||this;return i._commandView=new xh(i),i._commandView.setContainerDom(e.container._containerDom),i}return n(e,t),e.prototype.commitCommand=function(t){this.commitEditor(!0,!1,!0,!1)},e.prototype.cancelCommand=function(t){this.cancelEditor(!0)},e.prototype._showCommand=function(t){this._commandView&&this._commandView.show(t)},e.prototype._resetPosition=function(t){this._commandView&&this._commandView.setPosition(t)},e.prototype._hideCommand=function(){this._commandView&&this._commandView.showing&&this._commandView.hide()},e.prototype._editorActivated=function(e){t.prototype._editorActivated.call(this,e);var i=this._grid;if(this._grid.mobileOptions.showEditCommander&&i.$_canShowEditCommand(this._editIndex)){var o=this._grid.getEditCellBounds(this._editor,this._editIndex);this._showCommand(o)}},e.prototype._internalHideEditor=function(e){t.prototype._internalHideEditor.call(this,e),this._hideCommand()},e.prototype._resetBounds=function(){t.prototype._resetBounds.call(this);var e=this._grid.getEditCellBounds(this._editor,this._editIndex);this._resetPosition(e)},e}(tc),Rh=function(e){function i(t,i,o){var n=e.call(this,t.doc,!0)||this;n._debugging=!1,n._scrollBarWidth=16,n._scrollBarHeight=16,n._keepNullFocus=!0,n._loading=!0,n._dataLoad=!1,n._gridObjects=[],n._tableViews={},n._columnMap={},n._columnLayouts=new Wr,n._columnLock=0,n._columnsDirty=!1,n._columnSummaryRuntime=new _s,n._columnValidationRuntime=new gr,n._rowValidationRuntime=new fr,n._layouted=!1,n._resetting=!1,n._needMerge=!1,n._leftPos=0,n._horzScrolled=!1,n._topIndex=0,n._prevTop=0,n._prevLeftPos=0,n._prevLast=-1,n._updateLock=!1,n._hoveredY=-1,n._focusing=!1,n._dataChanged=!1,n._validations=new dr(!1),n.$_editFocused=!1,n.$_showFocusCell=!1,n._itemCheckChanged=!1,n._cellUpdateEventLock=!1,n._currentRowId=-1,n._currentRow=-1,n._scrolledTime=0,n._cellLayoutDirty=!1,n._needRefresh=!0,n._needPosition=!0,n._fitHeader=!1,n._cellGhostStyle={};var r=t.doc,s=t._lkCheck=ih();switch(s){case 0:case 32:break;default:return n}n._container=t,n._addGridObject(n._header=new Cs(n)),n._addGridObject(n._footers=new Is(n)),n._addGridObject(n._headerSummaries=new Gc(n)),n._addGridObject(n._rowIndicator=new Ls(n)),n._addGridObject(n._stateBar=new Fs(n)),n._addGridObject(n._checkBar=new Vs(n)),n._addGridObject(n._body=new Va(n)),n._addGridObject(n._filterPanel=new _h(n)),n.addChild(n._rootElement=new qs(r,"grid root view")),n._debugView=new uh(n),32===s&&n.addChild(n._watermarkLayer=new gh(n)),n.addChild(n._emptyView=new Ua(r)),n.addElement(n._contentPane=new _u(r,"contentPane")),n.addElement(n._rightContentPane=new Cu(r,"rightContentPane")),n.addElement(n._fixedContentPane=new vu(r,"fixedContentPane")),n._doContentPanesCreated(),n.addElement(n._leftContentPane=new yu(r,"leftContentPane")),n._sideContentPane=n._createSidePane(),n._sideContentPane&&n.addElement(n._sideContentPane),n.addElement(n._topContentPane=new gu(r,"topContentPane")),n._filterPanelView=new vh(r,n._filterPanel),n._fixedFilterView=new bh(r,n._filterPanel),n._rightFilterView=new Ch(r,n._filterPanel),n._bodyView=n._createBodyView(n._body),n._fixedBodyView=n._createFixedBodyView(n._body),n._rightBodyView=n._createRightBodyView(n._body),n._headerView=new ml(r,n._header),n._fixedHeaderView=new vl(r,n._header),n._rightHeaderView=new bl(r,n._header),n._headerSummaryView=new jc(r,n._headerSummaries),n._fixedHeaderSummaryView=new Hc(r,n._headerSummaries),n._rightHeaderSummaryView=new $c(r,n._headerSummaries),n._footerView=new El(r,n.footers),n._fixedFooterView=new xl(r,n.footers),n._rightFooterView=new Ol(r,n.footers),n._rowBarContainer=new rc(n),n._headView=new au(n),n._sumView=new Uc(r),n._footView=new uu(r),n._filterView=new Sh(r);for(var a=[n._rowBarContainer,n._bodyView,n._fixedBodyView,n._rightBodyView,n._headerView,n._fixedHeaderView,n._rightHeaderView,n._headerSummaryView,n._fixedHeaderSummaryView,n._rightHeaderSummaryView,n._footerView,n._fixedFooterView,n._rightFooterView,n._headView,n._sumView,n._footView,n._filterView,n._filterPanelView,n._fixedFilterView,n._rightFilterView],l=a.length-1;l>=0;l--){var u=a[l];n._tableViews[u.$_hash]=u}return n._contentPane.addChild(n._headerView),n._contentPane.addChild(n._headerSummaryView),n._contentPane.addChild(n._filterPanelView),n._contentPane.addChild(n._bodyView),n._contentPane.addChild(n._footerView),n._fixedContentPane.addChild(n._fixedBodyView),n._fixedContentPane.addChild(n._fixedFooterView),n._fixedContentPane.addChild(n._fixedHeaderSummaryView),n._fixedContentPane.addChild(n._fixedHeaderView),n._fixedContentPane.addChild(n._fixedFilterView),n._rightContentPane.addChild(n._rightBodyView),n._rightContentPane.addChild(n._rightFooterView),n._rightContentPane.addChild(n._rightHeaderSummaryView),n._rightContentPane.addChild(n._rightHeaderView),n._rightContentPane.addChild(n._rightFilterView),n._leftContentPane.addChild(n._rowBarContainer),n._leftContentPane.addChild(n._footView),n._leftContentPane.addChild(n._sumView),n._leftContentPane.addChild(n._headView),n._leftContentPane.addChild(n._filterView),n._doCreateOtherElements(),n.addElement(n._selectionLayer=n._createSelectionLayer()),n.addElement(n._feedbackLayer=new qs(r,"feedbackLayer")),n.addFeedbackElement(n._rowHoverView=new Rc(r)),n.addElement(n._hscrollBar=new Ql(t,!1)),n.addElement(n._vscrollBar=new Ql(t,!0)),n.addElement(n._scrollEdge=new Kl(r)),n._hscrollBar.addListener(n),n._vscrollBar.addListener(n),n._selections=new oa(n),n._selections.addListener(n),n._fixedOptions=new Ga(n),n._displayOptions=new ja(n),n._formatOptions=new cu(n),n._editOptions=new Mu(n),n._editorOptions=new Nu(n),n._copyOptions=new Vu(n),n._pasteOptions=new Bu(n),n._dataDropOptions=new kl(n),n._sortingOptions=new fu(n),n._filteringOptions=new zc(n),n._waiOptions=new fh(n),n._mobileOptions=new Gu(n),n._initStyles(),n._columns=new vs(n),n._activeCellLayout=n._defaultCellLayout=new ls(n),n._defaultCellLayout.addListener(n),n._delegate=n._createDelegate(),n._layoutManager=n._createLayoutManager(),n._editController=n._createEditController(),n._validationManager=new yr(n),n._lookupProvider=new kc,n._lookupProvider.addListener(n),n._clipboardManager=new Na(n),n._progressManager=new ph(n._container._containerDom),n._popupMenuManager=new Nc(n._container),n._popupMenuManager.addListener(n),n._tooltipManager=new Xu(n),n._filterSelector=new Qc(n._container,n._filteringOptions,n),n._toastManager=new du(n),n._currentIndex=new hs(n),n._editorIndex=new hs(n),n._focusedIndex=new hs(n),(n._accessibility=i)&&n._waiOptions.assignFrom(o),n}return n(i,e),i.createColumn=function(t){return t?"series"==t.type?new $r(t):new Hr(t):null},i.prototype._doDispose=function(){return this.clearListener(),this._container=this._container.dispose(),this._gridObjects.length=0,this._header=this._header.dispose(),this._headerSummaries=this._headerSummaries.dispose(),this._footers=this._footers.dispose(),this._rowIndicator=this._rowIndicator.dispose(),this._stateBar=this._stateBar.dispose(),this._checkBar=this._checkBar.dispose(),this._body=this._body.dispose(),this._filterPanel=this._filterPanel.dispose(),this._rootElement=this._rootElement.dispose(),this._contentPane=this._contentPane.dispose(),this._rightContentPane=this._rightContentPane.dispose(),this._fixedContentPane=this._fixedContentPane.dispose(),this._leftContentPane=this._leftContentPane.dispose(),this._sideContentPane=this._sideContentPane&&this._sideContentPane.dispose(),this._topContentPane=this._topContentPane&&this._topContentPane.dispose(),this._bodyView=this._bodyView.dispose(),this._fixedBodyView=this._fixedBodyView.dispose(),this._rightBodyView=this._rightBodyView.dispose(),this._headerView=this._headerView.dispose(),this._fixedHeaderView=this._fixedHeaderView.dispose(),this._rightHeaderView=this._rightHeaderView.dispose(),this._headerSummaryView=this._headerSummaryView.dispose(),this._fixedHeaderSummaryView=this._fixedHeaderSummaryView.dispose(),this._rightHeaderSummaryView=this._rightHeaderSummaryView.dispose(),this._footerView=this._footerView.dispose(),this._fixedFooterView=this._fixedFooterView.dispose(),this._rightFooterView=this._rightFooterView.dispose(),this._rowBarContainer=this._rowBarContainer.dispose(),this._headView=this._headView.dispose(),this._sumView=this._sumView.dispose(),this._footView=this._footView.dispose(),this._filterPanelView=this._filterPanelView.dispose(),this._fixedFilterView=this._fixedFilterView.dispose(),this._rightFilterView=this._rightFilterView.dispose(),this._selectionLayer=this._selectionLayer.dispose(),this._feedbackLayer=this._feedbackLayer.dispose(),this._hscrollBar=this._hscrollBar.dispose(),this._vscrollBar=this._vscrollBar.dispose(),this._scrollEdge=this._scrollEdge.dispose(),this._selections=this._selections.dispose(),this._fixedOptions=this._fixedOptions.dispose(),this._displayOptions=this._displayOptions.dispose(),this._formatOptions=this._formatOptions.dispose(),this._editOptions=this._editOptions.dispose(),this._editorOptions=this._editorOptions.dispose(),this._copyOptions=this._copyOptions.dispose(),this._pasteOptions=this._pasteOptions.dispose(),this._sortingOptions=this._sortingOptions.dispose(),this._filteringOptions=this._filteringOptions.dispose(),this._mobileOptions=this._mobileOptions&&this._mobileOptions.dispose(),this._columns=this._columns.dispose(),this._activeCellLayout=null,this._defaultCellLayout=this._defaultCellLayout.dispose(),this._delegate=this._delegate.dispose(),this._layoutManager=this._layoutManager.dispose(),this._editController=this._editController&&this._editController.dispose(),this._filterSelector=this._filterSelector.dispose(),this._toastManager=this._toastManager.dispose(),this._tableViews=null,this._lookupProvider=this._lookupProvider&&this._lookupProvider.dispose(),this._columnSummaryRuntime=this._columnSummaryRuntime&&this._columnSummaryRuntime.dispose(),this._popupMenuManager=this._popupMenuManager&&this._popupMenuManager.dispose(),this._tooltipManager=this._tooltipManager&&this._tooltipManager.dispose(),this._focusedIndex=this._focusedIndex.dispose(),this._scrollTipView=this._scrollTipView&&this._scrollTipView.dispose(),this._waiOptions=this._waiOptions&&this._waiOptions.dispose(),this._watermarkLayer=this._watermarkLayer&&this._watermarkLayer.dispose(),hs.clearTemp(),this._cellGhostStyle={},e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"debugging",{get:function(){return this._debugging},set:function(t){t!=this._debugging&&(this._debugging=t,t?(this.addChild(this._debugView),this.invalidateLayout()):this.removeChild(this._debugView))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeTool",{get:function(){return this.container.activeTool},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(t){(t=Math.max(0,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this.invalidateLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarHeight",{get:function(){return this._scrollBarHeight},set:function(t){(t=Math.max(0,t))!=this._scrollBarHeight&&(this._scrollBarHeight=t,this.invalidateLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"body",{get:function(){return this._body},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this._header},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footers",{get:function(){return this._footers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footer",{get:function(){return this._footers.get(0)},enumerable:!1,configurable:!0}),i.prototype.setFooters=function(t){this._footers.assignFrom(t)},Object.defineProperty(i.prototype,"headerSummaries",{get:function(){return this._headerSummaries},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerSummary",{get:function(){return this._headerSummaries.get(0)},enumerable:!1,configurable:!0}),i.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t)},Object.defineProperty(i.prototype,"rowIndicator",{get:function(){return this._rowIndicator},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkBar",{get:function(){return this._checkBar},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stateBar",{get:function(){return this._stateBar},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterPanel",{get:function(){return this._filterPanel},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeCellLayout",{get:function(){return this._activeCellLayout},enumerable:!1,configurable:!0}),i.prototype._cellLayoutChanged=function(){this._cellLayoutDirty=!0},Object.defineProperty(i.prototype,"layoutCount",{get:function(){return this._activeCellLayout.visibleCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleLayoutCount",{get:function(){return this._activeCellLayout.visibleCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnCount",{get:function(){return this._columns.count},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._items?this._items.dataSource:null},set:function(t){this.dataSource,this._items&&(this._items.dataSource=t),this.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemSource",{get:function(){return this._items},set:function(t){this._items&&this._items.removeListener(this),this._items=t,this._items&&this._items.addListener(this)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return this.itemSource.maxItemCount},set:function(t){this.itemSource.maxItemCount=Math.max(0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._items?this._items.itemCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._items?this._items.rowCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleRowCount",{get:function(){return this._items?this._items.rowCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataCount",{get:function(){var t=this.dataSource;return t?t.rowCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnSummaryRuntime",{get:function(){return this._columnSummaryRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnValidationRuntime",{get:function(){return this._columnValidationRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowValidationRuntime",{get:function(){return this._rowValidationRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusedIndex",{get:function(){return this._focusedIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusedLayout",{get:function(){return this._focusedIndex&&this._focusedIndex.layout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusedColumn",{get:function(){return this._focusedIndex&&this._focusedIndex.layout&&this._focusedIndex.layout.firstColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusedRow",{get:function(){return this._focusedIndex?this._focusedIndex.itemIndex:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusedItem",{get:function(){return this._focusedIndex&&this._focusedIndex.item},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowBarContainer",{get:function(){return this._rowBarContainer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topContentPane",{get:function(){return this._topContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sideContentPane",{get:function(){return this._sideContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftContentPane",{get:function(){return this._leftContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentPane",{get:function(){return this._contentPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedContentPane",{get:function(){return this._fixedContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightContentPane",{get:function(){return this._rightContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bodyView",{get:function(){return this._bodyView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedBodyView",{get:function(){return this._fixedBodyView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightBodyView",{get:function(){return this._rightBodyView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerView",{get:function(){return this._headerView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedHeaderView",{get:function(){return this._fixedHeaderView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightHeaderView",{get:function(){return this._rightHeaderView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerSummaryView",{get:function(){return this._headerSummaryView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedHeaderSummaryView",{get:function(){return this._fixedHeaderSummaryView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightHeaderSummaryView",{get:function(){return this._rightHeaderSummaryView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerView",{get:function(){return this._footerView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedFooterView",{get:function(){return this._fixedFooterView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFooterView",{get:function(){return this._rightFooterView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterPanelView",{get:function(){return this._filterPanelView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedFilterView",{get:function(){return this._fixedFilterView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFilterView",{get:function(){return this._rightFilterView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headView",{get:function(){return this._headView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sumView",{get:function(){return this._sumView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footView",{get:function(){return this._footView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterView",{get:function(){return this._filterView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedOptions",{get:function(){return this._fixedOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayOptions",{get:function(){return this._displayOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editOptions",{get:function(){return this._editOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editorOptions",{get:function(){return this._editorOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"copyOptions",{get:function(){return this._copyOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pasteOptions",{get:function(){return this._pasteOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataDropOptions",{get:function(){return this._dataDropOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortingOptions",{get:function(){return this._sortingOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filteringOptions",{get:function(){return this._filteringOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mobileOptions",{get:function(){return this._mobileOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"WaiOptions",{get:function(){return this._waiOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"accessibility",{get:function(){return this._accessibility},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"delegate",{get:function(){return this._delegate},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"heightMeasurer",{get:function(){return this.container.heightMeasurer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selections",{get:function(){return this._selections},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionLayer",{get:function(){return this._selectionLayer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editController",{get:function(){return this._editController},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validationManager",{get:function(){return this._validationManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupMenuManager",{get:function(){return this._popupMenuManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltipManager",{get:function(){return this._tooltipManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toastManager",{get:function(){return this._toastManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topIndex",{get:function(){return this._topIndex},set:function(t){if((t=Math.max(0,Math.min(t,this.itemCount-this.layoutManager.fixedItemCount-1,this._vscrollBar?this._vscrollBar.maxPosition:0)))!=this._topIndex){var e=this.topIndexChanging(this._topIndex,t-this._topIndex,!1,!1);null==e||isNaN(e)||(t=this._topIndex+e,t=Math.min(this.itemCount-1,Math.max(0,t))),this._topIndex!==t&&(this._needRefresh=!0),this._topIndex=t,this.refreshView(),xt.isMobile()&&this.isEditing()&&!this.isItemEditing()?this.closePopups(!1):this.closePopups()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topItem",{get:function(){return this._topIndex+this.layoutManager.fixedItemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftPos",{get:function(){return this._leftPos},set:function(e){(e=Math.max(0,Math.min(e,this._hscrollBar?this._hscrollBar._maxPosition:0)))!=this._leftPos&&(this._leftPos=e,this._horzScrolled=!0,this._displayOptions.refreshMode==t.RefreshMode.VISIBLE_ONLY||this.isRecycleMode()&&this._needRefresh?this.refreshView():this.invalidate(),this.closePopups()),!this.isRecycleMode()&&this._debugging&&this._debugView.layout()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftCell",{get:function(){return this._layoutManager.getCellIndex(this.leftPos)},set:function(t){this.leftPos=this._layoutManager.getCellPoint(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftLayout",{get:function(){return this._layoutManager.firstLayout},set:function(t){var e=this._layoutManager;t=Math.max(e.fixedLayoutCount,Math.min(t,e.layoutCount-1)),this.leftPos=e.getLayoutBounds(t).x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupProvider",{get:function(){return this._lookupProvider},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canHovering",{get:function(){return!this.isEditing()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hoveredCell",{get:function(){return this._hoveredCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return 0==this.itemCount||0==this.visibleLayoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this.itemSource.sorted},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spanned",{get:function(){return this._bodyView.visible&&this._bodyView.spanned||this._fixedBodyView.visible&&this._fixedBodyView.spanned||this._rightBodyView.visible&&this._rightBodyView.spanned},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isSwiping",{get:function(){var t=this.activeTool,e=t.dragTracker;return e instanceof uc&&e.dragging||t._touchMoving},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellGhostStyle",{get:function(){return this._cellGhostStyle=this._cellGhostStyle||{}},enumerable:!1,configurable:!0}),i.prototype.addFeedbackElement=function(t){if(t&&!this._feedbackLayer.contains(t))return this._feedbackLayer.addChild(t),!0},i.prototype.removeFeedbackElement=function(t){var e=this._feedbackLayer.indexOf(t);return e>=0&&(this._feedbackLayer.removeChildAt(e),!0)},i.prototype.setEventFrom=function(t){this._eventFrom=t},i.prototype.getVisibleLayout=function(t){return this._activeCellLayout.getVisible(t)},i.prototype.getColumn=function(t){return this._columns.getColumn(t)},i.prototype.setColumns=function(t){this._columns.setColumns(t),this._columnMap={};for(var e=this._columns.count-1;e>=0;e--){var i=this._columns.getColumn(e);this._columnMap[i.$_hash]=i}this._columnsReset(),this.dataSource&&this.applyFilters()},i.prototype.setCellLayout=function(t){this._beforeChangeLayout();var e=this.isValid(this._focusedIndex)&&this._focusedIndex.layout.firstColumn;this._activeCellLayout&&this._activeCellLayout!==this._defaultCellLayout&&this._activeCellLayout.dispose();var i=t&&new as(this).load(t);i&&i.addListener(this);var o=this._focusedIndex&&this._focusedIndex.clone();this._activeCellLayout=i||this._defaultCellLayout,this._cellLayoutDirty=!0,this._clearSelectionViews(),this.invalidateLayout(),this._activeCellLayout.isDefault()&&this.setColumns(this._columns.columns),this._activeCellLayout.resetColumns(this._columns),this._activeCellLayout.$_refresh(this._columns,this.displayOptions.minCellWidth),this._activeCellLayout.invalidate(),this.refreshView(),o&&e&&setTimeout(function(){o.layout=this._activeCellLayout.layoutByColumn(e),this.setFocusedIndex(o)}.bind(this),10),this.clearRowHeights(),this._populateMerges()},i.prototype._checkEditing=function(){if(this.itemSource instanceof ko&&this.itemSource.isEditing())throw new Error("Item is editing")},i.prototype.addColumn=function(t,e){this._checkEditing();var i=this._columns.add(t,e);return i&&(this._columnMap[i.$_hash]=i,this._columnsReset(),this.dataSource&&this.applyFilters()),i},i.prototype.removeColumn=function(t){return"string"==typeof t&&(t=this.columnByName(t)),!!t&&(this._checkEditing(),!!this._columns.remove(t)&&(delete this._columnMap[t.$_hash],this._columnsReset(),this.dataSource&&this.applyFilters(),!0))},i.prototype.addLayout=function(t,e){return this.activeCellLayout.addLayout(t,e)},i.prototype.removeLayout=function(t){this.activeCellLayout.removeLayout(t)},i.prototype.restoreColumns=function(t){this._columns.restoreColumns(),this._columnsReset()},i.prototype.linearizeColumns=function(t){var e=this._activeCellLayout.collectColumns(!0,!0,!0);if(t=xt.makeArray(t),e&&e.length>0){if(t&&t.length>0)for(var i=function(i){e.sort((function(e,o){var n=e[t[i]],r=o[t[i]];return n<r?1:n>r?-1:0}))},o=0;o<t.length;o++)i(o);var n=[];e.forEach((function(t){n.push(t.name)})),this.setCellLayout(n)}},i.prototype.registerColumnLayouts=function(t){this._columnLayouts.load(t)},i.prototype.findColumnLayout=function(t){return this._columnLayouts.find(t)},i.prototype.invalidateColumn=function(t){this._columnLock<=0&&this._resetColumnIndices(t),this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},i.prototype.invalidateColumns=function(){this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},i.prototype.beginUpdate=function(){this._updateLock=!0},i.prototype.endUpdate=function(t){(t||this._updateLock)&&(this._updateLock=!1,this.refreshView())},i.prototype.invalidate=function(){this._container&&this._container.invalidate(!1)},i.prototype.invalidateLayout=function(){this._updateLock||this._loading||e.prototype.invalidateLayout.call(this)},i.prototype.invalidatePosition=function(){this._needPosition=!0},i.prototype.setNeedRefresh=function(t){this._needRefresh=!0,t&&e.prototype.invalidate.call(this,!1,!0)},i.prototype.invalidateCellLayouts=function(){this._updateLock||(this.clearRowHeights(),e.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},i.prototype.refreshView=function(t){if(!this._loading){if(t){var e=this._container;e._layoutNeeded=!0,this._needPosition=!0,this._horzScrolled=this._horzScrolled||this._needRefresh,e._render(Date.now())}else this.invalidateLayout();this.topIndex=this._topIndex,this.leftPos=this._leftPos}},i.prototype.resetGrid=function(){this._resetting=!0,this.topIndex=0,this.leftPos=0,this.refreshView()},i.prototype.getFirstCell=function(){if(this.itemCount>0){for(var t=0,e=0,i=this.itemCount;e<i;e++)if(this.getItem(e)instanceof So){t=e;break}return new hs(this,t>=0?t:0,this.getFirstColumn())}return null},i.prototype.$_setEditFocused=function(t,e){if(t!=this.$_editFocused){if(this.$_editFocused=t,t&&this.$_showFocusCell){var i=this.focusedIndex;!i||this.isValid(i)}this.$_showFocusCell=!1}t&&e&&"focusin"==e.type&&xt.isAncestorOf(this._container._container,e.target,e)&&nu.setActiveGrid(this.container.$_hash)},i.prototype.getItem=function(t){return this._items.getItem(t)},i.prototype.getItemIndexOfRow=function(t){return this._items.getIndexOfRow(t,!1)},i.prototype.getItemOfRow=function(t,e){return this._items.getItemOfRow(t,e)},i.prototype.getItemIndicesOfRows=function(t){return this._items.getIndicesOfRows(t,!1)},i.prototype.getRowOfItem=function(t){var e=this.getItem(t);return e?e.dataRow:-1},i.prototype.getItemOfModel=function(t){return null},i.prototype.getRowsOfItems=function(t,e){void 0===e&&(e=!1);for(var i=[],o=0,n=t;o<n.length;o++){var r=n[o],s=this.getItem(r),a=s?s.dataRow:-1;(e||a>=0)&&i.push(a)}return i},i.prototype.getIndicatorIndex=function(t,e){return e?this.itemCount-t.index-1:t.index},i.prototype.indicatorReverse=function(e){return e===t.IndicatorValue.REVERSE},i.prototype.getAllItems=function(){return this._items.getAllItems()},i.prototype.getImage=function(t){return null},i.prototype.getIndex=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=null),new hs(this,t,e)},i.prototype.getDataCellIndex=function(t,e){var i=t.parentElement,o=this._tableViews[i.$_view],n=i.$_row,r=o.layoutByCell(t);return null!=e?e.set(n,r):hs.temp(this,n,r)},Object.defineProperty(i.prototype,"handler",{get:function(){return this.$_handler},enumerable:!1,configurable:!0}),i.prototype.getDataColumns=function(t){return void 0===t&&(t=!0),this._activeCellLayout.getDataColumns(t)},i.prototype.optionsChanged=function(t){this._columnsDirty=!0,this.refreshView()},i.prototype.scrollRow=function(t){var e=this.topIndex;this.topIndex=e+t},i.prototype.selectColumnFilters=function(t){if(this.isItemEditing(null)){if(!this.filteringOptions.commitBeforeFiltering)return;try{if(!this.commit(!1))return}catch(t){var e=this.focusedItem;if(e&&t instanceof hr)return void((t=this._fireValidationFail(e.index,t.column,t))&&alert(this.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()));throw t}}this._fireFiltering()&&(this.hideEditor(!0),this._filterSelector.show(t.layout.firstColumn,t.cell,this.dataSource))},i.prototype.closeFilterSelector=function(){this._filterSelector.hide()},i.prototype.closePopups=function(t){void 0===t&&(t=!0),this._filterRunning||this._filterSelector.hide(),this._popupMenuManager.close(),this._tooltipManager.close(),t&&this._editController.closeList(!1)},i.prototype.layoutByDataCell=function(t){var e=t.parentElement;return this._tableViews[e.$_view].layoutByCell(t)},i.prototype.columnByHash=function(t){return this._columnMap[t]},i.prototype.columnByDataCell=function(t){return this._bodyView.columnByCell(t)||this._fixedBodyView.columnByCell(t)||this._rightBodyView.columnByCell(t)},i.prototype.columnByName=function(t){return this._columns.columnByName(t)},i.prototype.columnByField=function(t){return"string"==typeof t&&(t=this.dataSource.getFieldIndex(t)),this._columns.columnByField(t)},i.prototype.columnsByField=function(t){return"string"==typeof t&&(t=this.dataSource.getFieldIndex(t)),this._columns.columnsByField(t)},i.prototype.columnByTag=function(t){return this._columns.columnByTag(t)},i.prototype.columnsByTag=function(t){return this._columns.columnsByTag(t)},i.prototype.getHorzColumns=function(t,e){return this._activeCellLayout.getHorzColumns(t,e)},i.prototype.getGroupLevel=function(t){return-1},i.prototype.isGroupedColumn=function(t){return!1},i.prototype.layoutByColumn=function(t){return t instanceof Gr||(t=this.columnByName(t)),t?this._activeCellLayout.layoutByColumn(t):null},i.prototype.layoutByName=function(t){return this._activeCellLayout.layoutByName(t)},i.prototype.setFocus=function(t){function e(t){this.$_showFocusCell=!0;var e=this.focusedIndex.clone();if(e&&!this.isValid(e)&&(e.set(Math.max(0===this.topIndex?0:this.topItem,0),this.getFirstColumn(),this),this.setFocusedIndex(e,!0,!0)),this._accessibility&&!this.isEditing()&&this.isValid(e))if(this.layoutManager.cellIsVisible(e)&&!this._resetTdFocus){var i=this.getBodyCellAt(e,!0);i&&t!==i.cell&&this.getBodyViewAt(e).refreshTdFocused(e,!1)}else this._resetTdFocus=!0;else xt.isMobile()?this.container.setFocus():this._editController.setFocus(!0,t);nu.getActiveGrid()!==this&&nu.setActiveGrid(this.container.$_hash)}this.activeCellLayout.visibleCount>0?e.call(this,t):(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout(function(){this._setFocusTimer=null,e.call(this,t)}.bind(this),10))},i.prototype.getFirstLayout=function(){return this._activeCellLayout.first},i.prototype.getFirstColumn=function(){return this._activeCellLayout.firstColumn},i.prototype.collectColumns=function(t,e,i){return this._activeCellLayout.collectColumns(t,e,i)},i.prototype.collectColumnNames=function(t,e){return this._activeCellLayout.collectColumnNames(t,e)},i.prototype.collectGroupNames=function(){return this._activeCellLayout.collectColumnNames(!1,!1,!0)},i.prototype.getChildColumnNames=function(t){return this._activeCellLayout.collectColumnNames(!1,!1,!1,t)},i.prototype.collectDataColumns=function(t,e){return this._activeCellLayout.collectDataColumns(t,e)},i.prototype.isValid=function(t){return t&&t.grid===this&&t.itemIndex>=0&&t.itemIndex<this.itemCount&&t.layout&&t.layout.grid===this},i.prototype.getSelection=function(t){return void 0===t&&(t=0),t>=0&&t<this._selections.count?this._selections.getItem(t):null},i.prototype.getSelections=function(){return this._selections.getItems()},i.prototype.clearAddSelection=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var i=this.focusedIndex;t&&this._selections.clear(),e&&this.isValid(i)&&this.itemCount>0&&this.visibleLayoutCount>0&&this._selections.add(i,i,this._displayOptions.selectionStyle)},i.prototype.deleteSelection=function(t){void 0===t&&(t=!1),this.$_deleteSelection(null,t)},i.prototype.$_deleteSelection=function(e,i){function o(t,e){try{if(e&&e.length>0){for(var i=[],o=0,n=e.length;o<n;o++){var r=t.getItem(e[o]);r&&r.dataRow>=0&&i.push(r.dataRow)}if(i.length>0&&!t._fireRowsDeleting(i))return!1}}catch(t){return alert(t),!1}return!0}function n(t,e){var n=t.recursiveDeleting();return!!e&&((i||!t.editOptions.confirmWhenDelete||confirm(t.editOptions.deleteRowsMessage)&&o(t,[e.index]))&&(t.cancel(),bo(e.itemState)||t.itemSource.remove(e,n)),!0)}function r(t,e){for(var i=null,o=e.length;o--;){var n=t.getItem(e[o]),r=n.itemState;if(vo(r)){i=n,bo(r)&&e.splice(o,1);break}}var s=null;e.length>0&&(s=t.itemSource.getRemovableRows(e)),i&&t.cancel(),s&&t.itemSource.removeRows(s,t.recursiveDeleting())}void 0===i&&(i=!1);var s=this.editOptions,a=this.selections,l=this.itemSource;if((i||s.deletable)&&l instanceof ko)if(!this.isItemEditing(null)||s.deletableWhenEdit){if(this.commitEditor(!0),n(this,e))return!0;if(!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i,o=-1;return(o=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)>=0&&t.canDelete(i=t.getItem(o))&&n(t,i),!0}return!1}(this,a)){for(var u=a.count,c=[],h=0;h<u;h++){var p=a.getItem(h);if(ea(p)||xt.included(p.style,t.SelectionStyle.BLOCK,t.SelectionStyle.GROUP))for(var d=p.getBounds(),f=Math.min(d.r1,d.r2),g=Math.max(d.r1,d.r2),y=f;y<=g;y++){var _=this.getItem(y);(_.dataRow>=0||_.editable)&&c.push(y)}}c.sort((function(t,e){return t-e}));var m=-1;for(h=c.length;h--;)c[h]==m?c.splice(h,1):m=c[h];c.length>0&&this.canDelete(this.getItem(c[0]))&&(i||!s.confirmWhenDelete?o(this,c)&&(r(this,c),this.clearAddSelection(!0)):confirm(s.deleteRowsMessage)&&o(this,c)&&(r(this,c),this.clearAddSelection(!0)))}}else alert(window.RG_CONST&&window.RG_CONST.COMMITEDITING?window.RG_CONST.COMMITEDITING:"   .")},i.prototype.revertSelection=function(e){void 0===e&&(e=!1);var i=this.editOptions,o=this.selections,n=this.itemSource;if((e||i.revertable)&&n instanceof ko&&(this.commitEditor(!0),!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=-1;if((i=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)>=0)return t.itemSource.revert(i),!0}return!1}(this,o))){for(var r=o.count,s=[],a=0;a<r;a++){var l=o.getItem(a);if(ea(l)||xt.included(l.style,t.SelectionStyle.BLOCK,t.SelectionStyle.GROUP))for(var u=l.getBounds(),c=Math.min(u.r1,u.r2),h=Math.max(u.r1,u.r2),p=c;p<=h;p++){var d=this.getItem(p);(d.dataRow>=0||d.editable)&&s.push(p)}}s.sort((function(t,e){return t-e}));var f=-1;for(a=s.length;a--;)s[a]==f?s.splice(a,1):f=s[a];s.length>0&&n.revertAll(s)}},i.prototype.eraseSelection=function(e){var i=this.editOptions,o=this.selections,n=this.itemSource;if(i.readOnly||!e&&!i.erasable||!i.updatable)return!1;if(!(n instanceof ko))return!1;if(this.isItemEditing())return!1;if(function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=t.focusedIndex;return t.getWritableAt(i)&&t.setCellValue(i,void 0),!0}return!1}(this,o))return!0;var r=o.count;if(r<1)return!1;for(var s=[],a=0;a<r;a++){var l=o.getItem(a);(ea(l)||xt.included(l.style,t.SelectionStyle.BLOCK,t.SelectionStyle.GROUP))&&(s=s.concat(l.getItems()))}if(s.length>0){for(a=0;a<r;a++)o.getItem(a).setValues(void 0);return!0}},i.prototype.getSelectedItems=function(t){void 0===t&&(t=!1);var e=this._selections.getItem(0);return e&&e.getItems(t)},i.prototype.getSelectedItemIndices=function(t){void 0===t&&(t=!1);for(var e=this._selections,i=[],o=0;o<e.count;o++)e.getItem(o).getItemIndices(t).forEach((function(t){i.indexOf(t)<0&&i.push(t)}));return i},i.prototype.getSelectedRows=function(){for(var t=this._selections,e=[],i=0;i<t.count;i++)t.getItem(i).getRows().forEach((function(t){e.indexOf(t)<0&&e.push(t)}));return e},i.prototype.getSelectedLayouts=function(){for(var t=this.activeCellLayout.collectLayouts(!0),e=this._selections,i=[],o=0;o<t.length;o++)e.containsLayout(t[o])&&i.indexOf(t[o])<0&&i.push(t[o]);return i},i.prototype.setFocusedIndex=function(t,e,i,o){if(void 0===e&&(e=!0),void 0===i&&(i=!1),void 0===o&&(o=!0),!this._focusing&&!this.disposing){this._focusing=!0;try{return this.$_doSetFocusedIndex(t,e,i,!0,o)}finally{this._focusing=!1}}},i.prototype.setFocusedItem=function(t){t instanceof wo&&(t=t.index),this.setFocusedIndex(this.getIndex(t))},i.prototype.resetFocusedIndex=function(){this.setFocusedIndex(this._focusedIndex)},i.prototype.clearFocusedIndex=function(t){if(void 0===t&&(t=!1),!this._focusing&&!this.disposing){this._focusing=!0;try{var e=void 0;t&&this.focusedRow>=this.itemCount&&((e=this.focusedIndex.clone()).itemIndex=Math.max(-1,this.itemCount-1)),this._editController.remainFocusing(!0),this.$_doSetFocusedIndex(e,!0,!1,!1,!1)}finally{this._focusing=!1}}},i.prototype.getTableCell=function(t){if(!t)return null;for(var e=t,i=Ct(e);e&&!(e instanceof i.HTMLTableCellElement);)e=e.parentElement;if(e instanceof i.HTMLTableCellElement&&e.parentElement){var o=e.parentElement[v];if(o)return e;for(e=e.parentElement;e;){if(e instanceof i.HTMLTableCellElement&&(o=e.parentElement[v]))return e;e=e.parentElement}}return null},i.prototype.getTableView=function(t){return this._tableViews[t.parentElement[v]]},i.prototype.getBodyViewAt=function(t){return this._layoutManager.getBodyView(t)},i.prototype.getBodyView=function(t){return this.getTableView(t)},i.prototype.getRowView=function(t,e){return t.getRowView(e)},i.prototype.getHeaderView=function(t){return this.getTableView(t)},i.prototype.getFooterView=function(t){return this.getTableView(t)},i.prototype.getSummaryView=function(t){return this.getTableView(t)},i.prototype.getFilterView=function(t){return this.getTableView(t)},i.prototype.getCellType=function(t){if(t){var e=t.parentElement;if(-99===e[b])return"fixedbar";var i=this._tableViews[e[v]];if(!(i instanceof fl))return i instanceof rc?i.getCellType(t):i instanceof ml?"header":i instanceof El?"footer":i instanceof jc?"summary":i instanceof vh?"inlineFilter":i instanceof au?"head":i instanceof uu?"foot":i instanceof Uc?"sum":i instanceof Sh?"filter":this._getCellTypeOf(i);var o=i.bodyCellByCell(t);if(o)return!(o.item instanceof Oo)||o.dataColumn&&o.dataColumn.mergeGrouped?"data":"groupFooter"}},i.prototype._getCellTypeOf=function(t){},i.prototype.getBodyCellAt=function(t,e){var i=this._layoutManager,o=this._bodyView.visible&&this._bodyView.getCellAt(i,t)||this._fixedBodyView.visible&&this._fixedBodyView.getCellAt(i,t)||this._rightBodyView.visible&&this._rightBodyView.getCellAt(i,t);return o&&e&&o.merged&&o.head?o.head:o},i.prototype.getHeaderCellAt=function(t){return this._headerView.visible&&this._headerView.tableCellByLayout(t)||this._fixedHeaderView.visible&&this._fixedHeaderView.tableCellByLayout(t)||this._rightHeaderView.visible&&this._rightHeaderView.tableCellByLayout(t)},i.prototype.getBodyCellbyCell=function(t){return this.getBodyCellAt(this.cellToIndex(t),!1)},i.prototype.cellToIndex=function(t){var e=hs.temp(this,-1,null);if((t=this.getCellViewOf(t))&&t instanceof Ct(t).HTMLTableCellElement){var i=this.getBodyView(t);i&&i instanceof fl&&(e.layout=i.layoutByCell(t),e.itemIndex=t.parentElement[b])}return e},i.prototype.cellToContainer=function(t,e){void 0===e&&(e=null);var i=this.getTableView(t);e=i.getCellPoint(t,e);var o=i.boundsByContainer(q.Temp.set(e.x,e.y,0,0));return e.set(o.x,o.y),e},i.prototype.pointToIndex=function(t,e,i,o){var n=hs.temp(this,-1,null);return o?this._layoutManager.mouseToIndex(this.getCellViewOf(t),e,i,n):this._layoutManager.mouseToIndexEx(this.getCellViewOf(t),e,i,n),n},i.prototype.getCellRectAt=function(t,e,i){var o=this.getBodyViewAt(e);if(o){var n=o.getCellAt(t,e);return n&&o.getCellRect(t,n,i)}},i.prototype.getEditCellBounds=function(t,e){var i=this.layoutManager,o=i.getBodyView(e),n=o.getCellAt(i,e);if(n){var r=this.canMergeEditing(n),s=o.getCellRectAt(i,e,r);return s=o.boundsByContainer(s),!e.colFixed&&s.width>i.nonFixedBounds.width&&(s.width=i.nonFixedBounds.width),s}return xt.$_INVISIBLE_EDIT_BOUNDS.clone()},i.prototype.getEditBounds=function(t,e){var i=e.item;if(!i)return null;var o=this.layoutManager,n=o.fixedItemCount;if(n>0&&i.index>=n&&i.index-n<o.topIndex)return xt.$_INVISIBLE_EDIT_BOUNDS.clone();var r=o.getBodyView(e),s=r.getCellAt(o,e);if(s){s=s.merged?s.head:s;var a=r.getCellRectAt(o,e,!1);return(a=r.boundsByContainer(a)).width-=(t.native?0:s.editWidth)+s.buttonWidth+s.errorWidth,a}return xt.$_INVISIBLE_EDIT_BOUNDS.clone()},i.prototype.getCellViewOf=function(t){for(var e=Ct(t);t;){if(t instanceof e.HTMLTableCellElement)return t;t=t.parentElement}return null},i.prototype.getFocusedCellView=function(t){var e=t.item;if(!e)return null;var i=this.layoutManager,o=i.fixedItemCount;if(o>0&&e.index>=o&&e.index-o<i.topIndex)return null;var n=e.merged,r=t.colFixed,s=t.rightFixed;return e.isData||n?(s?this._rightBodyView:r?this._fixedBodyView:this._bodyView).getCellView(i,t):null},i.prototype.isFocusedCell=function(t){return hs.areEquals(t,this._focusedIndex)},i.prototype.isFocusedRow=function(t){return this._focusedIndex.itemIndex==t},i.prototype.isFocusedColumn=function(t){return this._focusedIndex.column===t},i.prototype.fitSyncHeight=function(){return this._layoutManager.fitSyncHeight()},i.prototype.pasteFromClipboard=function(t,e){var i=this.focusedIndex.clone(),o=this.pasteOptions;if(i.normalize(this),this.isValid(i)&&i.dataColumn&&o.enabled&&this._firePaste(i,e))try{o.singleMode?this._clipboardManager.pasteCellFromClipboard(i,t):(this._clipboardManager.pasteFromClipboard(i,t),i.item&&vo(i.item.itemState)&&this.refreshView()),this._firePasted()}catch(t){throw t instanceof hr&&(t=this._fireValidationFail(this._clipboardManager.appendingIndex.itemIndex,t.column,t))&&alert(this._editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}},i.prototype.copyToClipboard=function(e,i,o){void 0===o&&(o=!1);var n,r=!1,s=this.focusedIndex,a=this.selections;if(o||this.copyOptions.enabled){if(o||(n=(r=this.copyOptions.singleMode||0==a.count||a.single)?new na(a,t.SelectionStyle.BLOCK,s,s):a.getItems(),o=this._fireCopy(n,e)),o){var l=void 0,u=void 0;if(!i&&Array.isArray(n)){var c=n.length>1,h=n.length>1,p=!0;if(n.length>1&&n.forEach((function(t){p=p&&(t instanceof ra||t instanceof sa),c=c&&t instanceof ra,h=h&&t instanceof sa})),!p)return alert("multi selection copy not supported"),null;l=c?this.getSelectedItemIndices(!1):null,u=h?this.getSelectedLayouts():null}return i=i||(Array.isArray(n)?n[0].getBounds():n.getBounds()),r?this._clipboardManager.copyCellToClipboard(s):this._clipboardManager.copyToClipboard(i,l,u)}return null}return this._clipboardManager.copyEmtpyToClipboard()},i.prototype.toClipboard=function(t,e){void 0===e&&(e=!0);var i=function(t){var e;return"string"==typeof t?e=this.columnByName(t):t instanceof Gr&&(e=t),e&&e.layout}.bind(this);if(!this.empty){var o;if(!(t&&t instanceof gs)){var n=void 0,r=void 0;if(t?(n=i(t.startColumn),r=i(t.endColumn)):(n=this._activeCellLayout.first,r=this._activeCellLayout.last),!n||!r)return;var s=null==(t=t||{}).startItem?0:Math.max(0,t.startItem),a=null==t.endItem?this.itemCount-1:Math.min(t.endItem,this.itemCount-1);o=gs.createRange(s,n,a,r)}var l=this.copyToClipboard(null,o,!0);if(l=null==l?"":l,!e)return l;if(xt.isIE&&window.clipboardData)window.clipboardData.setData("text",l);else{var u=this.doc,c=u.createElement("textarea"),h=c.style;h.position="absolute",h.top="-10000px",u.body.appendChild(c),c.value=l,c.select(),u.execCommand("copy"),setTimeout((function(){u.body.removeChild(c)}),100)}}},i.prototype.showToast=function(t,e){this._toastManager.show(t,e,null)},i.prototype.hideToast=function(t){this._toastManager.close(),t&&setTimeout(t,0)},i.prototype.isEditing=function(t){return this._editController.editing&&(!t||hs.areEquals(t,this._editController.editIndex))},i.prototype.getEditItem=function(){return this.itemSource instanceof ko&&this.itemSource.editingItem},i.prototype.isItemEditing=function(t){return(t=t||this.focusedIndex.item)&&this.itemSource instanceof ko&&this.itemSource.isEditing(t)},i.prototype.isItemEdited=function(t){return(t=t||this.focusedIndex.item)&&this.itemSource instanceof ko&&this.itemSource.isEdited(t)},i.prototype.getEditValue=function(t,e,i){this._doGetEditValue(e,i)},i.prototype._doGetEditValue=function(t,e){this._fireGetEditValue(t,e)},i.prototype.isCellEditing=function(){return!!this._editOptions.commitByCell&&this._items.isUpdating},i.prototype.editorCommit=function(t,e,i){return this._doCellCommit(t,e,i)},i.prototype.scrollOnEditing=function(){if(this.isEditing())switch(this.editOptions.scrollOnEditing){case t.ScrollOnEditing.CANCEL:this.cancelEditor(!0);break;case t.ScrollOnEditing.COMMIT:this.commitEditor(!0);case t.ScrollOnEditing.DEFAULT:}},i.prototype._doCellCommit=function(t,e,i){return this._fireEditCommit(t,e,i)},i.prototype.editorActivated=function(t){this._doEditorActivated(t.editIndex,!0,t)},i.prototype._doEditorActivated=function(t,e,i){var o=this.getBodyCellAt(t,!1),n=o&&this.getBodyView(o.cell);n&&n.$_buttonZIndexChanged(this,o,e,i)},i.prototype.setCellUpdateEventLock=function(t){this._cellUpdateEventLock=t},i.prototype.$_validateCellValue=function(t,e){try{var i=bo(t.item.itemState);return this._validationManager.validateCell(t,i,!1),!0}catch(e){if(!(e instanceof hr))throw e;this._validationManager.addInvalidateCell(t,e)}return!1},i.prototype.$_refreshInvalidList=function(t){this.itemCount<=0||t?this.validationManager.clearInvalidateList():this.validationManager.checkRowIds()},i.prototype.validateCellCommit=function(t,e){this.editOptions.validateOnEdited&&this.$_validateCellValue(t,e)},i.prototype.validateCells=function(t,e,i){return this._validationManager.validateCells(t,e,i)},i.prototype.getInvalidCells=function(t){return this._validationManager.getInvalidCells(t)},i.prototype.clearInvalidCells=function(){this._validationManager.clearInvalidCells()},i.prototype.getEditableAt=function(t,e){var i=t.dataColumn;if(!i)return!1;if(e&&null!=e.editable)return e.editable;if(t.item.isDataRow){var o=t.item;if(null!=o.editable)return o.editable}var n=this.editOptions;if(n.columnEditableFirst){if(!(null!=i.editable?i.editable:n.editable))return!1}else{if(!n.editable)return!1;if(!1===i.editable)return!1}var r=this.fixedOptions;return!(t.colFixed&&!r.editable)&&!(t.rowFixed&&!r.rowEditable)},i.prototype.getReadOnlyAt=function(e,i){var o=e.dataColumn;if(!o)return!0;var n,r,s=this._items.getItem(e.itemIndex);return!s||(i&&null!=i.readOnly?i.readOnly:(s=s.merged&&s instanceof Eo?s.firstDataItem:s,!this.editOptions.updatable&&(n=s.itemState,r=s.rowState,n!=t.ItemState.INSERTING&&n!=t.ItemState.APPENDING&&r!=t.RowState.CREATED)||!this._items.canUpdate(s,o.dataIndex)||!!this._editOptions.readOnly||!!o.readOnly))},i.prototype.getWritableAt=function(t){if(!this.isValid(t))return!1;var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);if(i){var o=i.merged&&i.head||i;return(null==i.editable||i.editable||o.renderer2&&o.renderer2.canEdit())&&!i.readonly}var n=t.dataColumn,r=this.body.getCell(t,!1),s=r&&n.getCellStyle(r),a=n.readOnly,l=n.isWritable();return s&&"string"!=typeof s&&(a=null!==s.readOnly?s.readOnly:n.readOnly,l=null!==s.editable?s.editable:n.isWritable()),l&&!a}},i.prototype.getWritable=function(t,e){var i=e.layout,o=hs.temp(this,t,i),n=this.getWritableAt(o);return void 0===n?e.isWritable():n},i.prototype.canEditAt=function(t){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);return i&&void 0!==i.editable?i.editable:this.getEditableAt(t,null)}},i.prototype.canWriteAt=function(t){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);return i&&void 0!==i.readonly?!i.readonly:!this.getReadOnlyAt(t,null)}},i.prototype.canUpdate=function(e,i){return this.editOptions.canUpdate(e.rowState===t.RowState.CREATED)&&this.visibleLayoutCount>0&&this.itemSource&&this.itemSource.canUpdate(e,i)},i.prototype.canAppend=function(){var t=this.itemSource,e=!this.isEditing()&&this.editOptions.canAppend()&&this.visibleLayoutCount>0&&t&&t.canAppend();if(e)try{if(!this._fireRowInserting(t.itemCount,-1))return!1}catch(t){return alert(t.message||t),!1}return e},i.prototype.canInsert=function(t,e,i){var o=this.itemSource,n=!this.isEditing()&&this._doCanInsert(t,e,i)&&this.editOptions.canInsert()&&this.visibleLayoutCount>0&&o&&o.canInsert(t);if(n)try{if(!this._fireRowInserting(t.index+(e?1:0),-1))return!1}catch(t){return alert(t.message||t),!1}return n},i.prototype._doCanInsert=function(t,e,i){return!0},i.prototype.canDelete=function(t){var e=this.itemSource;return this.editOptions.canDelete()&&this.visibleLayoutCount>0&&e&&(this.isItemEditing(t)||e.canDelete(t))},i.prototype.canCommit=function(t){return this.isItemEditing(t)&&(this.isItemEdited()||this.editOptions.commitWhenNoEdit)},i.prototype.canCancel=function(t){return this.isItemEditing(t)},i.prototype.canMergeEditing=function(t){return!this.isTree()&&t&&t.merged&&this.editOptions.commitByCell&&t.dataColumn&&t.dataColumn.mergeEdit},i.prototype.edit=function(t){return t||(t=this.focusedIndex),!!(this.isValid(t)&&this.itemSource instanceof ko)&&!(t.dataColumn&&!this.canUpdate(t.item,t.dataField))&&(!vo(t.item.itemState)&&this.validationManager.cloneError(t.dataId,-1),this.itemSource.edit(t.item))},i.prototype.insertAt=function(t,e){return this.insert(this.getItem(t),e)},i.prototype.insert=function(t,e,i){if(void 0===t&&(t=null),void 0===e&&(e=!1),void 0===i&&(i=!1),t||(t=this.focusedIndex?this.focusedIndex.item:null),!t)return!1;var o=this.itemSource;if(o instanceof ko&&this.canInsert(t,e,i)){var n=this.$_getInsertDefaults(null);return this._cancelDummy(),o.insert(t,n,e,i)}return!1},i.prototype.append=function(){var t=this.itemSource;if(t instanceof ko&&t.dataSource&&this.canAppend()){var e=this.$_getInsertDefaults(null);return this._cancelDummy(),t.append(e)}return!1},i.prototype._appendDummy=function(){var t=this._editOptions;t.displayEmptyEditRow&&t.appendable&&this._items.appendDummy()},i.prototype._cancelDummy=function(){this._items.cancelDummy()},i.prototype.setValueAt=function(t,e,i){var o=this.getItem(t);if(o&&e>=0)if(o instanceof Do||o instanceof lr)o.setValue(e,i);else{var n=o.dataRow;n>=0&&this.dataSource.setValue(n,e,i)}},i.prototype.setCellValue=function(t,e){this.isValid(t)&&this.setValueAt(t.itemIndex,t.dataField,e)},i.prototype.recallHeight=function(){this._container.recallHeight()},i.prototype.$_canShowEditor=function(t,e,i){return!!this.isValid(t)&&this._fireShowEditor(this._editorIndex.assign(t),e,i)},i.prototype.$_canShowEditCommand=function(t){if(this.isValid(t))return this._fireShowEditCommand(t)},i.prototype.hideEditor=function(t){void 0===t&&(t=!1),this._editController.closeList(!1),this._editController.hideEditor(),t&&this.activeTool.resetFocused()},i.prototype.requestPrepareEditor=function(){this._editController.requestPrepareEditor()},i.prototype.fillEditSearchItems=function(t,e,i,o){this._editController.fillSearchItems(t,e,i,o)},i.prototype.showEditor=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),t=t||this.focusedIndex,this._editController.showEditor(t,i))return this.activeTool.resetFocused(),e&&this._editController.caretToLast(),!0},i.prototype.showEditList=function(t){if(this._editController.showList(t))return!0},i.prototype.editorButtonClicked=function(t,e){this._editController.buttonClicked(t,e),this._fireEditButtonClicked(t)},Object.defineProperty(i.prototype,"canUndo",{get:function(){var t=this.dataSource;return t&&t.canUndo&&!this.isItemEditing()},enumerable:!1,configurable:!0}),i.prototype.undo=function(){return!!this.canUndo&&(this.dataSource.undo(),!0)},Object.defineProperty(i.prototype,"canRedo",{get:function(){var t=this.dataSource;return t&&t.canRedo&&!this.isItemEditing()},enumerable:!1,configurable:!0}),i.prototype.redo=function(){return!!this.canRedo&&(this.dataSource.redo(),!0)},i.prototype.execute=function(t){},i.prototype.clearCommandStack=function(t){this.dataSource.clearCommandStack()},i.prototype.setLookups=function(t){t&&(this._lookupProvider||(this._lookupProvider=new kc,this._lookupProvider.addListener(this)),this._lookupProvider.load(t))},i.prototype.addLookupSource=function(t){(this._lookupProvider||(this._lookupProvider=new kc)).add(t)},i.prototype.removeLookupSource=function(t){this._lookupProvider&&this._lookupProvider.remove(t)},i.prototype.existsLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw new Error("Invalid lookup source id: "+t);return i.exists(xt.makeArray(e))}},i.prototype.fillLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw new Error("Invalid lookup source id: "+t);e.rows?i.fillRows(e.rows):i.fill(e.keys,e.values)}},i.prototype.clearLookupData=function(t){if(t){var e=this._lookupProvider&&this._lookupProvider.getSource(t);if(!e)throw new Error("Invalid lookup source id: "+t);e.clear()}},i.prototype.addLookupData=function(t,e,i){if(void 0===i&&(i=null),t&&e){e=xt.makeArray(e);var o=this._lookupProvider&&this._lookupProvider.getSource(t);if(!o)throw new Error("Invalid lookup source id: "+t);i?o.add(e,i):o.addRow(e)}},i.prototype.setOptions=function(t){},i.prototype.doContextMenu=function(t){var e,i,o,n,r,s,a,l=t.mouseX,u=t.mouseY,c=this.activeTool,h=c._findTableCell(),p=c.findElementAt(l,u,!1);if(h){var d=this.getTableView(h),f=this.getCellType(h),g=void 0,y=void 0;switch(f){case"head":e=gc.getSub(f,this.headView.getCellType(h)),s=(i=this.headView.getHeadModel(h))&&i.popupMenuName;break;case"foot":e=gc.getSub(f,this.footView.getCellType(h)),s=(i=this.footView.getFootModel(h))&&i.popupMenuName;break;case"indicator":g=this.rowBarContainer.rowOf(h),y=this.getRowOfItem(g),e=gc.getItem(f,g,y),s=this.rowIndicator.popupMenuName;break;case"state":g=this.rowBarContainer.rowOf(h),y=this.getRowOfItem(g),e=gc.getItem(f,g,y),s=this.stateBar.popupMenuName;break;case"check":g=this.rowBarContainer.rowOf(h),y=this.getRowOfItem(g),e=gc.getItem(f,g,y),s=this.checkBar.popupMenuName;break;case"header":a=d.layoutByCell(h),e=gc.getLayout(f,a),s=a.firstColumn.header.popupMenuName;break;case"data":if((n=d.bodyCellByCell(h)).grouped)e=gc.getItem("groupHeader",n.item.index,null);else{var _=hs.temp(this,p instanceof al?p.itemIndex:n.item.index,n.layout);e=gc.getCell(f,n,_),s=n.dataColumn.popupMenuName}break;case"groupFooter":n=d.bodyCellByCell(h),r=p&&p._item&&p._item.$_footerIndex,e=gc.getGroupFooter(f,n.item.index,n.layout,r);var m=n.dataColumn.groupFooters.get(r);s=m&&m.popupMenuName;break;case"footer":case"summary":var v=d.tableCellByCell(h);r=v.summaryIndex;var C="footer"===f?v.layout.firstColumn.footers.get(r):v.layout.firstColumn.headerSummaries.get(r);e=gc.getSummary(f,v.summaryIndex,v.layout),s=C&&C.popupMenuName;break;case"groupHead":case"groupFoot":var w=h[S];e=gc.getGroupElt(f,w);break;case"groupBar":var E=h[b];y=this.getRowOfItem(E),e=gc.getItem(f,E,y)}}else p&&p===c._clickElement&&(e=c._getClickData(p));if(!1!==(o=this._fireContextMenuPopup(l,u,e,s||this._contextMenu,!0))){var x=this._popupMenuManager;if("string"==typeof o?s=o:null!=o&&"object"==typeof o||(s=s||this._contextMenu),s){t.preventDefault();var O=x.getMenu(s);O&&x.showContext(O,t,l,u,e)}}return null},i.prototype.setContextMenu=function(t){return t?this.addPopupMenu(this._contextMenu="gridContextMenu",t,!0,this):this._contextMenu=null},i.prototype.addPopupMenu=function(t,e,i,o){if(void 0===i&&(i=!0),e=xt.makeArray(e),t&&e)return this.popupMenuManager.addMenu(t,e,i,o)},i.prototype.removePopupMenu=function(t){this.popupMenuManager.removeMenu(t)},i.prototype.getPopupMenu=function(t){return this.popupMenuManager.getMenu(t)},i.prototype.setCursor=function(t,e){if(t){var i=this.getTableCell(t),o=i?this.getTableView(i):this._tableViews[t[v]];if(o instanceof Wa)return void o.setCursor(e)}this._container.setCursor(e)},i.prototype.canMoveLayout=function(t){var e=t.root.vindex,i=this.layoutManager;return!(i.mergedRowGrouped&&e<i.rowGroupLevels)&&(this.fixedOptions.movable||e>=i.fixedLayoutCount&&e<i.rightFirstLayout)},i.prototype.canMoveToLayout=function(t){return this.canMoveLayout(t)},i.prototype.getEditCellValue=function(){return this._editController.editValue},i.prototype.setEditCellValue=function(t,e,i){(this.isEditing()||e)&&this._editController.setEditValue(t,i)},i.prototype.searchItem=function(t){t instanceof ii||(t=new ii(t));var e=xt.makeArray(t.fields),i=xt.makeArray(t.values),o=this.itemSource,n=t.startIndex,r=t.reverse,s=-1;if(e&&e.length>0&&i&&i.length>0&&o){var a=void 0,l=void 0,u=void 0,c=void 0,h=e.length,p=[];for(a=0;a<h;a++)l=parseFloat(e[a]),!isNaN(l)&&l>=0?p.push(l):(u=this.dataSource.getFieldIndex(e[a]))>=0&&p.push(u);if(p.length>0){var d=o.itemCount;n=r?Math.min(d-1,n):Math.max(0,n),(s=(r?n>=0:n<d)?o.findItem(p,i,t,n,r?0:d-1):-1)<0&&t.wrap&&(r?n<d-1:n>0)&&(s=o.findItem(p,i,t,r?d-1:0,r?n+1:n-1))}s>=0&&t.select&&(c=this.getIndex(s,xt.pick(this.focusedIndex.column,this.getFirstColumn())),this.setFocusedIndex(c,!0,!0))}return s},i.prototype.searchCell=function(t){var e,i,o,n=this.itemSource,r=n&&n.dataSource,s=n.itemCount,a=t.fields=xt.makeArray(t.fields),l=t.columns=xt.makeArray(t.columns),u=[],c=null;if(r)if(!a&&l)for(e=0,i=l.length;e<i;e++){var h=this.columnByName(l[e]);if(h instanceof Hr){if(h.dataIndex<0)throw new Error("invalid search Column "+l[e]);u.push(h.dataIndex)}}else for(e=0,i=(a=a||r.getOrgFieldNames()).length;e<i;e++)o=parseFloat(a[e]),!isNaN(o)&&o>=0?u.push(o):u.push(r.getFieldIndex(a[e]));t instanceof oi||(t.reverse&&(t.hasOwnProperty("startIndex")||(t.startIndex=s-1),t.hasOwnProperty("startFieldIndex")||(t.startFieldIndex=u.length-1)),t=new oi(t));var p=t.wrap,d=t.select,f=t.value,g=t.reverse;if(r&&u&&u.length>0&&null!=f){if(u.length>0){var y=g?Math.min(s-1,t.startIndex):Math.max(0,t.startIndex),_=Math.max(g?-1:0,t.startFieldIndex),m=g?y>=0:y<s,v=g?y<s-1||_<u.length:y>0||_>0,b=g?0:s-1;!(c=m?n.findCell(u,f,t,y,b,_):null)&&p&&v&&(c=n.findCell(u,f,t,g?s-1:0,y,g?_:0)),c&&(c.fieldName=r.getOrgFieldName(c.fieldIndex))}if(c&&d){var C=void 0;(C=l?this.getIndex(c.itemIndex,xt.pick(this.columnByName(l[c.searchFieldIndex]),this.focusedIndex.column)):this.getIndex(c.itemIndex,xt.pick(this.columnByField(c.fieldIndex),this.focusedIndex.column)))&&this.setFocusedIndex(C,!0,!0)}}return c},i.prototype.isCheckable=function(t){var e=this.getItem(t);return e&&e.checkable},i.prototype.isCheckableOfRow=function(t){var e=this.getItemOfRow(t,!0);return e&&e.checkable},i.prototype.setCheckable=function(t,e){var i=this.getItem(t);i&&i.setCheckable(e)},i.prototype.setCheckableOfRow=function(t,e){var i=this.getItemOfRow(t,!0);i&&i.setCheckable(e)},i.prototype.isCheckedItem=function(t){var e=this.getItem(t);return e&&e.checked},i.prototype.isCheckedRow=function(t){var e=this._items.getItemOfRow(t,!0);return e&&e.checked},i.prototype.checkAll=function(t,e,i,o){var n=this._checkBar.showGroup&&!this._checkBar.merged;this._items.checkAll(t,e,i,o,n)},i.prototype.toggleCheck=function(t){var e=this.getItem(t);e&&e.checkable&&this.checkItem(e.index,!e.checked,this.checkBar.exclusive,!0)},i.prototype.toggleChecks=function(t,e){var i=[];if(e&&e.isDataRow&&e.checkable){if(this.checkBar.merged){var o=t[0],n=t[t.length-1],r=o.index,s=n.index,a=this.checkBar.merges,l=a.getRoom(hs.temp(this,r,null));r=Math.min(r,l?l.head:r),l=a.getRoom(hs.temp(this,s,null)),s=Math.max(s,l?l.tail:s),t=[];for(var u=r;u<=s;u++){var c=this.getItem(u);c.checkable&&c.isDataRow&&t.push(c)}}for(u=0;u<t.length;u++)t[u].checkable&&t[u].dataRow>=0&&i.push(t[u]);var h=!e.checked;this.checkBar.exclusive&&this.itemSource._clearChecked(),i.length>0&&this._items.checkItems(i,h,!0)}},i.prototype.checkItem=function(t,e,i,o){var n=this.getItem(t);n&&this._items.checkItem(n,e,i,o)},i.prototype.checkRow=function(t,e,i,o){var n,r=this.getItemIndexOfRow(t);r>-1&&(n=this.getItem(r))&&(n=n instanceof Do?n:null),(n=n||this.getItemOfRow(t,!0))&&this._items.checkItem(n,e,i,o)},i.prototype.checkItems=function(t,e,i){var o=this._items.getItemsByIndices(t);this._items.checkItems(o,e,i)},i.prototype.checkRows=function(t,e,i){var o=this._items.getItemsByRows(t,!0);this._items.checkItems(o,e,i)},i.prototype.setAllCheck=function(t,e){var i=this.checkBar.exclusive;if(this._headView.allChecked=t,e&&(!i||!t)){var o=this.checkBar;this.checkAll(t,o.visibleOnly,o.checkableOnly,!1)}},Object.defineProperty(i.prototype,"allChecked",{get:function(){return this._headView.allChecked},enumerable:!1,configurable:!0}),i.prototype.resetCheckables=function(){},i.prototype.applyCheckables=function(){},i.prototype.registerCustomRenderer=function(t,e){this._delegate.addCustomRenderer(t,e)},i.prototype.unregisterCustomRenderer=function(t){this._delegate.removeCustomRenderer(t)},i.prototype.existsCustomRenderer=function(t){return this._delegate.existsCustomRenderer(t)},i.prototype.unregisterAllCustomRenderer=function(){this._delegate.clearCustomRenderers()},i.prototype.getValueAt=function(t,e){var i=this.getItem(e),o=t.firstColumn;if(o instanceof Hr)return i&&i.getData(o.dataIndex)},i.prototype.getCellValue=function(t){if(this.isValid(t)){var e=this.getItem(t.itemIndex),i=t.dataColumn;if(e&&i)return e.getData(i.dataIndex)}},i.prototype.getDistinctItemValues=function(e,i,o){void 0===i&&(i=-1),void 0===o&&(o=t.SortDirection.ASCENDING);var n=this.columnByField(e);if(!n)return null;if(0!=i){var r=n.getField().dataType,s=[],a=[];return this._items._rs.getAllItems().forEach((function(i){if(i instanceof So||i instanceof or){var o=i.getData(e);switch(r){case t.ValueType.NUMBER:null!=o&&isNaN(o)||s.indexOf(o)<0&&s.push(o);break;case t.ValueType.DATE:case t.ValueType.DATETIME:o?a.indexOf(o.getTime())<0&&(a.push(o.getTime()),s.push(o)):s.indexOf(o)<0&&s.push(o);break;default:s.indexOf(o)<0&&s.push(o)}}})),o!==t.SortDirection.NONE&&(xt.included(r,t.ValueType.DATETIME,t.ValueType.DATE,t.ValueType.NUMBER)?s.sort((function(t,e){return t-e})):s.sort(),o===t.SortDirection.DESCENDING&&s.reverse()),i<0?s:s.slice(0,i)}return null},i.prototype.getDisplayText=function(t){var e=t.dataColumn;if(e){var i=e.dataIndex;if(i>=0){var o=t.item;if(o instanceof So||o instanceof or){var n=o.getData(i);if(e instanceof $r)return on.getText(n);var r=new Br,s=this._body.getCellFormatters(e,null,t,r);return Zo._getDisplayText(this,o,e,n,s)}if(o instanceof Oo){var a=e.groupFooters.get(o.$_footerIndex);return n=nh.getValue(o,e),s=this._rowGroup.getFooterCellFormatters(a,null),nh.$_displayText(o,e,n,s)}}}return""},i.prototype._fitLayoutWidth=function(e,i){var o,n,r=function(t){var e=Ct(t).getComputedStyle(t),i={};if(e){c=e.paddingLeft;var o=parseInt(c.substr(0,c.indexOf("px")));h+=o>0?o:0,c=e.paddingRight,o=parseInt(c.substr(0,c.indexOf("px"))),h+=o>0?o:0,i={fontSize:e.fontSize,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontStyle:e.fontStyle}}return{w:h,font:i}};if(!e.visible)return 0;var s=this.itemSource,a=this.getIndex(this.topIndex,e.firstColumn),l=e.firstColumn.header,u="",c="",h=0,p=0,d=0,f=null===(n=null===(o=this.getHeaderCellAt(e))||void 0===o?void 0:o.cell)||void 0===n?void 0:n.firstElementChild;if(i&&f){var g=r(f),y=g.w,_=g.font;p=y+this.container.measureText("rg-header-cell",l.displayText,_)+2}else i&&(d=xt.getTextLength(u),p=h+this.container.measureText("rg-header-cell",l.displayText,null)+2);var m,v=this.getBodyCellAt(a,!1),b=v&&v.renderer2&&v.renderer2._dom;if(b){var C=r(b),w=C.w;m=C.font,h=w}for(var S=0,E=s.itemCount;S<E;S++)a.itemIndex=S,c=this.getDisplayText(a),xt.getTextLength(c)>d&&(d=xt.getTextLength(c),u=c);if(d>0){h+=this.container.measureText("rg-data-cell",u,m)+2;var x=e.getDataColumn(),O=x.editor,R=this.delegate.getCellEditor(pa.getEditorType(O));R.hasButton(this.displayOptions.showNativeEditButton,O)&&(h+=this.body.editButtonWidth*R.buttonCount),x.button!==t.CellButton.NONE&&(h+=this.body.cellButtonWidth)}return Math.max(h,p)},i.prototype.fitLayoutWidth=function(e,i,o,n){var r=0;function s(t,e){var i=this.getHeaderCellAt(t);if(n&&i){var o=i.textSpan,r=o.style.whiteSpace;o.style.whiteSpace="nowrap";var s=o.getBoundingClientRect().width;return o.style.whiteSpace=r,s+=i.expander?i.expander.getBoundingClientRect().width:0,Math.max(s+6,e)}return e}return n=null==n||n,e instanceof Yr?r=this._fitLayoutWidth(e,n):e instanceof Zr&&(r=function e(i){for(var o=i.direction===t.ColumnLayoutDirection.HORIZONTAL,r=0,a=0,l=i.visibles;a<l.length;a++){var u=l[a],c=0;u instanceof Yr?(c=this._fitLayoutWidth(u,n),1===u._defColSpan&&(u.cellWidth=c)):u instanceof Zr&&(c=e.call(this,u),c=s.call(this,u,c)),r=o?r+c:Math.max(r,c)}return r}.call(this,e),r=s.call(this,e,r)),o&&o>this.displayOptions.minCellWidth&&(r=Math.max(r,o)),i&&i>this.displayOptions.minCellWidth&&(r=Math.min(r,i)),e.cellWidth=r},i.prototype.$_fitHeaderHeight=function(){var t=this._headerView.getMeasureHeights(),e=t.reduce((function(t,e){return t+e}),0);return this.header.heights=t.slice(),this.header.height=e,e},i.prototype.fitHeaderHeight=function(){this._loading?this._fitHeader=!0:this.$_fitHeaderHeight()},i.prototype.canMoveRow=function(t,e){return void 0===e&&(e=!0),!this.isEditing()&&!this.isItemEditing()&&(e||this._editOptions.movable)&&(!t||this.itemSource.movable)},i.prototype.moveRows=function(t,e){if(this.canMoveRows(t,!0,e))return this._doMoveRows(t,e)},i.prototype.moveSelection=function(t,e){var i=this.getSelectedItems(!1);if(i&&i.length>0){var o=i[0],n=o.index,r=this.itemSource;if(t>0&&n+t<=r.itemCount||t<0&&n>0){var s=this._getMoveTarget(e,i,n,t);if(this.moveRows(i,s)){t=this.isTree()?o.index-n:t;var a=this.getSelection();a.moveRow(t),this._selections.clear(),this._selections.$_addItem(a);var l=this._focusedIndex.clone();l.itemIndex=this.isTree()?o.index:n+t,this.setFocusedIndex(l,!1,!0,!1)}}}},i.prototype.isSelectedItem=function(t){return this.selections.containsItem(t,null)},i.prototype.isSelectedLayout=function(t){return this.selections.containsLayout(t)},i.prototype.getFilteredColumns=function(){for(var t=this.columnCount,e=[],i=0;i<t;i++){var o=this.getColumn(i);o.isFiltered()&&e.push(o)}return e},i.prototype.showProgress=function(){this._progressManager.show(this._container._containerDom,null,this.displayOptions.baseZindex)},i.prototype.setProgress=function(t,e,i,o){this._progressManager.setProperties(t,e,i,o)},i.prototype.closeProgress=function(){this._progressManager.close()},i.prototype.showLoading=function(t){this._progressManager.loaderShowing()||(t?(this._progressManager._gridDisabled=this.container.disabled,this.container.disabled=!0):this._progressManager._gridDisabled=void 0,this._progressManager.showLoader(this._container._containerDom,this._displayOptions.baseZindex))},i.prototype.hideLoading=function(){this._progressManager.closeLoader(),void 0!==this._progressManager._gridDisabled&&(this.container.disabled=this._progressManager._gridDisabled)},i.prototype.beginExportProgress=function(t){this._progressManager.show(this._container._containerDom,t,this._displayOptions.baseZindex)},i.prototype.endExportProgress=function(){this._progressManager.close()},i.prototype.setExportProgress=function(t,e,i){this._progressManager.setProperties(0,t,e,i)},i.prototype.setEmptyMessage=function(t){this._emptyView.setMessage(t)},i.prototype.setWatchTimer=function(t){this._container.setWatchTimer(t)},i.prototype.layoutExpandAll=function(t,e){this._activeCellLayout.expandAll(t,e)},i.prototype.isRecycleMode=function(){return this.displayOptions.refreshMode===t.RefreshMode.RECYCLE},i.prototype.invalidateGridObject=function(){var t=!1,e=this._gridObjects;return e.forEach((function(e){e instanceof Va||(t=t||e.dirty)})),t&&e.forEach((function(t){t instanceof Va||(t._dirty=!0)})),t},i.prototype._getCssSelector=function(){return""},Object.defineProperty(i.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),i.prototype._createDelegate=function(){return new Pc(this)},i.prototype._createLayoutManager=function(){return new Cl(this)},i.prototype._createEditController=function(){return xt.isMobile()?new Oh(this):new tc(this)},i.prototype._createSelectionLayer=function(){return xt.isMobile()?new dc(this,"mobileSelectionLayer"):new ua(this,"selectionLayer")},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),t.style.setProperty("overflow","hidden","important")},i.prototype.setRect=function(t){var i=t.width!=this.width||t.height!=this.height;e.prototype.setRect.call(this,t),i&&(this._dirty=!0)},i.prototype._doDraw=function(t){},i.prototype.$_containerResized=function(){xt.isMobile()&&this.isEditing()&&!this.isItemEditing()&&setTimeout(function(){var t=this.topItem,e=this.layoutManager.fullItemCount,i=this.focusedIndex.itemIndex;t+e<i&&(this.topIndex=i-Math.round(e/2))}.bind(this),10),this._columnsDirty=!0},i.prototype._doCreateOtherElements=function(){},i.prototype._doContentPanesCreated=function(){},i.prototype._createSidePane=function(){return null},i.prototype.isSidePaneVisible=function(){return!1},i.prototype._createBodyView=function(t){return new fl(this.doc,t)},i.prototype._createFixedBodyView=function(t){return new gl(this.doc,t)},i.prototype._createRightBodyView=function(t){return new yl(this.doc,t)},i.prototype._initStyles=function(){},i.prototype._columnsReset=function(){this._resetColumnIndices(),this._activeCellLayout._columnsChanged(this._columns),this._columnsDirty=!0},i.prototype._columnVisibleChanged=function(t){this._activeCellLayout._columnChanged(t)},i.prototype._resetColumnIndices=function(t){void 0===t&&(t=null),t?t._resetIndices(this):this._columns.resetIndices(),!t&&!this._cellLayoutDirty&&this.clearAddSelection(!0)},i.prototype._resetColumnSortStates=function(){this._columns.resetSortStates()},i.prototype._cleanGridObjects=function(){for(var t=0,e=this._gridObjects.length;t<e;t++)this._gridObjects[t].clean()},i.prototype._visualObjectChanged=function(t){this.invalidateLayout()},i.prototype._addGridObject=function(t){this._gridObjects.push(t)},i.prototype.addElement=function(t){this._rootElement.addChild(t)},i.prototype.$_prepareRender=function(t){this._doPrepareRender(t)},i.prototype._doPrepareRender=function(t){if(this._horzScrolled)try{var e=this._layoutManager;e.setLeftPos(t,this._leftPos),this._leftPos=e.leftPos,this.$_updateScrollBars(e),this._layoutSelectionViews(),this._editController.resetEditor(!1),this.container.defaultTool.layoutChanged()}finally{this._horzScrolled=!1}},i.prototype.$_layout=function(t){this._doLayout(t)},i.prototype.$_detectWidth=function(){return!this.displayOptions.watchDisplayChange&&this.layoutManager.syncHeight()},i.prototype.$_beforeRender=function(){this._itemCheckChanged&&this._syncHeadCheck([]),this._beforeCount=this.layoutManager.itemCount,this.$_detectWidth()&&(this._beforeWidth=this.container.getContainerWidth())},i.prototype.$_afterRender=function(){var t=this.$_detectWidth()&&this._beforeWidth!=this.container.getContainerWidth();if(this._layoutManager.needRelayout()||this._fitHeader||t)this._fitHeader&&this.$_fitHeaderHeight(),this._fitHeader=!1,this.invalidateLayout();else{if(this._topIndexChanged&&(this._topIndexChanged=!1,this._needRefresh=!0,this._resetTdFocus=this.accessibility,this._fireTopIndexChanged(this.topIndex)),this.leftPos!==this._prevLeftPos&&(this._fireLeftPosChanged(this.leftPos),this._prevLeftPos=this.leftPos),this._beforeCount<this.layoutManager.itemCount&&(this._needRefresh=!0),this._resetTdFocus&&this._container._focused){var e=this.focusedIndex,i=this.doc;xt.isAncestorOf(this.container._containerDom,i.activeElement,null)&&this.accessibility&&this.isValid(e)&&this.layoutManager.cellIsVisible(e)&&(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout(function(){this._setFocusTimer=null,this.getBodyViewAt(e).refreshTdFocused(e,!0)}.bind(this),20)),delete this._resetTdFocus}[this.fixedBodyView,this.bodyView,this.rightBodyView].forEach((function(t){if(t.visible)for(var e=t._tbody.rows,i=0,o=e.length;i<o;i++)e[i].recycle=!1})),this._fireDataLoadComplated(),this._horzScrolled&&this._needRefresh&&(this._needRefresh=!1),this._horzScrolled=!1,this._dataChanged=!1,this._needPosition=!1,this._itemCheckChanged=!1,this._fitHeader=!1,this._watermarkLayer&&this._watermarkLayer.refresh()}},i.prototype._fireDataLoadComplated=function(){this._dataLoad&&(this._dataLoad=!1,this.fireEvent("onGridBaseDataLoadComplated"))},i.prototype._doLayout=function(e){var i=this._layoutManager;this._resetting=!1;try{this.$_doLayout(i,e)}finally{this._loading=!1,this._eventFrom=null}if(this.$_checkFocusedLayout(),this._emptyView.visible=this.empty&&this._displayOptions.showEmptyMessage){var o=i.bodyBounds.clone();o.topBy(i.topContentBounds.bottom),this._emptyView.setBounds(0,o.y,this.width,o.height)}if(this._debugging&&this._debugView.layout(),this._cleanGridObjects(),this._columnsDirty&&(this._columnsDirty=!1,this._activeCellLayout.cleanColumns()),this.$_resetHovering(this.container._currentX,this.container._currentY,!0),this.$_resetFocusRender(this.container._currentX,this.container._currentY),this.$_resetRowHover(),i.itemCount>0){var n=i.topIndex,r=n+i.fullItemCount;this._topIndexChanged=n!==this._prevTop,this._prevTop=n,r==this._prevLast||r!=this.itemCount||xt.included(this.displayOptions.syncGridHeight,[t.SyncGridHeight.ALWAYS,t.SyncGridHeight.OVER])||setTimeout(function(){this._fireScrollToBottom()}.bind(this),1),this._prevLast=r}this.$_checkCurrentRow(),this._editController.prepareEditor(this.focusedIndex),this._editController.remainFocusing(!1),this._cellLayoutDirty=!1,this.container.defaultTool.layoutChanged(),!this._editController.resetEditor(!1)&&this.isValid(this._focusedIndex)&&this._editController.resetEditable(this._focusedIndex)},i.prototype.$_doLayout=function(e,i){var o=this._displayOptions,n=this._fixedOptions,r=i.clone(),s=o.vscrollBar?this._scrollBarWidth:0,a=o.hscrollBar?this._scrollBarHeight:0;this.setFocusedClass(this._focusedIndex,!1),this.setFocusedRowClass(this._focusedIndex,!1),this._activeCellLayout.$_refresh(this._columns,o.minCellWidth),this._columnsDirty&&this._activeCellLayout.$_prepareLayout(this,n.colCount,n.rightCount),this._needMerge&&(this.$_populateMerges(),this._needMerge=!1),this._body._prepareUpdate();var l=e.topIndex,u=e.leftPos;if(e.measure(r,this._leftPos,this._topIndex,s,a),l!==e.topIndex){var c=e.topIndex-l,h=[this.fixedBodyView,this.bodyView,this.rightBodyView];this.isRecycleMode()&&!this._dataLoad&&c&&Math.abs(c)<e.fullItemCount/2?h.forEach((function(t){t&&t.visible&&t.reArrangeRows(e,c)})):h.forEach((function(t){t&&t.cleanRecycle()}))}if(this._horzScrolled=this._horzScrolled||u!==e.leftPos,e.layout(r),this._leftPos=e.leftPos,this._topIndex=e.topIndex,this.displayOptions.refreshMode!==t.RefreshMode.RECYCLE){var p=this.container._containerDom;r=new q(0,0,p.clientWidth,p.clientHeight)}this.$_updateScrollBars(e,r),this._layoutSelectionViews(),this._layouted=!0},i.prototype._columnCheckedChanged=function(t){this._fireColumnCheckedChanged(t)},i.prototype.$_updateScrollBars=function(t,e){if(t.hscrollBar){var i=t.bodyBounds.width,o=Math.min(t.scrollWidth);this._hscrollBar.setProperties(0,i,o),this._hscrollBar.setPosition(t.leftPos),this._hscrollBar.visible=!0}else this._hscrollBar&&(this._hscrollBar.setProperties(0,0,0),this._hscrollBar.setPosition(0),this._hscrollBar.visible=!1);if(t.vscrollBar){var n=this.itemCount,r=n-t.fixedItemCount,s=Math.min(t.fullItemCount,n-t.topIndex);this._vscrollBar.setProperties(0,r,s),this._vscrollBar.setPosition(t.topIndex),this._vscrollBar.visible=!0}else this._vscrollBar&&(this._vscrollBar.setProperties(0,0,0),this._vscrollBar.setPosition(0),this._vscrollBar.visible=!1);e&&this.$_layoutScrollBars(t,e)},i.prototype.$_layoutScrollBars=function(t,e){var i=t.scrollBarWidth,o=t.scrollBarHeight,n=this._hscrollBar,r=this._vscrollBar;t.hscrollBar&&(n.setBounds(e.x,e.bottom-o,e.width-i,o),n.layoutContent()),t.vscrollBar&&(r.setBounds(e.right-i,e.y,i,e.height-o),r.layoutContent()),(this._scrollEdge.visible=t.vscrollBar&&t.hscrollBar)&&this._scrollEdge.setBounds(e.right-i,e.bottom-o,i,o)},i.prototype._columnMergeRuleChanged=function(t){this._populateMerges(),this.refreshView()},i.prototype._canMerge=function(){return!1},i.prototype._populateMerges=function(){this._needMerge=!0},i.prototype.$_populateMerges=function(){if(this._canMerge()){for(var t=this.getHorzColumns(),e=0,i=t.length;e<i;e++){var o,n=t[e],r=n&&n.layout;r&&r.canMerge()&&((o=r.merges)||(o=new Tr(r)),o.clear(),n instanceof Hr&&n.mergeGrouped?this.getGroupLevel(n.dataIndex)>0&&o.initialize(br.INIT_COUNT):o.initialize(br.INIT_COUNT))}this._checkBar.canMerge()&&((o=this._checkBar.merges||new zs(this._checkBar)).clear(),o.initialize(br.INIT_COUNT))}},i.prototype._doRowGroupMergeModeChanged=function(){},i.prototype._addSelectionView=function(t){this._selectionLayer.addView(t)},i.prototype._clearSelectionViews=function(){this._selectionLayer.clearViews()},i.prototype._removeSelectionView=function(t){this._selectionLayer.removeView(t)},i.prototype._layoutSelectionViews=function(){this._layouted&&!this._resetting&&this._selectionLayer.layout()},i.prototype.$_checkCurrentRow=function(t){if(void 0===t&&(t=!1),this._focusedIndex){var e=this._focusedIndex.dataId,i=this._focusedIndex.dataRow;if(t||e!=this._currentRowId){clearTimeout(this._rowChangeTimer);var o=this.container.defaultTool,n=this._currentRow,r=this._displayOptions.rowChangeDelay,s=t||r<=0;return this._currentRowId=e,this._currentRow=i,s?(this._fireCurrentRowChanged(n,i),o.currentRowChanged(n,i)):r>0&&(this._rowChangeTimer=setTimeout(function(){this._fireCurrentRowChanged(n,i),o.currentRowChanged(n,i)}.bind(this),r)),!0}}return!1},i.prototype.$_doSetFocusedIndex=function(e,i,o,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),!e){if(n)return!1;e=this.getIndex(-1,null)}var s,a,l;if(!this.isValid(e)&&n&&(e=e.clone()).normalize(this),!this.isValid(e)){var u=this.dataSource;if(!u||0==u.rowCount||0==this.itemCount)return this._focusedIndex.itemIndex=-1,this._focusedIndex.layout=null,this.clearAddSelection(!0),!1}var c=1===this.selections.count?this.getSelection(0):null;if(hs.areEquals(e,this._focusedIndex))return!(c&&c.single&&this.selections.containsCell(e))&&this.clearAddSelection(i,r),!0;var h=this._editOptions,p=this._focusedIndex.clone(),d=this.itemSource,f=this.container.defaultTool,g=this.layoutManager;if(this.editOptions.currentChangingFirst?!this._fireCurrentChanging(p,e)||!this._editController.focusedIndexChanging():!this._editController.focusedIndexChanging()||!this._fireCurrentChanging(p,e)){var y=this.activeTool.dragTracker;return y instanceof Bl&&(y.dragging?y.cancel():this.activeTool.dragTracker=null),!1}var _=p.item;if(!this.isItemEditing(_)||this.isItemEdited(_)||e.itemIndex==p.itemIndex||_.itemState!==t.ItemState.UPDATING||h.commitWhenNoEdit)if(d&&e.itemIndex!=p.itemIndex)try{if(_)switch(_.itemState){case t.ItemState.INSERTING:if(!this.commit(h.forceInsert,!0))return this.cancel(!0),!1;break;case t.ItemState.APPENDING:if(!this.commit(h.forceAppend,!0))return this.cancel(!0),!1;break;case t.ItemState.UPDATING:if(!this.commit(h.commitWhenNoEdit,!0))return this.cancel(!0),!1}}catch(t){if(t instanceof hr)return(t=this._fireValidationFail(_.index,t.column,t))&&alert(h.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),this.invalidateLayout(),!1;if(t instanceof cr)return!1;throw t}else _&&this.isItemEditing(_)&&h.validateOnExit&&this.invalidateLayout();else this.cancel(!0);f.focusedIndexChanging(e),this._focusedIndex.assign(e),this.$_checkFocusedLayout(),l=this.getBodyCellAt(p,!1),a=this.getBodyCellAt(e,!1),this.isValid(p)&&(s=g.getBodyView(p)).$_focusChanged(this,l,!1),this.isValid(e)&&(s=g.getBodyView(e)).$_focusChanged(this,a,!0),d instanceof ko&&d.setDiffs(this._editOptions.checkDiff,this._editOptions.checkCellDiff,this._editOptions.strictDiff),this._editController.focusedIndexChanged(p,e,!1),f.focusedIndexChanged(p,e);var m=this._focusedIndex,v=this.isValid(m);c&&ta(c.style)&&this.selections.containsCell(m)||this.clearAddSelection(i,r),this._layouted&&this._refreshSideViews();var b=!hs.areEquals(m,g._prevFocused);if(o||b)if(this.$_makeFocusedIndexVisible())this._resetTdFocus=!1,this.accessibility&&!this.isEditing()&&this.isValid(m)&&this.isValid(p)&&(s=this.getBodyViewAt(p),"mousedown"!==this._eventFrom&&p.itemIndex!==m.itemIndex&&s&&s.tdClone(p),this._resetTdFocus=!0);else{var C,w;this._editController.resetEditor(!1),this.isValid(m)&&this.getItem(m.itemIndex).canEdit()&&this._editController.prepareEditor(m),this.isValid(p)&&(C=this.getBodyViewAt(p))&&(w=C.getRowView(p.item))instanceof al&&w.resetButtons(this,l,a),!this.container.isLayoutNeeded()&&v&&(C=this.getBodyViewAt(m))&&(w=C.getRowView(m.item))instanceof al&&w.resetButtons(this,l,a),this.accessibility&&!this.isEditing()&&this.isValid(m)&&this.layoutManager.cellIsVisible(m)&&(s=this.getBodyViewAt(m))&&s.refreshTdFocused(m,!0)}return this._fireCurrentChanged(this._currentIndex.assign(m)),this.$_checkCurrentRow(),!0},i.prototype._refreshSideViews=function(){this.container.isLayoutNeeded()||(this._rowBarContainer.visible&&this._rowBarContainer.refresh(this),this._headerView.visible&&this._headerView.refresh(this),this._fixedHeaderView.visible&&this._fixedHeaderView.refresh(this),this._rightHeaderView.visible&&this._rightHeaderView.refresh(this))},i.prototype.$_makeFocusedIndexVisible=function(){return this.makeCellVisible(this._focusedIndex)},i.prototype.makeCellVisible=function(t){if(this.isValid(t)||t&&t.column){if(this.layoutManager.makeCellVisible(t),!this.layoutManager.focusIsVisible())return"mousedown"!==this._eventFrom&&this.invalidateLayout(),!0;this.layoutManager.clearFocusRequest()}return!1},i.prototype.makeColumnVisible=function(t){if(t){var e=this.getIndex(this._focusedIndex?this._focusedIndex.itemIndex:-1,t);this.makeCellVisible(e)}},i.prototype.makeItemVisible=function(t){if(t>=0){var e=this.getIndex(t,this._focusedIndex&&this._focusedIndex.layout);this.makeCellVisible(e)}},i.prototype.cancelEditor=function(t){this.isEditing()&&(t=!(arguments.length>0)||t,this._editController.cancelEditor(t))},i.prototype.itemEditCancel=function(){return this._fireItemEditCancel(this.itemSource.editingItem)},i.prototype.$_cancelItem=function(t,e){void 0===e&&(e=!1);var i=xt.cast(this.itemSource,ko);return!!(i&&t&&i.isEditing(t))&&(this._validationManager.clearInvalidCells(-1),i.cancel(),e&&this.resetFocusedIndex(),!0)},i.prototype.cancel=function(t){void 0===t&&(t=!1);var e=this.editController;this.isEditing()&&(e.cancelEditor(!0),e.invalidateEditor());var i=this.focusedIndex;return!(!this.isValid(i)||!this.$_cancelItem(i.item))&&(i=i.clone(),this._rowBarContainer.stateError=void 0,e._prepareEditor(e._editIndex),i.normalize(this),i.item instanceof Po&&i.up(),this.setFocusedIndex(i),t&&this.$_makeFocusedIndexVisible(),!0)},i.prototype.commitEditor=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1),this.isEditing()&&this.editController.commitEditor(t,!1,!0,e)},i.prototype.$_commitItem=function(e,i,o){var n=xt.cast(this.itemSource,ko),r=this.validationManager;if(n&&e&&n.isEditing(e)&&(i||n.isEdited(e))){var s=bo(e.itemState);try{r.validateRow(e,s,!1,!1),this._rowBarContainer.stateError=void 0}catch(e){throw e instanceof hr&&(e.level=e.level||t.ValidationLevel.ERROR,!e.column&&(this._rowBarContainer.stateError=e)),e}if(!n.commit()){if(o)throw new cr("Commit failed.");return!1}return e.dataId>-1&&r.cloneError(-1,e.dataId),r.clearInvalidCells(-1),this.editOptions.removeValidateOnCommit&&e.dataId>-1&&r.clearInvalidCells(e.dataId),!0}},i.prototype.commit=function(t,e,i){void 0===i&&(i=!0);var o=this.focusedIndex,n=!0;return!!this.isValid(o)&&(this.isEditing()&&(n=this.editController.commitEditor(!0,!1,i,t),this.editController.invalidateEditor()),n&&this.$_commitItem(o.item,t,e))},i.prototype.editorCancel=function(t,e){this._doCellCancel(e)},i.prototype._doCellCancel=function(t){return this._fireEditCanceled(t)},i.prototype.editorCanceled=function(){this.activeTool.resetFocused()},i.prototype._editorStarted=function(t,e){if(this.closePopups(!1),this.edit(e))return!0},i.prototype._editorChange=function(t,e,i){this._fireEditChange(e,i)},i.prototype._editorSearch=function(t,e,i){this._fireEditSearch(e,i)},i.prototype._searchCellButtonClick=function(t,e,i){return this._fireSearchCellButtonClick(e,i)},i.prototype.$_getFieldDefaults=function(t){function e(t,e){for(var i=0;i<t.columnCount;i++){var o=t.getColumn(i);if(o instanceof Hr&&o.dataIndex==e){var n=o.getField();return n&&n.defaultValue}}}for(var i=this.dataSource.fieldCount,o=[],n=0;n<i;n++)o.push(void 0);for(n=0;n<i;n++){var r=e(this,n);r&&(o[n]=r)}return o},i.prototype.$_getColumnDefaults=function(t){for(var e=0,i=this.columnCount;e<i;e++){var o=this.getColumn(e);o instanceof Hr&&null!=o.defaultValue&&(t[o.dataIndex]=o.defaultValue)}},i.prototype.$_getItemDefaults=function(t,e){},i.prototype.$_readDefaultValues=function(t){},i.prototype.$_getInsertDefaults=function(t){var e=this.$_getFieldDefaults(this.itemSource.dataSource);return this.$_getColumnDefaults(e),this.$_getItemDefaults(null,e),this.$_readDefaultValues(e),e},i.prototype.sortColumn=function(e,i){e&&(this.sortingOptions.style==t.SortStyle.EXCLUSIVE?i&&i.shiftKey?this.sortColumnWithStyle(t.SortStyle.INCLUSIVE,e):this.sortColumnWithStyle(t.SortStyle.EXCLUSIVE,e):this.sortColumnWithStyle(this.sortingOptions.style,e))},i.prototype.sortColumnWithStyle=function(e,i){if(!i)throw new Error("column is null");if(!(this.isItemEditing(null)||i.dataIndex<0)){var o=this._sortingOptions.textCase;e==t.SortStyle.EXCLUSIVE?i.sortOrder<0?this.orderBy([i],[t.SortDirection.ASCENDING],[o]):i.sortDirection==t.SortDirection.ASCENDING?this.orderBy([i],[t.SortDirection.DESCENDING],[o]):this.isGroupedColumn(i)&&this.itemSource._groupSorting?this.orderBy([i],[t.SortDirection.ASCENDING],[o]):this.unsortColumnWithStyle(e,i):e!=t.SortStyle.INCLUSIVE&&e!=t.SortStyle.REVERSE||(i.sortOrder<0?this.$$_addSort(i,t.SortDirection.ASCENDING,o,e==t.SortStyle.REVERSE):i.sortDirection==t.SortDirection.ASCENDING?this.$$_addSort(i,t.SortDirection.DESCENDING,o,e==t.SortStyle.REVERSE):this.isGroupedColumn(i)&&this.itemSource._groupSorting?this.$$_addSort(i,t.SortDirection.ASCENDING,o,e==t.SortStyle.REVERSE):this.unsortColumnWithStyle(e,i))}},i.prototype.orderBy=function(t,e,i){if(!this.isItemEditing(null))if(!t||t.length<1)this._sortItems([],[],[]);else{for(var o=[],n=t.length,r=0;r<n;r++){var s=t[r];o.push(s.dataIndex)}this._sortItems(o,e,i)}},i.prototype.unsortColumnWithStyle=function(e,i){if(!this.isItemEditing()&&i){var o=this.getSortFields(),n=this.getSortDirections(),r=this.getSortCases(),s=o.indexOf(i.dataIndex);s<0||(e==t.SortStyle.EXCLUSIVE?this.orderBy([],[],[]):e!=t.SortStyle.INCLUSIVE&&e!=t.SortStyle.REVERSE||(o.splice(s,1),n.splice(s,1),r.splice(s,1),this._sortItems(o,n,r)))}},i.prototype.$$_addSort=function(t,e,i,o){var n=this.getSortFields(),r=this.getSortDirections(),s=this.getSortCases(),a=t.dataIndex,l=n.indexOf(a);l>=0?(r[l]=e,s[l]=i):o?(n.splice(0,0,a),r.splice(0,0,e),s.splice(0,0,i)):(n.push(a),r.push(e),s.push(i)),this._sortItems(n,r,s)},i.prototype._sortItems=function(t,e,i){var o=this,n=t.concat(),r=e?e.concat():[],s=i?i.concat():[];this._fireSorting(n,r)&&this._toastManager.show(this.sortingOptions.toast,!0,(function(){var e=o.sortingOptions.keepFocusedRow&&o.focusedIndex?o.focusedIndex.dataRow:-1;if(o._doSortItems(t,r,s),e>=0){var i=hs.temp(o,o.getItemIndexOfRow(e),o.focusedIndex.column);o._editController.remainFocusing(!0),o.setFocusedIndex(i,!0,!0)}}))},i.prototype._doPrepareComparer=function(t){for(var e={},i=0;i<t.length;i++){var o=this.columnByField(t[i]);o.sortByLabel&&(e[t[i]]=n(o))}return e;function n(t){var e=t.grid;return function(i,o,n){var r=e.getItemOfRow(o,!0),s=e.getItemOfRow(n,!0),a=Zo.getText(r,t),l=Zo.getText(s,t);return a==l?0:null==a?null==l?0:-1:null==l||a>l?1:a<l?-1:0}}},i.prototype._doSortItems=function(t,e,i){},i.prototype.getSortFields=function(){return null},i.prototype.getSortDirections=function(){return null},i.prototype.getSortCases=function(){return null},i.prototype.canFiltering=function(){return this._fireFiltering()},Object.defineProperty(i.prototype,"filterSelecting",{get:function(){return this._filterSelector.opened},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterSelector",{get:function(){return this._filterSelector},enumerable:!1,configurable:!0}),i.prototype.applyFilters=function(t,e){var i=this;return!this.isItemEditing(null)&&!!this._fireFiltering()&&(this._toastManager.show(this.filteringOptions.toast,!0,(function(){i._editController.remainFocusing(!0),i.$_doApplyFilters(t,e)})),!0)},i.prototype.$_findFilterView=function(t){if(!t)return{};for(var e,i=[this._fixedFilterView,this._filterPanelView,this._rightFilterView],o=0;o<i.length;o++)if(i[o].visible&&(e=i[o].tableCellByLayout(t)))return{view:i[o],cell:e};return{}},i.prototype.filterOperatorCallback=function(t,e,i){var o=this.layoutByName(i.column),n=this.$_findFilterView(o),r=n.view,s=n.cell;s&&r.operatorChange(s,e,o,i)},i.prototype.clearInlineFilter=function(t){var e=t&&t.layout;if(e){var i=this.$_findFilterView(e),o=i.view,n=i.cell;o.clearInput(n,t)}else[this._fixedFilterView,this._filterPanelView,this._rightFilterView].forEach((function(t){return t.clearInput()})),this.$_doApplyFilters(null,null)},i.prototype.inlineFilterFocus=function(t){var e=this.$_findFilterView(t),i=e.view,o=e.cell;i.setFocus(o)},i.prototype.$_doApplyFilters=function(t,e){var i=this._items.itemCount;this._items.beginFiltering();try{this._filterRunning=!0,this._items.clearAllFilters(),this.$_addFilters()}finally{this._items.endFiltering(t,e),i!==this._items.itemCount&&(this.topIndex=0),this._filterRunning=!1}},i.prototype.$_addFilters=function(){for(var t=this.columnCount,e=0;e<t;e++){var i=this.getColumn(e),o=i.autoFilter?i.autoFilters:i.filters;if(o&&o.activeCount>0)for(var n=0,r=o.count;n<r;n++){var s;(s=o.getItem(n)).active&&this._items.addFilter(i.dataIndex,s)}(o=i._inlineFilters)&&o.activeCount>0&&(s=o.getItem(0)).active&&this._items.addFilter(i.dataIndex,s)}},i.prototype.columnFilterChanged=function(t,e){this._doColumnFiltersChanged(t,e)},i.prototype.canGrouping=function(){return!1},i.prototype.$_layoutRowHover=function(e,i,o){var n=this._layoutManager,r=n.footerBounds.y+n.contentBounds.y,s=this.getBodyView(e.cell);if(s){var a=n.getTableRowIndex(i);if(!(a<0)){a=s.getViewIndex(a);var l=n.getTableItemBounds(a);switch(l.y+=n.contentBounds.y+n.bodyBounds.y,l.bottom>r&&(l.bottom=r),o){case t.RowMaskType.DATA:l.x=this._fixedContentPane.x,l.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right;break;case t.RowMaskType.FILL:l.x=0,l.width=this.width;break;case t.RowMaskType.CELL:var u=s.pointByContainer(0,0),c=s.getCellRect(n,e,!0);l.x=c.x+u.x,l.width=c.width;break;case t.RowMaskType.ROW:l.x=0,l.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right}this._rowHoverView.setRect(l)}}},i.prototype.$_resetHovering=function(t,e,i){void 0===i&&(i=!1);var o=this.activeTool;if(o instanceof Tc&&this.canHovering){var n=this.container.getTableCell(o.mouseEventTarget);if(i&&this.isRecycleMode()){var r=hs.temp(this);this.layoutManager.mouseToIndex(n,t,e,r);var s=this.getBodyCellAt(r);s&&(n=s.cell)}var a=this.getCellType(n),l=!1,u=!1,c=!1;if("data"===a){var h=this.getBodyView(n).bodyCellByCell(n);this.$_setHoveredCell(h,e,i),o.$_setHoveredCell(h,t,e),l=!0}else if("header"===a)h=this.getHeaderView(n).tableCellByCell(n),o.$_setHoveredHeaderCell(h,t,e),u=!0;else if("state"===a&&this._rowBarContainer.stateError&&this._stateBar.errorVisible&&this.editOptions.hintOnError){var p=this._rowBarContainer.rowOf(n);this.isItemEditing(this.getItem(p))&&(c=!0,o.$_showStateError(n,this._rowBarContainer.stateError.message))}return!(l||u||c)&&o._hideTooltip(),l||this.$_setHoveredCell(null,e,!1),!0}},i.prototype.$_getCellAt=function(t,e){var i=this.getBodyView(t),o=this.layoutManager,n=this.getDataCellIndex(t,this._currentIndex),r=i.getCellAt(o,n);if(r&&r.merged){var s=o.getTableRowIndex(e);if(s<0)return r;var a=i.getRowIndex(s);return n.itemIndex=Math.min(Math.max(r.item.index,a),r.item.index+r.rowSpan-1),i.getCellAt(o,n)}return r},i.prototype.$_setHoveredCell=function(t,e,i){void 0===i&&(i=!1);var o=t?this.$_getCellAt(t.cell,e):t;(i||o!==this._hoveredCell)&&(this._hoveredCell&&this._hoveredCell.cell&&this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!1),o&&this.getBodyView(o.cell).$_mouseEnteredChanged(this,o,!0),this._doHoveredCellChanged(this._hoveredCell=o)),(i||e!=this._hoveredY)&&(this._hoveredY=e,this.$_resetRowHover())},i.prototype.$_resetRowHover=function(){var e=this._displayOptions.rowHoverType;this._hoveredCell&&e&&e!=t.RowMaskType.NONE?(this._rowHoverView.visible=!0,this.$_layoutRowHover(this._hoveredCell,this._hoveredY,e)):this._rowHoverView.visible=!1},i.prototype.$_resetFocusRender=function(t,e){var i=this.getBodyCellAt(this.focusedIndex,!0),o=i&&i.merged&&(i.renderer2||i.head.renderer2),n=this.canMergeEditing(i);if(o&&o.refreshFocusChanged){var r=this.layoutManager,s=this.getBodyViewAt(this.focusedIndex),a=s.getCellRectAt(r,this.focusedIndex,!1),l=s.getCellRectAt(r,this.focusedIndex,!0),u=a.top-l.top+a.height/2-l.height/2;o.moveClickElement(u,n)}},i.prototype._doHoveredCellChanged=function(t){},i.prototype._doCellButtonClicked=function(t){this._fireCellButtonClicked(t)},i.prototype._syncHeadCheck=function(t,e){var i=this.checkBar;if(i.syncHeadCheck){var o=i.showGroup&&!i.merged;if(!1===e)this._headView.allChecked=e;else if(null==t)this._headView.allChecked=e;else{for(var n=0,r=void 0,s=i.visibleOnly,a=s?this._items.itemCount:(r=this.getAllItems()).length,l=0;l<a;l++){var u=s?this._items.getItem(l):r[l];if((u.isDataRow||o)&&u.checkable){if(!u.checked){n=-1;break}n++}}this._headView.allChecked=n>0}}},i.prototype.getRowHeight=function(t){var e=this.getItem(t);return e?e.height:NaN},i.prototype.setRowHeight=function(t,e,i){void 0===i&&(i=!0);var o=this.getItem(t);o&&(this._items.setRowHeight(o,e,!0),i&&this.refreshView())},i.prototype.clearRowHeights=function(t){void 0===t&&(t=!1),this._items.clearRowHeights(t)&&this.refreshView()},i.prototype.setFocusedClass=function(t,e){if(this.displayOptions.useFocusClass){var i=this.getBodyCellAt(t,!0);i&&i.cell&&(e?xt.addClassName(i.cell,"rg-focused-cell"):xt.removeClassName(i.cell,"rg-focused-cell"))}},i.prototype.setFocusedRowClass=function(t,e){function i(t,i){var o=t.getRowView(i);if(o)for(var n=0,r=o._getTableRows(this.layoutManager);n<r.length;n++){var s=r[n];e?xt.addClassName(s,"rg-focused-row"):xt.removeClassName(s,"rg-focused-row")}}if(this.displayOptions.useFocusClass){var o=t.item;i.call(this,this.bodyView,o),i.call(this,this.fixedBodyView,o),i.call(this,this.rightBodyView,o)}},i.prototype.getSummaryCount=function(t){switch(t){case"summary":return this.headerSummaries.count;case"footer":return this.footers.count;default:return 0}},i.prototype.topIndexChanging=function(t,e,i,o){return this._fireTopIndexChanging(t,e,i,o)},i.prototype.$_rendererChanged=function(t){var e=this._layoutManager.getBodyView(t);e&&e.$_rendererChanged(t)},i.prototype.$_clearDropData=function(t){var e=this.getRowsOfItems(t,!1);e.length>0&&this.dataSource.removeRows(e)},i.prototype.$_dropData=function(e,i,o){var n=this.dataDropOptions,r=n.callback,s=o.index;if(r)r(e.handler,i,this.handler,o.index,o.column);else if(s>=0){var a=e.getRowsOfItems(i),l=void 0,u=n.fieldMapCallback;if(u&&(l=u(e.handler,i,this.handler,s,o.column)),l=l||n.fieldMap,s<this.itemCount){var c=this.getRowOfItem(s);c>=0&&this.dataSource.insertRowsFrom(e.dataSource,l,a,c)}else this.dataSource.appendRowsFrom(e.dataSource,l,a)}n.dropMode==t.DataDropMode.MOVE&&e.$_clearDropData(i)},i.prototype.$_checkFocusedLayout=function(){if(this._focusedIndex){var t=this.getBodyCellAt(this._focusedIndex);t&&t.spanned&&(t=this.getBodyView(t.cell).getCheckedLayout(t),this._focusedIndex.layout=t&&t.layout)}},i.prototype.$_isBottomCell=function(t){var e=this.getBodyCellAt(t);if(e)return this.getBodyView(e.cell).isBottomCell(e)},i.prototype.$_getLowerOfCell=function(t){var e=this.getBodyCellAt(t);if(e)return(e=this.getBodyView(e.cell).getLowerOf(e))&&e.layout.source},i.prototype.$_isTopCell=function(t){var e=this.getBodyCellAt(t);if(e)return this.getBodyView(e.cell).isTopCell(e)},i.prototype.$_getUpperOfCell=function(t){var e=this.getBodyCellAt(t);if(e)return(e=this.getBodyView(e.cell).getUpperOf(e))&&e.layout.source},i.prototype.setCheckFieldIndex=function(t){this._items.setCheckFieldIndex(t)},i.prototype._fireCurrentChanging=function(t,e){return this.fireConfirmEvent("onGridBaseCurrentChanging",t,e)},i.prototype._fireCurrentChanged=function(t){this.fireEvent("onGridBaseCurrentChanged",t)},i.prototype._fireCurrentRowChanged=function(t,e){this.fireEvent("onGridBaseCurrentRowChanged",t,e)},i.prototype._fireValidateCell=function(t,e,i){this.fireEvent("onGridBaseValidateCell",t,e,i)},i.prototype._fireValidateRow=function(t,e,i){this.fireEvent("onGridBaseValidateRow",t,e,i)},i.prototype._fireValidationFail=function(t,e,i){return this.fireObjectEvent("onGridBaseValidationFail",t,e,i)},i.prototype._fireCellClicked=function(t){this.fireEvent("onGridBaseCellClicked",t)},i.prototype._fireCellDblClicked=function(t){this.fireEvent("onGridBaseCellDblClicked",t)},i.prototype._fireCellItemClicked=function(t,e){return this.fireConfirmEvent("onGridBaseCellItemClicked",t,e)},i.prototype._fireColumnCheckedChanged=function(t){this.fireEvent("onGridBaseColumnCheckedChanged",t,t.checked)},i.prototype._firePopupMenuPopup=function(t,e,i,o,n){return this.fireObjectEvent("onGridBaseContextMenuPopup",t,e,i,o,n)},i.prototype._fireMenuItemClicked=function(t,e){this.fireEvent("onGridBaseMenuItemClicked",t,e)},i.prototype._fireContextMenuPopup=function(t,e,i,o,n){return this.fireObjectEvent("onGridBaseContextMenuPopup",t,e,i,o,n)},i.prototype._fireContextMenuItemClicked=function(t,e){this.fireEvent("onGridBaseContextMenuItemClicked",t,e)},i.prototype._fireCellButtonClicked=function(t){this.fireEvent("onGridBaseCellButtonClicked",t)},i.prototype._fireEditButtonClicked=function(t){this.fireEvent("onGridBaseEditButtonClicked",t)},i.prototype._fireScrollToBottom=function(){this.fireEvent("onGridBaseScrollToBottom")},i.prototype._fireTopIndexChanging=function(t,e,i,o){return this.fireObjectEvent("onGridBaseTopIndexChanging",t,e,i,o)},i.prototype._fireTopIndexChanged=function(t){this.fireEvent("onGridBaseTopIndexChanged",t)},i.prototype._fireLeftPosChanged=function(t){this.fireEvent("onGridBaseLeftPosChanged",t)},i.prototype._fireDataCellClicked=function(t){this.fireEvent("onGridBaseDataCellClicked",t)},i.prototype._fireDataCellDblClicked=function(t){this.fireEvent("onGridBaseDataCellDblClicked",t)},i.prototype._fireRowsDeleting=function(t){return this.fireConfirmEvent("onGridBaseRowsDeleting",t)},i.prototype._fireRowInserting=function(t,e){return this.fireConfirmEvent("onGridBaseRowInserting",t,e)},i.prototype._fireItemCommit=function(t,e){this.fireEvent("onGridBaseItemCommit")},i.prototype._fireSelectionChanged=function(t){return this.fireEvent("onGridBaseSelectionChanged",t)},i.prototype._fireSelectionAdded=function(t){return this.fireEvent("onGridBaseSelectionAdded",t)},i.prototype._fireSelectionRemoved=function(){return this.fireEvent("onGridBaseSelectionRemoved")},i.prototype._fireSelectionCleared=function(){return this.fireEvent("onGridBaseSelectionCleared")},i.prototype._fireSelectionResized=function(t){return this.fireEvent("onGridBaseSelectionResized")},i.prototype._fireSelectionEnded=function(t){return this.fireEvent("onGridBaseSelectionEnded",t)},i.prototype._fireUpdateStarted=function(t,e){this.fireEvent("onGridBaseUpdateStarted",t)},i.prototype._fireInsertStarted=function(t,e){this.fireEvent("onGridBaseInsertStarted",t,e)},i.prototype._fireShowEditor=function(t,e,i){return this.fireConfirmEvent("onGridBaseShowEditor",t,e,i)},i.prototype._fireShowEditCommand=function(t){return this.fireConfirmEvent("onGridBaseShowEditCommand",t)},i.prototype._fireHideEditor=function(t){return this._doEditorActivated(t,!1,null),this.fireEvent("onGridBaseHideEditor",t)},i.prototype._fireEditChange=function(t,e){this.fireEvent("onGridBaseEditChange",t,e)},i.prototype._fireGetEditValue=function(t,e){this.fireEvent("onGridBaseGetEditValue",t,e)},i.prototype._fireEditCommit=function(t,e,i){return this.fireConfirmEvent("onGridBaseEditCommit",t,e,i)},i.prototype._fireEditCanceled=function(t){this.fireEvent("onGridBaseEditCanceled",t)},i.prototype._fireItemEditCancel=function(t){return this.fireConfirmEvent("onGridBaseItemEditCancel",t)},i.prototype._fireItemEditCanceled=function(t){this.fireEvent("onGridBaseItemEditCanceled",t)},i.prototype._fireEditSearch=function(t,e){this.fireEvent("onGridBaseEditSearch",t,e)},i.prototype._fireSearchCellButtonClick=function(t,e){return this.fireObjectEvent("onGridBaseSearchCellButtonClick",t,e)},i.prototype._fireCellEdited=function(t,e){this.fireEvent("onGridBaseCellEdited",t,e)},i.prototype._fireEditRowChanged=function(t,e,i,o){this.fireEvent("onGridBaseEditRowChanged",t,e,i,o)},i.prototype._fireEditItemPasted=function(t,e,i,o){this.fireEvent("onGridBaseEditRowPasted",t,e,i,o)},i.prototype._fireItemsPasted=function(t){this.fireEvent("onGridBaseRowsPasted",t)},i.prototype._fireCellPasting=function(t,e){return this.fireObjectEvent("onGridBaseCellPasting",t,e)},i.prototype._fireItemChecked=function(t){this.fireEvent("onGridBaseItemChecked",t,t.checked)},i.prototype._fireItemsChecked=function(t,e){this.fireEvent("onGridBaseItemsChecked",t,e)},i.prototype._fireItemAllChecked=function(t){this.fireEvent("onGridBaseItemAllChecked",t)},i.prototype._fireErrorClicked=function(t,e){this.fireEvent("onGridBaseErrorClicked",e)},i.prototype._fireSorting=function(t,e){return this.fireConfirmEvent("onGridBaseSorting",t,e)},i.prototype._fireFiltering=function(){return this.fireConfirmEvent("onGridBaseFiltering")},i.prototype._fireKeyDown=function(t){return this.fireConfirmEvent("onGridBaseKeyDown",t)},i.prototype._fireWheel=function(t){return this.fireConfirmEvent("onGridBaseWheel",t)},i.prototype._fireKeyPress=function(t){this.fireEvent("onGridBaseKeyPress",t)},i.prototype._fireKeyUp=function(t){this.fireEvent("onGridBaseKeyUp",t)},i.prototype._fireShowTooltip=function(t,e){return this.fireObjectEvent("onGridBaseShowTooltip",t,e)},i.prototype._fireShowHeaderTooltip=function(t,e,i){return this.fireObjectEvent("onGridBaseShowHeaderTooltip",t,e,i)},i.prototype._fireColumnPropertyChanged=function(t,e,i,o){this.fireEvent("onGridBaseColumnPropertyChanged",t,e,i,o)},i.prototype._fireLayoutPropertyChanged=function(t,e,i,o){this.fireEvent("onGridBaseLayoutPropertyChanged",t,e,i,o)},i.prototype._fireGridActivated=function(){return this.fireEvent("onGridBaseGridActivated",this)},i.prototype._fireCopy=function(t,e){return this.fireConfirmEvent("onGridBaseCopy",t,e)},i.prototype._firePaste=function(t,e){return this.fireConfirmEvent("onGridBasePaste",t,e)},i.prototype._firePasted=function(){this.fireEvent("onGridBasePasted")},i.prototype._fireCommandStackChanged=function(t,e){this.fireEvent("onGridBaseCommandStackChanged",t,e)},i.prototype.onPopupMenuManagerMenuItemClicked=function(t,e,i){this._fireMenuItemClicked(e,i)},i.prototype.onPopupMenuManagerPopup=function(t,e,i,o,n,r){return this._firePopupMenuPopup(e,i,o,n,r)},i.prototype.onScrollBarScrolled=function(t,e,i,o){var n,r,s,a=this.displayOptions,l=this.fixedOptions,u=a.scrollMessageCallback,c=e===Tl.SCROLL_END;if(!c&&this.scrollOnEditing(),t.vertical){var h=-1;switch(e){case Tl.LINE:return void this.scrollRow(i);case Tl.PAGE:h=this.topIndex+i*t._page;break;case Tl.THUMB_TRACK:var p=a.scrollDuration;a.liveScroll||this._scrolledTime>0&&xt.getTimer()-this._scrolledTime>p?(h=o,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new iu(this.container)),this._vscrollBar.tipView=this._scrollTipView,this._vscrollBar.setPosition(o,!0),r=this._vscrollBar.pos+l.rowCount,n=u?u(this.handler,t.vertical,r):String(r+1),this._vscrollBar.setText(n),p>0&&0==this._scrolledTime&&(this._scrolledTime=xt.getTimer()));break;case Tl.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._vscrollBar.tipView=null,h=o,c=!0;break;default:h=o}h>=0&&(this.topIndex=h)}else{var d=-1;switch(e){case Tl.LINE:d=this.leftPos+8*i;break;case Tl.PAGE:d=i>0?this._layoutManager.scrollToNextCell():this._layoutManager.scrollToPrevCell();break;case Tl.THUMB_TRACK:p=a.hscrollDuration,a.liveScroll||this._scrolledTime>0&&xt.getTimer()-this._scrolledTime>p?(d=o,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new iu(this.container)),this._hscrollBar.tipView=this._scrollTipView,(s=this._layoutManager.getPositionToVIndex(o))>-1&&(n=u?u(this.handler,t.vertical,s):this.getVisibleLayout(s).getDataColumn().header.displayText,this._hscrollBar.setText(n)),this._hscrollBar.setPosition(o,!0),p>0&&0==this._scrolledTime&&(this._scrolledTime=xt.getTimer()));break;case Tl.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._hscrollBar.tipView=null,d=o,c=!0;break;default:d=o}d>=0&&(this.leftPos=d)}c&&!xt.isMobile()&&this.setFocus()},i.prototype.$_checkFocusedRow=function(t){void 0===t&&(t=!1),this.focusedRow>=this.itemCount&&this.clearFocusedIndex(t)},i.prototype.onItemProviderReset=function(t){this.hideEditor(),this._dataChanged=!0,this._needRefresh=!0,this.clearRowHeights(),this._columnsReset(),this._populateMerges(),this.$_checkFocusedRow(),this._itemCheckChanged=!0,this.resetGrid(),this.$_refreshInvalidList(!0)},i.prototype.onItemProviderRefresh=function(t){this.hideEditor(),this._dataChanged=!0,this._needRefresh=!0,this._resetColumnSortStates(),this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(!0),this._itemCheckChanged=!0,this.refreshView(),!this._keepNullFocus&&this.setFocusedIndex(this.focusedIndex,!0),this.$_refreshInvalidList(!1)},i.prototype.onItemProviderRefreshClient=function(t){this.hideEditor(),this._dataChanged=!0,this._needRefresh=!0,this._populateMerges(),this.$_checkFocusedRow(),this.refreshView()},i.prototype.onItemProviderItemInserted=function(t,e){if(t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}},i.prototype.onItemProviderItemDeleted=function(t,e){if(t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}},i.prototype.onItemProviderItemUpdated=function(t,e){if(t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}},i.prototype.onItemProviderCheckableChanged=function(t,e){this._itemCheckChanged=!0,this.refreshView()},i.prototype.onItemProviderItemChecked=function(t,e){this.refreshView(),this._fireItemChecked(e)},i.prototype.onItemProviderItemsChecked=function(t,e,i){this.refreshView(),this._fireItemsChecked(e,i)},i.prototype.onItemProviderItemAllChecked=function(t,e){this.refreshView(),this._fireItemAllChecked(e)},i.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._itemCheckChanged=!0,this.checkBar.canMerge()&&this._populateMerges()},i.prototype.onItemProviderRowStateChanged=function(t,e){this.refreshView()},i.prototype.onItemProviderRowStatesChanged=function(t,e){this.refreshView()},i.prototype.onItemProviderRowStatesCleared=function(t){this.refreshView()},i.prototype.onItemProviderSort=function(t,e,i){this.refreshView()},i.prototype.onItemProviderSorted=function(t){this.header.dirty=!0,this._needRefresh=!0,this.refreshView(),this.fireEvent("onGridBaseSortingChanged")},i.prototype.onItemProviderFiltered=function(t,e,i){this._populateMerges(),this.$_checkFocusedRow(),this._itemCheckChanged=!this._loading,this.header.dirty=!0,this._needRefresh=!0,this.refreshView(),this.fireEvent("onGridBaseFilteringChanged",e,i)},i.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},i.prototype.onItemProviderDataLoadComplated=function(t){this._prevLast=0,this._dataLoad=!0},i.prototype.$_focusEditItem=function(t){var e=this.getIndex(t.index,this.focusedIndex?this.focusedIndex.column:null);!e.column&&this.visibleLayoutCount>0&&(e._layout=this.getVisibleLayout(0)),this.setFocusedIndex(e,!0),this.makeCellVisible(this.focusedIndex)},i.prototype.$_beforeEditing=function(t,e){},i.prototype.onItemEditUpdateStarted=function(t,e){this.$_beforeEditing(t,e),this.refreshView(),this._fireUpdateStarted(e,!1)},i.prototype.onItemEditAppendStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!0)},i.prototype.onItemEditInsertStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!1)},i.prototype.onItemEditCellEdited=function(t,e,i){this.refreshView(),!this._cellUpdateEventLock&&this._fireCellEdited(e,i)},i.prototype.onItemEditCellUpdated=function(t,e,i,o,n){this.refreshView(),!this._cellUpdateEventLock&&this._fireEditRowChanged(e,i,o,n)},i.prototype.onItemEditCommitting=function(t,e){},i.prototype.onItemEditCommitted=function(t,e){this._appendDummy(),this.hideEditor(),this.refreshView()},i.prototype.onItemEditCanceled=function(t){this._appendDummy(),this.hideEditor(),this._populateMerges(),this.refreshView(),this._fireItemEditCanceled(t._editingItem)},i.prototype.onItemEditCommitRequest=function(t){this.commit(!1)},i.prototype.onItemEditCancelReuqest=function(t){this.cancel()},i.prototype.onLookupSourceProviderChanged=function(t){this._resetColumnIndices(),this.refreshView()},i.prototype.onSelectionChanged=function(t,e){this._refreshSideViews(),this._fireSelectionChanged(e)},i.prototype.onSelectionAdded=function(t,e){this._addSelectionView(e),this._layoutSelectionViews(),this._fireSelectionAdded(e)},i.prototype.onSelectionRemoved=function(t,e){this._removeSelectionView(e),this._fireSelectionRemoved()},i.prototype.onSelectionCleared=function(t){this._clearSelectionViews(),this._refreshSideViews(),this._fireSelectionCleared()},i.prototype.onSelectionResized=function(t,e){this._layoutSelectionViews(),this._fireSelectionResized(e)},i.prototype.onSelectionEnded=function(t,e){this._fireSelectionEnded(e)},i.prototype.onLayoutExpanding=function(t,e){return this.fireConfirmEvent("onGridBaseLayoutExpanding",e)},i.prototype.onLayoutExpanded=function(t,e){this.fireEvent("onGridBaseLayoutExpanded",e)},i.prototype.onLayoutCollapsing=function(t,e){return this.fireConfirmEvent("onGridBaseLayoutCollapsing",e)},i.prototype.onLayoutCollapsed=function(t,e){this.fireEvent("onGridBaseLayoutCollapsed",e)},i.prototype.onMenuItemClick=function(t,e){this._fireContextMenuItemClicked(t,e)},i}(Xs),Ih=function(t){function e(){var e=t.call(this)||this;return e.prepareProgress=10,e.indicatorNo=1,e}return n(e,t),e.prototype.dispose=function(){return null},e.prototype.export=function(t,e){this.grid=t},e}(oo),Th=function(e){function i(){return e.call(this)||this}return n(i,e),i.prototype.dispose=function(){return e.prototype.dispose.call(this),null},i.prototype.export=function(t,i){e.prototype.export.call(this,t,i);var o=this._exportOptions=i;this._cols=[];var n=t.collectColumns(!0,!0,!0);this._cols=n.filter((function(t){return t instanceof jr})),this.indicator=o.indicatorVisible(t)?t.rowIndicator:null,this.header=o.headerVisible(t),this.headerSummary=o.headerSummaryVisible(t),this.footer=o.footerVisible(t),this.indicatorHead=t.rowIndicator.headText||"No",this.indicatorFoot=t.rowIndicator.footText||"",this.indicatorSummary=t.rowIndicator.sumText,this.done=function(){this.save()},this.buildBook()},i.prototype.prepare=function(){},i.prototype.finallize=function(){},i.prototype.buildBook=function(){this.buildSheet(this.grid)},i.prototype.buildSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1,this._exportOptions.headerSummary),this.buildItems(t),this.footer&&this.buildSummaryItem(t,!0,this._exportOptions.footer),this.done()},i.prototype.addQuatation=function(e,i){return xt.addQuatation(e,i===t.ValueType.TEXT,this._exportOptions.replaceLfText,this._exportOptions.replaceCrText)},i.prototype.buildHeader=function(t){var e=[],i=this._cols;this.indicator&&e.push(this.indicatorHead);for(var o=i.length,n=0;n<o;n++){var r=i[n];e.push(this.addQuatation(r.header.displayText))}this._rows.push(e.join(","))},i.prototype.buildSummaryItem=function(t,e,i){var o,n=this._exportOptions,r=e?t.footers:t.headerSummaries;if(r.visible)for(var s=r.visibleCount,a=0;a<s;a++){var l=[];this.indicator&&l.push(0==a?this.indicatorFoot:"");for(var u=r.getVisible(a),c=0,h=this._cols.length;c<h;c++){var p=this._cols[c],d=u.getCell(p.layout),f=d.getSummary(),g=d.value;o="number"==typeof g?isNaN(g)?d.text:String(g):g instanceof Date?n.datetimeCallback?(g=n.datetimeCallback(-1,p.name,g,t.handler))instanceof Date?Be.Default.getText(g):g:Be.Default.getText(g):null==g?d.text||f.text:String(g),l.push(this.addQuatation(o))}this._rows.push(l.join(","))}},i.prototype.buildItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemSource.itemCount,i=this.allItems,o=0;o<e;o++){var n=i?i[o]:t.getItem(o);this.buildRow(t,n)}},i.prototype.buildRow=function(t,e){var i,o=this._exportOptions,n=[];if(this.indicator){var r=o.showIndicatorRow(t)?e.dataRow:this.indicatorNo++;n.push(r.toString())}for(var s=0,a=this._cols.length;s<a;s++){var l=this._cols[s],u=void 0;if(i=void 0,l instanceof Hr)if(u=l.getField()){var c=ps.tempItem(t,e,l);i=t.getDisplayText(c)}else i="";n.push(this.addQuatation(i,u&&u.dataType))}this._rows.push(n.join(","))},i.prototype.buildGroupHeader=function(t,e){},i.prototype.buildGroupFooter=function(t,e){},i.prototype.buildMergedGroupHeader=function(t,e){},i.prototype.buildMergedGroupFooter=function(t,e){},i.prototype.buildTreeSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1,this._exportOptions.headerSummary),this.buildTreeItems(t),this.footer&&this.buildSummaryItem(t,!0,this._exportOptions.footer),this.done()},i.prototype.buildTreeItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemCount,i=this.allItems,o=0;o<e;o++){var n=i?i[o]:t.getItem(o);if(!(n instanceof or))throw"Unkonw tree item type";this.buildTreeRow(t,n)}},i.prototype.buildTreeRow=function(t,e){this.buildRow(t,e)},i.prototype.save=function(){var e=this._exportOptions,i=e.fileName,o="\ufeff"+this._rows.join("\n"),n=this.grid.doc;e.done&&"function"==typeof e.done&&(e.target===t.ExportTarget.STREAM?e.done(o):e.done()),e.target==t.ExportTarget.LOCAL?this.saveLocal(i,o,n):e.target==t.ExportTarget.REMOTE&&this.saveServer(i,Ot.encode(o),e.url,n,e.params)},i}(Ih),Ph=function(t){function e(e){var i=t.call(this)||this;return i._styles=null,i.message="",i.visible=!0,i.spaceTop=0,i.spaceBottom=0,i.height=-1,i.styleName="",e&&i.extend(e),i._styles=e&&e.styles?e.styles:null,i}return n(e,t),e.prototype._doDispose=function(){this._styles=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"cssStyle",{get:function(){return this._styles},enumerable:!1,configurable:!0}),e}(kt),Dh="default",kh="hidden",Ah="visible",Lh="default",Mh="item",Fh="reverse";t.ExportLayoutExpand=void 0,(ch=t.ExportLayoutExpand||(t.ExportLayoutExpand={})).IGNORE="ignore",ch.CURRENT="current",ch.EXPAND="expand",ch.COLLAPSE="collapse";var Nh=function(e){function i(t){var i=e.call(this,t)||this;return i.nullDateText="",i.linear=!1,i.allColumns=!1,i.allItems=!0,i.onlyCheckedItems=!1,i.pagingAllItems=!1,i.indicator=Dh,i.checkBar=kh,i.header=Dh,i.footer=Dh,i.headerSummary=Dh,i.indicatorValue=Lh,i.checkMark="v",i.unCheckMark="",i.indenting=!0,i.separateRows=!1,i.lookupDisplay=!1,i.showLevelOutline=!1,i.applyFitStyle=!0,i.applyDynamicStyles=!1,i.applyDefaultColumnFormat=!1,i.applyFixed=!1,i.sheetName=null,i.exportSeriesColumn=!1,i.showColumns=[],i.hideColumns=[],i.hiddenColumns=[],i.exportLink=!1,i.exportTemplate=!1,i.sheetAttrs=null,i.stylePrefix="",i.layoutExpand=null,i.exportImage=void 0,i.bulkImageDownload=!0,i.exportLayout=void 0,i.userCells=void 0,i.userCellsCallback=void 0,i.sheetProtect=!1,i.protectPassword=void 0,i.extend(t),i}return n(i,e),i.prototype._doDispose=function(){this._documentTitle&&(this._documentTitle=this._documentTitle.dispose()),this._documentSubtitle&&(this._documentSubtitle=this._documentSubtitle.dispose()),this._documentTail&&(this._documentTail=this._documentTail.dispose()),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"documentTitle",{get:function(){return this._documentTitle},set:function(t){this._documentTitle=new Ph(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"documentSubtitle",{get:function(){return this._documentSubtitle},set:function(t){this._documentSubtitle=new Ph(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"documentTail",{get:function(){return this._documentTail},set:function(t){this._documentTail=new Ph(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"protectProperties",{get:function(){return this.sheetProtect&&(this._protectProperties=this._protectProperties||{},xt.extendObj({objects:"1",scenarios:"1"},this._protectProperties)),this._protectProperties},set:function(t){this._protectProperties=t?xt.deepCopy(t):void 0},enumerable:!1,configurable:!0}),i.prototype.indicatorVisible=function(t){if(t)switch(this.indicator){case Ah:return!0;case kh:return!1;default:return t.rowIndicator.visible}return!1},i.prototype.checkBarVisible=function(t){if(t)switch(this.checkBar){case Ah:return!0;case kh:return!1;default:return t.checkBar.visible}return!1},i.prototype.headerVisible=function(t){if(t)switch(this.header){case Ah:return!0;case kh:return!1;default:return t.header.visible}return!1},i.prototype.headerSummaryVisible=function(t){if(t)switch(this.headerSummary){case Ah:return!0;case kh:return!1;default:return t.headerSummaries.visible&&t.headerSummaries.visibleCount>0}return!1},i.prototype.footerVisible=function(t){if(t)switch(this.footer){case Ah:return!0;case kh:return!1;default:return t.footers.visible&&t.footers.visibleCount>0}return!1},i.prototype.showIndicatorRow=function(e){if(e)switch(this.indicatorValue){case Fh:case Mh:return!1;case"row":return!0;default:return e.rowIndicator.displayValue==t.IndicatorValue.ROW}return!1},i.prototype.showIndicatorReverse=function(e){if(e)switch(this.indicatorValue){case"row":case Mh:return!1;case Fh:return!0;default:return e.rowIndicator.displayValue==t.IndicatorValue.REVERSE}},Object.defineProperty(i.prototype,"yOffset",{get:function(){return null==this._yOffset?0:this._yOffset},set:function(t){this._yOffset=Math.floor(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"xOffset",{get:function(){return null==this._xOffset?0:this._xOffset},set:function(t){this._xOffset=Math.floor(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"xOffsetWidth",{get:function(){return null==this._xOffsetWidth?100:this._xOffsetWidth},set:function(t){this._xOffsetWidth=Math.floor(t)},enumerable:!1,configurable:!0}),i}(io),Vh=function(t){function e(e,i){var o=t.call(this,i)||this;return o._grids=[],o._parseGrids(e,i),o}return n(e,t),Object.defineProperty(e.prototype,"exportGrids",{get:function(){return this._grids},enumerable:!1,configurable:!0}),e.prototype._doDispose=function(){this._grids=null,t.prototype._doDispose.call(this)},e.prototype._parseGrids=function(t,e){var i=e.exportGrids;if(i&&Array.isArray(i))for(var o=0,n=i.length;o<n;o++){var r,s=i[o].grid;s=s.$_handler?s:s._view,(r=new Nh(e)).assignFrom(i[o]),r.extend(i[o]),r.grid=s;var a={grid:s,sheetName:i[o].sheetName,options:r};this._grids.push(a)}else(r=new Nh(e)).extend(e),r.grid=t,this._grids.push({grid:t,sheetName:e.sheetName?String(e.sheetName):"sheet1",options:r})},e}(Nh),Bh=xt.hex,Gh=function(){function t(e,i){void 0===e&&(e=null),void 0===i&&(i=!1),this._r=0,this._g=0,this._b=0,this._a=0,"string"==typeof e?t._parse(e,this,i,!1):e instanceof t?(this._r=e._r,this._g=e._g,this._b=e._b,this._a=e._a):isNaN(e)?(this._r=this._g=this._b=0,this._a=i?NaN:1):(this._a=(e>>>24)/255,this._r=(16711680&e)>>16,this._g=(65280&e)>>8,this._b=255&e)}return t._parse=function(t,e,i,o){if(t){var n=t.length;if("#"==(t=t.trim().toLowerCase()).charAt(0))if(t=t.substr(1),--n>=6&&n<=8)e._b=xt.toInt(t.substr(n-2,2),16),e._g=xt.toInt(t.substr(n-4,2),16),e._r=xt.toInt(t.substr(n-6,2),16),e._a=6==n?i?NaN:1:xt.toInt(t.substr(0,n-6),16)/255;else{if(3!=n){if(o)throw"Invalid color value text: "+t;return!1}e._r=xt.toInt(t.charAt(0)+t.charAt(0),16),e._g=xt.toInt(t.charAt(1)+t.charAt(1),16),e._b=xt.toInt(t.charAt(2)+t.charAt(2),16),e._a=i?NaN:1}else if(0==t.indexOf("rgba(")&&")"==t.charAt(n-1)){var r=(t=t.substring(5,n-1)).split(",");e._r=xt.toInt(r[0]),e._g=xt.toInt(r[1]),e._b=xt.toInt(r[2]),e._a=xt.toFloat(r[3])}else{if(0!=t.indexOf("rgb(")||")"!=t.charAt(n-1)){if(jh.hasOwnProperty(t))return r=jh[t],e._r=r._r,e._g=r._g,e._b=r._b,e._a=r._a,r;if(o)throw new Error("Invalid color text: "+t);return!1}r=(t=t.substring(4,n-1)).split(",");e._r=xt.toInt(r[0]),e._g=xt.toInt(r[1]),e._b=xt.toInt(r[2]),e._a=i?NaN:1}return!0}return!1},t.prototype.toHex=function(){return""+Bh(Math.floor(255*this._a))+Bh(this._r)+Bh(this._g)+Bh(this._b)},t.prototype.toColorHex=function(){return""+Bh(this._r)+Bh(this._g)+Bh(this._b)},t.prototype.toString=function(){return"#"+Bh(Math.floor(255*this._a))+Bh(this._r)+Bh(this._g)+Bh(this._b)},t}(),jh={transparent:new Gh("#00000000"),ltGray:new Gh("#d3d3d3"),ltgray:new Gh("#d3d3d3"),aliceblue:new Gh("#f0f8ff"),antiquewhite:new Gh("#faebd7"),aqua:new Gh("#00ffff"),aquamarine:new Gh("#7fffd4"),azure:new Gh("#f0ffff"),beige:new Gh("#f5f5dc"),bisque:new Gh("#ffe4c4"),black:new Gh("#000000"),blanchedalmond:new Gh("#ffebcd"),blue:new Gh("#0000ff"),blueviolet:new Gh("#8a2be2"),brown:new Gh("#a52a2a"),burlywood:new Gh("#deb887"),cadetblue:new Gh("#5f9ea0"),chartreuse:new Gh("#7fff00"),chocolate:new Gh("#d2691e"),coral:new Gh("#ff7f50"),cornflowerblue:new Gh("#6495ed"),cornsilk:new Gh("#fff8dc"),crimson:new Gh("#dc143c"),cyan:new Gh("#00ffff"),darkblue:new Gh("#00008b"),darkcyan:new Gh("#008b8b"),darkgoldenrod:new Gh("#b8860b"),darkgray:new Gh("#a9a9a9"),darkgreen:new Gh("#006400"),darkgrey:new Gh("#a9a9a9"),darkkhaki:new Gh("#bdb76b"),darkmagenta:new Gh("#8b008b"),darkolivegreen:new Gh("#556b2f"),darkorange:new Gh("#ff8c00"),darkorchid:new Gh("#9932cc"),darkred:new Gh("#8b0000"),darksalmon:new Gh("#e9967a"),darkseagreen:new Gh("#8fbc8f"),darkslateblue:new Gh("#483d8b"),darkslategray:new Gh("#2f4f4f"),darkslategrey:new Gh("#2f4f4f"),darkturquoise:new Gh("#00ced1"),darkviolet:new Gh("#9400d3"),deeppink:new Gh("#ff1493"),deepskyblue:new Gh("#00bfff"),dimgray:new Gh("#696969"),dimGray:new Gh("#696969"),dimgrey:new Gh("#696969"),dodgerblue:new Gh("#1e90ff"),firebrick:new Gh("#b22222"),floralwhite:new Gh("#fffaf0"),forestgreen:new Gh("#228b22"),fuchsia:new Gh("#ff00ff"),gainsboro:new Gh("#dcdcdc"),ghostwhite:new Gh("#f8f8ff"),goldenrod:new Gh("#daa520"),gold:new Gh("#ffd700"),gray:new Gh("#808080"),green:new Gh("#008000"),greenyellow:new Gh("#adff2f"),grey:new Gh("#808080"),honeydew:new Gh("#f0fff0"),hotpink:new Gh("#ff69b4"),indianred:new Gh("#cd5c5c"),indigo:new Gh("#4b0082"),ivory:new Gh("#fffff0"),khaki:new Gh("#f0e68c"),lavenderblush:new Gh("#fff0f5"),lavender:new Gh("#e6e6fa"),lawngreen:new Gh("#7cfc00"),lemonchiffon:new Gh("#fffacd"),lightblue:new Gh("#add8e6"),lightcoral:new Gh("#f08080"),lightcyan:new Gh("#e0ffff"),lightgoldenrodyellow:new Gh("#fafad2"),lightgray:new Gh("#d3d3d3"),lightgreen:new Gh("#90ee90"),lightgrey:new Gh("#d3d3d3"),lightpink:new Gh("#ffb6c1"),lightsalmon:new Gh("#ffa07a"),lightseagreen:new Gh("#20b2aa"),lightskyblue:new Gh("#87cefa"),lightslategray:new Gh("#778899"),lightslategrey:new Gh("#778899"),lightsteelblue:new Gh("#b0c4de"),lightyellow:new Gh("#ffffe0"),lime:new Gh("#00ff00"),limegreen:new Gh("#32cd32"),linen:new Gh("#faf0e6"),magenta:new Gh("#ff00ff"),maroon:new Gh("#800000"),mediumaquamarine:new Gh("#66cdaa"),mediumblue:new Gh("#0000cd"),mediumorchid:new Gh("#ba55d3"),mediumpurple:new Gh("#9370db"),mediumseagreen:new Gh("#3cb371"),mediumslateblue:new Gh("#7b68ee"),mediumspringgreen:new Gh("#00fa9a"),mediumturquoise:new Gh("#48d1cc"),mediumvioletred:new Gh("#c71585"),midnightblue:new Gh("#191970"),mintcream:new Gh("#f5fffa"),mistyrose:new Gh("#ffe4e1"),moccasin:new Gh("#ffe4b5"),navajowhite:new Gh("#ffdead"),navy:new Gh("#000080"),oldlace:new Gh("#fdf5e6"),olive:new Gh("#808000"),olivedrab:new Gh("#6b8e23"),orange:new Gh("#ffa500"),orangered:new Gh("#ff4500"),orchid:new Gh("#da70d6"),palegoldenrod:new Gh("#eee8aa"),palegreen:new Gh("#98fb98"),paleturquoise:new Gh("#afeeee"),palevioletred:new Gh("#db7093"),papayawhip:new Gh("#ffefd5"),peachpuff:new Gh("#ffdab9"),peru:new Gh("#cd853f"),pink:new Gh("#ffc0cb"),plum:new Gh("#dda0dd"),powderblue:new Gh("#b0e0e6"),purple:new Gh("#800080"),rebeccapurple:new Gh("#663399"),red:new Gh("#ff0000"),rosybrown:new Gh("#bc8f8f"),royalblue:new Gh("#4169e1"),saddlebrown:new Gh("#8b4513"),salmon:new Gh("#fa8072"),sandybrown:new Gh("#f4a460"),seagreen:new Gh("#2e8b57"),seashell:new Gh("#fff5ee"),sienna:new Gh("#a0522d"),silver:new Gh("#c0c0c0"),skyblue:new Gh("#87ceeb"),slateblue:new Gh("#6a5acd"),slategray:new Gh("#708090"),slategrey:new Gh("#708090"),snow:new Gh("#fffafa"),springgreen:new Gh("#00ff7f"),steelblue:new Gh("#4682b4"),tan:new Gh("#d2b48c"),teal:new Gh("#008080"),thistle:new Gh("#d8bfd8"),tomato:new Gh("#ff6347"),turquoise:new Gh("#40e0d0"),violet:new Gh("#ee82ee"),wheat:new Gh("#f5deb3"),white:new Gh("#ffffff"),whitesmoke:new Gh("#f5f5f5"),yellow:new Gh("#ffff00"),yellowgreen:new Gh("#9acd32")},Hh=function(){function t(){}return t.parseDocumentStyles=function(t){for(var e,i,o,n={},r=t.styleSheets,s=0,a=r.length;s<a;s++){e=r[s];try{e.rules?i=e.rules:e.cssRules&&(i=e.cssRules)}catch(t){continue}if(i)for(var l=i.length;l--;){var u=(o=i[l]).selectorText;if(u)if(u.indexOf(",")>-1)for(var c=u.split(","),h=c.length;h--;){var p=c[h].trim();p&&(n[p]=o.style)}else n[o.selectorText]=o.style}}return n},t.extendCssStyle=function(t,e){for(var i=0,o=t.length;i<o;i++){var n=t[i];"inherit"==t[n]||xt.included(n,"background-color")&&xt.included(t[n],"none","initial","unset")||(e[n]||(e[e.length]=n,e.length++),e[n]=t[n])}},t.$_getSelectorStyle=function(t,e){return t[e]},t.getSelectorStyle=function(e,i){if(t.prefix){var o=[],n={length:0};o.push(t.$_getSelectorStyle(e,i)),o.push(t.$_getSelectorStyle(e,t.prefix+i));for(var r=0,s=o.length;r<s;r++)o[r]&&t.extendCssStyle(o[r],n);return n}return t.$_getSelectorStyle(e,i)},t}(),$h=function(){function e(t,e){this._grid=t,this._exportOptions=e,this._exportLayout=e.exportLayout,this._dataColumns=[],this._sparkColumns={},this.parse(e)}return e.prototype.dispose=function(){this._headerCells=null,this._dataCells=null,this._dataColumns=null,this._sparkColumns=null,this._exportLayout=null,this._layout=this._layout&&this._layout.dispose()},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colCount",{get:function(){var t=this._layout&&this._layout._dataCells;return t&&t.length?t[0].length:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerRowCount",{get:function(){return(this._layout&&this._layout._headerCells).length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataRowCount",{get:function(){return(this._layout&&this._layout._dataCells).length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparkColumns",{get:function(){return this._sparkColumns},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"documentCssStyles",{get:function(){return this._documentCssStyles},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupModel",{get:function(){return this._groupModel},enumerable:!1,configurable:!0}),e.prototype.getHeader=function(t,e){return this._headerCells[t][e]},e.prototype.getItem=function(t,e){return this._dataCells[t][e]},e.prototype.getFooterItem=function(t,e){return this._footerCells[t][e]},e.prototype.getSummaryItem=function(t,e){return this._summaryCells[t][e]},e.prototype.clearDataSpanned=function(){for(var t=this._dataCells,e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++)t[e][i].spanned=!1},e.prototype.getItemLevel=function(t){for(var e=this.grid,i=t.parent,o=t.level-1;i&&i.level>0;){var n=e.columnByField(i.groupField),r=n.layout;n.visible&&r.visible||o--,i=i.parent}return Math.max(o,0)},e.prototype.prepareLayout=function(){var t,e=this.grid,i=this._exportOptions,o=e.activeCellLayout;if(i.linear){for(var n=o.getDataColumns(!1),r=[],s=0;s<=n.length-1;s++){var a=n[s],l=a.visible&&a.layout.visible||i.allColumns;(l=l&&i.hideColumns.indexOf(a.name)<0||i.showColumns.indexOf(a.name)>=0)&&r.push({column:a.name,width:a.layout.domWidth||a.layout.width})}t=new as(e).load(r)}else t=i.exportLayout?new as(e).load(i.exportLayout):new as(e).load(e.activeCellLayout.getLayout(!0,i.applyFitStyle,i.allColumns,i.showColumns,i.hideColumns,i.layoutExpand));return t},e.prototype.parse=function(t){var e=this._grid,i=this._layout=this.prepareLayout(),o=this._exportOptions.stylePrefix;Hh.prefix=o?o.trim()+" ":void 0,i.$_refresh2(e._columns,e.displayOptions.minCellWidth),i.$_prepareLayout(e,e.fixedOptions.colCount,e.fixedOptions.rightCount),i.$_prepareMerges(e);var n=e.footers,r=e.headerSummaries;this._setCellInfo(i._headerCells,this._headerCells=[]),this._setCellInfo(i._dataCells,this._dataCells=[]),this._setFooterInfo(i._dataCells,t.footer===Ah?n.count:n.visibleCount,this._footerCells=[]),this._setFooterInfo(i._dataCells,t.headerSummary===Ah?r.count:r.visibleCount,this._summaryCells=[]),this._documentCssStyles=Hh.parseDocumentStyles(e.doc),this._setDataColumns(i._dataCells),this._setSparkInfo(this._dataCells)},e.prototype._setCellInfo=function(t,e){for(var i=0;i<t.length;i++){for(var o=[],n=0;n<t[i].length;n++)o.push({layout:t[i][n],spanned:!1});e.push(o)}},e.prototype._setFooterInfo=function(t,e,i){for(var o=0;o<e;o++)for(var n=0;n<t.length;n++){for(var r=[],s=0;s<t[n].length;s++)r.push({footerIndex:o,layout:t[n][s],spanned:!1});i.push(r)}},e.prototype.setGroupFooterItms=function(e,i,o){this._groupModel=e;var n=this._groupFooterCells=[],r=this._dataCells,s=!1;if(!(e.footerCount>0)){var a=e.provider._expandedAdornments,l=e.provider._collapsedAdornments;s=o?i&&!e.expanded&&xt.included(l,t.RowGroupAdornments.SUMMARY,t.RowGroupAdornments.FOOTER):(s=e.expanded&&a===t.RowGroupAdornments.SUMMARY)||!i&&!e.expanded&&xt.included(l,t.RowGroupAdornments.SUMMARY,t.RowGroupAdornments.FOOTER)}for(var u=s?e.allFooterCount:e.footerCount,c=0;c<u;c++)for(var h=s?e._allFooters[c]:e.getFooter(c),p=0;p<r.length;p++){for(var d=[],f=0;f<r[p].length;f++)d.push({footerIndex:h.footerIndex,layout:r[p][f].layout,spanned:!1});n.push(d)}},e.prototype.getGroupFooterCells=function(){return this._groupFooterCells},e.prototype._setDataColumns=function(t){var e,i;this._dataColumns=[];for(var o=0,n=t.length;o<n;o++){e=[];for(var r=0,s=t[o].length;r<s;r++)(i=t[o][r]).isProxy&&(i=i.source),e.push(i.firstColumn);this._dataColumns.push(e)}},e.prototype._setSparkInfo=function(t){function e(t,e){var i={start:void 0,end:void 0,row:void 0},o=s[0],n=s[s.length-1],r=a.columnByField(o),l=a.columnByField(n);if(!r||!l)return null;for(var u=0,c=e.length;u<c;u++)for(var h=0,p=e[u].length;h<p;h++)r==e[u][h]&&(i.start=h,i.row=u-t),l==e[u][h]&&(i.end=h);return i}var i,o,n,r,s,a,l=this.documentCssStyles;this._sparkColumns=[];for(var u=0,c=t.length;u<c;u++)for(var h=0,p=t[u].length;h<p;h++)if((n=(o=(i=t[u][h]).layout)instanceof Yr?o.firstColumn:null)instanceof $r&&(r=n.renderer)&&Ja.interfaced(r)){s=n.fields,a=n.grid;var d=s.length>0&&e(u,this._dataColumns);if(d){var f=r.firstStyle,g=r.lastStyle,y=r.highStyle,_=r.lowStyle,m=void 0,v=void 0,b=void 0;if(Za.interfaced(r)){m="line",!g&&(g=Za.LAST_STYLE),!y&&(y=Za.HIGH_STYLE),!_&&(_=Za.LOW_STYLE);var C=r.pointStyle?Hh.getSelectorStyle(l,"."+r.pointStyle):void 0;v=C?new Gh(C.fill).toHex():void 0,b=(S=Hh.getSelectorStyle(l,"."+Za.CHART_STYLE))?new Gh(S.stroke).toHex():void 0}else{var w=void 0;tl.interfaced(r)?(m="column",w=tl.CHART_STYLE,!g&&(g=tl.LAST_STYLE),!y&&(y=tl.HIGH_STYLE),!_&&(_=tl.LOW_STYLE)):(m="stacked",w=el.CHART_STYLE);var S=Hh.getSelectorStyle(l,"."+w);b=new Gh(S.fill).toHex()}var E=y?Hh.getSelectorStyle(l,"."+y):void 0,x=_?Hh.getSelectorStyle(l,"."+_):void 0,O=f?Hh.getSelectorStyle(l,"."+f):void 0,R=g?Hh.getSelectorStyle(l,"."+g):void 0,I={type:m,colors:{colorHigh:E&&E.fill?new Gh(E.fill).toHex():void 0,colorLow:x&&x.fill?new Gh(x.fill).toHex():void 0,colorFirst:O&&O.fill?new Gh(O.fill).toHex():void 0,colorLast:R&&R.fill?new Gh(R.fill).toHex():void 0,colorMarkers:v,colorSeries:b},sparkLines:{},range:d};i.sparkLineGroup=I,this._sparkColumns[n.$_hash]=i}}},e}(),Wh=function(){function t(){}return t.convertNumberFormat=function(t){return t.indexOf(";")>0&&(t=t.split(";")[0]),t.indexOf(".#")>0?t.replace(".#",".0"):t},t.convertDateFormat=function(t){for(var e="",i=t.length,o=0;o<i;o++){var n=t.charAt(o);switch(n){case"y":case"d":case"m":case"s":case":":e+=n;break;case"M":e+="m";break;case"a":e+="AM/PM";break;case"H":e+="h",(o>=i-1||"H"!=t.charAt(o+1))&&(e+="h");break;case"h":0!=o&&"h"==t.charAt(o-1)||(e+="h");break;case"S":case"T":case"t":case"Z":case"z":case"+":break;case".":case"/":case"-":case" ":(o>=i-1||"S"!=t.charAt(o+1))&&(e=e+"\\"+n);break;default:e=e+'"'+n+'"'}}return e},t}(),Uh=function(){function t(){this._contentTypes={},this._bulkDownload=!0}return Object.defineProperty(t.prototype,"bulkDownload",{get:function(){return this._bulkDownload},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buldDownload",{set:function(t){this._bulkDownload=t},enumerable:!1,configurable:!0}),t.prototype.executeDownLoad=function(t,e,i){return s(this,void 0,void 0,(function(){var o,n,r,s,l;return a(this,(function(a){switch(a.label){case 0:if(o=[],n=Object.keys(e),!this.bulkDownload)return[3,1];for(r=0;r<n.length;r++)s=n[r],l=e[s],o.push(this.download(l).then((function(t){return new Promise((function(e,i){var o=new Uint8Array(t.buffer);try{var n=Array.prototype.map.call(o,(function(t){return String.fromCharCode(t)})).join(""),r="data:".concat(t.type,";base64,").concat(Ot.btoa(n)),s=document.createElement("img");s.style.position="fixed",s.style.top="-10000px",s.style.left="-10000px",s.src=r,s.onload=function(){t.width=s.width,t.height=s.height,s.src="",e(t)},s.onerror=function(){i()}}finally{}}))})).catch((function(){})));return Promise.all(o).catch((function(){})).finally((function(){i&&i.call(t,e)})),[3,6];case 1:r=0,a.label=2;case 2:return r<n.length?(s=n[r],l=e[s],[4,this.download(l).then((function(t){return new Promise((function(e,i){var o=new Uint8Array(t.buffer);try{var n=Array.prototype.map.call(o,(function(t){return String.fromCharCode(t)})).join(""),r="data:".concat(t.type,";base64,").concat(Ot.btoa(n)),s=document.createElement("img");s.style.position="fixed",s.style.top="-10000px",s.style.left="-10000px",s.src=r,s.onload=function(){t.width=s.width,t.height=s.height,s.src="",e(t)},s.onerror=function(){i()}}finally{}}))})).catch((function(){}))]):[3,5];case 3:a.sent(),a.label=4;case 4:return r++,[3,2];case 5:i&&i.call(t,e),a.label=6;case 6:return[2]}}))}))},t.prototype.getContentTypes=function(){return this._contentTypes},t.prototype.getExtension=function(t,e){var i=function(t){return Array.prototype.map.call(t,(function(t){return xt.hex(t)})).join("")};if(t){var o="",n=t.toLowerCase().split(/\s*(?:;|$)\s*/),r=xt.find(n,(function(t){return 0===t.indexOf("image")}));r&&(o=r.indexOf("svg")>=0?"svg":r.substring(6));var s=xt.find(n,(function(t){return t.indexOf("octet-stream")>=0}));if(!o&&s&&e.byteLength>20){var a=new Uint8Array(e),l=i(a.slice(0,10)),u=i(a.slice(-18));0===l.indexOf("474946")?(o="gif",t="image/gif"):0===l.indexOf("89504e47")?(o="png",t="image/png"):0===l.indexOf("ffd8")&&"ffd9"===u.substr(-4)?(o="jpeg",t="image/jpeg"):0===l.indexOf("424d")&&(o="bmp",t="image/bmp")}return o&&!this._contentTypes.hasOwnProperty(o)&&(this._contentTypes[o]=t),{ext:o,type:t}}},t.prototype.download=function(t){var e=this;return new Promise((function(i,o){var n=new XMLHttpRequest;n.open("GET",t.url),n.onload=function(){if(200===n.status){var o=e.getExtension(n.getResponseHeader("content-type"),n.response),r=o.ext,s=o.type;r?(t.fileName="".concat(t.id,".").concat(r),t.type=s,t.buffer=n.response,i(t)):i(null)}else i(null)},n.onerror=function(){o()},n.responseType="arraybuffer",n.send()}))},t}(),zh=/\<|\>|\&|\"/;function Kh(t){return zh.test(t)?t.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;"):t}var Yh=function(){function t(){}return t.createDocument=function(t,e){var i={name:t,attrs:{}};for(var o in e)i.attrs[o]=e[o];return i},t.removeItem=function(e){if(e.texts=null,e.attrs=null,e.childs)for(var i=e.childs.length;i--;)t.removeItem(e.childs[i]),delete e.childs[i];e.childs=null},t.addChild=function(e,i,o,n){var r={name:i,attrs:o};return n&&t.addText(r,Kh(n)),t.addChildElement(e,r),r},t.addChildElement=function(t,e){t.childs||(t.childs=[]),t.childs.push(e)},t.addProperty=function(t,e,i){t.attrs||(t.attrs={}),t.attrs[e]=Kh(i)},t.addText=function(t,e){t.texts||(t.texts=[]),t.texts.push(e)},t.toString=function(e){var i="<"+e.name;for(var o in e.attrs)i+=" "+o+'="'+e.attrs[o]+'"';if(e.childs||e.texts){if(i+=">",e.texts)for(var n=0,r=e.texts.length;n<r;n++)i+=e.texts[n];if(e.childs)for(n=0,r=e.childs.length;n<r;n++)i+=t.toString(e.childs[n]);i+="</"+e.name+">"}else i+="/>";return i},t}(),qh=function(){function t(){}return t.toColCaption=function(t){for(var e="";t>=0;)e=String.fromCharCode(t%26+65)+e,t=Math.floor(t/26)-1;return e},t.toRange=function(e,i,o,n,r){void 0===o&&(o=!1),void 0===n&&(n=1),void 0===r&&(r=1);var s=i+1;return o?t.toColCaption(e)+s+":"+t.toColCaption(e+n-1)+(s+r-1):t.toColCaption(e)+s},t.daysOfYear=function(e){for(var i=0,o=0;o<e.getMonth();o++)i+=t.$$_MONTH_DAYS[o];if(e.getMonth()>=2){var n=e.getFullYear();(n%400==0||n%4==0&&n%100!=0)&&i++}return i+e.getDate()},t.daysOfPriorYears=function(t){return t<=1900?0:365*(--t-1899)+(Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400)-460)},t.toExcelDate=function(e){var i=(1e3*(60*(60*e.getHours()+e.getMinutes())+e.getSeconds())+e.getMilliseconds())/t.$$_DAY_MILLISECONDS,o=t.daysOfPriorYears(e.getFullYear())+this.daysOfYear(e)+i;return o>=60&&o++,o},t.XML_HEAD_STRING='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',t.$$_DAY_MILLISECONDS=864e5,t.$$_MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30],t}(),Xh=function(){function t(){this._nextId=0,this._count=0,this._stringMap={},this._strings=[]}return t.prototype.dispose=function(){for(var t in this._strings=null,this._stringMap)delete this._stringMap[t];this._stringMap=null},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),t.prototype.uniqueCount=function(){return this._nextId},t.prototype.add=function(t){this._count++;var e=this._stringMap[t];return void 0===e&&(e=this._nextId++,this._stringMap[t]=e,this._strings[e]=t),e},t.prototype.getIndex=function(t){return this._stringMap[t]},t.prototype.createPart=function(){var t=Yh.createDocument("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"});Yh.addProperty(t,"count",this._count.toString()),Yh.addProperty(t,"uniqueCount",this._nextId.toString());for(var e=/^\s|\s$|\r|\n|\r\n/,i=0,o=this._strings.length;i<o;i++){var n=Yh.addChild(t,"si"),r=this._strings[i].replace(/([\u0000-\u0008\u000b\u000c\u000e-\u001F])/g,(function(t){return"_x".concat(("0000"+t.charCodeAt(0).toString(16)).substr(-4),"_")})),s=Yh.addChild(n,"t",null,r);e.test(this._strings[i])&&Yh.addProperty(s,"xml:space","preserve")}var a=Yh.toString(t);return qh.XML_HEAD_STRING+a},t}(),Qh=function(){function t(t,e){this._id=t,this._url=e}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),t}(),Jh=function(){function t(){this._images=[],this._imageMap={}}return t.prototype.add=function(t){if(this._images.indexOf(t)<0){var e=this._images.push(t);this._imageMap[t]=new Qh(e,t)}return t},t.prototype.getImageMap=function(){return this._imageMap},t.prototype.getImage=function(t){return this._imageMap&&this._imageMap[t]},t.prototype.getImageId=function(t){return this._imageMap&&this._imageMap[t]&&this._imageMap[t].id},t}(),Zh=function(){function e(e,i,o,n,r,s){switch(this._cols=1,this._cHeights=[],this._col=e,this._row=i,this._cWidth=7*o,this._cHeight=n>0?n/.75:-1,this._imageUrl=s,r){case t.IconLocation.CENTER:this._location=t.IconLocation.CENTER;break;case t.IconLocation.RIGHT:case t.IconLocation.RIGHT_EDGE:this._location=t.IconLocation.RIGHT;break;default:this._location=t.IconLocation.LEFT}}return Object.defineProperty(e.prototype,"col",{get:function(){return this._col.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"row",{get:function(){return this._row.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toCol",{get:function(){return(this._col+this._cols-1).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toRow",{get:function(){return this._toRow.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fromX",{get:function(){return Math.round((null!=this._fromX?this._fromX:2)*e.emu).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fromY",{get:function(){return Math.round((null!=this._fromY?this._fromY:2)*e.emu).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colOff",{get:function(){return Math.round(this._xOffset*e.emu).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowOff",{get:function(){return Math.round(this._yOffset*e.emu).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageUrl",{get:function(){return this._imageUrl},enumerable:!1,configurable:!0}),e.prototype.calcPosition=function(e,i){var o,n=this._rHeight,r=this._rWidth;null!=n&&n>0&&null!=r&&r>0?(e=r,i=n):null!=n&&n>0?(o=n/i,i=n,e*=o):null!=r&&r>0&&(o=r/e,e=r,i*=o),this._cWidth=this._cWidth<0?e:this._cWidth,this._cHeight=this._cHeight<0?i:this._cHeight,o=1,(this._cWidth<e||this._cHeight<i)&&(i*=o=Math.min((this._cWidth-2)/e,(this._cHeight-2)/i),e*=o);var s=1;this._location===t.IconLocation.CENTER?s=Math.max(1,this._cWidth/2-e/2):this._location===t.IconLocation.RIGHT&&(s=this._cWidth-e-1);for(var a=this._cHeight/2-i/2,l=this._row,u=l,c=a,h=a+i,p=1;p<this._cHeights.length;p++)a>=this._cHeights[p]&&(l++,c-=this._cHeights[p]-this._cHeights[p-1]),a+i>this._cHeights[p]&&(u++,h-=this._cHeights[p]-this._cHeights[p-1]);this._row=l,this._toRow=u,this._fromX=s,this._fromY=Math.max(1,c),this._xOffset=this._fromX+e,this._yOffset=Math.min(h,this._cHeight-1)},e.emu=9525,e}(),tp=function(){function t(t,e,i){this._infos=[],this._book=t,this._sheet=e,this._index=i}return t.prototype.dispose=function(){return null},Object.defineProperty(t.prototype,"fileName",{get:function(){return"drawing"+this._index+".xml"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"relationId",{get:function(){return"rId"+this._rId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rId",{set:function(t){this._rId=t},enumerable:!1,configurable:!0}),t.prototype.createPart=function(){for(var t=Yh,e=t.createDocument("xdr:wsDr",{"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"}),i=this._infos,o=0;o<i.length;o++){var n=i[o],r=this._book.getExcelImage(n.imageUrl);if(r&&r.fileName){var s=this._sheet.getMergeInfo(n.row,n.col);if(s){for(var a=[0],l=-1,u=s.row;u<s.row+s.rows;u++){var c=this._sheet.getRow(u);if(!(c._height>0)){l=-1,a=[];break}a.push(l+=c._height/.75)}n._cols=s.cols,n._cHeight=l,n._cHeights=a}n.calcPosition(r.width,r.height);var h=t.addChild(e,"xdr:twoCellAnchor",{editAs:"oneCell"}),p=t.addChild(h,"xdr:from");t.addChild(p,"xdr:col",null,n.col),t.addChild(p,"xdr:colOff",null,n.fromX),t.addChild(p,"xdr:row",null,n.row),t.addChild(p,"xdr:rowOff",null,n.fromY),p=t.addChild(h,"xdr:to"),t.addChild(p,"xdr:col",null,n.toCol),t.addChild(p,"xdr:colOff",null,n.colOff),t.addChild(p,"xdr:row",null,n.toRow),t.addChild(p,"xdr:rowOff",null,n.rowOff);var d=t.addChild(h,"xdr:pic"),f=t.addChild(d,"xdr:nvPicPr");t.addChild(f,"xdr:cNvPr",{id:o+2,name:"picture "+o});var g=t.addChild(f,"xdr:cNvPicPr");t.addChild(g,"a:picLocks",{noChangeAspect:"1"});var y=t.addChild(d,"xdr:blipFill"),_=t.addChild(y,"a:blip",{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":"rId"+this._book.getImageIndex(n.imageUrl)}),m=t.addChild(_,"a:extLst"),v=t.addChild(m,"a:ext",{uri:"{28A0092B-C50C-407E-A947-70E740481C1C}"});t.addChild(v,"a14:useLocalDpi",{"xmlns:a14":"http://schemas.microsoft.com/office/drawing/2010/main",val:"0"}),t.addChild(t.addChild(y,"a:stretch"),"a:fillRect");var b=t.addChild(d,"xdr:spPr"),C=t.addChild(b,"a:xfrm");t.addChild(C,"a:off",{x:"1",y:"1"}),t.addChild(C,"a:ext",{cx:"1181100",cy:"1189663"}),t.addChild(t.addChild(b,"a:prstGeom",{prst:"rect"}),"a:avLst"),t.addChild(h,"xdr:clientData")}}var w=Yh.toString(e);return qh.XML_HEAD_STRING+w},t.prototype.add=function(t,e,i,o,n,r,s,a){var l=new Zh(t,e,i,o,n,r);return l._rWidth=s,l._rHeight=a,this._infos.push(l),l},t.prototype.createSheetRel=function(){var t=Yh.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),e=Yh.addChild(t,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing"});Yh.addProperty(e,"Id",this.relationId),Yh.addProperty(e,"Target","../drawings/"+this.fileName);var i=Yh.toString(t);return qh.XML_HEAD_STRING+i},t.prototype.createRel=function(){var t=[];this._infos.forEach((function(e){t.indexOf(e.imageUrl)<0&&t.push(e.imageUrl)}));for(var e=Yh.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),i=0;i<t.length;i++){var o=t[i],n=this._book.getExcelImage(o);if(n&&n.fileName){var r=Yh.addChild(e,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image"});Yh.addProperty(r,"Id","rId"+this._book.getImageIndex(o).toString()),Yh.addProperty(r,"Target","../media/"+n.fileName)}}var s=Yh.toString(e);return qh.XML_HEAD_STRING+s},t}(),ep=function(){function t(t){this._id=t}return t.EqualsById=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&t._id==e.id},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){},t}(),ip=function(){function t(){this._items=[],this._indexer=0}return t.prototype.dispose=function(){for(var t=this._items.length;t--;)this._items[t].dispose();this._items=null},t.prototype.getIndexer=function(){return this._indexer++},t.prototype.create=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=this._items.length;o--;)if((t=this._items[o]).equals.apply(t,e))return t;return t=this.createInstance.apply(this,e),this._items.push(t),t},t.prototype.createUnique=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.createInstance.apply(this,t);return this._items.push(i),i},t}(),op=function(t){function e(e,i,o,n,r,s,a){var l=t.call(this,e)||this;return l._bold=void 0,l._italic=void 0,l._underline=void 0,l._name=i,l._size=o,l._color=n,l._bold=r,l._italic=s,l._underline=a,l}return n(e,t),e.prototype.assignFrom=function(t){this._name=this._name||t._name,this._size=this._size||t._size,this._color=this._color||t._color,this._bold=null==this._bold?t._bold:this._bold,this._italic=null==this._italic?t._italic:this._italic,this._underline=null==this._underline?t._underline:this._underline},e.prototype.equals=function(t,e,i,o,n,r){return void 0===t&&(t="Tahoma"),void 0===e&&(e=10),void 0===i&&(i="ff000000"),void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),this._name==t&&this._size==e&&this._color==i&&this._bold==o&&this._italic==n&&this._underline==r},e.prototype.toXml=function(t,e){Ti.addChildWithAttr(t,e,"sz","val",this._size||10),Ti.addChildWithAttr(t,e,"name","val",this._name||"Calibri"),Ti.addChildWithAttr(t,e,"color","rgb",this._color||"ff000000"),Ti.addChildWithAttr(t,e,"b","val",this._bold?"true":"false"),Ti.addChildWithAttr(t,e,"i","val",this._italic?"true":"false"),this._underline&&Ti.addChild(t,e,"u")},e}(ep),np=function(t){function e(e){var i=t.call(this)||this,o=Ct(e).getComputedStyle(e);return i._defFontSize=i.$_convertUnit(o.fontSize||"16px"),i}return n(e,t),e.prototype.createInstance=function(t,e,i,o,n,r){return new op(this.getIndexer(),t,e,i,o,n,r)},e.prototype.createFromCss=function(t){var e=t["font-family"];e?(e.indexOf(",")>-1&&(e=e.split(",")[0]),e=e.replace(/\"/g,"")):e=void 0;var i=this.$_convertUnit(t["font-size"]);i=isNaN(i)?void 0:72*i/96;var o=t.color;o&&(o="#"==o.charAt(0)?t.color:new Gh(o).toColorHex());var n="bold"==t["font-weight"],r="italic"==t["font-style"],s="underline"==t["font-decoration"];return this.create(e,i,o,n,r,s)},e.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var n=Ti.addChild(t,e,"font");this._items[o].toXml(t,n)}Ti.setAttr(e,"count",i)},e.prototype.$_convertUnit=function(t){return null==t?void 0:"string"==typeof t?t.indexOf("px")>0?parseFloat(t):t.indexOf("pt")>0?Math.round(1.3333*parseFloat(t)):t.indexOf("em")>0?parseFloat(t)*this._defFontSize:12:parseInt(t)},e}(ip),rp=function(t){function e(e,i,o,n,r,s,a){void 0===i&&(i="solid"),void 0===n&&(n=0),void 0===r&&(r=!1),void 0===a&&(a=90);var l=t.call(this,e)||this;return l._pattern=i,l._color=o,l._linear=r,l._color2=s,l._degree=a,l._tint=n,l}return n(e,t),e.prototype.assignFrom=function(t){this._pattern=t._pattern||this._pattern,this._color=t._color||this._color,this._tint=t._tint||this._tint,this._linear=null==t._linear?this._linear:t._linear,this._color2=t._color2||this._color2,this._degree=t._degree||this._degree},e.prototype.equalsObj=function(t){return this._pattern==t._pattern&&this._color==t._color&&this._color2==t._color2&&this._linear==t._linear&&this._degree==t._degree&&this._tint==t._tint},e.prototype.equals=function(t,e,i,o,n,r){return void 0===t&&(t="solid"),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===r&&(r=90),this._pattern==t&&this._color==e&&this._color2==n&&this._linear==o&&this._degree==r&&this._tint==i},e.prototype.toXml=function(t,e){var i,o=this._tint||0;if(this._linear){var n=Ti.addChildWithAttr(t,e,"gradientFill","degree",this._degree||90),r=Ti.addChildWithAttr(t,n,"stop","position","0");i=Ti.addChild(t,r,"color"),Ti.setAttr(i,"rgb",this._color),Ti.setAttr(i,"tint",this._tint||0),r=Ti.addChildWithAttr(t,n,"stop","position","1"),i=Ti.addChild(t,r,"color"),Ti.setAttr(i,"rgb",this._color2),Ti.setAttr(i,"tint",o)}else{var s=Ti.addChildWithAttr(t,e,"patternFill","patternType",this._pattern.toString());"none"!=this._pattern&&null!=this._color&&(i=Ti.addChild(t,s,"fgColor"),Ti.setAttr(i,"rgb",this._color),Ti.setAttr(i,"tint",o))}},e}(ep),sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.createInstance=function(t,e,i,o,n,r){return new rp(this.getIndexer(),t,e,i,o,n,r)},e.prototype.createFromCss=function(t){var e=t["background-image"],i="linear-gradient(",o=e?e.indexOf(i):-1;if(o>-1){var n=this._splitEscape(e.slice(o+i.length,e.length-1)),r=void 0,s=void 0,a=void 0;n.length>2?(r=new Gh(n[1]),s=new Gh(n[2]),a=parseInt(n[0])):(r=new Gh(n[0]),s=new Gh(n[1]),a=180),a=(a+270)%360;var l=1-r._a;return this.create("none",r.toHex(),l,!0,s.toHex(),a)}if(t["background-color"]){var u=new Gh(t["background-color"]);return l=1-u._a,u?this.create("solid",u.toHex(),l):this._items[0]}},e.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var n=Ti.addChild(t,e,"fill");this._items[o].toXml(t,n)}Ti.setAttr(e,"count",i)},e.prototype._splitEscape=function(t,e){if(void 0===e&&(e=","),t){for(var i=[],o=!1,n="",r=0;r<t.length;r++){var s=t[r];s!=e||o?(" "!=s||o)&&(n+=s):(i.push(n),n=""),"("==s&&(o=!0),")"==s&&(o=!1)}return n&&i.push(n),i}return null},e}(ip),ap=function(t){function e(e,i,o,n){void 0===o&&(o=1),void 0===n&&(n="none");var r=t.call(this,e)||this;return r._color=i,r._width=o,r._type=n,r}return n(e,t),e.equalsObj=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&t._color==e._color&&t._type==e._type&&t._width==e._width},e.prototype.equals=function(t,e,i){return void 0===e&&(e=1),void 0===i&&(i="none"),this._color==t&&this._width==e&&this._type==i},e.prototype.toXml=function(t,e){var i=this._width<=1?"thin":this._width<=2?"medium":"thick";Ti.setAttr(e,"style",i),Ti.addChildWithAttr(t,e,"color","rgb",this._color)},e}(ep),lp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.createInstance=function(t,e,i){return new ap(this.getIndexer(),t,e,i)},e.prototype.createFromCss=function(t,e){var i=t[e+"-style"];if(i&&"none"!=i){var o=new Gh(t[e+"-color"]),n=i,r=parseInt(t[e+"-width"]);if(!o&&isNaN(r))return this._items[0];if(isNaN(r))r=0;else if(0===r)return;return this.create(o.toColorHex(),r,n)}},e}(ip),up=function(t){function e(e,i,o,n,r){var s=t.call(this,e)||this;return s._left=i,s._top=o,s._right=n,s._bottom=r,s}return n(e,t),e.equalsObj=function(t,e){return ap.equalsObj(t._left,e._left)&&ap.equalsObj(t._top,e._top)&&ap.equalsObj(t._right,e._right)&&ap.equalsObj(t._bottom,e._bottom)},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._bottom},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._left=null,this._top=null,this._right=null,this._bottom=null,t.prototype.dispose.call(this)},e.prototype.equals=function(t,e,i,o){return ap.EqualsById(this._left,t)&&ap.EqualsById(this._top,e)&&ap.EqualsById(this._right,i)&&ap.EqualsById(this._bottom,o)},e.prototype.toXml=function(t,e){this.borderToXml(t,e,"left"),this.borderToXml(t,e,"right"),this.borderToXml(t,e,"top"),this.borderToXml(t,e,"bottom")},e.prototype.borderToXml=function(t,e,i){var o=Ti.addChild(t,e,i),n=this[i];n&&n.toXml(t,o)},e}(ep),cp=function(t){function e(e){var i=t.call(this)||this;return i._lines=e,i}return n(e,t),e.prototype.dispose=function(){this._lines=null,t.prototype.dispose.call(this)},e.prototype.createInstance=function(t,e,i,o){return new up(this.getIndexer(),t,e,i,o)},e.prototype.createFromCss=function(t){var e=this._lines,i=e.createFromCss(t,"border-left"),o=e.createFromCss(t,"border-right"),n=e.createFromCss(t,"border-top"),r=e.createFromCss(t,"border-bottom");return i||o||n||r?this.create(i,n,o,r):void 0},e.prototype.extend=function(t,e){t=t||{};for(var i=new up(null,e.left||t.left,e.top||t.top,e.right||t.right,e.bottom||t.bottom),o=this._items.length;o--;){var n=this._items[o];if(up.equalsObj(this._items[o],i))return n}return i._id=this.getIndexer(),this._items.push(i),i},e.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var n=Ti.addChild(t,e,"border");this._items[o].toXml(t,n)}Ti.setAttr(e,"count",i)},e}(ip),hp=function(t){function e(e,i,o,n,r,s,a,l,u){void 0===r&&(r=!1),void 0===s&&(s=0);var c=t.call(this,i)||this;return c._collection=e,c._horzAlign=o,c._vertAlign=n,c._wrapText=r,c._formatId=s,c._font=a,c._fill=l,c._border=u,c}return n(e,t),Object.defineProperty(e.prototype,"horzAlign",{get:function(){return this._horzAlign},set:function(t){this._horzAlign=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertAlign",{get:function(){return this._vertAlign},set:function(t){this._vertAlign=t},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._font=null,this._fill=null,this._border=null,this._collection=null,t.prototype.dispose.call(this)},e.prototype.equals=function(t,e,i,o,n,r,s,a){return this._horzAlign==t&&this._vertAlign==e&&this._wrapText==i&&this._formatId==o&&op.EqualsById(this._font,n)&&rp.EqualsById(this._fill,r)&&up.EqualsById(this._border,s)&&xt.equalObjects(this._cellProptectProps,a)},e.prototype.toXml=function(t,e){var i=this;Ti.setAttr(e,"borderId",(this._border?this._border.id:0)+""),Ti.setAttr(e,"fillId",(this._fill?this._fill.id:0)+""),Ti.setAttr(e,"fontId",(this._font?this._font.id:0)+""),Ti.setAttr(e,"numFmtId",this._formatId+""),Ti.setAttr(e,"xfId","0");var o=Ti.addChild(t,e,"alignment");if(Ti.setAttr(o,"horizontal",this._horzAlign||"left"),Ti.setAttr(o,"vertical",this._vertAlign||"center"),this._wrapText&&Ti.setAttr(o,"wrapText","1"),this._cellProptectProps){var n=Ti.addChild(t,e,"protection");Object.keys(this._cellProptectProps).forEach((function(t){Ti.setAttr(n,t,i._cellProptectProps[t])}))}},e.prototype.cloneAsNew=function(t,i,o,n,r,s,a,l,u){return new e(this._collection,t,i||this._horzAlign,o||this._vertAlign,null!=n?n:this._wrapText,null!=r?r:this._formatId,s||this._font,a||this._fill,l||this._border)},e}(ep),pp=function(t){function e(e,i,o){var n=t.call(this)||this;return n._fonts=e,n._fills=i,n._borders=o,n}return n(e,t),e.prototype.dispose=function(){this._fonts=null,this._fills=null,this._borders=null,t.prototype.dispose.call(this)},e.prototype.addStyle=function(t){for(var e=this._items.length;e--;){var i=this._items[e];if(i.equals(t.horzAlign,t.vertAlign,t._wrapText,t._formatId,t._font,t._fill,t._border,t._cellProptectProps))return i}return t._id=this.getIndexer(),t._collection=this,t},e.prototype.changeFormatId=function(t,e){for(var i,o=this._items.length;o--;)if((i=this._items[o]).equals(t.horzAlign,t.vertAlign,t._wrapText,e,t._font,t._fill,t._border,t._cellProptectProps))return i;return(i=t.cloneAsNew(this.getIndexer(),null,null,null,e,null,null,null))._cellProptectProps=xt.deepCopy(t._cellProptectProps),this._items.push(i),i},e.prototype.changeBorder=function(t,e){for(var i,o=this._borders.extend(t._border,e),n=this._items.length;n--;)if((i=this._items[n]).equals(t.horzAlign,t.vertAlign,t._wrapText,t._formatId,t._font,t._fill,o,t._cellProptectProps))return i;var r=t.cloneAsNew(this.getIndexer(),null,null,null,null,null,null,o);return r._cellProptectProps=xt.deepCopy(t._cellProptectProps),this._items.push(r),r},e.prototype.createInstance=function(t,e,i,o,n,r,s){return void 0===i&&(i=!1),void 0===o&&(o=0),void 0===n&&(n=null),void 0===r&&(r=null),void 0===s&&(s=null),new hp(this,this.getIndexer(),t,e,i,o,n,r,s)},e.prototype.createFromCss=function(t,e,i,o,n,r,s){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===s&&(s=null);var a,l,u=e?this._borders.createFromCss(t):null,c=i?this._fonts.createFromCss(t):null,h=o?this._fills.createFromCss(t):null,p=t["text-align"];p&&("center"==p?a="center":"right"==p?a="right":"left"==p&&(a="left"));var d=t["vertical-align"];return d&&("top"==d?l="top":"bottom"==d&&(l="bottom")),this.create(a,l,n,r,c,h,u,s)},e.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var n=Ti.addChild(t,e,"xf");this._items[o].toXml(t,n)}Ti.setAttr(e,"count",i)},e}(ip),dp=function(){function t(t){this._numberFmts=[],this._fonts=new np(t),this._fills=new sp,this._lines=new lp,this._borders=new cp(this._lines),this._styles=new pp(this._fonts,this._fills,this._borders),this._fills.create("none"),this._fills.create("gray125"),this._borders.create(),this._fonts.create(),this._styles.create()}return t.prototype.dispose=function(){this._styles.dispose(),this._borders.dispose(),this._lines.dispose(),this._fills.dispose(),this._fonts.dispose()},t.prototype.addNumberFormat=function(e){var i=this._numberFmts.indexOf(e);return i<0&&(this._numberFmts.push(e),i=this._numberFmts.length-1),t.EXCEL_NUMFMT_START+i},t.prototype.addStyle=function(t,e,i,o,n,r){return t?this._styles.createFromCss(t,e,i,o,n,r):null},t.prototype.extendStyle=function(t,e,i,o,n){o=null==o?t._formatId:o;var r=this._styles.createFromCss(e,!0,!0,!0,i,o,n);return r._border=r._border||t._border,r._fill=r._fill||t._fill,r._font&&t._font?r._font.assignFrom(t._font):r._font=r._font||t._font,r._horzAlign=r._horzAlign||t._horzAlign,r._vertAlign=r._vertAlign||t._vertAlign,r._wrapText=null!=r._wrapText?r._wrapText:t._wrapText,r._formatId=null!=o&&null!=r._formatId?r._formatId:t._formatId,r._cellProptectProps=xt.deepCopy(n)||xt.deepCopy(t._cellProptectProps),this._styles.addStyle(r)},t.prototype.changeFormatId=function(t,e){return this._styles.changeFormatId(t,e)},t.prototype.changeBorder=function(t,e){return this._styles.changeBorder(t,e)},t.prototype.createPart=function(){var t='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></styleSheet>',e=Ti.parse(t),i=e.documentElement;if(this._numberFmts.length>0){var o=Ti.addChild(e,i,"numFmts");this._createNumberFormats(e,o)}var n=Ti.addChild(e,i,"fonts");this._createFonts(e,n);var r=Ti.addChild(e,i,"fills");this._createFills(e,r);var s=Ti.addChild(e,i,"borders");this._createBorders(e,s);var a=Ti.addChild(e,i,"cellStyleXfs");this._createDefXfs(e,a);var l=Ti.addChild(e,i,"cellXfs");return this._createStyles(e,l),t=Ti.toString(e),qh.XML_HEAD_STRING+t},t.prototype._createNumberFormats=function(e,i){for(var o=0,n=this._numberFmts.length;o<n;o++){var r=Ti.addChild(e,i,"numFmt");Ti.setAttr(r,"formatCode",this._numberFmts[o]),Ti.setAttr(r,"numFmtId",t.EXCEL_NUMFMT_START+o)}},t.prototype._createFonts=function(t,e){this._fonts.toXml(t,e)},t.prototype._createFills=function(t,e){this._fills.toXml(t,e)},t.prototype._createBorders=function(t,e){this._borders.toXml(t,e)},t.prototype._createDefXfs=function(t,e){var i=Ti.addChildWithAttr(t,e,"xf","count",1);Ti.setAttr(i,"borderId",0),Ti.setAttr(i,"fillId",0),Ti.setAttr(i,"fontId",0),Ti.setAttr(i,"numFmtId",0)},t.prototype._createStyles=function(t,e){this._styles.toXml(t,e)},t.EXCEL_NUMFMT_START=200,t}(),fp=function(t){function e(e,i,o,n,r){var s=t.call(this,e)||this;return s._hash=i,s._width=o,s._style=n,s._hidden=r,s}return n(e,t),e.prototype.dispose=function(){this._style=null,t.prototype.dispose.call(this)},e.prototype.equals=function(t){return this.id==t},e.prototype.toTextXml=function(t){var e=this.id+1,i={min:e,max:e,width:this._width,customWidth:"1"};this._style&&(i.style=this._style.id),this._hidden&&(i.hidden="1"),Yh.addChild(t,"col",i)},e}(ep),gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.createInstance=function(t,e,i,o){return new fp(this.getIndexer(),t,e,i,o)},Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),e.prototype.toTextXml=function(t){for(var e=Yh.addChild(t,"cols"),i=0,o=this.count;i<o;i++)this._items[i].toTextXml(e)},e.prototype.getWidth=function(t){for(var e=0;e<this._items.length;e++){var i=this._items[e];if(i._hash===t)return i._width}return-1},e}(ip),yp=function(){function t(t,e,i,o,n,r){void 0===n&&(n=""),this._range=qh.toRange(e,t),this._style=i,this._type=n,this._fomula=r,this._value=o}return t.prototype.dispose=function(){this._style=null},Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t},enumerable:!1,configurable:!0}),t.prototype.toXmlText=function(){var e=[];return e.push("<"+t.ELEMENT_NAME),e.push(' r="'.concat(this._range,'"')),""!=this._type&&e.push(' t="'.concat(this._type,'"')),this._style&&e.push(' s="'.concat(this._style.id,'"')),e.push(">"),this._fomula&&e.push("<f>".concat(this._fomula,"</f>")),null!=this._value&&e.push("<v>".concat(this._value,"</v>")),e.push("</"+t.ELEMENT_NAME+">"),e.join("")},t.ELEMENT_NAME="c",t}(),_p=function(){function e(t,e,i){this._row=0,this._sheet=t,this._book=t.workbook,this._index=e,this._height=i,this._cells=[]}return Object.defineProperty(e.prototype,"outLineLevel",{get:function(){return this._outlineLevel},set:function(t){this._outlineLevel=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){for(var t=this._cells.length;t--;)this._cells[t].dispose(),this._cells[t]=null;this._cells=null},e.prototype.toXmlText=function(){var t=[];t.push("<"+e.ELEMENT_NAME),t.push(' r="'.concat(this._index+1,'"')),this._height&&this._height>-1&&(t.push(' ht="'.concat(this._height,'"')),t.push(' customHeight="1"')),null!=this._outlineLevel&&t.push(' outlineLevel="'.concat(this._outlineLevel,'"')),t.push(">");for(var i=0,o=this._cells.length;i<o;i++){var n=this._cells[i];n&&t.push(n.toXmlText())}return t.push("</"+e.ELEMENT_NAME+">"),t.join("")},e.prototype.borrowCell=function(t,e,i,o,n){void 0===o&&(o="");var r=this._cells[t];r&&r.dispose(),r=new yp(this._index,t,e,i,o,n),this._cells[t]=r},e.prototype.addBlank=function(t,e){this.borrowCell(t,e)},e.prototype.addCell=function(t,e,i,o,n){this.borrowCell(t,o,i,e,n)},e.prototype.addText=function(t,e,i){var o=null!=e?String(e):"",n=this._book.addSharedString(o);this.addCell(t,"s",n,i)},e.prototype.addNumber=function(t,e,i,o){var n=isNaN(e)||null==e?"":String(e);this.addCell(t,"n",n,i,o)},e.prototype.addBool=function(t,e,i){this.addCell(t,"b",null==e?"":e?1:0,i)},e.prototype.addDate=function(t,e,i){if(e){var o=qh.toExcelDate(e);this.addNumber(t,o,i)}else this.addCell(t,"s","",i)},e.prototype.addLink=function(t,e,i,o){if(i&&""!=i){var n=document.createElement("div");n.innerText=n.textContent=i,i=n.innerHTML.replace(/(<br>|<br\/>)/gi,"&#13;&#10;"),n.innerText=n.textContent=e,i='HYPERLINK("'+i+((e=n.innerHTML.replace(/(<br>|<br\/>)/gi,"\r\n"))?'","'+e+'")':'")'),this.addCell(t,"str",e,o,i)}else this.addText(t,e,o)},e.prototype.addImage=function(e,i,o,n,r,s,a,l){if(r)return i&&n!==t.IconLocation.CENTER?this.addText(e,i,s):this.addBlank(e,s),this._sheet.addImage(e,this._index,o,this._height,n,r,a,l);i?this.addText(e,i,s):this.addBlank(e,s)},e.prototype.addSparkLine=function(t,e,i,o){var n=i.layout.firstColumn,r=this._sheet,s=this._index,a=r.borrowSparkGroup(n.index,i.sparkLineGroup),l=a.range.start,u=a.range.end-l+1,c=a.range.row;c=null==c?0:c;var h=a.sparkLines,p=r.name+"!"+qh.toRange(e+l,s+c,!0,u);h[qh.toRange(t,this._index)]=p,this.addBlank(t,o)},e.ELEMENT_NAME="row",e.LINE_REGEX=/\r|\n|\r\n/,e.BR_REGEX=/<br>|<br\/>/,e}(),mp=function(){function t(t,e,i,o){this._mergeCount=0,this._outlineLevel=0,this._dataRows=[],this._sparkGroups={},this._firstRow=-1,this._firstCol=-1,this._lastRow=-1,this._fixedCol=0,this._fixedRow=0,this._relation_indexer=1,this._mergeInfos={},this._book=t,this._index=e,this._name=i,this._attrs=o.sheetAttrs,this._protectPassword=o.protectPassword,this._protectProperties=o.protectProperties,this._sheetProtect=o.sheetProtect,this._columns=new gp,this._prepare()}return t.prototype.dispose=function(){this._txmerge=null,Yh.removeItem(this._txdoc),this._txdoc=null,this._columns=null,this.clearRows(),this._dataRows=null,this._borderEdges=null},Object.defineProperty(t.prototype,"id",{get:function(){return t.RELATION_ID+this._index},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this._columns.count},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowCount",{get:function(){return this._dataRows.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"workbook",{get:function(){return this._book},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"drawing",{get:function(){return this._drawing},enumerable:!1,configurable:!0}),t.prototype.setFirstRow=function(t){this._firstRow<0&&(this._firstRow=t)},t.prototype.setLastRow=function(t){this._lastRow=Math.max(this._lastRow,t)},t.prototype.setFirstCol=function(t){this._firstCol<0&&(this._firstCol=t)},t.prototype.clearRows=function(){for(var t=this._dataRows.length;t--;)this._dataRows[t].dispose(),this._dataRows[t]=null;this._dataRows=[]},t.prototype.addColumn=function(t,e,i,o){return this._columns.createUnique(t,e,i,o)},t.prototype.getColumnWidth=function(t){return this._columns.getWidth(t)},t.prototype.getMergeInfo=function(t,e){return this._mergeInfos["".concat(t,":").concat(e)]},t.prototype.addRow=function(t,e){return this._dataRows[t]=new _p(this,t,e)},t.prototype.getRow=function(t){return this._dataRows[t]},t.prototype.borrowRow=function(t,e){return this._dataRows[t]||this.addRow(t,e)},t.prototype.borrowSparkGroup=function(t,e){return this._sparkGroups[t]||(this._sparkGroups[t]=e),this._sparkGroups[t]},t.prototype.setRowLevel=function(t,e){if(e>=0){var i=this._dataRows[t];i&&(i.outLineLevel=e,this._outlineLevel=Math.max(e,this._outlineLevel))}},t.prototype.addMerge=function(t,e,i,o){if(i>1||o>1){var n=qh.toRange(e,t,!0,o,i);this._mergeInfos["".concat(t,":").concat(e)]={row:t,rows:i,col:e,cols:o,range:n}}},t.prototype.createPart=function(){var t=this._txdoc,e="A1:"+qh.toRange(this._columns.count-1,this._dataRows.length-1);Yh.addChild(t,"dimension",{ref:e}),this._outlineLevel>0&&Yh.addChild(t,"sheetFormatPtr",{outlineLevelRow:this._outlineLevel});var i=Yh.addChild(t,"sheetViews"),o={workbookViewId:0,showOutlineSymbols:"true"};this._attrs&&xt.extendObj(this._attrs,o),0==this._book.count&&(o.tabSelected=1);var n=Yh.addChild(i,"sheetView",o);(this._fixedCol>0||this._fixedRow>0)&&Yh.addChild(n,"pane",{xSplit:this._fixedCol,ySplit:this._fixedRow,topLeftCell:qh.toRange(this._fixedCol,this._fixedRow),activePane:"bottomRight",state:"frozen"}),this._columns&&this._columns.toTextXml(t);for(var r=Yh.addChild(t,"sheetData"),s=this._dataRows,a=this._borderEdges,l=0,u=s.length;l<u;l++){if(l==this._firstRow){for(var c=0,h=Math.max(0,this._firstCol);h<s[l]._cells.length;h++)(p=s[l]._cells[h])&&a&&(p.style=this._book.changeBorderId(p.style,a[c++?"top":"leftTop"]));for(h=s[l]._cells.length;h--;)if((p=s[l]._cells[h])&&a){p.style=this._book.changeBorderId(p.style,a.rightTop);break}}else if(l===this._lastRow){for(c=0,h=Math.max(0,this._firstCol);h<s[l]._cells.length;h++)(p=s[l]._cells[h])&&a&&(p.style=this._book.changeBorderId(p.style,a[c++?"bottom":"leftBottom"]));for(h=s[l]._cells.length;h--;)if((p=s[l]._cells[h])&&a){p.style=this._book.changeBorderId(p.style,a.rightBottom);break}}else if(l>this._firstRow&&l<this._lastRow){for(h=Math.max(0,this._firstCol);h<s[l]._cells.length;h++)if((p=s[l]._cells[h])&&a){p.style=this._book.changeBorderId(p.style,a.left);break}for(h=s[l]._cells.length;h--;){var p;if((p=s[l]._cells[h])&&a){p.style=this._book.changeBorderId(p.style,a.right);break}}}s[l]&&Yh.addText(r,s[l].toXmlText())}if(this._sheetProtect){var d=Yh.addChild(t,"sheetProtection");if(Yh.addProperty(d,"sheet","1"),this._protectPassword){var f=function(t){var e,i,o=0,n=function(t){for(var e=[],i=t.split(""),o=0;o<i.length;++o)e[o]=i[o].charCodeAt(0);return e}(t),r=n.length+1;i=r,(e="undefined"!=typeof Buffer?Buffer.alloc?Buffer.alloc(i):new Buffer(i):"undefined"!=typeof Uint8Array?new Uint8Array(i):new Array(i))[0]=n.length;for(var s=1;s<r;++s)e[s]=n[s-1];for(s=r-1;s>=0;--s)o=((0==(16384&o)?0:1)|o<<1&32767)^e[s];return(52811^o).toString(16).toUpperCase()}(this._protectPassword);Yh.addProperty(d,"password",f)}if(this._protectProperties){var g=this._protectProperties;Object.keys(g).forEach((function(t){Yh.addProperty(d,t,g[t])}))}}if(this._mergeCount=Object.keys(this._mergeInfos).length,this._mergeCount>0){for(var y in Yh.addProperty(this._txmerge,"count",this._mergeCount+""),this._mergeInfos)Yh.addChild(this._txmerge,"mergeCell",{ref:this._mergeInfos[y].range});Yh.addChildElement(this._txdoc,this._txmerge)}if(this._drawing&&Yh.addChild(t,"drawing",{"r:id":this._drawing.relationId}),Object.keys(this._sparkGroups).length>0){var _=Yh.addChild(t,"extLst"),m=Yh.addChild(_,"ext",{uri:"{05C60535-1F16-4fd2-B633-F4F36F0B64E0}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),v=Yh.addChild(m,"x14:sparklineGroups",{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"});for(var l in this._sparkGroups){var b=this._sparkGroups[l],C=b.colors,w=b.sparkLines,S=Yh.addChild(v,"x14:sparklineGroup",{type:b.type||"line"});C.colorSeries&&Yh.addChild(S,"x14:colorSeries",{rgb:C.colorSeries}),C.colorMarkers&&(Yh.addProperty(S,"markers","1"),Yh.addChild(S,"x14:colorMarkers",{rgb:C.colorMarkers})),C.colorFirst&&(Yh.addProperty(S,"first","1"),Yh.addChild(S,"x14:colorFirst",{rgb:C.colorFirst})),C.colorLast&&(Yh.addProperty(S,"last","1"),Yh.addChild(S,"x14:colorLast",{rgb:C.colorLast})),C.colorHigh&&(Yh.addProperty(S,"high","1"),Yh.addChild(S,"x14:colorHigh",{rgb:C.colorHigh})),C.colorLow&&(Yh.addProperty(S,"low","1"),Yh.addChild(S,"x14:colorLow",{rgb:C.colorLow}));var E=Yh.addChild(S,"x14:sparklines");for(var x in w){var O=Yh.addChild(E,"x14:sparkline");Yh.addChild(O,"xm:f",void 0,w[x]),Yh.addChild(O,"xm:sqref",void 0,x)}}}return qh.XML_HEAD_STRING+Yh.toString(t)},t.prototype.createBorderEdges=function(t){function e(e){var i={};return e.forEach((function(e){i["border-".concat(e,"-style")]=t["border-".concat(e,"-style")],i["border-".concat(e,"-color")]=t["border-".concat(e,"-color")],i["border-".concat(e,"-width")]=t["border-".concat(e,"-width")]})),this._book._styles._borders.createFromCss(i)||{}}t&&(this._borderEdges={leftTop:e.call(this,["left","top"]),top:e.call(this,["top"]),rightTop:e.call(this,["right","top"]),left:e.call(this,["left"]),right:e.call(this,["right"]),leftBottom:e.call(this,["left","bottom"]),bottom:e.call(this,["bottom"]),rightBottom:e.call(this,["right","bottom"])})},t.prototype.setFixedInfo=function(t,e){this._fixedRow=null==t?this._fixedRow:Math.max(this._fixedRow,t),this._fixedCol=null==e?this._fixedCol:Math.max(this._fixedCol,e)},t.prototype.addImage=function(t,e,i,o,n,r,s,a){void 0===this._drawing&&(this._drawing=this._book.createDrawing(this),this._drawing.rId=this._relation_indexer++);var l=this._book.addImage(r);return this._drawing.add(t,e,i,o,n,l,s,a)},t.prototype._prepare=function(){this._txdoc=Yh.createDocument("worksheet",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}),this._txmerge=Yh.createDocument("mergeCells")},t.RELATION_ID="rId",t}(),vp=function(){function t(t){this._sheet_indexer=3,this._drawing_indexer=1,this._parts={},this._parts={},this._strings=new Xh,this._images=new Jh,this._styles=new dp(t),this._downloader=new Uh,this._sheets=[],this._drawings=[],this._preapreTemplateParts()}return t.prototype.dispose=function(){this._parts={},this._strings.dispose(),this._strings=null,this._styles.dispose(),this._styles=null,this._drawings.forEach((function(t){t.dispose()})),this._drawings=null,this._sheets.forEach((function(t){t.dispose()})),this._sheets=null},Object.defineProperty(t.prototype,"currentSheet",{get:function(){return this._currentSheet},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._sheets?this._sheets.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this._styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"downloader",{get:function(){return this._downloader},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasDrawing",{get:function(){return this._drawing_indexer>1},enumerable:!1,configurable:!0}),t.prototype.createSheet=function(t,e){var i=new mp(this,this._sheet_indexer++,t||"Sheet"+(this._sheets.length+1),e);return this._sheets.push(i),this._currentSheet=i,i},t.prototype.createDrawing=function(t){var e=new tp(this,t,this._drawing_indexer++);return this._drawings.push(e),e},t.prototype.addSharedString=function(t){return this._strings.add(t)},t.prototype.addImage=function(t){return this._images.add(t)},t.prototype.getImageMap=function(){return this._images.getImageMap()},t.prototype.getExcelImage=function(t){return this._images.getImage(t)},t.prototype.getImageIndex=function(t){return this._images.getImageId(t)},t.prototype.addNumberFormat=function(t){return this._styles.addNumberFormat(t)},t.prototype.addStyle=function(t,e,i,o,n,r){if(null==n){var s=t.whiteSpace||t["white-space"];n=null!=s&&"none"!==s&&"nowrap"!==s}return this._styles.addStyle(t,e,i,o,n,r)},t.prototype.changeFormatId=function(t,e){return this._styles.changeFormatId(t,e)},t.prototype.changeBorderId=function(t,e){return this._styles.changeBorder(t,e)},t.prototype.extendStyle=function(t,e,i,o,n){return this._styles.extendStyle(t,e,i,o,n)},t.prototype.createParts=function(){var t=this._parts,e=Yh.createDocument("Types",{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"});if(Yh.addChild(e,"Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),Yh.addChild(e,"Default",{Extension:"xml",ContentType:"application/xml"}),Yh.addChild(e,"Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),Yh.addChild(e,"Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),Yh.addChild(e,"Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),Yh.addChild(e,"Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),Yh.addChild(e,"Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),this._drawings.length>0){for(var i=0;i<this._drawings.length;i++){var o="/xl/drawings/"+(d=this._drawings[i]).fileName;Yh.addChild(e,"Override",{PartName:o,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}var n=this.downloader.getContentTypes();Object.keys(n).forEach((function(t){Yh.addChild(e,"Default",{Extension:t,ContentType:n[t]})}))}var r=Yh.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"});Yh.addChild(r,"Relationship",{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}),Yh.addChild(r,"Relationship",{Id:"rId2",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"});var s=Yh.createDocument("workbook",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"});Yh.addChild(s,"workbookPr",{date1904:"false"});var a=Yh.addChild(s,"bookViews");Yh.addChild(a,"workbookView",{activeTab:"0"});for(var l=Yh.addChild(s,"sheets"),u=(i=0,this._sheets.length);i<u;i++){var c=this._sheets[i],h="worksheets/sheet"+(i+1).toString()+".xml",p="xl/"+h;if(t[p]=c.createPart(),e&&Yh.addChild(e,"Override",{PartName:"/"+p,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"}),l&&Yh.addChild(l,"sheet",{name:c.name||"Sheet"+(i+1).toString(),sheetId:(i+1).toString(),"r:id":c.id}),r&&Yh.addChild(r,"Relationship",{Id:c.id,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:h}),c.drawing){var d=c.drawing;t[p="xl/worksheets/_rels/sheet"+(i+1).toString()+".xml.rels"]=d.createSheetRel(),t[p="xl/drawings/_rels/"+d.fileName+".rels"]=d.createRel(),t[p="xl/drawings/"+d.fileName]=d.createPart()}}var f=qh.XML_HEAD_STRING;return t["[Content_Types].xml"]=f+Yh.toString(e),t["xl/workbook.xml"]=f+Yh.toString(s),t["xl/_rels/workbook.xml.rels"]=f+Yh.toString(r),t["xl/sharedStrings.xml"]=this._strings.createPart(),t["xl/styles.xml"]=this._styles.createPart(),t},t.prototype._preapreTemplateParts=function(){var t=this._parts,e=qh.XML_HEAD_STRING,i=(new Date).toISOString();t["_rels/.rels"]=e+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/></Relationships>',t["docProps/app.xml"]=e+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>RealGrid</Application><AppVersion>2.0</AppVersion></Properties>',t["docProps/core.xml"]=e+'<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dcterms:created xsi:type="dcterms:W3CDTF">'+i+"</dcterms:created><dc:creator>Wooritech</dc:creator></coreProperties>"},t}(),bp=function(e){function i(i,o){void 0===o&&(o=null);var n=e.call(this,null,i)||this;return n._groupSorting=!0,n._groupSortDirection=t.SortDirection.ASCENDING,n._groupSortCase=t.SortCase.SENSITIVE,n.source=n._rs=new Jn(!1),n._groupedProvider=new Yn(n._rs,!1),n._groupedProvider.footerCounter=o,n._summarizer=new ar(n._rs),n}return n(i,e),i.prototype._doDispose=function(){this.clearListener(),this._rs&&this._rs.dispose(),this._rs=null,this._groupedProvider&&this._groupedProvider.dispose(),this._groupedProvider=null,this._summarizer&&this._summarizer.dispose(),this._summarizer=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"maxRowCount",{get:function(){return this._rs.maxItemCount},set:function(t){this._rs.maxItemCount=Math.max(0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"inclusiveFiltering",{get:function(){return this._rs.isFilterOr},set:function(t){this._rs.isFilterOr=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{get:function(){return this._groupedProvider.summaryMode},set:function(t){this._groupedProvider.summaryMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterMode",{get:function(){return this._rs.filterMode},set:function(t){this._rs.filterMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"grouped",{get:function(){return this._groupedProvider.grouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergedGrouped",{get:function(){return this._groupedProvider.grouped&&this._groupedProvider.mergeMode},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupLevels",{get:function(){return this._groupedProvider.groupCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupByFieldCount",{get:function(){return this._groupedProvider.groupCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupByFields",{get:function(){return this._groupedProvider.groupedFields},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenGrouping",{set:function(t){this._groupedProvider.expandWhenGrouping=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._summarizer},enumerable:!1,configurable:!0}),i.prototype.canGrouping=function(t){return this.source.canGrouping(t)},i.prototype.getFieldDomain=function(t){return this._rs.getFieldDomain(t)},i.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},i.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},i.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},i.prototype.beginFiltering=function(){this._rs.beginFilter()},i.prototype.endFiltering=function(t,e){this._rs.endFilter(!0,t,e)},i.prototype.setHideDeletedRows=function(t){this._rs.hideDeleted=t},i.prototype.orderBy=function(e,i,o){if(this._groupedProvider.grouped&&this._groupSorting){for(var n=i?i.length:0,r=o?o.length:0,s=this._groupedProvider.groupedFields,a=this._rs.getSortDirections(),l=this._rs.getSortCases(),u=[],c=0,h=s.length;c<h;c++)u.push(s[c]);for(c=0,h=e.length;c<h;c++){var p=e[c],d=u.indexOf(p),f=void 0,g=void 0;f=n>c?i[c]:n>0?i[n-1]:t.SortDirection.ASCENDING,g=r>c?o[c]:r>0?o[r-1]:t.SortCase.SENSITIVE,d<0?(u.push(p),a[u.length-1]=f,l[u.length-1]=g):(a[d]=f,l[d]=g)}s=u,this._rs.orderBy(s,a,l)}else this._rs.orderBy(e,i,o)},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},i.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},i.prototype.groupBy=function(e,i,o,n){void 0===i&&(i=!0),void 0===o&&(o=t.SortDirection.ASCENDING),void 0===n&&(n=t.SortCase.SENSITIVE),(e&&!(e.length<1)||this._groupedProvider.grouped)&&this.source.canGrouping(e)&&(this._groupSorting=i,this._groupSortDirection=o,i&&this._rs.orderBy(e,[o],[n],!1),this.$_groupBy(e))},i.prototype.groupByMode=function(t,e){this._groupSorting&&this._rs.orderBy(t,[this._groupSortDirection],[this._groupSortCase],!1),this.source.canGrouping(t)&&this._groupedProvider.groupByMode(t,e)},i.prototype.$_groupBy=function(t,e){t&&t.length>0?(this.source=this._groupedProvider,this._groupedProvider.groupByMode(t,e)):(this._groupedProvider.groupByMode(t,e),this.source=this._rs)},i.prototype.addGroupBy=function(t,e,i){var o;if(this._groupedProvider.groupCount<1?o=[e]:(o=this._groupedProvider.groupedFields).splice(t,0,e),this._groupSorting=0===t?i:this._groupSorting,this.source.canGrouping(o)){if(this._groupSorting){var n=[this._groupSortDirection];this._rs.orderBy(o,n,null,!1)}this.$_groupBy(o)}},i.prototype.removeGroupBy=function(t,e){if(this._groupedProvider.grouped){for(var i=this._groupedProvider.groupedFields,o=-1,n=0,r=i.length-1;r>=0;r--)if(n++,i[r]==t){o=r;break}if(o>=0){if(i.splice(o,e?n:1),!this.source.canGrouping(i))return;this._groupSorting&&this._rs.orderBy(i,[this._groupSortDirection],null,!1),this.$_groupBy(i)}else{if(!this.source.canGrouping(null))return;this._groupSorting&&this._rs.orderBy(null,null,null,!1)}}},i.prototype.isGroupedField=function(t){return this._groupedProvider.isGroupedField(t)},i.prototype.getGroupLevel=function(t){return this._groupedProvider.getGroupLevel(t)},i.prototype.expand=function(t,e,i,o){this._groupedProvider.expand(t,e,i,o)},i.prototype.collapse=function(t,e,i,o){this._groupedProvider.collapse(t,e,i,o)},i.prototype.collapseAll=function(t){this._groupedProvider.collapseAll(t)},i.prototype.expandAll=function(t,e){this._groupedProvider.expandAll(t,e)},i.prototype.setPaging=function(t,e,i,o){this._rs.setPaging(t,e,i,o)},Object.defineProperty(i.prototype,"page",{get:function(){return this._rs.page},enumerable:!1,configurable:!0}),i.prototype.setPage=function(t,e){this._rs.setPage(t,e)},Object.defineProperty(i.prototype,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){this._rs.pageCount=t},enumerable:!1,configurable:!0}),i.prototype.getPageOfDataRow=function(t){return this._rs.getPageOfDataRow(t)},i.prototype.getDisplayItemIndex=function(t){return this._rs.isPaging?t.index+this._rs.pageStartIndex:t.index},i.prototype.getCheckedRows=function(t){return this._rs.getCheckedRows(t)},Object.defineProperty(i.prototype,"checkableExpression",{set:function(t){this._rs.checkableExpression=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{set:function(t){this._rs.checkableCallback=t},enumerable:!1,configurable:!0}),i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getFirstRow=function(){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getFirstRow():this._rs.getItem(0)},i.prototype.getLastRow=function(){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getLastRow():this._rs.getItem(this._rs.itemCount-1)},i.prototype.getPrevRow=function(t){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getPrevRow(t):t&&t.index>0?this._rs.getItem(t.index-1):this._rs.getItem(0)},i.prototype.getNextRow=function(t){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getNextRow(t):t&&t.index<this._rs.itemCount-1?this._rs.getItem(t.index+1):this._rs.getItem(0)},i.prototype.getGroupItem=function(t){if(this._groupedProvider.grouped)return this._groupedProvider.getGroupItem(t)},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rs.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemLength",{get:function(){return this._rs.itemLength},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleRowCount",{get:function(){return this.grouped?this._groupedProvider.visibleRowCount:this._rs.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._rs.sorted},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return!this.grouped&&this._rs.movable},enumerable:!1,configurable:!0}),i.prototype.getAllItems=function(){return this.source.getAllItems()},i.prototype.getPagingAllItems=function(){var t=this._rs;return t.isSorted?t._sortedItems.slice():t._items.slice()},i.prototype.findItem=function(t,e,i,o,n){return this._groupedProvider.findItem(t,e,i,o,n)},i.prototype.findCell=function(t,e,i,o,n,r){return this._groupedProvider.findCell(t,e,i,o,n,r)},i.prototype.checkItems=function(t,e,i){this.source.checkItems(t,e,i)},i.prototype.checkItem=function(t,e,i,o){this.source.checkItem(t,e,i,o)},i.prototype.checkAll=function(t,e,i,o,n){this.source.checkAll(t,e,i,o,n)},i.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},i.prototype.setItemChecked=function(t,e){return this._rs.setItemChecked(t,e)},i.prototype.getItemChecked=function(t,e){return this._rs.getItemChecked(t,e)},i.prototype.setGroupCheckable=function(t){this.grouped&&this._groupedProvider.setGroupCheckable(t)},i.prototype.getItemOfRow=function(t,e){return this._rs.getItemOfRow(t,e)},i.prototype.addCellStyle=function(t,e,i){return this._rs.addCellStyle(t,e,i)},i.prototype.removeCellStyle=function(t,e){return this._rs.removeCellStyle(t,e)},i.prototype.getUserCellStyle=function(t,e){return this._rs.getUserCellStyle(t,e)},i.prototype._doBeginUpdate=function(t){var i=e.prototype._doBeginUpdate.call(this,t);return this._groupedProvider.$_setEditItem(i),i},i.prototype._doBeginAppendDummy=function(){var t=e.prototype._doBeginAppendDummy.call(this);return this._groupedProvider.$_setDummyEditItem(t),t},i.prototype._doBeginAppend=function(t){var i=e.prototype._doBeginAppend.call(this,t);return this._groupedProvider.$_setEditItem(i),i},i.prototype._doBeginInsert=function(t,i,o,n){var r=e.prototype._doBeginInsert.call(this,t,i,o,n);return this._groupedProvider.$_setEditItem(r),r},i.prototype._doCancelDummyEdit=function(){e.prototype._doCancelDummyEdit.call(this),this._groupedProvider.$_setDummyEditItem(null)},i.prototype._doCancelEdit=function(t,i){e.prototype._doCancelEdit.call(this,t,i),this._groupedProvider.$_setEditItem(null)},i.prototype._doCommitEdit=function(t,i){return!!e.prototype._doCommitEdit.call(this,t,i)&&(this._groupedProvider.$_setEditItem(null),!0)},i.prototype.onGroupedItemProviderGrouping=function(t,e){return this.fireConfirmEvent(Yn.GROUPING,e)},i.prototype.onGroupedItemProviderGrouped=function(t){this.fireEvent(Yn.GROUPED)},i.prototype.onGroupedItemProviderExpand=function(t,e){return this.fireConfirmEvent(Yn.EXPAND,e)},i.prototype.onGroupedItemProviderExpanded=function(t,e){this.fireEvent(Yn.EXPANDED,e)},i.prototype.onGroupedItemProviderCollapse=function(t,e){return this.fireConfirmEvent(Yn.COLLAPSE,e)},i.prototype.onGroupedItemProviderCollapsed=function(t,e,i){this.fireEvent(Yn.COLLAPSED,e,i)},i.prototype.onItemProviderFiltered=function(t,e,i){this._fireFiltered(e,i)},i.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},i.prototype.onItemProviderSorted=function(t){this._fireSorted()},i}(Ao),Cp=function(t){function e(e,i,o){return void 0===o&&(o=null),t.call(this,e,i,o)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"cellView",{get:function(){return this.owner},enumerable:!1,configurable:!0}),e}(function(t){function e(e,i,o){void 0===o&&(o=null);var n=t.call(this,e,o)||this;return n._clickable=!1,n._owner=i,n}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return this._clickable},set:function(t){t!=this._clickable&&(this._clickable=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return""},e.prototype._doDraw=function(t){},e.prototype._hoverChanged=function(){this.invalidate()},e.prototype._changed=function(){this.invalidate()},e}(Ys)),wp=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype._doUpdateContent=function(t,e,i){i[xt.TextProp]=""},e.prototype._doRender=function(t){},e}(qa),Sp=function(t){function e(e,i){var o=t.call(this,e,null,i)||this;return o._cells=[],o._levels=0,o}return n(e,t),e.prototype._doDispose=function(){this._cells.forEach((function(t){t.dispose()})),this._cells=null,t.prototype._doDispose.call(this)},e.prototype.prepare=function(t){for(this._levels=t;this._cells.length<t;){var e=this.$_createCell();this._cells.push(e)}},e.prototype._doPrepareTableExtents=function(t){if(this._levels>0)for(var e=this.width/this._levels,i=0;i<this._levels;i++)this._cells[i].width=e},e.prototype._doPrepareTableRow=function(e,i,o,n){t.prototype._doPrepareTableRow.call(this,e,i,o,n),n.className=this.$_getRowClassName(i)},e.prototype._prepareCellContent=function(t,e){var i=wt(t);return t[S]=e+1,i.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=this._levels;this.childCount<e;)this.addChild(this._cells[this.childCount]);for(;this.childCount>e;)this.removeLast()},e.prototype._doRender=function(t){},e.prototype._getCellCount=function(t){return this._levels},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e}(Ka),Ep=function(t){function e(e){return t.call(this,e,"rowGroupHeadView")||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-rowgroup-head"},e.prototype._getTableRowHeight=function(t,e){var i=this.grid,o=[];return i.header.visible&&o.push(t.headBounds.height),i.filterPanel.visible&&o.push(t.filterPanelBounds.height),i.headerSummaries.visible&&o.push(t.sumBounds.height),o[e]||0},e.prototype.$_createCell=function(){return new wp(this.doc,"rowGroupHeadCellView")},e.prototype._getTableRowCount=function(t){var e=this.grid,i=0;return e.header.visible&&i++,e.filterPanel.visible&&i++,e.headerSummaries.isVisible()&&i++,i},e.prototype.$_getRowClassName=function(t){var e=this.grid,i=[];return e.header.visible&&i.push(""),e.filterPanel.visible&&i.push("rg-rowgroup-filter-panel"),e.headerSummaries.isVisible()&&i.push("rg-rowgroup-summary"),i[t]||""},e}(Sp),xp=function(t){function e(e){return t.call(this,e,"rowGroupFootView")||this}return n(e,t),e.prototype._getCssSelector=function(){return"rg-rowgroup-foot"},e.prototype._getTableRowHeight=function(t,e){return t.footBounds.height},e.prototype.$_createCell=function(){return new wp(this.doc,"rowGroupFootCellView")},e.prototype._getTableRowCount=function(t){return 1},e.prototype.$_getRowClassName=function(t){return"rg-rowgroup-foot-row"},e}(Sp),Op="rg-rowgroup-expander",Rp=Op+" rg-rowgroup-expander-expanded",Ip=Op+" rg-rowgroup-expander-collapsed",Tp=function(t){function e(e,i){var o=t.call(this,e,i,"rowGroupExpandHandle")||this;return o._expanded=!1,o.clickable=!0,o}return n(e,t),e.isExpander=function(t){var e=t.className;return e&&e.indexOf(Op)>=0},Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype._createDom=function(t){return t.createElement("span")},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.position="",e.style.display="inline-block"},e.prototype._getCssSelector=function(){return this._expanded?Rp:Ip},e.prototype._getCssDisplay=function(){return""},e.prototype._beforeDraw=function(t){this._setClassName(t)},e}(Cp),Pp=function(e){function i(t){var i=e.call(this,t,"rowGroupBarCell")||this;return i._level=0,i._expander=new Tp(t,i),i.addChild(i._expander),i}return n(i,e),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!1,configurable:!0}),i.prototype.updateCell=function(i,o,n){e.prototype.updateCell.call(this,i,o,n);var r,s=o.item,a=s.getAncestor(this.bar.l);if(a){var l=i.rowGroup;r=(a.expanded?l.expandedAdornments:l.collapsedAdornments)===t.RowGroupAdornments.SUMMARY}if(a&&(s instanceof xo&&s===a||a.getFirstVisibleItem(r)===s)&&a.level===this.bar.l){var u=this._expander._dom;n.appendChild(u),this._expander.setBounds(1,1,this.width-2,this.width-2),this._expander.expanded=a.expanded;var c=i.rowGroup.$_isExpanderVisible(a);this._expander.visible=!a.expanded||null==c||c,u[b]=s.index}else this._expander.visible=!1;n.style.paddingTop="2px"},i.prototype.validate=function(){e.prototype.validate.call(this);var t=this._expander._dom;xt.detach(t)},i}(qa),Dp=function(e){function i(t){var i=e.call(this,t,null,"rowGroupBarContainer")||this;return i._cells=[],i._levels=0,i._bars=[],i}return n(i,e),i.prototype._doDispose=function(){this._cells=null,e.prototype._doDispose.call(this)},i.prototype.prepare=function(t,e){this._levels=e},i.prototype.getLevelIndent=function(t){return t*this.width/this._levels},i.prototype.getViewOf=function(t){for(var e=this.getChildren(),i=0,o=e.length;i<o;i++){var n=e[i];if(n._expander._dom===t)return n}},i.prototype._getCssSelector=function(){return"rg-rowgroup-bar"},i.prototype._prepareCellContent=function(t,e){return wt(t).createElement("div")},i.prototype._doLayoutContent=function(t){for(var e,i=t.grid,o=i.rowGroup,n=this.width/this._levels,r=this._bars,s=r.length,a=t.topIndex,l=t.fixedItemCount,u=l>0;this.childCount<s;)e=this._cells.length>0?this._cells.pop():this._createCell(),this.addChild(e);for(;this.childCount>s;)(e=this.removeLast()).validate(),this._cells.push(e);for(var c=0;c<s;c++){var h=r[c];e=this.getChild(c);var p=h.tr1,d=u?p<l?p:p-1+a:p+a,f=hs.temp(i,d),g=o.getBarCell(f),y=t.getTableItemBounds(h.r);e.bar=h,e.level=h.c+1,e.updateCell(i,g,this.getCellContent(p,h.c)),y.x=n*h.c,y.width=n,e.setRect(y)}},i.prototype._doRender=function(t){},i.prototype._doPrepareTableRows=function(t,i){e.prototype._doPrepareTableRows.call(this,t,i),this.$_layoutBarCells(t,i)},i.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount>0&&e>t.fixedItemCount?1:0;return t.getTableItemHeight(e-i)},i.prototype._getCellCount=function(t){return this._levels},i.prototype._getCellWidth=function(t,e){return this.width/this._levels},i.prototype._createCell=function(){return new Pp(this.doc)},i.prototype.$_calcLevels=function(t,e,i,o){for(var n,r=[],s=1,a=0,l=0;l<o-i;l++){var u=t[l+i].getAncestor(e);r.push(-1),u&&n===u||(r[a]=s,n=u,a=r.length-1,s=0),s++}return r[a]=s,r},i.prototype.$_layoutBarCells=function(e,i){var o=e.$_getItems(),n=o.length,r=e.fixedItemCount,s=i.children,a=this._bars=[];if(!(n<1)){for(var l=0,u=this._getCellCount(e);l<u;l++){var c=l+1,h=0,p=0;if(r>0){for(var d=void 0,f=void 0;h<r;h++,p++)(f=(d=s[p]).children[l]).style.display="",f.removeAttribute("rowspan"),xt.setClassName(f,""),0===l&&xt.setClassName(d,""),f[b]=h;d=s[p++],0===l&&xt.setClassName(d,Ga.ROW_BAR_STYLE),(f=d.children[l]).style.display="",f.removeAttribute("rowspan"),xt.setClassName(f,Ga.ROW_BAR_CELL_STYLE)}if(h<n)for(var g=this.$_calcLevels(o,c,h,n),y=0;h<n;h++,y++,p++){var _=g[y],m=(f=(d=s[p]).children[l],o[h]),v=m.getAncestor(c);if(0===l&&xt.setClassName(d,""),f.removeAttribute("rowspan"),_>0){var C=this.grid.rowGroup,w=v&&(v.expanded?C.expandedAdornments:C.collapsedAdornments)===t.RowGroupAdornments.SUMMARY,S=1===_&&v&&(m instanceof xo||v.getFirstVisibleItem(w)===m);(_>1||S)&&(a.push({r:h,tr1:p,tr2:p+_-1,c:l,l:c}),f.rowSpan=_),f.style.display="",xt.setClassName(f,"rg-rowgroup-bar-cell rg-rowgroup-bar-level-"+String(c)),f[b]=m.index}else f.style.display="none",xt.setClassName(f,"")}}a.sort((function(t,e){return t.r-e.r}))}},i}(Ya),kp=function(t){function e(e){var i=t.call(this,e,"rowGroupBarPane")||this;return i._barContainer=new Dp(e),i.addChild(i._barContainer),i._footView=new xp(e),i.addChild(i._footView),i._headView=new Ep(e),i.addChild(i._headView),i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"levelCount",{get:function(){return this.grid.layoutManager.rowGroupLevels},enumerable:!1,configurable:!0}),e.prototype.getLevelIndent=function(t){return this._barContainer.getLevelIndent(t)},e.prototype._doMeasure=function(t,e,i){var o=this.levelCount;return this._headView.prepare(o),this._footView.prepare(o),this._barContainer.prepare(t,o),new Ha(this.levelCount*t.rowGroup.levelIndent,i)},e.prototype._doLayoutContent=function(t){var e=this.grid,i=t.headBounds;if(this._headView.visible=e.header.visible||e.headerSummaries.isVisible()||e.filterPanel.visible){var o=0;e.header.visible&&(o+=i.height),e.headerSummaries.isVisible()&&(o+=t.summaryBounds.height),e.filterPanel.visible&&(o+=t.filterPanelBounds.height),this._headView.setBounds(0,i.y,this.width,o),this._headView.layoutContent(t)}i=t.footBounds,(this._footView.visible=e.footers.isVisible())&&(this._footView.setBounds(0,i.y,this.width,i.height),this._footView.layoutContent(t)),i=t.rowBarBounds,this._barContainer.setBounds(0,i.y,this.width,i.height),this._barContainer.layoutContent(t)},e.prototype._getCssSelector=function(){return"rg-rowgroup-bar-container"},e}(gu);!function(t){function e(e){return t.call(this,e,"rowGroupPane")||this}n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)}}(gu);var Ap=function(t){function e(e){var i=t.call(this,e,"rowGroupHeaderCellView")||this;return i._indent=0,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"indent",{get:function(){return this._indent},set:function(t){this._indent=Math.max(0,t)},enumerable:!1,configurable:!0}),e.prototype._createDom=function(t){return t.createElement("div")},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=e.style;i.top="50%",i.msTransform=i.transform="translate(0px, -50%)",i.setProperty("overflow","hidden","important"),i.setProperty("pointer-events","none","important")},e.prototype._beforeDraw=function(t){},e.prototype._doUpdateContent=function(t,e,i){i[xt.TextProp]=e.text,i.style.left=this._indent>0?this._indent+"px":""},e}(qa),Lp=function(t){function e(e){var i=t.call(this,e,"rowGroupHeaderView")||this;return i._cellView=new Ap(e),i.addChild(i._cellView),i}return n(e,t),e.prototype._doDispose=function(){this._item=null,this._cellView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._item.index},enumerable:!1,configurable:!0}),e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.setProperty("overflow","hidden","important")},e.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},e.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup;this._cellView.indent=i.indentVisible?0:e.groupBarPane.getLevelIndent(this._item.level-1),this._cellView.updateCell(e,i.getHeaderCell(this._item),this._cellView._dom)},e}($a),Mp=function(t){function e(e){return t.call(this,e,"rowGroupRightHeaderView")||this}return n(e,t),e.prototype._doDispose=function(){this._item=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},e}($a),Fp=function(t){function e(e){return t.call(this,e,"rowGroupFooterView")||this}return n(e,t),e.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup,o=t.cellLayouts._dataCells.length,n=this._getFirstCell(t),r=this._getStartCell(t)-n,s=r,a=this._getEndCell(t)-n,l=this._item instanceof Wn;l&&(s=Math.max(r,this._item.parent.level-n)),this.$_refreshSpans(this._item.index,this._item.$_footerIndex,o,s,a),s=0;for(var u=0;u<o;u++){var c=this._getTableRow(t,this._domIndex+u),h=this._getBodyCells(this._domIndex+u),p=i.getFooterStyleName(this._item);c.className=p;for(var d=s;d<=a;d++){var f=h[d],g=f.layout;if(!(l&&f.merged&&f.head&&f===f.head))if(e.isRecycleMode()&&c.recycle);else if(f.clearExpander(),f.clearButtons(),f.renderer2&&f.renderer2.clearContent(),f.visible)if(g.isNull)g.isProxy||f.setClassName(lh.FOOTER_CELL_STYLE);else{var y=hs.temp(e,this._item.index,g),_=i.getFooterCell(y);this._updateCell(e,i,_,f)}}}},e.prototype._getBodyCells=function(t){return this.parent.$_getBodyCells(t)},e.prototype._getTableRow=function(t,e){return this.parent.$_getTableRow(t,e)},e.prototype._getTableCell=function(t){return this.parent.$_getTableCell(this._domIndex,t)},e.prototype._getFirstCell=function(t){return t._firstCell},e.prototype._getLastCell=function(t){return t._lastCell},e.prototype._getStartCell=function(t){return t.getStartCell(!1)},e.prototype._getEndCell=function(t){return t.getEndCell(!1)},e.prototype._getBodyView=function(){return this.parent._bodyView},e.prototype._updateCell=function(t,e,i,o){var n=i.dataColumn.groupFooters.get(i.footerIndex),r=e.getFooterCellStyle(i,o.style.clear()),s=i.getSummary(),a=o.cell.firstElementChild;if(o.setClassName(r.styleName),xt.setClassName(a,lh.FOOTER_CELL_RENDERER),o.refreshFormatters(r),e.getFooterCellFormatters(n,o),s){var l=i.getTemplate(o);void 0===l?a[xt.TextProp]=i.getDisplayText(o):a.innerHTML=l}else a[xt.TextProp]=""},e.prototype.$_refreshSpans=function(t,e,i,o,n){for(var r=this.grid.layoutManager._tableRowPoints,s=0;s<i;s++)for(var a=this._getBodyCells(this._domIndex+s),l=o;l<=n;l++){var u=a[l],c=u.layout,h=c.parent,p=h&&h.vertical;if(u.spanned);else if(c.isProxy)u.clear(!1);else{var d=0,f=0,g=c.getGroupFooterUserSpan(this._item.parent,e),y=g?0:c.getGroupFooterSpan(t,e)-1;if(g){var _=this._item,m=(_.parent.footerCount-_.vindex)*i,v=g.footerCount||0,b=v>0?v*i:g.rowspan||1,C=g.colspan||1;b=Math.min(b,m),u.set(C,b,!0);for(var w=0;w<b;w++)for(var S=this._getBodyCells(this._domIndex+w+s),E=0;E<C;E++){var x=S&&S[E+l];x&&x!==u&&x.span(u)}}else if(y>0){var O=0,R=c.vindex+1;if(p)for(;O++<y&&O<i;)f+=(I=h.getVisible(R++))._dspan,this._getBodyCells(this._domIndex+s+1)[l].span(u);else for(;O++<y&&l-o+O<a.length&&R<h.visibleCount;){var I;if(!(I=h.getVisible(R++)))break;d+=I._cspan,a[l+O].span(u)}}c.isNull&&u.clear(!0),!g&&u.set(c._cspan+d,c._dspan+f,!0),u.rowSpan>1&&(u.height=r[u.rowIndex+u.rowSpan]-r[u.rowIndex],u.cell.firstElementChild.style.maxHeight=u.height-2+"px")}}},e}(nl),Np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getBodyCells=function(t){return this.parent.$_getFixedBodyCells(t)},e.prototype._getTableRow=function(t,e){return this.parent.$_getFixedTableRow(e)},e.prototype._getTableCell=function(t){return this.parent.$_getFixedTableCell(this._domIndex,t)},e.prototype._getBodyView=function(){return this.parent._fixedView},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e}(Fp),Vp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getBodyCells=function(t){return this.parent.$_getRightBodyCells(t)},e.prototype._getTableRow=function(t,e){return this.parent.$_getRightTableRow(e)},e.prototype._getTableCell=function(t){return this.parent.$_getRightTableCell(this._domIndex,t)},e.prototype._getBodyView=function(){return this.parent._rightView},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e}(Fp),Bp=function(e){function i(t,i){var o=e.call(this,t,i||"rowGroupLayer")||this;return o._headerPool=[],o._headerViews=[],o._rightHeaderPool=[],o._rightHeaderViews=[],o._footerPool=[],o._footerViews=[],o._fixedFooterPool=[],o._fixedFooterViews=[],o._rightFooterPool=[],o._rightFooterViews=[],o._indents=[],o}return n(i,e),i.prototype._doDispose=function(){this._bodyView=this._fixedView=this._rightView=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this.getAncestor($p)},enumerable:!1,configurable:!0}),i.prototype.layout=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},i.prototype.getHeaderView=function(t){for(var e=0,i=this._headerViews;e<i.length;e++){var o=i[e];if(o.item===t)return o}},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t);var i=t.style;i.setProperty("overflow","hidden","important"),i.setProperty("pointer-events","none","important")},i.prototype._getCssSelector=function(){return"rg-rowgroup-layer"},i.prototype._doDraw=function(t){},i.prototype._doPrepareContent=function(t){this.$_prepareHeaders(t)},i.prototype.$_prepareIndents=function(t){for(var e=this._indents=[],i=t.rowGroupLevels+1,o=0;o<i;o++)e[o]=t.getLevelIndent(o);return e},i.prototype._doLayoutContent=function(e){var i,o=this.$_prepareIndents(e),n=e.$_getItems(),r=n.length,s=e.fixedItemCount,a=s>0,l=this._rightView,u=e.contentBounds.right-e.sideContentBounds.x,c=0,h=0,p=e.trs,d=s,f=a?d*p+1:d*p;for(l&&(i=e.rightContentBounds.clone(),u=Math.min(u,this.width-i.width),i.x-=this.x,i.leftBy(e.rightBarWidth));d<r;d++){var g=n[d];if(g instanceof xo){var y=this._headerViews[c],_=e.getTableItemBounds(d),m=o[g.level];if(y.item=g,y.setBounds(m,_.y,u-m,_.height),y.layoutContent(e),l){var v=this._rightHeaderViews[c];v.item=g,v.setBounds(i.x,_.y,i.width,_.height),v.layoutContent(e)}c++,f++}else if(g instanceof Oo){var b=this.grid,C=b.displayOptions.refreshMode;!b._needRefresh&&b._horzScrolled&&C!==t.RefreshMode.VISIBLE_ONLY||(this._fixedView&&((y=this._fixedFooterViews[h]).updateItem(g,f,p,!0),y.layoutContent(e)),this._rightView&&((y=this._rightFooterViews[h]).updateItem(g,f,p,!0),y.layoutContent(e)),this._bodyView&&(y=this._footerViews[h++],xt.isDebugging(),y.updateItem(g,f,p,!0),y.layoutContent(e))),f+=p}else f+=p}},i.prototype.$_prepareHeaders=function(t){for(var e=t.$_getItems(),i=0,o=t.fixedItemCount,n=e.length;o<n;o++)e[o]instanceof xo&&i++;for(var r=this._headerPool,s=this._headerViews;s.length<i;)(a=r.pop())||(a=new Lp(this.doc)),this.addChild(a),s.push(a);for(;s.length>i;){var a=s.pop();this.removeChild(a),r.push(a)}var l=this._rightHeaderPool,u=this._rightHeaderViews;if(this._rightView){for(;u.length<i;)(a=l.pop())||(a=new Mp(this.doc)),this.addChild(a),u.push(a);for(;u.length>i;)a=u.pop(),this.removeChild(a),l.push(a)}else for(;u.length>0;)a=u.pop(),this.removeChild(a),l.push(a)},i.prototype.$_prepareGroupItems=function(t,e,i,o){this._bodyView=e,this._fixedView=i,this._rightView=o},i.prototype.$_prepareGroupFooters=function(t,e){for(var i=0,o=e.fixedItemCount,n=t.length;o<n;o++)t[o]instanceof Oo&&i++;for(;this._footerViews.length<i;)(r=this._footerPool.pop())||(r=new Fp(this.doc)),this.addChild(r),this._footerViews.push(r);for(;this._footerViews.length>i;){var r=this._footerViews.pop();this.removeChild(r),this._footerPool.push(r)}if(this._fixedView){for(;this._fixedFooterViews.length<i;)(r=this._fixedFooterPool.pop())||(r=new Np(this.doc)),this.addChild(r),this._fixedFooterViews.push(r);for(;this._fixedFooterViews.length>i;)r=this._fixedFooterViews.pop(),this.removeChild(r),this._fixedFooterPool.push(r)}else for(;this._fixedFooterViews.length>0;)r=this._fixedFooterViews.pop(),this.removeChild(r),this._fixedFooterPool.push(r);if(this._rightView){for(;this._rightFooterViews.length<i;)(r=this._rightFooterPool.pop())||(r=new Vp(this.doc)),this.addChild(r),this._rightFooterViews.push(r);for(;this._rightFooterViews.length>i;)r=this._rightFooterViews.pop(),this.removeChild(r),this._rightFooterPool.push(r)}else for(;this._rightFooterViews.length>0;)r=this._rightFooterViews.pop(),this.removeChild(r),this._rightFooterPool.push(r)},i.prototype.$_getTableRow=function(t,e){return this._bodyView._tbody.children[e]},i.prototype.$_getTableCell=function(t,e){return this._bodyView._tbody.children[t].children[e]},i.prototype.$_getFixedTableRow=function(t){return this._fixedView._tbody.children[t]},i.prototype.$_getFixedTableCell=function(t,e){return this._fixedView._tbody.children[t].children[e]},i.prototype.$_getRightTableRow=function(t){return this._rightView._tbody.children[t]},i.prototype.$_getRightTableCell=function(t,e){return this._rightView._tbody.children[t].children[e]},i.prototype.$_getBodyCells=function(t){return this._bodyView._cells[t]},i.prototype.$_getFixedBodyCells=function(t){return this._fixedView._cells[t]},i.prototype.$_getRightBodyCells=function(t){return this._rightView._cells[t]},i}(qs),Gp=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i._prompt="        .",i._expandWhenGrouping=!0,i._summarizing=!0,i._commitBeforeGrouping=!0,i._commitBeforeExpand=!0,i._commitBeforeCollapse=!0,i._fixMergedColumns=!0,i._toast=new hu({visible:!1,message:"Grouping..."}),i._headerClickable=!1,i}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prompt",{get:function(){return this._prompt},set:function(t){t!=this._prompt&&(this._prompt=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"summarizing",{get:function(){return this._summarizing},set:function(t){t!=this._summarizing&&(this._summarizing=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeGrouping",{get:function(){return this._commitBeforeGrouping},set:function(t){this._commitBeforeGrouping=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeExpand",{get:function(){return this._commitBeforeExpand},set:function(t){this._commitBeforeExpand=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeCollapse",{get:function(){return this._commitBeforeCollapse},set:function(t){this._commitBeforeCollapse=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixMergedColumns",{get:function(){return this._fixMergedColumns},set:function(t){this._fixMergedColumns=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerClickable",{get:function(){return this._headerClickable},set:function(t){this._headerClickable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toast",{get:function(){return this._toast},enumerable:!1,configurable:!0}),e.prototype._changed=function(){this.grid._groupingOptionsChanged(this),this._layoutOwner()},e}(Ba),jp=function(t){function e(e){var i=t.call(this,e)||this;return i._field=-1,i._text="",i._textWidth=0,i._textHeight=0,i._closeHeight=0,i._padHorz=5,i._padVert=4,i._itemGap=8,i}return n(e,t),e.prototype._doDispose=function(){xt.detach(this._textView),xt.detach(this._closeView),this._textView=this._closeView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"field",{get:function(){return this._field},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},enumerable:!1,configurable:!0}),e.prototype.setColumn=function(t){this._field=t.dataIndex,this._textView[xt.TextProp]=this._text=t.displayText},e.prototype.isCloseButton=function(t){return t===this._closeView},e.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=wt(e);this._textView=i.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",e.appendChild(this._textView),this._closeView=i.createElement("span"),this._closeView.className="rg-group-panel-item-close",e.appendChild(this._closeView)},e.prototype._doMeasure=function(t,e,i){var o=(this._textWidth=this._textView.offsetWidth)+this._itemGap+this._closeView.offsetWidth+2*this._padHorz,n=this._textHeight=this._textView.offsetHeight;return n=Math.max(n,this._closeHeight=this._closeView.offsetHeight),n+=2*this._padVert,new Ha(o,n)},e.prototype._doLayoutContent=function(t){},e.prototype._doDraw=function(t){var e=this._dom.clientHeight;this._textView.style.left=this._padHorz+"px",this._textView.style.top=Math.floor((e-this._textHeight)/2)+"px",this._closeView.style.left=this._padHorz+this._textWidth+this._itemGap+"px",this._closeView.style.top=Math.floor((e-this._closeHeight)/2)+"px"},e}($a),Hp=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._minHeight=0,o._itemViews=[],o._count=0,o._padHorz=16,o._padVert=10,o._itemGap=20,o.visible=!1,o}return n(e,t),e.prototype._doDispose=function(){this._itemViews&&this._itemViews.forEach((function(t,e){t.dispose()})),this._itemViews=null,xt.detach(this._messageView),this._messageView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){this._minHeight!==t&&(this._minHeight=t,this._doSizeChanged())},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-group-panel"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=wt(e);e.style.overflow="hidden";var o=this._messageView=i.createElement("span");o.className="rg-group-panel-message",e.appendChild(o)},e.prototype._doMeasure=function(t,e,i){var o=t.groupingOptions;this._count=t.rowGroupLevels;var n=this.minHeight,r=0,s=this._messageView.style;if(this._count>0?s.display="none":(s.display="",this._messageView[xt.TextProp]=o.prompt,r=this._messageView.offsetHeight,n=Math.max(n,r+2*this._padVert),s.left=this._padHorz+"px",s.top=(n-r)/2+"px"),this.$_prepareItemViews(t,this._count),this._count>0){for(var a=0;a<this._count;a++){var l=(u=this._itemViews[a]).measure(t,e,i);u.width=l.width,r=Math.max(r,l.height)}for(n=Math.max(n,r+2*this._padVert),a=0;a<this._count;a++){var u;(u=this._itemViews[a]).height=r,u.y=(n-r)/2}}return new Ha(e,n)},e.prototype._doPrepareContent=function(t){},e.prototype._doLayoutContent=function(t){if(this._count>0){var e=this._padHorz;this._padVert;for(var i=0;i<this._count;i++){var o=this._itemViews[i];o.x=e,e+=this._itemGap+o.width}}},e.prototype._doDraw=function(t){},e.prototype._visibleChanged=function(){var t=this.grid;t&&(t.invalidateLayout(),t.invalidatePosition())},e.prototype._doSizeChanged=function(){var t=this.grid;this.invalidate(!0),t&&(t.invalidateLayout(),t.invalidatePosition())},e.prototype.$_prepareItemViews=function(t,e){for(var i=this._itemViews,o=t.rowGroupFields,n=i.length;n<e;n++)i.push(new jp(t.doc));for(n=0;n<e;n++){var r=i[n];r.setColumn(t.$_getVisibleRootByField(o[n],!0)),r.visible=!0,this.addChild(r)}for(n=e;n<i.length;n++)this.removeChild(i[n])},e}(Wa),$p=function(e){function i(t,i,o){var n=e.call(this,t,i,o)||this;n._rowGroupSummaryRuntime=new ms,n._addGridObject(n._rowGroup=new lh(n)),n._rs=n._createItemSource(),n.itemSource=n._rs,n._groupingOptions=new Gp(n),n._groupingOptionsChanged(n._groupingOptions),n._groupPanelView=new Hp(n.doc,n.rowGroup),n.topContentPane.addChild(n._groupPanelView);for(var r=[n._groupBarPane._headView,n._groupBarPane._footView,n._groupBarPane._barContainer],s=r.length-1;s>=0;s--){var a=r[s];n._tableViews[a.$_hash]=a}return n}return n(i,e),i.prototype._doDispose=function(){this._rs.dispose(),this._rs=null,this._groupPanelView=this.groupPanelView.dispose(),this._rowGroup=this._rowGroup&&this._rowGroup.dispose(),this._groupingOptions=this._groupingOptions.dispose(),e.prototype._doDispose.call(this)},i.prototype._doCreateOtherElements=function(){this._groupView=new Bp(this.doc),this.addElement(this._groupView)},Object.defineProperty(i.prototype,"maxRowCount",{get:function(){return this._rs.maxRowCount},set:function(t){this._rs.maxRowCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroup",{get:function(){return this._rowGroup},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupPanelView",{get:function(){return this._groupPanelView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupBarPane",{get:function(){return this._groupBarPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupView",{get:function(){return this._groupView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupingOptions",{get:function(){return this._groupingOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"paged",{get:function(){return this._rs.page>=0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"page",{get:function(){return this._rs.page},set:function(t){this.setPage(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){var e=this._rs.pageCount;this._rs.pageCount=t,this._rs.pageCount!=e&&this.$_firePageCountChanged(this._rs.pageCount)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupLevels",{get:function(){return this._rs.groupLevels},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupFields",{get:function(){return this._rs.groupByFields},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGrouped",{get:function(){return this._rs.grouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergedRowGrouped",{get:function(){return this._rs.mergedGrouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupSummaryRuntime",{get:function(){return this._rowGroupSummaryRuntime},enumerable:!1,configurable:!0}),i.prototype.isTree=function(){return!1},i.prototype.recursiveDeleting=function(){return!1},i.prototype._beforeChangeLayout=function(){this.ungroupBy()},i.prototype.isGrouped=function(t){return t&&t.groupLevel>0},i.prototype.isGroupedField=function(t){return this._rs.isGroupedField(t)},i.prototype.isSortByLabelColumn=function(t){return this.columnByField(t).sortByLabel},i.prototype.getGroupLevel=function(t){return this._rs.getGroupLevel(t)},i.prototype.groupByFieldNames=function(e,i,o){void 0===o&&(o=t.SortDirection.ASCENDING);var n=this.dataSource;if(n&&e&&e.length>0){for(var r=[],s=0;s<e.length;s++){var a=e[s],l=n.getFieldIndex(a),u=this.columnByField(a),c=u&&this.layoutByColumn(u);!c||this.rowGroup.mergeMode&&c.parent!=this.activeCellLayout._root||l>=0&&r.push(l)}r.length>0&&(i=void 0===i?this.rowGroup.sorting:i,this.groupBy(r,i,o))}else this.ungroupBy()},i.prototype.groupBy=function(t,e,i){this.isItemEditing(null)||this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doGroupBy(t,e,i)}.bind(this))},i.prototype.clearGroupBy=function(){this.isItemEditing(null)||(this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,t.SortDirection.ASCENDING),this.$_doRowGroupFooterMergeChanged(),this.$_clearColumnMergeGrouped())},i.prototype.ungroupBy=function(){this.clearGroupBy()},i.prototype.addGroupBy=function(t,e){var i=this;e&&(this.isItemEditing(null)||this.isGrouped(e)||e.layout&&e.layout.visible&&(!e.layout.isRoot&&this.rowGroup.mergeMode||e.dataIndex>=0&&this.toastManager.show(this.groupingOptions.toast,!0,(function(){i.editController.remainFocusing(!0),i.$_doAddGroupBy(t,e)}))))},i.prototype.removeGroupByField=function(t){t<0||this.isItemEditing(null)||!this.isGroupedField(t)||(this._rs.removeGroupBy(t,!1),this.$_doRowGroupFooterMergeChanged(),this.editController.remainFocusing(!0))},i.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},i.prototype.expandAll=function(t,e){this.isItemEditing(null)||this._rs.expandAll(t,e)},i.prototype.collapse=function(t,e,i,o){this.isItemEditing(null)||this._rs.collapse(t,e,i,o)},i.prototype.collapseAll=function(t){this.isItemEditing(null)||this._rs.collapseAll(t)},i.prototype.isGroupedColumn=function(t){return t&&t.dataIndex>=0&&this._rs.isGroupedField(t.dataIndex)},i.prototype.getSortFields=function(){return this.itemSource.getSortFields()},i.prototype.getSortDirections=function(){return this.itemSource.getSortDirections()},i.prototype.getSortCases=function(){return this.itemSource.getSortCases()},i.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._rs.setPaging(t,e,i,null)},i.prototype.setPage=function(t,e){if(void 0===e&&(e=-1),(t=Math.max(0,Math.min(t,this._rs.pageCount-1)))!=this._rs.page){var i=!1;this.$_firePageChanging(t)&&(this._rs.setPage(t,e),i=!0),i&&this.$_firePageChanged(this._rs.page)}},i.prototype.getPageOfDataRow=function(t){return this._rs.getPageOfDataRow(t)},Object.defineProperty(i.prototype,"isLayer",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._rs.summarizer},enumerable:!1,configurable:!0}),i.prototype._createSidePane=function(){return this._groupBarPane=new kp(this.doc)},i.prototype.isSidePaneVisible=function(){return this.rowGrouped&&!this.mergedRowGrouped&&this._rowGroup.indentVisible},i.prototype._createLayoutManager=function(){return new Wp(this)},i.prototype.canGrouping=function(){return this._groupPanelView.visible},i.prototype._canMerge=function(){return this.dataCount>0},Object.defineProperty(i.prototype,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._rs.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._rs.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._rs.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._rs.redoing},enumerable:!1,configurable:!0}),i.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},i.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},i.prototype.execute=function(t){this._rs.execute(t)},i.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},i.prototype.getRowView=function(t,i){return i instanceof xo?this._groupView.getHeaderView(i):e.prototype.getRowView.call(this,t,i)},i.prototype._doSortItems=function(t,e,i){var o=this.itemSource;o.setLabelComparer(this._doPrepareComparer(t)),o.orderBy(t,e,i)},i.prototype._doColumnFiltersChanged=function(t,e){this.applyFilters(t,e),this.invalidateLayout()},i.prototype.setOptions=function(t){if(t){var i=this._rs;void 0!==t.hideDeleted&&(i.hideDeleted=t.hideDeleted),void 0!==t.hideDeletedRows&&(i.hideDeleted=t.hideDeletedRows),void 0!==t.inclusiveFiltering&&(i.inclusiveFiltering=t.inclusiveFiltering),void 0!==t.filterOr&&(i.inclusiveFiltering=t.filterOr),void 0!==t.summaryMode&&(i.summaryMode=t.summaryMode),void 0!==t.groupSummaryMode&&(i.groupSummaryMode=t.groupSummaryMode),void 0!==t.sortMode&&(i.sortMode=t.sortMdoe),void 0!==t.filterMode&&(i.filterMode=t.filterMode),e.prototype.setOptions.call(this,t)}},i.prototype._visualObjectChanged=function(t){e.prototype._visualObjectChanged.call(this,t),t instanceof Vs&&(this._rs.checkableExpression=t.checkableExpression)},i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getCheckedRows=function(t,e,i){var o,n;if(e){o=[];for(var r=0,s=this.itemCount;r<s;r++)(n=this.getItem(r)).checked&&n.dataRow>=0&&o.push(n.dataRow)}else o=this._rs.getCheckedRows(i);return t&&o.sort((function(t,e){return t-e})),o},i.prototype.getCheckedItemIndices=function(t){for(var e=[],i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&(t||n.dataRow>=0)&&e.push(n.index)}return e},i.prototype.getCheckedItems=function(t){for(var e=[],i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&(t||n.dataRow>=0)&&e.push(n)}return e},i.prototype.getMergedItems=function(t,e,i,o){var n=function(){return l.index<c?u.mergeRows?a.$_checkFixedMerge(this.itemSource,r,t,c):null:a.$_checkMerge(this.itemSource,r,t,!0,c)}.bind(this),r=e instanceof Hr?e:this.columnByName(e),s=r.layout,a=s.merges,l=this.getItem(t);if(!l)return null;if(!a)return o?i&&!l.isDataRow?null:[l.index]:null;var u=this.fixedOptions,c=u.rowCount,h=n();if(!h){var p=this.getGroupLevel(r.dataIndex);(p>0&&r.mergeGrouped&&!this.isTree()?Cr.getDefault(p,this.rowGroup.mergeMode):s.$_mergeRuleObj()).parseBounds(this.itemSource,r.dataIndex,0,this.itemCount-1,a._flags),h=n()}if(!h&&o)return[t];if(h){for(var d=[],f=h.top;f<=h.bottom;f++)(this.getItem(f).isDataRow||!i)&&d.push(f);return d.length>0?d:null}return null},i.prototype.findGroupItem=function(t,e){var i=this.getGroupLevel(e);if(i>0)for(var o=t instanceof Eo?t:t.parent;o;){if(o.level==i)return o;o=o.parent}return null},i.prototype.getItemOfModel=function(t){return t.itemIndex>=0?this.getItem(t.itemIndex):t.id>=0?this._rs.getGroupItem(t.id):null},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},i.prototype.getIndicatorIndex=function(t,e){var i=this._rs.getDisplayItemIndex(t),o=this.paged?this._rs.itemLength:this.itemCount;return e?o-i-1:i},i.prototype.indicatorReverse=function(e){return!(this.rowGrouped&&this.paged)&&e===t.IndicatorValue.REVERSE},i.prototype.getFirstRow=function(){return this._rs.getFirstRow()},i.prototype.getLastRow=function(){return this._rs.getLastRow()},i.prototype.getPrevRow=function(t){return this._rs.getPrevRow(t)},i.prototype.getNextRow=function(t){return this._rs.getNextRow(t)},i.prototype.canMoveRows=function(t,e,i){if(i&&this.canMoveRow(e,!1)&&t){for(var o=!1,n=0;n<t.length;n++){var r=t[n];r&&r.isDataRow&&(o=!0)}return o}},i.prototype._getMoveTarget=function(t,e,i,o){return this.getItem(i+o)},i.prototype._doMoveRows=function(t,e){var i=e&&e.dataRow;if(i>=0){for(var o=[],n=0,r=t;n<r.length;n++){var s=r[n],a=s&&s.dataRow;a>=0&&o.push(a)}if(o.length>0)return this.dataSource.moveRowList(o,i)}},i.prototype._getCellTypeOf=function(t){return t instanceof Ep?"groupHead":t instanceof xp?"groupFoot":t instanceof Dp?"groupBar":void 0},i.prototype.updatePastedRow=function(t,e,i){var o=t.dataRow;if(o>=0){var n=this.dataSource;n&&n.updateRow(o,e,i)}},i.prototype.appendPastedRow=function(t){var e=this.dataSource;if(e)return e.appendRow(t)},i.prototype.getSummaryCount=function(t){return"groupFooter"===t?this.rowGroup.footers.count:e.prototype.getSummaryCount.call(this,t)},i.prototype.isRecycleMode=function(){return e.prototype.isRecycleMode.call(this)&&(!this.rowGrouped||1===this.activeCellLayout.dataRows)},i.prototype._createItemSource=function(){return new bp(!0,this._rowGroup)},i.prototype.$_rowGroupChanged=function(t){this._doRowGroupMergeModeChanged()},i.prototype._groupingOptionsChanged=function(t){this._rs.expandWhenGrouping=t.expandWhenGrouping,this.groupPanelView&&this.groupPanelView.invalidate()},i.prototype.$_rowGroupAdornmentsChanged=function(t,e){this._rs._groupedProvider.resetAdornments(this.handler,t,e)},i.prototype.$_getVisibleRootByField=function(t,e){for(var i=this.visibleLayoutCount,o=0;o<i;o++){var n=this.getVisibleLayout(o),r=n instanceof Yr&&xt.cast(n.firstColumn,Hr);if(r&&r.dataIndex==t)return r}return e?this.columnByField(t):null},i.prototype.$_clearColumnMergeGrouped=function(){this._activeCellLayout._clearMergeGrouped()},i.prototype._doRowGroupMergeModeChanged=function(){e.prototype._doRowGroupMergeModeChanged.call(this),this.$_clearColumnMergeGrouped();var t=this._rs.groupByFields;if(this.rowGroup.mergeMode){if(t&&t.length>0)for(var i=t.length-1;i>=0;i--){var o=this.$_getVisibleRootByField(t[i],!1);o?o.$_setMergeGrouped(!0):t.splice(i,1)}this._rs.groupByMode(t,!0)}else this._rs.groupByMode(t,!1)},i.prototype.$_doRowGroupFooterMergeChanged=function(){},i.prototype.$_doGroupBy=function(e,i,o){var n,r=this.dataSource;if(this.$_clearColumnMergeGrouped(),r&&e&&(n=e.length)>0){for(var s=r.fieldCount,a=[],l=0;l<n;l++)e[l]>=0&&e[l]<s&&a.push(e[l]);if(a.length>0){if(this.rowGroup.mergeMode)for(l=a.length-1;l>=0;l--){var u=this.$_getVisibleRootByField(a[l],!1);u?u.$_setMergeGrouped(!0):a.splice(l,1)}a.length>0&&(this._rs.setLabelComparer(this._doPrepareComparer(a)),this._rs.groupBy(a,i,o))}}else this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,t.SortDirection.ASCENDING);this.$_doRowGroupFooterMergeChanged()},i.prototype.$_doAddGroupBy=function(t,e){var i=e.dataIndex;e.$_setMergeGrouped(this.rowGroup.mergeMode);try{var o=this.rowGroupFields?this.rowGroupFields.slice():[];o.push(i),this._rs.setLabelComparer(this._doPrepareComparer(o)),this._rs.addGroupBy(t,i,this.rowGroup.sorting),this.$_doRowGroupFooterMergeChanged()}catch(t){throw e.$_setMergeGrouped(!1),t}},i.prototype.$_clearGroupedIndices=function(){for(var t=this.columnCount-1;t>=0;t--){var e=xt.cast(this.getColumn(t),Hr);e&&e.$_setGroupLevel(this._rs.getGroupLevel(-1))}},i.prototype.$_setGroupedIndices=function(){for(var t=this.columnCount-1;t>=0;t--){var e=xt.cast(this.getColumn(t),Hr);e&&e.$_setGroupLevel(this._rs.getGroupLevel(e.dataIndex))}},i.prototype.$_firePageChanging=function(t){return this.fireConfirmEvent(i.PAGE_CHANGING,t)},i.prototype.$_firePageChanged=function(t){this.fireEvent(i.PAGE_CHANGED,t)},i.prototype.$_firePageCountChanged=function(t){this.fireEvent(i.PAGE_COUNT_CHANGED,t)},i.prototype.$_fireGrouping=function(t){return this.fireConfirmEvent(i.GROUPING,t)},i.prototype.$_fireGrouped=function(){this.fireEvent(i.GROUPED)},i.prototype.$_fireExpanding=function(t){return this.fireConfirmEvent(i.EXPANDING,t)},i.prototype.$_fireExpanded=function(t){this.fireEvent(i.EXPANDED,t)},i.prototype.$_fireCollapsing=function(t){return this.fireConfirmEvent(i.COLLAPSING,t)},i.prototype.$_fireCollapsed=function(t){this.fireEvent(i.COLLAPSED,t)},i.prototype.onGroupedItemProviderGrouping=function(t,e){return this.$_fireGrouping(e)},i.prototype.onGroupedItemProviderGrouped=function(t){this.selections.clear(),this.$_clearGroupedIndices(),this.groupPanelView.invalidate(),this.setNeedRefresh(!0);var e,i=this._rs.groupByFields;if(i&&i.length>0&&this.$_setGroupedIndices(),this.rowGroup.mergeMode){for(var o=[],n=this.visibleLayoutCount,r=0;r<n;r++){var s=this.getVisibleLayout(r),a=xt.cast(s.firstColumn,Hr);e=s.merges,a&&(a.mergeGrouped&&a.groupLevel<=0?(e&&e.clear(),a.$_setMergeGrouped(!1)):a.mergeGrouped&&(e||(e=new Tr(s)),o.push(a)))}if((n=o.length)>0)for(o=o.sort((function(t,e){return t.groupLevel-e.groupLevel})),r=0;r<n;r++)(e=o[r].layout.merges).clear(),e.initialize(br.INIT_COUNT),o[r].layout.vindex=r;for(n=this.visibleLayoutCount,r=0;r<n;r++)(a=xt.cast(this.getVisibleLayout(r).firstColumn,Hr))&&!a.mergeGrouped&&(e=a.layout.merges)&&(e.clear(),e.initialize(br.INIT_COUNT))}this.requestPrepareEditor(),this._itemCheckChanged=!0,this.$_fireGrouped(),this._cellLayoutChanged(),this.container.defaultTool.layoutChanged()},i.prototype.onGroupedItemProviderExpand=function(t,e){return this.$_fireExpanding(e)},i.prototype.onGroupedItemProviderExpanded=function(t,e){this.$_fireExpanded(e)},i.prototype.onGroupedItemProviderCollapse=function(t,e){return this.$_fireCollapsing(e)},i.prototype.onGroupedItemProviderCollapsed=function(t,e,i){if(i&&this.topIndex>e.getFirstVisibleItem(!1).index&&e instanceof Un){var o=e.getFirstVisibleItem(!1),n=this.layoutByColumn(this.columnByField(e.groupField)),r=ps.tempItem(this,o,n);hs.areEquals(this.focusedIndex,r)?this.topIndex=r.itemIndex:this.setFocusedIndex(r)}this.$_fireCollapsed(e)},i.PAGE_CHANGING="onGridViewPageChanging",i.PAGE_CHANGED="onGridViewPageChanged",i.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",i.GROUPING="onGridViewGrouping",i.GROUPED="onGridViewGrouped",i.EXPANDING="onGridViewExpanding",i.EXPANDED="onGridViewExpanded",i.COLLAPSING="onGridViewCollapsing",i.COLLAPSED="onGridViewCollapsed",i}(Rh),Wp=function(t){function e(e){return t.call(this,e)||this}return n(e,t),Object.defineProperty(e.prototype,"panelVisible",{get:function(){return this.grid.groupPanelView.visible},enumerable:!1,configurable:!0}),e.prototype.getLevelIndent=function(t){var e=this.grid;if(this.mergedRowGrouped){for(var i=this.fixedLayoutCount,o=0,n=0;n<t;n++)o+=n<i?this.getFixedLayoutWidth(n):this.getLayoutWidth(n-i);return i?t>i?o=Math.max(this.fixedWidth,o+this.fixedBarWidth-this.leftPos):t===i&&(o+=this.fixedBarWidth):o-=this.leftPos,o}return e.rowGroup.indentVisible?e.groupBarPane.getLevelIndent(t):0},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topPanelVisible",{get:function(){return this.panelVisible},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowGrouped",{get:function(){return!this.grid.rowGroup.mergeMode&&this.grid.rowGrouped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mergedRowGrouped",{get:function(){return this.grid.rowGroup.mergeMode&&this.grid.rowGrouped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupLevels",{get:function(){return this.grid.rowGroupLevels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupFields",{get:function(){return this.grid.rowGroupFields},enumerable:!1,configurable:!0}),e.prototype.$_groupView=function(t){return this.grid.groupView},e.prototype.setLeftPos=function(e,i){t.prototype.setLeftPos.call(this,e,i);var o=this.grid,n=o.mergedRowGrouped,r=this.$_groupView(n);r.visible&&this.$_layoutRowGroupView(o,r)},e.prototype._prepareItems=function(e){t.prototype._prepareItems.call(this,e);var i=this.grid;if(i.rowGrouped){var o=i.mergedRowGrouped,n=this.$_groupView(o),r=this.contentBounds.isEmpty?null:i.bodyView,s=this.fixedContentBounds.isEmpty?null:i.fixedBodyView,a=this.rightContentBounds.isEmpty?null:i.rightBodyView;n.$_prepareGroupItems(this,r,s,a),n.$_prepareGroupFooters(this._items,this)}},e.prototype._doMeasureTopPane=function(t,e){var i=t.groupPanelView;if(this.panelVisible)if(i._dirty){var o=i.measure(t,e.width,e.height);e.height=o.height}else e.height=i.bounds.height;else e.height=1,e.width=1},e.prototype._doLayoutTopPane=function(t,e){var i=t.groupPanelView;i.setBounds(0,0,e.width,e.height),this.panelVisible&&i.layoutContent(this)},e.prototype._doLayout=function(e,i){t.prototype._doLayout.call(this,e,i)},e.prototype._adjustLayout=function(e,i){t.prototype._adjustLayout.call(this,e,i);var o=e.rowGrouped,n=e.mergedRowGrouped,r=e._sideContentPane;r&&this._layoutSidePane(e,r);var s=this.$_groupView(n);this.$_groupView(!n).visible=!1,(s.visible=o)&&this.$_layoutRowGroupView(e,s)},e.prototype.isMergedCell=function(t){var e=this.grid;if(e.rowGroup.mergeMode&&e.isGroupedColumn(t.dataColumn))return!0;var i=t.layout;if(i&&i.isColumn&&t.layout.merged){var o=i.merges;if(o)return null!=o.getRoom(t)}return!1},e.prototype.$_layoutRowGroupView=function(t,e){var i=this.contentBounds,o=this.sideContentBounds.clone();o.top=i.y+this.bodyBounds.y,o.right=this.rightContentBounds.right,o.bottom=Math.min(this.footBounds.y+i.y,i.bottom),e.setRect(o),e.layout(this)},e}(Cl),Up=function(t){function e(e){var i=t.call(this,e,"gridSelectionTool")||this;return i._panelCellReq=new zp,i._panelCellFeedback=new Kp(e.doc),i._groupingReq=new qp,i}return n(e,t),e.prototype._doDispose=function(){this._panelCellReq=null,t.prototype._doDispose.call(this)},e.prototype._doPointerDown=function(e){var i=this.grid,o=this.mouseEventTarget;if(o instanceof Ct(e.target).HTMLElement&&(al.isExpander(o)||Tp.isExpander(o))){var n=this._findTableCell(o),r=i.getTableView(n);if(al.isExpander(o)&&r instanceof fl){var s=i.getDataCellIndex(n,this._tempIndex),a=r.getCellAt(i.layoutManager,s),l=i.findGroupItem(a.item,a.layout.firstColumn.dataIndex);this.$_toggleExpanded(i,l,e)}else if(Tp.isExpander(o)&&r instanceof Dp){var u=r.getViewOf(o);return void((l=(l=i.getItem(o[b])).getAncestor(u.level))instanceof xo&&this.$_toggleExpanded(i,l,e))}}t.prototype._doPointerDown.call(this,e)},e.prototype._doClick=function(e){var i=e.mouseX,o=e.mouseY,n=this.grid,r=this.findElementAt(i,o,!1);r instanceof jp&&r.isCloseButton(e.target)&&n.removeGroupByField(r.field),t.prototype._doClick.call(this,e)},e.prototype._doDblClick=function(e){var i=e.mouseX,o=e.mouseY,n=this.grid,r=this.findElementAt(i,o,!1);r instanceof Lp&&n.groupingOptions.headerClickable?this.$_toggleExpanded(n,r.item,e):t.prototype._doDblClick.call(this,e)},e.prototype._getEditRequest=function(e,i,o,n,r,s,a){var l=t.prototype._getEditRequest.call(this,e,i,o,n,r,s,a);if(l)return l;var u=this.grid,c=this.findElementAt(o,n,!1),h=this._findTableCell(e),p=h&&u.getTableView(h);if(p instanceof ml){var d=p.layoutByCell(h),f=d.firstColumn;if(u.groupPanelView.visible&&f&&f.groupable&&u.groupingOptions.enabled){var g=u.layoutManager.getHeaderCellRect(d);return this._groupingReq.init(d,g,o,n)}}return c instanceof jp?this._panelCellReq.init(c,o,n):void 0},e.prototype._getDragTracker=function(e,i,o){var n=this.grid;return e instanceof zp?new Yp(n,e,this._panelCellFeedback):e instanceof qp?new Xp(n,e,this._panelCellFeedback):t.prototype._getDragTracker.call(this,e,i,o)},e.prototype.getNextRequest=function(e,i,o,n){if(!(e instanceof Wu&&e.layout instanceof Yr))return e instanceof qp&&e.layout instanceof Yr&&i instanceof wc?this._colMoveReq.init(e.layout,o,n,null):t.prototype.getNextRequest.call(this,e,i,o,n);var r=this.grid,s=e.layout.firstColumn;return r.groupingOptions.enabled&&r.layoutManager.topPanelVisible&&s instanceof Hr&&s.groupable&&n+3<r.groupPanelView.bottom?this._groupingReq.init(e.layout,i,o,n):void 0},e.prototype._getClickData=function(e,i){if(e instanceof Lp)return gc.getItem("groupHeader",e.itemIndex,null);if(e instanceof Hp)return gc.getData("groupPanel");if(e instanceof jp){if(e.isCloseButton(i.target))return;var o=this.grid.dataSource.getOrgFieldName(e.field);return gc.getField("groupColumn",e.field,o)}return t.prototype._getClickData.call(this,e,i)},e.prototype.$_toggleExpanded=function(t,e,i){e.expanded?t.collapse(e,!1,!1,i):t.expand(e,!1,!1,0)},e}(Tc),zp=function(t){function e(){var e=t.call(this)||this;return e._field=-1,e}return n(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"field",{get:function(){return this._field},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,i){return this._source=t,this._x=e,this._y=i,this._field=t.field,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"pointer"},enumerable:!1,configurable:!0}),e}(Wl),Kp=function(t){function e(e){var i=t.call(this,e)||this;return i._no=!1,i}return n(e,t),e.prototype.setField=function(t,e){void 0===e&&(e=!1),this._textView[xt.TextProp]=t,this._noMark.style.display=(this._no=e)?"inline-block":"none"},e.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item rg-group-panel-cell-feedback"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=this.doc;this._textView=i.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",e.appendChild(this._textView),this._noMark=i.createElement("span"),this._noMark.className="rg-group-panel-no-mark",this._noMark.style.display="none",e.appendChild(this._noMark)},e.prototype._doDraw=function(t){var e=this._textView.offsetWidth,i=this._textView.offsetHeight,o=this._textView.style;o.left=Math.max(0,(this.width-e)/2)+"px",o.top=Math.max(0,(this.height-i)/2)+"px",this._no&&(e=this._noMark.offsetWidth,i=this._noMark.offsetHeight,(o=this._noMark.style).left=Math.max(0,(this.width-e)/2)+"px",o.top=Math.max(0,(this.height-i)/2)+"px")},e}(Ys),Yp=function(t){function e(e,i,o){var n=t.call(this,e,"groupPanelCellTracker")||this;return n._request=i,n._feedback=o,n}return n(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var n=this.grid,r=this._request.source.boundsByContainer();return this._feedback.setRect(r),this._feedback.setField(this._request.source.text),this._feedback.visible=!0,n.addFeedbackElement(this._feedback),this._offsetX=e-r.x,this._offsetY=i-r.y,!0},e.prototype._doDrag=function(t,e,i,o){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},e.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;this.currentY>e.contentBounds.y&&t.removeGroupByField(this._request.field)},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(Al),qp=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype._doDispose=function(){this._layout=null,this._source=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,i,o){return this._layout=t,this._source=e,this._x=i,this._y=o,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"pointer"},enumerable:!1,configurable:!0}),e}(Wl),Xp=function(t){function e(e,i,o){var n=t.call(this,e,"groupingCellTracker")||this;return n._request=i,n._feedback=o,n}return n(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var n=this.grid,r=this._request.source,s=r instanceof Ys?r.boundsByContainer():r,a=n.isGroupedField(this._request.layout.firstColumn.dataIndex);return this._feedback.setRect(s),this._feedback.setField(this._request.layout.firstColumn.displayText,a),this._feedback.visible=!0,n.addFeedbackElement(this._feedback),this._offsetX=e-s.x,this._offsetY=s.height/3,!0},e.prototype._doDrag=function(t,e,i,o){return!(i>this.grid.layoutManager.topContentBounds.bottom)&&(e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0)},e.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;if(this.currentY<e.contentBounds.y){var i=t.$_getVisibleRootByField(this._request.layout.firstColumn.dataIndex,!0);t.addGroupBy(e.rowGroupLevels,i)}},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,this._request.source,t,e)},e}(Al),Qp=function(t){function e(e,i,o,n){void 0===o&&(o=!1),void 0===n&&(n=null);var r=t.call(this,e,o,n)||this,s=r._containerDom.parentElement;return s.style.height&&(r._orgCssHeight=s.style.height),r._gridView&&(r._gridView.$_handler=i),r}return n(e,t),e.prototype._doDispose=function(){this._gridView=null,this._watchTimer&&clearInterval(this._watchTimer),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"gridView",{get:function(){return this._gridView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"heightMeasurer",{get:function(){return this._heightMeasurer},enumerable:!1,configurable:!0}),e.prototype.setWatchTimer=function(t){this._watchTimer&&clearInterval(this._watchTimer),this._watchTimer=null,this._displayObserver=this._displayObserver||this.$_displayObserver.bind(this),t&&(this._watchTimer=setInterval(this._displayObserver,100))},e.prototype.recallHeight=function(){var t=this._containerDom.parentElement.style;this.gridView._loading||(this._orgCssHeight?t.height=this._orgCssHeight:t.removeProperty("height"))},e.prototype.getTableCell=function(t){return this._gridView.getTableCell(t)},e.prototype._doResized=function(e){t.prototype._doResized.call(this,e),this._gridView.$_containerResized()},e.prototype._isOutChildElement=function(t){var e=this.gridView,i="focusout"===t.type?t.relatedTarget:t.target;if(e.filterSelector.opened&&xt.isAncestorOf(e.filterSelector._element,i,t))return!0;if(i instanceof SVGElement)for(var o=xt.getComposedPath(t);o&&o.length&&!((i=o.shift())instanceof HTMLElement););var n=i&&i.className||"";if(n.indexOf("rg-popup")>=0)return!0;try{if(n.indexOf("rg-editor")>=0&&i.$_owner._grid.container!==this)return!1;if(n.indexOf("rg-root")>=0&&i!==this._containerDom)return!1;if(e.isEditing())for(var r=i;r;){if((r.className||"").indexOf("rg-")>=0)return!0;r=r.parentElement}}catch(t){xt.log("check outer elements fail => ".concat(i))}return!1},e.prototype._doPrepareContainer=function(t,e,i){t.className="rg-root rg-grid",xt.isMobile()&&(t.style.touchAction="unset"),this._gridView=this._createGridView(e,i),this.addElement(this._gridView),this._heightMeasurer=new Jp(this.measurer),this._sizeInfo=new q(0,0,t.clientWidth,t.clientHeight)},e.prototype._createDefaultTool=function(){return new Up(this)},e.prototype._doLayout=function(t){var e=this._gridView,i=t.clone();e.setRect(i),i.x=i.y=0,e.$_layout(i)},e.prototype._layoutChildren=function(t){this._sizeInfo.width=t.width,this._sizeInfo.height=t.height},e.prototype._doBeforeRender=function(){var t=this.gridView,e=t._dom;if(e&&e.scrollLeft>0){var i=e.scrollLeft;t.leftPos=i,e.scrollLeft=0}t.visible&&t.$_beforeRender()},e.prototype._doAfterRender=function(){if(!this.gridView.fitSyncHeight()){var t=this._containerDom.parentElement;this._orgCssHeight=t.style.height}this._gridView.visible&&this._gridView.$_afterRender()},e.prototype._doPrepareRender=function(t){var e=t.clone();this._gridView.visible&&(this._gridView.setRect(e),e.x=e.y=0,this._gridView.$_prepareRender(e))},e.prototype._createGridView=function(t,e){return new $p(this,t,e)},e.prototype._resizeHandler=function(t){if(null==this._watchTimer){var e=this;this._resizeTimer=setTimeout((function(){e._displayObserver()}),100)}},e.prototype.$_displayObserver=function(){var t=this._containerDom,e=t.clientWidth,i=t.clientHeight,o=this._sizeInfo;e>0&&i>0&&(Math.abs(this._sizeInfo.width-e)>=1||Math.abs(this._sizeInfo.height-i)>=1)&&(this._gridView.fitSyncHeight()||(this._orgCssHeight=t.parentElement.style.height),o.width=e,o.height=i,this.invalidateLayout(),this._doResized(null))},e}(nu),Jp=function(t){function e(e){var i=t.call(this)||this;return i._bodyStyle="rg-body",i._headerStyle="rg-header",i._summaryStyle="rg-header-summary",i._footerStyle="rg-footer",i._dataRowStyle="rg-data-row",i._headerRowStyle="",i._summaryRowStyle="",i._footerRowStyle="",i._groupFooterStyle="rg-rowgroup-footer",i._dataCellStyle="rg-data-cell",i._headerCellStyle="rg-header-cell",i._summaryCellStyle="rg-header-summary-cell",i._footerCellStyle="rg-footer-cell",i._groupFooterCellStyle="rg-rowgroup-footer-cell",i._rowHeight=0,i._headerHeight=0,i._summaryHeight=0,i._footerHeight=0,i._gfooterHeight=0,i._dirty=!0,i._container=e,i.$_prepareElements(e),i}return n(e,t),e.prototype._doDispose=function(){this._container=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowHeight",{get:function(){return this._rowHeight||(this._rowHeight=this.$_measure(this._bodyStyle,this._dataRowStyle,this._dataCellStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerHeight",{get:function(){return this._headerHeight||(this._headerHeight=this.$_measure(this._headerStyle,this._headerRowStyle,this._headerCellStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"summaryHeight",{get:function(){return this._summaryHeight||(this._summaryHeight=this.$_measure(this._summaryStyle,this._summaryRowStyle,this._summaryCellStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footerHeight",{get:function(){return this._footerHeight||(this._footerHeight=this.$_measure(this._footerStyle,this._footerRowStyle,this._footerCellStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupFooterHeight",{get:function(){return this._gfooterHeight||this.$_measure(this._bodyStyle,this._groupFooterStyle,this._groupFooterCellStyle)},enumerable:!1,configurable:!0}),e.prototype.measure=function(t){this._dirty&&(this._dirty=!1)},e.prototype.invalidate=function(){this._dirty=!0},e.prototype.$_prepareElements=function(t){var e=wt(t),i=e.createElement("table");i.setAttribute("aria-hidden","true");var o=i.createCaption();o.textContent="grid measurer table",o.style.width=o.style.height="0px",o.style.padding="none",o.style.boxSizing="border-box",o.style.overflow="hidden",t.appendChild(i);var n=i.style;n.width="1000px",n.height="1px",n.left="-10000px",n.position="absolute",i.className="rg-table";var r=e.createElement("tbody");i.appendChild(r);var s=e.createElement("tr");r.appendChild(s);var a=e.createElement("td");a.className="rg-data-cell",s.appendChild(a);var l=e.createElement("div");a.appendChild(l),l[xt.TextProp]="AYwyhi"},e.prototype.$_measure=function(t,e,i){var o=this._container,n=this._container.firstElementChild.tBodies[0].rows[0],r=n.cells[0];return o.className=t,n.className=e,r.className=i,n.offsetHeight},e}(kt),Zp=function(e){function i(i){var o=e.call(this,i)||this;return o._levelIndent=16,o._lineVisible=!0,o._showCheckBox=!1,o._iconImagesRoot="",o._defaultIcon=-1,o._collapseWhenLeftKey=!0,o._collapseWhenCtrlKey=!0,o._expandWhenRightKey=!0,o._expandWhenCtrlKey=!0,o._iconVisible=!0,o._expanderIconStyle=t.TreeExpanderIconStyle.TRIANGLE,o._expandedIcon=-1,o._collapsedIcon=-1,o._recursiveSoftDeleting=!1,o}return n(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"levelIndent",{get:function(){return this._levelIndent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineVisible",{get:function(){return this._lineVisible},set:function(t){t!=this._lineVisible&&(this._lineVisible=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showCheckBox",{get:function(){return this._showCheckBox},set:function(t){t!=this._showCheckBox&&(this._showCheckBox=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconImagesRoot",{get:function(){return this._iconImagesRoot},set:function(t){t!==this._iconImagesRoot&&(this._iconImagesRoot=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconImages",{get:function(){return this._iconImages},set:function(t){t!==this._iconImages&&(this._iconImages=t?t.slice():[],this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultIcon",{get:function(){return this._defaultIcon},set:function(t){t!=this._defaultIcon&&(this._defaultIcon=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandedIcon",{get:function(){return this._expandedIcon},set:function(t){t!=this._expandedIcon&&(this._expandedIcon=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsedIcon",{get:function(){return this._collapsedIcon},set:function(t){t!=this._collapsedIcon&&(this._collapsedIcon=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!=this._iconCallback&&(this._iconCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapseWhenLeftKey",{get:function(){return this._collapseWhenLeftKey},set:function(t){this._collapseWhenLeftKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapseWhenCtrlKey",{get:function(){return this._collapseWhenCtrlKey},set:function(t){this._collapseWhenCtrlKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenRightKey",{get:function(){return this._expandWhenRightKey},set:function(t){this._expandWhenRightKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenCtrlKey",{get:function(){return this._expandWhenCtrlKey},set:function(t){this._expandWhenCtrlKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconVisible",{get:function(){return this._iconVisible},set:function(t){t!=this._iconVisible&&(this._iconVisible=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderIconStyle",{get:function(){return this._expanderIconStyle},set:function(t){t!=this._expanderIconStyle&&(this._expanderIconStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"recursiveDeleting",{get:function(){return this._recursiveSoftDeleting},set:function(t){this._recursiveSoftDeleting=t},enumerable:!1,configurable:!0}),i}(Ba);!function(t){function e(e,i){var o=t.call(this,e,i,"treeExpandHandle")||this;return o._expanded=!1,o.clickable=!0,o}n(e,t),Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype._createDom=function(){return null}}(Cp);var td=function(e){function i(t){var i=e.call(this)||this;return i._exclusive=!1,i.assignFrom(t),i}return n(i,e),i.prototype._doDispose=function(){this._dom.style.removeProperty("padding-left"),this._expander=this._check=this._icon=this._span=this._label=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(t){var e=wt(t),i=this._expander=e.createElement("span");t.appendChild(i);var o=this._check=e.createElement("input");o.type="checkbox",o.className="rg-tree-checkbox",o.style.display="inline-block",t.appendChild(o);var n=this._icon=e.createElement("img");n.className="rg-tree-icon",n.alt="",t.appendChild(n);var r=this._span=e.createElement("span");t.appendChild(r);var s=this._label=e.createElement("label");s.style.display="none",t.appendChild(s)},i.prototype._doRenderCell=function(e,o,n,r,s){var a=e.treeOptions,l=a.showCheckBox,u=a.levelIndent,c=this._expander,h=this._dom,p=this._check,d=this._icon,f=this._span,g=this._label,y=o.item,_=n.cell,m=a.expanderIconStyle===t.TreeExpanderIconStyle.SQUARE?" square":"";if(c.className=y.isLeaf?"rg-tree-leaf":y.expanded?"rg-tree-expanded"+m:"rg-tree-collapsed"+m,e.accessibility&&(y.isLeaf?_.removeAttribute("aria-expanded"):_.setAttribute("aria-expanded",y.expanded?"true":"false")),this._exclusive!=e.checkBar.exclusive&&(this._exclusive=e.checkBar.exclusive,p.setAttribute("type",this._exclusive?"radio":"checkbox"),p.className=this._exclusive?"rg-tree-radio":"rg-tree-checkebox"),l){p.parentElement||h.insertBefore(p,this._span),p.checked=y.checked;var v=p.id=i.FOR_ID+o.item.index;g.setAttribute("for",v),g[xt.TextProp]=this._makeText(e,o,n)+(p.checked?" checked":" unchecked")}else p.parentElement&&h.removeChild(p);if(a.iconVisible){d.parentElement||h.insertBefore(d,this._span);var b=e.getTreeIcon(y);b?(d.src=b,d.removeAttribute("height"),d.style.removeProperty("visibility")):(d.removeAttribute("src"),d.height=1,d.style.visibility="hidden")}else d.parentElement&&h.removeChild(d);f[xt.TextProp]=this._makeText(e,o,n),h.style.setProperty("padding-left",3+(y.level-1)*u+"px","important")},i.TYPE="tree",i.FOR_ID="$$-tree-check",i.STYLE="rg-tree-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(Sn),ed=function(t){function e(e){return t.call(this,e,"treeItemView")||this}return n(e,t),e.prototype.isCheckBox=function(t){var e=t.className;return"rg-tree-checkbox"==e||"rg-tree-radio"==e},e.prototype._doLayoutContent=function(e){t.prototype._doLayoutContent.call(this,e)},e.prototype._createRenderer=function(e,i,o,n,r){var s=e.layoutManager,a=i.dataColumn.layout;return 0===s.getHorzColumnIndex(a)?new td(n):t.prototype._createRenderer.call(this,e,i,o,n,r)},e.prototype.$_getDefaultRenderer=function(t,e){var i=t.layoutManager,o=e.dataColumn.layout;return 0===i.getHorzColumnIndex(o)?td.TYPE:En.TYPE},e}(al),id=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e}(ed),od=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e}(ed),nd=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof td},e.prototype.createRowElement=function(){return new ed(this.doc)},e}(fl),rd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof td},e.prototype.createRowElement=function(){return new id(this.doc)},e}(gl),sd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof td},e.prototype.createRowElement=function(){return new od(this.doc)},e}(yl),ad=function(t){function e(e){var i=t.call(this,e.doc)||this;return i._levelWidth=16,i._handleWidth=9,i._handleHeight=9,i._stroke="gray",i._linePool=[],i._lines=[],i._startIndex=-1,i._endIndex=-1,i._treeView=e,i}return n(e,t),e.prototype._doDispose=function(){this._linePool=null,this._lines=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"levelWidth",{get:function(){return this._levelWidth},set:function(t){t!=this._levelWidth&&(this._levelWidth=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleWidth",{get:function(){return this._handleWidth},set:function(t){t!=this._handleWidth&&(this._handleWidth=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleHeight",{get:function(){return this._handleHeight},set:function(t){t!=this._handleHeight&&(this._handleHeight=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){t!=this._stroke&&(this._stroke=t,this.invalidate())},enumerable:!1,configurable:!0}),e.prototype.setRange=function(t,e,i){e==this._startIndex&&i==this._endIndex||(this._startIndex=e,this._endIndex=i,this.invalidate())},e.prototype.layout=function(t){var e=this._treeView;if(this.$_hideAll(),!(!e||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){var i,o=null;for(i=this._startIndex;i<=this._endIndex&&!(o=e.getItem(i));i++);if(o){var n=o.level;if(n>1||o.childIndex>0){for(var r=0;r<n;r++){var s=o.getAncestor(r);(a=s.last)&&a.index>=i&&(a=this.$_findLevelItem(r+1,i),this.$_drawVertLine(t,this.$_borrowLine(),null,a,s.level))}o.childIndex>0&&this.$_drawVertLine(t,this.$_borrowLine(),null,o,o.parent.level)}for(;i<=this._endIndex;i++){var a,l=(o=e.getItem(i)).parent;(r=o.childIndex)<l.count-1&&((a=l.getItem(r+1)).index>this._endIndex&&(a=null),this.$_drawVertLine(t,this.$_borrowLine(),o,a,l.level)),(l=o)&&l.expanded&&l.count>0&&((a=l.getItem(0)).index>this._endIndex&&(a=null),this.$_drawChildLine(t,this.$_borrowLine(),o,a)),this.$_drawHorzLine(t,this.$_borrowLine(),o)}}}},e.prototype._getCssSelector=function(){return"rg-tree-lines"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=e.style;i.setProperty("pointer-events","none","important"),i.setProperty("overflow","hidden")},e.prototype._doDraw=function(t){},e.prototype.$_borrowLine=function(){var t=this._linePool.pop();return t||((t=this._treeView.doc.createElement("div")).className="rg-tree-line",t.style.position="absolute",this._dom.appendChild(t)),t.style.display="inline-block",this._lines.push(t),t},e.prototype.$_hideAll=function(){for(var t=this._lines.length-1;t>=0;t--)"none"!=this._lines[t].style.display&&(this._lines[t].style.display="none");this._linePool=this._linePool.concat(this._lines.splice(0,this._lines.length))},e.prototype.$_findLevelItem=function(t,e){for(var i=e;i<=this._endIndex;i++){var o=this._treeView.getItem(i);if(o&&o.level==t)return o}return null},e.prototype.$_setBounds=function(t,e,i,o,n){var r=t.style;r.left=3+e+"px",r.top=i+"px",r.width=1==o?"1px":o+"px",r.height=1==n?"1px":n+"px"},e.prototype.$_drawVertLine=function(t,e,i,o,n){var r=t.topIndex,s=n*this._levelWidth+this._levelWidth/2,a=0,l=this.height,u=this._handleHeight;if(i){var c=t.getItemBounds(i.index-r),h=i instanceof or&&i.hasChildren?u+2:0;a=c.y+c.height/2+h/2+1}o&&(c=t.getItemBounds(o.index-r),h=o instanceof or&&o.hasChildren?u:0,l=c.y+c.height/2-h/2),this.$_setBounds(e,s,a,1,l-a)},e.prototype.$_drawHorzLine=function(t,e,i){var o,n=t.topIndex,r=i.parent.level*this._levelWidth+this._levelWidth/2,s=i.level*this._levelWidth+1;i.hasChildren&&(r+=this._handleWidth/2+1);var a=t.getItemBounds(i.index-n);o=a.y+a.height/2,this.$_setBounds(e,r,o,s-r,1)},e.prototype.$_drawChildLine=function(t,e,i,o){var n,r=t.topIndex,s=i.level*this._levelWidth+this._levelWidth/2,a=this.height,l=t.getItemBounds(i.index-r);if(n=l.y+l.height/2+5,o){l=t.getItemBounds(o.index-r);var u=o.hasChildren?this._handleHeight:0;a=l.y+l.height/2-u/2}this.$_setBounds(e,s,n,1,a-n)},e}(qs),ld=function(t){function e(e){return t.call(this,e,"treeViewSelectionTool")||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doKeyDown=function(e){var i,o=this.focused.clone(),n=this.grid.treeOptions,r=e.which,s=e.ctrlKey||e.metaKey;if(o&&(i=o.item))switch(r){case 39:if(!s&&1==this.grid.visibleLayoutCount&&o.isRight&&n.expandWhenRightKey||s&&n.expandWhenCtrlKey){if(!i.expanded)return i.setExpanded(!0,!1,!1),!0;if(i.count>0)return o.down(),this.setFocused(o,!0,!0),!0}break;case 37:if(!s&&o.isLeft&&n.collapseWhenLeftKey||s&&n.collapseWhenCtrlKey){if(i.expanded)return i.setExpanded(!1,!1,!1),!0;if(!(i.parent instanceof nr))return o.itemIndex=i.parent.index,this.setFocused(o,!0,!0),!0}}return t.prototype._doKeyDown.call(this,e)},e.prototype._doPointerDown=function(e){var i=e.mouseX,o=e.mouseY,n=e.altKey,r=this.grid,s=this.findElementAt(i,o,!1),a=this.mouseEventTarget;if(s instanceof ed&&al.isExpander(a)&&!n){var l=s._item;l instanceof or&&(l.expanded?r.collapse(l,!1):r.expand(l,!1,!1))}t.prototype._doPointerDown.call(this,e)},e.prototype._doClick=function(e,i,o){i=i||e.mouseX,o=o||e.mouseY;var n=e.shiftKey,r=this.grid;this.focused;var s=this.findElementAt(i,o,!1),a=this.mouseEventTarget;if(s instanceof ed&&s.isCheckBox(a))if(r.editOptions.checkable){var l=r.getItem(s.itemIndex);this._doCheck(a,l,n)}else e.preventDefault();t.prototype._doClick.call(this,e,i,o)},e.prototype._canMoveRowAt=function(t,e,i){var o=t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)),n=3+(e.item.level-1)*this.grid.treeOptions.levelIndent;if(i<o.x+(t.isTreeCell(e)?n:20)){var r=this.grid.getSelectedItems();if(r.length>1)for(var s=r[0].level,a=1;a<r.length;a++)if(r[a].level<s)return!1;return!0}},e}(Tc),ud=function(t){function e(e,i,o,n){return t.call(this,e,i,o,n)||this}return n(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"treeView",{get:function(){return this.gridView},enumerable:!1,configurable:!0}),e.prototype._createGridView=function(t,e){return new pd(this,t,e)},e.prototype._createDefaultTool=function(){return new ld(this)},e}(Qp),cd=function(t){function e(){return t.call(this,"treeItemExpanderCell")||this}return n(e,t),Object.defineProperty(e.prototype,"getText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),e}(Xo),hd=function(t){function e(){return t.call(this,"treeItemFooterCell")||this}return n(e,t),Object.defineProperty(e.prototype,"getText",{get:function(){var t=String(this.value());if(!t){var e=this.index;e.dataColumn&&(t=e.column.footer.text)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),e}(Xo),pd=function(e){function i(t,i,o){var n=e.call(this,t,i,o)||this;return n._expanderCell=new cd,n._footerCell=new hd,n._focusedRow=-1,n.itemSource=n._rs=n._createItemSource(),n}return n(i,e),i.prototype._doDispose=function(){this.itemSource=this._rs=this.itemSource&&this.itemSource.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"treeOptions",{get:function(){return this._treeOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"linesView",{get:function(){return this._linesView},enumerable:!1,configurable:!0}),i.prototype.isTree=function(){return!0},i.prototype.recursiveDeleting=function(){return this.treeOptions.recursiveDeleting},i.prototype._beforeChangeLayout=function(){},i.prototype.getLevels=function(t){return this._rs.getLevels(t)},i.prototype.getExpanderCell=function(t){return this._expanderCell.setIndex(hs.temp(this,t)),this._expanderCell},i.prototype.getFooterCell=function(t){return this._footerCell.setIndex(t),this._footerCell},i.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},i.prototype.collapse=function(t,e){this.isItemEditing(null)||this._rs.collapse(t,e)},i.prototype.expandAll=function(t){void 0===t&&(t=0),this.isItemEditing(null)||this._rs.expandAll(t)},i.prototype.collapseAll=function(){this.isItemEditing(null)||this._rs.collapseAll()},i.prototype.getTreeIcon=function(t){var e=this.treeOptions,i=e.iconImages;if(i){var o=void 0;o=t.hasChildren&&t.expanded&&e.expandedIcon>-1?e.expandedIcon:t.hasChildren&&t.collapsed&&e.collapsedIcon>-1?e.collapsedIcon:t.iconIndex;var n=e.iconCallback;if(n){var r=n(this.handler,t.index,t.dataRow,o);if("string"==typeof r)return r;isNaN(r)||(o=r)}if((o<0||o>=i.length)&&(o=e.defaultIcon),o>=0&&o<i.length)return e.iconImagesRoot+i[o]}},i.prototype.getCheckedItems=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o)}return t},i.prototype.getCheckedItemIndices=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o.index)}return t},i.prototype.getCheckedRows=function(t){var e=null;if(t){e=[];for(var i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&e.push(n.row)}}else e=this._rs.getCheckedRows();return e},i.prototype.getCheckedRowIds=function(t){var e=null;if(t){e=[];for(var i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&e.push(n.dataRow)}}else e=this._rs.getCheckedRowIds();return e},i.prototype.checkChildren=function(t,e,i,o,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!1),t)for(var s=0,a=t.count;s<a;s++){var l=t.getItem(s);n?l.checkable&&l.setChecked(e,r):l.setChecked(e,r),!i||!l.expanded&&o||this.checkChildren(l,e,!0,o,n,r)}},i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getItemOfModel=function(t){return t.itemIndex>=0?this.getItem(t.itemIndex):t.dataRow>=0?this.getItemOfRow(t.dataRow,!1):null},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._rs&&this._rs.dataSource},set:function(t){this._rs&&(this._rs.dataSource=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return this._rs?this._rs.maxItemCount:0},set:function(t){this._rs&&(this._rs.maxItemCount=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._rs.summarizer},enumerable:!1,configurable:!0}),i.prototype._initStyles=function(){e.prototype._initStyles.call(this),this._treeOptions=new Zp(this)},i.prototype._createItemSource=function(){return new ur(!0)},i.prototype._doContentPanesCreated=function(){this._linesView=new ad(this),this.addElement(this._linesView)},i.prototype._createSidePane=function(){return e.prototype._createSidePane.call(this)},i.prototype._createLayoutManager=function(){return new dd(this)},i.prototype._createBodyView=function(t){return new nd(this.doc,t)},i.prototype._createFixedBodyView=function(t){return new rd(this.doc,t)},i.prototype._createRightBodyView=function(t){return new sd(this.doc,t)},i.prototype._visualObjectChanged=function(t){e.prototype._visualObjectChanged.call(this,t)},i.prototype.append=function(){return this.insert(this._rs.rootItem,!1,!0)},i.prototype._doCanInsert=function(t,e,i){return t&&(t.count>0||!i||0==t.level||this.editOptions.appendable)},i.prototype._doMaxRowCountChanged=function(){this._rs.maxItemCount=this.maxItemCount},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},i.prototype._doSortItems=function(t,e,i){this._rs.setLabelComparer(this._doPrepareComparer(t)),this._rs.orderBy(t,e,i)},i.prototype._doColumnFiltersChanged=function(t,e){this._rs.includeParentItem=this.filteringOptions.includeParentItem,this.applyFilters(t,e)},i.prototype.setOptions=function(t){if(t){var i=this._rs;void 0!==t.hideDeleted&&(i.hideDeleted=t.hideDeleted),void 0!==t.hideDeletedRows&&(i.hideDeleted=t.hideDeletedRows),void 0!==t.summaryMode&&(i.summaryMode=t.summaryMode),void 0!==t.sortMode&&(i.sortMode=t.sortMdoe),e.prototype.setOptions.call(this,t)}},i.prototype._doPrepareRender=function(t){var i=this._horzScrolled;e.prototype._doPrepareRender.call(this,t),i&&this.layoutManager.$_layoutLines()},i.prototype.$_doLayout=function(t,i){this._treeOptions,e.prototype.$_doLayout.call(this,t,i)},i.prototype.assignImageList=function(t){},i.prototype.refreshView=function(){e.prototype.refreshView.call(this)},i.prototype.getEditBounds=function(t,i){return e.prototype.getEditBounds.call(this,t,i)},i.prototype.updatePastedRow=function(t,e,i){if(t instanceof or){var o=t.row;o&&o.update(e,i)}},i.prototype.appendPastedRow=function(t){var e=this.dataSource;if(e){var i=e.createRow(t,-1,!1);return e.rootRow.addChild(i,!1),i.rowId}},Object.defineProperty(i.prototype,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._rs.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._rs.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._rs.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._rs.redoing},enumerable:!1,configurable:!0}),i.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},i.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},i.prototype.execute=function(t){this._rs.execute(t)},i.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},i.prototype.getFirstRow=function(){return null},i.prototype.getLastRow=function(){return null},i.prototype.getPrevRow=function(t){return null},i.prototype.getNextRow=function(t){return null},i.prototype.canMoveRows=function(t,e,i){if(i&&this.canMoveRow(e,!1)&&t&&t.length>0){var o=t[0].parent;if(o!==i.parent)return!1;for(var n=1,r=t.length;n<r;n++)if(o!==t[n].parent)return!1;var s=!1;for(n=0;n<t.length;n++){var a=t[n];a&&a.isDataRow&&(s=!0)}return s}},i.prototype._getMoveTarget=function(t,e,i,o){if("keydown"===t){var n=this.getItem(i),r=n.parent;if(n.childIndex+e.length>=r.children.length&&o>0||0===n.childIndex&&o<0)return;var s=this.getItem(i+o);if(n.level===s.level)return s;var a=n.childIndex+o;if(!r||a<0||a>=r.children.length)return;return r.children[a]}return this.getItem(i+o)},i.prototype._doMoveRows=function(t,e){var i=e&&e.dataId;if(i>=0){for(var o=[],n=0,r=t;n<r.length;n++){var s=r[n],a=s&&s.dataId;a>=0&&o.push(a)}if(o.length>0){var l=this.dataSource,u=l.rowsByIds(o,!1);if(u.length>0)return l.moveRows(u,l.rowById(i))}}return!1},i.prototype._fitLayoutWidth=function(e){if(!e.visible)return 0;var i,o=this.itemSource,n=this.getIndex(this.topIndex,e.firstColumn),r="",s=0;i=r=e.firstColumn.header.displayText;var a,l=this.getBodyCellAt(n,!1),u=l&&l.renderer2&&l.renderer2._dom,c=l&&l.renderer2 instanceof td,h={0:xt.getTextLength(i)},p={0:i};if(u){var d=Ct(u).getComputedStyle(u);if(d){r=d.paddingLeft;var f=parseInt(r.substr(0,r.indexOf("px")));s+=f>0?f:0,r=d.paddingRight,s+=(f=parseInt(r.substr(0,r.indexOf("px"))))>0?f:0,a={fontSize:d.fontSize,fontFamily:d.fontFamily,fontWeight:d.fontWeight,fontStyle:d.fontStyle}}}for(var g=0,y=o.itemCount;g<y;g++)n.itemIndex=g,h[C=c?n.item.level:0]=h[C]||0,r=this.getDisplayText(n),xt.getTextLength(r)>h[C]&&(h[C]=xt.getTextLength(r),p[C]=r);for(var _=0,m=0,v=0,b=Object.keys(h);v<b.length;v++){var C=b[v];_=c?parseInt(C)*this.linesView.levelWidth+6+(this.treeOptions.iconVisible?24:0):6,_+=this.container.measureText("rg-data-cell",p[C],a),m=Math.max(m,_)}s+=m;var w=e.firstColumn,S=w.editor,E=this.delegate.getCellEditor(pa.getEditorType(S));return E.hasButton(this.displayOptions.showNativeEditButton,S)&&(s+=this.body.editButtonWidth*E.buttonCount),w.button!==t.CellButton.NONE&&(s+=this.body.cellButtonWidth),s},i.prototype.$_getVisibleAncestor=function(t){var e=this._rs.getItemOfRow(t);if(e){for(;e&&!e.visible;)e=e.parent;return e}return null},i.prototype.onItemProviderReset=function(t){this._currentRowId=-1,e.prototype.onItemProviderReset.call(this,t)},i.prototype.onTreeItemProviderItemChanged=function(t,e){this.invalidateLayout(),this.fireEvent(i.CHANGED,e)},i.prototype.onTreeItemProviderExpanding=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(i.EXPANDING,e)},i.prototype.onTreeItemProviderExpanded=function(t,e){this.fireEvent(i.EXPANDED,e)},i.prototype.onTreeItemProviderCollapsing=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(i.COLLAPSING,e)},i.prototype.onTreeItemProviderCollapsed=function(t,e){this.fireEvent(i.COLLAPSED,e)},i.EXPANDING="onTreeViewExpanding",i.EXPANDED="onTreeViewExpanded",i.COLLAPSING="onTreeViewCollapsing",i.COLLAPSED="onTreeViewCollapsed",i.CHANGED="onTreeViewChanged",i}(Rh),dd=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.layout=function(e){t.prototype.layout.call(this,e),this.$_layoutLines()},e.prototype.$_layoutLines=function(){var t=this.grid,e=t.linesView;if(e.visible=t.treeOptions.lineVisible){var i=this.fixedLayoutCount>0,o=(i?this.fixedBodyBounds:this.bodyBounds).clone();i?(o.y+=this.fixedContentBounds.y,o.x+=this.fixedContentBounds.x):(o.y+=this.contentBounds.y,o.x+=this.contentBounds.x),this.layoutCount>0?o.width=Math.max(0,this.getLayoutWidth(0)):o.width=0,e.setRect(o),e.levelWidth=16,e.setRange(t,this.topIndex,Math.min(t.itemCount,this.topIndex+this.itemCount)-1),e.layout(this)}},e}(Cl),fd=function(t){function e(){var e=t.call(this)||this;return e._columns=null,e}return n(e,t),e.prototype._doDispose=function(){this._columns=null,t.prototype._doDispose.call(this)},e.prototype.setColumns=function(t){this._columns=[];for(var e=0;e<t.length;e++)t[e].layout instanceof Yr&&this._columns.push(t[e].layout.firstColumn.name)},e.prototype.setItemIndex=function(t,e){this._itemIndex=t,this._startCol=e},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){if(t===e.ID_ROW)return String(this._itemIndex+1);throw new Lt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(t==e.ID_EXCELCOLUMN){if(i<0||i>=this._columns.length)throw new Lt("Data field index out of bounds:"+i);return this._columns[i]}throw new Lt("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_EXCELCOLUMN)throw new Lt("Invalid identifier indexer: "+t);if(this._columns){var n=this._columns.indexOf(i);if(n<0||n>=this._columns.length)throw new Lt("Column is not exists:"+i);return qh.toColCaption(n+this._startCol)}},e.ID_EXCELCOLUMN=0,e.ID_ROW=1,e.IDENTS={excelcolumn:e.ID_EXCELCOLUMN,row:e.ID_ROW},e}(jt),gd=function(e){function i(){var t=e.call(this)||this;return t._gridIndex=0,t._numberFormatId=0,t._textFormatId=49,t._dateFormatId=14,t._rowLevels=0,t._indents=0,t._indentWidth=3,t._seriesCell=new on,t._excelFormulaRuntime=new fd,t}return n(i,e),i.prototype.dispose=function(){return e.prototype.dispose.call(this),this._seriesCell=this._seriesCell.dispose(),this._linkRenderer=this._linkRenderer&&this._linkRenderer.dispose(),this._templateRenderer=this._templateRenderer&&this._templateRenderer.dispose(),this._imageRenderer=this._imageRenderer&&this._imageRenderer.dispose(),this._excelFormulaRuntime=this._excelFormulaRuntime.dispose(),null},i.prototype._progressCallback=function(t,e,i,o){var n=this._progressGrid,r=this._multiOptions;n&&n.setExportProgress(i,o+r.prepareProgress,r.progressMessage)},i.prototype.export=function(t,i){if(e.prototype.export.call(this,t,i),this._progressGrid=t,i){var o=this._multiOptions=i,n=this._multiOptions.exportGrids;if(n&&!(n.length<=0)){var r=wt(t.container._containerDiv).documentElement,s=new vp(r);if(this._mergeHeads={},o.showProgress)this._allCount=this._prepareCount(o,n),this._progressMax=this._allCount+o.prepareProgress,this._progressPos=0,this._progressStep=Math.max(this._allCount/10|0,1),o.progressCallback?this.setProgress=o.progressCallback:(this._progressGrid&&this._progressGrid.beginExportProgress(o.progressMessage),this.setProgress=this._progressCallback),this._exportGridAsync(s,o,this._gridIndex=0,function t(){var e=++this._gridIndex;e<o.exportGrids.length?this._exportGridAsync(s,o,e,t.bind(this)):(!i.progressCallback&&this._progressGrid&&this._progressGrid.endExportProgress(),this.save())}.bind(this));else{for(var a=0,l=n.length;a<l;a++)this._exportGrid(s,n[a].options);this.save()}}}},i.prototype.buildBook=function(t){var e=this._exportOptions.grid;e.isTree()?this.buildTreeSheet(e,t):this.buildSheet(e,t)},i.prototype.buildSheet=function(t,e){var i=this,o=this._exportOptions,n=this._workbook,r=n.createSheet(this._sheetName,o),s=t.displayOptions;if(this._defaultHeight=s.rowHeight||s.minRowHeight,this._rowGrouped=t.rowGrouped,this._mergedGrouped=t.mergedRowGrouped,this._rowGrouped&&(this._rowLevels=t.rowGroupLevels),this._startItem=0,o.allItems&&this._rowGrouped){this.allItems=t.itemSource.getAllItems();var a=t.layoutManager.fixedItemCount;if(a>0)for(var l=0;l<a;l++)this.allItems.splice(l,0,t.getItem(l))}else if(o.pagingAllItems&&t.paged){var u=t.itemSource;u instanceof bp&&(this.allItems=u.getPagingAllItems()),o.onlyCheckedItems&&!t.rowGrouped&&(this.allItems=this.allItems.filter((function(t){return t.checked})))}else o.onlyCheckedItems&&!t.rowGrouped&&(this.allItems=t.getCheckedItems(!1));var c=this.allItems,h=c?c.length:t.itemCount;if(!this._rowGrouped){this._startItem=o.start>0?o.start:0;var p=o.count>0?o.count:h;h=p>0?this._startItem+p>h?h-this._startItem:p:h-this._startItem}this._indexItem=this._startItem,this._lastItem=this._startItem+h,this._currentRow=o.yOffset,r.setFirstCol(this._startCol=o.xOffset),this._prepareCommonStyles(t),this._buildColumns(t),r.createBorderEdges(Hh.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(n),this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1,o.headerSummary),this.buildItems(t,(function(){i.footer&&i.buildSummaryItem(t,!0,o.footer),i._buildDocumentTail(n),i._buildUserCells(t,n),e&&e()}))},i.prototype.buildHeader=function(t){for(var e=this._workbook,o=e.currentSheet,n=this._preparer,r=n.colCount,s=n.headerRowCount,a=t.header.heights||[],l=a&&a.length>0?t.header.minRowHeight:Math.max(t.header.height,t.header.minRowHeight*s)/s,u=[],c=0;c<s;c++)u.push(Math.max(a[c]||l,l)*i.LINE_HEIGHT);var h=this._indents,p=this._currentRow;o.setFirstRow(this._currentRow);var d,f=this._startCol,g=this._headerCellStyle,y=[];for(c=0;c<s;c++)y.push(o.borrowRow(p+c,u[c]));if(this.indicator){if((d=y[0]).addText(f,this.indicatorHead,g),s>1){for(c=1;c<s;c++)y[c].addBlank(f,g);o.addMerge(p,f,s,1)}f++}if(this.checkBar){if((d=y[0]).addText(f,this.checkBarHead,g),s>1){for(c=1;c<s;c++)y[c].addBlank(f,g);o.addMerge(p,f,s,1)}f++}if(h>0){for(var _=0;_<h;_++){for(c=0;c<s;c++)y[c].addBlank(_+f,this._indentHeadStyle);o.addMerge(p,_+f,s,1)}f+=h}for(c=0;c<s;c++){var m=p+c;for(d=y[c],_=0;_<r;_++){var v=n.getHeader(c,_),b=v&&v.layout,C=_+f;if(b.isProxy||v.spanned)d.addBlank(C,g);else{var w=b.displayText,S=this._preparer.documentCssStyles,E=b instanceof Yr?b.firstColumn.header:b.header,x=E.exportStyleName||E.styleName;g=this._headerCellStyle,x&&(g=this._parseStyles(e,this._inheritStyles([this._headerCssStyle,Hh.getSelectorStyle(S,"."+x)]),!0)),d.addText(C,w,g);var O=0,R=b.getHeaderSpan()-1,I=b.parent,T=I&&I.vertical;if(R>0){var P=0,D=b.vindex+1;if(T)for(;P++<R&&P<s;)O+=I.getVisible(D++)._hspan,n.getHeader(c+P,_).spanned=!0;else for(;P++<R&&_+P<r&&D<I.visibleCount;)O+=I.getVisible(D++)._cspan,n.getHeader(c,_+P).spanned=!0}T?o.addMerge(m,C,b.hspan+O,b.cspan):o.addMerge(m,C,b.hspan,b.cspan+O)}}}this._currentRow+=s,this._exportOptions.applyFixed&&o.setFixedInfo(this._currentRow,void 0),o.setLastRow(this._currentRow-1)},i.prototype.buildSummaryItem=function(t,e,o){function n(t,i,o,n,s){var a=r.getCell(o.layout),l=this._exportOptions,u=a.value;if(u instanceof Date)l.datetimeCallback?(u=l.datetimeCallback(-1,o.name,u))instanceof Date?t.addDate(i,u,s):t.addText(i,u,s):t.addDate(i,u,s);else if(isNaN(u)){var c=e?o.getFooter(r._childIndex):o.getHeaderSummary(r._childIndex),h=c&&r.getCellFormatters(c,null),p=h?a.getDisplayText(h):u;t.addText(i,p||"",s)}else t.addNumber(i,u,s)}var r,s=this._workbook.currentSheet,a=this._preparer,l=a.colCount,u=a.dataRowCount,c=this._indents,h=e?t.footers:t.headerSummaries,p=o===Ah?h.count:h.visibleCount,d=p*u,f=this._currentRow;s.setFirstRow(this._currentRow);for(var g,y=this._startCol,_=t.layoutManager.getDataRowHeights(u),m=_.reduce((function(t,e){return t+e}),0),v=[],b=0;b<p;b++){var C=(r=o===Ah?h.get(b):h.getVisible(b)).heights||[],w=C.reduce((function(t,e){return t+e}),0),S=r.height;S=-1===S?-1:S>0?S/u:Math.max(r.minHeight,t.heightMeasurer.summaryHeight,S);for(var E=0;E<u;E++)w>0&&C[E]>0?v.push(C[E]*i.LINE_HEIGHT):m>0&&_[E]>0?v.push(_[E]*r.height/m*i.LINE_HEIGHT):v.push(-1===S?-1:S*i.LINE_HEIGHT)}for(b=0;b<p*u;b++)s.borrowRow(f+b,v[b]);if(this.indicator){b=0;for(var x=0;b<p;b++)for(var O=0;O<u;O++)g=s.borrowRow(f+x,v[x]),e?0===x?g.addText(y,this.indicatorFoot,this._indicatorFootStyle):g.addBlank(y,this._indicatorFootStyle):0===x?g.addText(y,this.indicatorSummary,this._indicatorSumStyle):g.addBlank(y,this._indicatorSumStyle),x++;s.addMerge(f,y++,d,1)}if(this.checkBar){for(b=0,x=0;b<p;b++)for(O=0;O<u;O++)g=s.borrowRow(f+x,v[x]),e?0===x?g.addText(y,this.checkBarSummary,this._checkBarSumStyle):g.addBlank(y,this._checkBarSumStyle):0===x?g.addText(y,this.checkBarFoot,this._checkBarFootStyle):g.addBlank(y,this._checkBarFootStyle),x++;s.addMerge(f,y++,d,1)}if(c>0){for(var R=0;R<c;R++){for(b=0,x=0;b<p;b++)for(O=0;O<u;O++)(g=s.borrowRow(f+x,v[x])).addBlank(y+R,this._indentFootStyle),x++;s.addMerge(f,y+R,p*u,1)}y+=c}for(var I=f,T=(e?a.getFooterItem:a.getSummaryItem).bind(a),P=(E=0,0);E<p;E++)for(r=o===Ah?h.get(E):h.getVisible(E),b=0;b<u;b++,P++){for(g=s.borrowRow(I,v[P]),R=0;R<l;R++){var D=T(E*u+b,R),k=D.layout,A=k.firstColumn,L=R+y,M=k.firstColumn.$_hash,F=(e?this._columnFooterStyles:this._columnSummaryStyles)[M][E];if(k.isProxy||D.spanned)g.addBlank(L,F);else{var N=0,V=e?k.getFooterSpan(E)-1:k.getSummarySpan(E)-1,B=e?k.getFooterUserSpan(r._childIndex):k.getSummaryUserSpan(r._childIndex),G=k.parent,j=G&&G.vertical;if(B){var H=B.footerCount||0,$=H>0?H*u:B.rowspan||1,W=B.colspan||1;n.call(this,g,L,A,E,F);for(var U=0,z=0,K=0;K<$;K++){var Y=(e?a._footerCells:a._summaryCells)[E*u+b+K];Y&&U++;for(var q=0;Y&&q<W;q++){var X=Y[R+q];X&&(z=Math.max(z,q+1),X.spanned=!0)}}($>1||W>1)&&s.addMerge(I,L,U,z)}else{if(V>0){var Q=0,J=k.vindex+1;if(j)for(;Q++<V&&Q<u;)N+=G.getVisible(J++)._dspan,T(E*u+b+Q,R).spanned=!0;else for(;Q++<V&&R+Q<l&&J<G.visibleCount;)N+=G.getVisible(J++)._cspan,T(E*u+b,R+Q).spanned=!0}n.call(this,g,L,A,E,F),j?s.addMerge(I,L,k._dspan+N,k._cspan):s.addMerge(I,L,k._dspan,k._cspan+N)}}}I++}this._rowGrouped&&this._exportOptions.showLevelOutline&&s.setRowLevel(I,1),this._currentRow+=d,s.setLastRow(this._currentRow-1)},i.prototype.buildItems=function(t,e){for(var i=this._exportOptions,o=i.showIndicatorRow(t),n=i.showIndicatorReverse(t),r=this.allItems,s=r?r.length:t.itemCount,a=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,l=this._indexItem;l<a;l++){var u=r?r[l]:t.getItem(l);if(this._indicatorNo=o?u.isDataRow?u.dataRow+1:void 0:n?s-l:l+1,u instanceof So)this.buildRow(t,u);else if(u instanceof Un)this.buildMergedGroupHeader(t,u);else if(u instanceof Wn||u instanceof Oo)this._preparer.groupModel!=u.parent&&this._preparer.setGroupFooterItms(u.parent,i.allItems,t.rowGroup.mergeMode),u instanceof Wn?this.buildMergedGroupFooter(t,u):this.buildGroupFooter(t,u);else{if(!(u instanceof xo))throw new Error("Unkown item type");this.buildGroupHeader(t,u)}this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(t.handler,"process",this._progressMax,this._progressPos),this._indexItem=a,this._indexItem>=this._lastItem?e&&e():setTimeout(function(){this.buildItems(t,e)}.bind(this),0)},i.prototype.buildRow=function(e,o){var n,r,s=e.rowGroup,a=this._preparer,l=a.dataRowCount,u=a.colCount,c=e.layoutManager,h=this._columnMerged,p=this._mergeHeads,d=this._indents,f=this._workbook.currentSheet,g=this._currentRow;f.setFirstRow(this._currentRow);var y,_=this._startCol,m=e.displayOptions,v=m.rowHeightCallback;o.index>=0&&v&&(c.getRowHeightOfCallback(e,o.index),y=o.heights);var b=(y=y||c.getDataRowHeights(l)).reduce((function(t,e){return t+e}),0)||o.height;isNaN(b)&&(b=-1===m.rowHeight?-1:Math.max(m.rowHeight||0,m.minRowHeight*l)),b=-1===b?-1:b>0?b/l:b;for(var C=s.expandedAdornments===t.RowGroupAdornments.SUMMARY&&s.mergeMode,w=[],S=0;S<l;S++)w.push(f.borrowRow(g+S,-1===b?-1:(y[S]||b)*i.LINE_HEIGHT));for(this.indicator&&this._buildIndicatorCell(e,f,w,this._indicatorNo,g,_++,l),this.checkBar&&this._buildCheckBarCell(e,f,w,o.checked,g,_++,l),S=0;S<l;S++){var E=w[S];E._row=S;var x=g+S,O=_;for(n=0;n<d;n++)E.addBlank(O,this._indentBarStyle),O++;for(n=0;n<u;n++){var R=n+O,I=a.getItem(S,n),T=I.layout,P=T.firstColumn,D=P.$_hash,k=this._columnStyles[D],A=ps.tempItem(e,o,T);if(T.isProxy||I.spanned)E.addBlank(R,I.style||k);else{var L=T._dspan,M=!1,F=!1;if(h){var N=c.getMergeRoom(A);if(N)if(N.isHead(A)&&0==S||this._startItem>0&&o.index==this._startItem&&!C)k=this._buildValueCell(e,f,E,o,T,R,O),p[D]={startRow:x,style:k},M=!0,F=!P.mergeGrouped&&o.isDataRow;else{var V=p[D];E.addBlank(R,V.style||k),(N.isTail(A)||this._lastItem>0&&o.index==this._lastItem-1)&&(L=x-V.startRow+l,f.addMerge(V.startRow,R,L,1+(V.cols||0)),delete p[D]),M=!0,F=!P.mergeGrouped&&o.isDataRow}else if(this.allItems&&!o.visible&&e.isGroupedColumn(P)&&this._mergedGrouped){for(E.addBlank(R,k),M=!0,r=o.parent;P.groupLevel!=r.level&&r;)r=r.parent;var B=p[D]?p[D].startRow:void 0;switch(e.rowGroup.expandedAdornments){case t.RowGroupAdornments.NONE:o==r.firstItem&&o==r.lastDataItem?M=!1:o==r.firstItem?(k=this._buildValueCell(e,f,E,o,T,R,O),p[D]={startRow:x,style:k}):o==r.lastDataItem&&(L=x-B+l,f.addMerge(B,R,L,1));break;case t.RowGroupAdornments.BOTH:o==r.lastDataItem&&0==r.footerCount&&(L=x-B+l,f.addMerge(B,R,L,1));break;case t.RowGroupAdornments.HEADER:case t.RowGroupAdornments.SUMMARY:o==r.firstItem&&o==r.lastDataItem?p[D]?(L=x-B+l,f.addMerge(B,R,L,1),delete p[D]):M=!1:o==r.lastDataItem?(L=x-B+l,f.addMerge(B,R,L,1),delete p[D]):r.firstDataItem;break;case t.RowGroupAdornments.FOOTER:o==r.firstItem&&(k=this._buildValueCell(e,f,E,o,T,R,O),p[D]={startRow:x,style:k}),o==r.lastDataItem&&(r.footerCount>0||(L=x-p[D].startRow+l,f.addMerge(p[D].startRow,R,L,1),delete p[D]))}}}if(!M||F){var G=!F&&this._buildValueCell(e,f,E,o,T,R,O),j=T.parent,H=j&&j.vertical,$=!0,W=T.spanCallback,U=W?W(e.handler,T,o.index):void 0;void 0===U&&(U=T.dataSpan),void 0===U&&($=!1,U=T.cellSpan);var z=0;if(U>0){var K=0,Y=T.vindex+1;if(H)for(U--;K++<U&&K<l;)z+=(et=j.getVisible(Y++))._dspan,a.getItem(S+K,n).spanned=!0,a.getItem(S+K,n).style=G;else{for(var q=T._dspan,X=[],Q=0;Q<q;Q++)X.push(0);for(var J=0;J<q;J++){X[J]+=T._defColSpan;for(var Z=1;Z<U&&n+Z<u;Z++){var tt=a.getItem(S+J,n+Z).layout;tt&&!tt.isProxy&&(X[J]+=tt._defColSpan)}}for($=Math.max.apply(Math,X)===U;K++<U-1&&n+K<u&&($||Y<j.visibleCount);){var et;if(!(et=$?a.getItem(S,n+K).layout:j.getVisible(Y++)))break;!et.isProxy&&(z+=et._defColSpan)}for(T._defColSpan+z!==U&&(z=0),K=1;K<T._defColSpan+z;K++){if(q>1&&$)for(Z=1;Z<l&&q>Z;Z++)a.getItem(S+Z,n+K).spanned=!0,a.getItem(S+Z,n+K).style=G;a.getItem(S,n+K).spanned=!0,a.getItem(S,n+K).style=G}}}if(F){var it=p[D];it&&(it.cols=z)}else H?f.addMerge(x,R,T._dspan+z,T._defColSpan):f.addMerge(x,R,T._dspan,T._defColSpan+z)}}}this._rowGrouped&&this._exportOptions.showLevelOutline&&f.setRowLevel(x,o.level)}this._currentRow+=l,f.setLastRow(this._currentRow-1)},i.prototype.buildGroupHeader=function(t,e){var o=this._workbook,n=o.currentSheet,r=this._preparer,s=e.level-1,a=this._indentBarStyle,l=r.colCount,u=this._currentRow;n.setFirstRow(this._currentRow);var c=this._startCol,h=t.layoutManager.getDataRowHeights(r.dataRowCount).reduce((function(t,e){return t+e}),0);h=h||Math.max(t.displayOptions.rowHeight,t.displayOptions.minRowHeight,t.displayOptions.minTableRowHeight*r.dataRowCount);var p=this._exportOptions,d=n.borrowRow(u,h*i.LINE_HEIGHT);if(this.indicator&&this._buildIndicatorCell(t,n,d,this._indicatorNo,u,c++,1),this.checkBar&&this._buildCheckBarCell(t,n,d,e.checked,u,c++,1),p.indenting)for(var f=0;f<s;f++)d.addBlank(c,a),c++;var g=t.rowGroup.getHeaderText(e),y=this._groupHeaderStyle,_=this._preparer.documentCssStyles,m=this._dynamicStyles,v="groupheader-style=.rg-rowgroup-header-level-"+e.level;if(m[v])y=m[v];else{var b=Hh.getSelectorStyle(_,".rg-rowgroup-header-level-"+e.level);b&&(y=this._extendStyles(o,y,b)),this._dynamicStyles[v]=y}d.addText(c,g,y),this._indents>0&&(l+=this._indents-(e.level-1));for(var C=1;C<l;C++)d.addBlank(C+c,y);n.addMerge(u,c,1,l),this._rowGrouped&&p.showLevelOutline&&n.setRowLevel(u,e.level),this._currentRow++,n.setLastRow(this._currentRow-1)},i.prototype.buildGroupFooter=function(e,o){function n(t,i,n,r){var s=nh.getValue(o,n),a=this._exportOptions;if(s instanceof Date)a.datetimeCallback?(s=a.datetimeCallback(o.index,n.name,s))instanceof Date?t.addDate(i,s,r):t.addText(i,s,r):t.addDate(i,s,r);else if(isNaN(s))if(s)t.addText(i,s,r);else{var l=void 0;if(o){var u=ps.tempItem(e,o,n);l=e.getDisplayText(u)||""}else l=n.groupFooter.text||"";t.addText(i,l,r)}else t.addNumber(i,s,r)}var r,s,a,l=this._workbook.currentSheet,u=this._exportOptions,c=this._preparer,h=c.dataRowCount,p=c.colCount,d=this._groupFooterCellStyle,f=this._indentBarStyle,g=this._indents,y=o.level,_=this._currentRow;l.setFirstRow(this._currentRow);for(var m=this._startCol,v=e.rowGroup.expandedAdornments==t.RowGroupAdornments.SUMMARY,b=Math.max(Math.max(this._defaultHeight,e.displayOptions.minRowHeight)/h,e.displayOptions.minTableRowHeight),C=e.layoutManager.getDataRowHeights(h),w=[],S=0;S<h;S++)w.push(l.borrowRow(_+S,(C[S]||b)*i.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(e,l,w,this._indicatorNo,_,m++,h),this.checkBar&&this._buildCheckBarCell(e,l,w,o.checked,_,m++,h);var E=c.getGroupFooterCells(),x=o.vindex*h;for(S=0;S<h;S++){var O=_+S,R=m,I=w[S];if(g>0)for(var T=0;T<g;T++)v?T<y-2?I.addBlank(R,f):I.addBlank(R,d):I.addBlank(R,f),0==S&&h>1&&l.addMerge(O,R,h,1),R++;for(T=0;T<p;T++){r=T+R;var P=E[x+S][T],D=P.layout;if(s=D.firstColumn,a=this._columnGroupFooterStyles[s.$_hash][o.footerIndex],u.applyDynamicStyles){var k=ps.tempItem(e,o,D),A=e.rowGroup.getFooterCell(k),L=A.getSummary();a=this.$_summaryStyleSet(A,L,a)}if(D.isProxy||P.spanned)I.addBlank(r,a);else{var M=D.parent,F=M&&M.vertical,N=0,V=0,B=D.getGroupFooterUserSpan(o.parent,o.footerIndex),G=B?0:D.getGroupFooterSpan(o.index,o.footerIndex)-1;if(B){var j=B.footerCount||0;N=j>0?j*h:B.rowspan||1,V=B.colspan||1,N=Math.min((o.parent.footerCount-o.vindex)*h,N),l.addMerge(O,r,N,V);for(var H=0;H<N;H++)for(var $=0;$<V;$++)E[x+H+S][T+$].spanned=!0}else if(G>0){var W=0;if(k=D.vindex+1,F)for(;W++<G&&W<h;)N+=M.getVisible(k++)._dspan,E[x+W][T].spanned=!0;else for(;W++<G&&k<Math.min(p,M.visibleCount);)V+=M.getVisible(k++)._cspan,E[x+S][T+W].spanned=!0}n.call(this,I,r,s,a),!B&&l.addMerge(O,r,D._dspan+N,D._cspan+V)}this._rowGrouped&&u.showLevelOutline&&l.setRowLevel(O,o.level)}}this._currentRow+=h,l.setLastRow(this._currentRow-1)},i.prototype.buildMergedGroupHeader=function(t,e){var o=this._workbook.currentSheet,n=this._preparer,r=e.level,s=Math.max(t.displayOptions.rowHeight,t.displayOptions.minRowHeight,t.displayOptions.minTableRowHeight*n.dataRowCount),a=n.colCount,l=this._currentRow;o.setFirstRow(this._currentRow);var u=this._startCol,c=o.borrowRow(l,-1===s?-1:s*i.LINE_HEIGHT);this.indicator&&this._buildIndicatorCell(t,o,c,this._indicatorNo,l,u++,1),this.checkBar&&this._buildCheckBarCell(t,o,c,e.checked,l,u++,1);for(var h=0;h<r-1;h++){var p=n.getItem(0,u+h);c.addBlank(u+h,this._columnStyles[p.layout.firstColumn.$_hash])}var d=r-1,f=n.getItem(0,d).layout,g=f.firstColumn,y=this._buildValueCell(t,o,c,e.firstItem,f,u+d);this._mergeHeads[g.$_hash]={startRow:l,style:y};var _=t.rowGroup.getHeaderText(e);for(h=u+r,y=this._groupHeaderStyle,r<n.colCount&&c.addText(h++,_,y);h<a+u;h++)c.addBlank(h,y);a-r>1&&o.addMerge(l,r+u,1,a-r),this._currentRow++,o.setLastRow(this._currentRow-1)},i.prototype.buildMergedGroupFooter=function(e,o){function n(t,i,n,r){var s=nh.getValue(o,n),a=this._exportOptions;if(s instanceof Date)a.datetimeCallback?(s=a.datetimeCallback(o.index,n.name,s))instanceof Date?t.addDate(i,s,r):t.addText(i,s,r):t.addDate(i,s,r);else if(isNaN(s)){var l=ps.tempItem(e,o,n),u=e.getDisplayText(l)||"";t.addText(i,u,r)}else t.addNumber(i,s,r)}var r,s,a,l,u=this._workbook.currentSheet,c=this._exportOptions,h=this._preparer,p=h.dataRowCount,d=h.colCount,f=h.getItemLevel(o),g=this._currentRow;u.setFirstRow(this._currentRow);for(var y=this._startCol,_=e.rowGroup.expandedAdornments==t.RowGroupAdornments.SUMMARY,m=Math.max(Math.max(this._defaultHeight,e.displayOptions.minRowHeight)/p,e.displayOptions.minTableRowHeight),v=e.layoutManager.getDataRowHeights(p),b=[],C=e.layoutManager,w=0;w<p;w++){var S=u.borrowRow(g+w,(v[w]||m)*i.LINE_HEIGHT);S._row=w,b.push(S)}for(this.indicator&&this._buildIndicatorCell(e,u,b,this._indicatorNo,g,y++,p),this.checkBar&&this._buildCheckBarCell(e,u,b,o.checked,g,y++,p),r=0;r<f;r++){a=(k=h.getItem(0,r).layout).firstColumn;var E=this._mergeHeads[a.$_hash];l=E?E.style:this._columnStyles[a.$_hash];for(var x=o.parent;x&&a.groupLevel!==x.level;)x=x.parent;if(this.allItems||o.parent.expanded){for(w=0;w<p;w++)_&&0===w&&x&&x.getFirstVisibleItem(!0)===o?(l=this._buildValueCell(e,u,b[w],o.parent.firstItem,k,y+r),this._mergeHeads[a.$_hash]={startRow:g,style:l}):b[w].addBlank(y+r,l);if(this._columnMerged)if(_)a.groupLevel;else{var O=this._mergeHeads[a.$_hash].startRow;if(o.visible){var R=ps.tempItem(e,o,k),I=C.getMergeRoom(R);I&&I.isTail(R)&&u.addMerge(O,r+y,g+p-O,k._defColSpan)}else x&&x.last===o&&u.addMerge(O,r+y,g+p-O,k._defColSpan)}}else for(w=0;w<p;w++)this._buildValueCell(e,u,b[w],o.parent.firstItem,k,y+r)}var T=h.getGroupFooterCells(),P=o.vindex*p;for(w=0;w<p;w++){var D=g+w;for(r=f;r<d;r++){s=r+y;var k,A=T[P+w][r];if(a=(k=A.layout).firstColumn,k.isProxy||A.spanned)l=this._columnStyles[a.$_hash],b[w].addBlank(s,l);else{var L=k.parent,M=L&&L.vertical,F=0,N=0,V=k.getGroupFooterUserSpan(o.parent,o.footerIndex),B=V?0:k.getGroupFooterSpan(o.index,o.footerIndex)-1;if(V){var G=V.footerCount||0;F=G>0?G*p:V.rowspan||1,N=V.colspan||1,F=Math.min((o.parent.footerCount-o.vindex)*p,F),u.addMerge(D,s,F,N);for(var j=0;j<F;j++)for(var H=0;H<N;H++)T[P+j+w][H+r].spanned=!0}else if(B>0){var $=0,W=k.vindex+1;if(M)for(;$++<B&&$<p;)F+=L.getVisible(W++)._dspan,T[P+$][r].spanned=!0;else for(;$++<B&&W<Math.min(d-1,L.visibleCount);)N+=L.getVisible(W++)._cspan,T[P+w][r+$].spanned=!0}if(l=this._columnGroupFooterStyles[a.$_hash][o.footerIndex],c.applyDynamicStyles){W=ps.tempItem(e,o,k);var U=e.rowGroup.getFooterCell(W),z=U.getSummary();l=this.$_summaryStyleSet(U,z,l)}n.call(this,b[w],s,a,l),!V&&u.addMerge(D,s,k._dspan+F,k._cspan+N)}this._rowGrouped&&c.showLevelOutline&&u.setRowLevel(D,f)}}this._currentRow+=p,u.setLastRow(this._currentRow-1)},i.prototype.buildTreeSheet=function(t,e){var i=this,o=this._exportOptions,n=this._workbook;o.allItems&&(this.allItems=t.getAllItems());var r=this.allItems,s=r?r.length:t.itemCount,a=n.createSheet(this._sheetName,o),l=t.displayOptions;if(this._defaultHeight=l.rowHeight||l.minRowHeight,this._rowLevels=t.getLevels(!1),this._startItem=this._indexItem=0,!this._rowGrouped){this._startItem=o.start>0?o.start:0;var u=o.count>0?o.count:s;s=u>0?this._startItem+u>s?s-this._startItem:u:s-this._startItem}this._lastItem=this._startItem+s,this._prepareCommonStyles(t),this._currentRow=o.yOffset,this._startCol=o.xOffset,this._buildColumns(t),a.createBorderEdges(Hh.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(n),this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1,o.headerSummary),this.buildTreeItems(t,(function(){i.footer&&i.buildSummaryItem(t,!0,o.footer),i._buildDocumentTail(n),i._buildUserCells(t,n),e&&e()}))},i.prototype.buildTreeItems=function(t,e){for(var i=this._exportOptions.showIndicatorRow(t),o=this.allItems,n=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,r=this._indexItem;r<n;r++){var s=o?o[r]:t.getItem(r);if(this._indicatorNo=s instanceof So&&i?s.dataRow:r+1,!(s instanceof or))throw new Error("Unkown tree item type");this.buildTreeRow(t,s),this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(t.handler,"process",this._progressMax,this._progressPos),this._indexItem=n,this._indexItem>=this._lastItem?e&&e():setTimeout(function(){this.buildTreeItems(t,e)}.bind(this),0)},i.prototype.buildTreeRow=function(t,e){var o,n=this._workbook.currentSheet,r=this._preparer,s=r.dataRowCount,a=r.colCount,l=this._indents,u=e.level,c=this._currentRow;n.setFirstRow(this._currentRow);var h=this._startCol,p=t.displayOptions,d=t.layoutManager.getDataRowHeights(s),f=d.reduce((function(t,e){return t+e}),0)||e.height;isNaN(f)&&(f=(p.rowHeight||p.minRowHeight)*s),f=-1===f?-1:f>0?f/s:f;for(var g=[],y=0;y<s;y++)g.push(n.borrowRow(c+y,-1===f?-1:(d[y]||f)*i.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(t,n,g,this._indicatorNo,c,h++,s),this.checkBar&&this._buildCheckBarCell(t,n,g,e.checked,c,h++,s);var _=this._bodyCellStyle;for(y=0;y<s;y++){var m=g[y];m._row=y;var v=c+y,b=l>0?h+u-1:h,C=r.getItem(y,0),w=C.layout,S=w.firstColumn,E=this._columnStyles[S.$_hash],x=l>0?l-u+1:0;for(o=0;o<u-1;o++)m.addBlank(o+h,_);for(w.isProxy||C.spanned?m.addBlank(b,E):(this._buildValueCell(t,n,m,e,w,b,b),n.addMerge(v,b,w._dspan,w._defColSpan+x)),o=0;o<x;o++)m.addBlank(1+o+b,E);for(b=l>0?h+l:h,o=1;o<a;o++){var O=o+b;if(S=(w=(C=r.getItem(y,o)).layout).firstColumn,E=this._columnStyles[S.$_hash],w.isProxy||C.spanned)m.addBlank(O,E);else{var R=w.parent,I=R&&R.vertical,T=w.spanCallback,P=T?T(t.handler,w,e.index)-1:void 0;void 0===P&&(P=w.getDataSpan()-1);var D=0;if(P>0){var k=0,A=w.vindex+1;if(I)for(;k++<P&&k<s;)D+=R.getVisible(A++)._dspan,r.getItem(y+k,o).spanned=!0;else for(;k++<P&&o+k<a&&A<R.visibleCount;)D+=R.getVisible(A++)._cspan,r.getItem(y,o+k).spanned=!0}this._buildValueCell(t,n,m,e,w,O,b),I?n.addMerge(v,O,w._dspan+D,w._cspan):n.addMerge(v,O,w._dspan,w._cspan+D)}}this._exportOptions.showLevelOutline&&n.setRowLevel(c,e.level)}this._currentRow+=s,n.setLastRow(this._currentRow-1)},i.prototype.prepare=function(){},i.prototype.finallize=function(){},i.prototype.save=function(){var e=this._multiOptions.zip||JSZip,i=function(i){var u=new e;if(i)for(var c=u.folder("xl/media"),h=Object.keys(i),p=0;p<h.length;p++){var d=i[h[p]];d.fileName&&d.buffer&&c.file(d.fileName,d.buffer)}var f=this._workbook.createParts();for(var g in f){var y=f[g];y.indexOf('xmlns=""')>=0&&(y=y.replace(/ xmlns=""/g,"").replace(/xmlns=""/g,"")),u.file(g,y)}if(a)u.generateAsync?u.generateAsync({type:"blob",compression:"DEFLATE",streamFiles:!0},(function(t){n.progressCallback&&n.progressCallback(null,"zip",100,t.percent)})).then((function(t){n.done&&"function"==typeof n.done&&n.done(),l.saveLocal(r,t,o)})):(n.done&&"function"==typeof n.done&&n.done(),l.saveLocal(r,u.generate({type:"blob",compression:"DEFLATE"}),o));else if(n.target===t.ExportTarget.STREAM)if(u.generateAsync)u.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},(function(t){n.progressCallback&&n.progressCallback(null,"zip",100,t.percent)})).then((function(t){n.done&&"function"==typeof n.done&&n.done(t)}));else{var _=u.generate({type:"base64",compression:"DEFLATE"});n.done&&"function"==typeof n.done&&n.done(_)}else u.generateAsync?u.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},(function(t){n.progressCallback&&n.progressCallback(null,"zip",100,t.percent)})).then((function(t){n.done&&"function"==typeof n.done&&n.done(),l.saveServer(r,t,n.url,o,s)})):(n.done&&"function"==typeof n.done&&n.done(),l.saveServer(r,u.generate({type:"base64",compression:"DEFLATE"}),n.url,o,s))}.bind(this),o=this.grid.doc,n=this._multiOptions,r=n.fileName,s=n.params,a="local"==n.target,l=this,u=this._workbook;if(e.support.blob||!a)if(u.hasDrawing){var c=u.getImageMap();u.downloader.buldDownload=n.bulkImageDownload,u.downloader.executeDownLoad(this,c,i)}else i();else alert("not supported on this browser")},i.prototype._prepareCount=function(t,e){for(var i=0,o=0,n=e.length;o<n;o++){var r=void 0,s=e[o].grid;if(s instanceof $p)if(t.allItems&&this._rowGrouped){r=s.itemSource.getAllItems();var a=s.layoutManager.fixedItemCount;if(a>0)for(var l=0;l<a;l++)r.splice(l,0,s.getItem(l))}else t.pagingAllItems&&s.paged?r=s.itemSource.getPagingAllItems():t.onlyCheckedItems&&!s.rowGrouped&&(r=s.getCheckedItems(!1));else s instanceof pd&&t.allItems&&(r=s.getAllItems());i+=r?r.length:s.itemCount}return i},i.prototype._inheritStyles=function(t){for(var e={length:0},i=0,o=t.length;i<o;i++)t[i]&&Hh.extendCssStyle(t[i],e);return e},i.prototype._prepareCommonStyles=function(t){var e,i,o=this,n=this._preparer.documentCssStyles,r=function(t){return Hh.getSelectorStyle(n,t)},s=function(t){var e=[];return t.forEach((function(t){var i="string"==typeof t?r(t):t;i&&e.push(i)})),o._inheritStyles(e)},a=r("table"),l=s([a,r("tr"),r("td")]),u=s(["html",".rg-root"]),c=r(".rg-header"),h=r(".rg-footer"),p=r(".rg-header-summary"),d=r(".rg-body"),f=r(".rg-fixed-body"),g=s([".rg-root table",".rg-root .rg-table",".rg-root table tr",".rg-root .rg-table tr",".rg-root table tr td",".rg-root .rg-table tr td",".rg-root .rg-table td"]),y=s([g,".rg-header table",".rg-header .rg-table",".rg-header table tr",".rg-header .rg-table tr",".rg-header table tr td",".rg-header .rg-table tr td"]),_=s([g,".rg-footer table",".rg-footer .rg-table",".rg-footer table tr",".rg-footer .rg-table tr",".rg-footer table tr td",".rg-footer .rg-table tr td"]),m=s([g,".rg-header-summary table",".rg-header-summary .rg-table",".rg-header-summary table tr",".rg-header-summary .rg-table tr",".rg-header-summary table tr td",".rg-header-summary .rg-table tr td"]),v=s([g,".rg-body table",".rg-body .rg-table",".rg-body table tr",".rg-body .rg-table tr",".rg-body table tr td",".rg-body .rg-table tr td"]),b=s([g,".rg-fixed-body .rg-table",".rg-fixed-body .rg-table tr",".rg-fixed-body table tr",".rg-fixed-body .rg-table tr td",".rg-fixed-body table tr td",".rg-fixed-body .rg-data-row"]),C=s([g,".rg-rowgroup-bar .rg-table",".rg-rowgroup-bar .rg-table tr",".rg-rowgroup-bar table tr",".rg-rowgroup-bar .rg-table tr td",".rg-rowgroup-bar table tr td"]),w=s([g,".rg-rowgroup-head .rg-table",".rg-rowgroup-head .rg-table tr",".rg-rowgroup-head table tr",".rg-rowgroup-head .rg-table tr td",".rg-rowgroup-head table tr td"]),S=s([g,".rg-rowgroup-foot .rg-table",".rg-rowgroup-foot .rg-table tr",".rg-rowgroup-foot table tr",".rg-rowgroup-foot .rg-table tr td",".rg-rowgroup-foot table tr td"]),E=s([g,v]),x=r(".rg-header-cell"),O=r(".rg-footer-cell"),R=r(".rg-header-summary-cell"),I=r(".rg-data-cell"),T=r(".rg-rowgroup-header"),P=r(".rg-rowgroup-footer"),D=r(".rg-rowgroup-footer-cell"),k=s([u,".rg-rowgroup-head",l,w]),A=s([u,".rg-rowgroup-foot",l,S]),L=s([u,".rg-rowgroup-bar",l,".rg-rowgroup-bar-cell",C]),M=r(".rg-data-row"),F=r(".rg-fixed-row"),N=s([u,".rg-rowbarcontainer",l,g,".rg-rowbarcontainer .rg-table tr",".rg-rowbarcontainer table tr",".rg-rowbarcontainer .rg-table tr td",".rg-rowbarcontainer table tr td",".rg-rowbarcontainer .rg-table tr td.rg-rowindicator-cell"]),V=s([u,".rg-foot",l,g,".rg-foot .rg-table tr td",".rg-rowindicator-foot"]),B=s([u,".rg-sum",l,g,".rg-sum .rg-table tr td",".rg-rowindicator-sum"]);this._indicatorCellStyle=this._parseStyles(this._workbook,N),this._indicatorFootStyle=this._parseStyles(this._workbook,V),this._indicatorSumStyle=this._parseStyles(this._workbook,B);var G=s([u,".rg-rowbarcontainer",l,g,".rg-rowbarcontainer .rg-table tr",".rg-rowbarcontainer table tr",".rg-rowbarcontainer .rg-table tr td",".rg-rowbarcontainer table tr td.rg-checkbar-cell"]),j=s([u,".rg-foot",l,g,".rg-foot .rg-table tr td",".rg-checkbar-foot"]),H=s([u,".rg-sum",l,g,".rg-sum .rg-table tr td",".rg-checkbar-sum"]);this._checkBarCellStyle=this._parseStyles(this._workbook,G),this._checkBarFootStyle=this._parseStyles(this._workbook,j),this._checkBarSumStyle=this._parseStyles(this._workbook,H),i=this._headerCssStyle=s([u,c,r("."+t.header.styleName),l,x,y,r("."+t.header.exportStyleName)]),this._headerCellStyle=this._parseStyles(this._workbook,i,!0);var $=this._exportOptions,W=$.footer===Ah,U=$.headerSummary===Ah;this._footerCellStyles=[];for(var z=0;z<(W?t.footers.count:t.footers.visibleCount);z++)i=s([u,h,i=(e=(W?t.footers.get(z):t.footers.getVisible(z)).styleName)?r("."+e):null,l,O,_]),this._footerCellStyles.push(this._parseStyles(this._workbook,i,!0));for(this._summaryCellStyles=[],z=0;z<(U?t.headerSummaries.count:t.headerSummaries.visibleCount);z++)i=s([u,p,i=(e=(U?t.headerSummaries.get(z):t.headerSummaries.getVisible(z)).styleName)?r("."+e):null,l,R,m]),this._summaryCellStyles.push(this._parseStyles(this._workbook,i,!0));if(this._groupFooterCellStyles=[],t instanceof $p)for(z=0;z<t.rowGroup.footers.count;z++){var K=t.rowGroup.footers.get(z);i=s([u,P,i=(e=K.exportStyleName||K.styleName)?r("."+e):null,l,D,E]),this._groupFooterCellStyles.push(this._parseStyles(this._workbook,i,!0))}i=this._cellCssStyle=s([u,d,a,v,M,I]),this._bodyCellStyle=this._parseStyles(this._workbook,i,!1),i=s([u,d,a,F,v,I]),this._bodyFixedCellStyle=this._parseStyles(this._workbook,i,!1),i=this._fixedCellCssStyle=s([u,f,a,M,b,I]),this._fixedCellStyle=this._parseStyles(this._workbook,i,!1),this._groupHeaderStyle=this._parseStyles(this._workbook,s([u,T])),this._groupFooterCellStyle=this._parseStyles(this._workbook,s([u,a,P,D,v])),this._indentHeadStyle=this._parseStyles(this._workbook,k),this._indentFootStyle=this._parseStyles(this._workbook,A),this._indentBarStyle=this._parseStyles(this._workbook,L),this._dynamicStyles={}},i.prototype._exportGridAsync=function(t,e,i,o){if(void 0===o&&(o=null),i<e.exportGrids.length){var n=e.exportGrids[i];setTimeout(function(){this._exportGrid(t,n.options,function(){o()}.bind(this))}.bind(this))}},i.prototype._exportGrid=function(t,e,i){var o=e.grid;this._preparer=new $h(o,e),this._exportOptions=e,this.indicator=e.indicatorVisible(o)?o.rowIndicator:null,this.checkBar=e.checkBarVisible(o)?o.checkBar:null,this.header=e.headerVisible(o),this.headerSummary=e.headerSummaryVisible(o),this.footer=e.footerVisible(o),this.indicatorHead=this.indicator&&this.indicator.headText||"No",this.indicatorFoot=this.indicator&&this.indicator.footText||"",this.indicatorSummary=this.indicator&&this.indicator.sumText||"",this.checkBarHead=this.checkBar&&this.checkBar.headText||"",this.checkBarFoot=this.checkBar&&this.checkBar.footText||"",this.checkBarSummary=this.checkBar&&this.checkBar.sumText||"",this._sheetName=e.sheetName,this._workbook=t,this.allItems=null,this.buildBook(function(){this._preparer&&this._preparer.dispose(),i&&i()}.bind(this))},i.prototype._changeFormatId=function(t,e,i){return t.changeFormatId(e,i)},i.prototype._parseStyles=function(t,e,i){return t.addStyle(e,!0,!0,!0,i)},i.prototype._extendStyles=function(t,e,i,o,n,r){return void 0===o&&(o=!0),t.extendStyle(e,i,o,n,r)},i.prototype.$_summaryStyleSet=function(t,e,i){var o=this._exportOptions,n=this._workbook,r=void 0;if(e){var s=e.exportStyleName||e.styleName,a=void 0;if(o.applyDynamicStyles)if(t instanceof xs){var l=new Dr;s=(a=t.getCellStyle(t.getCell(e.column.layout),l,!1)).exportStyleName||a.styleName||s}else t instanceof nh&&(l=new Br,s=(a=this.grid.rowGroup.getFooterCellStyle(t,l,!1)).exportStyleName||a.styleName||s);var u=void 0,c=void 0;if((u=a&&a.numberFormat||e.numberFormat)?u=Wh.convertNumberFormat(u):(u=a&&a.datetimeFormat||e.datetimeFormat)&&(u=Wh.convertDateFormat(u)),u&&((c=e.prefix)&&(u='"'+c+'"'+u),(c=e.suffix)&&(u=u+'"'+c+'"'),r=n.addNumberFormat(u)),s||void 0!==r){for(var h=this._preparer.documentCssStyles,p=s?s.trim().split(" "):[],d=[],f=0,g=p.length;f<g;f++)d.push(Hh.getSelectorStyle(h,"."+p[f]));if(e.$_owner.type){var y=e.$_owner.type+"=styleName="+s+"formatId="+r,_=this._dynamicStyles;return _[y]||(_[y]=this._extendStyles(n,i,this._inheritStyles(d),!0,r)),_[y]}return this._extendStyles(n,i,this._inheritStyles(d),!0,r)}}return i},i.prototype._buildColumns=function(e){for(var o,n,r,s=this._exportOptions,a=this._workbook,l=a.currentSheet,u=this._preparer,c=0;c<this._startCol;c++)l.addColumn(-1,s.xOffsetWidth/i.PIXELS_PER_CHAR,null);if(this.indicator&&(r=Math.round(e.rowIndicator.minWidth/i.PIXELS_PER_CHAR),l.addColumn(e.rowIndicator.$_hash,r,null)),this.checkBar&&(r=Math.round(e.checkBar.width/i.PIXELS_PER_CHAR),l.addColumn(e.checkBar.$_hash,r,null)),s.indenting&&(e instanceof $p&&this._rowGrouped&&!this._mergedGrouped?this._indents=this._rowLevels-(e.rowGroup.expandedAdornments===t.RowGroupAdornments.SUMMARY?0:1):e instanceof pd&&(this._indents=this._rowLevels-1),this._indents>0))for(c=0;c<this._indents;c++)r=Math.max(this._indentWidth,1),l.addColumn(-1,r,null);var h=e.formatOptions;this._columnStyles={},this._columnFixedStyles={},this._columnFooterStyles={},this._columnSummaryStyles={},this._columnGroupFooterStyles={};var p=u.colCount,d=u.dataRowCount,f=!1;for(c=0;c<d;c++)for(var g=0;g<p;g++){var y=u.getItem(c,g).layout;if(o=y.firstColumn,0===c&&(r=Math.round(y._cellWidth/i.PIXELS_PER_CHAR),l.addColumn(o.$_hash,r,null,s.hiddenColumns.indexOf(o.name)>=0)),n=o.$_hash,!this._columnStyles[n]){var _=e.dataSource;if(o instanceof jr){var m=this._textFormatId;if(o instanceof Hr){var v=s.exportLink&&o.renderer&&o.renderer.type==Ln.TYPE&&!o.excelFormat,b=_.getField(o.dataIndex),C=b?b.dataType:t.ValueType.TEXT;C===t.ValueType.NUMBER?m=this._numberFormatId:C===t.ValueType.DATETIME&&(m=this._dateFormatId);var w=o.excelFormat,S=void 0;null!=w?m="number"==typeof w||parseInt(w)>0?parseInt(w):a.addNumberFormat(w):v?m=0:(C==t.ValueType.NUMBER?"string"==typeof(w=null===o.numberFormat?void 0:o.numberFormat||s.numberFormat||h.numberFormat)&&(w=Wh.convertNumberFormat(w)):C==t.ValueType.DATETIME&&"string"==typeof(w=o.datetimeFormat||s.datetimeFormat||h.datetimeFormat)&&(w=Wh.convertDateFormat(w)),w&&((S=o.prefix)&&(w='"'+S+'"'+w),(S=o.suffix)&&(w=w+'"'+S+'"'),m=a.addNumberFormat(w)))}this._columnStyles[n]=this._changeFormatId(a,y.isFixed?this._fixedCellStyle:this._bodyCellStyle,m),this._columnFixedStyles[n]=this._changeFormatId(a,this._bodyFixedCellStyle,m),this._columnFooterStyles[n]=[],this._columnSummaryStyles[n]=[],this._columnGroupFooterStyles[n]=[];for(var E=s.footer===Ah,x=s.headerSummary===Ah,O=0;O<(E?e.footers.count:e.footers.visibleCount);O++){var R=E?e.footers.get(O):e.footers.getVisible(O),I=o.footers.get(R._childIndex);this._columnFooterStyles[n][O]=this.$_summaryStyleSet(R,I,this._footerCellStyles[O])}for(O=0;O<(x?e.headerSummaries.count:e.headerSummaries.visibleCount);O++){var T=x?e.headerSummaries.get(O):e.headerSummaries.getVisible(O),P=o.headerSummaries.get(T._childIndex);this._columnSummaryStyles[n][O]=this.$_summaryStyleSet(T,P,this._summaryCellStyles[O])}if(e instanceof $p)for(O=0;O<e.rowGroup.footers.count;O++){var D=e.rowGroup.footers.get(O),k=o.groupFooters.get(D.index);this._columnGroupFooterStyles[n][O]=this.$_summaryStyleSet(null,k,this._groupFooterCellStyles[O])}}e instanceof $p&&(s.separateRows||s.onlyCheckedItems&&!e.rowGrouped||o instanceof Hr&&(o.mergeRule||o.layout.mergeRule||e.rowGroup.mergeMode&&e.isGroupedColumn(o))&&(f=!0))}}this._columnMerged=f},i.prototype._buildTitleCommon=function(t,e,i){if(e&&e.visible){for(var o=this._currentRow,n=this._startCol,r=void 0,s=t.currentSheet,a=0;a<e.spaceTop;a++){r=s.addRow(o+a,void 0);for(var l=0;l<i;l++)r.addBlank(n+l,void 0)}o+=e.spaceTop;var u=e.message,c=void 0;if(e.styleName){var h=this._preparer.documentCssStyles,p=[];e.styleName.split(" ").forEach((function(t){p.push(Hh.getSelectorStyle(h,"."+t))})),c=this._parseStyles(t,this._inheritStyles(p),!0)}else c=this._parseStyles(t,e.cssStyle,!0);for(r=s.addRow(o,e.height),a=0;a<i;a++)0==a?(r.addText(n,u,c),s.addMerge(o,n,1,i)):r.addBlank(n+a,c);for(o++,a=0;a<e.spaceBottom;a++)for(r=s.addRow(o+a,void 0),l=0;l<i;l++)r.addBlank(n+l,void 0);o+=e.spaceBottom,this._currentRow=o}},i.prototype._buildDocumentTitle=function(t){var e=this._exportOptions,i=t,o=this._preparer.colCount;this.indicator&&o++,this.checkBar&&o++,o+=Math.max(this._indents,0),this._buildTitleCommon(i,e.documentTitle,o),this._buildTitleCommon(i,e.documentSubtitle,o)},i.prototype._buildDocumentTail=function(t){var e=this._exportOptions,i=t,o=this._preparer.colCount;this.indicator&&o++,this.checkBar&&o++,o+=Math.max(this._indents,0),this._buildTitleCommon(i,e.documentTail,o)},i.prototype._buildIndicatorCell=function(t,e,i,o,n,r,s){var a=this._indicatorCellStyle;if((Array.isArray(i)?i[0]:i).addNumber(r,o,a),s>1){for(var l=1;l<s;l++)i[l].addBlank(r,a);e.addMerge(n,r,s,1)}},i.prototype._buildCheckBarCell=function(t,e,i,o,n,r,s){var a=this._checkBarCellStyle,l=Array.isArray(i)?i[0]:i,u=this._exportOptions.checkMark,c=this._exportOptions.unCheckMark;if(l.addText(r,o?u:c||"",a),s>1){for(var h=1;h<s;h++)i[h].addBlank(r,a);e.addMerge(n,r,s,1)}},i.prototype._buildValueCell=function(e,i,o,n,r,s,a){void 0===a&&(a=0);var l,u,c=this._workbook,h=n.index>=0&&n.index<e.fixedOptions.rowCount,p=e.body,d=this._exportOptions,f=ps.tempItem(e,n,r),g=r.firstColumn,y=p.getRowStyle(n,h,!0,d.applyDynamicStyles),_=y.exportStyleName||y.styleName,m=g.exportStyleName||g.styleName;d.applyDynamicStyles&&(u=p.getIndexCellStyle(f,!1));var v,b=u&&u.renderer||g.renderer,C=(!r.isFixed&&h?this._columnFixedStyles[g.$_hash]:this._columnStyles[g.$_hash])||this._bodyCellStyle;if(d.applyFixed&&(!e.isTree()&&h&&i.setFixedInfo(o.index+1,void 0),r.$_fixed&&i.setFixedInfo(void 0,s+1)),g.blankWhenExport)o.addBlank(s,C);else if(g instanceof Hr){var w=g.dataIndex,S=u&&u.cellProtectProps||g.cellProtectProps,E=e.dataSource.getField(w),x=d.exportLink&&!g.excelFormat&&g.renderer&&g.renderer.type==Ln.TYPE,O=d.exportTemplate&&g.renderer&&g.renderer.type===Hn.TYPE,R=!1!==d.exportImage&&b&&(b.type===Rn.TYPE||b.type===Tn.TYPE),I=(R=R&&(d.exportImage?!1!==b.exportImage:!!b.exportImage))&&b.type===Tn.TYPE,T=R&&b.type===Rn.TYPE,P=void 0;if(E){var D=n.getData(w);if(P=g.displayCallback,_||m||u||S){var k=void 0,A=void 0,L=[r.isFixed?this._fixedCellCssStyle:this._cellCssStyle];if(u&&"object"==typeof u){var M=u;k="string"==typeof(k=u.exportStyleName||u.styleName||m)?k:void 0;var F=void 0;if(A=u.excelFormat);else if(E.dataType==t.ValueType.NUMBER?A=(F=M.numberFormat)?Wh.convertNumberFormat(F):void 0:E.dataType==t.ValueType.DATETIME&&(A=(F=M.datetimeFormat)?Wh.convertDateFormat(F):void 0),A){var N=M.prefix;N&&(A='"'+N+'"'+A);var V=M.suffix;V&&(A=A+'"'+V+'"')}}else k="string"==typeof u?u:void 0;var B=this._preparer.documentCssStyles,G=this._dynamicStyles;if(G[ot=g.$_hash+"="+_+"="+m+"="+JSON.stringify(u)+"="+JSON.stringify(S)+"="+!0])C=G[ot];else{var j=[];if(_){var H=_.trim().split(" ");Array.prototype.push.apply(j,H),r.isFixed&&H.forEach((function(t){j.push("rg-fixed-body .".concat(t))}))}m&&Array.prototype.push.apply(j,m.trim().split(" ")),k&&Array.prototype.push.apply(j,k.trim().split(" "));for(var $=0,W=j.length;$<W;$++)L.push(Hh.getSelectorStyle(B,"."+j[$]));var U=void 0;A&&(U=c.addNumberFormat(A)),v=this._inheritStyles(L),x&&(v["font-decoration"]="underline",v.color="blue");var z=v.whiteSpace||v["white-space"],K=null!=z&&"none"!=z&&"nowrap"!=z,Y=v.textWrap||v["text-wrap"];K=K||"nowrap"!==Y,C=this._extendStyles(c,C,v,K,U,S),this._dynamicStyles[ot]=C}}switch(E.dataType){case"number":(d.numberCallback||P)&&(D=d.numberCallback?d.numberCallback(n.index,g.name,D,e.handler):P(e.handler,f.proxy(),D));var q=g.excelFormulaExprStatement,X=void 0;if(q){var Q=this._excelFormulaRuntime;Q.setItemIndex(o.index,a),Q.setColumns(this._preparer._dataCells[o._row]),X=q.evaluate(Q)}null!=D||X?"number"==typeof D?o.addNumber(s,D,C,X):o.addText(s,D,C):o.addBlank(s,C);break;case"datetime":case"date":D?d.datetimeCallback||P?(D=d.datetimeCallback?d.datetimeCallback(n.index,g.name,D,e.handler):P(e.handler,f.proxy(),D))instanceof Date?o.addDate(s,D,C):o.addText(s,D,C):o.addDate(s,D,C):d.nullDateText?o.addText(s,d.nullDateText,C):o.addBlank(s,C);break;case"boolean":d.booleanCallback||P?"boolean"==typeof(D=d.booleanCallback?d.booleanCallback(n.index,g.name,D,e.handler):P(e.handler,f.proxy(),D))?o.addBool(s,D,C):o.addText(s,D,C):d.booleanFormat?(D=Ge.getFormatter(d.booleanFormat).formatValue(D),o.addText(s,D,C)):o.addBool(s,D,C);break;default:if(l=D||"",d.lookupDisplay&&(g.labelField||g.lookupDisplay))l=Zo.getText(n,g);else if(O){this._templateRenderer?this._templateRenderer.clearAndAssignFrom(g.renderer):this._templateRenderer=e.delegate.createRenderer(Hn.TYPE,g.renderer,null);var J=this._templateRenderer._parser,Z=g.renderer.callback,tt=e.body.getCell(f,!1),et=Z?Z.call(this,e.handler,tt,-1,-1):J.realize(e,tt,null,this._templateRenderer.valueCallback);l=et?et.replace(/<br[\s/]*>/gi,"\n").replace(/(<([^>]+)>)/gi,""):""}else if(E.dataType===t.ValueType.OBJECT&&"object"==typeof D)if(d.objectCallback)l=d.objectCallback(n.index,g.name,D,e.handler);else{var it=g.objectKey||g.objectCallback,ot=it?g.objectKey:E.objectKey,nt=it?g.objectCallback:E.objectCallback;l=nt&&"function"==typeof nt?nt(E.orgFieldName,n.dataRow,D):ot&&D.hasOwnProperty(ot)?D[ot]:JSON.stringify(D)}else null!=D&&(l=g.textFormatter?g.textFormatter.getText(D):l);if("number"==typeof(l=d.textCallback?d.textCallback(n.index,g.name,l,e.handler):P&&!g.textFormatter?P(e.handler,f.proxy(),D):l))o.addNumber(s,l,C);else if(l&&x)if(tt=e.body.getCell(f,!1),this._linkRenderer?(this._linkRenderer.initOptions(),this._linkRenderer.assignFrom(g.renderer)):this._linkRenderer=e.delegate.createRenderer(Ln.TYPE,g.renderer,null),lt=this._linkRenderer){var rt=lt.$_getUrl(e,tt);o.addLink(s,l,rt,C)}else o.addText(s,l,C);else if(T){tt=e.body.getCell(f,!1),this._imageRenderer?(this._imageRenderer.initOptions(),this._imageRenderer.assignFrom(b)):this._imageRenderer=e.delegate.createRenderer(Rn.TYPE,b,null);var st=(lt=this._imageRenderer).$_getImageUrl(e,tt),at=i.getColumnWidth(tt.dataColumn.$_hash);st?o.addImage(s,l,at,t.IconLocation.CENTER,st,C,-1,lt.imageHeight):o.addText(s,l,C)}else if(I){var lt;tt=e.body.getCell(f,!1),this._iconRenderer?(this._iconRenderer.initOptions(),this._iconRenderer.assignFrom(b)):this._iconRenderer=e.delegate.createRenderer(Tn.TYPE,b,null),st=(lt=this._iconRenderer).$_getIconUrl(e,tt),at=i.getColumnWidth(tt.dataColumn.$_hash),st?o.addImage(s,l,at,lt.iconLocation,st,C,lt.iconWidth,lt.iconHeight):o.addText(s,l,C)}else l?o.addText(s,l,C):o.addBlank(s,C)}}else o.addBlank(s,C)}else if(g instanceof $r){var ut=g.renderer;if(ut&&ut.type&&ut.type!=Qa.TYPE){var ct=this._preparer;d.exportSeriesColumn&&Ja.interfaced(ut)&&ct.sparkColumns[g.$_hash]?o.addSparkLine(s,a,ct.sparkColumns[g.$_hash],C):o.addBlank(s,C)}else{this._seriesCell.setIndex(f);var ht=this._seriesCell.value;ht?(F=on.getText(ht,","),o.addText(s,F,C)):o.addBlank(s,C)}}return C},i.prototype._buildUserCells=function(t,e){var i=this,o=this._exportOptions,n=e.currentSheet,r=o.userCellsCallback,s=o.userCells||r&&r(t.handler,n.rowCount,n.colCount,n.name);if(xt.isArray(s)){var a=this._dynamicStyles,l=this._preparer.documentCssStyles,u=n.workbook.styles._styles._items[0],c=t.doc.createElement("userCell").style;s.forEach((function(t){var o,r,s;if(t.format&&(s=e.addNumberFormat(t.format)),t.styleName){var h=t.styleName;o="userCells;styleName=".concat(h,";formatId=").concat(s);var p=h?h.trim().split(" "):[];if(!(r=a[o])){for(var d=[],f=0,g=p.length;f<g;f++)d.push(Hh.getSelectorStyle(l,"."+p[f]));var y=i._inheritStyles(d);r=a[o]=i._parseStyles(e,y,!!y.whiteSpace&&null),s&&(r._formatId=s)}}else if(t.styles){var _=xt.objectToCssText(t.styles);o="userCells;styleName=".concat(_,";formatId=").concat(s),(r=a[o])||(c.cssText=_,r=a[o]=i._parseStyles(e,c,!!c.whiteSpace&&null),s&&(r._formatId=s))}else s&&(o="userCells;styleName=".concat(void 0,";formatId=").concat(s),(r=a[o])||(r=a[o]=i._extendStyles(e,u,{},!1,s)));r=r||u;var m=t.mergeRow||1,v=t.mergeCol||1,b=xt.makeArray(t.heights,!0);for(f=0;f<m;f++)for(var C=0;C<v;C++){var w=n.borrowRow(t.row+f,b[f]||t.height||-1);if(0===f&&0===C){var S=t.value;switch(typeof S){case"string":w.addText(t.col,S,r);break;case"number":w.addNumber(t.col,S,r,t.formula);break;case"boolean":w.addBool(t.col,null==S?null:S,r);break;default:S instanceof Date&&w.addDate(t.col,S,r)}}else w.addBlank(t.col+C,r)}m*v>1&&n.addMerge(t.row,t.col,m,v)}))}},i.CSS_HEAD="rg-header",i.CSS_FOOT="rg-footer",i.CSS_BODY="rg-body",i.CSS_FIXED="rg-fixed-body",i.CSS_TABLE="rg-table",i.CSS_ROWGROUP_BAR="rg-rowgroup-bar",i.CSS_ROWGROUP_HEAD="rg-rowgroup-head",i.CSS_ROWGROUP_FOOT="rg-rowgroup-foot",i.CSS_HEAD_CELL="rg-header-cell",i.CSS_INDICATOR="rg-rowindicator-cell",i.CSS_CHECK="rg-checkbar-cell",i.CSS_DATA_ROW="rg-data-row",i.PIXELS_PER_CHAR=7,i.LINE_HEIGHT=.75,i}(Ih),yd=function(){function t(){}return t.getColumn=function(t,e){if(e){if("string"==typeof e)return t.columnByName(e);if(e instanceof Gr)return e;if(e.$_hash)return t.columnByHash(e.$_hash);if(e.name)return t.columnByName(e.name)}return null},t.getItemProxy=function(e,i){var o=e.parent,n={type:void 0,id:e.id,parentId:null==o?-1:o.id,itemIndex:e.index,index:e.index,dataRow:-1,checked:e.checked};return i&&(n.childIndex=e.childIndex,n.level=e.level),e instanceof So?(n.type="row",n.dataRow=e.dataRow):e instanceof Eo?(n.count=e.children.length,n.expanded=e.expanded,e instanceof xo||e instanceof Un?(n.type="group",n.footerId=e.footer?e.footer.id:-1,e instanceof Ro||i&&(n.firstItem=t.getItemProxy(e.firstItem),n.firstDataItem=t.getItemProxy(e.firstDataItem),n.dataRows=e.getRows())):e instanceof or&&(n.type="tree",n.dataRow=e.dataRow?e.dataRow:-1)):e instanceof Oo&&(n.type="footer"),n},t.getItemIndices=function(t){for(var e=[],i=0,o=t.length;i<o;i++)e.push(t[i].index);return e},t.getValues=function(t,e){var i={},o=e.dataSource;if(t.isItemEditing(e))return(i=e.getRowObject()).__rowId=e.dataRow,i;if(e.dataRow>=0){if(e instanceof or){var n=e.row,r=n.values;i.__rowId=n.rowId;for(var s=0,a=o.fieldCount;s<a;s++)i[o.getOrgFieldName(s)]=r[s]}else(i=o.getRowObject(e.dataRow)).__rowId=e.dataRow;return i}return null},t.getDisplayValues=function(t,e,i){var o=t.getDataColumns();if(e){for(var n=i?{}:e.getRowObject(),r=new Br,s=0,a=o.length;s<a;s++){var l=o[s],u=e.index>=0?hs.temp(t,e.index,l):ps.tempItem(t,e,l),c=t.body.getCell(u,!1);c._index=u,r.clear(),r.assign(l),t.body.getCellStyle(c,r);var h=r.toFormatter(null);n[i?l.name:l.fieldName]=Zo._getDisplayText(t,e,l,e.getData(l.dataIndex),h)}return n}},t.setValues=function(t,e,i,o){var n,r,s,a=e.dataSource,l=a.fieldCount;if(t.isItemEditing(e))if(e)e.values=i;else for(var u=0;u<l;u++){var c=a.getOrgFieldName(u);i.hasOwnProperty(c)&&e.setData(u,i[c])}else if((s=e.dataRow)>=0)if(a instanceof Zi){var h=a.rowById(s);if(h){if(n=h.values||[],Array.isArray(i)){u=0;for(var p=i.length;u<p&&!(r=!a.getField(u).equalValues(n[u],i[u]));u++);}else for(u=0;u<l;u++)if(c=a.getOrgFieldName(u),i.hasOwnProperty(c)&&(r=!a.getField(u).equalValues(n[u],i[c])))break;if(!r)return;h.update(i,o)}}else if(a instanceof Ri){if(n=a.getRow(s),Array.isArray(i))for(u=0,p=i.length;u<p&&!(r=!a.getField(u).equalValues(n[u],i[u]));u++);else for(u=0;u<l;u++)if(c=a.getOrgFieldName(u),i.hasOwnProperty(c)&&(r=!a.getField(u).equalValues(n[u],i[c])))break;if(!r)return;a.updateRow(s,i,o)}},t}(),_d=function(){function e(t,e,i){this.onCurrentChanging=null,this.onCurrentChanged=null,this.onCurrentRowChanged=null,this.onValidateColumn=null,this.onValidateRow=null,this.onValidationFail=null,this.onColumnCheckedChanged=null,this.onMenuItemClicked=null,this.onContextMenuPopup=null,this.onPopupMenuPopup=null,this.onContextMenuItemClicked=null,this.onCellButtonClicked=null,this.onScrollToBottom=null,this.onTopIndexChanged=null,this.onTopIndexChanging=null,this.onLeftPosChanged=null,this.onRowsDeleting=null,this.onRowInserting=null,this.onSelectionCleared=null,this.onSelectionChanged=null,this.onSelectionAdded=null,this.onSelectionEnded=null,this.onShowEditor=null,this.onShowEditCommand=null,this.onHideEditor=null,this.onEditChange=null,this.onGetEditValue=null,this.onEditCommit=null,this.onEditCanceled=null,this.onItemEditCanceled=null,this.onItemEditCancel=null,this.onEditSearch=null,this.onSearchCellButtonClick=null,this.onCellEdited=null,this.onEditRowChanged=null,this.onEditRowPasted=null,this.onRowsPasted=null,this.onCellPasting=null,this.onItemChecked=null,this.onItemAllChecked=null,this.onErrorClicked=null,this.onSorting=null,this.onSortingChanged=null,this.onFiltering=null,this.onFilteringChanged=null,this.onWheel=null,this.onKeyDown=null,this.onKeyPress=null,this.onKeyUp=null,this.onShowTooltip=null,this.onShowHeaderTooltip=null,this.onColumnPropertyChanged=null,this.onLayoutPropertyChanged=null,this.onGridActivated=null,this.onCopy=null,this.onPaste=null,this.onPasted=null,this.onItemsChecked=null,this.onCellClicked=null,this.onCellDblClicked=null,this.onCellItemClicked=null,this.onCommandStackChanged=null,this.onDataLoadComplated=null,this.onLayoutExpanding=null,this.onLayoutExpanded=null,this.onLayoutCollapsing=null,this.onLayoutCollapsed=null,this._view=this._createView(t,e,i),this._listener=this._createListener(this._view)}return e.prototype.dispose=function(){return this._view.dispose(),this._view=null,this._container=this._container&&this._container.dispose(),this._listener=this._listener&&this._listener.dispose()},Object.defineProperty(e.prototype,"summaryMode",{get:function(){return this._view.itemSource.summaryMode},set:function(t){this._view.itemSource.summaryMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hideDeletedRows",{get:function(){return this._view.itemSource.hideDeleted},set:function(t){this._view.itemSource.hideDeleted=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sortMode",{get:function(){return this._view.itemSource.sortMode},set:function(t){this._view.itemSource.sortMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"undoable",{get:function(){return this._view.undoable},set:function(t){this._view.undoable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return this._view.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return this._view.redoing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._view.container.disabled},set:function(t){this._view.container.disabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarWidth",{get:function(){return this._view.scrollBarWidth},set:function(t){this._view.scrollBarWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarHeight",{get:function(){return this._view.scrollBarHeight},set:function(t){this._view.scrollBarHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixedOptions",{get:function(){return this._view.fixedOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayOptions",{get:function(){return this._view.displayOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"formatOptions",{get:function(){return this._view.formatOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editOptions",{get:function(){return this._view.editOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editorOptions",{get:function(){return this._view.editorOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"copyOptions",{get:function(){return this._view.copyOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pasteOptions",{get:function(){return this._view.pasteOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sortingOptions",{get:function(){return this._view.sortingOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filteringOptions",{get:function(){return this._view.filteringOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mobileOptions",{get:function(){return this._view.mobileOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataDropOptions",{get:function(){return this._view.dataDropOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowIndicator",{get:function(){return this._view.rowIndicator},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stateBar",{get:function(){return this._view.stateBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkBar",{get:function(){return this._view.checkBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._view.header},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._view.footer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footers",{get:function(){return this._view.footers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerSummary",{get:function(){return this._view.headerSummary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerSummaries",{get:function(){return this._view.headerSummaries},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterPanel",{get:function(){return this._view.filterPanel},enumerable:!1,configurable:!0}),e.prototype.ping=function(t){this._view instanceof Rh&&alert(t)},e.prototype.refresh=function(t){this._view.refreshView(t)},e.prototype.beginUpdate=function(){this._view.beginUpdate()},e.prototype.endUpdate=function(t){this._view.endUpdate(t)},e.prototype.isVisible=function(){return this._view.visible},e.prototype.setVisible=function(t){this._view.visible=t},e.prototype.getItemCount=function(){return this._view.itemCount},e.prototype.getDataRow=function(t){var e=this._view.getItem(t);return e?e.dataRow:-1},e.prototype.getRowsOfItems=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var n=this._view.getItem(t[i]);n&&e.push(n.dataRow)}return e},e.prototype.getItemIndex=function(t){return this._view.getItemIndexOfRow(t)},e.prototype.getItemsOfRows=function(t){return this._view.getItemIndicesOfRows(t)},e.prototype.restoreColumns=function(){this._view.restoreColumns()},e.prototype.getDataSource=function(){return this._dataDelegator},e.prototype.setDataSource=function(t){this._dataDelegator=t,this._dataProvider=t?t.getProvider():null,this._view.dataSource=this._dataProvider},e.prototype.getOptions=function(){return{summaryMode:this._view.itemSource.summaryMode.toString(),hideDeletedRows:this._view.itemSource.hideDeleted,sortMode:this._view.itemSource.sortMode.toString(),fixed:this.fixedOptions,display:this.displayOptions,format:this.formatOptions,edit:this.editOptions,editor:this.editorOptions,copy:this.copyOptions,paste:this.pasteOptions,sorting:this.sortingOptions,filtering:this.filteringOptions,dataDrop:this.dataDropOptions,rowIndicator:this.rowIndicator,checkBar:this.checkBar,stateBar:this.stateBar,header:this.header,footer:this.footer,footers:this.footers,headerSummary:this.headerSummary,headerSummaries:this.headerSummaries}},e.prototype.setOptions=function(t){t&&(this._view.setOptions(t),t.fixed&&this.setFixedOptions(t.fixed),t.display&&this.setDisplayOptions(t.display),t.format&&this.setFormatOptions(t.format),t.edit&&this.setEditOptions(t.edit),t.editor&&this.setEditorOptions(t.editor),t.copy&&this.setCopyOptions(t.copy),t.paste&&this.setPasteOptions(t.paste),t.sorting&&this.setSortingOptions(t.sorting),t.filtering&&this.setFilteringOptions(t.filtering),t.dataDrop&&this.setDataDropOptions(t.dataDrop),t.rowIndicator&&this.setRowIndicator(t.rowIndicator),t.checkBar&&this.setCheckBar(t.checkBar),t.stateBar&&this.setStateBar(t.stateBar),t.header&&this.setHeader(t.header),t.footer&&this.setFooter(t.footer),t.footers&&this.setFooters(t.footers),t.headerSummary&&this.setHeaderSummary(t.headerSummary),t.headerSummaries&&this.setHeaderSummaries(t.headerSummaries))},e.prototype.getFixedOptions=function(){return this._view.fixedOptions.toProxy()},e.prototype.setFixedOptions=function(t){this._view.fixedOptions.assignFrom(t)},e.prototype.getDisplayOptions=function(){return this._view.displayOptions.toProxy()},e.prototype.setDisplayOptions=function(t){this._view.displayOptions.assignFrom(t)},e.prototype.getFormatOptions=function(){return this._view.formatOptions.toProxy()},e.prototype.setFormatOptions=function(t){this._view.formatOptions.assignFrom(t)},e.prototype.getEditOptions=function(){return this._view.editOptions.toProxy()},e.prototype.setEditOptions=function(t){this._view.editOptions.assignFrom(t)},e.prototype.getEditorOptions=function(){return this._view.editorOptions.toProxy()},e.prototype.setEditorOptions=function(t){this._view.editorOptions.assignFrom(t)},e.prototype.getCopyOptions=function(){return this._view.copyOptions.toProxy()},e.prototype.setCopyOptions=function(t){this._view.copyOptions.assignFrom(t)},e.prototype.getPasteOptions=function(){return this._view.pasteOptions.toProxy()},e.prototype.setPasteOptions=function(t){this._view.pasteOptions.assignFrom(t)},e.prototype.getSortingOptions=function(){return this._view.sortingOptions.toProxy()},e.prototype.setSortingOptions=function(t){this._view.sortingOptions.assignFrom(t)},e.prototype.getFilteringOptions=function(){return this._view.filteringOptions.toProxy()},e.prototype.setFilteringOptions=function(t){this._view.filteringOptions.assignFrom(t)},e.prototype.getMobileOptions=function(){return this._view.mobileOptions.toProxy()},e.prototype.setMobileOptions=function(t){this._view.mobileOptions.assignFrom(t)},e.prototype.getDataDropOptions=function(){return this._view.dataDropOptions.toProxy()},e.prototype.setDataDropOptions=function(t){this._view.dataDropOptions.assignFrom(t)},e.prototype.getRowIndicator=function(){return this._view.rowIndicator.toProxy()},e.prototype.setRowIndicator=function(t){this._view.rowIndicator.assignFrom(t)},e.prototype.getStateBar=function(){return this._view.stateBar.toProxy()},e.prototype.setStateBar=function(t){this._view.stateBar.assignFrom(t)},e.prototype.getCheckBar=function(){return this._view.checkBar.toProxy()},e.prototype.setCheckBar=function(t){this._view.checkBar.assignFrom(t)},e.prototype.getHeader=function(){return this._view.header.toProxy()},e.prototype.setHeader=function(t){this._view.header.assignFrom(t)},e.prototype.getFooter=function(){return this._view.footer.toProxy()},e.prototype.setFooter=function(t){this._view.footer.assignFrom(t)},e.prototype.getFooters=function(){return this._view.footers.toProxy()},e.prototype.setFooters=function(t){this._view.footers.assignFrom(t)},e.prototype.getHeaderSummary=function(){return this._view.headerSummary.toProxy()},e.prototype.setHeaderSummary=function(t){this._view.headerSummary.assignFrom(t)},e.prototype.getHeaderSummaries=function(){return this._view.headerSummaries.toProxy()},e.prototype.setHeaderSummaries=function(t){this._view.headerSummaries.assignFrom(t)},e.prototype.setFilterPanel=function(t){this._view.filterPanel.assignFrom(t)},e.prototype.setCellStyleCallback=function(t){this._view.body.cellStyleCallback=t},e.prototype.setRowStyleCallback=function(t){this._view.body.rowStyleCallback=t},e.prototype.addUserCellStyle=function(t,e,i){this._view.body.addUserCellStyle(t,e,i)},e.prototype.removeUserCellStyle=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this._view.body.removeUserCellStyle(t,e)},e.prototype.getUserCellStyle=function(t,e){return this._view.body.getUserCellStyle(t,e)},e.prototype.setAriaLabelCallback=function(t){this._view.body.ariaLabelCallback=t},e.prototype.orderBy=function(e,i,o){if(e){var n=[],r=[],s=[];e=xt.makeArray(e,!1),i=xt.makeArray(i,!0),o=xt.makeArray(o,!0);for(var a=0,l=e.length;a<l;a++)n.push(this._view.columnByField(e[a])),r.push(i[a]||t.SortDirection.ASCENDING),s.push(o[a]||t.SortCase.SENSITIVE);this._view.orderBy(n,r,s)}},e.prototype.getSortedFields=function(){var t,e=this._view,i=e.getSortFields(),o=e.getSortDirections();if(i&&(t=i.length)>0){for(var n=this._dataProvider,r=[],s=0;s<t;s++)r.push({fieldName:n.getFieldName(i[s]),orgFieldName:n.getOrgFieldName(i[s]),direction:o[s]});return r}return null},e.prototype.setFocus=function(){this._view.setFocus()},e.prototype.getColumn=function(t){return this._view.getColumn(t)},e.prototype.getColumns=function(){for(var t=this._view.columnCount,e=[],i=0;i<t;i++)e.push(this._view.getColumn(i));return e},e.prototype.setColumns=function(t){this._view.setColumns(t)},e.prototype.addColumn=function(t,e){return this._view.addColumn(t,e)},e.prototype.removeColumn=function(t){return this._view.removeColumn(t)},e.prototype.addLayout=function(t,e){return this._view.addLayout(t,e)},e.prototype.removeLayout=function(t){this._view.removeLayout(t)},e.prototype.layoutByColumn=function(t){return this._view.layoutByColumn(t)},e.prototype.layoutByName=function(t){return this._view.layoutByName(t)},e.prototype.getColumnNames=function(t,e){return this._view.collectColumnNames(t,e)},e.prototype.columnByName=function(t){return this._view.columnByName(t)},e.prototype.columnByField=function(t){return this._view.columnByField(t)},e.prototype.columnByTag=function(t){return this._view.columnByTag(t)},e.prototype.columnsByTag=function(t){return this._view.columnsByTag(t)},e.prototype.getColumnProperty=function(t,e){var i=yd.getColumn(this._view,t);if(i&&e)return i[e]instanceof kt?i[e].toProxy():i[e]},e.prototype.setColumnProperty=function(t,e,i){var o=yd.getColumn(this._view,t);o&&e&&(o[e]instanceof kt?o[e].assignFrom(i):o[e]=i)},e.prototype.setColumn=function(t){var e=yd.getColumn(this._view,t);e&&e.assignFrom(t)},e.prototype.getDisplayColumns=function(){return this._view.collectColumns(!0,!0,!0)},e.prototype.setColumnLayout=function(t){("string"!=typeof t||(t=this._view.findColumnLayout(t)))&&this._view.setCellLayout(t)},e.prototype.getLayoutByColumn=function(t){var e=this._view.layoutByColumn(t);return e?e.toProxy():null},e.prototype.saveColumnLayout=function(){return this._view.activeCellLayout.getLayout.apply(this._view.activeCellLayout,arguments)},e.prototype.linearizeColumns=function(t){this._view.linearizeColumns(t)},e.prototype.registerColumnLayouts=function(t){this._view.registerColumnLayouts(t)},e.prototype.fitLayoutWidth=function(t,e,i,o){var n;return t?t instanceof zr?n=t:"string"==typeof t?n=this._view.layoutByName(t):t.name&&(n=this._view.layoutByColumn(t.name)):null==t&&(n=this._view.activeCellLayout._root),n&&this._view.fitLayoutWidth(n,e,i,o)},e.prototype.setRowHeight=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0),this._view.setRowHeight(t,e,i)},e.prototype.getRowHeight=function(t){var e=this._view.getRowHeight(t);if(isNaN(e)){var i=this._view.getItem(t);e=this._view.layoutManager.getItemHeight(i)}return e},e.prototype.clearRowHeights=function(t){this._view.clearRowHeights(t)},e.prototype.getCurrent=function(){var t=this._view.focusedIndex;return t?t.proxy():null},e.prototype.setCurrent=function(t,e){void 0===e&&(e=!0);var i=this._view.focusedIndex.clone();i.assignFrom(t),this._view.setFocusedIndex(i,e,!0)},e.prototype.resetCurrent=function(){this._view.setFocusedIndex(this._view.focusedIndex.clone().reset())},e.prototype.clearCurrent=function(){this._view.clearFocusedIndex()},e.prototype.mouseToIndex=function(t,e){var i=this._view.pointToIndex(null,t,e,!1);return i?i.proxy():null},e.prototype.getCellBounds=function(t,e,i){void 0===i&&(i=!0);var o=yd.getColumn(this._view,e),n=new hs(this._view,t,o);if(o&&n){var r=this._view.layoutManager,s=r.getBodyView(n),a=s.getCellRectAt(r,n,!0);if(a=a&&(i?s.boundsByScreen(a):s.boundsByContainer(a)))return{x:a.x,y:a.y,width:a.width,height:a.height}}return null},e.prototype.getIndexOfElement=function(t){var e=this._view.getCellViewOf(t),i=this._view.getDataCellIndex(e);return i?i.proxy():null},e.prototype.setColumnFilters=function(t,e){var i=yd.getColumn(this._view,t);i instanceof Hr&&i.setFilters(e)},e.prototype.clearColumnFilters=function(t){var e=yd.getColumn(this._view,t);e instanceof Hr&&e.clearFilters()},e.prototype.addColumnFilters=function(t,e,i){var o=yd.getColumn(this._view,t);o instanceof Hr&&o.addFilters(e,i)},e.prototype.removeColumnFilters=function(t,e){var i=yd.getColumn(this._view,t);i instanceof Hr&&i.removeFilters(e)},e.prototype.activateColumnFilters=function(t,e,i){var o=yd.getColumn(this._view,t);o instanceof Hr&&o.activateFilters(e,i)},e.prototype.activateAllColumnFilters=function(t,e){var i=yd.getColumn(this._view,t);i instanceof Hr&&i.activateAllFilters(e)},e.prototype.resetFilters=function(){this._view.itemSource.beginFiltering();try{this._view.itemSource.clearAllFilters(),this._view.getDataColumns(!1).forEach((function(t){t.isFiltered()&&(t.activateAllFilters(!1,!1),t.setInlineFilter(null,!1))}))}finally{this._view.itemSource.endFiltering(null,null)}},e.prototype.hideColumnFilters=function(t,e,i){void 0===i&&(i=!0);var o=yd.getColumn(this._view,t);o instanceof Hr&&(o.hideColumnFilters(e,i),this._view.closePopups())},e.prototype.hideAllColumnFilters=function(t,e){void 0===e&&(e=!0);var i=yd.getColumn(this._view,t);i instanceof Hr&&(i.hideAllColumnFilters(e),this._view.closePopups())},e.prototype.toggleColumnFilters=function(t,e){var i=yd.getColumn(this._view,t);i instanceof Hr&&i.toggleFilters(e)},e.prototype.toggleAllColumnFilters=function(t){var e=yd.getColumn(this._view,t);e instanceof Hr&&e.toggleAllFilters()},e.prototype.getColumnFilter=function(t,e){var i=yd.getColumn(this._view,t);return i instanceof Hr&&i.getFilter(e)?i.getFilter(e).toProxy():null},e.prototype.getColumnFilters=function(t){var e=yd.getColumn(this._view,t);if(e instanceof Hr){for(var i=e.autoFilter?e.autoFilters.items:e.filters.items,o=[],n=0,r=i.length;n<r;n++)o.push(i[n].toProxy());return o}return null},e.prototype.getActiveColumnFilters=function(t,e){void 0===e&&(e=!0);var i=yd.getColumn(this._view,t);if(i instanceof Hr){for(var o=i.getActiveFilters(e),n=[],r=0,s=o.length;r<s;r++)n.push(o[r].toProxy());return n}return null},e.prototype.isFiltered=function(t){if(t){var e=yd.getColumn(this._view,t);return e instanceof Hr&&e.isFiltered()}var i=this._view.getFilteredColumns();return i&&i.length>0},e.prototype.autoFiltersRefresh=function(t,e){t=t?xt.makeArray(t):this._view.getChildColumnNames(null);for(var i=0;i<t.length;i++){var o=yd.getColumn(this._view,t[i]);o instanceof Hr&&o.autoFilterRefresh(e)}},e.prototype.getValues=function(t){var e=this._view.getItem(t);return e?yd.getValues(this._view,e):null},e.prototype.getDisplayValues=function(t,e){var i=this._view.getItem(t);if(i)return yd.getDisplayValues(this._view,i,e)},e.prototype.getDisplayValuesOfRow=function(t,e){var i=this._view.getItemOfRow(t,!0);if(i)return yd.getDisplayValues(this._view,i,e)},e.prototype.getJsonRows=function(){return this._view.getJsonRows()},e.prototype.setValues=function(t,e,i){var o=this._view.getItem(t);o&&yd.setValues(this._view,o,e,i)},e.prototype.getValue=function(t,e){var i,o=this._view._clipboardManager;if(o.isPasting&&(i=o.appendingIndex.item).index!==t&&(i=null),i=i||this._view.getItem(t)){var n="string"==typeof e?this._dataProvider.getFieldIndex(e):e;return i.getData(n)}return null},e.prototype.setValue=function(t,e,i){e=this._dataProvider.getFieldIndex(e),this._view.setValueAt(t,e,i)},e.prototype.getEditValue=function(){return this._view.getEditCellValue()},e.prototype.setEditValue=function(t,e,i){void 0===i&&(i=!0),this._view.setEditCellValue(t,e,i)},e.prototype.registerCustomRenderer=function(t,e){this._view.registerCustomRenderer(t,e)},e.prototype.unregisterCustomRenderer=function(t){this._view.unregisterCustomRenderer(t)},e.prototype.existsCustomRenderer=function(t){return this._view.existsCustomRenderer(t)},e.prototype.unregisterAllCustomRenderer=function(){this._view.unregisterAllCustomRenderer()},e.prototype.addPopupMenu=function(t,e){this._view.addPopupMenu(t,e)},e.prototype.getPopupMenu=function(t){return this._view.getPopupMenu(t)},e.prototype.removePopupMenu=function(t){this._view.removePopupMenu(t)},e.prototype.setContextMenu=function(t){return this._view.setContextMenu(t)},e.prototype.getSelection=function(t){void 0===t&&(t=0);var e=this._view.getSelection(t);return e?e.toProxy():null},e.prototype.getSelections=function(){var t=this._view.getSelections(),e=[];return t.forEach((function(t){e.push(t.toProxy())})),e},e.prototype.setSelection=function(t){t.style&&"string"==typeof t.style&&(this._view.clearAddSelection(!0,!1),this.addSelection(t))},e.prototype.addSelection=function(e){if(e.style&&"string"==typeof e.style){var i,o,n=xt.valueIn(e.style,t.SelectionStyle)?e.style:t.SelectionStyle.BLOCK,r=0,s=0;if(e.hasOwnProperty("startItem"))s=r=e.startItem;else if(e.hasOwnProperty("startRow"))s=r=this._view.getItemIndexOfRow(e.startRow);else if("singleColumn"!=n&&"columns"!=n)return;if(e.hasOwnProperty("endItem"))s=e.endItem;else if(e.hasOwnProperty("endRow"))s=this._view.getItemIndexOfRow(e.endRow);else if("singleColumn"!=n&&"columns"!=n)return;i=yd.getColumn(this._view,e.startColumn),o=yd.getColumn(this._view,e.endColumn);var a=new hs(this._view,r,i),l=new hs(this._view,s,o);this._view.selections.add(a,l,n)}},e.prototype.clearSelection=function(){this._view.clearAddSelection()},e.prototype.removeSelection=function(t){var e=this._view.selections.getItem(t);e&&this._view.selections.remove(e)},e.prototype.getSelectedItems=function(t){return this._view.getSelectedItemIndices(t)},e.prototype.getSelectedRows=function(){return this._view.getSelectedRows()},e.prototype.deleteSelection=function(t){this._view.deleteSelection(t)},e.prototype.eraseSelection=function(t){this._view.eraseSelection(t)},e.prototype.getSelectionData=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=0),e>=0&&e<this._view.selections.count?this._view.selections.getItem(e).getData(t):null},e.prototype.getSelectionsData=function(){var t=[],e=this._view.selections.getItems(),i={};return e.forEach((function(t){t.getData(-1).forEach((function(t){var e=t.__rowId;e>=0&&(i[e]=i[e]||{},xt.extendObj(t,i[e]))}))})),Object.keys(i).forEach((function(e){t.push(i[e])})),t},e.prototype.copyToClipboard=function(t,e){return void 0===e&&(e=!0),this._view.toClipboard(t,e)},e.prototype.commitEditor=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this._view.commitEditor(t,e)},e.prototype.commit=function(t){return this._view.commit(t)},e.prototype.cancel=function(){return this._view.cancel()},e.prototype.fillEditSearchItems=function(t,e,i,o){var n=yd.getColumn(this._view,t);this._view.fillEditSearchItems(n,e,i,o)},e.prototype.isItemEditing=function(){return this._view.isItemEditing()},e.prototype.isEditing=function(){return this._view.isEditing()},e.prototype.showEditor=function(t){void 0===t&&(t=!1),this._view.showEditor(null,null,t)},e.prototype.hideEditor=function(){this._view.hideEditor(!0)},e.prototype.cancelEditor=function(){this._view.cancelEditor(!0)},e.prototype.setValidations=function(t){this._view.validations=t},e.prototype.validateCells=function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!1),this._view.validateCells(t,e,i)},e.prototype.getInvalidCells=function(t){var e;return null!=t&&(e=this.getDataRow(t))<0?null:this._view.getInvalidCells(e)},e.prototype.getInvalidCellsOfRow=function(t){return null==t?null:this._view.getInvalidCells(t)},e.prototype.clearInvalidCells=function(){return this._view.clearInvalidCells()},e.prototype.getEditingItem=function(){var t=this._view.getEditItem();return t?(t.getRowObject(),{itemIndex:t.index,dataRow:t.dataRow,values:t.getRowObject()}):null},e.prototype.getItemState=function(e){var i=this._view.getItem(e);if(i){var o=i.itemState;return o==t.ItemState.NORMAL&&this._view.focusedIndex.itemIndex==i.index&&(o=t.ItemState.FOCUSED),o}return null},e.prototype.showToast=function(t,e){this._view.showToast(t,e)},e.prototype.hideToast=function(t){this._view.hideToast(t)},e.prototype.setLookups=function(t){this._view.setLookups(t)},e.prototype.addLookupSource=function(t){this._view.addLookupSource(t)},e.prototype.removeLookupSource=function(t){this._view.removeLookupSource(t)},e.prototype.existsLookupData=function(t,e){return this._view.existsLookupData(t,e)},e.prototype.fillLookupData=function(t,e){this._view.fillLookupData(t,e)},e.prototype.clearLookupData=function(t){this._view.clearLookupData(t)},e.prototype.isCheckable=function(t){return this._view.isCheckable(t)},e.prototype.isCheckableOfRow=function(t){return this._view.isCheckableOfRow(t)},e.prototype.setCheckable=function(t,e){this._view.setCheckable(t,e)},e.prototype.setCheckableOfRow=function(t,e){this._view.setCheckableOfRow(t,e)},e.prototype.isCheckedItem=function(t){return this._view.isCheckedItem(t)},e.prototype.isCheckedRow=function(t){return this._view.isCheckedRow(t)},e.prototype.checkItem=function(t,e,i,o){void 0===e&&(e=!0),void 0===o&&(o=!0),this._view.checkItem(t,e,i,o)},e.prototype.checkRow=function(t,e,i,o){void 0===e&&(e=!0),void 0===o&&(o=!0),this._view.checkRow(t,e,i,o)},e.prototype.checkItems=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this._view.checkItems(t,e,i)},e.prototype.checkRows=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this._view.checkRows(t,e,i)},e.prototype.checkAll=function(t,e,i,o){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this._view.checkAll(t,e,i,o)},e.prototype.setAllCheck=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this._view.setAllCheck(t,e)},e.prototype.isAllChecked=function(){return this._view.allChecked},e.prototype.resetCheckables=function(t){this._view.resetCheckables(),t&&(this._view.checkBar.checkableExpression=null,this._view.checkBar.checkableCallback=null)},e.prototype.applyCheckables=function(){this._view.applyCheckables()},e.prototype.setCheckableExpression=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableExpression=t,e&&this._view.applyCheckables()},e.prototype.setCheckableCallback=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableCallback=t,e&&this._view.applyCheckables()},e.prototype.getSummary=function(t,e){var i=this._view.summarizer,o="string"==typeof t?this._dataProvider.getFieldIndex(t):t;if(-1==o)return null;switch(e){case"count":return i.getCount(o);case"sum":return i.getSum(o);case"max":return i.getMax(o);case"min":return i.getMin(o);case"avg":return i.getAvg(o);case"var":return i.getVar(o);case"varp":return i.getVarp(o);case"stdev":return i.getStdev(o);case"stdevp":return i.getStdevp(o);case"datacount":return i.getDataCount(o);case"dataavg":return i.getDataAvg(o)}},e.prototype.getModel=function(t,e){var i=this._view.getItem(t);return i&&yd.getItemProxy(i,e)},e.prototype.getModelAs=function(t,e,i){var o=this._view.getItem(t);switch(e){case"row":o=xt.cast(o,So);break;case"group":o=xt.cast(o,Eo);break;case"footer":o=xt.cast(o,Oo);break;case"tree":o=xt.cast(o,or)}return o?yd.getItemProxy(o,i):null},e.prototype.getGroupModel=function(t,e){var i=this._view.getItem(t);return!i||i instanceof Eo||(i=i.parent instanceof Ro?null:i.parent),i?yd.getItemProxy(i,e):null},e.prototype.getRootModel=function(t,e){if(!t||!this._view.isTree()&&!this._view.rowGrouped)return null;if(t){var i=this._view.getItem(t.index);if(i)return i.root?yd.getItemProxy(i.root,e):null}return null},e.prototype.getModels=function(t,e){if(t=xt.makeArray(t)){for(var i=[],o=0,n=t.length;o<n;o++){var r=this._view.getItem(t[o]);r&&i.push(yd.getItemProxy(r,e))}return i}},e.prototype.getModelOfRow=function(t,e){var i=this._view.getItemOfRow(t,!1);return i?yd.getItemProxy(i,e):null},e.prototype.getModelsOfRows=function(t,e){if(t=xt.makeArray(t)){for(var i=[],o=0,n=t.length;o<n;o++){var r=this._view.getItemOfRow(t[o],!1);r&&i.push(yd.getItemProxy(r,e))}return i}},e.prototype.getParentModel=function(t,e){var i;return t&&(i=this._view.getItemOfModel(t)),!i||i instanceof Do||!this._view.isTree()&&!this._view.rowGrouped?null:yd.getItemProxy(i.parent,e)},e.prototype.getChildModel=function(t,e,i){var o=t&&this._view.getItemOfModel(t);if(o instanceof Eo){var n=o.getItem(e);return n?yd.getItemProxy(n,i):null}return null},e.prototype.getChildModels=function(t,e){var i=t&&this._view.getItemOfModel(t);if(i instanceof Eo){for(var o=[],n=0,r=i.count;n<r;n++)o.push(yd.getItemProxy(i.children[n],e));return o}return null},e.prototype.getDescendantModels=function(t,e){var i=t&&this._view.getItemOfModel(t);if(i instanceof Eo){var o=i.getDescendants(!1),n=[];if(o)for(var r=0,s=o.length;r<s;r++)n.push(yd.getItemProxy(o[r],e));return n}return null},e.prototype.getGroupSummary=function(t,e,i){if(t){var o=this._view.getItemOfModel(t),n="string"==typeof e?this._dataProvider.getFieldIndex(e):e;if(o instanceof Eo&&n>=0){var r={count:o.getNumber(n),sum:o.getSum(n),max:o.getMax(n),min:o.getMin(n),avg:o.getAvg(n),datacount:o.getDataCount(n),dataavg:o.getSum(n)/o.getDataCount(n)};return i&&(r.var=o.getVar(n,1),r.varp=o.getVar(n,0),r.stdev=o.getStdev(n,1),r.stdevp=o.getStdev(n,0)),r}}return null},e.prototype.getDistinctItemValues=function(e,i,o){return void 0===i&&(i=-1),void 0===o&&(o=t.SortDirection.ASCENDING),e=this._dataProvider.getFieldIndex(e),this._view.getDistinctItemValues(e,i,o)},e.prototype.showProgress=function(){this._view.showProgress()},e.prototype.setProgress=function(t,e,i,o){this._view.setProgress(t,e,i,o)},e.prototype.closeProgress=function(){this._view.closeProgress()},e.prototype.showLoading=function(t){this._view.showLoading(t)},e.prototype.closeLoading=function(){this._view.hideLoading()},e.prototype.searchItem=function(t){return t?this._view.searchItem(t):-1},e.prototype.searchCell=function(t){return t?this._view.searchCell(t):null},e.prototype.resetSize=function(t){this._view.container.resetSize(t)},e.prototype.closeList=function(){this._view.closePopups()},e.prototype.exportGrid=function(t){if("csv"===t.type){var e=new Nh(t);(new Th).export(this._view,e)}else"excel"===t.type&&(e=new Vh(this._view,t),(new gd).export(this._view,e))},e.prototype.scrollPage=function(t){this._view._vscrollBar._doScroll(Tl.PAGE,t,0)},e.prototype.getTopItem=function(){return this._view.topIndex},e.prototype.setTopItem=function(t){void 0===t&&(t=0),this._view.topIndex=t},e.prototype.getLeftPos=function(){return this._view.leftPos},e.prototype.setLeftPos=function(t){this._view.leftPos=t},e.prototype.setLeftCol=function(t){var e;if("string"==typeof t){var i=this._view.layoutByName(t);i&&(e=i._col)}else e=t;this._view.leftCell=e},e.prototype.getContainer=function(){return this._view.container._containerDiv},e.prototype.requestPrepareEditor=function(){this._view.requestPrepareEditor()},e.prototype.destroy=function(){return this.dispose()},e.prototype.fullItemCount=function(){return this._view.layoutManager.fullItemCount},e.prototype.undo=function(){return this._view.undo()},e.prototype.redo=function(){return this._view.redo()},e.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._view.clearCommandStack(t)},e.prototype._getView=function(){return this._view},e}(),md=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n.onPageChanging=null,n.onPageChanged=null,n.onPageCountChanged=null,n.onGrouping=null,n.onGrouped=null,n.onExpanding=null,n.onExpanded=null,n.onCollapsing=null,n.onCollapsed=null,i&&(n.shadowDom=n._view._shadowDom),n}return n(e,t),Object.defineProperty(e.prototype,"rowGroup",{get:function(){return this._view.rowGroup},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupPanel",{get:function(){return this._view.groupPanelView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterMode",{get:function(){return this._view._rs.filterMode},set:function(t){this._view._rs.filterMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterOr",{get:function(){return this._view._rs.inclusiveFiltering},set:function(t){this._view._rs.inclusiveFiltering=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupSummaryMode",{get:function(){return this._view._rs.groupSummaryMode},set:function(t){this._view._rs.groupSummaryMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupingOptions",{get:function(){return this._view.groupingOptions},enumerable:!1,configurable:!0}),e.prototype.getRowGroup=function(){return this._view.rowGroup.toProxy()},e.prototype.setRowGroup=function(t){this._view.rowGroup.assignFrom(t)},e.prototype.getGroupPanel=function(){return{visible:this._view.groupPanelView.visible,height:this._view.groupPanelView.height,minHeight:this._view.groupPanelView.minHeight}},e.prototype.setGroupPanel=function(t){this._view.groupPanelView.assignFrom(t)},e.prototype.getOptions=function(){var e=t.prototype.getOptions.call(this),i=this._view._rs;return e.filterOr=i.inclusiveFiltering,e.groupSummaryMode=i.groupSummaryMode.toString(),e.filterMode=i.filterMode.toString(),e.grouping=this.groupingOptions,e.groupPanel=this.groupPanel,e},e.prototype.setOptions=function(e){t.prototype.setOptions.call(this,e),e.grouping&&this._view.groupingOptions.assignFrom(e.grouping),e.groupPanel&&this._view.groupPanelView.assignFrom(e.groupPanel)},e.prototype.getGroupingOptions=function(){return this._view.groupingOptions.toProxy()},e.prototype.setGroupingOptions=function(t){this._view.groupingOptions.assignFrom(t)},e.prototype.groupBy=function(t,e,i){this._view.groupByFieldNames(t,e,i)},e.prototype.isGrouped=function(){return this._view.rowGrouped},e.prototype.isMergedGrouped=function(){return this._view.mergedRowGrouped},e.prototype.getGroupFields=function(){return this._view.rowGroupFields},e.prototype.getGroupFieldNames=function(t){void 0===t&&(t=!0);var e=this._view.rowGroupFields;if(e){var i=this._dataProvider;if(i){for(var o=[],n=0,r=e.length;n<r;n++)o.push(t?i.getOrgFieldName(e[n]):i.getFieldName(e[n]));return o}return e}return null},e.prototype.getGroupLevels=function(){return this._view.rowGroupLevels},e.prototype.getGroupLevel=function(t){return(t=this._dataProvider.getFieldIndex(t))>-1?this._view.getGroupLevel(t):-1},e.prototype.getGroupIndex=function(t){var e=this._view.getItem(t);if(e){var i=e.parent;return i?i.index:-1}return-1},e.prototype.isGroupItem=function(t){return this._view.getItem(t)instanceof Eo},e.prototype.isParentVisible=function(t){var e=this._view.getItem(t);return e&&e.parent&&e.parent.visible},e.prototype.expandGroup=function(t,e,i,o){void 0===o&&(o=0);var n=this._view.getItem(t);n&&n instanceof Eo&&this._view.expand(n,e,i,o)},e.prototype.collapseGroup=function(t,e,i){var o=this._view.getItem(t);o&&o instanceof Eo&&this._view.collapse(o,e,i)},e.prototype.expandParent=function(t,e,i,o){void 0===o&&(o=0);var n=this._view.getItem(t);if(n){var r=n.parent;r&&r.expandable&&(r.collapsed||i)&&this._view.expand(r,e,i,o)}},e.prototype.collapseParent=function(t,e,i){var o=this._view.getItem(t);if(o){var n=o.parent;n&&n.collapsable&&n instanceof Eo&&this._view.collapse(n,e,i)}},e.prototype.expandAll=function(t,e){void 0===t&&(t=!0),this._view.itemCount>0&&this._view.expandAll(t,e)},e.prototype.collapseAll=function(t){this._view.itemCount>0&&this._view.collapseAll(t)},e.prototype.getGroupSummaryValue=function(t,e,i){if(t&&this._view.rowGrouped){var o=this._view.getItemOfModel(t),n=yd.getColumn(this._view,e);if(o instanceof xo){var r=o._allFooters;return null!=(i=1===o.allFooterCount?0:i)&&o._allFooters[i]?(o=o._allFooters[i],nh.getValue(o,n)):r.map((function(t){return nh.getValue(t,n)}))}if(o instanceof Oo)return nh.getValue(o,n)}return null},e.prototype.layoutExpandAll=function(t){this._view.layoutExpandAll(!0,t)},e.prototype.layoutCollapseAll=function(t){this._view.layoutExpandAll(!1,t)},e.prototype.beginInsertRow=function(t,e){void 0===t&&(t=-1),this._view.insertAt(t,e)},e.prototype.beginAppendRow=function(){this._view.append()},e.prototype.beginUpdateRow=function(t){if(this._view.focusedIndex){var e=this._view.focusedIndex.clone();void 0!==t&&(e.itemIndex=t),this._view.edit(e)}},e.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._view.setPaging(t,e,i)},e.prototype.getPage=function(){return this._view.page},e.prototype.setPage=function(t,e){void 0===e&&(e=-1),this._view.setPage(t,e)},e.prototype.getPageCount=function(){return this._view.pageCount},e.prototype.setPageCount=function(t){this._view.pageCount=t},e.prototype.getPageOfDataRow=function(t){return this._view.getPageOfDataRow(t)},e.prototype.getCheckedItems=function(t){return void 0===t&&(t=!0),this._view.getCheckedItemIndices(!t)},e.prototype.getCheckedRows=function(t,e,i){return void 0===t&&(t=!0),this._view.getCheckedRows(t,e,i)},e.prototype.getMergedItems=function(t,e,i,o){return void 0===i&&(i=!0),void 0===o&&(o=!0),this._view.getMergedItems(t,e,i,o)},e.prototype._createView=function(t,e,i){return(this._container=new Qp(t,this,e,i)).gridView},e.prototype._createListener=function(t){return new Cd(this,t)},e}(_d),vd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onTreeItemExpanding=null,e.onTreeItemExpanded=null,e.onTreeItemCollapsing=null,e.onTreeItemCollapsed=null,e.onTreeItemChanged=null,e}return n(e,t),Object.defineProperty(e.prototype,"treeOptions",{get:function(){return this._view.treeOptions},enumerable:!1,configurable:!0}),e.prototype.getTreeOptions=function(){return this._view.treeOptions.toProxy()},e.prototype.setTreeOptions=function(t){this._view.treeOptions.assignFrom(t)},e.prototype.getParent=function(t){var e=this._view.getItem(t);return e?e.parentIndex:-1},e.prototype.getChildren=function(t){var e=this._view.getItem(t);if(e){for(var i=[],o=0,n=e.count;o<n;o++)i.push(e.getItem(o).index);return i}return null},e.prototype.getDescendants=function(t){var e=this._view.getItem(t);if(e){for(var i=[],o=e.getDescendants(!1)||[],n=0,r=o.length;n<r;n++)i.push(o[n].index);return i}return null},e.prototype.getAncestors=function(t,e){void 0===e&&(e=!0);var i=this._view.getItem(t);if(i){for(var o=[],n=i.getAncestors(),r=0,s=n.length;r<s;r++)!e&&n[r]instanceof nr||o.push(n[r].index);return o}return null},e.prototype.expand=function(t,e,i,o){void 0===o&&(o=0);var n=this._view.getItem(t);n&&this._view.expand(n,e,i,o)},e.prototype.expandModel=function(t,e,i,o){void 0===o&&(o=0);var n=this._view.getItemOfModel(t);n&&this._view.expand(n,e,i,o)},e.prototype.collapse=function(t,e){var i=this._view.getItem(t);i&&this._view.collapse(i,e)},e.prototype.collapseModel=function(t,e){var i=this._view.getItemOfModel(t);i&&this._view.collapse(i,e)},e.prototype.expandAll=function(t){void 0===t&&(t=0),this._view.expandAll(t)},e.prototype.collapseAll=function(){this._view.collapseAll()},e.prototype.getCheckedItems=function(){return this._view.getCheckedItemIndices()},e.prototype.getCheckedRows=function(t){return this._view.getCheckedRowIds(t)},e.prototype.checkChildren=function(t,e,i,o,n,r){void 0===r&&(r=!0);var s=this._view.getItem(t);s&&this._view.checkChildren(s,e,i,o,n,r)},e.prototype._createView=function(t,e,i){return(this._container=new ud(t,this,e,i)).gridView},e.prototype._createListener=function(t){return new wd(this,t)},e}(_d),bd=function(e){function i(t,i){var o=e.call(this)||this;return o._del=t,o._view=i,o._view.addListener(o),o}return n(i,e),i.prototype.dispose=function(){return this._view.removeListener(this),this._view=null,this._del=null},i.prototype.onGridBaseCurrentChanging=function(t,e,i){return this._del.onCurrentChanging?this._del.onCurrentChanging(this._del,e.proxy(),i.proxy()):(xt.log("onCurrentChanging",e,i),!0)},i.prototype.onGridBaseCurrentChanged=function(t,e){this._del.onCurrentChanged?this._del.onCurrentChanged(this._del,e.proxy()):xt.log("onCurrentChanged",e)},i.prototype.onGridBaseCurrentRowChanged=function(t,e,i){this._del.onCurrentRowChanged?this._del.onCurrentRowChanged(this._del,e,i):xt.log("onCurrentRowChanged",e,i)},i.prototype.onGridBaseValidateCell=function(e,i,o,n){if(this._del.onValidateColumn){var r=i.itemIndex,s=i.item&&i.item.dataRow,a=this._del.onValidateColumn(this._del,i.column,o,n,r,s);if(a&&a.level&&a.message)throw new hr(a.level,a.message,i.column,a.message);if("string"==typeof a||"number"==typeof a)throw new hr(t.ValidationLevel.ERROR,a,i.column,a)}},i.prototype.onGridBaseValidateRow=function(e,i,o,n){if(this._del.onValidateRow){var r=this._del.onValidateRow(this._del,i.index,i.dataRow,o,n);if(r&&r.level&&r.message)throw new hr(r.level,r.message,null,r.message);if("string"==typeof r||"number"==typeof r)throw new hr(t.ValidationLevel.ERROR,r,null,r)}},i.prototype.onGridBaseValidationFail=function(t,e,i,o){if(!this._del.onValidationFail)return o;var n=this._del.onValidationFail(this._del,e,i,{level:o.level,message:o.message});return n&&n.level&&n.message?(o.level=n.level,o.message=n.message,o.userMessage=n.message,o):"string"==typeof n||"number"==typeof n?(o.message=n,o.userMessage=n,o):void 0},i.prototype.onGridBaseCellClicked=function(t,e){this._del.onCellClicked?this._del.onCellClicked(this._del,e):xt.log("onCellClicked: ",e)},i.prototype.onGridBaseCellDblClicked=function(t,e){this._del.onCellDblClicked?this._del.onCellDblClicked(this._del,e):xt.log("onCellDblClicked: ",e)},i.prototype.onGridBaseCellItemClicked=function(t,e,i){return this._del.onCellItemClicked?this._del.onCellItemClicked(this._del,e.toProxy(),i):xt.log("onCellItemClicked: ",i)},i.prototype.onGridBaseColumnCheckedChanged=function(t,e,i){this._del.onColumnCheckedChanged?this._del.onColumnCheckedChanged(this._del,e,i):xt.log("onColumnCheckedChanged: ("+e.name+", "+i+")")},i.prototype.onGridBaseMenuItemClicked=function(t,e,i){this._del.onMenuItemClicked?this._del.onMenuItemClicked(this._del,e.toProxy(),i):xt.log("onMenuItemClicked: ",e.toProxy(),i)},i.prototype.onGridBaseContextMenuPopup=function(t,e,i,o,n,r){return this._del.onContextMenuPopup?this._del.onContextMenuPopup(this._del,e,i,o,n,r):xt.log("onContextMenuPopup: x = ",e,", y = ",i,", clickData =",o)},i.prototype.onGridBaseContextMenuItemClicked=function(t,e,i){this._del.onContextMenuItemClicked?this._del.onContextMenuItemClicked(this._del,e.toProxy(),i):xt.log("onContextMenuItemClicked: ",e.toProxy(),i)},i.prototype.onGridBaseCellButtonClicked=function(t,e){this._del.onCellButtonClicked?this._del.onCellButtonClicked(this._del,e.proxy(),e.column):xt.log("onCellButtonClicked: ",e)},i.prototype.onGridBaseScrollToBottom=function(t){this._del.onScrollToBottom?this._del.onScrollToBottom(this._del):xt.log("onScrollToBottom")},i.prototype.onGridBaseTopIndexChanged=function(t,e){this._del.onTopIndexChanged?this._del.onTopIndexChanged(this._del,e):xt.log("onTopItemIndexChanged: "+e)},i.prototype.onGridBaseLeftPosChanged=function(t,e){this._del.onLeftPosChanged?this._del.onLeftPosChanged(this._del,e):xt.log("onLeftPosChanged: "+e)},i.prototype.onGridBaseTopIndexChanging=function(t,e,i,o,n){return this._del.onTopIndexChanging?this._del.onTopIndexChanging(this._del,e,i,o,n):xt.log("onTopItemIndexChanging: ",e,i,o,n)},i.prototype.onGridBaseRowsDeleting=function(t,e){return this._del.onRowsDeleting?this._del.onRowsDeleting(this._del,e):(xt.log("onRowsDeleting:",e),!0)},i.prototype.onGridBaseRowInserting=function(t,e,i){if(this._del.onRowInserting)return this._del.onRowInserting(this._del,e,i);xt.log("onRowInserting: "+e,i)},i.prototype.onGridBaseSelectionCleared=function(t){this._del.onSelectionCleared?this._del.onSelectionCleared(this._del):xt.log("onSelectionCleared")},i.prototype.onGridBaseSelectionChanged=function(t,e){this._del.onSelectionChanged?this._del.onSelectionChanged(this._del,e):xt.log("onSelectionChanged")},i.prototype.onGridBaseSelectionAdded=function(t,e){this._del.onSelectionAdded?this._del.onSelectionAdded(this._del,e):xt.log("onSelectionAdded: ",e)},i.prototype.onGridBaseSelectionEnded=function(t,e){this._del.onSelectionEnded?this._del.onSelectionEnded(this._del,e):xt.log("onSelectionEnded")},i.prototype.onGridBaseShowEditor=function(t,e,i,o){return this._del.onShowEditor?this._del.onShowEditor(this._del,e.proxy(),i,o):xt.log("onShowEditor",e.proxy(),i,o)},i.prototype.onGridBaseShowEditCommand=function(t,e){return this._del.onShowEditCommand&&this._del.onShowEditCommand(this._del,e.proxy())},i.prototype.onGridBaseHideEditor=function(t,e){this._del.onHideEditor?this._del.onHideEditor(this._del,e.proxy()):xt.log("onHideEditor: ",e.proxy())},i.prototype.onGridBaseEditChange=function(t,e,i){this._del.onEditChange?this._del.onEditChange(this._del,e.proxy(),i):xt.log("onEditChange: "+i,e.proxy())},i.prototype.onGridBaseGetEditValue=function(t,e,i){this._del.onGetEditValue?this._del.onGetEditValue(this._del,e.proxy(),i):xt.log("onGetEditValue: ",e,i)},i.prototype.onGridBaseEditCommit=function(t,e,i,o){return this._del.onEditCommit?this._del.onEditCommit(this._del,e.proxy(),i,o):(xt.log("onEditCommit",e.proxy(),i,o),!0)},i.prototype.onGridBaseEditCanceled=function(t,e){this._del.onEditCanceled?this._del.onEditCanceled(this._del,e.proxy()):xt.log("onEditCanceled",e.proxy())},i.prototype.onGridBaseItemEditCanceled=function(t,e){this._del.onItemEditCanceled?this._del.onItemEditCanceled(this._del,e.index,e.itemState):xt.log("onItemEditCanceled: "+e.index+", "+e.itemState)},i.prototype.onGridBaseItemEditCancel=function(t,e){return this._del.onItemEditCancel?this._del.onItemEditCancel(this._del,e.index,e.itemState):(xt.log("onItemEditCancel: "+e.index+", "+e.itemState),!0)},i.prototype.onGridBaseEditSearch=function(t,e,i){this._del.onEditSearch?this._del.onEditSearch(this._del,e.proxy(),i):xt.log("onEditSearch: "+i,e.proxy())},i.prototype.onGridBaseSearchCellButtonClick=function(t,e,i){return this._del.onSearchCellButtonClick?this._del.onSearchCellButtonClick(this._del,e.proxy(),i):(xt.log("onSearchCellButtonClick: "+i,e.proxy()),null)},i.prototype.onGridBaseCellEdited=function(t,e,i){return this._del.onCellEdited?this._del.onCellEdited(this._del,e.index,e.dataRow,i):xt.log("onCellEdited: "+e.index+", "+e.dataRow+", "+i)},i.prototype.onGridBaseEditRowChanged=function(t,e,i,o,n){return this._del.onEditRowChanged?this._del.onEditRowChanged(this._del,e.index,e.dataRow,i,o,n):xt.log("onEditRowChanged: "+e.index+", "+e.dataRow+", "+i+", "+o+" => "+n)},i.prototype.onGridBaseEditRowPasted=function(t,e,i,o,n){return this._del.onEditRowPasted?this._del.onEditRowPasted(this._del,e.index,e.dataRow,i,o,n):xt.log("onEditRowPasted: "+e.index+", "+e.dataRow,i,o,n)},i.prototype.onGridBaseRowsPasted=function(t,e){return this._del.onRowsPasted?this._del.onRowsPasted(this._del,e):xt.log("onRowsPasted: ",e)},i.prototype.onGridBaseCellPasting=function(t,e,i){return this._del.onCellPasting?this._del.onCellPasting(this._del,e.proxy(),i):xt.log("onCellPasting: ",e,i)},i.prototype.onGridBaseItemChecked=function(t,e,i){return this._del.onItemChecked?this._del.onItemChecked(this._del,e.index,i):xt.log("onItemChecked",e.index,i)},i.prototype.onGridBaseItemsChecked=function(t,e,i){var o=yd.getItemIndices(e);return this._del.onItemsChecked?this._del.onItemsChecked(this._del,o,i):xt.log("onItemsChecked: "+i,o)},i.prototype.onGridBaseItemAllChecked=function(t,e){return this._del.onItemAllChecked?this._del.onItemAllChecked(this._del,e):xt.log("onItemAllChecked: "+e)},i.prototype.onGridBaseErrorClicked=function(t,e){this._del.onErrorClicked?this._del.onErrorClicked(this._del,e):xt.log("onErrorClicked: "+e)},i.prototype.onGridBaseSorting=function(t,e,i){for(var o=[],n=0,r=i.length;n<r;n++)o.push(i[n]?i[n].toString():"ascending");return this._del.onSorting?this._del.onSorting(this._del,e,i):xt.log("onSorting: ",e,o)},i.prototype.onGridBaseSortingChanged=function(t){this._del.onSortingChanged?this._del.onSortingChanged(this._del):xt.log("onSortingChanged")},i.prototype.onGridBaseFiltering=function(t){return this._del.onFiltering?this._del.onFiltering(this._del):xt.log("onFiltering")},i.prototype.onGridBaseFilteringChanged=function(t,e,i){var o=e?e.getOwner():null,n=i?i.toProxy():null,r=o?o.name:"",s=i?i.name:"";return this._del.onFilteringChanged?this._del.onFilteringChanged(this._del,o,n):xt.log("onFilteringChanged: "+r+", "+s)},i.prototype.onGridBaseWheel=function(t,e){return this._del.onWheel?this._del.onWheel(this._del,e):xt.keyLog("onWheel: "+e)},i.prototype.onGridBaseKeyDown=function(t,e){return this._del.onKeyDown?this._del.onKeyDown(this._del,e):xt.keyLog("onKeyDown: "+e)},i.prototype.onGridBaseKeyPress=function(t,e){this._del.onKeyPress?this._del.onKeyPress(this._del,e):xt.keyLog("onKeyPress: "+e)},i.prototype.onGridBaseKeyUp=function(t,e){this._del.onKeyUp?this._del.onKeyUp(this._del,e):xt.keyLog("onKeyUp: "+e)},i.prototype.onGridBaseShowTooltip=function(t,e,i){return this._del.onShowTooltip?this._del.onShowTooltip(this._del,e.proxy(),i):(xt.log("onShowTooltip: "+i,e.proxy()),i)},i.prototype.onGridBaseShowHeaderTooltip=function(t,e,i,o){return this._del.onShowHeaderTooltip?this._del.onShowHeaderTooltip(this._del,e,i,o):(xt.log("onShowHeaderTooltip: "+e.name+", "+i),i)},i.prototype.onGridBaseColumnPropertyChanged=function(t,e,i,o,n){this._del.onColumnPropertyChanged?this._del.onColumnPropertyChanged(this._del,e,i,o,n):xt.log("onColumnPropertyChanged: "+e.name+", "+i+", "+o+", "+n)},i.prototype.onGridBaseLayoutPropertyChanged=function(t,e,i,o,n){this._del.onLayoutPropertyChanged?this._del.onLayoutPropertyChanged(this._del,e,i,o,n):xt.log("onLayoutPropertyChanged: "+e.name+", "+i+", "+o+", "+n)},i.prototype.onGridBaseGridActivated=function(t){this._del.onGridActivated?this._del.onGridActivated(this._del):xt.log("onGridActivated")},i.prototype.onGridBasePaste=function(t,e,i){if(this._del.onPaste)return this._del.onPaste(this._del,e.proxy(),i);xt.log("onPaste: ",e)},i.prototype.onGridBaseCopy=function(t,e,i){var o;if(Array.isArray(e)?(o=[],e.forEach((function(t){o.push(t.toProxy())}))):o=e.toProxy(),this._del.onCopy)return this._del.onCopy(this._del,o,i);xt.log("onCopy: ",o)},i.prototype.onGridBasePasted=function(t){return this._del.onPasted?this._del.onPasted(this._del):xt.log("onPasted")},i.prototype.onGridBaseCommandStackChanged=function(t,e,i){this._del.onCommandStackChanged?this._del.onCommandStackChanged(t.handler,e,i):xt.log("onCommandStackChanged: undoable "+e+", redoable "+i)},i.prototype.onGridBaseDataLoadComplated=function(t){this._del.onDataLoadComplated?this._del.onDataLoadComplated(t.handler):xt.log("onDataLoadComplated: ")},i.prototype.onGridBaseLayoutExpanding=function(t,e){return this._del.onLayoutExpanding?this._del.onLayoutExpanding(t.handler,e):(xt.log("onLayoutExpanding"),!0)},i.prototype.onGridBaseLayoutExpanded=function(t,e){this._del.onLayoutExpanded?this._del.onLayoutExpanded(t.handler,e):xt.log("onLayoutExpanded")},i.prototype.onGridBaseLayoutCollapsing=function(t,e){return this._del.onLayoutCollapsing?this._del.onLayoutCollapsing(t.handler,e):(xt.log("onLayoutCollapsing"),!0)},i.prototype.onGridBaseLayoutCollapsed=function(t,e){this._del.onLayoutCollapsed?this._del.onLayoutCollapsed(t.handler,e):xt.log("onLayoutCollapsed")},i}(ao),Cd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onGridViewPageChanging=function(t,e){return this._del.onPageChanging?this._del.onPageChanging(this._del,e):(xt.log("onPageChanging:"+e),!0)},e.prototype.onGridViewPageChanged=function(t,e){this._del.onPageChanged?this._del.onPageChanged(this._del,e):xt.log("onPageChanged:"+e)},e.prototype.onGridViewPageCountChanged=function(t,e){this._del.onPageCountChanged?this._del.onPageCountChanged(this._del,e):xt.log("onPageCountChanged:"+e)},e.prototype.onGridViewGrouping=function(t,e){return this._del.onGrouping?this._del.onGrouping(this._del,e):(xt.log("onGrouping",e),!0)},e.prototype.onGridViewGrouped=function(t){this._del.onGrouped?this._del.onGrouped(this._del):xt.log("onGrouped")},e.prototype.onGridViewExpanding=function(t,e){return this._del.onExpanding?this._del.onExpanding(this._del,e.index):(xt.log("onExpanding: "+e.index),!0)},e.prototype.onGridViewExpanded=function(t,e){this._del.onExpanded?this._del.onExpanded(this._del,e.index):xt.log("onExpanded: "+e.index)},e.prototype.onGridViewCollapsing=function(t,e){return this._del.onCollapsing?this._del.onCollapsing(this._del,e.index):(xt.log("onCollapsing: "+e.index),!0)},e.prototype.onGridViewCollapsed=function(t,e){this._del.onCollapsed?this._del.onCollapsed(this._del,e.index):xt.log("onCollapsed: "+e.index)},e}(bd),wd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onTreeViewExpanding=function(t,e){return this._del.onTreeItemExpanding?this._del.onTreeItemExpanding(this._del,e.index,e.rowId):(xt.log("TreeItem expanding: "+e),!0)},e.prototype.onTreeViewExpanded=function(t,e){this._del.onTreeItemExpanded?this._del.onTreeItemExpanded(this._del,e.index,e.rowId):xt.log("TreeItem expanded: "+e)},e.prototype.onTreeViewCollapsing=function(t,e){return this._del.onTreeItemCollapsing?this._del.onTreeItemCollapsing(this._del,e.index,e.rowId):(xt.log("TreeItem collapsing: "+e),!0)},e.prototype.onTreeViewCollapsed=function(t,e){this._del.onTreeItemCollapsed?this._del.onTreeItemCollapsed(this._del,e.index,e.rowId):xt.log("TreeItem collapsed: "+e)},e.prototype.onTreeViewChanged=function(t,e){this._del.onTreeItemChanged?this._del.onTreeItemChanged(this._del,e.index,e.rowId):xt.log("TreeItem item changed: "+e)},e}(bd),Sd=function(){function i(){}return i.getVersion=function(){return e.version},i.getLicenseType=function(){return e.license},i.getLicenseCode=function(){return e.code},i.getActiveGrid=function(){var t=nu.getActiveGrid();return t&&t.handler},i.getGridInstance=function(t){var e=nu.getGridInstance(t);return e&&e.handler},i.exportGrid=function(t){var e=t&&t.exportGrids;if(e){for(var i=this.getActiveGrid(),o=void 0,n=0;n<e.length;n++){var r=e[n].grid;if(r===i){o=r;break}o=o||r}if(o)return void o.exportGrid(t)}throw new Error("multiExport must have exportGrids.")},i.setDebug=function(t,e,i){xt.setDebugging(t,e,i)},i.setMobile=function(t){xt.setMobile(t)},i.setTablet=function(t){xt.setTablet(t)},i.setSlotMode=function(t){xt.setSlotMode(t)},Object.defineProperty(i,"GridView",{get:function(){return md},enumerable:!1,configurable:!0}),Object.defineProperty(i,"TreeView",{get:function(){return vd},enumerable:!1,configurable:!0}),Object.defineProperty(i,"LocalDataProvider",{get:function(){return uo},enumerable:!1,configurable:!0}),Object.defineProperty(i,"LocalTreeDataProvider",{get:function(){return co},enumerable:!1,configurable:!0}),Object.defineProperty(i,"ValueType",{get:function(){return t.ValueType},enumerable:!1,configurable:!0}),i}();t.PolygonShape=void 0,function(t){t.RECTANGLE="rectangle",t.TRIANLGE="triangle",t.INVERTED_TRIANLGE="itriangle",t.DIAMOND="diamond",t.UP_ARROW="uparrow",t.DOWN_ARROW="downarrow",t.LEFT_ARROW="leftarrow",t.RIGHT_ARROW="rightarrow",t.PLUS="plus",t.MINUS="minus",t.EQUAL="equal",t.STAR="star"}(t.PolygonShape||(t.PolygonShape={}));var Ed=e.version,xd=e.license,Od=e.code;t.DataProviderBase=lo,t.GridBase=_d,t.GridView=md,t.LocalDataProvider=uo,t.LocalTreeDataProvider=co,t.TreeView=vd,t.VisualObject=zo,t.default=Sd,t.gridLicenseCode=Od,t.gridLicenseType=xd,t.gridVersion=Ed,Object.defineProperty(t,"__esModule",{value:!0})}))},3029:function(t,e,i){"use strict";i.d(e,{Z:function(){return h}});const o="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var n={randomUUID:o};i(4224),i(1121),i(7133);let r;const s=new Uint8Array(16);function a(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)}i(560);const l=[];for(let p=0;p<256;++p)l.push((p+256).toString(16).slice(1));function u(t,e=0){return l[t[e+0]]+l[t[e+1]]+l[t[e+2]]+l[t[e+3]]+"-"+l[t[e+4]]+l[t[e+5]]+"-"+l[t[e+6]]+l[t[e+7]]+"-"+l[t[e+8]]+l[t[e+9]]+"-"+l[t[e+10]]+l[t[e+11]]+l[t[e+12]]+l[t[e+13]]+l[t[e+14]]+l[t[e+15]]}function c(t,e,i){if(n.randomUUID&&!e&&!t)return n.randomUUID();t=t||{};const o=t.random||(t.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){i=i||0;for(let t=0;t<16;++t)e[i+t]=o[t];return e}return u(o)}var h=c},89:function(t,e){"use strict";e.Z=(t,e)=>{const i=t.__vccOpts||t;for(const[o,n]of e)i[o]=n;return i}},509:function(t,e,i){"use strict";var o=i(9985),n=i(3691),r=TypeError;t.exports=function(t){if(o(t))return t;throw new r(n(t)+" is not a function")}},3550:function(t,e,i){"use strict";var o=i(9985),n=String,r=TypeError;t.exports=function(t){if("object"==typeof t||o(t))return t;throw new r("Can't set "+n(t)+" as a prototype")}},767:function(t,e,i){"use strict";var o=i(3622),n=TypeError;t.exports=function(t,e){if(o(e,t))return t;throw new n("Incorrect invocation")}},5027:function(t,e,i){"use strict";var o=i(8999),n=String,r=TypeError;t.exports=function(t){if(o(t))return t;throw new r(n(t)+" is not an object")}},7075:function(t){"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},4872:function(t,e,i){"use strict";var o,n,r,s=i(7075),a=i(7697),l=i(9037),u=i(9985),c=i(8999),h=i(6812),p=i(926),d=i(3691),f=i(5773),g=i(1880),y=i(2148),_=i(3622),m=i(1868),v=i(9385),b=i(4201),C=i(4630),w=i(618),S=w.enforce,E=w.get,x=l.Int8Array,O=x&&x.prototype,R=l.Uint8ClampedArray,I=R&&R.prototype,T=x&&m(x),P=O&&m(O),D=Object.prototype,k=l.TypeError,A=b("toStringTag"),L=C("TYPED_ARRAY_TAG"),M="TypedArrayConstructor",F=s&&!!v&&"Opera"!==p(l.opera),N=!1,V={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},G=function(t){if(!c(t))return!1;var e=p(t);return"DataView"===e||h(V,e)||h(B,e)},j=function(t){var e=m(t);if(c(e)){var i=E(e);return i&&h(i,M)?i[M]:j(e)}},H=function(t){if(!c(t))return!1;var e=p(t);return h(V,e)||h(B,e)},$=function(t){if(H(t))return t;throw new k("Target is not a typed array")},W=function(t){if(u(t)&&(!v||_(T,t)))return t;throw new k(d(t)+" is not a typed array constructor")},U=function(t,e,i,o){if(a){if(i)for(var n in V){var r=l[n];if(r&&h(r.prototype,t))try{delete r.prototype[t]}catch(s){try{r.prototype[t]=e}catch(u){}}}P[t]&&!i||g(P,t,i?e:F&&O[t]||e,o)}},z=function(t,e,i){var o,n;if(a){if(v){if(i)for(o in V)if(n=l[o],n&&h(n,t))try{delete n[t]}catch(r){}if(T[t]&&!i)return;try{return g(T,t,i?e:F&&T[t]||e)}catch(r){}}for(o in V)n=l[o],!n||n[t]&&!i||g(n,t,e)}};for(o in V)n=l[o],r=n&&n.prototype,r?S(r)[M]=n:F=!1;for(o in B)n=l[o],r=n&&n.prototype,r&&(S(r)[M]=n);if((!F||!u(T)||T===Function.prototype)&&(T=function(){throw new k("Incorrect invocation")},F))for(o in V)l[o]&&v(l[o],T);if((!F||!P||P===D)&&(P=T.prototype,F))for(o in V)l[o]&&v(l[o].prototype,P);if(F&&m(I)!==P&&v(I,P),a&&!h(P,A))for(o in N=!0,y(P,A,{configurable:!0,get:function(){return c(this)?this[L]:void 0}}),V)l[o]&&f(l[o],L,o);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:N&&L,aTypedArray:$,aTypedArrayConstructor:W,exportTypedArrayMethod:U,exportTypedArrayStaticMethod:z,getTypedArrayConstructor:j,isView:G,isTypedArray:H,TypedArray:T,TypedArrayPrototype:P}},9976:function(t,e,i){"use strict";var o=i(6310);t.exports=function(t,e){var i=0,n=o(e),r=new t(n);while(n>i)r[i]=e[i++];return r}},4328:function(t,e,i){"use strict";var o=i(5290),n=i(7578),r=i(6310),s=function(t){return function(e,i,s){var a,l=o(e),u=r(l),c=n(s,u);if(t&&i!==i){while(u>c)if(a=l[c++],a!==a)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===i)return t||c||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},5649:function(t,e,i){"use strict";var o=i(7697),n=i(2297),r=TypeError,s=Object.getOwnPropertyDescriptor,a=o&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(n(t)&&!s(t,"length").writable)throw new r("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},6166:function(t,e,i){"use strict";var o=i(6310);t.exports=function(t,e){for(var i=o(t),n=new e(i),r=0;r<i;r++)n[r]=t[i-r-1];return n}},6134:function(t,e,i){"use strict";var o=i(6310),n=i(8700),r=RangeError;t.exports=function(t,e,i,s){var a=o(t),l=n(i),u=l<0?a+l:l;if(u>=a||u<0)throw new r("Incorrect index");for(var c=new e(a),h=0;h<a;h++)c[h]=h===u?s:t[h];return c}},6648:function(t,e,i){"use strict";var o=i(8844),n=o({}.toString),r=o("".slice);t.exports=function(t){return r(n(t),8,-1)}},926:function(t,e,i){"use strict";var o=i(3043),n=i(9985),r=i(6648),s=i(4201),a=s("toStringTag"),l=Object,u="Arguments"===r(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(i){}};t.exports=o?r:function(t){var e,i,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=c(e=l(t),a))?i:u?r(e):"Object"===(o=r(e))&&n(e.callee)?"Arguments":o}},8758:function(t,e,i){"use strict";var o=i(6812),n=i(9152),r=i(2474),s=i(2560);t.exports=function(t,e,i){for(var a=n(e),l=s.f,u=r.f,c=0;c<a.length;c++){var h=a[c];o(t,h)||i&&o(i,h)||l(t,h,u(e,h))}}},1748:function(t,e,i){"use strict";var o=i(3689);t.exports=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},5773:function(t,e,i){"use strict";var o=i(7697),n=i(2560),r=i(5684);t.exports=o?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},5684:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2148:function(t,e,i){"use strict";var o=i(8702),n=i(2560);t.exports=function(t,e,i){return i.get&&o(i.get,e,{getter:!0}),i.set&&o(i.set,e,{setter:!0}),n.f(t,e,i)}},1880:function(t,e,i){"use strict";var o=i(9985),n=i(2560),r=i(8702),s=i(5014);t.exports=function(t,e,i,a){a||(a={});var l=a.enumerable,u=void 0!==a.name?a.name:e;if(o(i)&&r(i,u,a),a.global)l?t[e]=i:s(e,i);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(c){}l?t[e]=i:n.f(t,e,{value:i,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},5014:function(t,e,i){"use strict";var o=i(9037),n=Object.defineProperty;t.exports=function(t,e){try{n(o,t,{value:e,configurable:!0,writable:!0})}catch(i){o[t]=e}return e}},7697:function(t,e,i){"use strict";var o=i(3689);t.exports=!o((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2659:function(t){"use strict";var e="object"==typeof document&&document.all,i="undefined"==typeof e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:i}},6420:function(t,e,i){"use strict";var o=i(9037),n=i(8999),r=o.document,s=n(r)&&n(r.createElement);t.exports=function(t){return s?r.createElement(t):{}}},5565:function(t){"use strict";var e=TypeError,i=9007199254740991;t.exports=function(t){if(t>i)throw e("Maximum allowed index exceeded");return t}},7136:function(t){"use strict";t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},71:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},3615:function(t,e,i){"use strict";var o,n,r=i(9037),s=i(71),a=r.process,l=r.Deno,u=a&&a.versions||l&&l.version,c=u&&u.v8;c&&(o=c.split("."),n=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!n&&s&&(o=s.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=s.match(/Chrome\/(\d+)/),o&&(n=+o[1]))),t.exports=n},2739:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6610:function(t,e,i){"use strict";var o=i(8844),n=Error,r=o("".replace),s=function(t){return String(new n(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,l=a.test(s);t.exports=function(t,e){if(l&&"string"==typeof t&&!n.prepareStackTrace)while(e--)t=r(t,a,"");return t}},9989:function(t,e,i){"use strict";var o=i(9037),n=i(2474).f,r=i(5773),s=i(1880),a=i(5014),l=i(8758),u=i(5266);t.exports=function(t,e){var i,c,h,p,d,f,g=t.target,y=t.global,_=t.stat;if(c=y?o:_?o[g]||a(g,{}):(o[g]||{}).prototype,c)for(h in e){if(d=e[h],t.dontCallGetSet?(f=n(c,h),p=f&&f.value):p=c[h],i=u(y?h:g+(_?".":"#")+h,t.forced),!i&&void 0!==p){if(typeof d==typeof p)continue;l(d,p)}(t.sham||p&&p.sham)&&r(d,"sham",!0),s(c,h,d,t)}}},3689:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},7215:function(t,e,i){"use strict";var o=i(3689);t.exports=!o((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},2615:function(t,e,i){"use strict";var o=i(7215),n=Function.prototype.call;t.exports=o?n.bind(n):function(){return n.apply(n,arguments)}},1236:function(t,e,i){"use strict";var o=i(7697),n=i(6812),r=Function.prototype,s=o&&Object.getOwnPropertyDescriptor,a=n(r,"name"),l=a&&"something"===function(){}.name,u=a&&(!o||o&&s(r,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:u}},2743:function(t,e,i){"use strict";var o=i(8844),n=i(509);t.exports=function(t,e,i){try{return o(n(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(r){}}},8844:function(t,e,i){"use strict";var o=i(7215),n=Function.prototype,r=n.call,s=o&&n.bind.bind(r,r);t.exports=o?s:function(t){return function(){return r.apply(t,arguments)}}},6058:function(t,e,i){"use strict";var o=i(9037),n=i(9985),r=function(t){return n(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?r(o[t]):o[t]&&o[t][e]}},4849:function(t,e,i){"use strict";var o=i(509),n=i(981);t.exports=function(t,e){var i=t[e];return n(i)?void 0:o(i)}},9037:function(t,e,i){"use strict";var o=function(t){return t&&t.Math===Math&&t};t.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof i.g&&i.g)||function(){return this}()||this||Function("return this")()},6812:function(t,e,i){"use strict";var o=i(8844),n=i(690),r=o({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(n(t),e)}},7248:function(t){"use strict";t.exports={}},8506:function(t,e,i){"use strict";var o=i(7697),n=i(3689),r=i(6420);t.exports=!o&&!n((function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},4413:function(t,e,i){"use strict";var o=i(8844),n=i(3689),r=i(6648),s=Object,a=o("".split);t.exports=n((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===r(t)?a(t,""):s(t)}:s},3457:function(t,e,i){"use strict";var o=i(9985),n=i(8999),r=i(9385);t.exports=function(t,e,i){var s,a;return r&&o(s=e.constructor)&&s!==i&&n(a=s.prototype)&&a!==i.prototype&&r(t,a),t}},6738:function(t,e,i){"use strict";var o=i(8844),n=i(9985),r=i(4091),s=o(Function.toString);n(r.inspectSource)||(r.inspectSource=function(t){return s(t)}),t.exports=r.inspectSource},618:function(t,e,i){"use strict";var o,n,r,s=i(9834),a=i(9037),l=i(8999),u=i(5773),c=i(6812),h=i(4091),p=i(2713),d=i(7248),f="Object already initialized",g=a.TypeError,y=a.WeakMap,_=function(t){return r(t)?n(t):o(t,{})},m=function(t){return function(e){var i;if(!l(e)||(i=n(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return i}};if(s||h.state){var v=h.state||(h.state=new y);v.get=v.get,v.has=v.has,v.set=v.set,o=function(t,e){if(v.has(t))throw new g(f);return e.facade=t,v.set(t,e),e},n=function(t){return v.get(t)||{}},r=function(t){return v.has(t)}}else{var b=p("state");d[b]=!0,o=function(t,e){if(c(t,b))throw new g(f);return e.facade=t,u(t,b,e),e},n=function(t){return c(t,b)?t[b]:{}},r=function(t){return c(t,b)}}t.exports={set:o,get:n,has:r,enforce:_,getterFor:m}},2297:function(t,e,i){"use strict";var o=i(6648);t.exports=Array.isArray||function(t){return"Array"===o(t)}},9401:function(t,e,i){"use strict";var o=i(926);t.exports=function(t){var e=o(t);return"BigInt64Array"===e||"BigUint64Array"===e}},9985:function(t,e,i){"use strict";var o=i(2659),n=o.all;t.exports=o.IS_HTMLDDA?function(t){return"function"==typeof t||t===n}:function(t){return"function"==typeof t}},5266:function(t,e,i){"use strict";var o=i(3689),n=i(9985),r=/#|\.prototype\./,s=function(t,e){var i=l[a(t)];return i===c||i!==u&&(n(e)?o(e):!!e)},a=s.normalize=function(t){return String(t).replace(r,".").toLowerCase()},l=s.data={},u=s.NATIVE="N",c=s.POLYFILL="P";t.exports=s},981:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},8999:function(t,e,i){"use strict";var o=i(9985),n=i(2659),r=n.all;t.exports=n.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:o(t)||t===r}:function(t){return"object"==typeof t?null!==t:o(t)}},3931:function(t){"use strict";t.exports=!1},734:function(t,e,i){"use strict";var o=i(6058),n=i(9985),r=i(3622),s=i(9525),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return n(e)&&r(e.prototype,a(t))}},6310:function(t,e,i){"use strict";var o=i(3126);t.exports=function(t){return o(t.length)}},8702:function(t,e,i){"use strict";var o=i(8844),n=i(3689),r=i(9985),s=i(6812),a=i(7697),l=i(1236).CONFIGURABLE,u=i(6738),c=i(618),h=c.enforce,p=c.get,d=String,f=Object.defineProperty,g=o("".slice),y=o("".replace),_=o([].join),m=a&&!n((function(){return 8!==f((function(){}),"length",{value:8}).length})),v=String(String).split("String"),b=t.exports=function(t,e,i){"Symbol("===g(d(e),0,7)&&(e="["+y(d(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(a?f(t,"name",{value:e,configurable:!0}):t.name=e),m&&i&&s(i,"arity")&&t.length!==i.arity&&f(t,"length",{value:i.arity});try{i&&s(i,"constructor")&&i.constructor?a&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(n){}var o=h(t);return s(o,"source")||(o.source=_(v,"string"==typeof e?e:"")),t};Function.prototype.toString=b((function(){return r(this)&&p(this).source||u(this)}),"toString")},8828:function(t){"use strict";var e=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(t){var o=+t;return(o>0?i:e)(o)}},3841:function(t,e,i){"use strict";var o=i(4327);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:o(t)}},2560:function(t,e,i){"use strict";var o=i(7697),n=i(8506),r=i(5648),s=i(5027),a=i(8360),l=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",d="writable";e.f=o?r?function(t,e,i){if(s(t),e=a(e),s(i),"function"===typeof t&&"prototype"===e&&"value"in i&&d in i&&!i[d]){var o=c(t,e);o&&o[d]&&(t[e]=i.value,i={configurable:p in i?i[p]:o[p],enumerable:h in i?i[h]:o[h],writable:!1})}return u(t,e,i)}:u:function(t,e,i){if(s(t),e=a(e),s(i),n)try{return u(t,e,i)}catch(o){}if("get"in i||"set"in i)throw new l("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},2474:function(t,e,i){"use strict";var o=i(7697),n=i(2615),r=i(9556),s=i(5684),a=i(5290),l=i(8360),u=i(6812),c=i(8506),h=Object.getOwnPropertyDescriptor;e.f=o?h:function(t,e){if(t=a(t),e=l(e),c)try{return h(t,e)}catch(i){}if(u(t,e))return s(!n(r.f,t,e),t[e])}},2741:function(t,e,i){"use strict";var o=i(4948),n=i(2739),r=n.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,r)}},7518:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},1868:function(t,e,i){"use strict";var o=i(6812),n=i(9985),r=i(690),s=i(2713),a=i(1748),l=s("IE_PROTO"),u=Object,c=u.prototype;t.exports=a?u.getPrototypeOf:function(t){var e=r(t);if(o(e,l))return e[l];var i=e.constructor;return n(i)&&e instanceof i?i.prototype:e instanceof u?c:null}},3622:function(t,e,i){"use strict";var o=i(8844);t.exports=o({}.isPrototypeOf)},4948:function(t,e,i){"use strict";var o=i(8844),n=i(6812),r=i(5290),s=i(4328).indexOf,a=i(7248),l=o([].push);t.exports=function(t,e){var i,o=r(t),u=0,c=[];for(i in o)!n(a,i)&&n(o,i)&&l(c,i);while(e.length>u)n(o,i=e[u++])&&(~s(c,i)||l(c,i));return c}},9556:function(t,e){"use strict";var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,n=o&&!i.call({1:2},1);e.f=n?function(t){var e=o(this,t);return!!e&&e.enumerable}:i},9385:function(t,e,i){"use strict";var o=i(2743),n=i(5027),r=i(3550);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{t=o(Object.prototype,"__proto__","set"),t(i,[]),e=i instanceof Array}catch(s){}return function(i,o){return n(i),r(o),e?t(i,o):i.__proto__=o,i}}():void 0)},5899:function(t,e,i){"use strict";var o=i(2615),n=i(9985),r=i(8999),s=TypeError;t.exports=function(t,e){var i,a;if("string"===e&&n(i=t.toString)&&!r(a=o(i,t)))return a;if(n(i=t.valueOf)&&!r(a=o(i,t)))return a;if("string"!==e&&n(i=t.toString)&&!r(a=o(i,t)))return a;throw new s("Can't convert object to primitive value")}},9152:function(t,e,i){"use strict";var o=i(6058),n=i(8844),r=i(2741),s=i(7518),a=i(5027),l=n([].concat);t.exports=o("Reflect","ownKeys")||function(t){var e=r.f(a(t)),i=s.f;return i?l(e,i(t)):e}},4684:function(t,e,i){"use strict";var o=i(981),n=TypeError;t.exports=function(t){if(o(t))throw new n("Can't call method on "+t);return t}},2713:function(t,e,i){"use strict";var o=i(3430),n=i(4630),r=o("keys");t.exports=function(t){return r[t]||(r[t]=n(t))}},4091:function(t,e,i){"use strict";var o=i(9037),n=i(5014),r="__core-js_shared__",s=o[r]||n(r,{});t.exports=s},3430:function(t,e,i){"use strict";var o=i(3931),n=i(4091);(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.2",mode:o?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.2/LICENSE",source:"https://github.com/zloirock/core-js"})},146:function(t,e,i){"use strict";var o=i(3615),n=i(3689),r=i(9037),s=r.String;t.exports=!!Object.getOwnPropertySymbols&&!n((function(){var t=Symbol("symbol detection");return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},7578:function(t,e,i){"use strict";var o=i(8700),n=Math.max,r=Math.min;t.exports=function(t,e){var i=o(t);return i<0?n(i+e,0):r(i,e)}},1530:function(t,e,i){"use strict";var o=i(8732),n=TypeError;t.exports=function(t){var e=o(t,"number");if("number"==typeof e)throw new n("Can't convert number to bigint");return BigInt(e)}},5290:function(t,e,i){"use strict";var o=i(4413),n=i(4684);t.exports=function(t){return o(n(t))}},8700:function(t,e,i){"use strict";var o=i(8828);t.exports=function(t){var e=+t;return e!==e||0===e?0:o(e)}},3126:function(t,e,i){"use strict";var o=i(8700),n=Math.min;t.exports=function(t){return t>0?n(o(t),9007199254740991):0}},690:function(t,e,i){"use strict";var o=i(4684),n=Object;t.exports=function(t){return n(o(t))}},8732:function(t,e,i){"use strict";var o=i(2615),n=i(8999),r=i(734),s=i(4849),a=i(5899),l=i(4201),u=TypeError,c=l("toPrimitive");t.exports=function(t,e){if(!n(t)||r(t))return t;var i,l=s(t,c);if(l){if(void 0===e&&(e="default"),i=o(l,t,e),!n(i)||r(i))return i;throw new u("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},8360:function(t,e,i){"use strict";var o=i(8732),n=i(734);t.exports=function(t){var e=o(t,"string");return n(e)?e:e+""}},3043:function(t,e,i){"use strict";var o=i(4201),n=o("toStringTag"),r={};r[n]="z",t.exports="[object z]"===String(r)},4327:function(t,e,i){"use strict";var o=i(926),n=String;t.exports=function(t){if("Symbol"===o(t))throw new TypeError("Cannot convert a Symbol value to a string");return n(t)}},3691:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(i){return"Object"}}},4630:function(t,e,i){"use strict";var o=i(8844),n=0,r=Math.random(),s=o(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++n+r,36)}},9525:function(t,e,i){"use strict";var o=i(146);t.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5648:function(t,e,i){"use strict";var o=i(7697),n=i(3689);t.exports=o&&n((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},1500:function(t){"use strict";var e=TypeError;t.exports=function(t,i){if(t<i)throw new e("Not enough arguments");return t}},9834:function(t,e,i){"use strict";var o=i(9037),n=i(9985),r=o.WeakMap;t.exports=n(r)&&/native code/.test(String(r))},4201:function(t,e,i){"use strict";var o=i(9037),n=i(3430),r=i(6812),s=i(4630),a=i(146),l=i(9525),u=o.Symbol,c=n("wks"),h=l?u["for"]||u:u&&u.withoutSetter||s;t.exports=function(t){return r(c,t)||(c[t]=a&&r(u,t)?u[t]:h("Symbol."+t)),c[t]}},560:function(t,e,i){"use strict";var o=i(9989),n=i(690),r=i(6310),s=i(5649),a=i(5565),l=i(3689),u=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),c=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=u||!c();o({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=n(this),i=r(e),o=arguments.length;a(i+o);for(var l=0;l<o;l++)e[i]=arguments[l],i++;return s(e,i),i}})},4224:function(t,e,i){"use strict";var o=i(6166),n=i(4872),r=n.aTypedArray,s=n.exportTypedArrayMethod,a=n.getTypedArrayConstructor;s("toReversed",(function(){return o(r(this),a(this))}))},1121:function(t,e,i){"use strict";var o=i(4872),n=i(8844),r=i(509),s=i(9976),a=o.aTypedArray,l=o.getTypedArrayConstructor,u=o.exportTypedArrayMethod,c=n(o.TypedArrayPrototype.sort);u("toSorted",(function(t){void 0!==t&&r(t);var e=a(this),i=s(l(e),e);return c(i,t)}))},7133:function(t,e,i){"use strict";var o=i(6134),n=i(4872),r=i(9401),s=i(8700),a=i(1530),l=n.aTypedArray,u=n.getTypedArrayConstructor,c=n.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();c("with",{with:function(t,e){var i=l(this),n=s(t),c=r(i)?a(e):+e;return o(i,u(i),n,c)}}["with"],!h)},3429:function(t,e,i){"use strict";var o=i(9989),n=i(9037),r=i(6058),s=i(5684),a=i(2560).f,l=i(6812),u=i(767),c=i(3457),h=i(3841),p=i(7136),d=i(6610),f=i(7697),g=i(3931),y="DOMException",_=r("Error"),m=r(y),v=function(){u(this,b);var t=arguments.length,e=h(t<1?void 0:arguments[0]),i=h(t<2?void 0:arguments[1],"Error"),o=new m(e,i),n=new _(e);return n.name=y,a(o,"stack",s(1,d(n.stack,1))),c(o,this,v),o},b=v.prototype=m.prototype,C="stack"in new _(y),w="stack"in new m(1,2),S=m&&f&&Object.getOwnPropertyDescriptor(n,y),E=!!S&&!(S.writable&&S.configurable),x=C&&!E&&!w;o({global:!0,constructor:!0,forced:g||x},{DOMException:x?v:m});var O=r(y),R=O.prototype;if(R.constructor!==O)for(var I in g||a(R,"constructor",s(1,O)),p)if(l(p,I)){var T=p[I],P=T.s;l(O,P)||a(O,P,s(6,T.c))}},8858:function(t,e,i){"use strict";var o=i(1880),n=i(8844),r=i(4327),s=i(1500),a=URLSearchParams,l=a.prototype,u=n(l.append),c=n(l["delete"]),h=n(l.forEach),p=n([].push),d=new a("a=1&a=2&b=3");d["delete"]("a",1),d["delete"]("b",void 0),d+""!=="a=2"&&o(l,"delete",(function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return c(this,t);var o=[];h(this,(function(t,e){p(o,{key:e,value:t})})),s(e,1);var n,a=r(t),l=r(i),d=0,f=0,g=!1,y=o.length;while(d<y)n=o[d++],g||n.key===a?(g=!0,c(this,n.key)):f++;while(f<y)n=o[f++],n.key===a&&n.value===l||u(this,n.key,n.value)}),{enumerable:!0,unsafe:!0})},1318:function(t,e,i){"use strict";var o=i(1880),n=i(8844),r=i(4327),s=i(1500),a=URLSearchParams,l=a.prototype,u=n(l.getAll),c=n(l.has),h=new a("a=1");!h.has("a",2)&&h.has("a",void 0)||o(l,"has",(function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return c(this,t);var o=u(this,t);s(e,1);var n=r(i),a=0;while(a<o.length)if(o[a++]===n)return!0;return!1}),{enumerable:!0,unsafe:!0})},3228:function(t,e,i){"use strict";var o=i(7697),n=i(8844),r=i(2148),s=URLSearchParams.prototype,a=n(s.forEach);o&&!("size"in s)&&r(s,"size",{get:function(){var t=0;return a(this,(function(){t++})),t},configurable:!0,enumerable:!0})},3494:function(t,e,i){"use strict";i.d(e,{Qc:function(){return co},fL:function(){return po},qv:function(){return ho},vI:function(){return uo},vc:function(){return lo}});i(560);function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){u(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function c(t,e){return d(t)||g(t,e)||y(t,e)||v()}function h(t){return p(t)||f(t)||y(t)||m()}function p(t){if(Array.isArray(t))return _(t)}function d(t){if(Array.isArray(t))return t}function f(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function g(t,e){var i=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var o,n,r=[],s=!0,a=!1;try{for(i=i.call(t);!(s=(o=i.next()).done);s=!0)if(r.push(o.value),e&&r.length===e)break}catch(l){a=!0,n=l}finally{try{s||null==i["return"]||i["return"]()}finally{if(a)throw n}}return r}}function y(t,e){if(t){if("string"===typeof t)return _(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var b=function(){},C={},w={},S=null,E={mark:b,measure:b};try{"undefined"!==typeof window&&(C=window),"undefined"!==typeof document&&(w=document),"undefined"!==typeof MutationObserver&&(S=MutationObserver),"undefined"!==typeof performance&&(E=performance)}catch(fo){}var x,O,R,I,T,P=C.navigator||{},D=P.userAgent,k=void 0===D?"":D,A=C,L=w,M=S,F=E,N=(A.document,!!L.documentElement&&!!L.head&&"function"===typeof L.addEventListener&&"function"===typeof L.createElement),V=~k.indexOf("MSIE")||~k.indexOf("Trident/"),B="___FONT_AWESOME___",G=16,j="fa",H="svg-inline--fa",$="data-fa-i2svg",W="data-fa-pseudo-element",U="data-fa-pseudo-element-pending",z="data-prefix",K="data-icon",Y="fontawesome-i2svg",q="async",X=["HTML","HEAD","STYLE","SCRIPT"],Q=function(){try{return!0}catch(fo){return!1}}(),J="classic",Z="sharp",tt=[J,Z];function et(t){return new Proxy(t,{get:function(t,e){return e in t?t[e]:t[J]}})}var it=et((x={},u(x,J,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),u(x,Z,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),x)),ot=et((O={},u(O,J,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),u(O,Z,{solid:"fass",regular:"fasr",light:"fasl"}),O)),nt=et((R={},u(R,J,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),u(R,Z,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),R)),rt=et((I={},u(I,J,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),u(I,Z,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),I)),st=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,at="fa-layers-text",lt=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,ut=et((T={},u(T,J,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),u(T,Z,{900:"fass",400:"fasr",300:"fasl"}),T)),ct=[1,2,3,4,5,6,7,8,9,10],ht=ct.concat([11,12,13,14,15,16,17,18,19,20]),pt=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],dt={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},ft=new Set;Object.keys(ot[J]).map(ft.add.bind(ft)),Object.keys(ot[Z]).map(ft.add.bind(ft));var gt=[].concat(tt,h(ft),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",dt.GROUP,dt.SWAP_OPACITY,dt.PRIMARY,dt.SECONDARY]).concat(ct.map((function(t){return"".concat(t,"x")}))).concat(ht.map((function(t){return"w-".concat(t)}))),yt=A.FontAwesomeConfig||{};function _t(t){var e=L.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function mt(t){return""===t||"false"!==t&&("true"===t||t)}if(L&&"function"===typeof L.querySelector){var vt=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];vt.forEach((function(t){var e=c(t,2),i=e[0],o=e[1],n=mt(_t(i));void 0!==n&&null!==n&&(yt[o]=n)}))}var bt={styleDefault:"solid",familyDefault:"classic",cssPrefix:j,replacementClass:H,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};yt.familyPrefix&&(yt.cssPrefix=yt.familyPrefix);var Ct=n(n({},bt),yt);Ct.autoReplaceSvg||(Ct.observeMutations=!1);var wt={};Object.keys(bt).forEach((function(t){Object.defineProperty(wt,t,{enumerable:!0,set:function(e){Ct[t]=e,St.forEach((function(t){return t(wt)}))},get:function(){return Ct[t]}})})),Object.defineProperty(wt,"familyPrefix",{enumerable:!0,set:function(t){Ct.cssPrefix=t,St.forEach((function(t){return t(wt)}))},get:function(){return Ct.cssPrefix}}),A.FontAwesomeConfig=wt;var St=[];function Et(t){return St.push(t),function(){St.splice(St.indexOf(t),1)}}var xt=G,Ot={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Rt(t){if(t&&N){var e=L.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var i=L.head.childNodes,o=null,n=i.length-1;n>-1;n--){var r=i[n],s=(r.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(o=r)}return L.head.insertBefore(e,o),t}}var It="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Tt(){var t=12,e="";while(t-- >0)e+=It[62*Math.random()|0];return e}function Pt(t){for(var e=[],i=(t||[]).length>>>0;i--;)e[i]=t[i];return e}function Dt(t){return t.classList?Pt(t.classList):(t.getAttribute("class")||"").split(" ").filter((function(t){return t}))}function kt(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function At(t){return Object.keys(t||{}).reduce((function(e,i){return e+"".concat(i,'="').concat(kt(t[i]),'" ')}),"").trim()}function Lt(t){return Object.keys(t||{}).reduce((function(e,i){return e+"".concat(i,": ").concat(t[i].trim(),";")}),"")}function Mt(t){return t.size!==Ot.size||t.x!==Ot.x||t.y!==Ot.y||t.rotate!==Ot.rotate||t.flipX||t.flipY}function Ft(t){var e=t.transform,i=t.containerWidth,o=t.iconWidth,n={transform:"translate(".concat(i/2," 256)")},r="translate(".concat(32*e.x,", ").concat(32*e.y,") "),s="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(r," ").concat(s," ").concat(a)},u={transform:"translate(".concat(o/2*-1," -256)")};return{outer:n,inner:l,path:u}}function Nt(t){var e=t.transform,i=t.width,o=void 0===i?G:i,n=t.height,r=void 0===n?G:n,s=t.startCentered,a=void 0!==s&&s,l="";return l+=a&&V?"translate(".concat(e.x/xt-o/2,"em, ").concat(e.y/xt-r/2,"em) "):a?"translate(calc(-50% + ".concat(e.x/xt,"em), calc(-50% + ").concat(e.y/xt,"em)) "):"translate(".concat(e.x/xt,"em, ").concat(e.y/xt,"em) "),l+="scale(".concat(e.size/xt*(e.flipX?-1:1),", ").concat(e.size/xt*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var Vt=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function Bt(){var t=j,e=H,i=wt.cssPrefix,o=wt.replacementClass,n=Vt;if(i!==t||o!==e){var r=new RegExp("\\.".concat(t,"\\-"),"g"),s=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");n=n.replace(r,".".concat(i,"-")).replace(s,"--".concat(i,"-")).replace(a,".".concat(o))}return n}var Gt=!1;function jt(){wt.autoAddCss&&!Gt&&(Rt(Bt()),Gt=!0)}var Ht={mixout:function(){return{dom:{css:Bt,insertCss:jt}}},hooks:function(){return{beforeDOMElementCreation:function(){jt()},beforeI2svg:function(){jt()}}}},$t=A||{};$t[B]||($t[B]={}),$t[B].styles||($t[B].styles={}),$t[B].hooks||($t[B].hooks={}),$t[B].shims||($t[B].shims=[]);var Wt=$t[B],Ut=[],zt=function t(){L.removeEventListener("DOMContentLoaded",t),Kt=1,Ut.map((function(t){return t()}))},Kt=!1;function Yt(t){N&&(Kt?setTimeout(t,0):Ut.push(t))}function qt(t){var e=t.tag,i=t.attributes,o=void 0===i?{}:i,n=t.children,r=void 0===n?[]:n;return"string"===typeof t?kt(t):"<".concat(e," ").concat(At(o),">").concat(r.map(qt).join(""),"</").concat(e,">")}function Xt(t,e,i){if(t&&t[e]&&t[e][i])return{prefix:e,iconName:i,icon:t[e][i]}}N&&(Kt=(L.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(L.readyState),Kt||L.addEventListener("DOMContentLoaded",zt));var Qt=function(t,e){return function(i,o,n,r){return t.call(e,i,o,n,r)}},Jt=function(t,e,i,o){var n,r,s,a=Object.keys(t),l=a.length,u=void 0!==o?Qt(e,o):e;for(void 0===i?(n=1,s=t[a[0]]):(n=0,s=i);n<l;n++)r=a[n],s=u(s,t[r],r,t);return s};function Zt(t){var e=[],i=0,o=t.length;while(i<o){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<o){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&n)<<10)+(1023&r)+65536):(e.push(n),i--)}else e.push(n)}return e}function te(t){var e=Zt(t);return 1===e.length?e[0].toString(16):null}function ee(t,e){var i,o=t.length,n=t.charCodeAt(e);return n>=55296&&n<=56319&&o>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?1024*(n-55296)+i-56320+65536:n}function ie(t){return Object.keys(t).reduce((function(e,i){var o=t[i],n=!!o.icon;return n?e[o.iconName]=o.icon:e[i]=o,e}),{})}function oe(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.skipHooks,r=void 0!==o&&o,s=ie(e);"function"!==typeof Wt.hooks.addPack||r?Wt.styles[t]=n(n({},Wt.styles[t]||{}),s):Wt.hooks.addPack(t,ie(e)),"fas"===t&&oe("fa",e)}var ne,re,se,ae=Wt.styles,le=Wt.shims,ue=(ne={},u(ne,J,Object.values(nt[J])),u(ne,Z,Object.values(nt[Z])),ne),ce=null,he={},pe={},de={},fe={},ge={},ye=(re={},u(re,J,Object.keys(it[J])),u(re,Z,Object.keys(it[Z])),re);function _e(t){return~gt.indexOf(t)}function me(t,e){var i=e.split("-"),o=i[0],n=i.slice(1).join("-");return o!==t||""===n||_e(n)?null:n}var ve=function(){var t=function(t){return Jt(ae,(function(e,i,o){return e[o]=Jt(i,t,{}),e}),{})};he=t((function(t,e,i){if(e[3]&&(t[e[3]]=i),e[2]){var o=e[2].filter((function(t){return"number"===typeof t}));o.forEach((function(e){t[e.toString(16)]=i}))}return t})),pe=t((function(t,e,i){if(t[i]=i,e[2]){var o=e[2].filter((function(t){return"string"===typeof t}));o.forEach((function(e){t[e]=i}))}return t})),ge=t((function(t,e,i){var o=e[2];return t[i]=i,o.forEach((function(e){t[e]=i})),t}));var e="far"in ae||wt.autoFetchSvg,i=Jt(le,(function(t,i){var o=i[0],n=i[1],r=i[2];return"far"!==n||e||(n="fas"),"string"===typeof o&&(t.names[o]={prefix:n,iconName:r}),"number"===typeof o&&(t.unicodes[o.toString(16)]={prefix:n,iconName:r}),t}),{names:{},unicodes:{}});de=i.names,fe=i.unicodes,ce=Re(wt.styleDefault,{family:wt.familyDefault})};function be(t,e){return(he[t]||{})[e]}function Ce(t,e){return(pe[t]||{})[e]}function we(t,e){return(ge[t]||{})[e]}function Se(t){return de[t]||{prefix:null,iconName:null}}function Ee(t){var e=fe[t],i=be("fas",t);return e||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function xe(){return ce}Et((function(t){ce=Re(t.styleDefault,{family:wt.familyDefault})})),ve();var Oe=function(){return{prefix:null,iconName:null,rest:[]}};function Re(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.family,o=void 0===i?J:i,n=it[o][t],r=ot[o][t]||ot[o][n],s=t in Wt.styles?t:null;return r||s||null}var Ie=(se={},u(se,J,Object.keys(nt[J])),u(se,Z,Object.keys(nt[Z])),se);function Te(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.skipLookups,n=void 0!==o&&o,r=(e={},u(e,J,"".concat(wt.cssPrefix,"-").concat(J)),u(e,Z,"".concat(wt.cssPrefix,"-").concat(Z)),e),s=null,a=J;(t.includes(r[J])||t.some((function(t){return Ie[J].includes(t)})))&&(a=J),(t.includes(r[Z])||t.some((function(t){return Ie[Z].includes(t)})))&&(a=Z);var l=t.reduce((function(t,e){var i=me(wt.cssPrefix,e);if(ae[e]?(e=ue[a].includes(e)?rt[a][e]:e,s=e,t.prefix=e):ye[a].indexOf(e)>-1?(s=e,t.prefix=Re(e,{family:a})):i?t.iconName=i:e!==wt.replacementClass&&e!==r[J]&&e!==r[Z]&&t.rest.push(e),!n&&t.prefix&&t.iconName){var o="fa"===s?Se(t.iconName):{},l=we(t.prefix,t.iconName);o.prefix&&(s=null),t.iconName=o.iconName||l||t.iconName,t.prefix=o.prefix||t.prefix,"far"!==t.prefix||ae["far"]||!ae["fas"]||wt.autoFetchSvg||(t.prefix="fas")}return t}),Oe());return(t.includes("fa-brands")||t.includes("fab"))&&(l.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(l.prefix="fad"),l.prefix||a!==Z||!ae["fass"]&&!wt.autoFetchSvg||(l.prefix="fass",l.iconName=we(l.prefix,l.iconName)||l.iconName),"fa"!==l.prefix&&"fa"!==s||(l.prefix=xe()||"fas"),l}var Pe=function(){function t(){s(this,t),this.definitions={}}return l(t,[{key:"add",value:function(){for(var t=this,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.reduce(this._pullDefinitions,{});Object.keys(r).forEach((function(e){t.definitions[e]=n(n({},t.definitions[e]||{}),r[e]),oe(e,r[e]);var i=nt[J][e];i&&oe(i,r[e]),ve()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var i=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(i).map((function(e){var o=i[e],n=o.prefix,r=o.iconName,s=o.icon,a=s[2];t[n]||(t[n]={}),a.length>0&&a.forEach((function(e){"string"===typeof e&&(t[n][e]=s)})),t[n][r]=s})),t}}]),t}(),De=[],ke={},Ae={},Le=Object.keys(Ae);function Me(t,e){var i=e.mixoutsTo;return De=t,ke={},Object.keys(Ae).forEach((function(t){-1===Le.indexOf(t)&&delete Ae[t]})),De.forEach((function(t){var e=t.mixout?t.mixout():{};if(Object.keys(e).forEach((function(t){"function"===typeof e[t]&&(i[t]=e[t]),"object"===r(e[t])&&Object.keys(e[t]).forEach((function(o){i[t]||(i[t]={}),i[t][o]=e[t][o]}))})),t.hooks){var o=t.hooks();Object.keys(o).forEach((function(t){ke[t]||(ke[t]=[]),ke[t].push(o[t])}))}t.provides&&t.provides(Ae)})),i}function Fe(t,e){for(var i=arguments.length,o=new Array(i>2?i-2:0),n=2;n<i;n++)o[n-2]=arguments[n];var r=ke[t]||[];return r.forEach((function(t){e=t.apply(null,[e].concat(o))})),e}function Ne(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];var n=ke[t]||[];n.forEach((function(t){t.apply(null,i)}))}function Ve(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Ae[t]?Ae[t].apply(null,e):void 0}function Be(t){"fa"===t.prefix&&(t.prefix="fas");var e=t.iconName,i=t.prefix||xe();if(e)return e=we(i,e)||e,Xt(Ge.definitions,i,e)||Xt(Wt.styles,i,e)}var Ge=new Pe,je=function(){wt.autoReplaceSvg=!1,wt.observeMutations=!1,Ne("noAuto")},He={i2svg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return N?(Ne("beforeI2svg",t),Ve("pseudoElements2svg",t),Ve("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.autoReplaceSvgRoot;!1===wt.autoReplaceSvg&&(wt.autoReplaceSvg=!0),wt.observeMutations=!0,Yt((function(){Ue({autoReplaceSvgRoot:e}),Ne("watch",t)}))}},$e={icon:function(t){if(null===t)return null;if("object"===r(t)&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:we(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&2===t.length){var e=0===t[1].indexOf("fa-")?t[1].slice(3):t[1],i=Re(t[0]);return{prefix:i,iconName:we(i,e)||e}}if("string"===typeof t&&(t.indexOf("".concat(wt.cssPrefix,"-"))>-1||t.match(st))){var o=Te(t.split(" "),{skipLookups:!0});return{prefix:o.prefix||xe(),iconName:we(o.prefix,o.iconName)||o.iconName}}if("string"===typeof t){var n=xe();return{prefix:n,iconName:we(n,t)||t}}}},We={noAuto:je,config:wt,dom:He,parse:$e,library:Ge,findIconDefinition:Be,toHtml:qt},Ue=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.autoReplaceSvgRoot,i=void 0===e?L:e;(Object.keys(Wt.styles).length>0||wt.autoFetchSvg)&&N&&wt.autoReplaceSvg&&We.dom.i2svg({node:i})};function ze(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map((function(t){return qt(t)}))}}),Object.defineProperty(t,"node",{get:function(){if(N){var e=L.createElement("div");return e.innerHTML=t.html,e.children}}}),t}function Ke(t){var e=t.children,i=t.main,o=t.mask,r=t.attributes,s=t.styles,a=t.transform;if(Mt(a)&&i.found&&!o.found){var l=i.width,u=i.height,c={x:l/u/2,y:.5};r["style"]=Lt(n(n({},s),{},{"transform-origin":"".concat(c.x+a.x/16,"em ").concat(c.y+a.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function Ye(t){var e=t.prefix,i=t.iconName,o=t.children,r=t.attributes,s=t.symbol,a=!0===s?"".concat(e,"-").concat(wt.cssPrefix,"-").concat(i):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:n(n({},r),{},{id:a}),children:o}]}]}function qe(t){var e=t.icons,i=e.main,o=e.mask,r=t.prefix,s=t.iconName,a=t.transform,l=t.symbol,u=t.title,c=t.maskId,h=t.titleId,p=t.extra,d=t.watchable,f=void 0!==d&&d,g=o.found?o:i,y=g.width,_=g.height,m="fak"===r,v=[wt.replacementClass,s?"".concat(wt.cssPrefix,"-").concat(s):""].filter((function(t){return-1===p.classes.indexOf(t)})).filter((function(t){return""!==t||!!t})).concat(p.classes).join(" "),b={children:[],attributes:n(n({},p.attributes),{},{"data-prefix":r,"data-icon":s,class:v,role:p.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(y," ").concat(_)})},C=m&&!~p.classes.indexOf("fa-fw")?{width:"".concat(y/_*16*.0625,"em")}:{};f&&(b.attributes[$]=""),u&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(h||Tt())},children:[u]}),delete b.attributes.title);var w=n(n({},b),{},{prefix:r,iconName:s,main:i,mask:o,maskId:c,transform:a,symbol:l,styles:n(n({},C),p.styles)}),S=o.found&&i.found?Ve("generateAbstractMask",w)||{children:[],attributes:{}}:Ve("generateAbstractIcon",w)||{children:[],attributes:{}},E=S.children,x=S.attributes;return w.children=E,w.attributes=x,l?Ye(w):Ke(w)}function Xe(t){var e=t.content,i=t.width,o=t.height,r=t.transform,s=t.title,a=t.extra,l=t.watchable,u=void 0!==l&&l,c=n(n(n({},a.attributes),s?{title:s}:{}),{},{class:a.classes.join(" ")});u&&(c[$]="");var h=n({},a.styles);Mt(r)&&(h["transform"]=Nt({transform:r,startCentered:!0,width:i,height:o}),h["-webkit-transform"]=h["transform"]);var p=Lt(h);p.length>0&&(c["style"]=p);var d=[];return d.push({tag:"span",attributes:c,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function Qe(t){var e=t.content,i=t.title,o=t.extra,r=n(n(n({},o.attributes),i?{title:i}:{}),{},{class:o.classes.join(" ")}),s=Lt(o.styles);s.length>0&&(r["style"]=s);var a=[];return a.push({tag:"span",attributes:r,children:[e]}),i&&a.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),a}var Je=Wt.styles;function Ze(t){var e=t[0],i=t[1],o=t.slice(4),n=c(o,1),r=n[0],s=null;return s=Array.isArray(r)?{tag:"g",attributes:{class:"".concat(wt.cssPrefix,"-").concat(dt.GROUP)},children:[{tag:"path",attributes:{class:"".concat(wt.cssPrefix,"-").concat(dt.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(wt.cssPrefix,"-").concat(dt.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:i,icon:s}}var ti={found:!1,width:512,height:512};function ei(t,e){Q||wt.showMissingIcons||!t||console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function ii(t,e){var i=e;return"fa"===e&&null!==wt.styleDefault&&(e=xe()),new Promise((function(o,r){Ve("missingIconAbstract");if("fa"===i){var s=Se(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Je[e]&&Je[e][t]){var a=Je[e][t];return o(Ze(a))}ei(t,e),o(n(n({},ti),{},{icon:wt.showMissingIcons&&t&&Ve("missingIconAbstract")||{}}))}))}var oi=function(){},ni=wt.measurePerformance&&F&&F.mark&&F.measure?F:{mark:oi,measure:oi},ri='FA "6.4.2"',si=function(t){return ni.mark("".concat(ri," ").concat(t," begins")),function(){return ai(t)}},ai=function(t){ni.mark("".concat(ri," ").concat(t," ends")),ni.measure("".concat(ri," ").concat(t),"".concat(ri," ").concat(t," begins"),"".concat(ri," ").concat(t," ends"))},li={begin:si,end:ai},ui=function(){};function ci(t){var e=t.getAttribute?t.getAttribute($):null;return"string"===typeof e}function hi(t){var e=t.getAttribute?t.getAttribute(z):null,i=t.getAttribute?t.getAttribute(K):null;return e&&i}function pi(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(wt.replacementClass)}function di(){if(!0===wt.autoReplaceSvg)return mi.replace;var t=mi[wt.autoReplaceSvg];return t||mi.replace}function fi(t){return L.createElementNS("http://www.w3.org/2000/svg",t)}function gi(t){return L.createElement(t)}function yi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.ceFn,o=void 0===i?"svg"===t.tag?fi:gi:i;if("string"===typeof t)return L.createTextNode(t);var n=o(t.tag);Object.keys(t.attributes||[]).forEach((function(e){n.setAttribute(e,t.attributes[e])}));var r=t.children||[];return r.forEach((function(t){n.appendChild(yi(t,{ceFn:o}))})),n}function _i(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var mi={replace:function(t){var e=t[0];if(e.parentNode)if(t[1].forEach((function(t){e.parentNode.insertBefore(yi(t),e)})),null===e.getAttribute($)&&wt.keepOriginalSource){var i=L.createComment(_i(e));e.parentNode.replaceChild(i,e)}else e.remove()},nest:function(t){var e=t[0],i=t[1];if(~Dt(e).indexOf(wt.replacementClass))return mi.replace(t);var o=new RegExp("".concat(wt.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var n=i[0].attributes.class.split(" ").reduce((function(t,e){return e===wt.replacementClass||e.match(o)?t.toSvg.push(e):t.toNode.push(e),t}),{toNode:[],toSvg:[]});i[0].attributes.class=n.toSvg.join(" "),0===n.toNode.length?e.removeAttribute("class"):e.setAttribute("class",n.toNode.join(" "))}var r=i.map((function(t){return qt(t)})).join("\n");e.setAttribute($,""),e.innerHTML=r}};function vi(t){t()}function bi(t,e){var i="function"===typeof e?e:ui;if(0===t.length)i();else{var o=vi;wt.mutateApproach===q&&(o=A.requestAnimationFrame||vi),o((function(){var e=di(),o=li.begin("mutate");t.map(e),o(),i()}))}}var Ci=!1;function wi(){Ci=!0}function Si(){Ci=!1}var Ei=null;function xi(t){if(M&&wt.observeMutations){var e=t.treeCallback,i=void 0===e?ui:e,o=t.nodeCallback,n=void 0===o?ui:o,r=t.pseudoElementsCallback,s=void 0===r?ui:r,a=t.observeMutationsRoot,l=void 0===a?L:a;Ei=new M((function(t){if(!Ci){var e=xe();Pt(t).forEach((function(t){if("childList"===t.type&&t.addedNodes.length>0&&!ci(t.addedNodes[0])&&(wt.searchPseudoElements&&s(t.target),i(t.target)),"attributes"===t.type&&t.target.parentNode&&wt.searchPseudoElements&&s(t.target.parentNode),"attributes"===t.type&&ci(t.target)&&~pt.indexOf(t.attributeName))if("class"===t.attributeName&&hi(t.target)){var o=Te(Dt(t.target)),r=o.prefix,a=o.iconName;t.target.setAttribute(z,r||e),a&&t.target.setAttribute(K,a)}else pi(t.target)&&n(t.target)}))}})),N&&Ei.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function Oi(){Ei&&Ei.disconnect()}function Ri(t){var e=t.getAttribute("style"),i=[];return e&&(i=e.split(";").reduce((function(t,e){var i=e.split(":"),o=i[0],n=i.slice(1);return o&&n.length>0&&(t[o]=n.join(":").trim()),t}),{})),i}function Ii(t){var e=t.getAttribute("data-prefix"),i=t.getAttribute("data-icon"),o=void 0!==t.innerText?t.innerText.trim():"",n=Te(Dt(t));return n.prefix||(n.prefix=xe()),e&&i&&(n.prefix=e,n.iconName=i),n.iconName&&n.prefix||(n.prefix&&o.length>0&&(n.iconName=Ce(n.prefix,t.innerText)||be(n.prefix,te(t.innerText))),!n.iconName&&wt.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(n.iconName=t.firstChild.data)),n}function Ti(t){var e=Pt(t.attributes).reduce((function(t,e){return"class"!==t.name&&"style"!==t.name&&(t[e.name]=e.value),t}),{}),i=t.getAttribute("title"),o=t.getAttribute("data-fa-title-id");return wt.autoA11y&&(i?e["aria-labelledby"]="".concat(wt.replacementClass,"-title-").concat(o||Tt()):(e["aria-hidden"]="true",e["focusable"]="false")),e}function Pi(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ot,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Di(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},i=Ii(t),o=i.iconName,r=i.prefix,s=i.rest,a=Ti(t),l=Fe("parseNodeAttributes",{},t),u=e.styleParser?Ri(t):[];return n({iconName:o,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:Ot,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:u,attributes:a}},l)}var ki=Wt.styles;function Ai(t){var e="nest"===wt.autoReplaceSvg?Di(t,{styleParser:!1}):Di(t);return~e.extra.classes.indexOf(at)?Ve("generateLayersText",t,e):Ve("generateSvgReplacementMutation",t,e)}var Li=new Set;function Mi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!N)return Promise.resolve();var i=L.documentElement.classList,o=function(t){return i.add("".concat(Y,"-").concat(t))},n=function(t){return i.remove("".concat(Y,"-").concat(t))},r=wt.autoFetchSvg?Li:tt.map((function(t){return"fa-".concat(t)})).concat(Object.keys(ki));r.includes("fa")||r.push("fa");var s=[".".concat(at,":not([").concat($,"])")].concat(r.map((function(t){return".".concat(t,":not([").concat($,"])")}))).join(", ");if(0===s.length)return Promise.resolve();var a=[];try{a=Pt(t.querySelectorAll(s))}catch(fo){}if(!(a.length>0))return Promise.resolve();o("pending"),n("complete");var l=li.begin("onTree"),u=a.reduce((function(t,e){try{var i=Ai(e);i&&t.push(i)}catch(fo){Q||"MissingIcon"===fo.name&&console.error(fo)}return t}),[]);return new Promise((function(t,i){Promise.all(u).then((function(i){bi(i,(function(){o("active"),o("complete"),n("pending"),"function"===typeof e&&e(),l(),t()}))})).catch((function(t){l(),i(t)}))}))}function Fi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ai(t).then((function(t){t&&bi([t],e)}))}function Ni(t){return function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(e||{}).icon?e:Be(e||{}),r=i.mask;return r&&(r=(r||{}).icon?r:Be(r||{})),t(o,n(n({},i),{},{mask:r}))}}tt.map((function(t){Li.add("fa-".concat(t))})),Object.keys(it[J]).map(Li.add.bind(Li)),Object.keys(it[Z]).map(Li.add.bind(Li)),Li=h(Li);var Vi=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,o=void 0===i?Ot:i,r=e.symbol,s=void 0!==r&&r,a=e.mask,l=void 0===a?null:a,u=e.maskId,c=void 0===u?null:u,h=e.title,p=void 0===h?null:h,d=e.titleId,f=void 0===d?null:d,g=e.classes,y=void 0===g?[]:g,_=e.attributes,m=void 0===_?{}:_,v=e.styles,b=void 0===v?{}:v;if(t){var C=t.prefix,w=t.iconName,S=t.icon;return ze(n({type:"icon"},t),(function(){return Ne("beforeDOMElementCreation",{iconDefinition:t,params:e}),wt.autoA11y&&(p?m["aria-labelledby"]="".concat(wt.replacementClass,"-title-").concat(f||Tt()):(m["aria-hidden"]="true",m["focusable"]="false")),qe({icons:{main:Ze(S),mask:l?Ze(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:C,iconName:w,transform:n(n({},Ot),o),symbol:s,title:p,maskId:c,titleId:f,extra:{attributes:m,styles:b,classes:y}})}))}},Bi={mixout:function(){return{icon:Ni(Vi)}},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=Mi,t.nodeCallback=Fi,t}}},provides:function(t){t.i2svg=function(t){var e=t.node,i=void 0===e?L:e,o=t.callback,n=void 0===o?function(){}:o;return Mi(i,n)},t.generateSvgReplacementMutation=function(t,e){var i=e.iconName,o=e.title,n=e.titleId,r=e.prefix,s=e.transform,a=e.symbol,l=e.mask,u=e.maskId,h=e.extra;return new Promise((function(e,p){Promise.all([ii(i,r),l.iconName?ii(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(l){var p=c(l,2),d=p[0],f=p[1];e([t,qe({icons:{main:d,mask:f},prefix:r,iconName:i,transform:s,symbol:a,maskId:u,title:o,titleId:n,extra:h,watchable:!0})])})).catch(p)}))},t.generateAbstractIcon=function(t){var e,i=t.children,o=t.attributes,n=t.main,r=t.transform,s=t.styles,a=Lt(s);return a.length>0&&(o["style"]=a),Mt(r)&&(e=Ve("generateAbstractTransformGrouping",{main:n,transform:r,containerWidth:n.width,iconWidth:n.width})),i.push(e||n.icon),{children:i,attributes:o}}}},Gi={mixout:function(){return{layer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.classes,o=void 0===i?[]:i;return ze({type:"layer"},(function(){Ne("beforeDOMElementCreation",{assembler:t,params:e});var i=[];return t((function(t){Array.isArray(t)?t.map((function(t){i=i.concat(t.abstract)})):i=i.concat(t.abstract)})),[{tag:"span",attributes:{class:["".concat(wt.cssPrefix,"-layers")].concat(h(o)).join(" ")},children:i}]}))}}}},ji={mixout:function(){return{counter:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.title,o=void 0===i?null:i,n=e.classes,r=void 0===n?[]:n,s=e.attributes,a=void 0===s?{}:s,l=e.styles,u=void 0===l?{}:l;return ze({type:"counter",content:t},(function(){return Ne("beforeDOMElementCreation",{content:t,params:e}),Qe({content:t.toString(),title:o,extra:{attributes:a,styles:u,classes:["".concat(wt.cssPrefix,"-layers-counter")].concat(h(r))}})}))}}}},Hi={mixout:function(){return{text:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,o=void 0===i?Ot:i,r=e.title,s=void 0===r?null:r,a=e.classes,l=void 0===a?[]:a,u=e.attributes,c=void 0===u?{}:u,p=e.styles,d=void 0===p?{}:p;return ze({type:"text",content:t},(function(){return Ne("beforeDOMElementCreation",{content:t,params:e}),Xe({content:t,transform:n(n({},Ot),o),title:s,extra:{attributes:c,styles:d,classes:["".concat(wt.cssPrefix,"-layers-text")].concat(h(l))}})}))}}},provides:function(t){t.generateLayersText=function(t,e){var i=e.title,o=e.transform,n=e.extra,r=null,s=null;if(V){var a=parseInt(getComputedStyle(t).fontSize,10),l=t.getBoundingClientRect();r=l.width/a,s=l.height/a}return wt.autoA11y&&!i&&(n.attributes["aria-hidden"]="true"),Promise.resolve([t,Xe({content:t.innerHTML,width:r,height:s,transform:o,title:i,extra:n,watchable:!0})])}}},$i=new RegExp('"',"ug"),Wi=[1105920,1112319];function Ui(t){var e=t.replace($i,""),i=ee(e,0),o=i>=Wi[0]&&i<=Wi[1],n=2===e.length&&e[0]===e[1];return{value:te(n?e[0]:e),isSecondary:o||n}}function zi(t,e){var i="".concat(U).concat(e.replace(":","-"));return new Promise((function(o,r){if(null!==t.getAttribute(i))return o();var s=Pt(t.children),a=s.filter((function(t){return t.getAttribute(W)===e}))[0],l=A.getComputedStyle(t,e),u=l.getPropertyValue("font-family").match(lt),c=l.getPropertyValue("font-weight"),h=l.getPropertyValue("content");if(a&&!u)return t.removeChild(a),o();if(u&&"none"!==h&&""!==h){var p=l.getPropertyValue("content"),d=~["Sharp"].indexOf(u[2])?Z:J,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(u[2])?ot[d][u[2].toLowerCase()]:ut[d][c],g=Ui(p),y=g.value,_=g.isSecondary,m=u[0].startsWith("FontAwesome"),v=be(f,y),b=v;if(m){var C=Ee(y);C.iconName&&C.prefix&&(v=C.iconName,f=C.prefix)}if(!v||_||a&&a.getAttribute(z)===f&&a.getAttribute(K)===b)o();else{t.setAttribute(i,b),a&&t.removeChild(a);var w=Pi(),S=w.extra;S.attributes[W]=e,ii(v,f).then((function(r){var s=qe(n(n({},w),{},{icons:{main:r,mask:Oe()},prefix:f,iconName:b,extra:S,watchable:!0})),a=L.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===e?t.insertBefore(a,t.firstChild):t.appendChild(a),a.outerHTML=s.map((function(t){return qt(t)})).join("\n"),t.removeAttribute(i),o()})).catch(r)}}else o()}))}function Ki(t){return Promise.all([zi(t,"::before"),zi(t,"::after")])}function Yi(t){return t.parentNode!==document.head&&!~X.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(W)&&(!t.parentNode||"svg"!==t.parentNode.tagName)}function qi(t){if(N)return new Promise((function(e,i){var o=Pt(t.querySelectorAll("*")).filter(Yi).map(Ki),n=li.begin("searchPseudoElements");wi(),Promise.all(o).then((function(){n(),Si(),e()})).catch((function(){n(),Si(),i()}))}))}var Xi={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=qi,t}}},provides:function(t){t.pseudoElements2svg=function(t){var e=t.node,i=void 0===e?L:e;wt.searchPseudoElements&&qi(i)}}},Qi=!1,Ji={mixout:function(){return{dom:{unwatch:function(){wi(),Qi=!0}}}},hooks:function(){return{bootstrap:function(){xi(Fe("mutationObserverCallbacks",{}))},noAuto:function(){Oi()},watch:function(t){var e=t.observeMutationsRoot;Qi?Si():xi(Fe("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}},Zi=function(t){var e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((function(t,e){var i=e.toLowerCase().split("-"),o=i[0],n=i.slice(1).join("-");if(o&&"h"===n)return t.flipX=!0,t;if(o&&"v"===n)return t.flipY=!0,t;if(n=parseFloat(n),isNaN(n))return t;switch(o){case"grow":t.size=t.size+n;break;case"shrink":t.size=t.size-n;break;case"left":t.x=t.x-n;break;case"right":t.x=t.x+n;break;case"up":t.y=t.y-n;break;case"down":t.y=t.y+n;break;case"rotate":t.rotate=t.rotate+n;break}return t}),e)},to={mixout:function(){return{parse:{transform:function(t){return Zi(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,e){var i=e.getAttribute("data-fa-transform");return i&&(t.transform=Zi(i)),t}}},provides:function(t){t.generateAbstractTransformGrouping=function(t){var e=t.main,i=t.transform,o=t.containerWidth,r=t.iconWidth,s={transform:"translate(".concat(o/2," 256)")},a="translate(".concat(32*i.x,", ").concat(32*i.y,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),c={transform:"".concat(a," ").concat(l," ").concat(u)},h={transform:"translate(".concat(r/2*-1," -256)")},p={outer:s,inner:c,path:h};return{tag:"g",attributes:n({},p.outer),children:[{tag:"g",attributes:n({},p.inner),children:[{tag:e.icon.tag,children:e.icon.children,attributes:n(n({},e.icon.attributes),p.path)}]}]}}}},eo={x:0,y:0,width:"100%",height:"100%"};function io(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function oo(t){return"g"===t.tag?t.children:[t]}var no={hooks:function(){return{parseNodeAttributes:function(t,e){var i=e.getAttribute("data-fa-mask"),o=i?Te(i.split(" ").map((function(t){return t.trim()}))):Oe();return o.prefix||(o.prefix=xe()),t.mask=o,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides:function(t){t.generateAbstractMask=function(t){var e=t.children,i=t.attributes,o=t.main,r=t.mask,s=t.maskId,a=t.transform,l=o.width,u=o.icon,c=r.width,h=r.icon,p=Ft({transform:a,containerWidth:c,iconWidth:l}),d={tag:"rect",attributes:n(n({},eo),{},{fill:"white"})},f=u.children?{children:u.children.map(io)}:{},g={tag:"g",attributes:n({},p.inner),children:[io(n({tag:u.tag,attributes:n(n({},u.attributes),p.path)},f))]},y={tag:"g",attributes:n({},p.outer),children:[g]},_="mask-".concat(s||Tt()),m="clip-".concat(s||Tt()),v={tag:"mask",attributes:n(n({},eo),{},{id:_,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,y]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:m},children:oo(h)},v]};return e.push(b,{tag:"rect",attributes:n({fill:"currentColor","clip-path":"url(#".concat(m,")"),mask:"url(#".concat(_,")")},eo)}),{children:e,attributes:i}}}},ro={provides:function(t){var e=!1;A.matchMedia&&(e=A.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var t=[],i={fill:"currentColor"},o={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};t.push({tag:"path",attributes:n(n({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var r=n(n({},o),{},{attributeName:"opacity"}),s={tag:"circle",attributes:n(n({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||s.children.push({tag:"animate",attributes:n(n({},o),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:n(n({},r),{},{values:"1;0;1;1;0;1;"})}),t.push(s),t.push({tag:"path",attributes:n(n({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:n(n({},r),{},{values:"1;0;0;0;0;1;"})}]}),e||t.push({tag:"path",attributes:n(n({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:n(n({},r),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:t}}}},so={hooks:function(){return{parseNodeAttributes:function(t,e){var i=e.getAttribute("data-fa-symbol"),o=null!==i&&(""===i||i);return t["symbol"]=o,t}}}},ao=[Ht,Bi,Gi,ji,Hi,Xi,Ji,to,no,ro,so];Me(ao,{mixoutsTo:We});We.noAuto;var lo=We.config,uo=We.library,co=(We.dom,We.parse),ho=(We.findIconDefinition,We.toHtml,We.icon),po=(We.layer,We.text);We.counter},8539:function(t,e,i){"use strict";i.d(e,{ILF:function(){return s},IwR:function(){return a},IyC:function(){return m},LEp:function(){return f},Mzg:function(){return l},NBC:function(){return p},Vui:function(){return o},eHv:function(){return y},fT7:function(){return d},g82:function(){return h},nfZ:function(){return n},r8p:function(){return c},u8Q:function(){return _},xiG:function(){return r},zc:function(){return u}});var o={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"]},n={prefix:"fas",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM112 256H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},r={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"]},s={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"]},a={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},l={prefix:"fas",iconName:"comment",icon:[512,512,[128489,61669],"f075","M512 240c0 114.9-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6C73.6 471.1 44.7 480 16 480c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4l0 0 0 0 0 0 0 0 .3-.3c.3-.3 .7-.7 1.3-1.4c1.1-1.2 2.8-3.1 4.9-5.7c4.1-5 9.6-12.4 15.2-21.6c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208z"]},u={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},c={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]},h={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},p=h,d={prefix:"fas",iconName:"calendar",icon:[448,512,[128197,128198],"f133","M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"]},f={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},g={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},y=g,_={prefix:"fas",iconName:"thumbs-up",icon:[512,512,[128077,61575],"f164","M313.4 32.9c26 5.2 42.9 30.5 37.7 56.5l-2.3 11.4c-5.3 26.7-15.1 52.1-28.8 75.2H464c26.5 0 48 21.5 48 48c0 18.5-10.5 34.6-25.9 42.6C497 275.4 504 288.9 504 304c0 23.4-16.8 42.9-38.9 47.1c4.4 7.3 6.9 15.8 6.9 24.9c0 21.3-13.9 39.4-33.1 45.6c.7 3.3 1.1 6.8 1.1 10.4c0 26.5-21.5 48-48 48H294.5c-19 0-37.5-5.6-53.3-16.1l-38.5-25.7C176 420.4 160 390.4 160 358.3V320 272 247.1c0-29.2 13.3-56.7 36-75l7.4-5.9c26.5-21.2 44.6-51 51.2-84.2l2.3-11.4c5.2-26 30.5-42.9 56.5-37.7zM32 192H96c17.7 0 32 14.3 32 32V448c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V224c0-17.7 14.3-32 32-32z"]},m={prefix:"fas",iconName:"video",icon:[576,512,["video-camera"],"f03d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128zM559.1 99.8c10.4 5.6 16.9 16.4 16.9 28.2V384c0 11.8-6.5 22.6-16.9 28.2s-23 5-32.9-1.6l-96-64L416 337.1V320 192 174.9l14.2-9.5 96-64c9.8-6.5 22.4-7.2 32.9-1.6z"]}},1076:function(t,e,i){"use strict";i.d(e,{Z:function(){return He}});var o={};i.r(o),i.d(o,{hasBrowserEnv:function(){return kt},hasStandardBrowserEnv:function(){return At},hasStandardBrowserWebWorkerEnv:function(){return Lt}});i(4224),i(1121),i(7133),i(560);function n(t,e){return function(){return t.apply(e,arguments)}}const{toString:r}=Object.prototype,{getPrototypeOf:s}=Object,a=(t=>e=>{const i=r.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),l=t=>(t=t.toLowerCase(),e=>a(e)===t),u=t=>e=>typeof e===t,{isArray:c}=Array,h=u("undefined");function p(t){return null!==t&&!h(t)&&null!==t.constructor&&!h(t.constructor)&&y(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const d=l("ArrayBuffer");function f(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&d(t.buffer),e}const g=u("string"),y=u("function"),_=u("number"),m=t=>null!==t&&"object"===typeof t,v=t=>!0===t||!1===t,b=t=>{if("object"!==a(t))return!1;const e=s(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},C=l("Date"),w=l("File"),S=l("Blob"),E=l("FileList"),x=t=>m(t)&&y(t.pipe),O=t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||y(t.append)&&("formdata"===(e=a(t))||"object"===e&&y(t.toString)&&"[object FormData]"===t.toString()))},R=l("URLSearchParams"),I=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function T(t,e,{allOwnKeys:i=!1}={}){if(null===t||"undefined"===typeof t)return;let o,n;if("object"!==typeof t&&(t=[t]),c(t))for(o=0,n=t.length;o<n;o++)e.call(null,t[o],o,t);else{const n=i?Object.getOwnPropertyNames(t):Object.keys(t),r=n.length;let s;for(o=0;o<r;o++)s=n[o],e.call(null,t[s],s,t)}}function P(t,e){e=e.toLowerCase();const i=Object.keys(t);let o,n=i.length;while(n-- >0)if(o=i[n],e===o.toLowerCase())return o;return null}const D=(()=>"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global)(),k=t=>!h(t)&&t!==D;function A(){const{caseless:t}=k(this)&&this||{},e={},i=(i,o)=>{const n=t&&P(e,o)||o;b(e[n])&&b(i)?e[n]=A(e[n],i):b(i)?e[n]=A({},i):c(i)?e[n]=i.slice():e[n]=i};for(let o=0,n=arguments.length;o<n;o++)arguments[o]&&T(arguments[o],i);return e}const L=(t,e,i,{allOwnKeys:o}={})=>(T(e,((e,o)=>{i&&y(e)?t[o]=n(e,i):t[o]=e}),{allOwnKeys:o}),t),M=t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),F=(t,e,i,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),i&&Object.assign(t.prototype,i)},N=(t,e,i,o)=>{let n,r,a;const l={};if(e=e||{},null==t)return e;do{n=Object.getOwnPropertyNames(t),r=n.length;while(r-- >0)a=n[r],o&&!o(a,t,e)||l[a]||(e[a]=t[a],l[a]=!0);t=!1!==i&&s(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e},V=(t,e,i)=>{t=String(t),(void 0===i||i>t.length)&&(i=t.length),i-=e.length;const o=t.indexOf(e,i);return-1!==o&&o===i},B=t=>{if(!t)return null;if(c(t))return t;let e=t.length;if(!_(e))return null;const i=new Array(e);while(e-- >0)i[e]=t[e];return i},G=(t=>e=>t&&e instanceof t)("undefined"!==typeof Uint8Array&&s(Uint8Array)),j=(t,e)=>{const i=t&&t[Symbol.iterator],o=i.call(t);let n;while((n=o.next())&&!n.done){const i=n.value;e.call(t,i[0],i[1])}},H=(t,e)=>{let i;const o=[];while(null!==(i=t.exec(e)))o.push(i);return o},$=l("HTMLFormElement"),W=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,i){return e.toUpperCase()+i})),U=(({hasOwnProperty:t})=>(e,i)=>t.call(e,i))(Object.prototype),z=l("RegExp"),K=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t),o={};T(i,((i,n)=>{let r;!1!==(r=e(i,n,t))&&(o[n]=r||i)})),Object.defineProperties(t,o)},Y=t=>{K(t,((e,i)=>{if(y(t)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const o=t[i];y(o)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))}))},q=(t,e)=>{const i={},o=t=>{t.forEach((t=>{i[t]=!0}))};return c(t)?o(t):o(String(t).split(e)),i},X=()=>{},Q=(t,e)=>(t=+t,Number.isFinite(t)?t:e),J="abcdefghijklmnopqrstuvwxyz",Z="0123456789",tt={DIGIT:Z,ALPHA:J,ALPHA_DIGIT:J+J.toUpperCase()+Z},et=(t=16,e=tt.ALPHA_DIGIT)=>{let i="";const{length:o}=e;while(t--)i+=e[Math.random()*o|0];return i};function it(t){return!!(t&&y(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])}const ot=t=>{const e=new Array(10),i=(t,o)=>{if(m(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[o]=t;const n=c(t)?[]:{};return T(t,((t,e)=>{const r=i(t,o+1);!h(r)&&(n[e]=r)})),e[o]=void 0,n}}return t};return i(t,0)},nt=l("AsyncFunction"),rt=t=>t&&(m(t)||y(t))&&y(t.then)&&y(t.catch);var st={isArray:c,isArrayBuffer:d,isBuffer:p,isFormData:O,isArrayBufferView:f,isString:g,isNumber:_,isBoolean:v,isObject:m,isPlainObject:b,isUndefined:h,isDate:C,isFile:w,isBlob:S,isRegExp:z,isFunction:y,isStream:x,isURLSearchParams:R,isTypedArray:G,isFileList:E,forEach:T,merge:A,extend:L,trim:I,stripBOM:M,inherits:F,toFlatObject:N,kindOf:a,kindOfTest:l,endsWith:V,toArray:B,forEachEntry:j,matchAll:H,isHTMLForm:$,hasOwnProperty:U,hasOwnProp:U,reduceDescriptors:K,freezeMethods:Y,toObjectSet:q,toCamelCase:W,noop:X,toFiniteNumber:Q,findKey:P,global:D,isContextDefined:k,ALPHABET:tt,generateString:et,isSpecCompliantForm:it,toJSONObject:ot,isAsyncFn:nt,isThenable:rt};function at(t,e,i,o,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),o&&(this.request=o),n&&(this.response=n)}st.inherits(at,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:st.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const lt=at.prototype,ut={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{ut[t]={value:t}})),Object.defineProperties(at,ut),Object.defineProperty(lt,"isAxiosError",{value:!0}),at.from=(t,e,i,o,n,r)=>{const s=Object.create(lt);return st.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),at.call(s,t.message,e,i,o,n),s.cause=t,s.name=t.name,r&&Object.assign(s,r),s};var ct=at,ht=null;function pt(t){return st.isPlainObject(t)||st.isArray(t)}function dt(t){return st.endsWith(t,"[]")?t.slice(0,-2):t}function ft(t,e,i){return t?t.concat(e).map((function(t,e){return t=dt(t),!i&&e?"["+t+"]":t})).join(i?".":""):e}function gt(t){return st.isArray(t)&&!t.some(pt)}const yt=st.toFlatObject(st,{},null,(function(t){return/^is[A-Z]/.test(t)}));function _t(t,e,i){if(!st.isObject(t))throw new TypeError("target must be an object");e=e||new(ht||FormData),i=st.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!st.isUndefined(e[t])}));const o=i.metaTokens,n=i.visitor||c,r=i.dots,s=i.indexes,a=i.Blob||"undefined"!==typeof Blob&&Blob,l=a&&st.isSpecCompliantForm(e);if(!st.isFunction(n))throw new TypeError("visitor must be a function");function u(t){if(null===t)return"";if(st.isDate(t))return t.toISOString();if(!l&&st.isBlob(t))throw new ct("Blob is not supported. Use a Buffer instead.");return st.isArrayBuffer(t)||st.isTypedArray(t)?l&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function c(t,i,n){let a=t;if(t&&!n&&"object"===typeof t)if(st.endsWith(i,"{}"))i=o?i:i.slice(0,-2),t=JSON.stringify(t);else if(st.isArray(t)&&gt(t)||(st.isFileList(t)||st.endsWith(i,"[]"))&&(a=st.toArray(t)))return i=dt(i),a.forEach((function(t,o){!st.isUndefined(t)&&null!==t&&e.append(!0===s?ft([i],o,r):null===s?i:i+"[]",u(t))})),!1;return!!pt(t)||(e.append(ft(n,i,r),u(t)),!1)}const h=[],p=Object.assign(yt,{defaultVisitor:c,convertValue:u,isVisitable:pt});function d(t,i){if(!st.isUndefined(t)){if(-1!==h.indexOf(t))throw Error("Circular reference detected in "+i.join("."));h.push(t),st.forEach(t,(function(t,o){const r=!(st.isUndefined(t)||null===t)&&n.call(e,t,st.isString(o)?o.trim():o,i,p);!0===r&&d(t,i?i.concat(o):[o])})),h.pop()}}if(!st.isObject(t))throw new TypeError("data must be an object");return d(t),e}var mt=_t;function vt(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function bt(t,e){this._pairs=[],t&&mt(t,this,e)}const Ct=bt.prototype;Ct.append=function(t,e){this._pairs.push([t,e])},Ct.toString=function(t){const e=t?function(e){return t.call(this,e,vt)}:vt;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var wt=bt;function St(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Et(t,e,i){if(!e)return t;const o=i&&i.encode||St,n=i&&i.serialize;let r;if(r=n?n(e,i):st.isURLSearchParams(e)?e.toString():new wt(e,i).toString(o),r){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}class xt{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){st.forEach(this.handlers,(function(e){null!==e&&t(e)}))}}var Ot=xt,Rt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},It=(i(8858),i(1318),i(3228),"undefined"!==typeof URLSearchParams?URLSearchParams:wt),Tt="undefined"!==typeof FormData?FormData:null,Pt="undefined"!==typeof Blob?Blob:null,Dt={isBrowser:!0,classes:{URLSearchParams:It,FormData:Tt,Blob:Pt},protocols:["http","https","file","blob","url","data"]};const kt="undefined"!==typeof window&&"undefined"!==typeof document,At=(t=>kt&&["ReactNative","NativeScript","NS"].indexOf(t)<0)("undefined"!==typeof navigator&&navigator.product),Lt=(()=>"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts)();var Mt={...o,...Dt};function Ft(t,e){return mt(t,new Mt.classes.URLSearchParams,Object.assign({visitor:function(t,e,i,o){return Mt.isNode&&st.isBuffer(t)?(this.append(e,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function Nt(t){return st.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}function Vt(t){const e={},i=Object.keys(t);let o;const n=i.length;let r;for(o=0;o<n;o++)r=i[o],e[r]=t[r];return e}function Bt(t){function e(t,i,o,n){let r=t[n++];const s=Number.isFinite(+r),a=n>=t.length;if(r=!r&&st.isArray(o)?o.length:r,a)return st.hasOwnProp(o,r)?o[r]=[o[r],i]:o[r]=i,!s;o[r]&&st.isObject(o[r])||(o[r]=[]);const l=e(t,i,o[r],n);return l&&st.isArray(o[r])&&(o[r]=Vt(o[r])),!s}if(st.isFormData(t)&&st.isFunction(t.entries)){const i={};return st.forEachEntry(t,((t,o)=>{e(Nt(t),o,i,0)})),i}return null}var Gt=Bt;function jt(t,e,i){if(st.isString(t))try{return(e||JSON.parse)(t),st.trim(t)}catch(o){if("SyntaxError"!==o.name)throw o}return(i||JSON.stringify)(t)}const Ht={transitional:Rt,adapter:["xhr","http"],transformRequest:[function(t,e){const i=e.getContentType()||"",o=i.indexOf("application/json")>-1,n=st.isObject(t);n&&st.isHTMLForm(t)&&(t=new FormData(t));const r=st.isFormData(t);if(r)return o&&o?JSON.stringify(Gt(t)):t;if(st.isArrayBuffer(t)||st.isBuffer(t)||st.isStream(t)||st.isFile(t)||st.isBlob(t))return t;if(st.isArrayBufferView(t))return t.buffer;if(st.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(n){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Ft(t,this.formSerializer).toString();if((s=st.isFileList(t))||i.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return mt(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return n||o?(e.setContentType("application/json",!1),jt(t)):t}],transformResponse:[function(t){const e=this.transitional||Ht.transitional,i=e&&e.forcedJSONParsing,o="json"===this.responseType;if(t&&st.isString(t)&&(i&&!this.responseType||o)){const i=e&&e.silentJSONParsing,r=!i&&o;try{return JSON.parse(t)}catch(n){if(r){if("SyntaxError"===n.name)throw ct.from(n,ct.ERR_BAD_RESPONSE,this,null,this.response);throw n}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Mt.classes.FormData,Blob:Mt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};st.forEach(["delete","get","head","post","put","patch"],(t=>{Ht.headers[t]={}}));var $t=Ht;const Wt=st.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Ut=t=>{const e={};let i,o,n;return t&&t.split("\n").forEach((function(t){n=t.indexOf(":"),i=t.substring(0,n).trim().toLowerCase(),o=t.substring(n+1).trim(),!i||e[i]&&Wt[i]||("set-cookie"===i?e[i]?e[i].push(o):e[i]=[o]:e[i]=e[i]?e[i]+", "+o:o)})),e};const zt=Symbol("internals");function Kt(t){return t&&String(t).trim().toLowerCase()}function Yt(t){return!1===t||null==t?t:st.isArray(t)?t.map(Yt):String(t)}function qt(t){const e=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;while(o=i.exec(t))e[o[1]]=o[2];return e}const Xt=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Qt(t,e,i,o,n){return st.isFunction(o)?o.call(this,e,i):(n&&(e=i),st.isString(e)?st.isString(o)?-1!==e.indexOf(o):st.isRegExp(o)?o.test(e):void 0:void 0)}function Jt(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,i)=>e.toUpperCase()+i))}function Zt(t,e){const i=st.toCamelCase(" "+e);["get","set","has"].forEach((o=>{Object.defineProperty(t,o+i,{value:function(t,i,n){return this[o].call(this,e,t,i,n)},configurable:!0})}))}class te{constructor(t){t&&this.set(t)}set(t,e,i){const o=this;function n(t,e,i){const n=Kt(e);if(!n)throw new Error("header name must be a non-empty string");const r=st.findKey(o,n);(!r||void 0===o[r]||!0===i||void 0===i&&!1!==o[r])&&(o[r||e]=Yt(t))}const r=(t,e)=>st.forEach(t,((t,i)=>n(t,i,e)));return st.isPlainObject(t)||t instanceof this.constructor?r(t,e):st.isString(t)&&(t=t.trim())&&!Xt(t)?r(Ut(t),e):null!=t&&n(e,t,i),this}get(t,e){if(t=Kt(t),t){const i=st.findKey(this,t);if(i){const t=this[i];if(!e)return t;if(!0===e)return qt(t);if(st.isFunction(e))return e.call(this,t,i);if(st.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Kt(t),t){const i=st.findKey(this,t);return!(!i||void 0===this[i]||e&&!Qt(this,this[i],i,e))}return!1}delete(t,e){const i=this;let o=!1;function n(t){if(t=Kt(t),t){const n=st.findKey(i,t);!n||e&&!Qt(i,i[n],n,e)||(delete i[n],o=!0)}}return st.isArray(t)?t.forEach(n):n(t),o}clear(t){const e=Object.keys(this);let i=e.length,o=!1;while(i--){const n=e[i];t&&!Qt(this,this[n],n,t,!0)||(delete this[n],o=!0)}return o}normalize(t){const e=this,i={};return st.forEach(this,((o,n)=>{const r=st.findKey(i,n);if(r)return e[r]=Yt(o),void delete e[n];const s=t?Jt(n):String(n).trim();s!==n&&delete e[n],e[s]=Yt(o),i[s]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return st.forEach(this,((i,o)=>{null!=i&&!1!==i&&(e[o]=t&&st.isArray(i)?i.join(", "):i)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach((t=>i.set(t))),i}static accessor(t){const e=this[zt]=this[zt]={accessors:{}},i=e.accessors,o=this.prototype;function n(t){const e=Kt(t);i[e]||(Zt(o,t),i[e]=!0)}return st.isArray(t)?t.forEach(n):n(t),this}}te.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),st.reduceDescriptors(te.prototype,(({value:t},e)=>{let i=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[i]=t}}})),st.freezeMethods(te);var ee=te;function ie(t,e){const i=this||$t,o=e||i,n=ee.from(o.headers);let r=o.data;return st.forEach(t,(function(t){r=t.call(i,r,n.normalize(),e?e.status:void 0)})),n.normalize(),r}function oe(t){return!(!t||!t.__CANCEL__)}function ne(t,e,i){ct.call(this,null==t?"canceled":t,ct.ERR_CANCELED,e,i),this.name="CanceledError"}st.inherits(ne,ct,{__CANCEL__:!0});var re=ne;i(3429);function se(t,e,i){const o=i.config.validateStatus;i.status&&o&&!o(i.status)?e(new ct("Request failed with status code "+i.status,[ct.ERR_BAD_REQUEST,ct.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):t(i)}var ae=Mt.hasStandardBrowserEnv?{write(t,e,i,o,n,r){const s=[t+"="+encodeURIComponent(e)];st.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),st.isString(o)&&s.push("path="+o),st.isString(n)&&s.push("domain="+n),!0===r&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function le(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ue(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function ce(t,e){return t&&!le(e)?ue(t,e):e}var he=Mt.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let i;function o(i){let o=i;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return i=o(window.location.href),function(t){const e=st.isString(t)?o(t):t;return e.protocol===i.protocol&&e.host===i.host}}():function(){return function(){return!0}}();function pe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function de(t,e){t=t||10;const i=new Array(t),o=new Array(t);let n,r=0,s=0;return e=void 0!==e?e:1e3,function(a){const l=Date.now(),u=o[s];n||(n=l),i[r]=a,o[r]=l;let c=s,h=0;while(c!==r)h+=i[c++],c%=t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),l-n<e)return;const p=u&&l-u;return p?Math.round(1e3*h/p):void 0}}var fe=de;function ge(t,e){let i=0;const o=fe(50,250);return n=>{const r=n.loaded,s=n.lengthComputable?n.total:void 0,a=r-i,l=o(a),u=r<=s;i=r;const c={loaded:r,total:s,progress:s?r/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&u?(s-r)/l:void 0,event:n};c[e?"download":"upload"]=!0,t(c)}}const ye="undefined"!==typeof XMLHttpRequest;var _e=ye&&function(t){return new Promise((function(e,i){let o=t.data;const n=ee.from(t.headers).normalize();let r,s,{responseType:a,withXSRFToken:l}=t;function u(){t.cancelToken&&t.cancelToken.unsubscribe(r),t.signal&&t.signal.removeEventListener("abort",r)}if(st.isFormData(o))if(Mt.hasStandardBrowserEnv||Mt.hasStandardBrowserWebWorkerEnv)n.setContentType(!1);else if(!1!==(s=n.getContentType())){const[t,...e]=s?s.split(";").map((t=>t.trim())).filter(Boolean):[];n.setContentType([t||"multipart/form-data",...e].join("; "))}let c=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",i=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";n.set("Authorization","Basic "+btoa(e+":"+i))}const h=ce(t.baseURL,t.url);function p(){if(!c)return;const o=ee.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),n=a&&"text"!==a&&"json"!==a?c.response:c.responseText,r={data:n,status:c.status,statusText:c.statusText,headers:o,config:t,request:c};se((function(t){e(t),u()}),(function(t){i(t),u()}),r),c=null}if(c.open(t.method.toUpperCase(),Et(h,t.params,t.paramsSerializer),!0),c.timeout=t.timeout,"onloadend"in c?c.onloadend=p:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(p)},c.onabort=function(){c&&(i(new ct("Request aborted",ct.ECONNABORTED,t,c)),c=null)},c.onerror=function(){i(new ct("Network Error",ct.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const o=t.transitional||Rt;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),i(new ct(e,o.clarifyTimeoutError?ct.ETIMEDOUT:ct.ECONNABORTED,t,c)),c=null},Mt.hasStandardBrowserEnv&&(l&&st.isFunction(l)&&(l=l(t)),l||!1!==l&&he(h))){const e=t.xsrfHeaderName&&t.xsrfCookieName&&ae.read(t.xsrfCookieName);e&&n.set(t.xsrfHeaderName,e)}void 0===o&&n.setContentType(null),"setRequestHeader"in c&&st.forEach(n.toJSON(),(function(t,e){c.setRequestHeader(e,t)})),st.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),a&&"json"!==a&&(c.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&c.addEventListener("progress",ge(t.onDownloadProgress,!0)),"function"===typeof t.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",ge(t.onUploadProgress)),(t.cancelToken||t.signal)&&(r=e=>{c&&(i(!e||e.type?new re(null,t,c):e),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(r),t.signal&&(t.signal.aborted?r():t.signal.addEventListener("abort",r)));const d=pe(h);d&&-1===Mt.protocols.indexOf(d)?i(new ct("Unsupported protocol "+d+":",ct.ERR_BAD_REQUEST,t)):c.send(o||null)}))};const me={http:ht,xhr:_e};st.forEach(me,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(i){}Object.defineProperty(t,"adapterName",{value:e})}}));const ve=t=>`- ${t}`,be=t=>st.isFunction(t)||null===t||!1===t;var Ce={getAdapter:t=>{t=st.isArray(t)?t:[t];const{length:e}=t;let i,o;const n={};for(let r=0;r<e;r++){let e;if(i=t[r],o=i,!be(i)&&(o=me[(e=String(i)).toLowerCase()],void 0===o))throw new ct(`Unknown adapter '${e}'`);if(o)break;n[e||"#"+r]=o}if(!o){const t=Object.entries(n).map((([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build")));let i=e?t.length>1?"since :\n"+t.map(ve).join("\n"):" "+ve(t[0]):"as no adapter specified";throw new ct("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return o},adapters:me};function we(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new re(null,t)}function Se(t){we(t),t.headers=ee.from(t.headers),t.data=ie.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);const e=Ce.getAdapter(t.adapter||$t.adapter);return e(t).then((function(e){return we(t),e.data=ie.call(t,t.transformResponse,e),e.headers=ee.from(e.headers),e}),(function(e){return oe(e)||(we(t),e&&e.response&&(e.response.data=ie.call(t,t.transformResponse,e.response),e.response.headers=ee.from(e.response.headers))),Promise.reject(e)}))}const Ee=t=>t instanceof ee?t.toJSON():t;function xe(t,e){e=e||{};const i={};function o(t,e,i){return st.isPlainObject(t)&&st.isPlainObject(e)?st.merge.call({caseless:i},t,e):st.isPlainObject(e)?st.merge({},e):st.isArray(e)?e.slice():e}function n(t,e,i){return st.isUndefined(e)?st.isUndefined(t)?void 0:o(void 0,t,i):o(t,e,i)}function r(t,e){if(!st.isUndefined(e))return o(void 0,e)}function s(t,e){return st.isUndefined(e)?st.isUndefined(t)?void 0:o(void 0,t):o(void 0,e)}function a(i,n,r){return r in e?o(i,n):r in t?o(void 0,i):void 0}const l={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e)=>n(Ee(t),Ee(e),!0)};return st.forEach(Object.keys(Object.assign({},t,e)),(function(o){const r=l[o]||n,s=r(t[o],e[o],o);st.isUndefined(s)&&r!==a||(i[o]=s)})),i}const Oe="1.6.2",Re={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{Re[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}}));const Ie={};function Te(t,e,i){if("object"!==typeof t)throw new ct("options must be an object",ct.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let n=o.length;while(n-- >0){const r=o[n],s=e[r];if(s){const e=t[r],i=void 0===e||s(e,r,t);if(!0!==i)throw new ct("option "+r+" must be "+i,ct.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new ct("Unknown option "+r,ct.ERR_BAD_OPTION)}}Re.transitional=function(t,e,i){function o(t,e){return"[Axios v"+Oe+"] Transitional option '"+t+"'"+e+(i?". "+i:"")}return(i,n,r)=>{if(!1===t)throw new ct(o(n," has been removed"+(e?" in "+e:"")),ct.ERR_DEPRECATED);return e&&!Ie[n]&&(Ie[n]=!0,console.warn(o(n," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(i,n,r)}};var Pe={assertOptions:Te,validators:Re};const De=Pe.validators;class ke{constructor(t){this.defaults=t,this.interceptors={request:new Ot,response:new Ot}}request(t,e){"string"===typeof t?(e=e||{},e.url=t):e=t||{},e=xe(this.defaults,e);const{transitional:i,paramsSerializer:o,headers:n}=e;void 0!==i&&Pe.assertOptions(i,{silentJSONParsing:De.transitional(De.boolean),forcedJSONParsing:De.transitional(De.boolean),clarifyTimeoutError:De.transitional(De.boolean)},!1),null!=o&&(st.isFunction(o)?e.paramsSerializer={serialize:o}:Pe.assertOptions(o,{encode:De.function,serialize:De.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r=n&&st.merge(n.common,n[e.method]);n&&st.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete n[t]})),e.headers=ee.concat(r,n);const s=[];let a=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));const l=[];let u;this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)}));let c,h=0;if(!a){const t=[Se.bind(this),void 0];t.unshift.apply(t,s),t.push.apply(t,l),c=t.length,u=Promise.resolve(e);while(h<c)u=u.then(t[h++],t[h++]);return u}c=s.length;let p=e;h=0;while(h<c){const t=s[h++],e=s[h++];try{p=t(p)}catch(d){e.call(this,d);break}}try{u=Se.call(this,p)}catch(d){return Promise.reject(d)}h=0,c=l.length;while(h<c)u=u.then(l[h++],l[h++]);return u}getUri(t){t=xe(this.defaults,t);const e=ce(t.baseURL,t.url);return Et(e,t.params,t.paramsSerializer)}}st.forEach(["delete","get","head","options"],(function(t){ke.prototype[t]=function(e,i){return this.request(xe(i||{},{method:t,url:e,data:(i||{}).data}))}})),st.forEach(["post","put","patch"],(function(t){function e(e){return function(i,o,n){return this.request(xe(n||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ke.prototype[t]=e(),ke.prototype[t+"Form"]=e(!0)}));var Ae=ke;class Le{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const i=this;this.promise.then((t=>{if(!i._listeners)return;let e=i._listeners.length;while(e-- >0)i._listeners[e](t);i._listeners=null})),this.promise.then=t=>{let e;const o=new Promise((t=>{i.subscribe(t),e=t})).then(t);return o.cancel=function(){i.unsubscribe(e)},o},t((function(t,o,n){i.reason||(i.reason=new re(t,o,n),e(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;const e=new Le((function(e){t=e}));return{token:e,cancel:t}}}var Me=Le;function Fe(t){return function(e){return t.apply(null,e)}}function Ne(t){return st.isObject(t)&&!0===t.isAxiosError}const Ve={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ve).forEach((([t,e])=>{Ve[e]=t}));var Be=Ve;function Ge(t){const e=new Ae(t),i=n(Ae.prototype.request,e);return st.extend(i,Ae.prototype,e,{allOwnKeys:!0}),st.extend(i,e,null,{allOwnKeys:!0}),i.create=function(e){return Ge(xe(t,e))},i}const je=Ge($t);je.Axios=Ae,je.CanceledError=re,je.CancelToken=Me,je.isCancel=oe,je.VERSION=Oe,je.toFormData=mt,je.AxiosError=ct,je.Cancel=je.CanceledError,je.all=function(t){return Promise.all(t)},je.spread=Fe,je.isAxiosError=Ne,je.mergeConfig=xe,je.AxiosHeaders=ee,je.formToJSON=t=>Gt(st.isHTMLForm(t)?new FormData(t):t),je.getAdapter=Ce.getAdapter,je.HttpStatusCode=Be,je.default=je;var He=je},2483:function(t,e,i){"use strict";i.d(e,{PO:function(){return B},p7:function(){return ee}});i(560);var o=i(3396),n=i(4870);
/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */
const r="undefined"!==typeof window;function s(t){return t.__esModule||"Module"===t[Symbol.toStringTag]}const a=Object.assign;function l(t,e){const i={};for(const o in e){const n=e[o];i[o]=c(n)?n.map(t):t(n)}return i}const u=()=>{},c=Array.isArray;const h=/\/$/,p=t=>t.replace(h,"");function d(t,e,i="/"){let o,n={},r="",s="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(o=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),n=t(r)),a>-1&&(o=o||e.slice(0,a),s=e.slice(a,e.length)),o=C(null!=o?o:e,i),{fullPath:o+(r&&"?")+r+s,path:o,query:n,hash:s}}function f(t,e){const i=e.query?t(e.query):"";return e.path+(i&&"?")+i+(e.hash||"")}function g(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function y(t,e,i){const o=e.matched.length-1,n=i.matched.length-1;return o>-1&&o===n&&_(e.matched[o],i.matched[n])&&m(e.params,i.params)&&t(e.query)===t(i.query)&&e.hash===i.hash}function _(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function m(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!v(t[i],e[i]))return!1;return!0}function v(t,e){return c(t)?b(t,e):c(e)?b(e,t):t===e}function b(t,e){return c(e)?t.length===e.length&&t.every(((t,i)=>t===e[i])):1===t.length&&t[0]===e}function C(t,e){if(t.startsWith("/"))return t;if(!t)return e;const i=e.split("/"),o=t.split("/"),n=o[o.length-1];".."!==n&&"."!==n||o.push("");let r,s,a=i.length-1;for(r=0;r<o.length;r++)if(s=o[r],"."!==s){if(".."!==s)break;a>1&&a--}return i.slice(0,a).join("/")+"/"+o.slice(r-(r===o.length?1:0)).join("/")}var w,S;(function(t){t["pop"]="pop",t["push"]="push"})(w||(w={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(S||(S={}));function E(t){if(!t)if(r){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),p(t)}const x=/^[^#]+#/;function O(t,e){return t.replace(x,"#")+e}function R(t,e){const i=document.documentElement.getBoundingClientRect(),o=t.getBoundingClientRect();return{behavior:e.behavior,left:o.left-i.left-(e.left||0),top:o.top-i.top-(e.top||0)}}const I=()=>({left:window.pageXOffset,top:window.pageYOffset});function T(t){let e;if("el"in t){const i=t.el,o="string"===typeof i&&i.startsWith("#");0;const n="string"===typeof i?o?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!n)return;e=R(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function P(t,e){const i=history.state?history.state.position-e:-1;return i+t}const D=new Map;function k(t,e){D.set(t,e)}function A(t){const e=D.get(t);return D.delete(t),e}let L=()=>location.protocol+"//"+location.host;function M(t,e){const{pathname:i,search:o,hash:n}=e,r=t.indexOf("#");if(r>-1){let e=n.includes(t.slice(r))?t.slice(r).length:1,i=n.slice(e);return"/"!==i[0]&&(i="/"+i),g(i,"")}const s=g(i,t);return s+o+n}function F(t,e,i,o){let n=[],r=[],s=null;const l=({state:r})=>{const a=M(t,location),l=i.value,u=e.value;let c=0;if(r){if(i.value=a,e.value=r,s&&s===l)return void(s=null);c=u?r.position-u.position:0}else o(a);n.forEach((t=>{t(i.value,l,{delta:c,type:w.pop,direction:c?c>0?S.forward:S.back:S.unknown})}))};function u(){s=i.value}function c(t){n.push(t);const e=()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)};return r.push(e),e}function h(){const{history:t}=window;t.state&&t.replaceState(a({},t.state,{scroll:I()}),"")}function p(){for(const t of r)t();r=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:u,listen:c,destroy:p}}function N(t,e,i,o=!1,n=!1){return{back:t,current:e,forward:i,replaced:o,position:window.history.length,scroll:n?I():null}}function V(t){const{history:e,location:i}=window,o={value:M(t,i)},n={value:e.state};function r(o,r,s){const a=t.indexOf("#"),l=a>-1?(i.host&&document.querySelector("base")?t:t.slice(a))+o:L()+t+o;try{e[s?"replaceState":"pushState"](r,"",l),n.value=r}catch(u){console.error(u),i[s?"replace":"assign"](l)}}function s(t,i){const s=a({},e.state,N(n.value.back,t,n.value.forward,!0),i,{position:n.value.position});r(t,s,!0),o.value=t}function l(t,i){const s=a({},n.value,e.state,{forward:t,scroll:I()});r(s.current,s,!0);const l=a({},N(o.value,t,null),{position:s.position+1},i);r(t,l,!1),o.value=t}return n.value||r(o.value,{back:null,current:o.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:o,state:n,push:l,replace:s}}function B(t){t=E(t);const e=V(t),i=F(t,e.state,e.location,e.replace);function o(t,e=!0){e||i.pauseListeners(),history.go(t)}const n=a({location:"",base:t,go:o,createHref:O.bind(null,t)},e,i);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function G(t){return"string"===typeof t||t&&"object"===typeof t}function j(t){return"string"===typeof t||"symbol"===typeof t}const H={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},$=Symbol("");var W;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(W||(W={}));function U(t,e){return a(new Error,{type:t,[$]:!0},e)}function z(t,e){return t instanceof Error&&$ in t&&(null==e||!!(t.type&e))}const K="[^/]+?",Y={sensitive:!1,strict:!1,start:!0,end:!0},q=/[.+*?^${}()[\]/\\]/g;function X(t,e){const i=a({},Y,e),o=[];let n=i.start?"^":"";const r=[];for(const a of t){const t=a.length?[]:[90];i.strict&&!a.length&&(n+="/");for(let e=0;e<a.length;e++){const o=a[e];let s=40+(i.sensitive?.25:0);if(0===o.type)e||(n+="/"),n+=o.value.replace(q,"\\$&"),s+=40;else if(1===o.type){const{value:t,repeatable:i,optional:l,regexp:u}=o;r.push({name:t,repeatable:i,optional:l});const c=u||K;if(c!==K){s+=10;try{new RegExp(`(${c})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${t}" (${c}): `+h.message)}}let p=i?`((?:${c})(?:/(?:${c}))*)`:`(${c})`;e||(p=l&&a.length<2?`(?:/${p})`:"/"+p),l&&(p+="?"),n+=p,s+=20,l&&(s+=-8),i&&(s+=-20),".*"===c&&(s+=-50)}t.push(s)}o.push(t)}if(i.strict&&i.end){const t=o.length-1;o[t][o[t].length-1]+=.7000000000000001}i.strict||(n+="/?"),i.end?n+="$":i.strict&&(n+="(?:/|$)");const s=new RegExp(n,i.sensitive?"":"i");function l(t){const e=t.match(s),i={};if(!e)return null;for(let o=1;o<e.length;o++){const t=e[o]||"",n=r[o-1];i[n.name]=t&&n.repeatable?t.split("/"):t}return i}function u(e){let i="",o=!1;for(const n of t){o&&i.endsWith("/")||(i+="/"),o=!1;for(const t of n)if(0===t.type)i+=t.value;else if(1===t.type){const{value:r,repeatable:s,optional:a}=t,l=r in e?e[r]:"";if(c(l)&&!s)throw new Error(`Provided param "${r}" is an array but it is not repeatable (* or + modifiers)`);const u=c(l)?l.join("/"):l;if(!u){if(!a)throw new Error(`Missing required param "${r}"`);n.length<2&&(i.endsWith("/")?i=i.slice(0,-1):o=!0)}i+=u}}return i||"/"}return{re:s,score:o,keys:r,parse:l,stringify:u}}function Q(t,e){let i=0;while(i<t.length&&i<e.length){const o=e[i]-t[i];if(o)return o;i++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function J(t,e){let i=0;const o=t.score,n=e.score;while(i<o.length&&i<n.length){const t=Q(o[i],n[i]);if(t)return t;i++}if(1===Math.abs(n.length-o.length)){if(Z(o))return 1;if(Z(n))return-1}return n.length-o.length}function Z(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const tt={type:0,value:""},et=/[a-zA-Z0-9_]/;function it(t){if(!t)return[[]];if("/"===t)return[[tt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${i})/"${u}": ${t}`)}let i=0,o=i;const n=[];let r;function s(){r&&n.push(r),r=[]}let a,l=0,u="",c="";function h(){u&&(0===i?r.push({type:0,value:u}):1===i||2===i||3===i?(r.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:c,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),u="")}function p(){u+=a}while(l<t.length)if(a=t[l++],"\\"!==a||2===i)switch(i){case 0:"/"===a?(u&&h(),s()):":"===a?(h(),i=1):p();break;case 4:p(),i=o;break;case 1:"("===a?i=2:et.test(a)?p():(h(),i=0,"*"!==a&&"?"!==a&&"+"!==a&&l--);break;case 2:")"===a?"\\"==c[c.length-1]?c=c.slice(0,-1)+a:i=3:c+=a;break;case 3:h(),i=0,"*"!==a&&"?"!==a&&"+"!==a&&l--,c="";break;default:e("Unknown state");break}else o=i,i=4;return 2===i&&e(`Unfinished custom RegExp for param "${u}"`),h(),s(),n}function ot(t,e,i){const o=X(it(t.path),i);const n=a(o,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf===!e.record.aliasOf&&e.children.push(n),n}function nt(t,e){const i=[],o=new Map;function n(t){return o.get(t)}function r(t,i,o){const n=!o,l=st(t);l.aliasOf=o&&o.record;const h=ct(e,t),p=[l];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)p.push(a({},l,{components:o?o.record.components:l.components,path:t,aliasOf:o?o.record:l}))}let d,f;for(const e of p){const{path:a}=e;if(i&&"/"!==a[0]){const t=i.record.path,o="/"===t[t.length-1]?"":"/";e.path=i.record.path+(a&&o+a)}if(d=ot(e,i,h),o?o.alias.push(d):(f=f||d,f!==d&&f.alias.push(d),n&&t.name&&!lt(d)&&s(t.name)),l.children){const t=l.children;for(let e=0;e<t.length;e++)r(t[e],d,o&&o.children[e])}o=o||d,(d.record.components&&Object.keys(d.record.components).length||d.record.name||d.record.redirect)&&c(d)}return f?()=>{s(f)}:u}function s(t){if(j(t)){const e=o.get(t);e&&(o.delete(t),i.splice(i.indexOf(e),1),e.children.forEach(s),e.alias.forEach(s))}else{const e=i.indexOf(t);e>-1&&(i.splice(e,1),t.record.name&&o.delete(t.record.name),t.children.forEach(s),t.alias.forEach(s))}}function l(){return i}function c(t){let e=0;while(e<i.length&&J(t,i[e])>=0&&(t.record.path!==i[e].record.path||!ht(t,i[e])))e++;i.splice(e,0,t),t.record.name&&!lt(t)&&o.set(t.record.name,t)}function h(t,e){let n,r,s,l={};if("name"in t&&t.name){if(n=o.get(t.name),!n)throw U(1,{location:t});0,s=n.record.name,l=a(rt(e.params,n.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params&&rt(t.params,n.keys.map((t=>t.name)))),r=n.stringify(l)}else if("path"in t)r=t.path,n=i.find((t=>t.re.test(r))),n&&(l=n.parse(r),s=n.record.name);else{if(n=e.name?o.get(e.name):i.find((t=>t.re.test(e.path))),!n)throw U(1,{location:t,currentLocation:e});s=n.record.name,l=a({},e.params,t.params),r=n.stringify(l)}const u=[];let c=n;while(c)u.unshift(c.record),c=c.parent;return{name:s,path:r,params:l,matched:u,meta:ut(u)}}return e=ct({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>r(t))),{addRoute:r,resolve:h,removeRoute:s,getRoutes:l,getRecordMatcher:n}}function rt(t,e){const i={};for(const o of e)o in t&&(i[o]=t[o]);return i}function st(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:at(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function at(t){const e={},i=t.props||!1;if("component"in t)e.default=i;else for(const o in t.components)e[o]="object"===typeof i?i[o]:i;return e}function lt(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ut(t){return t.reduce(((t,e)=>a(t,e.meta)),{})}function ct(t,e){const i={};for(const o in t)i[o]=o in e?e[o]:t[o];return i}function ht(t,e){return e.children.some((e=>e===t||ht(t,e)))}const pt=/#/g,dt=/&/g,ft=/\//g,gt=/=/g,yt=/\?/g,_t=/\+/g,mt=/%5B/g,vt=/%5D/g,bt=/%5E/g,Ct=/%60/g,wt=/%7B/g,St=/%7C/g,Et=/%7D/g,xt=/%20/g;function Ot(t){return encodeURI(""+t).replace(St,"|").replace(mt,"[").replace(vt,"]")}function Rt(t){return Ot(t).replace(wt,"{").replace(Et,"}").replace(bt,"^")}function It(t){return Ot(t).replace(_t,"%2B").replace(xt,"+").replace(pt,"%23").replace(dt,"%26").replace(Ct,"`").replace(wt,"{").replace(Et,"}").replace(bt,"^")}function Tt(t){return It(t).replace(gt,"%3D")}function Pt(t){return Ot(t).replace(pt,"%23").replace(yt,"%3F")}function Dt(t){return null==t?"":Pt(t).replace(ft,"%2F")}function kt(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function At(t){const e={};if(""===t||"?"===t)return e;const i="?"===t[0],o=(i?t.slice(1):t).split("&");for(let n=0;n<o.length;++n){const t=o[n].replace(_t," "),i=t.indexOf("="),r=kt(i<0?t:t.slice(0,i)),s=i<0?null:kt(t.slice(i+1));if(r in e){let t=e[r];c(t)||(t=e[r]=[t]),t.push(s)}else e[r]=s}return e}function Lt(t){let e="";for(let i in t){const o=t[i];if(i=Tt(i),null==o){void 0!==o&&(e+=(e.length?"&":"")+i);continue}const n=c(o)?o.map((t=>t&&It(t))):[o&&It(o)];n.forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+i,null!=t&&(e+="="+t))}))}return e}function Mt(t){const e={};for(const i in t){const o=t[i];void 0!==o&&(e[i]=c(o)?o.map((t=>null==t?null:""+t)):null==o?o:""+o)}return e}const Ft=Symbol(""),Nt=Symbol(""),Vt=Symbol(""),Bt=Symbol(""),Gt=Symbol("");function jt(){let t=[];function e(e){return t.push(e),()=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)}}function i(){t=[]}return{add:e,list:()=>t.slice(),reset:i}}function Ht(t,e,i,o,n){const r=o&&(o.enterCallbacks[n]=o.enterCallbacks[n]||[]);return()=>new Promise(((s,a)=>{const l=t=>{!1===t?a(U(4,{from:i,to:e})):t instanceof Error?a(t):G(t)?a(U(2,{from:e,to:t})):(r&&o.enterCallbacks[n]===r&&"function"===typeof t&&r.push(t),s())},u=t.call(o&&o.instances[n],e,i,l);let c=Promise.resolve(u);t.length<3&&(c=c.then(l)),c.catch((t=>a(t)))}))}function $t(t,e,i,o){const n=[];for(const r of t){0;for(const t in r.components){let a=r.components[t];if("beforeRouteEnter"===e||r.instances[t])if(Wt(a)){const s=a.__vccOpts||a,l=s[e];l&&n.push(Ht(l,i,o,r,t))}else{let l=a();0,n.push((()=>l.then((n=>{if(!n)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${r.path}"`));const a=s(n)?n.default:n;r.components[t]=a;const l=a.__vccOpts||a,u=l[e];return u&&Ht(u,i,o,r,t)()}))))}}}return n}function Wt(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function Ut(t){const e=(0,o.f3)(Vt),i=(0,o.f3)(Bt),r=(0,o.Fl)((()=>e.resolve((0,n.SU)(t.to)))),s=(0,o.Fl)((()=>{const{matched:t}=r.value,{length:e}=t,o=t[e-1],n=i.matched;if(!o||!n.length)return-1;const s=n.findIndex(_.bind(null,o));if(s>-1)return s;const a=Xt(t[e-2]);return e>1&&Xt(o)===a&&n[n.length-1].path!==a?n.findIndex(_.bind(null,t[e-2])):s})),a=(0,o.Fl)((()=>s.value>-1&&qt(i.params,r.value.params))),l=(0,o.Fl)((()=>s.value>-1&&s.value===i.matched.length-1&&m(i.params,r.value.params)));function c(i={}){return Yt(i)?e[(0,n.SU)(t.replace)?"replace":"push"]((0,n.SU)(t.to)).catch(u):Promise.resolve()}return{route:r,href:(0,o.Fl)((()=>r.value.href)),isActive:a,isExactActive:l,navigate:c}}const zt=(0,o.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ut,setup(t,{slots:e}){const i=(0,n.qj)(Ut(t)),{options:r}=(0,o.f3)(Vt),s=(0,o.Fl)((()=>({[Qt(t.activeClass,r.linkActiveClass,"router-link-active")]:i.isActive,[Qt(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive})));return()=>{const n=e.default&&e.default(i);return t.custom?n:(0,o.h)("a",{"aria-current":i.isExactActive?t.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},n)}}}),Kt=zt;function Yt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function qt(t,e){for(const i in e){const o=e[i],n=t[i];if("string"===typeof o){if(o!==n)return!1}else if(!c(n)||n.length!==o.length||o.some(((t,e)=>t!==n[e])))return!1}return!0}function Xt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Qt=(t,e,i)=>null!=t?t:null!=e?e:i,Jt=(0,o.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:i}){const r=(0,o.f3)(Gt),s=(0,o.Fl)((()=>t.route||r.value)),l=(0,o.f3)(Nt,0),u=(0,o.Fl)((()=>{let t=(0,n.SU)(l);const{matched:e}=s.value;let i;while((i=e[t])&&!i.components)t++;return t})),c=(0,o.Fl)((()=>s.value.matched[u.value]));(0,o.JJ)(Nt,(0,o.Fl)((()=>u.value+1))),(0,o.JJ)(Ft,c),(0,o.JJ)(Gt,s);const h=(0,n.iH)();return(0,o.YP)((()=>[h.value,c.value,t.name]),(([t,e,i],[o,n,r])=>{e&&(e.instances[i]=t,n&&n!==e&&t&&t===o&&(e.leaveGuards.size||(e.leaveGuards=n.leaveGuards),e.updateGuards.size||(e.updateGuards=n.updateGuards))),!t||!e||n&&_(e,n)&&o||(e.enterCallbacks[i]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const n=s.value,r=t.name,l=c.value,u=l&&l.components[r];if(!u)return Zt(i.default,{Component:u,route:n});const p=l.props[r],d=p?!0===p?n.params:"function"===typeof p?p(n):p:null,f=t=>{t.component.isUnmounted&&(l.instances[r]=null)},g=(0,o.h)(u,a({},d,e,{onVnodeUnmounted:f,ref:h}));return Zt(i.default,{Component:g,route:n})||g}}});function Zt(t,e){if(!t)return null;const i=t(e);return 1===i.length?i[0]:i}const te=Jt;function ee(t){const e=nt(t.routes,t),i=t.parseQuery||At,s=t.stringifyQuery||Lt,h=t.history;const p=jt(),g=jt(),_=jt(),m=(0,n.XI)(H);let v=H;r&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=l.bind(null,(t=>""+t)),C=l.bind(null,Dt),S=l.bind(null,kt);function E(t,i){let o,n;return j(t)?(o=e.getRecordMatcher(t),n=i):n=t,e.addRoute(n,o)}function x(t){const i=e.getRecordMatcher(t);i&&e.removeRoute(i)}function O(){return e.getRoutes().map((t=>t.record))}function R(t){return!!e.getRecordMatcher(t)}function D(t,o){if(o=a({},o||m.value),"string"===typeof t){const n=d(i,t,o.path),r=e.resolve({path:n.path},o),s=h.createHref(n.fullPath);return a(n,r,{params:S(r.params),hash:kt(n.hash),redirectedFrom:void 0,href:s})}let n;if("path"in t)n=a({},t,{path:d(i,t.path,o.path).path});else{const e=a({},t.params);for(const t in e)null==e[t]&&delete e[t];n=a({},t,{params:C(e)}),o.params=C(o.params)}const r=e.resolve(n,o),l=t.hash||"";r.params=b(S(r.params));const u=f(s,a({},t,{hash:Rt(l),path:r.path})),c=h.createHref(u);return a({fullPath:u,hash:l,query:s===Lt?Mt(t.query):t.query||{}},r,{redirectedFrom:void 0,href:c})}function L(t){return"string"===typeof t?d(i,t,m.value.path):a({},t)}function M(t,e){if(v!==t)return U(8,{from:e,to:t})}function F(t){return B(t)}function N(t){return F(a(L(t),{replace:!0}))}function V(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:i}=e;let o="function"===typeof i?i(t):i;return"string"===typeof o&&(o=o.includes("?")||o.includes("#")?o=L(o):{path:o},o.params={}),a({query:t.query,hash:t.hash,params:"path"in o?{}:t.params},o)}}function B(t,e){const i=v=D(t),o=m.value,n=t.state,r=t.force,l=!0===t.replace,u=V(i);if(u)return B(a(L(u),{state:"object"===typeof u?a({},n,u.state):n,force:r,replace:l}),e||i);const c=i;let h;return c.redirectedFrom=e,!r&&y(s,o,i)&&(h=U(16,{to:c,from:o}),ot(o,o,!0,!1)),(h?Promise.resolve(h):W(c,o)).catch((t=>z(t)?z(t,2)?t:it(t):tt(t,c,o))).then((t=>{if(t){if(z(t,2))return B(a({replace:l},L(t.to),{state:"object"===typeof t.to?a({},n,t.to.state):n,force:r}),e||c)}else t=Y(c,o,!0,l,n);return K(c,o,t),t}))}function G(t,e){const i=M(t,e);return i?Promise.reject(i):Promise.resolve()}function $(t){const e=at.values().next().value;return e&&"function"===typeof e.runWithContext?e.runWithContext(t):t()}function W(t,e){let i;const[o,n,r]=ie(t,e);i=$t(o.reverse(),"beforeRouteLeave",t,e);for(const a of o)a.leaveGuards.forEach((o=>{i.push(Ht(o,t,e))}));const s=G.bind(null,t,e);return i.push(s),ut(i).then((()=>{i=[];for(const o of p.list())i.push(Ht(o,t,e));return i.push(s),ut(i)})).then((()=>{i=$t(n,"beforeRouteUpdate",t,e);for(const o of n)o.updateGuards.forEach((o=>{i.push(Ht(o,t,e))}));return i.push(s),ut(i)})).then((()=>{i=[];for(const o of r)if(o.beforeEnter)if(c(o.beforeEnter))for(const n of o.beforeEnter)i.push(Ht(n,t,e));else i.push(Ht(o.beforeEnter,t,e));return i.push(s),ut(i)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),i=$t(r,"beforeRouteEnter",t,e),i.push(s),ut(i)))).then((()=>{i=[];for(const o of g.list())i.push(Ht(o,t,e));return i.push(s),ut(i)})).catch((t=>z(t,8)?t:Promise.reject(t)))}function K(t,e,i){_.list().forEach((o=>$((()=>o(t,e,i)))))}function Y(t,e,i,o,n){const s=M(t,e);if(s)return s;const l=e===H,u=r?history.state:{};i&&(o||l?h.replace(t.fullPath,a({scroll:l&&u&&u.scroll},n)):h.push(t.fullPath,n)),m.value=t,ot(t,e,i,l),it()}let q;function X(){q||(q=h.listen(((t,e,i)=>{if(!lt.listening)return;const o=D(t),n=V(o);if(n)return void B(a(n,{replace:!0}),o).catch(u);v=o;const s=m.value;r&&k(P(s.fullPath,i.delta),I()),W(o,s).catch((t=>z(t,12)?t:z(t,2)?(B(t.to,o).then((t=>{z(t,20)&&!i.delta&&i.type===w.pop&&h.go(-1,!1)})).catch(u),Promise.reject()):(i.delta&&h.go(-i.delta,!1),tt(t,o,s)))).then((t=>{t=t||Y(o,s,!1),t&&(i.delta&&!z(t,8)?h.go(-i.delta,!1):i.type===w.pop&&z(t,20)&&h.go(-1,!1)),K(o,s,t)})).catch(u)})))}let Q,J=jt(),Z=jt();function tt(t,e,i){it(t);const o=Z.list();return o.length?o.forEach((o=>o(t,e,i))):console.error(t),Promise.reject(t)}function et(){return Q&&m.value!==H?Promise.resolve():new Promise(((t,e)=>{J.add([t,e])}))}function it(t){return Q||(Q=!t,X(),J.list().forEach((([e,i])=>t?i(t):e())),J.reset()),t}function ot(e,i,n,s){const{scrollBehavior:a}=t;if(!r||!a)return Promise.resolve();const l=!n&&A(P(e.fullPath,0))||(s||!n)&&history.state&&history.state.scroll||null;return(0,o.Y3)().then((()=>a(e,i,l))).then((t=>t&&T(t))).catch((t=>tt(t,e,i)))}const rt=t=>h.go(t);let st;const at=new Set,lt={currentRoute:m,listening:!0,addRoute:E,removeRoute:x,hasRoute:R,getRoutes:O,resolve:D,options:t,push:F,replace:N,go:rt,back:()=>rt(-1),forward:()=>rt(1),beforeEach:p.add,beforeResolve:g.add,afterEach:_.add,onError:Z.add,isReady:et,install(t){const e=this;t.component("RouterLink",Kt),t.component("RouterView",te),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,n.SU)(m)}),r&&!st&&m.value===H&&(st=!0,F(h.location).catch((t=>{0})));const i={};for(const n in H)Object.defineProperty(i,n,{get:()=>m.value[n],enumerable:!0});t.provide(Vt,e),t.provide(Bt,(0,n.Um)(i)),t.provide(Gt,m);const o=t.unmount;at.add(t),t.unmount=function(){at.delete(t),at.size<1&&(v=H,q&&q(),q=null,m.value=H,st=!1,Q=!1),o()}}};function ut(t){return t.reduce(((t,e)=>t.then((()=>$(e)))),Promise.resolve())}return lt}function ie(t,e){const i=[],o=[],n=[],r=Math.max(e.matched.length,t.matched.length);for(let s=0;s<r;s++){const r=e.matched[s];r&&(t.matched.find((t=>_(t,r)))?o.push(r):i.push(r));const a=t.matched[s];a&&(e.matched.find((t=>_(t,a)))||n.push(a))}return[i,o,n]}}}]);
//# sourceMappingURL=chunk-vendors.612f961f.js.map